{
  "module_name": "test_core_reloc_type_id.c",
  "hash_id": "a42239102bfe4d8faead70258f0669b0abe0afa9efd4448625ac0406e0fe5f8d",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/bpf/progs/test_core_reloc_type_id.c",
  "human_readable_source": "\n\n\n#include <linux/bpf.h>\n#include <stdint.h>\n#include <stdbool.h>\n#include <bpf/bpf_helpers.h>\n#include <bpf/bpf_core_read.h>\n\nchar _license[] SEC(\"license\") = \"GPL\";\n\nstruct {\n\tchar in[256];\n\tchar out[256];\n\tbool skip;\n} data = {};\n\n \nstruct a_struct {\n\tint x;\n};\n\nunion a_union {\n\tint y;\n\tint z;\n};\n\nenum an_enum {\n\tAN_ENUM_VAL1 = 1,\n\tAN_ENUM_VAL2 = 2,\n\tAN_ENUM_VAL3 = 3,\n};\n\ntypedef struct a_struct named_struct_typedef;\n\ntypedef int (*func_proto_typedef)(long);\n\ntypedef char arr_typedef[20];\n\nstruct core_reloc_type_id_output {\n\tint local_anon_struct;\n\tint local_anon_union;\n\tint local_anon_enum;\n\tint local_anon_func_proto_ptr;\n\tint local_anon_void_ptr;\n\tint local_anon_arr;\n\n\tint local_struct;\n\tint local_union;\n\tint local_enum;\n\tint local_int;\n\tint local_struct_typedef;\n\tint local_func_proto_typedef;\n\tint local_arr_typedef;\n\n\tint targ_struct;\n\tint targ_union;\n\tint targ_enum;\n\tint targ_int;\n\tint targ_struct_typedef;\n\tint targ_func_proto_typedef;\n\tint targ_arr_typedef;\n};\n\n \nstruct a_struct t1 = {};\nunion a_union t2 = {};\nenum an_enum t3 = 0;\nnamed_struct_typedef t4 = {};\nfunc_proto_typedef t5 = 0;\narr_typedef t6 = {};\n\nSEC(\"raw_tracepoint/sys_enter\")\nint test_core_type_id(void *ctx)\n{\n\t \n#if __has_builtin(__builtin_preserve_type_info)\n\tstruct core_reloc_type_id_output *out = (void *)&data.out;\n\n\tout->local_anon_struct = bpf_core_type_id_local(struct { int marker_field; });\n\tout->local_anon_union = bpf_core_type_id_local(union { int marker_field; });\n\tout->local_anon_enum = bpf_core_type_id_local(enum { MARKER_ENUM_VAL = 123 });\n\tout->local_anon_func_proto_ptr = bpf_core_type_id_local(_Bool(*)(int));\n\tout->local_anon_void_ptr = bpf_core_type_id_local(void *);\n\tout->local_anon_arr = bpf_core_type_id_local(_Bool[47]);\n\n\tout->local_struct = bpf_core_type_id_local(struct a_struct);\n\tout->local_union = bpf_core_type_id_local(union a_union);\n\tout->local_enum = bpf_core_type_id_local(enum an_enum);\n\tout->local_int = bpf_core_type_id_local(int);\n\tout->local_struct_typedef = bpf_core_type_id_local(named_struct_typedef);\n\tout->local_func_proto_typedef = bpf_core_type_id_local(func_proto_typedef);\n\tout->local_arr_typedef = bpf_core_type_id_local(arr_typedef);\n\n\tout->targ_struct = bpf_core_type_id_kernel(struct a_struct);\n\tout->targ_union = bpf_core_type_id_kernel(union a_union);\n\tout->targ_enum = bpf_core_type_id_kernel(enum an_enum);\n\tout->targ_int = bpf_core_type_id_kernel(int);\n\tout->targ_struct_typedef = bpf_core_type_id_kernel(named_struct_typedef);\n\tout->targ_func_proto_typedef = bpf_core_type_id_kernel(func_proto_typedef);\n\tout->targ_arr_typedef = bpf_core_type_id_kernel(arr_typedef);\n#else\n\tdata.skip = true;\n#endif\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}