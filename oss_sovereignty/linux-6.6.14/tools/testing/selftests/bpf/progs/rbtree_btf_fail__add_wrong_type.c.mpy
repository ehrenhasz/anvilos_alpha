{
  "module_name": "rbtree_btf_fail__add_wrong_type.c",
  "hash_id": "c70391222b901c315df3409f12e0e32353147c4ca1d342bc7bbd12ae6a095002",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/bpf/progs/rbtree_btf_fail__add_wrong_type.c",
  "human_readable_source": "\n \n\n#include <vmlinux.h>\n#include <bpf/bpf_tracing.h>\n#include <bpf/bpf_helpers.h>\n#include <bpf/bpf_core_read.h>\n#include \"bpf_experimental.h\"\n\nstruct node_data {\n\tint key;\n\tint data;\n\tstruct bpf_rb_node node;\n};\n\nstruct node_data2 {\n\tint key;\n\tstruct bpf_rb_node node;\n\tint data;\n};\n\nstatic bool less2(struct bpf_rb_node *a, const struct bpf_rb_node *b)\n{\n\tstruct node_data2 *node_a;\n\tstruct node_data2 *node_b;\n\n\tnode_a = container_of(a, struct node_data2, node);\n\tnode_b = container_of(b, struct node_data2, node);\n\n\treturn node_a->key < node_b->key;\n}\n\n#define private(name) SEC(\".data.\" #name) __hidden __attribute__((aligned(8)))\nprivate(A) struct bpf_spin_lock glock;\nprivate(A) struct bpf_rb_root groot __contains(node_data, node);\n\nSEC(\"tc\")\nlong rbtree_api_add__add_wrong_type(void *ctx)\n{\n\tstruct node_data2 *n;\n\n\tn = bpf_obj_new(typeof(*n));\n\tif (!n)\n\t\treturn 1;\n\n\tbpf_spin_lock(&glock);\n\tbpf_rbtree_add(&groot, &n->node, less2);\n\tbpf_spin_unlock(&glock);\n\treturn 0;\n}\n\nchar _license[] SEC(\"license\") = \"GPL\";\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}