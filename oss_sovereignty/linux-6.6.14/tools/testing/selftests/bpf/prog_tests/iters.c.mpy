{
  "module_name": "iters.c",
  "hash_id": "60c1e5c31d73ea805eaf7bc6f26d5d9ab144834c9a6d453d34b036c6d23c6c35",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/bpf/prog_tests/iters.c",
  "human_readable_source": "\n \n\n#include <test_progs.h>\n\n#include \"iters.skel.h\"\n#include \"iters_state_safety.skel.h\"\n#include \"iters_looping.skel.h\"\n#include \"iters_num.skel.h\"\n#include \"iters_testmod_seq.skel.h\"\n\nstatic void subtest_num_iters(void)\n{\n\tstruct iters_num *skel;\n\tint err;\n\n\tskel = iters_num__open_and_load();\n\tif (!ASSERT_OK_PTR(skel, \"skel_open_and_load\"))\n\t\treturn;\n\n\terr = iters_num__attach(skel);\n\tif (!ASSERT_OK(err, \"skel_attach\"))\n\t\tgoto cleanup;\n\n\tusleep(1);\n\titers_num__detach(skel);\n\n#define VALIDATE_CASE(case_name)\t\t\t\t\t\\\n\tASSERT_EQ(skel->bss->res_##case_name,\t\t\t\t\\\n\t\t  skel->rodata->exp_##case_name,\t\t\t\\\n\t\t  #case_name)\n\n\tVALIDATE_CASE(empty_zero);\n\tVALIDATE_CASE(empty_int_min);\n\tVALIDATE_CASE(empty_int_max);\n\tVALIDATE_CASE(empty_minus_one);\n\n\tVALIDATE_CASE(simple_sum);\n\tVALIDATE_CASE(neg_sum);\n\tVALIDATE_CASE(very_neg_sum);\n\tVALIDATE_CASE(neg_pos_sum);\n\n\tVALIDATE_CASE(invalid_range);\n\tVALIDATE_CASE(max_range);\n\tVALIDATE_CASE(e2big_range);\n\n\tVALIDATE_CASE(succ_elem_cnt);\n\tVALIDATE_CASE(overfetched_elem_cnt);\n\tVALIDATE_CASE(fail_elem_cnt);\n\n#undef VALIDATE_CASE\n\ncleanup:\n\titers_num__destroy(skel);\n}\n\nstatic void subtest_testmod_seq_iters(void)\n{\n\tstruct iters_testmod_seq *skel;\n\tint err;\n\n\tif (!env.has_testmod) {\n\t\ttest__skip();\n\t\treturn;\n\t}\n\n\tskel = iters_testmod_seq__open_and_load();\n\tif (!ASSERT_OK_PTR(skel, \"skel_open_and_load\"))\n\t\treturn;\n\n\terr = iters_testmod_seq__attach(skel);\n\tif (!ASSERT_OK(err, \"skel_attach\"))\n\t\tgoto cleanup;\n\n\tusleep(1);\n\titers_testmod_seq__detach(skel);\n\n#define VALIDATE_CASE(case_name)\t\t\t\t\t\\\n\tASSERT_EQ(skel->bss->res_##case_name,\t\t\t\t\\\n\t\t  skel->rodata->exp_##case_name,\t\t\t\\\n\t\t  #case_name)\n\n\tVALIDATE_CASE(empty);\n\tVALIDATE_CASE(full);\n\tVALIDATE_CASE(truncated);\n\n#undef VALIDATE_CASE\n\ncleanup:\n\titers_testmod_seq__destroy(skel);\n}\n\nvoid test_iters(void)\n{\n\tRUN_TESTS(iters_state_safety);\n\tRUN_TESTS(iters_looping);\n\tRUN_TESTS(iters);\n\n\tif (env.has_testmod)\n\t\tRUN_TESTS(iters_testmod_seq);\n\n\tif (test__start_subtest(\"num\"))\n\t\tsubtest_num_iters();\n\tif (test__start_subtest(\"testmod_seq\"))\n\t\tsubtest_testmod_seq_iters();\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}