{
  "module_name": "run_bench_ringbufs.sh",
  "hash_id": "6bba0822e9284904b817cd8d280a35872bc1ad4abe696ec80c0588ed88b9196d",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/bpf/benchs/run_bench_ringbufs.sh",
  "human_readable_source": "#!/bin/bash\n\nsource ./benchs/run_common.sh\n\nset -eufo pipefail\n\nRUN_RB_BENCH=\"$RUN_BENCH -c1\"\n\nheader \"Single-producer, parallel producer\"\nfor b in rb-libbpf rb-custom pb-libbpf pb-custom; do\n\tsummarize $b \"$($RUN_RB_BENCH $b)\"\ndone\n\nheader \"Single-producer, parallel producer, sampled notification\"\nfor b in rb-libbpf rb-custom pb-libbpf pb-custom; do\n\tsummarize $b \"$($RUN_RB_BENCH --rb-sampled $b)\"\ndone\n\nheader \"Single-producer, back-to-back mode\"\nfor b in rb-libbpf rb-custom pb-libbpf pb-custom; do\n\tsummarize $b \"$($RUN_RB_BENCH --rb-b2b $b)\"\n\tsummarize $b-sampled \"$($RUN_RB_BENCH --rb-sampled --rb-b2b $b)\"\ndone\n\nheader \"Ringbuf back-to-back, effect of sample rate\"\nfor b in 1 5 10 25 50 100 250 500 1000 2000 3000; do\n\tsummarize \"rb-sampled-$b\" \"$($RUN_RB_BENCH --rb-b2b --rb-batch-cnt $b --rb-sampled --rb-sample-rate $b rb-custom)\"\ndone\nheader \"Perfbuf back-to-back, effect of sample rate\"\nfor b in 1 5 10 25 50 100 250 500 1000 2000 3000; do\n\tsummarize \"pb-sampled-$b\" \"$($RUN_RB_BENCH --rb-b2b --rb-batch-cnt $b --rb-sampled --rb-sample-rate $b pb-custom)\"\ndone\n\nheader \"Ringbuf back-to-back, reserve+commit vs output\"\nsummarize \"reserve\" \"$($RUN_RB_BENCH --rb-b2b                 rb-custom)\"\nsummarize \"output\"  \"$($RUN_RB_BENCH --rb-b2b --rb-use-output rb-custom)\"\n\nheader \"Ringbuf sampled, reserve+commit vs output\"\nsummarize \"reserve-sampled\" \"$($RUN_RB_BENCH --rb-sampled                 rb-custom)\"\nsummarize \"output-sampled\"  \"$($RUN_RB_BENCH --rb-sampled --rb-use-output rb-custom)\"\n\nheader \"Single-producer, consumer/producer competing on the same CPU, low batch count\"\nfor b in rb-libbpf rb-custom pb-libbpf pb-custom; do\n\tsummarize $b \"$($RUN_RB_BENCH --rb-batch-cnt 1 --rb-sample-rate 1 --prod-affinity 0 --cons-affinity 0 $b)\"\ndone\n\nheader \"Ringbuf, multi-producer contention\"\nfor b in 1 2 3 4 8 12 16 20 24 28 32 36 40 44 48 52; do\n\tsummarize \"rb-libbpf nr_prod $b\" \"$($RUN_RB_BENCH -p$b --rb-batch-cnt 50 rb-libbpf)\"\ndone\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}