{
  "module_name": "proc-loadavg-001.c",
  "hash_id": "5b0a2ac6a241c2d3ab67d73906425c4dee6fe4bbfc356ef2457e3671fd0fff7f",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/proc/proc-loadavg-001.c",
  "human_readable_source": " \n \n#include <errno.h>\n#include <sched.h>\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <fcntl.h>\n#include <unistd.h>\n#include <sys/wait.h>\n\nint main(void)\n{\n\tpid_t pid;\n\tint wstatus;\n\n\tif (unshare(CLONE_NEWPID) == -1) {\n\t\tif (errno == ENOSYS || errno == EPERM)\n\t\t\treturn 4;\n\t\treturn 1;\n\t}\n\n\tpid = fork();\n\tif (pid == -1)\n\t\treturn 1;\n\tif (pid == 0) {\n\t\tchar buf[128], *p;\n\t\tint fd;\n\t\tssize_t rv;\n\n\t\tfd = open(\"/proc/loadavg\" , O_RDONLY);\n\t\tif (fd == -1)\n\t\t\treturn 1;\n\t\trv = read(fd, buf, sizeof(buf));\n\t\tif (rv < 3)\n\t\t\treturn 1;\n\t\tp = buf + rv;\n\n\t\t \n\t\tif (!(p[-3] == ' ' && p[-2] == '1' && p[-1] == '\\n'))\n\t\t\treturn 1;\n\n\t\tpid = fork();\n\t\tif (pid == -1)\n\t\t\treturn 1;\n\t\tif (pid == 0)\n\t\t\treturn 0;\n\t\tif (waitpid(pid, NULL, 0) == -1)\n\t\t\treturn 1;\n\n\t\tlseek(fd, 0, SEEK_SET);\n\t\trv = read(fd, buf, sizeof(buf));\n\t\tif (rv < 3)\n\t\t\treturn 1;\n\t\tp = buf + rv;\n\n\t\t \n\t\tif (!(p[-3] == ' ' && p[-2] == '2' && p[-1] == '\\n'))\n\t\t\treturn 1;\n\n\t\treturn 0;\n\t}\n\n\tif (waitpid(pid, &wstatus, 0) == -1)\n\t\treturn 1;\n\tif (WIFEXITED(wstatus) && WEXITSTATUS(wstatus) == 0)\n\t\treturn 0;\n\treturn 1;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}