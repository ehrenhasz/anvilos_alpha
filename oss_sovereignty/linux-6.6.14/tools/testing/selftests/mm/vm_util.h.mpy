{
  "module_name": "vm_util.h",
  "hash_id": "c3e11c3016246e4f4b8ba80979ebefaeaab720cbf502574ded89cae67d9c9ba9",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/mm/vm_util.h",
  "human_readable_source": " \n#include <stdint.h>\n#include <stdbool.h>\n#include <sys/mman.h>\n#include <err.h>\n#include <string.h>  \n#include <unistd.h>  \n\n#define BIT_ULL(nr)                   (1ULL << (nr))\n#define PM_SOFT_DIRTY                 BIT_ULL(55)\n#define PM_MMAP_EXCLUSIVE             BIT_ULL(56)\n#define PM_UFFD_WP                    BIT_ULL(57)\n#define PM_FILE                       BIT_ULL(61)\n#define PM_SWAP                       BIT_ULL(62)\n#define PM_PRESENT                    BIT_ULL(63)\n\nextern unsigned int __page_size;\nextern unsigned int __page_shift;\n\nstatic inline unsigned int psize(void)\n{\n\tif (!__page_size)\n\t\t__page_size = sysconf(_SC_PAGESIZE);\n\treturn __page_size;\n}\n\nstatic inline unsigned int pshift(void)\n{\n\tif (!__page_shift)\n\t\t__page_shift = (ffsl(psize()) - 1);\n\treturn __page_shift;\n}\n\nuint64_t pagemap_get_entry(int fd, char *start);\nbool pagemap_is_softdirty(int fd, char *start);\nbool pagemap_is_swapped(int fd, char *start);\nbool pagemap_is_populated(int fd, char *start);\nunsigned long pagemap_get_pfn(int fd, char *start);\nvoid clear_softdirty(void);\nbool check_for_pattern(FILE *fp, const char *pattern, char *buf, size_t len);\nuint64_t read_pmd_pagesize(void);\nbool check_huge_anon(void *addr, int nr_hpages, uint64_t hpage_size);\nbool check_huge_file(void *addr, int nr_hpages, uint64_t hpage_size);\nbool check_huge_shmem(void *addr, int nr_hpages, uint64_t hpage_size);\nint64_t allocate_transhuge(void *ptr, int pagemap_fd);\nunsigned long default_huge_page_size(void);\nint detect_hugetlb_page_sizes(size_t sizes[], int max);\n\nint uffd_register(int uffd, void *addr, uint64_t len,\n\t\t  bool miss, bool wp, bool minor);\nint uffd_unregister(int uffd, void *addr, uint64_t len);\nint uffd_register_with_ioctls(int uffd, void *addr, uint64_t len,\n\t\t\t      bool miss, bool wp, bool minor, uint64_t *ioctls);\n\n \n#define HPAGE_SHIFT 21\n#define HPAGE_SIZE (1 << HPAGE_SHIFT)\n\n#define PAGEMAP_PRESENT(ent)\t(((ent) & (1ull << 63)) != 0)\n#define PAGEMAP_PFN(ent)\t((ent) & ((1ull << 55) - 1))\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}