{
  "module_name": "bind_bhash.sh",
  "hash_id": "6acebd7c1eb4a567a777223ca08092e6b47e7909d6bc9129e936a2948ef0a9d8",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/net/bind_bhash.sh",
  "human_readable_source": "#!/bin/bash\n# SPDX-License-Identifier: GPL-2.0\n\nNR_FILES=32768\nreadonly NETNS=\"ns-$(mktemp -u XXXXXX)\"\n\n# default values\nport=443\naddr_v6=\"2001:0db8:0:f101::1\"\naddr_v4=\"10.8.8.8\"\nuse_v6=true\naddr=\"\"\n\nusage() {\n    echo \"Usage: $0 [-6 | -4] [-p port] [-a address]\"\n    echo -e \"\\t6: use ipv6\"\n    echo -e \"\\t4: use ipv4\"\n    echo -e \"\\tport: Port number\"\n    echo -e \"\\taddress: ip address\"\n}\n\nwhile getopts \"ha:p:64\" opt; do\n    case ${opt} in\n\th)\n\t    usage $0\n\t    exit 0\n\t    ;;\n\ta)  addr=$OPTARG;;\n\tp)\n\t    port=$OPTARG;;\n\t6)\n\t    use_v6=true;;\n\t4)\n\t    use_v6=false;;\n    esac\ndone\n\nsetup() {\n    ip netns add \"${NETNS}\"\n    ip -netns \"${NETNS}\" link add veth0 type veth peer name veth1\n    ip -netns \"${NETNS}\" link set lo up\n    ip -netns \"${NETNS}\" link set veth0 up\n    ip -netns \"${NETNS}\" link set veth1 up\n\n    if [[ \"$use_v6\" == true ]]; then\n        ip -netns \"${NETNS}\" addr add $addr_v6 nodad dev veth0\n    else\n        ip -netns \"${NETNS}\" addr add $addr_v4 dev lo\n    fi\n}\n\ncleanup() {\n    ip netns del \"${NETNS}\"\n}\n\nif [[ \"$addr\" != \"\" ]]; then\n    addr_v4=$addr;\n    addr_v6=$addr;\nfi\nsetup\nif [[ \"$use_v6\" == true ]] ; then\n    ip netns exec \"${NETNS}\" sh -c \\\n        \"ulimit -n ${NR_FILES};./bind_bhash ${port} ipv6 ${addr_v6}\"\nelse\n    ip netns exec \"${NETNS}\" sh -c \\\n        \"ulimit -n ${NR_FILES};./bind_bhash ${port} ipv4 ${addr_v4}\"\nfi\ncleanup\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}