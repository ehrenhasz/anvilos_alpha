{
  "module_name": "reuseaddr_ports_exhausted.sh",
  "hash_id": "7a39ed3d1a9d4e71a6fce73cb9d00d6d6c1191b9d8874f82d2f639516a41df39",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/net/reuseaddr_ports_exhausted.sh",
  "human_readable_source": "#!/bin/bash\n# SPDX-License-Identifier: GPL-2.0\n#\n# Run tests when all ephemeral ports are exhausted.\n#\n# Author: Kuniyuki Iwashima <kuniyu@amazon.co.jp>\n\nset +x\nset -e\n\nreadonly NETNS=\"ns-$(mktemp -u XXXXXX)\"\n\nsetup() {\n\tip netns add \"${NETNS}\"\n\tip -netns \"${NETNS}\" link set lo up\n\tip netns exec \"${NETNS}\" \\\n\t\tsysctl -w net.ipv4.ip_local_port_range=\"32768 32768\" \\\n\t\t> /dev/null 2>&1\n\tip netns exec \"${NETNS}\" \\\n\t\tsysctl -w net.ipv4.ip_autobind_reuse=1 > /dev/null 2>&1\n}\n\ncleanup() {\n\tip netns del \"${NETNS}\"\n}\n\ntrap cleanup EXIT\nsetup\n\ndo_test() {\n\tip netns exec \"${NETNS}\" ./reuseaddr_ports_exhausted\n}\n\ndo_test\necho \"tests done\"\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}