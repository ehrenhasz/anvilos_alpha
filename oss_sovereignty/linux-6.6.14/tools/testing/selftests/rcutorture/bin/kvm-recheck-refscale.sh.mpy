{
  "module_name": "kvm-recheck-refscale.sh",
  "hash_id": "b22439078ac94d43f3e86d3a286f97607b81dbee2f9c0c6962c611df867b1246",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/rcutorture/bin/kvm-recheck-refscale.sh",
  "human_readable_source": "#!/bin/bash\n# SPDX-License-Identifier: GPL-2.0+\n#\n# Analyze a given results directory for refscale performance measurements.\n#\n# Usage: kvm-recheck-refscale.sh resdir\n#\n# Copyright (C) IBM Corporation, 2016\n#\n# Authors: Paul E. McKenney <paulmck@linux.ibm.com>\n\ni=\"$1\"\nif test -d \"$i\" -a -r \"$i\"\nthen\n\t:\nelse\n\techo Unreadable results directory: $i\n\texit 1\nfi\nPATH=`pwd`/tools/testing/selftests/rcutorture/bin:$PATH; export PATH\n. functions.sh\n\nconfigfile=`echo $i | sed -e 's/^.*\\///'`\n\nsed -e 's/^\\[[^]]*]//' < $i/console.log | tr -d '\\015' |\nawk -v configfile=\"$configfile\" '\n/^[ \t]*Runs\tTime\\(ns\\) *$/ {\n\tif (dataphase + 0 == 0) {\n\t\tdataphase = 1;\n\t\t# print configfile, $0;\n\t}\n\tnext;\n}\n\n/[^ \t]*[0-9][0-9]*\t[0-9][0-9]*\\.[0-9][0-9]*$/ {\n\tif (dataphase == 1) {\n\t\t# print $0;\n\t\treadertimes[++n] = $2;\n\t\tsum += $2;\n\t}\n\tnext;\n}\n\n{\n\tif (dataphase == 1)\n\t\tdataphase == 2;\n\tnext;\n}\n\nEND {\n\tprint configfile \" results:\";\n\tnewNR = asort(readertimes);\n\tif (newNR <= 0) {\n\t\tprint \"No refscale records found???\"\n\t\texit;\n\t}\n\tmedianidx = int(newNR / 2);\n\tif (newNR == medianidx * 2)\n\t\tmedianvalue = (readertimes[medianidx - 1] + readertimes[medianidx]) / 2;\n\telse\n\t\tmedianvalue = readertimes[medianidx];\n\tpoints = \"Points:\";\n\tfor (i = 1; i <= newNR; i++)\n\t\tpoints = points \" \" readertimes[i];\n\tprint points;\n\tprint \"Average reader duration: \" sum / newNR \" nanoseconds\";\n\tprint \"Minimum reader duration: \" readertimes[1];\n\tprint \"Median reader duration: \" medianvalue;\n\tprint \"Maximum reader duration: \" readertimes[newNR];\n\tprint \"Computed from refscale printk output.\";\n}'\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}