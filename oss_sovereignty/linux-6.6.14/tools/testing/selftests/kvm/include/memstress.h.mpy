{
  "module_name": "memstress.h",
  "hash_id": "7f2c05d497a5512e6c2ab2c2de4c950cf413f1f9a0e53a56ae02fe343d48235e",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/kvm/include/memstress.h",
  "human_readable_source": "\n \n\n#ifndef SELFTEST_KVM_MEMSTRESS_H\n#define SELFTEST_KVM_MEMSTRESS_H\n\n#include <pthread.h>\n\n#include \"kvm_util.h\"\n\n \n#define DEFAULT_GUEST_TEST_MEM\t\t0xc0000000\n\n#define DEFAULT_PER_VCPU_MEM_SIZE\t(1 << 30)  \n\n#define MEMSTRESS_MEM_SLOT_INDEX\t1\n\nstruct memstress_vcpu_args {\n\tuint64_t gpa;\n\tuint64_t gva;\n\tuint64_t pages;\n\n\t \n\tstruct kvm_vcpu *vcpu;\n\tint vcpu_idx;\n};\n\nstruct memstress_args {\n\tstruct kvm_vm *vm;\n\t \n\tuint64_t gpa;\n\tuint64_t size;\n\tuint64_t guest_page_size;\n\tuint32_t random_seed;\n\tuint32_t write_percent;\n\n\t \n\tbool nested;\n\t \n\tbool random_access;\n\t \n\tbool pin_vcpus;\n\t \n\tuint32_t vcpu_to_pcpu[KVM_MAX_VCPUS];\n\n \t \n \tbool stop_vcpus;\n\n\tstruct memstress_vcpu_args vcpu_args[KVM_MAX_VCPUS];\n};\n\nextern struct memstress_args memstress_args;\n\nstruct kvm_vm *memstress_create_vm(enum vm_guest_mode mode, int nr_vcpus,\n\t\t\t\t   uint64_t vcpu_memory_bytes, int slots,\n\t\t\t\t   enum vm_mem_backing_src_type backing_src,\n\t\t\t\t   bool partition_vcpu_memory_access);\nvoid memstress_destroy_vm(struct kvm_vm *vm);\n\nvoid memstress_set_write_percent(struct kvm_vm *vm, uint32_t write_percent);\nvoid memstress_set_random_seed(struct kvm_vm *vm, uint32_t random_seed);\nvoid memstress_set_random_access(struct kvm_vm *vm, bool random_access);\n\nvoid memstress_start_vcpu_threads(int vcpus, void (*vcpu_fn)(struct memstress_vcpu_args *));\nvoid memstress_join_vcpu_threads(int vcpus);\nvoid memstress_guest_code(uint32_t vcpu_id);\n\nuint64_t memstress_nested_pages(int nr_vcpus);\nvoid memstress_setup_nested(struct kvm_vm *vm, int nr_vcpus, struct kvm_vcpu *vcpus[]);\n\nvoid memstress_enable_dirty_logging(struct kvm_vm *vm, int slots);\nvoid memstress_disable_dirty_logging(struct kvm_vm *vm, int slots);\nvoid memstress_get_dirty_log(struct kvm_vm *vm, unsigned long *bitmaps[], int slots);\nvoid memstress_clear_dirty_log(struct kvm_vm *vm, unsigned long *bitmaps[],\n\t\t\t       int slots, uint64_t pages_per_slot);\nunsigned long **memstress_alloc_bitmaps(int slots, uint64_t pages_per_slot);\nvoid memstress_free_bitmaps(unsigned long *bitmaps[], int slots);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}