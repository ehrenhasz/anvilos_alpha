{
  "module_name": "kselftest_module.h",
  "hash_id": "f83ab93eedd6f04d4ffe45afb48232b38d4c866d70d80dfeaca9b639d2530838",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/kselftest_module.h",
  "human_readable_source": " \n#ifndef __KSELFTEST_MODULE_H\n#define __KSELFTEST_MODULE_H\n\n#include <linux/module.h>\n#include <linux/panic.h>\n\n \n\n#define KSTM_MODULE_GLOBALS()\t\t\t\\\nstatic unsigned int total_tests __initdata;\t\\\nstatic unsigned int failed_tests __initdata;\t\\\nstatic unsigned int skipped_tests __initdata\n\n#define KSTM_CHECK_ZERO(x) do {\t\t\t\t\t\t\\\n\ttotal_tests++;\t\t\t\t\t\t\t\\\n\tif (x) {\t\t\t\t\t\t\t\\\n\t\tpr_warn(\"TC failed at %s:%d\\n\", __func__, __LINE__);\t\\\n\t\tfailed_tests++;\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n} while (0)\n\nstatic inline int kstm_report(unsigned int total_tests, unsigned int failed_tests,\n\t\t\t      unsigned int skipped_tests)\n{\n\tif (failed_tests == 0) {\n\t\tif (skipped_tests) {\n\t\t\tpr_info(\"skipped %u tests\\n\", skipped_tests);\n\t\t\tpr_info(\"remaining %u tests passed\\n\", total_tests);\n\t\t} else\n\t\t\tpr_info(\"all %u tests passed\\n\", total_tests);\n\t} else\n\t\tpr_warn(\"failed %u out of %u tests\\n\", failed_tests, total_tests);\n\n\treturn failed_tests ? -EINVAL : 0;\n}\n\n#define KSTM_MODULE_LOADERS(__module)\t\t\t\\\nstatic int __init __module##_init(void)\t\t\t\\\n{\t\t\t\t\t\t\t\\\n\tpr_info(\"loaded.\\n\");\t\t\t\t\\\n\tadd_taint(TAINT_TEST, LOCKDEP_STILL_OK);\t\\\n\tselftest();\t\t\t\t\t\\\n\treturn kstm_report(total_tests, failed_tests, skipped_tests);\t\\\n}\t\t\t\t\t\t\t\\\nstatic void __exit __module##_exit(void)\t\t\\\n{\t\t\t\t\t\t\t\\\n\tpr_info(\"unloaded.\\n\");\t\t\t\t\\\n}\t\t\t\t\t\t\t\\\nmodule_init(__module##_init);\t\t\t\t\\\nmodule_exit(__module##_exit)\n\nMODULE_INFO(test, \"Y\");\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}