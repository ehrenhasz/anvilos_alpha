{
  "module_name": "media_dev_allocator.sh",
  "hash_id": "e7633457916e16e5a4e32ead54251d9be2b558c3010f5be1582894c2bdcc5215",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/media_tests/media_dev_allocator.sh",
  "human_readable_source": "#!/bin/bash\n# SPDX-License-Identifier: GPL-2.0\n# Media Device Allocator API test script\n# Copyright (c) 2019 Shuah Khan <shuah@kernel.org>\n\necho \"Media Device Allocator testing: unbind and bind\"\necho \"media driver $1 audio driver $2\"\n\nMDRIVER=/sys/bus/usb/drivers/$1\ncd $MDRIVER\nMDEV=$(ls -d *\\-*)\n\nADRIVER=/sys/bus/usb/drivers/$2\ncd $ADRIVER\nADEV=$(ls -d *\\-*.1)\n\necho \"==================================\"\necho \"Test unbind both devices - start\"\necho \"Running unbind of $MDEV from $MDRIVER\"\necho $MDEV > $MDRIVER/unbind;\n\necho \"Media device should still be present!\"\nls -l /dev/media*\n\necho \"sound driver is at: $ADRIVER\"\necho \"Device is: $ADEV\"\n\necho \"Running unbind of $ADEV from $ADRIVER\"\necho $ADEV > $ADRIVER/unbind;\n\necho \"Media device should have been deleted!\"\nls -l /dev/media*\necho \"Test unbind both devices - end\"\n\necho \"==================================\"\n\necho \"Test bind both devices - start\"\necho \"Running bind of $MDEV from $MDRIVER\"\necho $MDEV > $MDRIVER/bind;\n\necho \"Media device should be present!\"\nls -l /dev/media*\n\necho \"Running bind of $ADEV from $ADRIVER\"\necho $ADEV > $ADRIVER/bind;\n\necho \"Media device should be there!\"\nls -l /dev/media*\n\necho \"Test bind both devices - end\"\n\necho \"==================================\"\n\necho \"Test unbind $MDEV - bind $MDEV - unbind $ADEV - bind $ADEV start\"\n\necho \"Running unbind of $MDEV from $MDRIVER\"\necho $MDEV > $MDRIVER/unbind;\n\necho \"Media device should be there!\"\nls -l /dev/media*\n\nsleep 1\n\necho \"Running bind of $MDEV from $MDRIVER\"\necho $MDEV > $MDRIVER/bind;\n\necho \"Media device should be there!\"\nls -l /dev/media*\n\necho \"Running unbind of $ADEV from $ADRIVER\"\necho $ADEV > $ADRIVER/unbind;\n\necho \"Media device should be there!\"\nls -l /dev/media*\n\nsleep 1\n\necho \"Running bind of $ADEV from $ADRIVER\"\necho $ADEV > $ADRIVER/bind;\n\necho \"Media device should be there!\"\nls -l /dev/media*\n\necho \"Test unbind $MDEV - bind $MDEV - unbind $ADEV - bind $ADEV end\"\necho \"==================================\"\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}