{
  "module_name": "rseq-x86-bits.h",
  "hash_id": "4424d0bd084fb2f19aa48ba66ba5cd8a3b8db1d4e6a1714dbc85b235c045bdb7",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/rseq/rseq-x86-bits.h",
  "human_readable_source": " \n \n\n#include \"rseq-bits-template.h\"\n\n#ifdef __x86_64__\n\n#if defined(RSEQ_TEMPLATE_MO_RELAXED) && \\\n\t(defined(RSEQ_TEMPLATE_CPU_ID) || defined(RSEQ_TEMPLATE_MM_CID))\n\nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpeqv_storev)(intptr_t *v, intptr_t expect, intptr_t newv, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"cmpq %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n\t\t\"cmpq %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[error2]\\n\\t\"\n#endif\n\t\t \n\t\t\"movq %[newv], %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(5)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expect]\t\t\"r\" (expect),\n\t\t  [newv]\t\t\"r\" (newv)\n\t\t: \"memory\", \"cc\", \"rax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"expected value comparison failed\");\n#endif\n}\n\n \nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpnev_storeoffp_load)(intptr_t *v, intptr_t expectnot,\n\t\t\t       long voffp, intptr_t *load, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"movq %[v], %%rbx\\n\\t\"\n\t\t\"cmpq %%rbx, %[expectnot]\\n\\t\"\n\t\t\"je %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n\t\t\"movq %[v], %%rbx\\n\\t\"\n\t\t\"cmpq %%rbx, %[expectnot]\\n\\t\"\n\t\t\"je %l[error2]\\n\\t\"\n#endif\n\t\t\"movq %%rbx, %[load]\\n\\t\"\n\t\t\"addq %[voffp], %%rbx\\n\\t\"\n\t\t\"movq (%%rbx), %%rbx\\n\\t\"\n\t\t \n\t\t\"movq %%rbx, %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(5)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expectnot]\t\t\"r\" (expectnot),\n\t\t  [voffp]\t\t\"er\" (voffp),\n\t\t  [load]\t\t\"m\" (*load)\n\t\t: \"memory\", \"cc\", \"rax\", \"rbx\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"expected value comparison failed\");\n#endif\n}\n\nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_addv)(intptr_t *v, intptr_t count, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n#endif\n\t\t \n\t\t\"addq %[count], %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [count]\t\t\"er\" (count)\n\t\t: \"memory\", \"cc\", \"rax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\n#endif\n}\n\n#define RSEQ_ARCH_HAS_OFFSET_DEREF_ADDV\n\n \nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_offset_deref_addv)(intptr_t *ptr, long off, intptr_t inc, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n#endif\n\t\t \n\t\t\"movq %[ptr], %%rbx\\n\\t\"\n\t\t\"addq %[off], %%rbx\\n\\t\"\n\t\t \n\t\t\"movq (%%rbx), %%rcx\\n\\t\"\n\t\t \n\t\t\"addq %[inc], (%%rcx)\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [ptr]\t\t\t\"m\" (*ptr),\n\t\t  [off]\t\t\t\"er\" (off),\n\t\t  [inc]\t\t\t\"er\" (inc)\n\t\t: \"memory\", \"cc\", \"rax\", \"rbx\", \"rcx\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1\n#endif\n\t);\n\treturn 0;\nabort:\n\tRSEQ_INJECT_FAILED\n\treturn -1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_bug(\"cpu_id comparison failed\");\n#endif\n}\n\nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpeqv_cmpeqv_storev)(intptr_t *v, intptr_t expect,\n\t\t\t      intptr_t *v2, intptr_t expect2,\n\t\t\t      intptr_t newv, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error3])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"cmpq %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n\t\t\"cmpq %[v2], %[expect2]\\n\\t\"\n\t\t\"jnz %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(5)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n\t\t\"cmpq %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[error2]\\n\\t\"\n\t\t\"cmpq %[v2], %[expect2]\\n\\t\"\n\t\t\"jnz %l[error3]\\n\\t\"\n#endif\n\t\t \n\t\t\"movq %[newv], %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(6)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v2]\t\t\t\"m\" (*v2),\n\t\t  [expect2]\t\t\"r\" (expect2),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expect]\t\t\"r\" (expect),\n\t\t  [newv]\t\t\"r\" (newv)\n\t\t: \"memory\", \"cc\", \"rax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2, error3\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"1st expected value comparison failed\");\nerror3:\n\trseq_after_asm_goto();\n\trseq_bug(\"2nd expected value comparison failed\");\n#endif\n}\n\n#endif  \n\n#if (defined(RSEQ_TEMPLATE_MO_RELAXED) || defined(RSEQ_TEMPLATE_MO_RELEASE)) && \\\n\t(defined(RSEQ_TEMPLATE_CPU_ID) || defined(RSEQ_TEMPLATE_MM_CID))\n\nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpeqv_trystorev_storev)(intptr_t *v, intptr_t expect,\n\t\t\t\t intptr_t *v2, intptr_t newv2,\n\t\t\t\t intptr_t newv, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"cmpq %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n\t\t\"cmpq %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[error2]\\n\\t\"\n#endif\n\t\t \n\t\t\"movq %[newv2], %[v2]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(5)\n\t\t \n\t\t\"movq %[newv], %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(6)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v2]\t\t\t\"m\" (*v2),\n\t\t  [newv2]\t\t\"r\" (newv2),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expect]\t\t\"r\" (expect),\n\t\t  [newv]\t\t\"r\" (newv)\n\t\t: \"memory\", \"cc\", \"rax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"expected value comparison failed\");\n#endif\n}\n\nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpeqv_trymemcpy_storev)(intptr_t *v, intptr_t expect,\n\t\t\t\t void *dst, void *src, size_t len,\n\t\t\t\t intptr_t newv, int cpu)\n{\n\tuint64_t rseq_scratch[3];\n\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n#endif\n\t\t\"movq %[src], %[rseq_scratch0]\\n\\t\"\n\t\t\"movq %[dst], %[rseq_scratch1]\\n\\t\"\n\t\t\"movq %[len], %[rseq_scratch2]\\n\\t\"\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"cmpq %[v], %[expect]\\n\\t\"\n\t\t\"jnz 5f\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 6f)\n\t\t\"cmpq %[v], %[expect]\\n\\t\"\n\t\t\"jnz 7f\\n\\t\"\n#endif\n\t\t \n\t\t\"test %[len], %[len]\\n\\t\" \\\n\t\t\"jz 333f\\n\\t\" \\\n\t\t\"222:\\n\\t\" \\\n\t\t\"movb (%[src]), %%al\\n\\t\" \\\n\t\t\"movb %%al, (%[dst])\\n\\t\" \\\n\t\t\"inc %[src]\\n\\t\" \\\n\t\t\"inc %[dst]\\n\\t\" \\\n\t\t\"dec %[len]\\n\\t\" \\\n\t\t\"jnz 222b\\n\\t\" \\\n\t\t\"333:\\n\\t\" \\\n\t\tRSEQ_INJECT_ASM(5)\n\t\t \n\t\t\"movq %[newv], %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(6)\n\t\t \n\t\t\"movq %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\"movq %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\"movq %[rseq_scratch0], %[src]\\n\\t\"\n\t\tRSEQ_ASM_DEFINE_ABORT(4,\n\t\t\t\"movq %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\t\"movq %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\t\"movq %[rseq_scratch0], %[src]\\n\\t\",\n\t\t\tabort)\n\t\tRSEQ_ASM_DEFINE_CMPFAIL(5,\n\t\t\t\"movq %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\t\"movq %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\t\"movq %[rseq_scratch0], %[src]\\n\\t\",\n\t\t\tcmpfail)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_CMPFAIL(6,\n\t\t\t\"movq %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\t\"movq %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\t\"movq %[rseq_scratch0], %[src]\\n\\t\",\n\t\t\terror1)\n\t\tRSEQ_ASM_DEFINE_CMPFAIL(7,\n\t\t\t\"movq %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\t\"movq %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\t\"movq %[rseq_scratch0], %[src]\\n\\t\",\n\t\t\terror2)\n#endif\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expect]\t\t\"r\" (expect),\n\t\t  [newv]\t\t\"r\" (newv),\n\t\t   \n\t\t  [dst]\t\t\t\"r\" (dst),\n\t\t  [src]\t\t\t\"r\" (src),\n\t\t  [len]\t\t\t\"r\" (len),\n\t\t  [rseq_scratch0]\t\"m\" (rseq_scratch[0]),\n\t\t  [rseq_scratch1]\t\"m\" (rseq_scratch[1]),\n\t\t  [rseq_scratch2]\t\"m\" (rseq_scratch[2])\n\t\t: \"memory\", \"cc\", \"rax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"expected value comparison failed\");\n#endif\n}\n\n#endif  \n\n#elif defined(__i386__)\n\n#if defined(RSEQ_TEMPLATE_MO_RELAXED) && \\\n\t(defined(RSEQ_TEMPLATE_CPU_ID) || defined(RSEQ_TEMPLATE_MM_CID))\n\nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpeqv_storev)(intptr_t *v, intptr_t expect, intptr_t newv, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"cmpl %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n\t\t\"cmpl %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[error2]\\n\\t\"\n#endif\n\t\t \n\t\t\"movl %[newv], %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(5)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expect]\t\t\"r\" (expect),\n\t\t  [newv]\t\t\"r\" (newv)\n\t\t: \"memory\", \"cc\", \"eax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"expected value comparison failed\");\n#endif\n}\n\n \nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpnev_storeoffp_load)(intptr_t *v, intptr_t expectnot,\n\t\t\t       long voffp, intptr_t *load, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"movl %[v], %%ebx\\n\\t\"\n\t\t\"cmpl %%ebx, %[expectnot]\\n\\t\"\n\t\t\"je %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n\t\t\"movl %[v], %%ebx\\n\\t\"\n\t\t\"cmpl %%ebx, %[expectnot]\\n\\t\"\n\t\t\"je %l[error2]\\n\\t\"\n#endif\n\t\t\"movl %%ebx, %[load]\\n\\t\"\n\t\t\"addl %[voffp], %%ebx\\n\\t\"\n\t\t\"movl (%%ebx), %%ebx\\n\\t\"\n\t\t \n\t\t\"movl %%ebx, %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(5)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expectnot]\t\t\"r\" (expectnot),\n\t\t  [voffp]\t\t\"ir\" (voffp),\n\t\t  [load]\t\t\"m\" (*load)\n\t\t: \"memory\", \"cc\", \"eax\", \"ebx\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"expected value comparison failed\");\n#endif\n}\n\nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_addv)(intptr_t *v, intptr_t count, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n#endif\n\t\t \n\t\t\"addl %[count], %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [count]\t\t\"ir\" (count)\n\t\t: \"memory\", \"cc\", \"eax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\n#endif\n}\n\nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpeqv_cmpeqv_storev)(intptr_t *v, intptr_t expect,\n\t\t\t      intptr_t *v2, intptr_t expect2,\n\t\t\t      intptr_t newv, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error3])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"cmpl %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n\t\t\"cmpl %[expect2], %[v2]\\n\\t\"\n\t\t\"jnz %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(5)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n\t\t\"cmpl %[v], %[expect]\\n\\t\"\n\t\t\"jnz %l[error2]\\n\\t\"\n\t\t\"cmpl %[expect2], %[v2]\\n\\t\"\n\t\t\"jnz %l[error3]\\n\\t\"\n#endif\n\t\t\"movl %[newv], %%eax\\n\\t\"\n\t\t \n\t\t\"movl %%eax, %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(6)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v2]\t\t\t\"m\" (*v2),\n\t\t  [expect2]\t\t\"r\" (expect2),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expect]\t\t\"r\" (expect),\n\t\t  [newv]\t\t\"m\" (newv)\n\t\t: \"memory\", \"cc\", \"eax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2, error3\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"1st expected value comparison failed\");\nerror3:\n\trseq_after_asm_goto();\n\trseq_bug(\"2nd expected value comparison failed\");\n#endif\n}\n\n#endif  \n\n#if (defined(RSEQ_TEMPLATE_MO_RELAXED) || defined(RSEQ_TEMPLATE_MO_RELEASE)) && \\\n\t(defined(RSEQ_TEMPLATE_CPU_ID) || defined(RSEQ_TEMPLATE_MM_CID))\n\nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpeqv_trystorev_storev)(intptr_t *v, intptr_t expect,\n\t\t\t\t\t intptr_t *v2, intptr_t newv2,\n\t\t\t\t\t intptr_t newv, int cpu)\n{\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n#endif\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"movl %[expect], %%eax\\n\\t\"\n\t\t\"cmpl %[v], %%eax\\n\\t\"\n\t\t\"jnz %l[cmpfail]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), %l[error1])\n\t\t\"movl %[expect], %%eax\\n\\t\"\n\t\t\"cmpl %[v], %%eax\\n\\t\"\n\t\t\"jnz %l[error2]\\n\\t\"\n#endif\n\t\t \n\t\t\"movl %[newv2], %[v2]\\n\\t\"\n\t\tRSEQ_INJECT_ASM(5)\n#ifdef RSEQ_TEMPLATE_MO_RELEASE\n\t\t\"lock; addl $0,-128(%%esp)\\n\\t\"\n#endif\n\t\t \n\t\t\"movl %[newv], %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(6)\n\t\tRSEQ_ASM_DEFINE_ABORT(4, \"\", abort)\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v2]\t\t\t\"m\" (*v2),\n\t\t  [newv2]\t\t\"r\" (newv2),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expect]\t\t\"m\" (expect),\n\t\t  [newv]\t\t\"r\" (newv)\n\t\t: \"memory\", \"cc\", \"eax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"expected value comparison failed\");\n#endif\n\n}\n\n \nstatic inline __attribute__((always_inline))\nint RSEQ_TEMPLATE_IDENTIFIER(rseq_cmpeqv_trymemcpy_storev)(intptr_t *v, intptr_t expect,\n\t\t\t\t\t void *dst, void *src, size_t len,\n\t\t\t\t\t intptr_t newv, int cpu)\n{\n\tuint32_t rseq_scratch[3];\n\n\tRSEQ_INJECT_C(9)\n\n\t__asm__ __volatile__ goto (\n\t\tRSEQ_ASM_DEFINE_TABLE(3, 1f, 2f, 4f)  \n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[cmpfail])\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error1])\n\t\tRSEQ_ASM_DEFINE_EXIT_POINT(1f, %l[error2])\n#endif\n\t\t\"movl %[src], %[rseq_scratch0]\\n\\t\"\n\t\t\"movl %[dst], %[rseq_scratch1]\\n\\t\"\n\t\t\"movl %[len], %[rseq_scratch2]\\n\\t\"\n\t\t \n\t\tRSEQ_ASM_STORE_RSEQ_CS(1, 3b, RSEQ_ASM_TP_SEGMENT:RSEQ_CS_OFFSET(%[rseq_offset]))\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 4f)\n\t\tRSEQ_INJECT_ASM(3)\n\t\t\"movl %[expect], %%eax\\n\\t\"\n\t\t\"cmpl %%eax, %[v]\\n\\t\"\n\t\t\"jnz 5f\\n\\t\"\n\t\tRSEQ_INJECT_ASM(4)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_CMP_CPU_ID(cpu_id, RSEQ_ASM_TP_SEGMENT:RSEQ_TEMPLATE_CPU_ID_OFFSET(%[rseq_offset]), 6f)\n\t\t\"movl %[expect], %%eax\\n\\t\"\n\t\t\"cmpl %%eax, %[v]\\n\\t\"\n\t\t\"jnz 7f\\n\\t\"\n#endif\n\t\t \n\t\t\"test %[len], %[len]\\n\\t\" \\\n\t\t\"jz 333f\\n\\t\" \\\n\t\t\"222:\\n\\t\" \\\n\t\t\"movb (%[src]), %%al\\n\\t\" \\\n\t\t\"movb %%al, (%[dst])\\n\\t\" \\\n\t\t\"inc %[src]\\n\\t\" \\\n\t\t\"inc %[dst]\\n\\t\" \\\n\t\t\"dec %[len]\\n\\t\" \\\n\t\t\"jnz 222b\\n\\t\" \\\n\t\t\"333:\\n\\t\" \\\n\t\tRSEQ_INJECT_ASM(5)\n#ifdef RSEQ_TEMPLATE_MO_RELEASE\n\t\t\"lock; addl $0,-128(%%esp)\\n\\t\"\n#endif\n\t\t\"movl %[newv], %%eax\\n\\t\"\n\t\t \n\t\t\"movl %%eax, %[v]\\n\\t\"\n\t\t\"2:\\n\\t\"\n\t\tRSEQ_INJECT_ASM(6)\n\t\t \n\t\t\"movl %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\"movl %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\"movl %[rseq_scratch0], %[src]\\n\\t\"\n\t\tRSEQ_ASM_DEFINE_ABORT(4,\n\t\t\t\"movl %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\t\"movl %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\t\"movl %[rseq_scratch0], %[src]\\n\\t\",\n\t\t\tabort)\n\t\tRSEQ_ASM_DEFINE_CMPFAIL(5,\n\t\t\t\"movl %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\t\"movl %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\t\"movl %[rseq_scratch0], %[src]\\n\\t\",\n\t\t\tcmpfail)\n#ifdef RSEQ_COMPARE_TWICE\n\t\tRSEQ_ASM_DEFINE_CMPFAIL(6,\n\t\t\t\"movl %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\t\"movl %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\t\"movl %[rseq_scratch0], %[src]\\n\\t\",\n\t\t\terror1)\n\t\tRSEQ_ASM_DEFINE_CMPFAIL(7,\n\t\t\t\"movl %[rseq_scratch2], %[len]\\n\\t\"\n\t\t\t\"movl %[rseq_scratch1], %[dst]\\n\\t\"\n\t\t\t\"movl %[rseq_scratch0], %[src]\\n\\t\",\n\t\t\terror2)\n#endif\n\t\t:  \n\t\t: [cpu_id]\t\t\"r\" (cpu),\n\t\t  [rseq_offset]\t\t\"r\" (rseq_offset),\n\t\t   \n\t\t  [v]\t\t\t\"m\" (*v),\n\t\t  [expect]\t\t\"m\" (expect),\n\t\t  [newv]\t\t\"m\" (newv),\n\t\t   \n\t\t  [dst]\t\t\t\"r\" (dst),\n\t\t  [src]\t\t\t\"r\" (src),\n\t\t  [len]\t\t\t\"r\" (len),\n\t\t  [rseq_scratch0]\t\"m\" (rseq_scratch[0]),\n\t\t  [rseq_scratch1]\t\"m\" (rseq_scratch[1]),\n\t\t  [rseq_scratch2]\t\"m\" (rseq_scratch[2])\n\t\t: \"memory\", \"cc\", \"eax\"\n\t\t  RSEQ_INJECT_CLOBBER\n\t\t: abort, cmpfail\n#ifdef RSEQ_COMPARE_TWICE\n\t\t  , error1, error2\n#endif\n\t);\n\trseq_after_asm_goto();\n\treturn 0;\nabort:\n\trseq_after_asm_goto();\n\tRSEQ_INJECT_FAILED\n\treturn -1;\ncmpfail:\n\trseq_after_asm_goto();\n\treturn 1;\n#ifdef RSEQ_COMPARE_TWICE\nerror1:\n\trseq_after_asm_goto();\n\trseq_bug(\"cpu_id comparison failed\");\nerror2:\n\trseq_after_asm_goto();\n\trseq_bug(\"expected value comparison failed\");\n#endif\n}\n\n#endif  \n\n#endif\n\n#include \"rseq-bits-reset.h\"\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}