{
  "module_name": "func_cpumask.tc",
  "hash_id": "11846ad48145d132b015c5fc1f092ce4dd0c0f4ff7bc3fd729cc3b3154a2618f",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/ftrace/func_cpumask.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: ftrace - function trace with cpumask\n# requires: function:tracer\n\nif ! which nproc ; then\n  nproc() {\n    ls -d /sys/devices/system/cpu/cpu[0-9]* | wc -l\n  }\nfi\n\nNP=`nproc`\n\nif [ $NP -eq 1 ] ;then\n  echo \"We can not test cpumask on UP environment\"\n  exit_unresolved\nfi\n\nORIG_CPUMASK=`cat tracing_cpumask`\n\ndo_reset() {\n  echo $ORIG_CPUMASK > tracing_cpumask\n}\n\necho 0 > tracing_on\necho > trace\n: \"Bitmask only record on CPU1\"\necho 2 > tracing_cpumask\nMASK=0x`cat tracing_cpumask`\ntest `printf \"%d\" $MASK` -eq 2 || do_reset\n\necho function > current_tracer\necho 1 > tracing_on\n(echo \"forked\")\necho 0 > tracing_on\n\n: \"Check CPU1 events are recorded\"\ngrep -q -e \"\\[001\\]\" trace || do_reset\n\n: \"There should be No other cpu events\"\n! grep -qv -e \"\\[001\\]\" -e \"^#\" trace || do_reset\n\ndo_reset\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}