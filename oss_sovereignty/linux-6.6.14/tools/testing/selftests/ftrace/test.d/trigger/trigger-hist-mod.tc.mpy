{
  "module_name": "trigger-hist-mod.tc",
  "hash_id": "44165fd4877d7db2ab69b83881812031f273bbb461047bc5c72c3556f7ab7645",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/trigger/trigger-hist-mod.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: event trigger - test histogram modifiers\n# requires: set_event events/sched/sched_process_fork/trigger events/sched/sched_process_fork/hist\n# flags: instance\n\nfail() { #msg\n    echo $1\n    exit_fail\n}\n\necho \"Test histogram with execname modifier\"\n\necho 'hist:keys=common_pid.execname' > events/sched/sched_process_fork/trigger\nfor i in `seq 1 10` ; do ( echo \"forked\" > /dev/null); done\nCOMM=`cat /proc/$$/comm`\ngrep \"common_pid: $COMM\" events/sched/sched_process_fork/hist > /dev/null || \\\n    fail \"execname modifier on sched_process_fork did not work\"\n\nreset_trigger\n\necho \"Test histogram with hex modifier\"\n\necho 'hist:keys=parent_pid.hex' > events/sched/sched_process_fork/trigger\nfor i in `seq 1 10` ; do ( echo \"forked\" > /dev/null); done\n# Note that $$ is the parent pid. $PID is current PID.\nHEX=`printf %x $PID`\ngrep \"parent_pid: $HEX\" events/sched/sched_process_fork/hist > /dev/null || \\\n    fail \"hex modifier on sched_process_fork did not work\"\n\nreset_trigger\n\necho \"Test histogram with syscall modifier\"\n\necho 'hist:keys=id.syscall' > events/raw_syscalls/sys_exit/trigger\nfor i in `seq 1 10` ; do ( echo \"forked\" > /dev/null); done\ngrep \"id: \\(unknown_\\|sys_\\)\" events/raw_syscalls/sys_exit/hist > /dev/null || \\\n    fail \"syscall modifier on raw_syscalls/sys_exit did not work\"\n\n\nreset_trigger\n\necho \"Test histgram with log2 modifier\"\n\necho 'hist:keys=bytes_req.log2' > events/kmem/kmalloc/trigger\nfor i in `seq 1 10` ; do ( echo \"forked\" > /dev/null); done\ngrep 'bytes_req: ~ 2^[0-9]*' events/kmem/kmalloc/hist > /dev/null || \\\n    fail \"log2 modifier on kmem/kmalloc did not work\"\n\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}