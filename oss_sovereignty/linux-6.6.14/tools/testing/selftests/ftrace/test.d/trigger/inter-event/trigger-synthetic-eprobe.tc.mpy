{
  "module_name": "trigger-synthetic-eprobe.tc",
  "hash_id": "b6db4b559c550fa25a6bc99cac77b8377c9782fe76e4d1a06476eec006070e75",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/trigger/inter-event/trigger-synthetic-eprobe.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: event trigger - test inter-event histogram trigger eprobe on synthetic event\n# requires: dynamic_events synthetic_events events/syscalls/sys_enter_openat/hist \"e[:[<group>/][<event>]] <attached-group>.<attached-event> [<args>]\":README\n\necho 0 > events/enable\n\nclear_dynamic_events\n\nSYSTEM=\"syscalls\"\nSTART=\"sys_enter_openat\"\nEND=\"sys_exit_openat\"\nFIELD=\"filename\"\nSYNTH=\"synth_open\"\nEPROBE=\"eprobe_open\"\n\necho \"$SYNTH unsigned long filename; long ret;\" > synthetic_events\necho \"hist:keys=common_pid:__arg__1=$FIELD\" > events/$SYSTEM/$START/trigger\necho \"hist:keys=common_pid:filename=\\$__arg__1,ret=ret:onmatch($SYSTEM.$START).trace($SYNTH,\\$filename,\\$ret)\" > events/$SYSTEM/$END/trigger\n\necho \"e:$EPROBE synthetic/$SYNTH file=+0(\\$filename):ustring ret=\\$ret:s64\" >> dynamic_events\n\ngrep -q \"$SYNTH\" dynamic_events\ngrep -q \"$EPROBE\" dynamic_events\ntest -d events/synthetic/$SYNTH\ntest -d events/eprobes/$EPROBE\n\necho 1 > events/eprobes/$EPROBE/enable\nls\necho 0 > events/eprobes/$EPROBE/enable\n\ncontent=`grep '^ *ls-' trace | grep 'file='`\nnocontent=`grep '^ *ls-' trace | grep 'file=' | grep -v -e '\"/' -e '\".\"'` || true\n\nif [ -z \"$content\" ]; then\n\texit_fail\nfi\n\nif [ ! -z \"$nocontent\" ]; then\n\texit_fail\nfi\n\necho \"-:$EPROBE\" >> dynamic_events\necho '!'\"hist:keys=common_pid:filename=\\$__arg__1,ret=ret:onmatch($SYSTEM.$START).trace($SYNTH,\\$filename,\\$ret)\" > events/$SYSTEM/$END/trigger\necho '!'\"hist:keys=common_pid:__arg__1=$FIELD\" > events/$SYSTEM/$START/trigger\necho '!'\"$SYNTH u64 filename; s64 ret;\" >> synthetic_events\n\n! grep -q \"$SYNTH\" dynamic_events\n! grep -q \"$EPROBE\" dynamic_events\n! test -d events/synthetic/$SYNTH\n! test -d events/eprobes/$EPROBE\n\nclear_trace\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}