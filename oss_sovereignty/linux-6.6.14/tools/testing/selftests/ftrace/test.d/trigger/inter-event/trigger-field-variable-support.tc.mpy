{
  "module_name": "trigger-field-variable-support.tc",
  "hash_id": "06519328cb7261d70f721551959573a5bc3f7fc0aeecf0299d67602b85df9b71",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/trigger/inter-event/trigger-field-variable-support.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: event trigger - test field variable support\n# requires: set_event synthetic_events events/sched/sched_process_fork/hist ping:program\n\nfail() { #msg\n    echo $1\n    exit_fail\n}\n\necho \"Test field variable support\"\n\necho 'wakeup_latency u64 lat; pid_t pid; int prio; char comm[16]' > synthetic_events\necho 'hist:keys=comm:ts0=common_timestamp.usecs if comm==\"ping\"' > events/sched/sched_waking/trigger\necho 'hist:keys=next_comm:wakeup_lat=common_timestamp.usecs-$ts0:onmatch(sched.sched_waking).wakeup_latency($wakeup_lat,next_pid,sched.sched_waking.prio,next_comm) if next_comm==\"ping\"' > events/sched/sched_switch/trigger\necho 'hist:keys=pid,prio,comm:vals=lat:sort=pid,prio' > events/synthetic/wakeup_latency/trigger\n\nping $LOCALHOST -c 3\nif ! grep -q \"ping\" events/synthetic/wakeup_latency/hist; then\n    fail \"Failed to create inter-event histogram\"\nfi\n\nif ! grep -q \"synthetic_prio=prio\" events/sched/sched_waking/hist; then\n    fail \"Failed to create histogram with field variable\"\nfi\n\necho '!hist:keys=next_comm:wakeup_lat=common_timestamp.usecs-$ts0:onmatch(sched.sched_waking).wakeup_latency($wakeup_lat,next_pid,sched.sched_waking.prio,next_comm) if next_comm==\"ping\"' >> events/sched/sched_switch/trigger\n\nif grep -q \"synthetic_prio=prio\" events/sched/sched_waking/hist; then\n    fail \"Failed to remove histogram with field variable\"\nfi\n\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}