{
  "module_name": "add_remove_eprobe.tc",
  "hash_id": "95fb6051da246860f83e63d69c6ccc4e3fce126bd256e7cb858d43abcea77caa",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/dynevent/add_remove_eprobe.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: Generic dynamic event - add/remove eprobe events\n# requires: dynamic_events events/syscalls/sys_enter_openat \"<attached-group>.<attached-event> [<args>]\":README\n\necho 0 > events/enable\n\nclear_dynamic_events\n\nSYSTEM=\"syscalls\"\nEVENT=\"sys_enter_openat\"\nFIELD=\"filename\"\nEPROBE=\"eprobe_open\"\nOPTIONS=\"file=+0(\\$filename):ustring\"\necho \"e:$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\n\ngrep -q \"$EPROBE\" dynamic_events\ntest -d events/eprobes/$EPROBE\n\necho 1 > events/eprobes/$EPROBE/enable\nls\necho 0 > events/eprobes/$EPROBE/enable\n\ncontent=`grep '^ *ls-' trace | grep 'file='`\nnocontent=`grep '^ *ls-' trace | grep 'file=' | grep -v -e '\"/' -e '\".\"' -e '(fault)' ` || true\n\nif [ -z \"$content\" ]; then\n\texit_fail\nfi\n\nif [ ! -z \"$nocontent\" ]; then\n\texit_fail\nfi\n\necho \"-:$EPROBE\" >> dynamic_events\n\n! grep -q \"$EPROBE\" dynamic_events\n! test -d events/eprobes/$EPROBE\n\n# test various ways to remove the probe (already tested with just event name)\n\n# With group name\necho \"e:$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\ngrep -q \"$EPROBE\" dynamic_events\ntest -d events/eprobes/$EPROBE\necho \"-:eprobes/$EPROBE\" >> dynamic_events\n! grep -q \"$EPROBE\" dynamic_events\n! test -d events/eprobes/$EPROBE\n\n# With group name and system/event\necho \"e:$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\ngrep -q \"$EPROBE\" dynamic_events\ntest -d events/eprobes/$EPROBE\necho \"-:eprobes/$EPROBE $SYSTEM/$EVENT\" >> dynamic_events\n! grep -q \"$EPROBE\" dynamic_events\n! test -d events/eprobes/$EPROBE\n\n# With just event name and system/event\necho \"e:$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\ngrep -q \"$EPROBE\" dynamic_events\ntest -d events/eprobes/$EPROBE\necho \"-:$EPROBE $SYSTEM/$EVENT\" >> dynamic_events\n! grep -q \"$EPROBE\" dynamic_events\n! test -d events/eprobes/$EPROBE\n\n# With just event name and system/event and options\necho \"e:$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\ngrep -q \"$EPROBE\" dynamic_events\ntest -d events/eprobes/$EPROBE\necho \"-:$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\n! grep -q \"$EPROBE\" dynamic_events\n! test -d events/eprobes/$EPROBE\n\n# With group name and system/event and options\necho \"e:$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\ngrep -q \"$EPROBE\" dynamic_events\ntest -d events/eprobes/$EPROBE\necho \"-:eprobes/$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\n! grep -q \"$EPROBE\" dynamic_events\n! test -d events/eprobes/$EPROBE\n\n# Finally make sure what is in the dynamic_events file clears it too\necho \"e:$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\nLINE=`sed -e '/$EPROBE/s/^e/-/' < dynamic_events`\ntest -d events/eprobes/$EPROBE\necho \"-:eprobes/$EPROBE $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\n! grep -q \"$EPROBE\" dynamic_events\n! test -d events/eprobes/$EPROBE\n\nif grep -q \"e\\[:\\[<group>/]\\[<event>]]\" README; then\n\techo \"e:mygroup/ $SYSTEM/$EVENT $OPTIONS\" >> dynamic_events\n\ttest -d events/mygroup\n\techo \"-:mygroup/\" >> dynamic_events\n\t! test -d events/mygroup\nfi\n\nclear_trace\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}