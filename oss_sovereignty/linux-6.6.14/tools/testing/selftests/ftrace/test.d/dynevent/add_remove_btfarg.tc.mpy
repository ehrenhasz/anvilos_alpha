{
  "module_name": "add_remove_btfarg.tc",
  "hash_id": "eb2ddda349d476dc284ced954c58f679d977dc5ede600fa9460847b5ec3eaa95",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/dynevent/add_remove_btfarg.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: Generic dynamic event - add/remove probes with BTF arguments\n# requires: dynamic_events \"<argname>\":README\n\nKPROBES=\nFPROBES=\nFIELDS=\n\nif grep -qF \"p[:[<group>/][<event>]] <place> [<args>]\" README ; then\n  KPROBES=yes\nfi\nif grep -qF \"f[:[<group>/][<event>]] <func-name>[%return] [<args>]\" README ; then\n  FPROBES=yes\nfi\nif grep -qF \"<argname>[->field[->field|.field...]]\" README ; then\n  FIELDS=yes\nfi\n\nif [ -z \"$KPROBES\" -a -z \"$FPROBES\" ] ; then\n  exit_unsupported\nfi\n\necho 0 > events/enable\necho > dynamic_events\n\nTP=kfree\nTP2=kmem_cache_alloc\nTP3=getname_flags\nTP4=sched_wakeup\n\nif [ \"$FPROBES\" ] ; then\necho \"f:fpevent $TP object\" >> dynamic_events\necho \"t:tpevent $TP ptr\" >> dynamic_events\n\ngrep -q \"fpevent.*object=object\" dynamic_events\ngrep -q \"tpevent.*ptr=ptr\" dynamic_events\n\necho > dynamic_events\n\necho \"f:fpevent $TP \"'$arg1' >> dynamic_events\ngrep -q \"fpevent.*object=object\" dynamic_events\n\necho > dynamic_events\n\necho \"f:fpevent $TP \"'$arg*' >> dynamic_events\necho \"t:tpevent $TP \"'$arg*' >> dynamic_events\n\ngrep -q \"fpevent.*object=object\" dynamic_events\ngrep -q \"tpevent.*ptr=ptr\" dynamic_events\n! grep -q \"tpevent.*_data\" dynamic_events\nfi\n\necho > dynamic_events\n\nif [ \"$FIELDS\" ] ; then\necho \"t:tpevent ${TP2} obj_size=s->object_size\" >> dynamic_events\necho \"f:fpevent ${TP3}%return path=\\$retval->name:string\" >> dynamic_events\necho \"t:tpevent2 ${TP4} p->se.group_node.next->prev\" >> dynamic_events\n\ngrep -q \"tpevent .*obj_size=s->object_size\" dynamic_events\ngrep -q \"fpevent.*path=\\$retval->name:string\" dynamic_events\ngrep -q 'tpevent2 .*p->se.group_node.next->prev' dynamic_events\n\necho > dynamic_events\nfi\n\nif [ \"$KPROBES\" ] ; then\necho \"p:kpevent $TP object\" >> dynamic_events\ngrep -q \"kpevent.*object=object\" dynamic_events\n\necho > dynamic_events\n\necho \"p:kpevent $TP \"'$arg*' >> dynamic_events\ngrep -q \"kpevent.*object=object\" dynamic_events\nfi\n\nclear_trace\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}