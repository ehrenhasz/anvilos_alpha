{
  "module_name": "instance.tc",
  "hash_id": "c5573846af6d06f642d68ec5dd764b420901dbb542376d9d301025ad49bbbcfd",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/instances/instance.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: Test creation and deletion of trace instances\n# requires: instances\n\nfail() { # mesg\n    rmdir x y z 2>/dev/null\n    echo $1\n    set -e\n    exit_fail\n}\n\ncd instances\n\n# we don't want to fail on error\nset +e\n\nmkdir x\nrmdir x\nresult=$?\n\nif [ $result -ne 0 ]; then\n    echo \"instance rmdir not supported\"\n    exit_unsupported\nfi\n\ninstance_slam() {\n    while :; do\n\tmkdir x\n\tmkdir y\n\tmkdir z\n\trmdir x\n\trmdir y\n\trmdir z\n    done 2>/dev/null\n}\n\ninstance_slam &\np1=$!\necho $p1\n\ninstance_slam &\np2=$!\necho $p2\n\ninstance_slam &\np3=$!\necho $p3\n\ninstance_slam &\np4=$!\necho $p4\n\ninstance_slam &\np5=$!\necho $p5\n\nls -lR >/dev/null\nsleep 1\n\nkill -1 $p1\nkill -1 $p2\nkill -1 $p3\nkill -1 $p4\nkill -1 $p5\n\necho \"Wait for processes to finish\"\nwait $p1 $p2 $p3 $p4 $p5\necho \"all processes finished, wait for cleanup\"\n\nmkdir x y z\nls x y z\nrmdir x y z\nfor d in x y z; do\n        if [ -d $d ]; then\n                fail \"instance $d still exists\"\n        fi\ndone\n\nset -e\n\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}