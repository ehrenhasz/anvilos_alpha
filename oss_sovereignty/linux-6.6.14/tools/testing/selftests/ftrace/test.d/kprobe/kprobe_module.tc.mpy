{
  "module_name": "kprobe_module.tc",
  "hash_id": "a0c752c67afc64f0a4f61efcb77c3e57f8f54a5b8c2813fa2ab4eb7af1ef1539",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/kprobe/kprobe_module.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: Kprobe dynamic event - probing module\n# requires: kprobe_events\n\nrmmod trace-printk ||:\nif ! modprobe trace-printk ; then\n  echo \"No trace-printk sample module - please make CONFIG_SAMPLE_TRACE_PRINTK=\nm\"\n  exit_unresolved;\nfi\n\nMOD=trace_printk\nFUNC=trace_printk_irq_work\n\n:;: \"Add an event on a module function without specifying event name\" ;:\n\necho \"p $MOD:$FUNC\" > kprobe_events\nPROBE_NAME=`echo $MOD:$FUNC | tr \".:\" \"_\"`\ntest -d events/kprobes/p_${PROBE_NAME}_0 || exit_failure\n\n:;: \"Add an event on a module function with new event name\" ;:\n\necho \"p:event1 $MOD:$FUNC\" > kprobe_events\ntest -d events/kprobes/event1 || exit_failure\n\n:;: \"Add an event on a module function with new event and group name\" ;:\n\necho \"p:kprobes1/event1 $MOD:$FUNC\" > kprobe_events\ntest -d events/kprobes1/event1 || exit_failure\n\n:;: \"Remove target module, but event still be there\" ;:\nif ! rmmod trace-printk ; then\n  echo \"Failed to unload module - please enable CONFIG_MODULE_UNLOAD\"\n  exit_unresolved;\nfi\ntest -d events/kprobes1/event1\n\n:;: \"Check posibility to defining events on unloaded module\";:\necho \"p:event2 $MOD:$FUNC\" >> kprobe_events\n\n:;: \"Target is gone, but we can prepare for next time\";:\necho 1 > events/kprobes1/event1/enable\n\n:;: \"Load module again, which means the event1 should be recorded\";:\nmodprobe trace-printk\ngrep \"event1:\" trace\n\n:;: \"Remove the module again and check the event is not locked\"\nrmmod trace-printk\necho 0 > events/kprobes1/event1/enable\necho \"-:kprobes1/event1\" >> kprobe_events\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}