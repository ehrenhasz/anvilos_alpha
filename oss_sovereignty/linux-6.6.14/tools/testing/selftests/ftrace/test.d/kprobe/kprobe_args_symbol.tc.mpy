{
  "module_name": "kprobe_args_symbol.tc",
  "hash_id": "bf42452880a2626676ece4bb62e62549eef2b82040594ce6c3ca76b50e972ee7",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/kprobe/kprobe_args_symbol.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: Kprobe event symbol argument\n# requires: kprobe_events\n\nSYMBOL=\"linux_proc_banner\"\n\nif [ ! -f /proc/kallsyms ]; then\n  echo \"Can not check the target symbol - please enable CONFIG_KALLSYMS\"\n  exit_unresolved\nelif ! grep \"$SYMBOL\\$\" /proc/kallsyms; then\n  echo \"Linux banner is not exported - please enable CONFIG_KALLSYMS_ALL\"\n  exit_unresolved\nfi\n\n: \"Test get basic types symbol argument\"\necho \"p:testprobe_u $FUNCTION_FORK arg1=@linux_proc_banner:u64 arg2=@linux_proc_banner:u32 arg3=@linux_proc_banner:u16 arg4=@linux_proc_banner:u8\" > kprobe_events\necho \"p:testprobe_s $FUNCTION_FORK arg1=@linux_proc_banner:s64 arg2=@linux_proc_banner:s32 arg3=@linux_proc_banner:s16 arg4=@linux_proc_banner:s8\" >> kprobe_events\nif grep -q \"x8/16/32/64\" README; then\n  echo \"p:testprobe_x $FUNCTION_FORK arg1=@linux_proc_banner:x64 arg2=@linux_proc_banner:x32 arg3=@linux_proc_banner:x16 arg4=@linux_proc_banner:x8\" >> kprobe_events\nfi\necho \"p:testprobe_bf $FUNCTION_FORK arg1=@linux_proc_banner:b8@4/32\" >> kprobe_events\necho 1 > events/kprobes/enable\n(echo \"forked\")\necho 0 > events/kprobes/enable\ngrep \"testprobe_[usx]:.* arg1=.* arg2=.* arg3=.* arg4=.*\" trace\ngrep \"testprobe_bf:.* arg1=.*\" trace\n\n: \"Test get string symbol argument\"\necho \"p:testprobe_str $FUNCTION_FORK arg1=@linux_proc_banner:string\" > kprobe_events\necho 1 > events/kprobes/enable\n(echo \"forked\")\necho 0 > events/kprobes/enable\nRESULT=`grep \"testprobe_str\" trace | sed -e 's/.* arg1=\\(.*\\)/\\1/'`\n\nRESULT=`echo $RESULT | sed -e 's/.* \\((.*)\\) \\((.*)\\) .*/\\1 \\2/'`\nORIG=`cat /proc/version | sed -e 's/.* \\((.*)\\) \\((.*)\\) .*/\\1 \\2/'`\ntest \"$RESULT\" = \"$ORIG\"\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}