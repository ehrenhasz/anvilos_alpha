{
  "module_name": "irqsoff_tracer.tc",
  "hash_id": "66fb83d2484cd2fa6b99163ae7ad9554a29179db1cedaebfc71133be55bced9a",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/ftrace/test.d/preemptirq/irqsoff_tracer.tc",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0\n# description: test for the preemptirqsoff tracer\n# requires: preemptoff:tracer irqsoff:tracer\n\nMOD=preemptirq_delay_test\n\nfail() {\n    reset_tracer\n    rmmod $MOD || true\n    exit_fail\n}\n\nunsup() { #msg\n    reset_tracer\n    rmmod $MOD || true\n    echo $1\n    exit_unsupported\n}\n\nunres() { #msg\n    reset_tracer\n    rmmod $MOD || true\n    echo $1\n    exit_unresolved\n}\n\nmodprobe $MOD || unres \"$MOD module not available\"\nrmmod $MOD\n\nreset_tracer\n\n# Simulate preemptoff section for half a second couple of times\necho preemptoff > current_tracer\nsleep 1\nmodprobe $MOD test_mode=preempt delay=500000 || fail\nrmmod $MOD || fail\nmodprobe $MOD test_mode=preempt delay=500000 || fail\nrmmod $MOD || fail\nmodprobe $MOD test_mode=preempt delay=500000 || fail\nrmmod $MOD || fail\n\ncat trace\n\n# Confirm which tracer\ngrep -q \"tracer: preemptoff\" trace || fail\n\n# Check the end of the section\ngrep -E -q \"5.....us : <stack trace>\" trace || fail\n\n# Check for 500ms of latency\ngrep -E -q \"latency: 5..... us\" trace || fail\n\nreset_tracer\n\n# Simulate irqsoff section for half a second couple of times\necho irqsoff > current_tracer\nsleep 1\nmodprobe $MOD test_mode=irq delay=500000 || fail\nrmmod $MOD || fail\nmodprobe $MOD test_mode=irq delay=500000 || fail\nrmmod $MOD || fail\nmodprobe $MOD test_mode=irq delay=500000 || fail\nrmmod $MOD || fail\n\ncat trace\n\n# Confirm which tracer\ngrep -q \"tracer: irqsoff\" trace || fail\n\n# Check the end of the section\ngrep -E -q \"5.....us : <stack trace>\" trace || fail\n\n# Check for 500ms of latency\ngrep -E -q \"latency: 5..... us\" trace || fail\n\nreset_tracer\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}