{
  "module_name": "test-vphn.c",
  "hash_id": "42ed6cfacef05c49787ac5a384c54245122c620a8fccce5ab16e3acad76f84ba",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/powerpc/vphn/test-vphn.c",
  "human_readable_source": "\n#include <stdio.h>\n#include <byteswap.h>\n#include \"utils.h\"\n#include \"subunit.h\"\n\n#if __BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__\n#define cpu_to_be32(x)\t\tbswap_32(x)\n#define be32_to_cpu(x)\t\tbswap_32(x)\n#define be16_to_cpup(x)\t\tbswap_16(*x)\n#define cpu_to_be64(x)\t\tbswap_64(x)\n#else\n#define cpu_to_be32(x)\t\t(x)\n#define be32_to_cpu(x)\t\t(x)\n#define be16_to_cpup(x)\t\t(*x)\n#define cpu_to_be64(x)\t\t(x)\n#endif\n\n#include \"vphn.c\"\n\nstatic struct test {\n\tchar *descr;\n\tlong input[VPHN_REGISTER_COUNT];\n\tu32 expected[VPHN_ASSOC_BUFSIZE];\n} all_tests[] = {\n\t{\n\t\t\"vphn: no data\",\n\t\t{\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t},\n\t\t{\n\t\t\t0x00000000\n\t\t}\n\t},\n\t{\n\t\t\"vphn: 1 x 16-bit value\",\n\t\t{\n\t\t\t0x8001ffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t},\n\t\t{\n\t\t\t0x00000001,\n\t\t\t0x00000001\n\t\t}\n\t},\n\t{\n\t\t\"vphn: 2 x 16-bit values\",\n\t\t{\n\t\t\t0x80018002ffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t},\n\t\t{\n\t\t\t0x00000002,\n\t\t\t0x00000001,\n\t\t\t0x00000002\n\t\t}\n\t},\n\t{\n\t\t\"vphn: 3 x 16-bit values\",\n\t\t{\n\t\t\t0x800180028003ffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t},\n\t\t{\n\t\t\t0x00000003,\n\t\t\t0x00000001,\n\t\t\t0x00000002,\n\t\t\t0x00000003\n\t\t}\n\t},\n\t{\n\t\t\"vphn: 4 x 16-bit values\",\n\t\t{\n\t\t\t0x8001800280038004,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t},\n\t\t{\n\t\t\t0x00000004,\n\t\t\t0x00000001,\n\t\t\t0x00000002,\n\t\t\t0x00000003,\n\t\t\t0x00000004\n\t\t}\n\t},\n\t{\n\t\t \n\t\t\"vphn: 5 x 16-bit values\",\n\t\t{\n\t\t\t0x8001800280038004,\n\t\t\t0x8005ffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t},\n\t\t{\n\t\t\t0x00000005,\n\t\t\t0x00000001,\n\t\t\t0x00000002,\n\t\t\t0x00000003,\n\t\t\t0x00000004,\n\t\t\t0x00000005\n\t\t}\n\t},\n\t{\n\t\t \n\t\t\"vphn: 24 x 16-bit values\",\n\t\t{\n\t\t\t0x8001800280038004,\n\t\t\t0x8005800680078008,\n\t\t\t0x8009800a800b800c,\n\t\t\t0x800d800e800f8010,\n\t\t\t0x8011801280138014,\n\t\t\t0x8015801680178018\n\t\t},\n\t\t{\n\t\t\t0x00000018,\n\t\t\t0x00000001,\n\t\t\t0x00000002,\n\t\t\t0x00000003,\n\t\t\t0x00000004,\n\t\t\t0x00000005,\n\t\t\t0x00000006,\n\t\t\t0x00000007,\n\t\t\t0x00000008,\n\t\t\t0x00000009,\n\t\t\t0x0000000a,\n\t\t\t0x0000000b,\n\t\t\t0x0000000c,\n\t\t\t0x0000000d,\n\t\t\t0x0000000e,\n\t\t\t0x0000000f,\n\t\t\t0x00000010,\n\t\t\t0x00000011,\n\t\t\t0x00000012,\n\t\t\t0x00000013,\n\t\t\t0x00000014,\n\t\t\t0x00000015,\n\t\t\t0x00000016,\n\t\t\t0x00000017,\n\t\t\t0x00000018\n\t\t}\n\t},\n\t{\n\t\t\"vphn: 1 x 32-bit value\",\n\t\t{\n\t\t\t0x00000001ffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff\n\t\t},\n\t\t{\n\t\t\t0x00000001,\n\t\t\t0x00000001\n\t\t}\n\t},\n\t{\n\t\t\"vphn: 2 x 32-bit values\",\n\t\t{\n\t\t\t0x0000000100000002,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff\n\t\t},\n\t\t{\n\t\t\t0x00000002,\n\t\t\t0x00000001,\n\t\t\t0x00000002\n\t\t}\n\t},\n\t{\n\t\t \n\t\t\"vphn: 3 x 32-bit values\",\n\t\t{\n\t\t\t0x0000000100000002,\n\t\t\t0x00000003ffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff\n\t\t},\n\t\t{\n\t\t\t0x00000003,\n\t\t\t0x00000001,\n\t\t\t0x00000002,\n\t\t\t0x00000003\n\t\t}\n\t},\n\t{\n\t\t \n\t\t\"vphn: 12 x 32-bit values\",\n\t\t{\n\t\t\t0x0000000100000002,\n\t\t\t0x0000000300000004,\n\t\t\t0x0000000500000006,\n\t\t\t0x0000000700000008,\n\t\t\t0x000000090000000a,\n\t\t\t0x0000000b0000000c\n\t\t},\n\t\t{\n\t\t\t0x0000000c,\n\t\t\t0x00000001,\n\t\t\t0x00000002,\n\t\t\t0x00000003,\n\t\t\t0x00000004,\n\t\t\t0x00000005,\n\t\t\t0x00000006,\n\t\t\t0x00000007,\n\t\t\t0x00000008,\n\t\t\t0x00000009,\n\t\t\t0x0000000a,\n\t\t\t0x0000000b,\n\t\t\t0x0000000c\n\t\t}\n\t},\n\t{\n\t\t\"vphn: 16-bit value followed by 32-bit value\",\n\t\t{\n\t\t\t0x800100000002ffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff\n\t\t},\n\t\t{\n\t\t\t0x00000002,\n\t\t\t0x00000001,\n\t\t\t0x00000002\n\t\t}\n\t},\n\t{\n\t\t\"vphn: 32-bit value followed by 16-bit value\",\n\t\t{\n\t\t\t0x000000018002ffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff\n\t\t},\n\t\t{\n\t\t\t0x00000002,\n\t\t\t0x00000001,\n\t\t\t0x00000002\n\t\t}\n\t},\n\t{\n\t\t \n\t\t\"vphn: 16-bit value followed by 2 x 32-bit values\",\n\t\t{\n\t\t\t0x8001000000020000,\n\t\t\t0x0003ffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff\n\t\t},\n\t\t{\n\t\t\t0x00000003,\n\t\t\t0x00000001,\n\t\t\t0x00000002,\n\t\t\t0x00000003,\n\t\t\t0x00000004,\n\t\t\t0x00000005\n\t\t}\n\t},\n\t{\n\t\t \n\t\t\"vphn: 32-bit value has all ones in 16 lower bits\",\n\t\t{\n\t\t\t0x0001ffff80028003,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff,\n\t\t\t0xffffffffffffffff\n\t\t},\n\t\t{\n\t\t\t0x00000003,\n\t\t\t0x0001ffff,\n\t\t\t0x00000002,\n\t\t\t0x00000003\n\t\t}\n\t},\n\t{\n\t\t \n\t\t\"vphn: last 32-bit value is truncated\",\n\t\t{\n\t\t\t0x0000000100000002,\n\t\t\t0x0000000300000004,\n\t\t\t0x0000000500000006,\n\t\t\t0x0000000700000008,\n\t\t\t0x000000090000000a,\n\t\t\t0x0000000b800c2bad\n\t\t},\n\t\t{\n\t\t\t0x0000000c,\n\t\t\t0x00000001,\n\t\t\t0x00000002,\n\t\t\t0x00000003,\n\t\t\t0x00000004,\n\t\t\t0x00000005,\n\t\t\t0x00000006,\n\t\t\t0x00000007,\n\t\t\t0x00000008,\n\t\t\t0x00000009,\n\t\t\t0x0000000a,\n\t\t\t0x0000000b,\n\t\t\t0x0000000c\n\t\t}\n\t},\n\t{\n\t\t\"vphn: garbage after terminator\",\n\t\t{\n\t\t\t0xffff2bad2bad2bad,\n\t\t\t0x2bad2bad2bad2bad,\n\t\t\t0x2bad2bad2bad2bad,\n\t\t\t0x2bad2bad2bad2bad,\n\t\t\t0x2bad2bad2bad2bad,\n\t\t\t0x2bad2bad2bad2bad\n\t\t},\n\t\t{\n\t\t\t0x00000000\n\t\t}\n\t},\n\t{\n\t\tNULL\n\t}\n};\n\nstatic int test_one(struct test *test)\n{\n\t__be32 output[VPHN_ASSOC_BUFSIZE] = { 0 };\n\tint i, len;\n\n\tvphn_unpack_associativity(test->input, output);\n\n\tlen = be32_to_cpu(output[0]);\n\tif (len != test->expected[0]) {\n\t\tprintf(\"expected %d elements, got %d\\n\", test->expected[0],\n\t\t       len);\n\t\treturn 1;\n\t}\n\n\tfor (i = 1; i < len; i++) {\n\t\tu32 val = be32_to_cpu(output[i]);\n\t\tif (val != test->expected[i]) {\n\t\t\tprintf(\"element #%d is 0x%x, should be 0x%x\\n\", i, val,\n\t\t\t       test->expected[i]);\n\t\t\treturn 1;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nstatic int test_vphn(void)\n{\n\tstatic struct test *test;\n\n\tfor (test = all_tests; test->descr; test++) {\n\t\tint ret;\n\n\t\tret = test_one(test);\n\t\ttest_finish(test->descr, ret);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\n\treturn 0;\n}\n\nint main(int argc, char **argv)\n{\n\treturn test_harness(test_vphn, \"test-vphn\");\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}