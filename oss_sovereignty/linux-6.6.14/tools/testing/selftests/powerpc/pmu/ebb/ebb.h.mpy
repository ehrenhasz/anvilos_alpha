{
  "module_name": "ebb.h",
  "hash_id": "b1e864f48f2297454660a92d13ac2b159ce18f3ccb2eacf186fc9b14958af37f",
  "original_prompt": "Ingested from linux-6.6.14/tools/testing/selftests/powerpc/pmu/ebb/ebb.h",
  "human_readable_source": " \n \n\n#ifndef _SELFTESTS_POWERPC_PMU_EBB_EBB_H\n#define _SELFTESTS_POWERPC_PMU_EBB_EBB_H\n\n#include \"../event.h\"\n#include \"../lib.h\"\n#include \"trace.h\"\n#include \"reg.h\"\n\n#define PMC_INDEX(pmc)\t((pmc)-1)\n\n#define NUM_PMC_VALUES\t128\n\nstruct ebb_state\n{\n\tstruct {\n\t\tu64 pmc_count[6];\n\t\tvolatile int ebb_count;\n\t\tint spurious;\n\t\tint negative;\n\t\tint no_overflow;\n\t} stats;\n\n\tbool pmc_enable[6];\n\tstruct trace_buffer *trace;\n};\n\nextern struct ebb_state ebb_state;\n\n#define COUNTER_OVERFLOW 0x80000000ull\n\nstatic inline uint32_t pmc_sample_period(uint32_t value)\n{\n\treturn COUNTER_OVERFLOW - value;\n}\n\nstatic inline void ebb_enable_pmc_counting(int pmc)\n{\n\tebb_state.pmc_enable[PMC_INDEX(pmc)] = true;\n}\n\nbool ebb_check_count(int pmc, u64 sample_period, int fudge);\nvoid event_leader_ebb_init(struct event *e);\nvoid event_ebb_init(struct event *e);\nvoid event_bhrb_init(struct event *e, unsigned ifm);\nvoid setup_ebb_handler(void (*callee)(void));\nvoid standard_ebb_callee(void);\nint ebb_event_enable(struct event *e);\nvoid ebb_global_enable(void);\nvoid ebb_global_disable(void);\nbool ebb_is_supported(void);\nvoid ebb_freeze_pmcs(void);\nvoid ebb_unfreeze_pmcs(void);\nint count_pmc(int pmc, uint32_t sample_period);\nvoid dump_ebb_state(void);\nvoid dump_summary_ebb_state(void);\nvoid dump_ebb_hw_state(void);\nvoid clear_ebb_stats(void);\nvoid write_pmc(int pmc, u64 value);\nu64 read_pmc(int pmc);\nvoid reset_ebb_with_clear_mask(unsigned long mmcr0_clear_mask);\nvoid reset_ebb(void);\nint ebb_check_mmcr0(void);\n\nextern u64 sample_period;\n\nint core_busy_loop(void);\nint ebb_child(union pipe read_pipe, union pipe write_pipe);\nint catch_sigill(void (*func)(void));\nvoid write_pmc1(void);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}