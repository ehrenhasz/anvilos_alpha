{
  "module_name": "usbip_common.h",
  "hash_id": "ad87837d104a98a4a1cc51ee03458fa7ceb33f4d76c730f04e2cef09d8be4bb4",
  "original_prompt": "Ingested from linux-6.6.14/tools/usb/usbip/libsrc/usbip_common.h",
  "human_readable_source": " \n \n\n#ifndef __USBIP_COMMON_H\n#define __USBIP_COMMON_H\n\n#include <libudev.h>\n\n#include <stdint.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n#include <syslog.h>\n#include <unistd.h>\n#include <linux/usb/ch9.h>\n#include <linux/usbip.h>\n\n#ifndef USBIDS_FILE\n#define USBIDS_FILE \"/usr/share/hwdata/usb.ids\"\n#endif\n\n#ifndef VHCI_STATE_PATH\n#define VHCI_STATE_PATH \"/var/run/vhci_hcd\"\n#endif\n\n#define VUDC_DEVICE_DESCR_FILE \"dev_desc\"\n\n \n#define USBIP_CORE_MOD_NAME\t\"usbip-core\"\n#define USBIP_HOST_DRV_NAME\t\"usbip-host\"\n#define USBIP_DEVICE_DRV_NAME\t\"usbip-vudc\"\n#define USBIP_VHCI_DRV_NAME\t\"vhci_hcd\"\n\n \n#define SYSFS_MNT_PATH         \"/sys\"\n#define SYSFS_BUS_NAME         \"bus\"\n#define SYSFS_BUS_TYPE         \"usb\"\n#define SYSFS_DRIVERS_NAME     \"drivers\"\n\n#define SYSFS_PATH_MAX\t\t256\n#define SYSFS_BUS_ID_SIZE\t32\n\n \n#define ST_OK\t0x00\n#define ST_NA\t0x01\n\t \n#define ST_DEV_BUSY\t0x02\n\t \n#define ST_DEV_ERR\t0x03\n#define ST_NODEV\t0x04\n#define ST_ERROR\t0x05\n\nextern int usbip_use_syslog;\nextern int usbip_use_stderr;\nextern int usbip_use_debug ;\n\n#define PROGNAME \"usbip\"\n\n#define pr_fmt(fmt)\t\"%s: %s: \" fmt \"\\n\", PROGNAME\n#define dbg_fmt(fmt)\tpr_fmt(\"%s:%d:[%s] \" fmt), \"debug\",\t\\\n\t\t        __FILE__, __LINE__, __func__\n\n#define err(fmt, args...)\t\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tif (usbip_use_syslog) {\t\t\t\t\t\\\n\t\t\tsyslog(LOG_ERR, pr_fmt(fmt), \"error\", ##args);\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t\tif (usbip_use_stderr) {\t\t\t\t\t\\\n\t\t\tfprintf(stderr, pr_fmt(fmt), \"error\", ##args);\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t} while (0)\n\n#define info(fmt, args...)\t\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\t\tif (usbip_use_syslog) {\t\t\t\t\t\\\n\t\t\tsyslog(LOG_INFO, pr_fmt(fmt), \"info\", ##args);\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t\tif (usbip_use_stderr) {\t\t\t\t\t\\\n\t\t\tfprintf(stderr, pr_fmt(fmt), \"info\", ##args);\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t} while (0)\n\n#define dbg(fmt, args...)\t\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\t\t\\\n\tif (usbip_use_debug) {\t\t\t\t\t\t\\\n\t\tif (usbip_use_syslog) {\t\t\t\t\t\\\n\t\t\tsyslog(LOG_DEBUG, dbg_fmt(fmt), ##args);\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t\tif (usbip_use_stderr) {\t\t\t\t\t\\\n\t\t\tfprintf(stderr, dbg_fmt(fmt), ##args);\t\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n\t} while (0)\n\n#define BUG()\t\t\t\t\t\t\\\n\tdo {\t\t\t\t\t\t\\\n\t\terr(\"sorry, it's a bug!\");\t\t\\\n\t\tabort();\t\t\t\t\\\n\t} while (0)\n\nstruct usbip_usb_interface {\n\tuint8_t bInterfaceClass;\n\tuint8_t bInterfaceSubClass;\n\tuint8_t bInterfaceProtocol;\n\tuint8_t padding;\t \n} __attribute__((packed));\n\nstruct usbip_usb_device {\n\tchar path[SYSFS_PATH_MAX];\n\tchar busid[SYSFS_BUS_ID_SIZE];\n\n\tuint32_t busnum;\n\tuint32_t devnum;\n\tuint32_t speed;\n\n\tuint16_t idVendor;\n\tuint16_t idProduct;\n\tuint16_t bcdDevice;\n\n\tuint8_t bDeviceClass;\n\tuint8_t bDeviceSubClass;\n\tuint8_t bDeviceProtocol;\n\tuint8_t bConfigurationValue;\n\tuint8_t bNumConfigurations;\n\tuint8_t bNumInterfaces;\n} __attribute__((packed));\n\n#define to_string(s)\t#s\n\nvoid dump_usb_interface(struct usbip_usb_interface *);\nvoid dump_usb_device(struct usbip_usb_device *);\nint read_usb_device(struct udev_device *sdev, struct usbip_usb_device *udev);\nint read_attr_value(struct udev_device *dev, const char *name,\n\t\t    const char *format);\nint read_usb_interface(struct usbip_usb_device *udev, int i,\n\t\t       struct usbip_usb_interface *uinf);\n\nconst char *usbip_speed_string(int num);\nconst char *usbip_status_string(int32_t status);\nconst char *usbip_op_common_status_string(int status);\n\nint usbip_names_init(char *);\nvoid usbip_names_free(void);\nvoid usbip_names_get_product(char *buff, size_t size, uint16_t vendor,\n\t\t\t     uint16_t product);\nvoid usbip_names_get_class(char *buff, size_t size, uint8_t class,\n\t\t\t   uint8_t subclass, uint8_t protocol);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}