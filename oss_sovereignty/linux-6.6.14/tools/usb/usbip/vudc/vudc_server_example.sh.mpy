{
  "module_name": "vudc_server_example.sh",
  "hash_id": "f43d1e495d3251a787f71b75ae2928d2bc8c00857b8a65d863d715b3fdd2f910",
  "original_prompt": "Ingested from linux-6.6.14/tools/usb/usbip/vudc/vudc_server_example.sh",
  "human_readable_source": "#!/bin/bash\n\n################################################################################\n# This is free and unencumbered software released into the public domain.\n#\n# Anyone is free to copy, modify, publish, use, compile, sell, or\n# distribute this software, either in source code form or as a compiled\n# binary, for any purpose, commercial or non-commercial, and by any\n# means.\n#\n# In jurisdictions that recognize copyright laws, the author or authors\n# of this software dedicate any and all copyright interest in the\n# software to the public domain. We make this dedication for the benefit\n# of the public at large and to the detriment of our heirs and\n# successors. We intend this dedication to be an overt act of\n# relinquishment in perpetuity of all present and future rights to this\n# software under copyright law.\n#\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n# IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n# OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n# ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n# OTHER DEALINGS IN THE SOFTWARE.\n#\n# For more information, please refer to <https://unlicense.org/>\n################################################################################\n\n################################################################################\n# This is a sample script which shows how to use vUDC with ConfigFS gadgets\n################################################################################\n\n# Stop script on error\nset -e\n\n################################################################################\n# Create your USB gadget\n# You may use bare ConfigFS interface (as below)\n# or libusbgx or gt toool\n# Instead of ConfigFS gadgets you may use any of legacy gadgets.\n################################################################################\nCONFIGFS_MOUNT_POINT=\"/sys/kernel/config\"\nGADGET_NAME=\"g1\"\nID_VENDOR=\"0x1d6b\"\nID_PRODUCT=\"0x0104\"\n\ncd ${CONFIGFS_MOUNT_POINT}/usb_gadget\n# Create a new USB gadget\nmkdir ${GADGET_NAME}\ncd ${GADGET_NAME}\n\n# This gadget contains one function - ACM (serial port over USB)\nFUNC_DIR=\"functions/acm.ser0\"\nmkdir ${FUNC_DIR}\n\n# Just one configuration\nmkdir configs/c.1\nln -s ${FUNC_DIR} configs/c.1\n\n# Set our gadget identity\necho ${ID_VENDOR} > idVendor\necho ${ID_PRODUCT} > idProduct\n\n################################################################################\n# Load vudc-module if vudc is not available\n# You may change value of num param to get more than one vUDC instance\n################################################################################\n[[ -d /sys/class/udc/usbip-vudc.0 ]] || modprobe usbip-vudc num=1\n\n################################################################################\n# Bind gadget to our vUDC\n# By default we bind to first one but you may change this if you would like\n# to use more than one instance\n################################################################################\necho \"usbip-vudc.0\" > UDC\n\n################################################################################\n# Let's now run our usbip daemon in a USB device mode\n################################################################################\nusbipd --device &\n\n################################################################################\n# Now your USB gadget is available using USB/IP protocol.\n# To prepare your client, you should ensure that usbip-vhci module is inside\n# your kernel. If it's not then you can load it:\n#\n# $ modprobe usbip-vhci\n#\n# To check availability of your gadget you may try to list devices exported\n# on a remote server:\n#\n# $ modprobe usbip-vhci\n# $ usbip list -r $SERVER_IP\n# Exportable USB devices\n# ======================\n# usbipd: info: request 0x8005(6): complete\n#  - 127.0.0.1\n# usbip-vudc.0: Linux Foundation : unknown product (1d6b:0104)\n#            : /sys/devices/platform/usbip-vudc.0\n#            : (Defined at Interface level) (00/00/00)\n#\n# To attach this device to your client you may use:\n#\n# $ usbip attach -r $SERVER_IP -d usbip-vudc.0\n#\n################################################################################\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}