{
  "module_name": "dwarf-regs.c",
  "hash_id": "4fe5f7b037d3084a9c1fde80cebfce9b4ddafde94bf31a219d2199d72013dce1",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/arch/x86/util/dwarf-regs.c",
  "human_readable_source": "\n \n\n#include <stddef.h>\n#include <errno.h>  \n#include <string.h>  \n#include <linux/ptrace.h>  \n#include <linux/kernel.h>  \n#include <dwarf-regs.h>\n\n \n\nstruct pt_regs_offset {\n\tconst char *name;\n\tint offset;\n};\n\n#define REG_OFFSET_END {.name = NULL, .offset = 0}\n\n#ifdef __x86_64__\n# define REG_OFFSET_NAME_64(n, r) {.name = n, .offset = offsetof(struct pt_regs, r)}\n# define REG_OFFSET_NAME_32(n, r) {.name = n, .offset = -1}\n#else\n# define REG_OFFSET_NAME_64(n, r) {.name = n, .offset = -1}\n# define REG_OFFSET_NAME_32(n, r) {.name = n, .offset = offsetof(struct pt_regs, r)}\n#endif\n\n \n#ifndef __x86_64__\nstatic const struct pt_regs_offset x86_32_regoffset_table[] = {\n\tREG_OFFSET_NAME_32(\"%ax\",\teax),\n\tREG_OFFSET_NAME_32(\"%cx\",\tecx),\n\tREG_OFFSET_NAME_32(\"%dx\",\tedx),\n\tREG_OFFSET_NAME_32(\"%bx\",\tebx),\n\tREG_OFFSET_NAME_32(\"$stack\",\tesp),\t \n\tREG_OFFSET_NAME_32(\"%bp\",\tebp),\n\tREG_OFFSET_NAME_32(\"%si\",\tesi),\n\tREG_OFFSET_NAME_32(\"%di\",\tedi),\n\tREG_OFFSET_END,\n};\n\n#define regoffset_table x86_32_regoffset_table\n#else\nstatic const struct pt_regs_offset x86_64_regoffset_table[] = {\n\tREG_OFFSET_NAME_64(\"%ax\",\trax),\n\tREG_OFFSET_NAME_64(\"%dx\",\trdx),\n\tREG_OFFSET_NAME_64(\"%cx\",\trcx),\n\tREG_OFFSET_NAME_64(\"%bx\",\trbx),\n\tREG_OFFSET_NAME_64(\"%si\",\trsi),\n\tREG_OFFSET_NAME_64(\"%di\",\trdi),\n\tREG_OFFSET_NAME_64(\"%bp\",\trbp),\n\tREG_OFFSET_NAME_64(\"%sp\",\trsp),\n\tREG_OFFSET_NAME_64(\"%r8\",\tr8),\n\tREG_OFFSET_NAME_64(\"%r9\",\tr9),\n\tREG_OFFSET_NAME_64(\"%r10\",\tr10),\n\tREG_OFFSET_NAME_64(\"%r11\",\tr11),\n\tREG_OFFSET_NAME_64(\"%r12\",\tr12),\n\tREG_OFFSET_NAME_64(\"%r13\",\tr13),\n\tREG_OFFSET_NAME_64(\"%r14\",\tr14),\n\tREG_OFFSET_NAME_64(\"%r15\",\tr15),\n\tREG_OFFSET_END,\n};\n\n#define regoffset_table x86_64_regoffset_table\n#endif\n\n \n#define ARCH_MAX_REGS ((sizeof(regoffset_table) / sizeof(regoffset_table[0])) - 1)\n\n \nconst char *get_arch_regstr(unsigned int n)\n{\n\treturn (n < ARCH_MAX_REGS) ? regoffset_table[n].name : NULL;\n}\n\n \n \nint regs_query_register_offset(const char *name)\n{\n\tconst struct pt_regs_offset *roff;\n\tfor (roff = regoffset_table; roff->name != NULL; roff++)\n\t\tif (!strcmp(roff->name, name))\n\t\t\treturn roff->offset;\n\treturn -EINVAL;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}