{
  "module_name": "Makefile",
  "hash_id": "2b7f0430d85a415513b851e5f822db4fffad6eaeee57f668c21c19f3f70fc274",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/Documentation/Makefile",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0-only\ninclude ../../scripts/Makefile.include\ninclude ../../scripts/utilities.mak\n\nARTICLES =\n# with their own formatting rules.\nSP_ARTICLES =\n\nMAN1_TXT= \\\n\t$(filter-out $(addsuffix .txt, $(ARTICLES) $(SP_ARTICLES)), \\\n\t\t$(wildcard perf-*.txt)) \\\n\tperf.txt\nMAN5_TXT=\nMAN7_TXT=\n\nMAN_TXT = $(MAN1_TXT) $(MAN5_TXT) $(MAN7_TXT)\n_MAN_XML=$(patsubst %.txt,%.xml,$(MAN_TXT))\n_MAN_HTML=$(patsubst %.txt,%.html,$(MAN_TXT))\n\nMAN_XML=$(addprefix $(OUTPUT),$(_MAN_XML))\nMAN_HTML=$(addprefix $(OUTPUT),$(_MAN_HTML))\n\n_DOC_HTML = $(_MAN_HTML)\n_DOC_HTML+=$(patsubst %,%.html,$(ARTICLES) $(SP_ARTICLES))\nDOC_HTML=$(addprefix $(OUTPUT),$(_DOC_HTML))\n\n_DOC_MAN1=$(patsubst %.txt,%.1,$(MAN1_TXT))\n_DOC_MAN5=$(patsubst %.txt,%.5,$(MAN5_TXT))\n_DOC_MAN7=$(patsubst %.txt,%.7,$(MAN7_TXT))\n\nDOC_MAN1=$(addprefix $(OUTPUT),$(_DOC_MAN1))\nDOC_MAN5=$(addprefix $(OUTPUT),$(_DOC_MAN5))\nDOC_MAN7=$(addprefix $(OUTPUT),$(_DOC_MAN7))\n\n# Make the path relative to DESTDIR, not prefix\nifndef DESTDIR\nprefix?=$(HOME)\nendif\nbindir?=$(prefix)/bin\nhtmldir?=$(prefix)/share/doc/perf-doc\npdfdir?=$(prefix)/share/doc/perf-doc\nmandir?=$(prefix)/share/man\nman1dir=$(mandir)/man1\nman5dir=$(mandir)/man5\nman7dir=$(mandir)/man7\n\nASCIIDOC=asciidoc\nASCIIDOC_EXTRA += --unsafe -f asciidoc.conf\nASCIIDOC_HTML = xhtml11\nMANPAGE_XSL = manpage-normal.xsl\nXMLTO_EXTRA =\nINSTALL?=install\nRM ?= rm -f\nDOC_REF = origin/man\nHTML_REF = origin/html\n\nifdef USE_ASCIIDOCTOR\nASCIIDOC = asciidoctor\nASCIIDOC_EXTRA += -a compat-mode\nASCIIDOC_EXTRA += -I. -rasciidoctor-extensions\nASCIIDOC_EXTRA += -a mansource=\"perf\" -a manmanual=\"perf Manual\"\nASCIIDOC_HTML = xhtml5\nendif\n\ninfodir?=$(prefix)/share/info\nMAKEINFO=makeinfo\nINSTALL_INFO=install-info\nDOCBOOK2X_TEXI=docbook2x-texi\nDBLATEX=dblatex\nXMLTO=xmlto\nifndef PERL_PATH\n\tPERL_PATH = /usr/bin/perl\nendif\n\n-include ../config.mak.autogen\n-include ../config.mak\n\n_tmp_tool_path := $(call get-executable,$(ASCIIDOC))\nifeq ($(_tmp_tool_path),)\n\tmissing_tools = $(ASCIIDOC)\nendif\n\nifndef USE_ASCIIDOCTOR\n_tmp_tool_path := $(call get-executable,$(XMLTO))\nifeq ($(_tmp_tool_path),)\n\tmissing_tools += $(XMLTO)\nendif\nendif\n\n#\n# For asciidoc ...\n#\t-7.1.2,\tno extra settings are needed.\n#\t8.0-,\tset ASCIIDOC8.\n#\n\n#\n# For docbook-xsl ...\n#\t-1.68.1,\tset ASCIIDOC_NO_ROFF? (based on changelog from 1.73.0)\n#\t1.69.0,\t\tno extra settings are needed?\n#\t1.69.1-1.71.0,\tset DOCBOOK_SUPPRESS_SP?\n#\t1.71.1,\t\tno extra settings are needed?\n#\t1.72.0,\t\tset DOCBOOK_XSL_172.\n#\t1.73.0-,\tset ASCIIDOC_NO_ROFF\n#\n\n#\n# If you had been using DOCBOOK_XSL_172 in an attempt to get rid\n# of 'the \".ft C\" problem' in your generated manpages, and you\n# instead ended up with weird characters around callouts, try\n# using ASCIIDOC_NO_ROFF instead (it works fine with ASCIIDOC8).\n#\n\nifdef ASCIIDOC8\nASCIIDOC_EXTRA += -a asciidoc7compatible\nendif\nifdef DOCBOOK_XSL_172\nASCIIDOC_EXTRA += -a perf-asciidoc-no-roff\nMANPAGE_XSL = manpage-1.72.xsl\nelse\n\tifdef ASCIIDOC_NO_ROFF\n\t# docbook-xsl after 1.72 needs the regular XSL, but will not\n\t# pass-thru raw roff codes from asciidoc.conf, so turn them off.\n\tASCIIDOC_EXTRA += -a perf-asciidoc-no-roff\n\tendif\nendif\nifdef MAN_BOLD_LITERAL\nXMLTO_EXTRA += -m manpage-bold-literal.xsl\nendif\nifdef DOCBOOK_SUPPRESS_SP\nXMLTO_EXTRA += -m manpage-suppress-sp.xsl\nendif\n\nSHELL_PATH ?= $(SHELL)\n# Shell quote;\nSHELL_PATH_SQ = $(subst ','\\'',$(SHELL_PATH))\n\n#\n# Please note that there is a minor bug in asciidoc.\n# The version after 6.0.3 _will_ include the patch found here:\n#   http://marc.theaimsgroup.com/?l=perf&m=111558757202243&w=2\n#\n# Until that version is released you may have to apply the patch\n# yourself - yes, all 6 characters of it!\n#\n\nQUIET_SUBDIR0  = +$(MAKE) -C # space to separate -C and subdir\nQUIET_SUBDIR1  =\n\nifneq ($(findstring $(MAKEFLAGS),w),w)\nPRINT_DIR = --no-print-directory\nelse # \"make -w\"\nNO_SUBDIR = :\nendif\n\nifneq ($(findstring $(MAKEFLAGS),s),s)\nifneq ($(V),1)\n\tQUIET_ASCIIDOC\t= @echo '  ASCIIDOC '$@;\n\tQUIET_XMLTO\t= @echo '  XMLTO    '$@;\n\tQUIET_DB2TEXI\t= @echo '  DB2TEXI  '$@;\n\tQUIET_MAKEINFO\t= @echo '  MAKEINFO '$@;\n\tQUIET_DBLATEX\t= @echo '  DBLATEX  '$@;\n\tQUIET_XSLTPROC\t= @echo '  XSLTPROC '$@;\n\tQUIET_GEN\t= @echo '  GEN      '$@;\n\tQUIET_STDERR\t= 2> /dev/null\n\tQUIET_SUBDIR0\t= +@subdir=\n\tQUIET_SUBDIR1\t= ;$(NO_SUBDIR) \\\n\t\t\t   echo '  SUBDIR   ' $$subdir; \\\n\t\t\t  $(MAKE) $(PRINT_DIR) -C $$subdir\n\texport V\nendif\nendif\n\nall: html man info\n\nhtml: $(DOC_HTML)\n\n$(DOC_HTML) $(DOC_MAN1) $(DOC_MAN5) $(DOC_MAN7): asciidoc.conf\n\nman: man1 man5 man7\nman1: $(DOC_MAN1)\nman5: $(DOC_MAN5)\nman7: $(DOC_MAN7)\n\ninfo: $(OUTPUT)perf.info $(OUTPUT)perfman.info\n\ninstall: install-man\n\ncheck-man-tools:\nifdef missing_tools\n\t$(error \"You need to install $(missing_tools) for man pages\")\nendif\n\ndo-install-man: man\n\t$(call QUIET_INSTALL, Documentation-man) \\\n\t\t$(INSTALL) -d -m 755 $(DESTDIR)$(man1dir); \\\n#\t\t$(INSTALL) -d -m 755 $(DESTDIR)$(man5dir); \\\n#\t\t$(INSTALL) -d -m 755 $(DESTDIR)$(man7dir); \\\n\t\t$(INSTALL) -m 644 $(DOC_MAN1) $(DESTDIR)$(man1dir); \\\n#\t\t$(INSTALL) -m 644 $(DOC_MAN5) $(DESTDIR)$(man5dir); \\\n#\t\t$(INSTALL) -m 644 $(DOC_MAN7) $(DESTDIR)$(man7dir)\n\ninstall-man: check-man-tools man do-install-man\n\nifdef missing_tools\n  DO_INSTALL_MAN = $(warning Please install $(missing_tools) to have the man pages installed)\nelse\n  DO_INSTALL_MAN = do-install-man\nendif\n\ntry-install-man: $(DO_INSTALL_MAN)\n\ninstall-info: info\n\t$(call QUIET_INSTALL, Documentation-info) \\\n\t\t$(INSTALL) -d -m 755 $(DESTDIR)$(infodir); \\\n\t\t$(INSTALL) -m 644 $(OUTPUT)perf.info $(OUTPUT)perfman.info $(DESTDIR)$(infodir); \\\n\tif test -r $(DESTDIR)$(infodir)/dir; then \\\n\t\t$(INSTALL_INFO) --info-dir=$(DESTDIR)$(infodir) perf.info ;\\\n\t\t$(INSTALL_INFO) --info-dir=$(DESTDIR)$(infodir) perfman.info ;\\\n\telse \\\n\t  echo \"No directory found in $(DESTDIR)$(infodir)\" >&2 ; \\\n\tfi\n\n#install-html: html\n#\t'$(SHELL_PATH_SQ)' ./install-webdoc.sh $(DESTDIR)$(htmldir)\n\n\n#\n# Determine \"include::\" file references in asciidoc files.\n#\n$(OUTPUT)doc.dep : $(wildcard *.txt) build-docdep.perl\n\t$(QUIET_GEN)$(RM) $@+ $@ && \\\n\t$(PERL_PATH) ./build-docdep.perl >$@+ $(QUIET_STDERR) && \\\n\tmv $@+ $@\n\n-include $(OUTPUT)doc.dep\n\nCLEAN_FILES =\t\t\t\t\t\t\t\t\t\\\n\t$(MAN_XML) $(addsuffix +,$(MAN_XML))\t\t\t\t\t\\\n\t$(MAN_HTML) $(addsuffix +,$(MAN_HTML))\t\t\t\t\t\\\n\t$(DOC_HTML) $(DOC_MAN1) $(DOC_MAN5) $(DOC_MAN7)\t\t\t\t\\\n\t$(OUTPUT)*.texi $(OUTPUT)*.texi+ $(OUTPUT)*.texi++\t\t\t\\\n\t$(OUTPUT)perf.info $(OUTPUT)perfman.info $(OUTPUT)doc.dep\t\t\\\n\t$(OUTPUT)technical/api-*.html $(OUTPUT)technical/api-index.txt\nclean:\n\t$(call QUIET_CLEAN, Documentation) $(RM) $(CLEAN_FILES)\n\n$(MAN_HTML): $(OUTPUT)%.html : %.txt\n\t$(QUIET_ASCIIDOC)$(RM) $@+ $@ && \\\n\t$(ASCIIDOC) -b $(ASCIIDOC_HTML) -d manpage \\\n\t\t$(ASCIIDOC_EXTRA) -aperf_version=$(PERF_VERSION) -o $@+ $< && \\\n\tmv $@+ $@\n\n# Generate date from either KBUILD_BUILD_TIMESTAMP or git log of\n# the doc input file\nPERF_DATE = $(strip \\\n              $(if $(KBUILD_BUILD_TIMESTAMP), \\\n                $(shell date -u -d '$(KBUILD_BUILD_TIMESTAMP)' +%Y-%m-%d), \\\n                $(shell git log -1 --pretty=\"format:%cd\" \\\n                    --date=short --no-show-signature $<)))\n\nifdef USE_ASCIIDOCTOR\n$(OUTPUT)%.1 $(OUTPUT)%.5 $(OUTPUT)%.7 : %.txt\n\t$(QUIET_ASCIIDOC)$(RM) $@+ $@ && \\\n\t$(ASCIIDOC) -b manpage -d manpage \\\n\t\t$(ASCIIDOC_EXTRA) -aperf_version=$(PERF_VERSION) \\\n\t\t-adocdate=$(PERF_DATE) -o $@+ $< && \\\n\tmv $@+ $@\nendif\n\n$(OUTPUT)%.1 $(OUTPUT)%.5 $(OUTPUT)%.7 : $(OUTPUT)%.xml\n\t$(QUIET_XMLTO)$(RM) $@ && \\\n\t$(XMLTO) -o $(OUTPUT). -m $(MANPAGE_XSL) $(XMLTO_EXTRA) man $<\n\n$(OUTPUT)%.xml : %.txt\n\t$(QUIET_ASCIIDOC)$(RM) $@+ $@ && \\\n\t$(ASCIIDOC) -b docbook -d manpage \\\n\t\t$(ASCIIDOC_EXTRA) -aperf_version=$(PERF_VERSION) \\\n\t\t-aperf_date=$(PERF_DATE) -o $@+ $< && \\\n\tmv $@+ $@\n\nXSLT = docbook.xsl\nXSLTOPTS = --xinclude --stringparam html.stylesheet docbook-xsl.css\n\n$(OUTPUT)perfman.texi: $(MAN_XML) cat-texi.perl\n\t$(QUIET_DB2TEXI)$(RM) $@+ $@ && \\\n\t($(foreach xml,$(MAN_XML),$(DOCBOOK2X_TEXI) --encoding=UTF-8 \\\n\t\t--to-stdout $(xml) &&) true) > $@++ && \\\n\t$(PERL_PATH) cat-texi.perl $@ <$@++ >$@+ && \\\n\trm $@++ && \\\n\tmv $@+ $@\n\n$(OUTPUT)perfman.info: $(OUTPUT)perfman.texi\n\t$(QUIET_MAKEINFO)$(MAKEINFO) --no-split --no-validate -o $@ $*.texi\n\n$(patsubst %.txt,%.texi,$(MAN_TXT)): %.texi : %.xml\n\t$(QUIET_DB2TEXI)$(RM) $@+ $@ && \\\n\t$(DOCBOOK2X_TEXI) --to-stdout $*.xml >$@+ && \\\n\tmv $@+ $@\n\n$(patsubst %,%.html,$(ARTICLES)) : %.html : %.txt\n\t$(QUIET_ASCIIDOC)$(ASCIIDOC) -b $(ASCIIDOC_HTML) $*.txt\n\nWEBDOC_DEST = /pub/software/tools/perf/docs\n\n# UNIMPLEMENTED\n#install-webdoc : html\n#\t'$(SHELL_PATH_SQ)' ./install-webdoc.sh $(WEBDOC_DEST)\n\n# quick-install: quick-install-man\n\n# quick-install-man:\n#\t'$(SHELL_PATH_SQ)' ./install-doc-quick.sh $(DOC_REF) $(DESTDIR)$(mandir)\n\n#quick-install-html:\n#\t'$(SHELL_PATH_SQ)' ./install-doc-quick.sh $(HTML_REF) $(DESTDIR)$(htmldir)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}