{
  "module_name": "perf-diff.txt",
  "hash_id": "511928db7cdaf12400ed8ed82011ef4be81f0a956eac9038876aa243ea9f587e",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/Documentation/perf-diff.txt",
  "human_readable_source": "perf-diff(1)\n============\n\nNAME\n----\nperf-diff - Read perf.data files and display the differential profile\n\nSYNOPSIS\n--------\n[verse]\n'perf diff' [baseline file] [data file1] [[data file2] ... ]\n\nDESCRIPTION\n-----------\nThis command displays the performance difference amongst two or more perf.data\nfiles captured via perf record.\n\nIf no parameters are passed it will assume perf.data.old and perf.data.\n\nThe differential profile is displayed only for events matching both\nspecified perf.data files.\n\nIf no parameters are passed the samples will be sorted by dso and symbol.\nAs the perf.data files could come from different binaries, the symbols addresses\ncould vary. So perf diff is based on the comparison of the files and\nsymbols name.\n\nOPTIONS\n-------\n-D::\n--dump-raw-trace::\n        Dump raw trace in ASCII.\n\n--kallsyms=<file>::\n        kallsyms pathname\n\n-m::\n--modules::\n        Load module symbols. WARNING: use only with -k and LIVE kernel\n\n-d::\n--dsos=::\n\tOnly consider symbols in these dsos. CSV that understands\n\tfile://filename entries.  This option will affect the percentage\n\tof the Baseline/Delta column.  See --percentage for more info.\n\n-C::\n--comms=::\n\tOnly consider symbols in these comms. CSV that understands\n\tfile://filename entries.  This option will affect the percentage\n\tof the Baseline/Delta column.  See --percentage for more info.\n\n-S::\n--symbols=::\n\tOnly consider these symbols. CSV that understands\n\tfile://filename entries.  This option will affect the percentage\n\tof the Baseline/Delta column.  See --percentage for more info.\n\n-s::\n--sort=::\n\tSort by key(s): pid, comm, dso, symbol, cpu, parent, srcline.\n\tPlease see description of --sort in the perf-report man page.\n\n-t::\n--field-separator=::\n\n\tUse a special separator character and don't pad with spaces, replacing\n\tall occurrences of this separator in symbol names (and other output)\n\twith a '.' character, that thus it's the only non valid separator.\n\n-v::\n--verbose::\n\tBe verbose, for instance, show the raw counts in addition to the\n\tdiff.\n\n-q::\n--quiet::\n\tDo not show any warnings or messages.  (Suppress -v)\n\n-f::\n--force::\n        Don't do ownership validation.\n\n--symfs=<directory>::\n        Look for files with symbols relative to this directory.\n\n-b::\n--baseline-only::\n        Show only items with match in baseline.\n\n-c::\n--compute::\n        Differential computation selection - delta, ratio, wdiff, cycles,\n        delta-abs (default is delta-abs).  Default can be changed using\n        diff.compute config option.  See COMPARISON METHODS section for\n        more info.\n\n--cycles-hist::\n\tReport a histogram and the standard deviation for cycles data.\n\tIt can help us to judge if the reported cycles data is noisy or\n\tnot. This option should be used with '-c cycles'.\n\n-p::\n--period::\n        Show period values for both compared hist entries.\n\n-F::\n--formula::\n        Show formula for given computation.\n\n-o::\n--order::\n       Specify compute sorting column number.  0 means sorting by baseline\n       overhead and 1 (default) means sorting by computed value of column 1\n       (data from the first file other base baseline).  Values more than 1\n       can be used only if enough data files are provided.\n       The default value can be set using the diff.order config option.\n\n--percentage::\n\tDetermine how to display the overhead percentage of filtered entries.\n\tFilters can be applied by --comms, --dsos and/or --symbols options.\n\n\t\"relative\" means it's relative to filtered entries only so that the\n\tsum of shown entries will be always 100%.  \"absolute\" means it retains\n\tthe original value before and after the filter is applied.\n\n--time::\n\tAnalyze samples within given time window. It supports time\n\tpercent with multiple time ranges. Time string is 'a%/n,b%/m,...'\n\tor 'a%-b%,c%-%d,...'.\n\n\tFor example:\n\n\tSelect the second 10% time slice to diff:\n\n\t  perf diff --time 10%/2\n\n\tSelect from 0% to 10% time slice to diff:\n\n\t  perf diff --time 0%-10%\n\n\tSelect the first and the second 10% time slices to diff:\n\n\t  perf diff --time 10%/1,10%/2\n\n\tSelect from 0% to 10% and 30% to 40% slices to diff:\n\n\t  perf diff --time 0%-10%,30%-40%\n\n\tIt also supports analyzing samples within a given time window\n\t<start>,<stop>. Times have the format seconds.nanoseconds. If 'start'\n\tis not given (i.e. time string is ',x.y') then analysis starts at\n\tthe beginning of the file. If stop time is not given (i.e. time\n\tstring is 'x.y,') then analysis goes to the end of the file.\n\tMultiple ranges can be separated by spaces, which requires the argument\n\tto be quoted e.g. --time \"1234.567,1234.789 1235,\"\n\tTime string is'a1.b1,c1.d1:a2.b2,c2.d2'. Use ':' to separate timestamps\n\tfor different perf.data files.\n\n\tFor example, we get the timestamp information from 'perf script'.\n\n\t  perf script -i perf.data.old\n\t    mgen 13940 [000]  3946.361400: ...\n\n\t  perf script -i perf.data\n\t    mgen 13940 [000]  3971.150589 ...\n\n\t  perf diff --time 3946.361400,:3971.150589,\n\n\tIt analyzes the perf.data.old from the timestamp 3946.361400 to\n\tthe end of perf.data.old and analyzes the perf.data from the\n\ttimestamp 3971.150589 to the end of perf.data.\n\n--cpu:: Only diff samples for the list of CPUs provided. Multiple CPUs can\n\tbe provided as a comma-separated list with no space: 0,1. Ranges of\n\tCPUs are specified with -: 0-2. Default is to report samples on all\n\tCPUs.\n\n--pid=::\n\tOnly diff samples for given process ID (comma separated list).\n\n--tid=::\n\tOnly diff samples for given thread ID (comma separated list).\n\n--stream::\n\tEnable hot streams comparison. Stream can be a callchain which is\n\taggregated by the branch records from samples.\n\nCOMPARISON\n----------\nThe comparison is governed by the baseline file. The baseline perf.data\nfile is iterated for samples. All other perf.data files specified on\nthe command line are searched for the baseline sample pair. If the pair\nis found, specified computation is made and result is displayed.\n\nAll samples from non-baseline perf.data files, that do not match any\nbaseline entry, are displayed with empty space within baseline column\nand possible computation results (delta) in their related column.\n\nExample files samples:\n- file A with samples f1, f2, f3, f4,    f6\n- file B with samples     f2,     f4, f5\n- file C with samples f1, f2,         f5\n\nExample output:\n  x - computation takes place for pair\n  b - baseline sample percentage\n\n- perf diff A B C\n\n  baseline/A compute/B compute/C  samples\n  ---------------------------------------\n  b                    x          f1\n  b          x         x          f2\n  b                               f3\n  b          x                    f4\n  b                               f6\n             x         x          f5\n\n- perf diff B A C\n\n  baseline/B compute/A compute/C  samples\n  ---------------------------------------\n  b          x         x          f2\n  b          x                    f4\n  b                    x          f5\n             x         x          f1\n             x                    f3\n             x                    f6\n\n- perf diff C B A\n\n  baseline/C compute/B compute/A  samples\n  ---------------------------------------\n  b                    x          f1\n  b          x         x          f2\n  b          x                    f5\n                       x          f3\n             x         x          f4\n                       x          f6\n\nCOMPARISON METHODS\n------------------\ndelta\n~~~~~\nIf specified the 'Delta' column is displayed with value 'd' computed as:\n\n  d = A->period_percent - B->period_percent\n\nwith:\n  - A/B being matching hist entry from data/baseline file specified\n    (or perf.data/perf.data.old) respectively.\n\n  - period_percent being the % of the hist entry period value within\n    single data file\n\n  - with filtering by -C, -d and/or -S, period_percent might be changed\n    relative to how entries are filtered.  Use --percentage=absolute to\n    prevent such fluctuation.\n\ndelta-abs\n~~~~~~~~~\nSame as 'delta` method, but sort the result with the absolute values.\n\nratio\n~~~~~\nIf specified the 'Ratio' column is displayed with value 'r' computed as:\n\n  r = A->period / B->period\n\nwith:\n  - A/B being matching hist entry from data/baseline file specified\n    (or perf.data/perf.data.old) respectively.\n\n  - period being the hist entry period value\n\nwdiff:WEIGHT-B,WEIGHT-A\n~~~~~~~~~~~~~~~~~~~~~~~\nIf specified the 'Weighted diff' column is displayed with value 'd' computed as:\n\n   d = B->period * WEIGHT-A - A->period * WEIGHT-B\n\n  - A/B being matching hist entry from data/baseline file specified\n    (or perf.data/perf.data.old) respectively.\n\n  - period being the hist entry period value\n\n  - WEIGHT-A/WEIGHT-B being user supplied weights in the the '-c' option\n    behind ':' separator like '-c wdiff:1,2'.\n    - WEIGHT-A being the weight of the data file\n    - WEIGHT-B being the weight of the baseline data file\n\ncycles\n~~~~~~\nIf specified the '[Program Block Range] Cycles Diff' column is displayed.\nIt displays the cycles difference of same program basic block amongst\ntwo perf.data. The program basic block is the code between two branches.\n\n'[Program Block Range]' indicates the range of a program basic block.\nSource line is reported if it can be found otherwise uses symbol+offset\ninstead.\n\nSEE ALSO\n--------\nlinkperf:perf-record[1], linkperf:perf-report[1]\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}