{
  "module_name": "perf-lock.txt",
  "hash_id": "bcba97adc4542b277900e941142d170523386da49f07b50b6a342e6fc440ef9e",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/Documentation/perf-lock.txt",
  "human_readable_source": "perf-lock(1)\n============\n\nNAME\n----\nperf-lock - Analyze lock events\n\nSYNOPSIS\n--------\n[verse]\n'perf lock' {record|report|script|info|contention}\n\nDESCRIPTION\n-----------\nYou can analyze various lock behaviours\nand statistics with this 'perf lock' command.\n\n  'perf lock record <command>' records lock events\n  between start and end <command>. And this command\n  produces the file \"perf.data\" which contains tracing\n  results of lock events.\n\n  'perf lock report' reports statistical data.\n\n  'perf lock script' shows raw lock events.\n\n  'perf lock info' shows metadata like threads or addresses\n  of lock instances.\n\n  'perf lock contention' shows contention statistics.\n\nCOMMON OPTIONS\n--------------\n\n-i::\n--input=<file>::\n        Input file name. (default: perf.data unless stdin is a fifo)\n\n--output=<file>::\n        Output file name for perf lock contention and report.\n\n-v::\n--verbose::\n        Be more verbose (show symbol address, etc).\n\n-q::\n--quiet::\n\tDo not show any warnings or messages. (Suppress -v)\n\n-D::\n--dump-raw-trace::\n        Dump raw trace in ASCII.\n\n-f::\n--force::\n\tDon't complain, do it.\n\n--vmlinux=<file>::\n        vmlinux pathname\n\n--kallsyms=<file>::\n        kallsyms pathname\n\n\nREPORT OPTIONS\n--------------\n\n-k::\n--key=<value>::\n        Sorting key. Possible values: acquired (default), contended,\n\tavg_wait, wait_total, wait_max, wait_min.\n\n-F::\n--field=<value>::\n        Output fields. By default it shows all the fields but users can\n\tcustomize that using this.  Possible values: acquired, contended,\n\tavg_wait, wait_total, wait_max, wait_min.\n\n-c::\n--combine-locks::\n\tMerge lock instances in the same class (based on name).\n\n-t::\n--threads::\n    The -t option is to show per-thread lock stat like below:\n\n      $ perf lock report -t -F acquired,contended,avg_wait\n\n                    Name   acquired  contended   avg wait (ns)\n\n                    perf     240569          9            5784\n                 swapper     106610         19             543\n                  :15789      17370          2           14538\n            ContainerMgr       8981          6             874\n                   sleep       5275          1           11281\n         ContainerThread       4416          4             944\n         RootPressureThr       3215          5            1215\n             rcu_preempt       2954          0               0\n            ContainerMgr       2560          0               0\n                 unnamed       1873          0               0\n         EventManager_De       1845          1             636\n         futex-default-S       1609          0               0\n\n-E::\n--entries=<value>::\n\tDisplay this many entries.\n\n\nINFO OPTIONS\n------------\n\n-t::\n--threads::\n\tdump thread list in perf.data\n\n-m::\n--map::\n\tdump map of lock instances (address:name table)\n\n\nCONTENTION OPTIONS\n--------------\n\n-k::\n--key=<value>::\n\tSorting key. Possible values: contended, wait_total (default),\n\twait_max, wait_min, avg_wait.\n\n-F::\n--field=<value>::\n\tOutput fields. By default it shows all but the wait_min fields\n\tand users can customize that using this.  Possible values:\n\tcontended, wait_total, wait_max, wait_min, avg_wait.\n\n-t::\n--threads::\n\tShow per-thread lock contention stat\n\n-b::\n--use-bpf::\n\tUse BPF program to collect lock contention stats instead of\n\tusing the input data.\n\n-a::\n--all-cpus::\n        System-wide collection from all CPUs.\n\n-C::\n--cpu=<value>::\n\tCollect samples only on the list of CPUs provided. Multiple CPUs can be\n\tprovided as a comma-separated list with no space: 0,1. Ranges of CPUs\n\tare specified with -: 0-2.  Default is to monitor all CPUs.\n\n-p::\n--pid=<value>::\n\tRecord events on existing process ID (comma separated list).\n\n--tid=<value>::\n        Record events on existing thread ID (comma separated list).\n\n-M::\n--map-nr-entries=<value>::\n\tMaximum number of BPF map entries (default: 16384).\n\tThis will be aligned to a power of 2.\n\n--max-stack=<value>::\n\tMaximum stack depth when collecting lock contention (default: 8).\n\n--stack-skip=<value>::\n\tNumber of stack depth to skip when finding a lock caller (default: 3).\n\n-E::\n--entries=<value>::\n\tDisplay this many entries.\n\n-l::\n--lock-addr::\n\tShow lock contention stat by address\n\n-o::\n--lock-owner::\n\tShow lock contention stat by owners.  Implies --threads and\n\trequires --use-bpf.\n\n-Y::\n--type-filter=<value>::\n\tShow lock contention only for given lock types (comma separated list).\n\tAvailable values are:\n\t  semaphore, spinlock, rwlock, rwlock:R, rwlock:W, rwsem, rwsem:R, rwsem:W,\n\t  rtmutex, rwlock-rt, rwlock-rt:R, rwlock-rt:W, pcpu-sem, pcpu-sem:R, pcpu-sem:W,\n\t  mutex\n\n\tNote that RW-variant of locks have :R and :W suffix.  Names without the\n\tsuffix are shortcuts for the both variants.  Ex) rwsem = rwsem:R + rwsem:W.\n\n-L::\n--lock-filter=<value>::\n\tShow lock contention only for given lock addresses or names (comma separated list).\n\n-S::\n--callstack-filter=<value>::\n\tShow lock contention only if the callstack contains the given string.\n\tNote that it matches the substring so 'rq' would match both 'raw_spin_rq_lock'\n\tand 'irq_enter_rcu'.\n\n-x::\n--field-separator=<SEP>::\n\tShow results using a CSV-style output to make it easy to import directly\n\tinto spreadsheets. Columns are separated by the string specified in SEP.\n\n\nSEE ALSO\n--------\nlinkperf:perf[1]\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}