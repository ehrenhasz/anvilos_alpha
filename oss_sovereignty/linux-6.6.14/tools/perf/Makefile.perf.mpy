{
  "module_name": "Makefile.perf",
  "hash_id": "5e7629ae29d12a286438839bb69212033dbd73cc77e7b08cf92f34b1cc57d8b2",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/Makefile.perf",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0-only\ninclude ../scripts/Makefile.include\ninclude ../scripts/Makefile.arch\n\n# The default target of this Makefile is...\nall:\n\ninclude ../scripts/utilities.mak\n\n# Define V to have a more verbose compile.\n#\n# Define VF to have a more verbose feature check output.\n#\n# Define O to save output files in a separate directory.\n#\n# Define ARCH as name of target architecture if you want cross-builds.\n#\n# Define CROSS_COMPILE as prefix name of compiler if you want cross-builds.\n#\n# Define NO_LIBPERL to disable perl script extension.\n#\n# Define NO_LIBPYTHON to disable python script extension.\n#\n# Define PYTHON to point to the python binary if the default\n# `python' is not correct; for example: PYTHON=python2\n#\n# Define PYTHON_CONFIG to point to the python-config binary if\n# the default `$(PYTHON)-config' is not correct.\n#\n# Define ASCIIDOC8 if you want to format documentation with AsciiDoc 8\n#\n# Define DOCBOOK_XSL_172 if you want to format man pages with DocBook XSL v1.72.\n#\n# Define LDFLAGS=-static to build a static binary.\n#\n# Define EXTRA_CFLAGS=-m64 or EXTRA_CFLAGS=-m32 as appropriate for cross-builds.\n#\n# Define EXCLUDE_EXTLIBS=-lmylib to exclude libmylib from the auto-generated\n# EXTLIBS.\n#\n# Define EXTRA_PERFLIBS to pass extra libraries to PERFLIBS.\n#\n# Define NO_DWARF if you do not want debug-info analysis feature at all.\n#\n# Define WERROR=0 to disable treating any warnings as errors.\n#\n# Define NO_SLANG if you do not want TUI support.\n#\n# Define GTK2 if you want GTK+ GUI support.\n#\n# Define NO_DEMANGLE if you do not want C++ symbol demangling.\n#\n# Define NO_LIBELF if you do not want libelf dependency (e.g. cross-builds)\n#\n# Define NO_LIBUNWIND if you do not want libunwind dependency for dwarf\n# backtrace post unwind.\n#\n# Define NO_BACKTRACE if you do not want stack backtrace debug feature\n#\n# Define NO_LIBNUMA if you do not want numa perf benchmark\n#\n# Define NO_LIBAUDIT if you do not want libaudit support\n#\n# Define NO_LIBBIONIC if you do not want bionic support\n#\n# Define NO_LIBCRYPTO if you do not want libcrypto (openssl) support\n# used for generating build-ids for ELFs generated by jitdump.\n#\n# Define NO_LIBDW_DWARF_UNWIND if you do not want libdw support\n# for dwarf backtrace post unwind.\n#\n# Define NO_LIBTRACEEVENT=1 if you don't want libtraceevent to be linked,\n# this will remove multiple features and tools, such as 'perf trace',\n# that need it to read tracefs event format files, etc.\n#\n# Define NO_PERF_READ_VDSO32 if you do not want to build perf-read-vdso32\n# for reading the 32-bit compatibility VDSO in 64-bit mode\n#\n# Define NO_PERF_READ_VDSOX32 if you do not want to build perf-read-vdsox32\n# for reading the x32 mode 32-bit compatibility VDSO in 64-bit mode\n#\n# Define NO_ZLIB if you do not want to support compressed kernel modules\n#\n# Define NO_LIBBABELTRACE if you do not want libbabeltrace support\n# for CTF data format.\n#\n# Define NO_LZMA if you do not want to support compressed (xz) kernel modules\n#\n# Define NO_AUXTRACE if you do not want AUX area tracing support\n#\n# Define NO_LIBBPF if you do not want BPF support\n#\n# Define NO_LIBCAP if you do not want process capabilities considered by perf\n#\n# Define NO_SDT if you do not want to define SDT event in perf tools,\n# note that it doesn't disable SDT scanning support.\n#\n# Define FEATURES_DUMP to provide features detection dump file\n# and bypass the feature detection\n#\n# Define NO_JVMTI if you do not want jvmti agent built\n#\n# Define NO_JVMTI_CMLR (debug only) if you do not want to process CMLR\n# data for java source lines.\n#\n# Define CORESIGHT if you DO WANT support for CoreSight trace decoding.\n#\n# Define NO_AIO if you do not want support of Posix AIO based trace\n# streaming for record mode. Currently Posix AIO trace streaming is\n# supported only when linking with glibc.\n#\n# Define NO_LIBZSTD if you do not want support of Zstandard based runtime\n# trace compression in record mode.\n#\n# Define TCMALLOC to enable tcmalloc heap profiling.\n#\n# Define LIBBPF_DYNAMIC to enable libbpf dynamic linking.\n#\n# Define NO_SYSCALL_TABLE=1 to disable the use of syscall id to/from name tables\n# generated from the kernel .tbl or unistd.h files and use, if available, libaudit\n# for doing the conversions to/from strings/id.\n#\n# Define NO_LIBPFM4 to disable libpfm4 events extension.\n#\n# Define NO_LIBDEBUGINFOD if you do not want support debuginfod\n#\n# Define BUILD_BPF_SKEL to enable BPF skeletons\n#\n# Define BUILD_NONDISTRO to enable building an linking against libbfd and\n# libiberty distribution license incompatible libraries.\n#\n# Define EXTRA_TESTS to enable building extra tests useful mainly to perf\n# developers, such as:\n#\tx86 instruction decoder - new instructions test\n#\n# Define GEN_VMLINUX_H to generate vmlinux.h from the BTF.\n\n# As per kernel Makefile, avoid funny character set dependencies\nunexport LC_ALL\nLC_COLLATE=C\nLC_NUMERIC=C\nexport LC_COLLATE LC_NUMERIC\n\nifeq ($(srctree),)\nsrctree := $(patsubst %/,%,$(dir $(CURDIR)))\nsrctree := $(patsubst %/,%,$(dir $(srctree)))\n#$(info Determined 'srctree' to be $(srctree))\nendif\n\nifneq ($(objtree),)\n#$(info Determined 'objtree' to be $(objtree))\nendif\n\nifneq ($(OUTPUT),)\n#$(info Determined 'OUTPUT' to be $(OUTPUT))\n# Adding $(OUTPUT) as a directory to look for source files,\n# because use generated output files as sources dependency\n# for flex/bison parsers.\nVPATH += $(OUTPUT)\nexport VPATH\nendif\n\nifeq ($(V),1)\n  Q =\nelse\n  Q = @\nendif\n\n# Do not use make's built-in rules\n# (this improves performance and avoids hard-to-debug behaviour);\nMAKEFLAGS += -r\n\n# Makefiles suck: This macro sets a default value of $(2) for the\n# variable named by $(1), unless the variable has been set by\n# environment or command line. This is necessary for CC and AR\n# because make sets default values, so the simpler ?= approach\n# won't work as expected.\ndefine allow-override\n  $(if $(or $(findstring environment,$(origin $(1))),\\\n            $(findstring command line,$(origin $(1)))),,\\\n    $(eval $(1) = $(2)))\nendef\n\nLD += $(EXTRA_LDFLAGS)\n\nHOSTCC  ?= gcc\nHOSTLD  ?= ld\nHOSTAR  ?= ar\nCLANG   ?= clang\n\nPKG_CONFIG = $(CROSS_COMPILE)pkg-config\n\nRM      = rm -f\nLN      = ln -f\nMKDIR   = mkdir\nFIND    = find\nINSTALL = install\nFLEX    ?= flex\nBISON   ?= bison\nSTRIP   = strip\nAWK     = awk\nREADELF ?= readelf\n\n# include Makefile.config by default and rule out\n# non-config cases\nconfig := 1\n\nNON_CONFIG_TARGETS := clean python-clean TAGS tags cscope help\n\nifdef MAKECMDGOALS\nifeq ($(filter-out $(NON_CONFIG_TARGETS),$(MAKECMDGOALS)),)\n  config := 0\nendif\nendif\n\n# The fixdep build - we force fixdep tool to be built as\n# the first target in the separate make session not to be\n# disturbed by any parallel make jobs. Once fixdep is done\n# we issue the requested build with FIXDEP=1 variable.\n#\n# The fixdep build is disabled for $(NON_CONFIG_TARGETS)\n# targets, because it's not necessary.\n\nifdef FIXDEP\n  force_fixdep := 0\nelse\n  force_fixdep := $(config)\nendif\n\nexport srctree OUTPUT RM CC CXX LD AR CFLAGS CXXFLAGS V BISON FLEX AWK\nexport HOSTCC HOSTLD HOSTAR HOSTCFLAGS\n\ninclude $(srctree)/tools/build/Makefile.include\n\nifeq ($(force_fixdep),1)\ngoals := $(filter-out all sub-make, $(MAKECMDGOALS))\n\n$(goals) all: sub-make\n\nsub-make: fixdep\n\t@./check-headers.sh\n\t$(Q)$(MAKE) FIXDEP=1 -f Makefile.perf $(goals)\n\nelse # force_fixdep\n\nLIBAPI_DIR      = $(srctree)/tools/lib/api/\nLIBBPF_DIR      = $(srctree)/tools/lib/bpf/\nLIBSUBCMD_DIR   = $(srctree)/tools/lib/subcmd/\nLIBSYMBOL_DIR   = $(srctree)/tools/lib/symbol/\nLIBPERF_DIR     = $(srctree)/tools/lib/perf/\nDOC_DIR         = $(srctree)/tools/perf/Documentation/\n\n# Set FEATURE_TESTS to 'all' so all possible feature checkers are executed.\n# Without this setting the output feature dump file misses some features, for\n# example, liberty. Select all checkers so we won't get an incomplete feature\n# dump file.\nifeq ($(config),1)\nifdef MAKECMDGOALS\nifeq ($(filter feature-dump,$(MAKECMDGOALS)),feature-dump)\nFEATURE_TESTS := all\nendif\nendif\ninclude Makefile.config\nendif\n\nifeq ($(config),0)\ninclude $(srctree)/tools/scripts/Makefile.arch\n-include arch/$(SRCARCH)/Makefile\nendif\n\n# The FEATURE_DUMP_EXPORT holds location of the actual\n# FEATURE_DUMP file to be used to bypass feature detection\n# (for bpf or any other subproject)\nifeq ($(FEATURES_DUMP),)\nFEATURE_DUMP_EXPORT := $(realpath $(OUTPUT)FEATURE-DUMP)\nelse\nFEATURE_DUMP_EXPORT := $(realpath $(FEATURES_DUMP))\nendif\n\nexport prefix bindir sharedir sysconfdir DESTDIR\n\n# sparse is architecture-neutral, which means that we need to tell it\n# explicitly what architecture to check for. Fix this up for yours..\nSPARSE_FLAGS = -D__BIG_ENDIAN__ -D__powerpc__\n\n# Guard against environment variables\nPYRF_OBJS =\nSCRIPT_SH =\n\nSCRIPT_SH += perf-archive.sh\nSCRIPT_SH += perf-iostat.sh\n\ngrep-libs = $(filter -l%,$(1))\nstrip-libs = $(filter-out -l%,$(1))\n\nifneq ($(OUTPUT),)\n  LIBAPI_OUTPUT = $(abspath $(OUTPUT))/libapi\nelse\n  LIBAPI_OUTPUT = $(CURDIR)/libapi\nendif\nLIBAPI_DESTDIR = $(LIBAPI_OUTPUT)\nLIBAPI_INCLUDE = $(LIBAPI_DESTDIR)/include\nLIBAPI = $(LIBAPI_OUTPUT)/libapi.a\nexport LIBAPI\nCFLAGS += -I$(LIBAPI_OUTPUT)/include\n\nifneq ($(OUTPUT),)\n  LIBBPF_OUTPUT = $(abspath $(OUTPUT))/libbpf\nelse\n  LIBBPF_OUTPUT = $(CURDIR)/libbpf\nendif\nifdef LIBBPF_STATIC\n  LIBBPF_DESTDIR = $(LIBBPF_OUTPUT)\n  LIBBPF_INCLUDE = $(LIBBPF_DESTDIR)/include\n  LIBBPF = $(LIBBPF_OUTPUT)/libbpf.a\n  CFLAGS += -I$(LIBBPF_OUTPUT)/include\nendif\n\nifneq ($(OUTPUT),)\n  LIBSUBCMD_OUTPUT = $(abspath $(OUTPUT))/libsubcmd\nelse\n  LIBSUBCMD_OUTPUT = $(CURDIR)/libsubcmd\nendif\nLIBSUBCMD_DESTDIR = $(LIBSUBCMD_OUTPUT)\nLIBSUBCMD_INCLUDE = $(LIBSUBCMD_DESTDIR)/include\nLIBSUBCMD = $(LIBSUBCMD_OUTPUT)/libsubcmd.a\nCFLAGS += -I$(LIBSUBCMD_OUTPUT)/include\n\nifneq ($(OUTPUT),)\n  LIBSYMBOL_OUTPUT = $(abspath $(OUTPUT))/libsymbol\nelse\n  LIBSYMBOL_OUTPUT = $(CURDIR)/libsymbol\nendif\nLIBSYMBOL_DESTDIR = $(LIBSYMBOL_OUTPUT)\nLIBSYMBOL_INCLUDE = $(LIBSYMBOL_DESTDIR)/include\nLIBSYMBOL = $(LIBSYMBOL_OUTPUT)/libsymbol.a\nCFLAGS += -I$(LIBSYMBOL_OUTPUT)/include\n\nifneq ($(OUTPUT),)\n  LIBPERF_OUTPUT = $(abspath $(OUTPUT))/libperf\nelse\n  LIBPERF_OUTPUT = $(CURDIR)/libperf\nendif\nLIBPERF_DESTDIR = $(LIBPERF_OUTPUT)\nLIBPERF_INCLUDE = $(LIBPERF_DESTDIR)/include\nLIBPERF = $(LIBPERF_OUTPUT)/libperf.a\nexport LIBPERF\nCFLAGS += -I$(LIBPERF_OUTPUT)/include\n\n# python extension build directories\nPYTHON_EXTBUILD     := $(OUTPUT)python_ext_build/\nPYTHON_EXTBUILD_LIB := $(PYTHON_EXTBUILD)lib/\nPYTHON_EXTBUILD_TMP := $(PYTHON_EXTBUILD)tmp/\nexport PYTHON_EXTBUILD_LIB PYTHON_EXTBUILD_TMP\n\npython-clean := $(call QUIET_CLEAN, python) $(RM) -r $(PYTHON_EXTBUILD) $(OUTPUT)python/perf*.so\n\nifeq ($(CONFIG_LIBTRACEEVENT),y)\n  PYTHON_EXT_SRCS := $(shell grep -v ^\\# util/python-ext-sources)\nelse\n  PYTHON_EXT_SRCS := $(shell grep -v '^\\#\\|util/trace-event.c' util/python-ext-sources)\nendif\n\nPYTHON_EXT_DEPS := util/python-ext-sources util/setup.py $(LIBAPI)\n\nSCRIPTS = $(patsubst %.sh,%,$(SCRIPT_SH))\n\nPROGRAMS += $(OUTPUT)perf\n\nifndef NO_PERF_READ_VDSO32\nPROGRAMS += $(OUTPUT)perf-read-vdso32\nendif\n\nifndef NO_PERF_READ_VDSOX32\nPROGRAMS += $(OUTPUT)perf-read-vdsox32\nendif\n\nLIBJVMTI = libperf-jvmti.so\n\nifndef NO_JVMTI\nPROGRAMS += $(OUTPUT)$(LIBJVMTI)\nendif\n\nDLFILTERS := dlfilter-test-api-v0.so dlfilter-test-api-v2.so dlfilter-show-cycles.so\nDLFILTERS := $(patsubst %,$(OUTPUT)dlfilters/%,$(DLFILTERS))\n\n# what 'all' will build and 'install' will install, in perfexecdir\nALL_PROGRAMS = $(PROGRAMS) $(SCRIPTS) $(DLFILTERS)\n\n# what 'all' will build but not install in perfexecdir\nOTHER_PROGRAMS = $(OUTPUT)perf\n\n# Set paths to tools early so that they can be used for version tests.\nifndef SHELL_PATH\n  SHELL_PATH = /bin/sh\nendif\nifndef PERL_PATH\n  PERL_PATH = /usr/bin/perl\nendif\n\nexport PERL_PATH\n\nPERFLIBS = $(LIBAPI) $(LIBPERF) $(LIBSUBCMD) $(LIBSYMBOL)\nifdef LIBBPF_STATIC\n  PERFLIBS += $(LIBBPF)\nendif\n\n# We choose to avoid \"if .. else if .. else .. endif endif\"\n# because maintaining the nesting to match is a pain.  If\n# we had \"elif\" things would have been much nicer...\n\nifneq ($(OUTPUT),)\n  CFLAGS += -I$(OUTPUT)\nendif\n\nifdef GTK2\n  ALL_PROGRAMS += $(OUTPUT)libperf-gtk.so\n  GTK_IN := $(OUTPUT)gtk-in.o\nendif\n\nifdef ASCIIDOC8\n  export ASCIIDOC8\nendif\n\nEXTLIBS := $(call filter-out,$(EXCLUDE_EXTLIBS),$(EXTLIBS))\nLIBS = -Wl,--whole-archive $(PERFLIBS) $(EXTRA_PERFLIBS) -Wl,--no-whole-archive -Wl,--start-group $(EXTLIBS) -Wl,--end-group\n\nexport INSTALL SHELL_PATH\n\n### Build rules\n\nSHELL = $(SHELL_PATH)\n\nbeauty_linux_dir := $(srctree)/tools/perf/trace/beauty/include/linux/\nlinux_uapi_dir := $(srctree)/tools/include/uapi/linux\nasm_generic_uapi_dir := $(srctree)/tools/include/uapi/asm-generic\narch_asm_uapi_dir := $(srctree)/tools/arch/$(SRCARCH)/include/uapi/asm/\nx86_arch_asm_uapi_dir := $(srctree)/tools/arch/x86/include/uapi/asm/\nx86_arch_asm_dir := $(srctree)/tools/arch/x86/include/asm/\n\nbeauty_outdir := $(OUTPUT)trace/beauty/generated\nbeauty_ioctl_outdir := $(beauty_outdir)/ioctl\ndrm_ioctl_array := $(beauty_ioctl_outdir)/drm_ioctl_array.c\ndrm_hdr_dir := $(srctree)/tools/include/uapi/drm\ndrm_ioctl_tbl := $(srctree)/tools/perf/trace/beauty/drm_ioctl.sh\n\n# Create output directory if not already present\n_dummy := $(shell [ -d '$(beauty_ioctl_outdir)' ] || mkdir -p '$(beauty_ioctl_outdir)')\n\n$(drm_ioctl_array): $(drm_hdr_dir)/drm.h $(drm_hdr_dir)/i915_drm.h $(drm_ioctl_tbl)\n\t$(Q)$(SHELL) '$(drm_ioctl_tbl)' $(drm_hdr_dir) > $@\n\nfadvise_advice_array := $(beauty_outdir)/fadvise_advice_array.c\nfadvise_advice_tbl := $(srctree)/tools/perf/trace/beauty/fadvise.sh\n\n$(fadvise_advice_array): $(linux_uapi_dir)/in.h $(fadvise_advice_tbl)\n\t$(Q)$(SHELL) '$(fadvise_advice_tbl)' $(linux_uapi_dir) > $@\n\nfsmount_arrays := $(beauty_outdir)/fsmount_arrays.c\nfsmount_tbls := $(srctree)/tools/perf/trace/beauty/fsmount.sh\n\n$(fsmount_arrays): $(linux_uapi_dir)/fs.h $(fsmount_tbls)\n\t$(Q)$(SHELL) '$(fsmount_tbls)' $(linux_uapi_dir) > $@\n\nfspick_arrays := $(beauty_outdir)/fspick_arrays.c\nfspick_tbls := $(srctree)/tools/perf/trace/beauty/fspick.sh\n\n$(fspick_arrays): $(linux_uapi_dir)/fs.h $(fspick_tbls)\n\t$(Q)$(SHELL) '$(fspick_tbls)' $(linux_uapi_dir) > $@\n\nfsconfig_arrays := $(beauty_outdir)/fsconfig_arrays.c\nfsconfig_tbls := $(srctree)/tools/perf/trace/beauty/fsconfig.sh\n\n$(fsconfig_arrays): $(linux_uapi_dir)/fs.h $(fsconfig_tbls)\n\t$(Q)$(SHELL) '$(fsconfig_tbls)' $(linux_uapi_dir) > $@\n\npkey_alloc_access_rights_array := $(beauty_outdir)/pkey_alloc_access_rights_array.c\nasm_generic_hdr_dir := $(srctree)/tools/include/uapi/asm-generic/\npkey_alloc_access_rights_tbl := $(srctree)/tools/perf/trace/beauty/pkey_alloc_access_rights.sh\n\n$(pkey_alloc_access_rights_array): $(asm_generic_hdr_dir)/mman-common.h $(pkey_alloc_access_rights_tbl)\n\t$(Q)$(SHELL) '$(pkey_alloc_access_rights_tbl)' $(asm_generic_hdr_dir) > $@\n\nsndrv_ctl_ioctl_array := $(beauty_ioctl_outdir)/sndrv_ctl_ioctl_array.c\nsndrv_ctl_hdr_dir := $(srctree)/tools/include/uapi/sound\nsndrv_ctl_ioctl_tbl := $(srctree)/tools/perf/trace/beauty/sndrv_ctl_ioctl.sh\n\n$(sndrv_ctl_ioctl_array): $(sndrv_ctl_hdr_dir)/asound.h $(sndrv_ctl_ioctl_tbl)\n\t$(Q)$(SHELL) '$(sndrv_ctl_ioctl_tbl)' $(sndrv_ctl_hdr_dir) > $@\n\nsndrv_pcm_ioctl_array := $(beauty_ioctl_outdir)/sndrv_pcm_ioctl_array.c\nsndrv_pcm_hdr_dir := $(srctree)/tools/include/uapi/sound\nsndrv_pcm_ioctl_tbl := $(srctree)/tools/perf/trace/beauty/sndrv_pcm_ioctl.sh\n\n$(sndrv_pcm_ioctl_array): $(sndrv_pcm_hdr_dir)/asound.h $(sndrv_pcm_ioctl_tbl)\n\t$(Q)$(SHELL) '$(sndrv_pcm_ioctl_tbl)' $(sndrv_pcm_hdr_dir) > $@\n\nkcmp_type_array := $(beauty_outdir)/kcmp_type_array.c\nkcmp_hdr_dir := $(srctree)/tools/include/uapi/linux/\nkcmp_type_tbl := $(srctree)/tools/perf/trace/beauty/kcmp_type.sh\n\n$(kcmp_type_array): $(kcmp_hdr_dir)/kcmp.h $(kcmp_type_tbl)\n\t$(Q)$(SHELL) '$(kcmp_type_tbl)' $(kcmp_hdr_dir) > $@\n\nkvm_ioctl_array := $(beauty_ioctl_outdir)/kvm_ioctl_array.c\nkvm_hdr_dir := $(srctree)/tools/include/uapi/linux\nkvm_ioctl_tbl := $(srctree)/tools/perf/trace/beauty/kvm_ioctl.sh\n\n$(kvm_ioctl_array): $(kvm_hdr_dir)/kvm.h $(kvm_ioctl_tbl)\n\t$(Q)$(SHELL) '$(kvm_ioctl_tbl)' $(kvm_hdr_dir) > $@\n\nsocket_arrays := $(beauty_outdir)/socket.c\nsocket_tbl := $(srctree)/tools/perf/trace/beauty/socket.sh\n\n$(socket_arrays): $(linux_uapi_dir)/in.h $(beauty_linux_dir)/socket.h $(socket_tbl)\n\t$(Q)$(SHELL) '$(socket_tbl)' $(linux_uapi_dir) $(beauty_linux_dir) > $@\n\nsockaddr_arrays := $(beauty_outdir)/sockaddr.c\nsockaddr_tbl := $(srctree)/tools/perf/trace/beauty/sockaddr.sh\n\n$(sockaddr_arrays): $(beauty_linux_dir)/socket.h $(sockaddr_tbl)\n\t$(Q)$(SHELL) '$(sockaddr_tbl)' $(beauty_linux_dir) > $@\n\nvhost_virtio_ioctl_array := $(beauty_ioctl_outdir)/vhost_virtio_ioctl_array.c\nvhost_virtio_hdr_dir := $(srctree)/tools/include/uapi/linux\nvhost_virtio_ioctl_tbl := $(srctree)/tools/perf/trace/beauty/vhost_virtio_ioctl.sh\n\n$(vhost_virtio_ioctl_array): $(vhost_virtio_hdr_dir)/vhost.h $(vhost_virtio_ioctl_tbl)\n\t$(Q)$(SHELL) '$(vhost_virtio_ioctl_tbl)' $(vhost_virtio_hdr_dir) > $@\n\nperf_ioctl_array := $(beauty_ioctl_outdir)/perf_ioctl_array.c\nperf_hdr_dir := $(srctree)/tools/include/uapi/linux\nperf_ioctl_tbl := $(srctree)/tools/perf/trace/beauty/perf_ioctl.sh\n\n$(perf_ioctl_array): $(perf_hdr_dir)/perf_event.h $(perf_ioctl_tbl)\n\t$(Q)$(SHELL) '$(perf_ioctl_tbl)' $(perf_hdr_dir) > $@\n\nmadvise_behavior_array := $(beauty_outdir)/madvise_behavior_array.c\nmadvise_hdr_dir := $(srctree)/tools/include/uapi/asm-generic/\nmadvise_behavior_tbl := $(srctree)/tools/perf/trace/beauty/madvise_behavior.sh\n\n$(madvise_behavior_array): $(madvise_hdr_dir)/mman-common.h $(madvise_behavior_tbl)\n\t$(Q)$(SHELL) '$(madvise_behavior_tbl)' $(madvise_hdr_dir) > $@\n\nmmap_flags_array := $(beauty_outdir)/mmap_flags_array.c\nmmap_flags_tbl := $(srctree)/tools/perf/trace/beauty/mmap_flags.sh\n\n$(mmap_flags_array): $(linux_uapi_dir)/mman.h $(asm_generic_uapi_dir)/mman.h $(asm_generic_uapi_dir)/mman-common.h $(mmap_flags_tbl)\n\t$(Q)$(SHELL) '$(mmap_flags_tbl)' $(linux_uapi_dir) $(asm_generic_uapi_dir) $(arch_asm_uapi_dir) > $@\n\nmremap_flags_array := $(beauty_outdir)/mremap_flags_array.c\nmremap_flags_tbl := $(srctree)/tools/perf/trace/beauty/mremap_flags.sh\n\n$(mremap_flags_array): $(linux_uapi_dir)/mman.h $(mremap_flags_tbl)\n\t$(Q)$(SHELL) '$(mremap_flags_tbl)' $(linux_uapi_dir) > $@\n\nmount_flags_array := $(beauty_outdir)/mount_flags_array.c\nmount_flags_tbl := $(srctree)/tools/perf/trace/beauty/mount_flags.sh\n\n$(mount_flags_array): $(linux_uapi_dir)/fs.h $(mount_flags_tbl)\n\t$(Q)$(SHELL) '$(mount_flags_tbl)' $(linux_uapi_dir) > $@\n\nmove_mount_flags_array := $(beauty_outdir)/move_mount_flags_array.c\nmove_mount_flags_tbl := $(srctree)/tools/perf/trace/beauty/move_mount_flags.sh\n\n$(move_mount_flags_array): $(linux_uapi_dir)/fs.h $(move_mount_flags_tbl)\n\t$(Q)$(SHELL) '$(move_mount_flags_tbl)' $(linux_uapi_dir) > $@\n\n\nmmap_prot_array := $(beauty_outdir)/mmap_prot_array.c\nmmap_prot_tbl := $(srctree)/tools/perf/trace/beauty/mmap_prot.sh\n\n$(mmap_prot_array): $(asm_generic_uapi_dir)/mman.h $(asm_generic_uapi_dir)/mman-common.h $(mmap_prot_tbl)\n\t$(Q)$(SHELL) '$(mmap_prot_tbl)' $(asm_generic_uapi_dir) $(arch_asm_uapi_dir) > $@\n\nprctl_option_array := $(beauty_outdir)/prctl_option_array.c\nprctl_hdr_dir := $(srctree)/tools/include/uapi/linux/\nprctl_option_tbl := $(srctree)/tools/perf/trace/beauty/prctl_option.sh\n\n$(prctl_option_array): $(prctl_hdr_dir)/prctl.h $(prctl_option_tbl)\n\t$(Q)$(SHELL) '$(prctl_option_tbl)' $(prctl_hdr_dir) > $@\n\nusbdevfs_ioctl_array := $(beauty_ioctl_outdir)/usbdevfs_ioctl_array.c\nusbdevfs_ioctl_tbl := $(srctree)/tools/perf/trace/beauty/usbdevfs_ioctl.sh\n\n$(usbdevfs_ioctl_array): $(linux_uapi_dir)/usbdevice_fs.h $(usbdevfs_ioctl_tbl)\n\t$(Q)$(SHELL) '$(usbdevfs_ioctl_tbl)' $(linux_uapi_dir) > $@\n\nx86_arch_prctl_code_array := $(beauty_outdir)/x86_arch_prctl_code_array.c\nx86_arch_prctl_code_tbl := $(srctree)/tools/perf/trace/beauty/x86_arch_prctl.sh\n\n$(x86_arch_prctl_code_array): $(x86_arch_asm_uapi_dir)/prctl.h $(x86_arch_prctl_code_tbl)\n\t$(Q)$(SHELL) '$(x86_arch_prctl_code_tbl)' $(x86_arch_asm_uapi_dir) > $@\n\nx86_arch_irq_vectors_array := $(beauty_outdir)/x86_arch_irq_vectors_array.c\nx86_arch_irq_vectors_tbl := $(srctree)/tools/perf/trace/beauty/tracepoints/x86_irq_vectors.sh\n\n$(x86_arch_irq_vectors_array): $(x86_arch_asm_dir)/irq_vectors.h $(x86_arch_irq_vectors_tbl)\n\t$(Q)$(SHELL) '$(x86_arch_irq_vectors_tbl)' $(x86_arch_asm_dir) > $@\n\nx86_arch_MSRs_array := $(beauty_outdir)/x86_arch_MSRs_array.c\nx86_arch_MSRs_tbl := $(srctree)/tools/perf/trace/beauty/tracepoints/x86_msr.sh\n\n$(x86_arch_MSRs_array): $(x86_arch_asm_dir)/msr-index.h $(x86_arch_MSRs_tbl)\n\t$(Q)$(SHELL) '$(x86_arch_MSRs_tbl)' $(x86_arch_asm_dir) > $@\n\nrename_flags_array := $(beauty_outdir)/rename_flags_array.c\nrename_flags_tbl := $(srctree)/tools/perf/trace/beauty/rename_flags.sh\n\n$(rename_flags_array): $(linux_uapi_dir)/fs.h $(rename_flags_tbl)\n\t$(Q)$(SHELL) '$(rename_flags_tbl)' $(linux_uapi_dir) > $@\n\narch_errno_name_array := $(beauty_outdir)/arch_errno_name_array.c\narch_errno_hdr_dir := $(srctree)/tools\narch_errno_tbl := $(srctree)/tools/perf/trace/beauty/arch_errno_names.sh\n\n$(arch_errno_name_array): $(arch_errno_tbl)\n\t$(Q)$(SHELL) '$(arch_errno_tbl)' '$(patsubst -%,,$(CC))' $(arch_errno_hdr_dir) > $@\n\nsync_file_range_arrays := $(beauty_outdir)/sync_file_range_arrays.c\nsync_file_range_tbls := $(srctree)/tools/perf/trace/beauty/sync_file_range.sh\n\n$(sync_file_range_arrays): $(linux_uapi_dir)/fs.h $(sync_file_range_tbls)\n\t$(Q)$(SHELL) '$(sync_file_range_tbls)' $(linux_uapi_dir) > $@\n\nTESTS_CORESIGHT_DIR := $(srctree)/tools/perf/tests/shell/coresight\n\ntests-coresight-targets: FORCE\n\t$(Q)$(MAKE) -C $(TESTS_CORESIGHT_DIR)\n\ntests-coresight-targets-clean:\n\t$(call QUIET_CLEAN, coresight)\n\t$(Q)$(MAKE) -C $(TESTS_CORESIGHT_DIR) O=$(OUTPUT) clean >/dev/null\n\nall: shell_compatibility_test $(ALL_PROGRAMS) $(LANG_BINDINGS) $(OTHER_PROGRAMS) tests-coresight-targets\n\n# Create python binding output directory if not already present\n_dummy := $(shell [ -d '$(OUTPUT)python' ] || mkdir -p '$(OUTPUT)python')\n\n$(OUTPUT)python/perf$(PYTHON_EXTENSION_SUFFIX): $(PYTHON_EXT_SRCS) $(PYTHON_EXT_DEPS) $(LIBPERF) $(LIBSUBCMD)\n\t$(QUIET_GEN)LDSHARED=\"$(CC) -pthread -shared\" \\\n        CFLAGS='$(CFLAGS)' LDFLAGS='$(LDFLAGS)' \\\n\t  $(PYTHON_WORD) util/setup.py \\\n\t  --quiet build_ext; \\\n\tcp $(PYTHON_EXTBUILD_LIB)perf*.so $(OUTPUT)python/\n\npython_perf_target:\n\t@echo \"Target is: $(OUTPUT)python/perf$(PYTHON_EXTENSION_SUFFIX)\"\n\nplease_set_SHELL_PATH_to_a_more_modern_shell:\n\t$(Q)$$(:)\n\nshell_compatibility_test: please_set_SHELL_PATH_to_a_more_modern_shell\n\nstrip: $(PROGRAMS) $(OUTPUT)perf\n\t$(STRIP) $(STRIP_OPTS) $(PROGRAMS) $(OUTPUT)perf\n\nPERF_IN := $(OUTPUT)perf-in.o\n\nPMU_EVENTS_IN := $(OUTPUT)pmu-events/pmu-events-in.o\nexport NO_JEVENTS\n\nbuild := -f $(srctree)/tools/build/Makefile.build dir=. obj\n\n$(PERF_IN): prepare FORCE\n\t$(Q)$(MAKE) $(build)=perf\n\n$(PMU_EVENTS_IN): FORCE prepare\n\t$(Q)$(MAKE) -f $(srctree)/tools/build/Makefile.build dir=pmu-events obj=pmu-events\n\n$(OUTPUT)perf: $(PERFLIBS) $(PERF_IN) $(PMU_EVENTS_IN)\n\t$(QUIET_LINK)$(CC) $(CFLAGS) $(LDFLAGS) \\\n\t\t$(PERF_IN) $(PMU_EVENTS_IN) $(LIBS) -o $@\n\n$(GTK_IN): FORCE prepare\n\t$(Q)$(MAKE) $(build)=gtk\n\n$(OUTPUT)libperf-gtk.so: $(GTK_IN) $(PERFLIBS)\n\t$(QUIET_LINK)$(CC) -o $@ -shared $(LDFLAGS) $(filter %.o,$^) $(GTK_LIBS)\n\n$(OUTPUT)common-cmds.h: util/generate-cmdlist.sh command-list.txt\n\n$(OUTPUT)common-cmds.h: $(wildcard Documentation/perf-*.txt)\n\t$(QUIET_GEN). util/generate-cmdlist.sh > $@+ && mv $@+ $@\n\n$(SCRIPTS) : % : %.sh\n\t$(QUIET_GEN)$(INSTALL) '$@.sh' '$(OUTPUT)$@'\n\n$(OUTPUT)PERF-VERSION-FILE: .FORCE-PERF-VERSION-FILE\n\t$(Q)$(SHELL_PATH) util/PERF-VERSION-GEN $(OUTPUT)\n\n# These can record PERF_VERSION\nperf.spec $(SCRIPTS) \\\n\t: $(OUTPUT)PERF-VERSION-FILE\n\n.SUFFIXES:\n\n#\n# If a target does not match any of the later rules then prefix it by $(OUTPUT)\n# This makes targets like 'make O=/tmp/perf perf.o' work in a natural way.\n#\nifneq ($(OUTPUT),)\n%.o: $(OUTPUT)%.o\n\t@echo \"    # Redirected target $@ => $(OUTPUT)$@\"\npmu-events/%.o: $(OUTPUT)pmu-events/%.o\n\t@echo \"    # Redirected target $@ => $(OUTPUT)$@\"\nutil/%.o: $(OUTPUT)util/%.o\n\t@echo \"    # Redirected target $@ => $(OUTPUT)$@\"\nbench/%.o: $(OUTPUT)bench/%.o\n\t@echo \"    # Redirected target $@ => $(OUTPUT)$@\"\ntests/%.o: $(OUTPUT)tests/%.o\n\t@echo \"    # Redirected target $@ => $(OUTPUT)$@\"\nendif\n\n# These two need to be here so that when O= is not used they take precedence\n# over the general rule for .o\n\n# get relative building directory (to $(OUTPUT))\n# and '.' if it's $(OUTPUT) itself\n__build-dir = $(subst $(OUTPUT),,$(dir $@))\nbuild-dir   = $(or $(__build-dir),.)\n\nprepare: $(OUTPUT)PERF-VERSION-FILE $(OUTPUT)common-cmds.h archheaders $(drm_ioctl_array) \\\n\t$(fadvise_advice_array) \\\n\t$(fsconfig_arrays) \\\n\t$(fsmount_arrays) \\\n\t$(fspick_arrays) \\\n\t$(pkey_alloc_access_rights_array) \\\n\t$(sndrv_pcm_ioctl_array) \\\n\t$(sndrv_ctl_ioctl_array) \\\n\t$(kcmp_type_array) \\\n\t$(kvm_ioctl_array) \\\n\t$(socket_arrays) \\\n\t$(sockaddr_arrays) \\\n\t$(vhost_virtio_ioctl_array) \\\n\t$(madvise_behavior_array) \\\n\t$(mmap_flags_array) \\\n\t$(mmap_prot_array) \\\n\t$(mremap_flags_array) \\\n\t$(mount_flags_array) \\\n\t$(move_mount_flags_array) \\\n\t$(perf_ioctl_array) \\\n\t$(prctl_option_array) \\\n\t$(usbdevfs_ioctl_array) \\\n\t$(x86_arch_irq_vectors_array) \\\n\t$(x86_arch_MSRs_array) \\\n\t$(x86_arch_prctl_code_array) \\\n\t$(rename_flags_array) \\\n\t$(arch_errno_name_array) \\\n\t$(sync_file_range_arrays) \\\n\t$(LIBAPI) \\\n\t$(LIBPERF) \\\n\t$(LIBSUBCMD) \\\n\t$(LIBSYMBOL) \\\n\tbpf-skel\n\nifdef LIBBPF_STATIC\nprepare: $(LIBBPF)\nendif\n\n$(OUTPUT)%.o: %.c prepare FORCE\n\t$(Q)$(MAKE) -f $(srctree)/tools/build/Makefile.build dir=$(build-dir) $@\n\n$(OUTPUT)%.i: %.c prepare FORCE\n\t$(Q)$(MAKE) -f $(srctree)/tools/build/Makefile.build dir=$(build-dir) $@\n\n$(OUTPUT)%.s: %.c prepare FORCE\n\t$(Q)$(MAKE) -f $(srctree)/tools/build/Makefile.build dir=$(build-dir) $@\n\n$(OUTPUT)%-bison.o: %.c prepare FORCE\n\t$(Q)$(MAKE) -f $(srctree)/tools/build/Makefile.build dir=$(build-dir) $@\n\n$(OUTPUT)%-flex.o: %.c prepare FORCE\n\t$(Q)$(MAKE) -f $(srctree)/tools/build/Makefile.build dir=$(build-dir) $@\n\n$(OUTPUT)%.o: %.S prepare FORCE\n\t$(Q)$(MAKE) -f $(srctree)/tools/build/Makefile.build dir=$(build-dir) $@\n\n$(OUTPUT)%.i: %.S prepare FORCE\n\t$(Q)$(MAKE) -f $(srctree)/tools/build/Makefile.build dir=$(build-dir) $@\n\n$(OUTPUT)perf-%: %.o $(PERFLIBS)\n\t$(QUIET_LINK)$(CC) $(CFLAGS) -o $@ $(LDFLAGS) $(filter %.o,$^) $(LIBS)\n\nifndef NO_PERF_READ_VDSO32\n$(OUTPUT)perf-read-vdso32: perf-read-vdso.c util/find-map.c\n\t$(QUIET_CC)$(CC) -m32 $(filter -static,$(LDFLAGS)) -Wall -Werror -o $@ perf-read-vdso.c\nendif\n\nifndef NO_PERF_READ_VDSOX32\n$(OUTPUT)perf-read-vdsox32: perf-read-vdso.c util/find-map.c\n\t$(QUIET_CC)$(CC) -mx32 $(filter -static,$(LDFLAGS)) -Wall -Werror -o $@ perf-read-vdso.c\nendif\n\n$(OUTPUT)dlfilters/%.o: dlfilters/%.c include/perf/perf_dlfilter.h\n\t$(Q)$(MKDIR) -p $(OUTPUT)dlfilters\n\t$(QUIET_CC)$(CC) -c -Iinclude $(EXTRA_CFLAGS) -o $@ -fpic $<\n\n.SECONDARY: $(DLFILTERS:.so=.o)\n\n$(OUTPUT)dlfilters/%.so: $(OUTPUT)dlfilters/%.o\n\t$(QUIET_LINK)$(CC) $(EXTRA_CFLAGS) -shared -o $@ $<\n\nifndef NO_JVMTI\nLIBJVMTI_IN := $(OUTPUT)jvmti/jvmti-in.o\n\n$(LIBJVMTI_IN): FORCE\n\t$(Q)$(MAKE) -f $(srctree)/tools/build/Makefile.build dir=jvmti obj=jvmti\n\n$(OUTPUT)$(LIBJVMTI): $(LIBJVMTI_IN)\n\t$(QUIET_LINK)$(CC) $(LDFLAGS) -shared -Wl,-soname -Wl,$(LIBJVMTI) -o $@ $<\nendif\n\n$(patsubst perf-%,%.o,$(PROGRAMS)): $(wildcard */*.h)\n\n$(LIBAPI): FORCE | $(LIBAPI_OUTPUT)\n\t$(Q)$(MAKE) -C $(LIBAPI_DIR) O=$(LIBAPI_OUTPUT) \\\n\t\tDESTDIR=$(LIBAPI_DESTDIR) prefix= subdir= \\\n\t\t$@ install_headers\n\n$(LIBAPI)-clean:\n\t$(call QUIET_CLEAN, libapi)\n\t$(Q)$(RM) -r -- $(LIBAPI_OUTPUT)\n\n$(LIBBPF): FORCE | $(LIBBPF_OUTPUT)\n\t$(Q)$(MAKE) -C $(LIBBPF_DIR) FEATURES_DUMP=$(FEATURE_DUMP_EXPORT) \\\n\t\tO= OUTPUT=$(LIBBPF_OUTPUT)/ DESTDIR=$(LIBBPF_DESTDIR) prefix= subdir= \\\n\t\t$@ install_headers\n\n$(LIBBPF)-clean:\n\t$(call QUIET_CLEAN, libbpf)\n\t$(Q)$(RM) -r -- $(LIBBPF_OUTPUT)\n\n$(LIBPERF): FORCE | $(LIBPERF_OUTPUT)\n\t$(Q)$(MAKE) -C $(LIBPERF_DIR) O=$(LIBPERF_OUTPUT) \\\n\t\tDESTDIR=$(LIBPERF_DESTDIR) prefix= subdir= \\\n\t\t$@ install_headers\n\n$(LIBPERF)-clean:\n\t$(call QUIET_CLEAN, libperf)\n\t$(Q)$(RM) -r -- $(LIBPERF_OUTPUT)\n\n$(LIBSUBCMD): FORCE | $(LIBSUBCMD_OUTPUT)\n\t$(Q)$(MAKE) -C $(LIBSUBCMD_DIR) O=$(LIBSUBCMD_OUTPUT) \\\n\t\tDESTDIR=$(LIBSUBCMD_DESTDIR) prefix= subdir= \\\n\t\t$@ install_headers\n\n$(LIBSUBCMD)-clean:\n\t$(call QUIET_CLEAN, libsubcmd)\n\t$(Q)$(RM) -r -- $(LIBSUBCMD_OUTPUT)\n\n$(LIBSYMBOL): FORCE | $(LIBSYMBOL_OUTPUT)\n\t$(Q)$(MAKE) -C $(LIBSYMBOL_DIR) O=$(LIBSYMBOL_OUTPUT) \\\n\t\tDESTDIR=$(LIBSYMBOL_DESTDIR) prefix= subdir= \\\n\t\t$@ install_headers\n\n$(LIBSYMBOL)-clean:\n\t$(call QUIET_CLEAN, libsymbol)\n\t$(Q)$(RM) -r -- $(LIBSYMBOL_OUTPUT)\n\nhelp:\n\t@echo 'Perf make targets:'\n\t@echo '  doc\t\t- make *all* documentation (see below)'\n\t@echo '  man\t\t- make manpage documentation (access with man <foo>)'\n\t@echo '  html\t\t- make html documentation'\n\t@echo '  info\t\t- make GNU info documentation (access with info <foo>)'\n\t@echo '  pdf\t\t- make pdf documentation'\n\t@echo '  TAGS\t\t- use etags to make tag information for source browsing'\n\t@echo '  tags\t\t- use ctags to make tag information for source browsing'\n\t@echo '  cscope\t- use cscope to make interactive browsing database'\n\t@echo ''\n\t@echo 'Perf install targets:'\n\t@echo '  NOTE: documentation build requires asciidoc, xmlto packages to be installed'\n\t@echo '  HINT: use \"prefix\" or \"DESTDIR\" to install to a particular'\n\t@echo '        path like \"make prefix=/usr/local install install-doc\"'\n\t@echo '  install\t- install compiled binaries'\n\t@echo '  install-doc\t- install *all* documentation'\n\t@echo '  install-man\t- install manpage documentation'\n\t@echo '  install-html\t- install html documentation'\n\t@echo '  install-info\t- install GNU info documentation'\n\t@echo '  install-pdf\t- install pdf documentation'\n\t@echo ''\n\t@echo '  quick-install-doc\t- alias for quick-install-man'\n\t@echo '  quick-install-man\t- install the documentation quickly'\n\t@echo '  quick-install-html\t- install the html documentation quickly'\n\t@echo ''\n\t@echo 'Perf maintainer targets:'\n\t@echo '  clean\t\t\t- clean all binary objects and build output'\n\n\nDOC_TARGETS := doc man html info pdf\n\nINSTALL_DOC_TARGETS := $(patsubst %,install-%,$(DOC_TARGETS)) try-install-man\nINSTALL_DOC_TARGETS += quick-install-doc quick-install-man quick-install-html\n\n# 'make doc' should call 'make -C Documentation all'\n$(DOC_TARGETS):\n\t$(Q)$(MAKE) -C $(DOC_DIR) O=$(OUTPUT) $(@:doc=all) ASCIIDOC_EXTRA=$(ASCIIDOC_EXTRA)\n\nTAG_FOLDERS= . ../lib ../include\nTAG_FILES= ../../include/uapi/linux/perf_event.h\n\nTAGS:\n\t$(QUIET_GEN)$(RM) TAGS; \\\n\t$(FIND) $(TAG_FOLDERS) -name '*.[hcS]' -print -o -name '*.cpp' -print | xargs etags -a $(TAG_FILES)\n\ntags:\n\t$(QUIET_GEN)$(RM) tags; \\\n\t$(FIND) $(TAG_FOLDERS) -name '*.[hcS]' -print -o -name '*.cpp' -print | xargs ctags -a $(TAG_FILES)\n\ncscope:\n\t$(QUIET_GEN)$(RM) cscope*; \\\n\t$(FIND) $(TAG_FOLDERS) -name '*.[hcS]' -print -o -name '*.cpp' -print | xargs cscope -b $(TAG_FILES)\n\n### Testing rules\n\n# GNU make supports exporting all variables by \"export\" without parameters.\n# However, the environment gets quite big, and some programs have problems\n# with that.\n\ncheck: $(OUTPUT)common-cmds.h\n\tif sparse; \\\n\tthen \\\n\t\tfor i in *.c */*.c; \\\n\t\tdo \\\n\t\t\tsparse $(CFLAGS) $(SPARSE_FLAGS) $$i || exit; \\\n\t\tdone; \\\n\telse \\\n\t\texit 1; \\\n\tfi\n\n### Installation rules\n\nifdef GTK2\ninstall-gtk: $(OUTPUT)libperf-gtk.so\n\t$(call QUIET_INSTALL, 'GTK UI') \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(libdir_SQ)'; \\\n\t\t$(INSTALL) $(OUTPUT)libperf-gtk.so '$(DESTDIR_SQ)$(libdir_SQ)'\nelse\ninstall-gtk:\nendif\n\ninstall-tools: all install-gtk\n\t$(call QUIET_INSTALL, binaries) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(bindir_SQ)'; \\\n\t\t$(INSTALL) $(OUTPUT)perf '$(DESTDIR_SQ)$(bindir_SQ)'; \\\n\t\t$(LN) '$(DESTDIR_SQ)$(bindir_SQ)/perf' '$(DESTDIR_SQ)$(bindir_SQ)/trace'; \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(includedir_SQ)/perf'; \\\n\t\t$(INSTALL) -m 644 include/perf/perf_dlfilter.h -t '$(DESTDIR_SQ)$(includedir_SQ)/perf'\nifndef NO_PERF_READ_VDSO32\n\t$(call QUIET_INSTALL, perf-read-vdso32) \\\n\t\t$(INSTALL) $(OUTPUT)perf-read-vdso32 '$(DESTDIR_SQ)$(bindir_SQ)';\nendif\nifndef NO_PERF_READ_VDSOX32\n\t$(call QUIET_INSTALL, perf-read-vdsox32) \\\n\t\t$(INSTALL) $(OUTPUT)perf-read-vdsox32 '$(DESTDIR_SQ)$(bindir_SQ)';\nendif\nifndef NO_JVMTI\n\t$(call QUIET_INSTALL, $(LIBJVMTI)) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(libdir_SQ)'; \\\n\t\t$(INSTALL) $(OUTPUT)$(LIBJVMTI) '$(DESTDIR_SQ)$(libdir_SQ)';\nendif\n\t$(call QUIET_INSTALL, libexec) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)'\n\t$(call QUIET_INSTALL, perf-archive) \\\n\t\t$(INSTALL) $(OUTPUT)perf-archive -t '$(DESTDIR_SQ)$(perfexec_instdir_SQ)'\n\t$(call QUIET_INSTALL, perf-iostat) \\\n\t\t$(INSTALL) $(OUTPUT)perf-iostat -t '$(DESTDIR_SQ)$(perfexec_instdir_SQ)'\nifndef NO_LIBAUDIT\n\t$(call QUIET_INSTALL, strace/groups) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(STRACE_GROUPS_INSTDIR_SQ)'; \\\n\t\t$(INSTALL) trace/strace/groups/* -m 644 -t '$(DESTDIR_SQ)$(STRACE_GROUPS_INSTDIR_SQ)'\nendif\nifndef NO_LIBPERL\n\t$(call QUIET_INSTALL, perl-scripts) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/perl/Perf-Trace-Util/lib/Perf/Trace'; \\\n\t\t$(INSTALL) scripts/perl/Perf-Trace-Util/lib/Perf/Trace/* -m 644 -t '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/perl/Perf-Trace-Util/lib/Perf/Trace'; \\\n\t\t$(INSTALL) scripts/perl/*.pl -m 644 -t '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/perl'; \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/perl/bin'; \\\n\t\t$(INSTALL) scripts/perl/bin/* -t '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/perl/bin'\nendif\nifndef NO_LIBPYTHON\n\t$(call QUIET_INSTALL, python-scripts) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/python/Perf-Trace-Util/lib/Perf/Trace'; \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/python/bin'; \\\n\t\t$(INSTALL) scripts/python/Perf-Trace-Util/lib/Perf/Trace/* -m 644 -t '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/python/Perf-Trace-Util/lib/Perf/Trace'; \\\n\t\t$(INSTALL) scripts/python/*.py -m 644 -t '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/python'; \\\n\t\t$(INSTALL) scripts/python/bin/* -t '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/scripts/python/bin'\nendif\n\t$(call QUIET_INSTALL, dlfilters) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/dlfilters'; \\\n\t\t$(INSTALL) $(DLFILTERS) '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/dlfilters';\n\t$(call QUIET_INSTALL, perf_completion-script) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(sysconfdir_SQ)/bash_completion.d'; \\\n\t\t$(INSTALL) perf-completion.sh -m 644 '$(DESTDIR_SQ)$(sysconfdir_SQ)/bash_completion.d/perf'\n\t$(call QUIET_INSTALL, perf-tip) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(tip_instdir_SQ)'; \\\n\t\t$(INSTALL) Documentation/tips.txt -m 644 -t '$(DESTDIR_SQ)$(tip_instdir_SQ)'\n\ninstall-tests: all install-gtk\n\t$(call QUIET_INSTALL, tests) \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests'; \\\n\t\t$(INSTALL) tests/attr.py -m 644 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests'; \\\n\t\t$(INSTALL) tests/pe-file.exe* '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests'; \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests/attr'; \\\n\t\t$(INSTALL) tests/attr/* -m 644 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests/attr'; \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests/shell'; \\\n\t\t$(INSTALL) tests/shell/*.sh '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests/shell'; \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests/shell/lib'; \\\n\t\t$(INSTALL) tests/shell/lib/*.sh -m 644 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests/shell/lib'; \\\n\t\t$(INSTALL) tests/shell/lib/*.py -m 644 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests/shell/lib'; \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests/shell/coresight' ; \\\n\t\t$(INSTALL) tests/shell/coresight/*.sh '$(DESTDIR_SQ)$(perfexec_instdir_SQ)/tests/shell/coresight'\n\t$(Q)$(MAKE) -C tests/shell/coresight install-tests\n\ninstall-bin: install-tools install-tests\n\ninstall: install-bin try-install-man\n\ninstall-python_ext:\n\t$(PYTHON_WORD) util/setup.py --quiet install --root='/$(DESTDIR_SQ)'\n\n# 'make install-doc' should call 'make -C Documentation install'\n$(INSTALL_DOC_TARGETS):\n\t$(Q)$(MAKE) -C $(DOC_DIR) O=$(OUTPUT) $(@:-doc=) ASCIIDOC_EXTRA=$(ASCIIDOC_EXTRA)\n\n### Cleaning rules\n\npython-clean:\n\t$(python-clean)\n\nSKEL_OUT := $(abspath $(OUTPUT)util/bpf_skel)\nSKEL_TMP_OUT := $(abspath $(SKEL_OUT)/.tmp)\nSKELETONS := $(SKEL_OUT)/bpf_prog_profiler.skel.h\nSKELETONS += $(SKEL_OUT)/bperf_leader.skel.h $(SKEL_OUT)/bperf_follower.skel.h\nSKELETONS += $(SKEL_OUT)/bperf_cgroup.skel.h $(SKEL_OUT)/func_latency.skel.h\nSKELETONS += $(SKEL_OUT)/off_cpu.skel.h $(SKEL_OUT)/lock_contention.skel.h\nSKELETONS += $(SKEL_OUT)/kwork_trace.skel.h $(SKEL_OUT)/sample_filter.skel.h\nSKELETONS += $(SKEL_OUT)/bench_uprobe.skel.h\nSKELETONS += $(SKEL_OUT)/augmented_raw_syscalls.skel.h\n\n$(SKEL_TMP_OUT) $(LIBAPI_OUTPUT) $(LIBBPF_OUTPUT) $(LIBPERF_OUTPUT) $(LIBSUBCMD_OUTPUT) $(LIBSYMBOL_OUTPUT):\n\t$(Q)$(MKDIR) -p $@\n\nifdef BUILD_BPF_SKEL\nBPFTOOL := $(SKEL_TMP_OUT)/bootstrap/bpftool\n# Get Clang's default includes on this system, as opposed to those seen by\n# '--target=bpf'. This fixes \"missing\" files on some architectures/distros,\n# such as asm/byteorder.h, asm/socket.h, asm/sockios.h, sys/cdefs.h etc.\n#\n# Use '-idirafter': Don't interfere with include mechanics except where the\n# build would have failed anyways.\ndefine get_sys_includes\n$(shell $(1) $(2) -v -E - </dev/null 2>&1 \\\n       | sed -n '/<...> search starts here:/,/End of search list./{ s| \\(/.*\\)|-idirafter \\1|p }') \\\n$(shell $(1) $(2) -dM -E - </dev/null | grep '__riscv_xlen ' | awk '{printf(\"-D__riscv_xlen=%d -D__BITS_PER_LONG=%d\", $$3, $$3)}')\nendef\n\nifneq ($(CROSS_COMPILE),)\nCLANG_TARGET_ARCH = --target=$(notdir $(CROSS_COMPILE:%-=%))\nendif\n\nCLANG_OPTIONS = -Wall\nCLANG_SYS_INCLUDES = $(call get_sys_includes,$(CLANG),$(CLANG_TARGET_ARCH))\nBPF_INCLUDE := -I$(SKEL_TMP_OUT)/.. -I$(LIBBPF_INCLUDE) $(CLANG_SYS_INCLUDES)\nTOOLS_UAPI_INCLUDE := -I$(srctree)/tools/include/uapi\n\nifneq ($(WERROR),0)\n  CLANG_OPTIONS += -Werror\nendif\n\n$(BPFTOOL): | $(SKEL_TMP_OUT)\n\t$(Q)CFLAGS= $(MAKE) -C ../bpf/bpftool \\\n\t\tOUTPUT=$(SKEL_TMP_OUT)/ bootstrap\n\n# Paths to search for a kernel to generate vmlinux.h from.\nVMLINUX_BTF_ELF_PATHS ?= $(if $(O),$(O)/vmlinux)\t\t\t\\\n\t\t     $(if $(KBUILD_OUTPUT),$(KBUILD_OUTPUT)/vmlinux)\t\\\n\t\t     ../../vmlinux\t\t\t\t\t\\\n\t\t     /boot/vmlinux-$(shell uname -r)\n\n# Paths to BTF information.\nVMLINUX_BTF_BTF_PATHS ?= /sys/kernel/btf/vmlinux\n\n# Filter out kernels that don't exist or without a BTF section.\nVMLINUX_BTF_ELF_ABSPATHS ?= $(abspath $(wildcard $(VMLINUX_BTF_ELF_PATHS)))\nVMLINUX_BTF_PATHS ?= $(shell for file in $(VMLINUX_BTF_ELF_ABSPATHS); \\\n\t\t\tdo \\\n\t\t\t\tif [ -f $$file ] && ($(READELF) -S \"$$file\" | grep -q .BTF); \\\n\t\t\t\tthen \\\n\t\t\t\t\techo \"$$file\"; \\\n\t\t\t\tfi; \\\n\t\t\tdone) \\\n\t\t\t$(wildcard $(VMLINUX_BTF_BTF_PATHS))\n\n# Select the first as the source of vmlinux.h.\nVMLINUX_BTF ?= $(firstword $(VMLINUX_BTF_PATHS))\n\nifeq ($(VMLINUX_H),)\n  ifeq ($(VMLINUX_BTF),)\n    $(error Missing bpftool input for generating vmlinux.h)\n  endif\nendif\n\n$(SKEL_OUT)/vmlinux.h: $(VMLINUX_BTF) $(BPFTOOL)\nifeq ($(VMLINUX_H),)\n\t$(QUIET_GEN)$(BPFTOOL) btf dump file $< format c > $@\nelse\n\t$(Q)cp \"$(VMLINUX_H)\" $@\nendif\n\n$(SKEL_TMP_OUT)/%.bpf.o: util/bpf_skel/%.bpf.c $(LIBBPF) $(SKEL_OUT)/vmlinux.h | $(SKEL_TMP_OUT)\n\t$(QUIET_CLANG)$(CLANG) -g -O2 --target=bpf $(CLANG_OPTIONS) $(BPF_INCLUDE) $(TOOLS_UAPI_INCLUDE) \\\n\t  -c $(filter util/bpf_skel/%.bpf.c,$^) -o $@\n\n$(SKEL_OUT)/%.skel.h: $(SKEL_TMP_OUT)/%.bpf.o | $(BPFTOOL)\n\t$(QUIET_GENSKEL)$(BPFTOOL) gen skeleton $< > $@\n\nbpf-skel: $(SKELETONS)\n\n.PRECIOUS: $(SKEL_TMP_OUT)/%.bpf.o\n\nelse # BUILD_BPF_SKEL\n\nbpf-skel:\n\nendif # BUILD_BPF_SKEL\n\nbpf-skel-clean:\n\t$(call QUIET_CLEAN, bpf-skel) $(RM) -r $(SKEL_TMP_OUT) $(SKELETONS)\n\nclean:: $(LIBAPI)-clean $(LIBBPF)-clean $(LIBSUBCMD)-clean $(LIBSYMBOL)-clean $(LIBPERF)-clean fixdep-clean python-clean bpf-skel-clean tests-coresight-targets-clean\n\t$(call QUIET_CLEAN, core-objs)  $(RM) $(LIBPERF_A) $(OUTPUT)perf-archive $(OUTPUT)perf-iostat $(LANG_BINDINGS)\n\t$(Q)find $(or $(OUTPUT),.) -name '*.o' -delete -o -name '\\.*.cmd' -delete -o -name '\\.*.d' -delete\n\t$(Q)$(RM) $(OUTPUT).config-detected\n\t$(call QUIET_CLEAN, core-progs) $(RM) $(ALL_PROGRAMS) perf perf-read-vdso32 perf-read-vdsox32 $(OUTPUT)$(LIBJVMTI).so\n\t$(call QUIET_CLEAN, core-gen)   $(RM)  *.spec *.pyc *.pyo */*.pyc */*.pyo $(OUTPUT)common-cmds.h TAGS tags cscope* $(OUTPUT)PERF-VERSION-FILE $(OUTPUT)FEATURE-DUMP $(OUTPUT)util/*-bison* $(OUTPUT)util/*-flex* \\\n\t\t$(OUTPUT)util/intel-pt-decoder/inat-tables.c \\\n\t\t$(OUTPUT)tests/llvm-src-{base,kbuild,prologue,relocation}.c \\\n\t\t$(OUTPUT)pmu-events/pmu-events.c \\\n\t\t$(OUTPUT)pmu-events/metric_test.log \\\n\t\t$(OUTPUT)$(fadvise_advice_array) \\\n\t\t$(OUTPUT)$(fsconfig_arrays) \\\n\t\t$(OUTPUT)$(fsmount_arrays) \\\n\t\t$(OUTPUT)$(fspick_arrays) \\\n\t\t$(OUTPUT)$(madvise_behavior_array) \\\n\t\t$(OUTPUT)$(mmap_flags_array) \\\n\t\t$(OUTPUT)$(mmap_prot_array) \\\n\t\t$(OUTPUT)$(mremap_flags_array) \\\n\t\t$(OUTPUT)$(mount_flags_array) \\\n\t\t$(OUTPUT)$(move_mount_flags_array) \\\n\t\t$(OUTPUT)$(drm_ioctl_array) \\\n\t\t$(OUTPUT)$(pkey_alloc_access_rights_array) \\\n\t\t$(OUTPUT)$(sndrv_ctl_ioctl_array) \\\n\t\t$(OUTPUT)$(sndrv_pcm_ioctl_array) \\\n\t\t$(OUTPUT)$(kvm_ioctl_array) \\\n\t\t$(OUTPUT)$(kcmp_type_array) \\\n\t\t$(OUTPUT)$(socket_arrays) \\\n\t\t$(OUTPUT)$(sockaddr_arrays) \\\n\t\t$(OUTPUT)$(vhost_virtio_ioctl_array) \\\n\t\t$(OUTPUT)$(perf_ioctl_array) \\\n\t\t$(OUTPUT)$(prctl_option_array) \\\n\t\t$(OUTPUT)$(usbdevfs_ioctl_array) \\\n\t\t$(OUTPUT)$(x86_arch_irq_vectors_array) \\\n\t\t$(OUTPUT)$(x86_arch_MSRs_array) \\\n\t\t$(OUTPUT)$(x86_arch_prctl_code_array) \\\n\t\t$(OUTPUT)$(rename_flags_array) \\\n\t\t$(OUTPUT)$(arch_errno_name_array) \\\n\t\t$(OUTPUT)$(sync_file_range_arrays)\n\t$(call QUIET_CLEAN, Documentation) \\\n\t$(MAKE) -C $(DOC_DIR) O=$(OUTPUT) clean >/dev/null\n\n#\n# To provide FEATURE-DUMP into $(FEATURE_DUMP_COPY)\n# file if defined, with no further action.\nfeature-dump:\nifdef FEATURE_DUMP_COPY\n\t@cp $(OUTPUT)FEATURE-DUMP $(FEATURE_DUMP_COPY)\n\t@echo \"FEATURE-DUMP file copied into $(FEATURE_DUMP_COPY)\"\nelse\n\t@echo \"FEATURE-DUMP file available in $(OUTPUT)FEATURE-DUMP\"\nendif\n\n\nFORCE:\n\n.PHONY: all install clean config-clean strip install-gtk\n.PHONY: shell_compatibility_test please_set_SHELL_PATH_to_a_more_modern_shell\n.PHONY: .FORCE-PERF-VERSION-FILE TAGS tags cscope FORCE prepare\n.PHONY: archheaders python_perf_target\n\nendif # force_fixdep\n\n# Delete partially updated (corrupted) files on error\n.DELETE_ON_ERROR:\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}