{
  "module_name": "strbuf.h",
  "hash_id": "5427f4064473c4b723f5883c0921952aec3964cf8f01f1562800fb068c9b6c85",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/util/strbuf.h",
  "human_readable_source": " \n#ifndef __PERF_STRBUF_H\n#define __PERF_STRBUF_H\n\n \n\n#include <assert.h>\n#include <stdarg.h>\n#include <stddef.h>\n#include <string.h>\n#include <linux/compiler.h>\n#include <sys/types.h>\n\nextern char strbuf_slopbuf[];\nstruct strbuf {\n\tsize_t alloc;\n\tsize_t len;\n\tchar *buf;\n};\n\n#define STRBUF_INIT  { 0, 0, strbuf_slopbuf }\n\n \nint strbuf_init(struct strbuf *buf, ssize_t hint);\nvoid strbuf_release(struct strbuf *buf);\nchar *strbuf_detach(struct strbuf *buf, size_t *);\n\n \nstatic inline ssize_t strbuf_avail(const struct strbuf *sb) {\n\treturn sb->alloc ? sb->alloc - sb->len - 1 : 0;\n}\n\nint strbuf_grow(struct strbuf *buf, size_t);\n\nstatic inline int strbuf_setlen(struct strbuf *sb, size_t len) {\n\tif (!sb->alloc) {\n\t\tint ret = strbuf_grow(sb, 0);\n\t\tif (ret)\n\t\t\treturn ret;\n\t}\n\tassert(len < sb->alloc);\n\tsb->len = len;\n\tsb->buf[len] = '\\0';\n\treturn 0;\n}\n\n \nint strbuf_addch(struct strbuf *sb, int c);\n\nint strbuf_add(struct strbuf *buf, const void *, size_t);\nstatic inline int strbuf_addstr(struct strbuf *sb, const char *s) {\n\treturn strbuf_add(sb, s, strlen(s));\n}\n\nint strbuf_addf(struct strbuf *sb, const char *fmt, ...) __printf(2, 3);\n\n \nssize_t strbuf_read(struct strbuf *, int fd, ssize_t hint);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}