{
  "module_name": "env.h",
  "hash_id": "3a86aa3a5f3700090a562ef1c07a7f14a7a58381e2295500c3a8cb40e840d638",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/util/env.h",
  "human_readable_source": " \n#ifndef __PERF_ENV_H\n#define __PERF_ENV_H\n\n#include <linux/types.h>\n#include <linux/rbtree.h>\n#include \"cpumap.h\"\n#include \"rwsem.h\"\n\nstruct perf_cpu_map;\n\nstruct cpu_topology_map {\n\tint\tsocket_id;\n\tint\tdie_id;\n\tint\tcore_id;\n};\n\nstruct cpu_cache_level {\n\tu32\tlevel;\n\tu32\tline_size;\n\tu32\tsets;\n\tu32\tways;\n\tchar\t*type;\n\tchar\t*size;\n\tchar\t*map;\n};\n\nstruct numa_node {\n\tu32\t\t node;\n\tu64\t\t mem_total;\n\tu64\t\t mem_free;\n\tstruct perf_cpu_map\t*map;\n};\n\nstruct memory_node {\n\tu64\t\t node;\n\tu64\t\t size;\n\tunsigned long\t*set;\n};\n\nstruct hybrid_node {\n\tchar\t*pmu_name;\n\tchar\t*cpus;\n};\n\nstruct pmu_caps {\n\tint\t\tnr_caps;\n\tunsigned int    max_branches;\n\tchar            **caps;\n\tchar            *pmu_name;\n};\n\nstruct perf_env {\n\tchar\t\t\t*hostname;\n\tchar\t\t\t*os_release;\n\tchar\t\t\t*version;\n\tchar\t\t\t*arch;\n\tint\t\t\tnr_cpus_online;\n\tint\t\t\tnr_cpus_avail;\n\tchar\t\t\t*cpu_desc;\n\tchar\t\t\t*cpuid;\n\tunsigned long long\ttotal_mem;\n\tunsigned int\t\tmsr_pmu_type;\n\tunsigned int\t\tmax_branches;\n\tint\t\t\tkernel_is_64_bit;\n\n\tint\t\t\tnr_cmdline;\n\tint\t\t\tnr_sibling_cores;\n\tint\t\t\tnr_sibling_dies;\n\tint\t\t\tnr_sibling_threads;\n\tint\t\t\tnr_numa_nodes;\n\tint\t\t\tnr_memory_nodes;\n\tint\t\t\tnr_pmu_mappings;\n\tint\t\t\tnr_groups;\n\tint\t\t\tnr_cpu_pmu_caps;\n\tint\t\t\tnr_hybrid_nodes;\n\tint\t\t\tnr_pmus_with_caps;\n\tchar\t\t\t*cmdline;\n\tconst char\t\t**cmdline_argv;\n\tchar\t\t\t*sibling_cores;\n\tchar\t\t\t*sibling_dies;\n\tchar\t\t\t*sibling_threads;\n\tchar\t\t\t*pmu_mappings;\n\tchar\t\t\t**cpu_pmu_caps;\n\tstruct cpu_topology_map\t*cpu;\n\tstruct cpu_cache_level\t*caches;\n\tint\t\t\t caches_cnt;\n\tu32\t\t\tcomp_ratio;\n\tu32\t\t\tcomp_ver;\n\tu32\t\t\tcomp_type;\n\tu32\t\t\tcomp_level;\n\tu32\t\t\tcomp_mmap_len;\n\tstruct numa_node\t*numa_nodes;\n\tstruct memory_node\t*memory_nodes;\n\tunsigned long long\t memory_bsize;\n\tstruct hybrid_node\t*hybrid_nodes;\n\tstruct pmu_caps\t\t*pmu_caps;\n#ifdef HAVE_LIBBPF_SUPPORT\n\t \n\tstruct {\n\t\tstruct rw_semaphore\tlock;\n\t\tstruct rb_root\t\tinfos;\n\t\tu32\t\t\tinfos_cnt;\n\t\tstruct rb_root\t\tbtfs;\n\t\tu32\t\t\tbtfs_cnt;\n\t} bpf_progs;\n#endif \n\t \n\tstruct {\n\t\tstruct rw_semaphore\tlock;\n\t\tstruct rb_root\t\ttree;\n\t} cgroups;\n\n\t \n\tint\t\t\t*numa_map;\n\tint\t\t\t nr_numa_map;\n\n\t \n\tstruct {\n\t\tu64\ttod_ns;\n\t\tu64\tclockid_ns;\n\t\tu64     clockid_res_ns;\n\t\tint\tclockid;\n\t\t \n\t\tbool\tenabled;\n\t} clock;\n};\n\nenum perf_compress_type {\n\tPERF_COMP_NONE = 0,\n\tPERF_COMP_ZSTD,\n\tPERF_COMP_MAX\n};\n\nstruct bpf_prog_info_node;\nstruct btf_node;\n\nextern struct perf_env perf_env;\n\nvoid perf_env__exit(struct perf_env *env);\n\nint perf_env__kernel_is_64_bit(struct perf_env *env);\n\nint perf_env__set_cmdline(struct perf_env *env, int argc, const char *argv[]);\n\nint perf_env__read_cpuid(struct perf_env *env);\nint perf_env__read_pmu_mappings(struct perf_env *env);\nint perf_env__nr_pmu_mappings(struct perf_env *env);\nconst char *perf_env__pmu_mappings(struct perf_env *env);\n\nint perf_env__read_cpu_topology_map(struct perf_env *env);\n\nvoid cpu_cache_level__free(struct cpu_cache_level *cache);\n\nconst char *perf_env__arch(struct perf_env *env);\nconst char *perf_env__cpuid(struct perf_env *env);\nconst char *perf_env__raw_arch(struct perf_env *env);\nint perf_env__nr_cpus_avail(struct perf_env *env);\n\nvoid perf_env__init(struct perf_env *env);\nvoid __perf_env__insert_bpf_prog_info(struct perf_env *env,\n\t\t\t\t      struct bpf_prog_info_node *info_node);\nvoid perf_env__insert_bpf_prog_info(struct perf_env *env,\n\t\t\t\t    struct bpf_prog_info_node *info_node);\nstruct bpf_prog_info_node *perf_env__find_bpf_prog_info(struct perf_env *env,\n\t\t\t\t\t\t\t__u32 prog_id);\nbool perf_env__insert_btf(struct perf_env *env, struct btf_node *btf_node);\nbool __perf_env__insert_btf(struct perf_env *env, struct btf_node *btf_node);\nstruct btf_node *perf_env__find_btf(struct perf_env *env, __u32 btf_id);\nstruct btf_node *__perf_env__find_btf(struct perf_env *env, __u32 btf_id);\n\nint perf_env__numa_node(struct perf_env *env, struct perf_cpu cpu);\nchar *perf_env__find_pmu_cap(struct perf_env *env, const char *pmu_name,\n\t\t\t     const char *cap);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}