{
  "module_name": "arm-spe-pkt-decoder.h",
  "hash_id": "5404996b14e9706f11d33e52291f4f5e0cccdb8c3fb90f07fc381c5e170dbaca",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/util/arm-spe-decoder/arm-spe-pkt-decoder.h",
  "human_readable_source": " \n \n\n#ifndef INCLUDE__ARM_SPE_PKT_DECODER_H__\n#define INCLUDE__ARM_SPE_PKT_DECODER_H__\n\n#include <stddef.h>\n#include <stdint.h>\n\n#define ARM_SPE_PKT_DESC_MAX\t\t256\n\n#define ARM_SPE_NEED_MORE_BYTES\t\t-1\n#define ARM_SPE_BAD_PACKET\t\t-2\n\n#define ARM_SPE_PKT_MAX_SZ\t\t16\n\nenum arm_spe_pkt_type {\n\tARM_SPE_BAD,\n\tARM_SPE_PAD,\n\tARM_SPE_END,\n\tARM_SPE_TIMESTAMP,\n\tARM_SPE_ADDRESS,\n\tARM_SPE_COUNTER,\n\tARM_SPE_CONTEXT,\n\tARM_SPE_OP_TYPE,\n\tARM_SPE_EVENTS,\n\tARM_SPE_DATA_SOURCE,\n};\n\nstruct arm_spe_pkt {\n\tenum arm_spe_pkt_type\ttype;\n\tunsigned char\t\tindex;\n\tuint64_t\t\tpayload;\n};\n\n \n#define SPE_HEADER0_PAD\t\t\t\t0x0\n#define SPE_HEADER0_END\t\t\t\t0x1\n#define SPE_HEADER0_TIMESTAMP\t\t\t0x71\n \n#define SPE_HEADER0_MASK1\t\t\t(GENMASK_ULL(7, 6) | GENMASK_ULL(3, 0))\n#define SPE_HEADER0_EVENTS\t\t\t0x42\n#define SPE_HEADER0_SOURCE\t\t\t0x43\n \n#define SPE_HEADER0_MASK2\t\t\tGENMASK_ULL(7, 2)\n#define SPE_HEADER0_CONTEXT\t\t\t0x64\n#define SPE_HEADER0_OP_TYPE\t\t\t0x48\n \n#define SPE_HEADER0_EXTENDED\t\t\t0x20\n \n#define SPE_HEADER0_MASK3\t\t\tGENMASK_ULL(7, 3)\n#define SPE_HEADER0_ADDRESS\t\t\t0xb0\n#define SPE_HEADER0_COUNTER\t\t\t0x98\n#define SPE_HEADER1_ALIGNMENT\t\t\t0x0\n\n#define SPE_HDR_SHORT_INDEX(h)\t\t\t((h) & GENMASK_ULL(2, 0))\n#define SPE_HDR_EXTENDED_INDEX(h0, h1)\t\t(((h0) & GENMASK_ULL(1, 0)) << 3 | \\\n\t\t\t\t\t\t SPE_HDR_SHORT_INDEX(h1))\n\n \n#define SPE_ADDR_PKT_HDR_INDEX_INS\t\t0x0\n#define SPE_ADDR_PKT_HDR_INDEX_BRANCH\t\t0x1\n#define SPE_ADDR_PKT_HDR_INDEX_DATA_VIRT\t0x2\n#define SPE_ADDR_PKT_HDR_INDEX_DATA_PHYS\t0x3\n#define SPE_ADDR_PKT_HDR_INDEX_PREV_BRANCH\t0x4\n\n \n#define SPE_ADDR_PKT_ADDR_BYTE7_SHIFT\t\t56\n#define SPE_ADDR_PKT_ADDR_GET_BYTES_0_6(v)\t((v) & GENMASK_ULL(55, 0))\n#define SPE_ADDR_PKT_ADDR_GET_BYTE_6(v)\t\t(((v) & GENMASK_ULL(55, 48)) >> 48)\n\n#define SPE_ADDR_PKT_GET_NS(v)\t\t\t(((v) & BIT_ULL(63)) >> 63)\n#define SPE_ADDR_PKT_GET_EL(v)\t\t\t(((v) & GENMASK_ULL(62, 61)) >> 61)\n#define SPE_ADDR_PKT_GET_CH(v)\t\t\t(((v) & BIT_ULL(62)) >> 62)\n#define SPE_ADDR_PKT_GET_PAT(v)\t\t\t(((v) & GENMASK_ULL(59, 56)) >> 56)\n\n#define SPE_ADDR_PKT_EL0\t\t\t0\n#define SPE_ADDR_PKT_EL1\t\t\t1\n#define SPE_ADDR_PKT_EL2\t\t\t2\n#define SPE_ADDR_PKT_EL3\t\t\t3\n\n \n#define SPE_CTX_PKT_HDR_INDEX(h)\t\t((h) & GENMASK_ULL(1, 0))\n\n \n#define SPE_CNT_PKT_HDR_INDEX_TOTAL_LAT\t\t0x0\n#define SPE_CNT_PKT_HDR_INDEX_ISSUE_LAT\t\t0x1\n#define SPE_CNT_PKT_HDR_INDEX_TRANS_LAT\t\t0x2\n\n \nenum arm_spe_events {\n\tEV_EXCEPTION_GEN\t= 0,\n\tEV_RETIRED\t\t= 1,\n\tEV_L1D_ACCESS\t\t= 2,\n\tEV_L1D_REFILL\t\t= 3,\n\tEV_TLB_ACCESS\t\t= 4,\n\tEV_TLB_WALK\t\t= 5,\n\tEV_NOT_TAKEN\t\t= 6,\n\tEV_MISPRED\t\t= 7,\n\tEV_LLC_ACCESS\t\t= 8,\n\tEV_LLC_MISS\t\t= 9,\n\tEV_REMOTE_ACCESS\t= 10,\n\tEV_ALIGNMENT\t\t= 11,\n\tEV_PARTIAL_PREDICATE\t= 17,\n\tEV_EMPTY_PREDICATE\t= 18,\n};\n\n \n#define SPE_OP_PKT_HDR_CLASS(h)\t\t\t((h) & GENMASK_ULL(1, 0))\n#define SPE_OP_PKT_HDR_CLASS_OTHER\t\t0x0\n#define SPE_OP_PKT_HDR_CLASS_LD_ST_ATOMIC\t0x1\n#define SPE_OP_PKT_HDR_CLASS_BR_ERET\t\t0x2\n\n#define SPE_OP_PKT_IS_OTHER_SVE_OP(v)\t\t(((v) & (BIT(7) | BIT(3) | BIT(0))) == 0x8)\n\n#define SPE_OP_PKT_COND\t\t\t\tBIT(0)\n\n#define SPE_OP_PKT_LDST_SUBCLASS_GET(v)\t\t((v) & GENMASK_ULL(7, 1))\n#define SPE_OP_PKT_LDST_SUBCLASS_GP_REG\t\t0x0\n#define SPE_OP_PKT_LDST_SUBCLASS_SIMD_FP\t0x4\n#define SPE_OP_PKT_LDST_SUBCLASS_UNSPEC_REG\t0x10\n#define SPE_OP_PKT_LDST_SUBCLASS_NV_SYSREG\t0x30\n#define SPE_OP_PKT_LDST_SUBCLASS_MTE_TAG\t0x14\n#define SPE_OP_PKT_LDST_SUBCLASS_MEMCPY\t\t0x20\n#define SPE_OP_PKT_LDST_SUBCLASS_MEMSET\t\t0x25\n\n#define SPE_OP_PKT_IS_LDST_ATOMIC(v)\t\t(((v) & (GENMASK_ULL(7, 5) | BIT(1))) == 0x2)\n\n#define SPE_OP_PKT_AR\t\t\t\tBIT(4)\n#define SPE_OP_PKT_EXCL\t\t\t\tBIT(3)\n#define SPE_OP_PKT_AT\t\t\t\tBIT(2)\n#define SPE_OP_PKT_ST\t\t\t\tBIT(0)\n\n#define SPE_OP_PKT_IS_LDST_SVE(v)\t\t(((v) & (BIT(3) | BIT(1))) == 0x8)\n\n#define SPE_OP_PKT_SVE_SG\t\t\tBIT(7)\n \n#define SPE_OP_PKG_SVE_EVL(v)\t\t\t(32 << (((v) & GENMASK_ULL(6, 4)) >> 4))\n#define SPE_OP_PKT_SVE_PRED\t\t\tBIT(2)\n#define SPE_OP_PKT_SVE_FP\t\t\tBIT(1)\n\n#define SPE_OP_PKT_IS_INDIRECT_BRANCH(v)\t(((v) & GENMASK_ULL(7, 1)) == 0x2)\n\nconst char *arm_spe_pkt_name(enum arm_spe_pkt_type);\n\nint arm_spe_get_packet(const unsigned char *buf, size_t len,\n\t\t       struct arm_spe_pkt *packet);\n\nint arm_spe_pkt_desc(const struct arm_spe_pkt *packet, char *buf, size_t len);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}