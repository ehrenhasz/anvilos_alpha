{
  "module_name": "symbol_fprintf.c",
  "hash_id": "378094256f4044b5ec1983e7d958032a0f66c8f7b15bcb5967e221f45443f4e6",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/util/symbol_fprintf.c",
  "human_readable_source": "\n#include <elf.h>\n#include <inttypes.h>\n#include <stdio.h>\n\n#include \"dso.h\"\n#include \"map.h\"\n#include \"symbol.h\"\n\nsize_t symbol__fprintf(struct symbol *sym, FILE *fp)\n{\n\treturn fprintf(fp, \" %\" PRIx64 \"-%\" PRIx64 \" %c %s\\n\",\n\t\t       sym->start, sym->end,\n\t\t       sym->binding == STB_GLOBAL ? 'g' :\n\t\t       sym->binding == STB_LOCAL  ? 'l' : 'w',\n\t\t       sym->name);\n}\n\nsize_t __symbol__fprintf_symname_offs(const struct symbol *sym,\n\t\t\t\t      const struct addr_location *al,\n\t\t\t\t      bool unknown_as_addr,\n\t\t\t\t      bool print_offsets, FILE *fp)\n{\n\tunsigned long offset;\n\tsize_t length;\n\n\tif (sym) {\n\t\tlength = fprintf(fp, \"%s\", sym->name);\n\t\tif (al && print_offsets) {\n\t\t\tif (al->addr < sym->end)\n\t\t\t\toffset = al->addr - sym->start;\n\t\t\telse\n\t\t\t\toffset = al->addr - map__start(al->map) - sym->start;\n\t\t\tlength += fprintf(fp, \"+0x%lx\", offset);\n\t\t}\n\t\treturn length;\n\t} else if (al && unknown_as_addr)\n\t\treturn fprintf(fp, \"[%#\" PRIx64 \"]\", al->addr);\n\telse\n\t\treturn fprintf(fp, \"[unknown]\");\n}\n\nsize_t symbol__fprintf_symname_offs(const struct symbol *sym,\n\t\t\t\t    const struct addr_location *al,\n\t\t\t\t    FILE *fp)\n{\n\treturn __symbol__fprintf_symname_offs(sym, al, false, true, fp);\n}\n\nsize_t __symbol__fprintf_symname(const struct symbol *sym,\n\t\t\t\t const struct addr_location *al,\n\t\t\t\t bool unknown_as_addr, FILE *fp)\n{\n\treturn __symbol__fprintf_symname_offs(sym, al, unknown_as_addr, false, fp);\n}\n\nsize_t symbol__fprintf_symname(const struct symbol *sym, FILE *fp)\n{\n\treturn __symbol__fprintf_symname_offs(sym, NULL, false, false, fp);\n}\n\nsize_t dso__fprintf_symbols_by_name(struct dso *dso,\n\t\t\t\t    FILE *fp)\n{\n\tsize_t ret = 0;\n\n\tfor (size_t i = 0; i < dso->symbol_names_len; i++) {\n\t\tstruct symbol *pos = dso->symbol_names[i];\n\n\t\tret += fprintf(fp, \"%s\\n\", pos->name);\n\t}\n\treturn ret;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}