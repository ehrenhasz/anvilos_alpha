{
  "module_name": "branch.h",
  "hash_id": "e5deee6fda5729ed06903b641dc10f8a8b5df9f378cb94ca5c1f1856a64e73b5",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/util/branch.h",
  "human_readable_source": "#ifndef _PERF_BRANCH_H\n#define _PERF_BRANCH_H 1\n \n#include <stdio.h>\n#include <linux/perf_event.h>\n#include <linux/types.h>\n#include \"util/map_symbol.h\"\n#include \"util/sample.h\"\n\nstruct branch_flags {\n\tunion {\n\t\tu64 value;\n\t\tstruct {\n\t\t\tu64 mispred:1;\n\t\t\tu64 predicted:1;\n\t\t\tu64 in_tx:1;\n\t\t\tu64 abort:1;\n\t\t\tu64 cycles:16;\n\t\t\tu64 type:4;\n\t\t\tu64 spec:2;\n\t\t\tu64 new_type:4;\n\t\t\tu64 priv:3;\n\t\t\tu64 reserved:31;\n\t\t};\n\t};\n};\n\nstruct branch_info {\n\tstruct addr_map_symbol from;\n\tstruct addr_map_symbol to;\n\tstruct branch_flags    flags;\n\tchar\t\t       *srcline_from;\n\tchar\t\t       *srcline_to;\n};\n\nstruct branch_entry {\n\tu64\t\t\tfrom;\n\tu64\t\t\tto;\n\tstruct branch_flags\tflags;\n};\n\nstruct branch_stack {\n\tu64\t\t\tnr;\n\tu64\t\t\thw_idx;\n\tstruct branch_entry\tentries[];\n};\n\n \nstatic inline struct branch_entry *perf_sample__branch_entries(struct perf_sample *sample)\n{\n\tu64 *entry = (u64 *)sample->branch_stack;\n\n\tentry++;\n\tif (sample->no_hw_idx)\n\t\treturn (struct branch_entry *)entry;\n\treturn (struct branch_entry *)(++entry);\n}\n\nstruct branch_type_stat {\n\tbool\tbranch_to;\n\tu64\tcounts[PERF_BR_MAX];\n\tu64\tnew_counts[PERF_BR_NEW_MAX];\n\tu64\tcond_fwd;\n\tu64\tcond_bwd;\n\tu64\tcross_4k;\n\tu64\tcross_2m;\n};\n\nvoid branch_type_count(struct branch_type_stat *st, struct branch_flags *flags,\n\t\t       u64 from, u64 to);\n\nconst char *branch_type_name(int type);\nconst char *branch_new_type_name(int new_type);\nconst char *get_branch_type(struct branch_entry *e);\nvoid branch_type_stat_display(FILE *fp, struct branch_type_stat *st);\nint branch_type_str(struct branch_type_stat *st, char *bf, int bfsize);\n\nconst char *branch_spec_desc(int spec);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}