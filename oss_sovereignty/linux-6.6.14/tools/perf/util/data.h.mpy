{
  "module_name": "data.h",
  "hash_id": "37535b58f8f9c4462c2e4a560593f45266ba6aa66823217cf35f0c77ace10a5f",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/util/data.h",
  "human_readable_source": " \n#ifndef __PERF_DATA_H\n#define __PERF_DATA_H\n\n#include <stdio.h>\n#include <stdbool.h>\n#include <unistd.h>\n#include <linux/types.h>\n\nenum perf_data_mode {\n\tPERF_DATA_MODE_WRITE,\n\tPERF_DATA_MODE_READ,\n};\n\nenum perf_dir_version {\n\tPERF_DIR_SINGLE_FILE\t= 0,\n\tPERF_DIR_VERSION\t= 1,\n};\n\nstruct perf_data_file {\n\tchar\t\t*path;\n\tunion {\n\t\tint\t fd;\n\t\tFILE\t*fptr;\n\t};\n\tunsigned long\t size;\n};\n\nstruct perf_data {\n\tconst char\t\t*path;\n\tstruct perf_data_file\t file;\n\tbool\t\t\t is_pipe;\n\tbool\t\t\t is_dir;\n\tbool\t\t\t force;\n\tbool\t\t\t use_stdio;\n\tbool\t\t\t in_place_update;\n\tenum perf_data_mode\t mode;\n\n\tstruct {\n\t\tu64\t\t\t version;\n\t\tstruct perf_data_file\t*files;\n\t\tint\t\t\t nr;\n\t} dir;\n};\n\nstatic inline bool perf_data__is_read(struct perf_data *data)\n{\n\treturn data->mode == PERF_DATA_MODE_READ;\n}\n\nstatic inline bool perf_data__is_write(struct perf_data *data)\n{\n\treturn data->mode == PERF_DATA_MODE_WRITE;\n}\n\nstatic inline int perf_data__is_pipe(struct perf_data *data)\n{\n\treturn data->is_pipe;\n}\n\nstatic inline bool perf_data__is_dir(struct perf_data *data)\n{\n\treturn data->is_dir;\n}\n\nstatic inline bool perf_data__is_single_file(struct perf_data *data)\n{\n\treturn data->dir.version == PERF_DIR_SINGLE_FILE;\n}\n\nstatic inline int perf_data__fd(struct perf_data *data)\n{\n\tif (data->use_stdio)\n\t\treturn fileno(data->file.fptr);\n\n\treturn data->file.fd;\n}\n\nint perf_data__open(struct perf_data *data);\nvoid perf_data__close(struct perf_data *data);\nssize_t perf_data__read(struct perf_data *data, void *buf, size_t size);\nssize_t perf_data__write(struct perf_data *data,\n\t\t\t      void *buf, size_t size);\nssize_t perf_data_file__write(struct perf_data_file *file,\n\t\t\t      void *buf, size_t size);\n \nint perf_data__switch(struct perf_data *data,\n\t\t\t   const char *postfix,\n\t\t\t   size_t pos, bool at_exit, char **new_filepath);\n\nint perf_data__create_dir(struct perf_data *data, int nr);\nint perf_data__open_dir(struct perf_data *data);\nvoid perf_data__close_dir(struct perf_data *data);\nint perf_data__update_dir(struct perf_data *data);\nunsigned long perf_data__size(struct perf_data *data);\nint perf_data__make_kcore_dir(struct perf_data *data, char *buf, size_t buf_sz);\nbool has_kcore_dir(const char *path);\nchar *perf_data__kallsyms_name(struct perf_data *data);\nchar *perf_data__guest_kallsyms_name(struct perf_data *data, pid_t machine_pid);\nbool is_perf_data(const char *path);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}