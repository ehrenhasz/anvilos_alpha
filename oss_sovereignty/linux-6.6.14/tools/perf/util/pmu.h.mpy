{
  "module_name": "pmu.h",
  "hash_id": "977696f969b3bd5e3b45cca245e45776e089a01a520ceb8c717a7db4140f1d49",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/util/pmu.h",
  "human_readable_source": " \n#ifndef __PMU_H\n#define __PMU_H\n\n#include <linux/bitmap.h>\n#include <linux/compiler.h>\n#include <linux/perf_event.h>\n#include <linux/list.h>\n#include <stdbool.h>\n#include <stdio.h>\n#include \"parse-events.h\"\n#include \"pmu-events/pmu-events.h\"\n\nstruct evsel_config_term;\nstruct perf_cpu_map;\nstruct print_callbacks;\n\nenum {\n\tPERF_PMU_FORMAT_VALUE_CONFIG,\n\tPERF_PMU_FORMAT_VALUE_CONFIG1,\n\tPERF_PMU_FORMAT_VALUE_CONFIG2,\n\tPERF_PMU_FORMAT_VALUE_CONFIG3,\n\tPERF_PMU_FORMAT_VALUE_CONFIG_END,\n};\n\n#define PERF_PMU_FORMAT_BITS 64\n#define MAX_PMU_NAME_LEN 128\n\nstruct perf_event_attr;\n\nstruct perf_pmu_caps {\n\tchar *name;\n\tchar *value;\n\tstruct list_head list;\n};\n\n \nstruct perf_pmu {\n\t \n\tconst char *name;\n\t \n\tchar *alias_name;\n\t \n\tconst char *id;\n\t \n\t__u32 type;\n\t \n\tbool selectable;\n\t \n\tbool is_core;\n\t \n\tbool is_uncore;\n\t \n\tbool auxtrace;\n\t \n\tbool formats_checked;\n\t \n\tbool config_masks_present;\n\t \n\tbool config_masks_computed;\n\t \n\tint max_precise;\n\t \n\tstruct perf_event_attr *default_config;\n\t \n\tstruct perf_cpu_map *cpus;\n\t \n\tstruct list_head format;\n\t \n\tstruct list_head aliases;\n\t \n\tconst struct pmu_events_table *events_table;\n\t \n\tuint32_t sysfs_aliases;\n\t \n\tuint32_t loaded_json_aliases;\n\t \n\tbool sysfs_aliases_loaded;\n\t \n\tbool cpu_aliases_added;\n\t \n\tbool caps_initialized;\n\t \n\tu32 nr_caps;\n\t \n\tstruct list_head caps;\n\t \n\tstruct list_head list;\n\n\t \n\t__u64 config_masks[PERF_PMU_FORMAT_VALUE_CONFIG_END];\n\n\t \n\tstruct {\n\t\t \n\t\tbool exclude_guest;\n\t} missing_features;\n};\n\n \nextern struct perf_pmu perf_pmu__fake;\n\nstruct perf_pmu_info {\n\tconst char *unit;\n\tdouble scale;\n\tbool per_pkg;\n\tbool snapshot;\n};\n\nstruct pmu_event_info {\n\tconst struct perf_pmu *pmu;\n\tconst char *name;\n\tconst char* alias;\n\tconst char *scale_unit;\n\tconst char *desc;\n\tconst char *long_desc;\n\tconst char *encoding_desc;\n\tconst char *topic;\n\tconst char *pmu_name;\n\tconst char *str;\n\tbool deprecated;\n};\n\ntypedef int (*pmu_event_callback)(void *state, struct pmu_event_info *info);\n\nvoid pmu_add_sys_aliases(struct perf_pmu *pmu);\nint perf_pmu__config(struct perf_pmu *pmu, struct perf_event_attr *attr,\n\t\t     struct list_head *head_terms,\n\t\t     struct parse_events_error *error);\nint perf_pmu__config_terms(struct perf_pmu *pmu,\n\t\t\t   struct perf_event_attr *attr,\n\t\t\t   struct list_head *head_terms,\n\t\t\t   bool zero, struct parse_events_error *error);\n__u64 perf_pmu__format_bits(struct perf_pmu *pmu, const char *name);\nint perf_pmu__format_type(struct perf_pmu *pmu, const char *name);\nint perf_pmu__check_alias(struct perf_pmu *pmu, struct list_head *head_terms,\n\t\t\t  struct perf_pmu_info *info, struct parse_events_error *err);\nint perf_pmu__find_event(struct perf_pmu *pmu, const char *event, void *state, pmu_event_callback cb);\n\nint perf_pmu__format_parse(struct perf_pmu *pmu, int dirfd, bool eager_load);\nvoid perf_pmu_format__set_value(void *format, int config, unsigned long *bits);\nbool perf_pmu__has_format(const struct perf_pmu *pmu, const char *name);\n\nbool is_pmu_core(const char *name);\nbool perf_pmu__supports_legacy_cache(const struct perf_pmu *pmu);\nbool perf_pmu__auto_merge_stats(const struct perf_pmu *pmu);\nbool perf_pmu__have_event(struct perf_pmu *pmu, const char *name);\nsize_t perf_pmu__num_events(struct perf_pmu *pmu);\nint perf_pmu__for_each_event(struct perf_pmu *pmu, bool skip_duplicate_pmus,\n\t\t\t     void *state, pmu_event_callback cb);\nbool pmu__name_match(const struct perf_pmu *pmu, const char *pmu_name);\n\n \nbool perf_pmu__is_software(const struct perf_pmu *pmu);\n\nFILE *perf_pmu__open_file(struct perf_pmu *pmu, const char *name);\nFILE *perf_pmu__open_file_at(struct perf_pmu *pmu, int dirfd, const char *name);\n\nint perf_pmu__scan_file(struct perf_pmu *pmu, const char *name, const char *fmt, ...) __scanf(3, 4);\nint perf_pmu__scan_file_at(struct perf_pmu *pmu, int dirfd, const char *name,\n\t\t\t   const char *fmt, ...) __scanf(4, 5);\n\nbool perf_pmu__file_exists(struct perf_pmu *pmu, const char *name);\n\nint perf_pmu__test(void);\n\nstruct perf_event_attr *perf_pmu__get_default_config(struct perf_pmu *pmu);\nvoid pmu_add_cpu_aliases_table(struct perf_pmu *pmu,\n\t\t\t       const struct pmu_events_table *table);\n\nchar *perf_pmu__getcpuid(struct perf_pmu *pmu);\nconst struct pmu_events_table *pmu_events_table__find(void);\nconst struct pmu_metrics_table *pmu_metrics_table__find(void);\n\nint perf_pmu__convert_scale(const char *scale, char **end, double *sval);\n\nint perf_pmu__caps_parse(struct perf_pmu *pmu);\n\nvoid perf_pmu__warn_invalid_config(struct perf_pmu *pmu, __u64 config,\n\t\t\t\t   const char *name, int config_num,\n\t\t\t\t   const char *config_name);\nvoid perf_pmu__warn_invalid_formats(struct perf_pmu *pmu);\n\nint perf_pmu__match(const char *pattern, const char *name, const char *tok);\n\nconst char *pmu_find_real_name(const char *name);\nconst char *pmu_find_alias_name(const char *name);\ndouble perf_pmu__cpu_slots_per_cycle(void);\nint perf_pmu__event_source_devices_scnprintf(char *pathname, size_t size);\nint perf_pmu__pathname_scnprintf(char *buf, size_t size,\n\t\t\t\t const char *pmu_name, const char *filename);\nint perf_pmu__event_source_devices_fd(void);\nint perf_pmu__pathname_fd(int dirfd, const char *pmu_name, const char *filename, int flags);\n\nstruct perf_pmu *perf_pmu__lookup(struct list_head *pmus, int dirfd, const char *lookup_name);\nstruct perf_pmu *perf_pmu__create_placeholder_core_pmu(struct list_head *core_pmus);\nvoid perf_pmu__delete(struct perf_pmu *pmu);\nstruct perf_pmu *pmu__find_core_pmu(void);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}