{
  "module_name": "syscall-counts.py",
  "hash_id": "0d00eaed68f6e24a764a3e63f850a3785588644103cb6b6b7087fdc255426e24",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/scripts/python/syscall-counts.py",
  "human_readable_source": "# system call counts\n# (c) 2010, Tom Zanussi <tzanussi@gmail.com>\n# Licensed under the terms of the GNU GPL License version 2\n#\n# Displays system-wide system call totals, broken down by syscall.\n# If a [comm] arg is specified, only syscalls called by [comm] are displayed.\n\nfrom __future__ import print_function\n\nimport os\nimport sys\n\nsys.path.append(os.environ['PERF_EXEC_PATH'] + \\\n\t'/scripts/python/Perf-Trace-Util/lib/Perf/Trace')\n\nfrom perf_trace_context import *\nfrom Core import *\nfrom Util import syscall_name\n\nusage = \"perf script -s syscall-counts.py [comm]\\n\";\n\nfor_comm = None\n\nif len(sys.argv) > 2:\n\tsys.exit(usage)\n\nif len(sys.argv) > 1:\n\tfor_comm = sys.argv[1]\n\nsyscalls = autodict()\n\ndef trace_begin():\n\tprint(\"Press control+C to stop and show the summary\")\n\ndef trace_end():\n\tprint_syscall_totals()\n\ndef raw_syscalls__sys_enter(event_name, context, common_cpu,\n\t\tcommon_secs, common_nsecs, common_pid, common_comm,\n\t\tcommon_callchain, id, args):\n\tif for_comm is not None:\n\t\tif common_comm != for_comm:\n\t\t\treturn\n\ttry:\n\t\tsyscalls[id] += 1\n\texcept TypeError:\n\t\tsyscalls[id] = 1\n\ndef syscalls__sys_enter(event_name, context, common_cpu,\n\t\tcommon_secs, common_nsecs, common_pid, common_comm, id, args):\n\traw_syscalls__sys_enter(**locals())\n\ndef print_syscall_totals():\n\tif for_comm is not None:\n\t\tprint(\"\\nsyscall events for %s:\\n\" % (for_comm))\n\telse:\n\t\tprint(\"\\nsyscall events:\\n\")\n\n\tprint(\"%-40s  %10s\" % (\"event\", \"count\"))\n\tprint(\"%-40s  %10s\" % (\"----------------------------------------\",\n\t\t\t\t\"-----------\"))\n\n\tfor id, val in sorted(syscalls.items(),\n\t\t\tkey = lambda kv: (kv[1], kv[0]), reverse = True):\n\t\tprint(\"%-40s  %10d\" % (syscall_name(id), val))\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}