{
  "module_name": "check-perf-trace.py",
  "hash_id": "cae108f984a02e8655c00031683ee98790ae0f157b53209396d4f8d546030586",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/scripts/python/check-perf-trace.py",
  "human_readable_source": "# perf script event handlers, generated by perf script -g python\n# (c) 2010, Tom Zanussi <tzanussi@gmail.com>\n# Licensed under the terms of the GNU GPL License version 2\n#\n# This script tests basic functionality such as flag and symbol\n# strings, common_xxx() calls back into perf, begin, end, unhandled\n# events, etc.  Basically, if this script runs successfully and\n# displays expected results, Python scripting support should be ok.\n\nfrom __future__ import print_function\n\nimport os\nimport sys\n\nsys.path.append(os.environ['PERF_EXEC_PATH'] + \\\n\t'/scripts/python/Perf-Trace-Util/lib/Perf/Trace')\n\nfrom Core import *\nfrom perf_trace_context import *\n\nunhandled = autodict()\n\ndef trace_begin():\n\tprint(\"trace_begin\")\n\tpass\n\ndef trace_end():\n\tprint_unhandled()\n\ndef irq__softirq_entry(event_name, context, common_cpu,\n\t\t       common_secs, common_nsecs, common_pid, common_comm,\n\t\t       common_callchain, vec):\n\tprint_header(event_name, common_cpu, common_secs, common_nsecs,\n\t\tcommon_pid, common_comm)\n\n\tprint_uncommon(context)\n\n\tprint(\"vec=%s\" % (symbol_str(\"irq__softirq_entry\", \"vec\", vec)))\n\ndef kmem__kmalloc(event_name, context, common_cpu,\n\t\t  common_secs, common_nsecs, common_pid, common_comm,\n\t\t  common_callchain, call_site, ptr, bytes_req, bytes_alloc,\n\t\t  gfp_flags):\n\tprint_header(event_name, common_cpu, common_secs, common_nsecs,\n\t\tcommon_pid, common_comm)\n\n\tprint_uncommon(context)\n\n\tprint(\"call_site=%u, ptr=%u, bytes_req=%u, \"\n\t\t\"bytes_alloc=%u, gfp_flags=%s\" %\n\t\t(call_site, ptr, bytes_req, bytes_alloc,\n\t\tflag_str(\"kmem__kmalloc\", \"gfp_flags\", gfp_flags)))\n\ndef trace_unhandled(event_name, context, event_fields_dict):\n\ttry:\n\t\tunhandled[event_name] += 1\n\texcept TypeError:\n\t\tunhandled[event_name] = 1\n\ndef print_header(event_name, cpu, secs, nsecs, pid, comm):\n\tprint(\"%-20s %5u %05u.%09u %8u %-20s \" %\n\t\t(event_name, cpu, secs, nsecs, pid, comm),\n\t\tend=' ')\n\n# print trace fields not included in handler args\ndef print_uncommon(context):\n\tprint(\"common_preempt_count=%d, common_flags=%s, \"\n\t\t\"common_lock_depth=%d, \" %\n\t\t(common_pc(context), trace_flag_str(common_flags(context)),\n\t\tcommon_lock_depth(context)))\n\ndef print_unhandled():\n\tkeys = unhandled.keys()\n\tif not keys:\n\t\treturn\n\n\tprint(\"\\nunhandled events:\\n\")\n\n\tprint(\"%-40s  %10s\" % (\"event\", \"count\"))\n\tprint(\"%-40s  %10s\" % (\"----------------------------------------\",\n\t\t\t\t\"-----------\"))\n\n\tfor event_name in keys:\n\t\tprint(\"%-40s  %10d\\n\" % (event_name, unhandled[event_name]))\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}