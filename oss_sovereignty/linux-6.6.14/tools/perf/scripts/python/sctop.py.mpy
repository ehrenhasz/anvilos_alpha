{
  "module_name": "sctop.py",
  "hash_id": "ed93c3b4a45dfe252bffe548def9b45c0e325088bad379c0ce1a3ebeba344b1b",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/scripts/python/sctop.py",
  "human_readable_source": "# system call top\n# (c) 2010, Tom Zanussi <tzanussi@gmail.com>\n# Licensed under the terms of the GNU GPL License version 2\n#\n# Periodically displays system-wide system call totals, broken down by\n# syscall.  If a [comm] arg is specified, only syscalls called by\n# [comm] are displayed. If an [interval] arg is specified, the display\n# will be refreshed every [interval] seconds.  The default interval is\n# 3 seconds.\n\nfrom __future__ import print_function\n\nimport os, sys, time\n\ntry:\n\timport thread\nexcept ImportError:\n\timport _thread as thread\n\nsys.path.append(os.environ['PERF_EXEC_PATH'] + \\\n\t'/scripts/python/Perf-Trace-Util/lib/Perf/Trace')\n\nfrom perf_trace_context import *\nfrom Core import *\nfrom Util import *\n\nusage = \"perf script -s sctop.py [comm] [interval]\\n\";\n\nfor_comm = None\ndefault_interval = 3\ninterval = default_interval\n\nif len(sys.argv) > 3:\n\tsys.exit(usage)\n\nif len(sys.argv) > 2:\n\tfor_comm = sys.argv[1]\n\tinterval = int(sys.argv[2])\nelif len(sys.argv) > 1:\n\ttry:\n\t\tinterval = int(sys.argv[1])\n\texcept ValueError:\n\t\tfor_comm = sys.argv[1]\n\t\tinterval = default_interval\n\nsyscalls = autodict()\n\ndef trace_begin():\n\tthread.start_new_thread(print_syscall_totals, (interval,))\n\tpass\n\ndef raw_syscalls__sys_enter(event_name, context, common_cpu,\n\tcommon_secs, common_nsecs, common_pid, common_comm,\n\tcommon_callchain, id, args):\n\tif for_comm is not None:\n\t\tif common_comm != for_comm:\n\t\t\treturn\n\ttry:\n\t\tsyscalls[id] += 1\n\texcept TypeError:\n\t\tsyscalls[id] = 1\n\ndef syscalls__sys_enter(event_name, context, common_cpu,\n\tcommon_secs, common_nsecs, common_pid, common_comm,\n\tid, args):\n\traw_syscalls__sys_enter(**locals())\n\ndef print_syscall_totals(interval):\n\twhile 1:\n\t\tclear_term()\n\t\tif for_comm is not None:\n\t\t\tprint(\"\\nsyscall events for %s:\\n\" % (for_comm))\n\t\telse:\n\t\t\tprint(\"\\nsyscall events:\\n\")\n\n\t\tprint(\"%-40s  %10s\" % (\"event\", \"count\"))\n\t\tprint(\"%-40s  %10s\" %\n\t\t\t(\"----------------------------------------\",\n\t\t\t\"----------\"))\n\n\t\tfor id, val in sorted(syscalls.items(),\n\t\t\t\tkey = lambda kv: (kv[1], kv[0]),\n\t\t\t\treverse = True):\n\t\t\ttry:\n\t\t\t\tprint(\"%-40s  %10d\" % (syscall_name(id), val))\n\t\t\texcept TypeError:\n\t\t\t\tpass\n\t\tsyscalls.clear()\n\t\ttime.sleep(interval)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}