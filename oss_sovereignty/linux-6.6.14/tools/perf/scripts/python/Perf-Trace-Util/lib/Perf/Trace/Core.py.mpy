{
  "module_name": "Core.py",
  "hash_id": "2aa9b7f513835ab10a80b4de13e47c3194a5b3cbca6ed3c8c89750fd9335af84",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/scripts/python/Perf-Trace-Util/lib/Perf/Trace/Core.py",
  "human_readable_source": "# Core.py - Python extension for perf script, core functions\n#\n# Copyright (C) 2010 by Tom Zanussi <tzanussi@gmail.com>\n#\n# This software may be distributed under the terms of the GNU General\n# Public License (\"GPL\") version 2 as published by the Free Software\n# Foundation.\n\nfrom collections import defaultdict\n\ndef autodict():\n    return defaultdict(autodict)\n\nflag_fields = autodict()\nsymbolic_fields = autodict()\n\ndef define_flag_field(event_name, field_name, delim):\n    flag_fields[event_name][field_name]['delim'] = delim\n\ndef define_flag_value(event_name, field_name, value, field_str):\n    flag_fields[event_name][field_name]['values'][value] = field_str\n\ndef define_symbolic_field(event_name, field_name):\n    # nothing to do, really\n    pass\n\ndef define_symbolic_value(event_name, field_name, value, field_str):\n    symbolic_fields[event_name][field_name]['values'][value] = field_str\n\ndef flag_str(event_name, field_name, value):\n    string = \"\"\n\n    if flag_fields[event_name][field_name]:\n        print_delim = 0\n        for idx in sorted(flag_fields[event_name][field_name]['values']):\n            if not value and not idx:\n                string += flag_fields[event_name][field_name]['values'][idx]\n                break\n            if idx and (value & idx) == idx:\n                if print_delim and flag_fields[event_name][field_name]['delim']:\n                    string += \" \" + flag_fields[event_name][field_name]['delim'] + \" \"\n                string += flag_fields[event_name][field_name]['values'][idx]\n                print_delim = 1\n                value &= ~idx\n\n    return string\n\ndef symbol_str(event_name, field_name, value):\n    string = \"\"\n\n    if symbolic_fields[event_name][field_name]:\n        for idx in sorted(symbolic_fields[event_name][field_name]['values']):\n            if not value and not idx:\n                string = symbolic_fields[event_name][field_name]['values'][idx]\n                break\n            if (value == idx):\n                string = symbolic_fields[event_name][field_name]['values'][idx]\n                break\n\n    return string\n\ntrace_flags = { 0x00: \"NONE\", \\\n                    0x01: \"IRQS_OFF\", \\\n                    0x02: \"IRQS_NOSUPPORT\", \\\n                    0x04: \"NEED_RESCHED\", \\\n                    0x08: \"HARDIRQ\", \\\n                    0x10: \"SOFTIRQ\" }\n\ndef trace_flag_str(value):\n    string = \"\"\n    print_delim = 0\n\n    for idx in trace_flags:\n        if not value and not idx:\n            string += \"NONE\"\n            break\n\n        if idx and (value & idx) == idx:\n            if print_delim:\n                string += \" | \";\n            string += trace_flags[idx]\n            print_delim = 1\n            value &= ~idx\n\n    return string\n\n\ndef taskState(state):\n\tstates = {\n\t\t0 : \"R\",\n\t\t1 : \"S\",\n\t\t2 : \"D\",\n\t\t64: \"DEAD\"\n\t}\n\n\tif state not in states:\n\t\treturn \"Unknown\"\n\n\treturn states[state]\n\n\nclass EventHeaders:\n\tdef __init__(self, common_cpu, common_secs, common_nsecs,\n\t\t     common_pid, common_comm, common_callchain):\n\t\tself.cpu = common_cpu\n\t\tself.secs = common_secs\n\t\tself.nsecs = common_nsecs\n\t\tself.pid = common_pid\n\t\tself.comm = common_comm\n\t\tself.callchain = common_callchain\n\n\tdef ts(self):\n\t\treturn (self.secs * (10 ** 9)) + self.nsecs\n\n\tdef ts_format(self):\n\t\treturn \"%d.%d\" % (self.secs, int(self.nsecs / 1000))\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}