{
  "module_name": "x86_msr.sh",
  "hash_id": "8dbc189d44fcd66c8c2403887a9330922b2ebd2772e6a00cbcb4993af5fa0f32",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/trace/beauty/tracepoints/x86_msr.sh",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: LGPL-2.1\n\nif [ $# -ne 1 ] ; then\n\tarch_x86_header_dir=tools/arch/x86/include/asm/\nelse\n\tarch_x86_header_dir=$1\nfi\n\nx86_msr_index=${arch_x86_header_dir}/msr-index.h\n\n# Support all later, with some hash table, for now chop off\n# Just the ones starting with 0x00000 so as to have a simple\n# array.\n\nprintf \"static const char * const x86_MSRs[] = {\\n\"\nregex='^[[:space:]]*#[[:space:]]*define[[:space:]]+MSR_([[:alnum:]][[:alnum:]_]+)[[:space:]]+(0x00000[[:xdigit:]]+)[[:space:]]*.*'\ngrep -E $regex ${x86_msr_index} | grep -E -v 'MSR_(ATOM|P[46]|IA32_(TSC_DEADLINE|UCODE_REV)|IDT_FCR4)' | \\\n\tsed -r \"s/$regex/\\2 \\1/g\" | sort -n | \\\n\txargs printf \"\\t[%s] = \\\"%s\\\",\\n\"\nprintf \"};\\n\\n\"\n\n# Remove MSR_K6_WHCR, clashes with MSR_LSTAR\nregex='^[[:space:]]*#[[:space:]]*define[[:space:]]+MSR_([[:alnum:]][[:alnum:]_]+)[[:space:]]+(0xc0000[[:xdigit:]]+)[[:space:]]*.*'\nprintf \"#define x86_64_specific_MSRs_offset \"\ngrep -E $regex ${x86_msr_index} | sed -r \"s/$regex/\\2/g\" | sort -n | head -1\nprintf \"static const char * const x86_64_specific_MSRs[] = {\\n\"\ngrep -E $regex ${x86_msr_index} | \\\n\tsed -r \"s/$regex/\\2 \\1/g\" | grep -E -vw 'K6_WHCR' | sort -n | \\\n\txargs printf \"\\t[%s - x86_64_specific_MSRs_offset] = \\\"%s\\\",\\n\"\nprintf \"};\\n\\n\"\n\nregex='^[[:space:]]*#[[:space:]]*define[[:space:]]+MSR_([[:alnum:]][[:alnum:]_]+)[[:space:]]+(0xc0010[[:xdigit:]]+)[[:space:]]*.*'\nprintf \"#define x86_AMD_V_KVM_MSRs_offset \"\ngrep -E $regex ${x86_msr_index} | sed -r \"s/$regex/\\2/g\" | sort -n | head -1\nprintf \"static const char * const x86_AMD_V_KVM_MSRs[] = {\\n\"\ngrep -E $regex ${x86_msr_index} | \\\n\tsed -r \"s/$regex/\\2 \\1/g\" | sort -n | \\\n\txargs printf \"\\t[%s - x86_AMD_V_KVM_MSRs_offset] = \\\"%s\\\",\\n\"\nprintf \"};\\n\"\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}