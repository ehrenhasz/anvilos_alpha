{
  "module_name": "perf_event_open.c",
  "hash_id": "99a559f73d1b81202539db9b0861681eced45a1e0ade91b59d928a23a2cd4826",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/trace/beauty/perf_event_open.c",
  "human_readable_source": "\n#ifndef PERF_FLAG_FD_NO_GROUP\n# define PERF_FLAG_FD_NO_GROUP\t\t(1UL << 0)\n#endif\n\n#ifndef PERF_FLAG_FD_OUTPUT\n# define PERF_FLAG_FD_OUTPUT\t\t(1UL << 1)\n#endif\n\n#ifndef PERF_FLAG_PID_CGROUP\n# define PERF_FLAG_PID_CGROUP\t\t(1UL << 2)  \n#endif\n\n#ifndef PERF_FLAG_FD_CLOEXEC\n# define PERF_FLAG_FD_CLOEXEC\t\t(1UL << 3)  \n#endif\n\nstatic size_t syscall_arg__scnprintf_perf_flags(char *bf, size_t size,\n\t\t\t\t\t\tstruct syscall_arg *arg)\n{\n\tbool show_prefix = arg->show_string_prefix;\n\tconst char *prefix = \"PERF_\";\n\tint printed = 0, flags = arg->val;\n\n\tif (flags == 0)\n\t\treturn 0;\n\n#define\tP_FLAG(n) \\\n\tif (flags & PERF_FLAG_##n) { \\\n\t\tprinted += scnprintf(bf + printed, size - printed, \"%s%s%s\", printed ? \"|\" : \"\", show_prefix ? prefix : \"\", #n); \\\n\t\tflags &= ~PERF_FLAG_##n; \\\n\t}\n\n\tP_FLAG(FD_NO_GROUP);\n\tP_FLAG(FD_OUTPUT);\n\tP_FLAG(PID_CGROUP);\n\tP_FLAG(FD_CLOEXEC);\n#undef P_FLAG\n\n\tif (flags)\n\t\tprinted += scnprintf(bf + printed, size - printed, \"%s%#x\", printed ? \"|\" : \"\", flags);\n\n\treturn printed;\n}\n\n#define SCA_PERF_FLAGS syscall_arg__scnprintf_perf_flags\n\nstruct attr_fprintf_args {\n\tsize_t size, printed;\n\tchar *bf;\n\tbool first;\n};\n\nstatic int attr__fprintf(FILE *fp __maybe_unused, const char *name, const char *val, void *priv)\n{\n\tstruct attr_fprintf_args *args = priv;\n\tsize_t printed = scnprintf(args->bf + args->printed , args->size - args->printed, \"%s%s: %s\", args->first ? \"\" : \", \", name, val);\n\n\targs->first = false;\n\targs->printed += printed;\n\treturn printed;\n}\n\nstatic size_t perf_event_attr___scnprintf(struct perf_event_attr *attr, char *bf, size_t size, bool show_zeros __maybe_unused)\n{\n\tstruct attr_fprintf_args args = {\n\t\t.printed = scnprintf(bf, size, \"{ \"),\n\t\t.size    = size,\n\t\t.first   = true,\n\t\t.bf\t = bf,\n\t};\n\n\tperf_event_attr__fprintf(stdout, attr, attr__fprintf, &args);\n\treturn args.printed + scnprintf(bf + args.printed, size - args.printed, \" }\");\n}\n\nstatic size_t syscall_arg__scnprintf_augmented_perf_event_attr(struct syscall_arg *arg, char *bf, size_t size)\n{\n\treturn perf_event_attr___scnprintf((void *)arg->augmented.args, bf, size, arg->trace->show_zeros);\n}\n\nstatic size_t syscall_arg__scnprintf_perf_event_attr(char *bf, size_t size, struct syscall_arg *arg)\n{\n\tif (arg->augmented.args)\n\t\treturn syscall_arg__scnprintf_augmented_perf_event_attr(arg, bf, size);\n\n\treturn scnprintf(bf, size, \"%#lx\", arg->val);\n}\n\n#define SCA_PERF_ATTR syscall_arg__scnprintf_perf_event_attr\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}