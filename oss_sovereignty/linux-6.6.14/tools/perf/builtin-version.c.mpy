{
  "module_name": "builtin-version.c",
  "hash_id": "5baff519dbc51cfe4a0427e98542f53ce035290e33cb83e950d1572760b1bc07",
  "original_prompt": "Ingested from linux-6.6.14/tools/perf/builtin-version.c",
  "human_readable_source": "\n#include \"builtin.h\"\n#include \"color.h\"\n#include \"util/debug.h\"\n#include \"util/header.h\"\n#include <tools/config.h>\n#include <stdbool.h>\n#include <stdio.h>\n#include <string.h>\n#include <subcmd/parse-options.h>\n\nstruct version {\n\tbool\tbuild_options;\n};\n\nstatic struct version version;\n\nstatic struct option version_options[] = {\n\tOPT_BOOLEAN(0, \"build-options\", &version.build_options,\n\t\t    \"display the build options\"),\n\tOPT_END(),\n};\n\nstatic const char * const version_usage[] = {\n\t\"perf version [<options>]\",\n\tNULL\n};\n\nstatic void on_off_print(const char *status)\n{\n\tprintf(\"[ \");\n\n\tif (!strcmp(status, \"OFF\"))\n\t\tcolor_fprintf(stdout, PERF_COLOR_RED, \"%-3s\", status);\n\telse\n\t\tcolor_fprintf(stdout, PERF_COLOR_GREEN, \"%-3s\", status);\n\n\tprintf(\" ]\");\n}\n\nstatic void status_print(const char *name, const char *macro,\n\t\t\t const char *status)\n{\n\tprintf(\"%22s: \", name);\n\ton_off_print(status);\n\tprintf(\"  # %s\\n\", macro);\n}\n\n#define STATUS(__d, __m)\t\t\t\t\\\ndo {\t\t\t\t\t\t\t\\\n\tif (IS_BUILTIN(__d))\t\t\t\t\\\n\t\tstatus_print(#__m, #__d, \"on\");\t\t\\\n\telse\t\t\t\t\t\t\\\n\t\tstatus_print(#__m, #__d, \"OFF\");\t\\\n} while (0)\n\nstatic void library_status(void)\n{\n\tSTATUS(HAVE_DWARF_SUPPORT, dwarf);\n\tSTATUS(HAVE_DWARF_GETLOCATIONS_SUPPORT, dwarf_getlocations);\n#ifndef HAVE_SYSCALL_TABLE_SUPPORT\n\tSTATUS(HAVE_LIBAUDIT_SUPPORT, libaudit);\n#endif\n\tSTATUS(HAVE_SYSCALL_TABLE_SUPPORT, syscall_table);\n\tSTATUS(HAVE_LIBBFD_SUPPORT, libbfd);\n\tSTATUS(HAVE_DEBUGINFOD_SUPPORT, debuginfod);\n\tSTATUS(HAVE_LIBELF_SUPPORT, libelf);\n\tSTATUS(HAVE_LIBNUMA_SUPPORT, libnuma);\n\tSTATUS(HAVE_LIBNUMA_SUPPORT, numa_num_possible_cpus);\n\tSTATUS(HAVE_LIBPERL_SUPPORT, libperl);\n\tSTATUS(HAVE_LIBPYTHON_SUPPORT, libpython);\n\tSTATUS(HAVE_SLANG_SUPPORT, libslang);\n\tSTATUS(HAVE_LIBCRYPTO_SUPPORT, libcrypto);\n\tSTATUS(HAVE_LIBUNWIND_SUPPORT, libunwind);\n\tSTATUS(HAVE_DWARF_SUPPORT, libdw-dwarf-unwind);\n\tSTATUS(HAVE_ZLIB_SUPPORT, zlib);\n\tSTATUS(HAVE_LZMA_SUPPORT, lzma);\n\tSTATUS(HAVE_AUXTRACE_SUPPORT, get_cpuid);\n\tSTATUS(HAVE_LIBBPF_SUPPORT, bpf);\n\tSTATUS(HAVE_AIO_SUPPORT, aio);\n\tSTATUS(HAVE_ZSTD_SUPPORT, zstd);\n\tSTATUS(HAVE_LIBPFM, libpfm4);\n\tSTATUS(HAVE_LIBTRACEEVENT, libtraceevent);\n}\n\nint cmd_version(int argc, const char **argv)\n{\n\targc = parse_options(argc, argv, version_options, version_usage,\n\t\t\t     PARSE_OPT_STOP_AT_NON_OPTION);\n\n\tprintf(\"perf version %s\\n\", perf_version_string);\n\n\tif (version.build_options || verbose > 0)\n\t\tlibrary_status();\n\n\treturn 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}