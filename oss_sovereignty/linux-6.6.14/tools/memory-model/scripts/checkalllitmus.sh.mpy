{
  "module_name": "checkalllitmus.sh",
  "hash_id": "278910fbf5020866cf301ab59a97c1864227c3caf05cf7ecadb5f17b7596a560",
  "original_prompt": "Ingested from linux-6.6.14/tools/memory-model/scripts/checkalllitmus.sh",
  "human_readable_source": "#!/bin/bash\n# SPDX-License-Identifier: GPL-2.0+\n#\n# Run herd7 tests on all .litmus files in the litmus-tests directory\n# and check each file's result against a \"Result:\" comment within that\n# litmus test.  If the verification result does not match that specified\n# in the litmus test, this script prints an error message prefixed with\n# \"^^^\".  It also outputs verification results to a file whose name is\n# that of the specified litmus test, but with \".out\" appended.\n#\n# If the --hw argument is specified, this script translates the .litmus\n# C-language file to the specified type of assembly and verifies that.\n# But in this case, litmus tests using complex synchronization (such as\n# locking, RCU, and SRCU) are cheerfully ignored.\n#\n# Usage:\n#\tcheckalllitmus.sh\n#\n# Run this in the directory containing the memory model.\n#\n# This script makes no attempt to run the litmus tests concurrently.\n#\n# Copyright IBM Corporation, 2018\n#\n# Author: Paul E. McKenney <paulmck@linux.ibm.com>\n\n. scripts/parseargs.sh\n\nlitmusdir=litmus-tests\nif test -d \"$litmusdir\" -a -r \"$litmusdir\" -a -x \"$litmusdir\"\nthen\n\t:\nelse\n\techo ' --- ' error: $litmusdir is not an accessible directory\n\texit 255\nfi\n\n# Create any new directories that have appeared in the litmus-tests\n# directory since the last run.\nif test \"$LKMM_DESTDIR\" != \".\"\nthen\n\tfind $litmusdir -type d -print |\n\t( cd \"$LKMM_DESTDIR\"; sed -e 's/^/mkdir -p /' | sh )\nfi\n\n# Run the script on all the litmus tests in the specified directory\nret=0\nfor i in $litmusdir/*.litmus\ndo\n\tif test -n \"$LKMM_HW_MAP_FILE\" && ! scripts/simpletest.sh $i\n\tthen\n\t\tcontinue\n\tfi\n\tif ! scripts/checklitmus.sh $i\n\tthen\n\t\tret=1\n\tfi\ndone\nif test \"$ret\" -ne 0\nthen\n\techo \" ^^^ VERIFICATION MISMATCHES\" 1>&2\nelse\n\techo All litmus tests verified as was expected. 1>&2\nfi\nexit $ret\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}