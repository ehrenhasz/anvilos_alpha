{
  "module_name": "initlitmushist.sh",
  "hash_id": "9d10dfbe4c9152bf774e043b6d7baef2d1f53d6b283e39c53be9c36ca1e487f7",
  "original_prompt": "Ingested from linux-6.6.14/tools/memory-model/scripts/initlitmushist.sh",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0+\n#\n# Runs the C-language litmus tests matching the specified criteria.\n# Generates the output for each .litmus file into a corresponding\n# .litmus.out file, and does not judge the result.\n#\n# sh initlitmushist.sh\n#\n# Run from the Linux kernel tools/memory-model directory.\n# See scripts/parseargs.sh for list of arguments.\n#\n# This script can consume significant wallclock time and CPU, especially as\n# the value of --procs rises.  On a four-core (eight hardware threads)\n# 2.5GHz x86 with a one-minute per-run timeout:\n#\n# --procs wallclock CPU\t\ttimeouts\ttests\n#\t1 0m11.241s 0m1.086s           0\t   19\n#\t2 1m12.598s 2m8.459s           2\t  393\n#\t3 1m30.007s 6m2.479s           4\t 2291\n#\t4 3m26.042s 18m5.139s\t       9\t 3217\n#\t5 4m26.661s 23m54.128s\t      13\t 3784\n#\t6 4m41.900s 26m4.721s         13\t 4352\n#\t7 5m51.463s 35m50.868s        13\t 4626\n#\t8 10m5.235s 68m43.672s        34\t 5117\n#\t9 15m57.80s 105m58.101s       69\t 5156\n#      10 16m14.13s 103m35.009s       69         5165\n#      20 27m48.55s 198m3.286s       156         5269\n#\n# Increasing the timeout on the 20-process run to five minutes increases\n# the runtime to about 90 minutes with the CPU time rising to about\n# 10 hours.  On the other hand, it decreases the number of timeouts to 101.\n#\n# Note that there are historical tests for which herd7 will fail\n# completely, for example, litmus/manual/atomic/C-unlock-wait-00.litmus\n# contains a call to spin_unlock_wait(), which no longer exists in either\n# the kernel or LKMM.\n\n. scripts/parseargs.sh\n\nT=/tmp/initlitmushist.sh.$$\ntrap 'rm -rf $T' 0\nmkdir $T\n\nif test -d litmus\nthen\n\t:\nelse\n\tgit clone https://github.com/paulmckrcu/litmus\n\t( cd litmus; git checkout origin/master )\nfi\n\n# Create any new directories that have appeared in the github litmus\n# repo since the last run.\nif test \"$LKMM_DESTDIR\" != \".\"\nthen\n\tfind litmus -type d -print |\n\t( cd \"$LKMM_DESTDIR\"; sed -e 's/^/mkdir -p /' | sh )\nfi\n\n# Create a list of the C-language litmus tests with no more than the\n# specified number of processes (per the --procs argument).\nfind litmus -name '*.litmus' -print | mselect7 -arch C > $T/list-C\nxargs < $T/list-C -r grep -L \"^P${LKMM_PROCS}\" > $T/list-C-short\n\nscripts/runlitmushist.sh < $T/list-C-short\n\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}