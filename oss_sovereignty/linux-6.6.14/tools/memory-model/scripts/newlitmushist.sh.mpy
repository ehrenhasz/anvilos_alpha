{
  "module_name": "newlitmushist.sh",
  "hash_id": "e63ee4f156c52b6024637f3b60392a85377d124f5072b62b8d099680e0cf8716",
  "original_prompt": "Ingested from linux-6.6.14/tools/memory-model/scripts/newlitmushist.sh",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0+\n#\n# Runs the C-language litmus tests matching the specified criteria\n# that do not already have a corresponding .litmus.out file, and does\n# not judge the result.\n#\n# sh newlitmushist.sh\n#\n# Run from the Linux kernel tools/memory-model directory.\n# See scripts/parseargs.sh for list of arguments.\n#\n# Copyright IBM Corporation, 2018\n#\n# Author: Paul E. McKenney <paulmck@linux.ibm.com>\n\n. scripts/parseargs.sh\n\nT=/tmp/newlitmushist.sh.$$\ntrap 'rm -rf $T' 0\nmkdir $T\n\nif test -d litmus\nthen\n\t:\nelse\n\techo Run scripts/initlitmushist.sh first, need litmus repo.\n\texit 1\nfi\n\n# Create any new directories that have appeared in the github litmus\n# repo since the last run.\nif test \"$LKMM_DESTDIR\" != \".\"\nthen\n\tfind litmus -type d -print |\n\t( cd \"$LKMM_DESTDIR\"; sed -e 's/^/mkdir -p /' | sh )\nfi\n\n# Create a list of the C-language litmus tests previously run.\n( cd $LKMM_DESTDIR; find litmus -name '*.litmus.out' -print ) |\n\tsed -e 's/\\.out$//' |\n\txargs -r grep -L \"^P${LKMM_PROCS}\"> $T/list-C-already\n\n# Form full list of litmus tests with no more than the specified\n# number of processes (per the --procs argument).\nfind litmus -name '*.litmus' -print | mselect7 -arch C > $T/list-C-all\nxargs < $T/list-C-all -r grep -L \"^P${LKMM_PROCS}\" > $T/list-C-short\n\n# Form list of new tests.  Note: This does not handle litmus-test deletion!\nsort $T/list-C-already $T/list-C-short | uniq -u > $T/list-C-new\n\n# Form list of litmus tests that have changed since the last run.\nsed < $T/list-C-short -e 's,^.*$,if test & -nt '\"$LKMM_DESTDIR\"'/&.out; then echo &; fi,' > $T/list-C-script\nsh $T/list-C-script > $T/list-C-newer\n\n# Merge the list of new and of updated litmus tests: These must be (re)run.\nsort -u $T/list-C-new $T/list-C-newer > $T/list-C-needed\n\nscripts/runlitmushist.sh < $T/list-C-needed\n\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}