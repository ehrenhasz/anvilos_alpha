{
  "module_name": "checkghlitmus.sh",
  "hash_id": "544a19ade3bd866e0d63859d0945651aa7ed2801dfc6089d47ed8aca70db738e",
  "original_prompt": "Ingested from linux-6.6.14/tools/memory-model/scripts/checkghlitmus.sh",
  "human_readable_source": "#!/bin/sh\n# SPDX-License-Identifier: GPL-2.0+\n#\n# Runs the C-language litmus tests having a maximum number of processes\n# to run, defaults to 6.\n#\n# sh checkghlitmus.sh\n#\n# Run from the Linux kernel tools/memory-model directory.  See the\n# parseargs.sh scripts for arguments.\n\n. scripts/parseargs.sh\n. scripts/hwfnseg.sh\n\nT=/tmp/checkghlitmus.sh.$$\ntrap 'rm -rf $T' 0\nmkdir $T\n\n# Clone the repository if it is not already present.\nif test -d litmus\nthen\n\t:\nelse\n\tgit clone https://github.com/paulmckrcu/litmus\n\t( cd litmus; git checkout origin/master )\nfi\n\n# Create any new directories that have appeared in the github litmus\n# repo since the last run.\nif test \"$LKMM_DESTDIR\" != \".\"\nthen\n\tfind litmus -type d -print |\n\t( cd \"$LKMM_DESTDIR\"; sed -e 's/^/mkdir -p /' | sh )\nfi\n\n# Create a list of the specified litmus tests previously run.\n( cd $LKMM_DESTDIR; find litmus -name \"*.litmus${hwfnseg}.out\" -print ) |\n\tsed -e \"s/${hwfnseg}\"'\\.out$//' |\n\txargs -r grep -E -l '^ \\* Result: (Never|Sometimes|Always|DEADLOCK)' |\n\txargs -r grep -L \"^P${LKMM_PROCS}\"> $T/list-C-already\n\n# Create a list of C-language litmus tests with \"Result:\" commands and\n# no more than the specified number of processes.\nfind litmus -name '*.litmus' -print | mselect7 -arch C > $T/list-C\nxargs < $T/list-C -r grep -E -l '^ \\* Result: (Never|Sometimes|Always|DEADLOCK)' > $T/list-C-result\nxargs < $T/list-C-result -r grep -L \"^P${LKMM_PROCS}\" > $T/list-C-result-short\n\n# Form list of tests without corresponding .out files\nsort $T/list-C-already $T/list-C-result-short | uniq -u > $T/list-C-needed\n\n# Run any needed tests.\nif scripts/runlitmushist.sh < $T/list-C-needed > $T/run.stdout 2> $T/run.stderr\nthen\n\terrs=\nelse\n\terrs=1\nfi\n\nsed < $T/list-C-result-short -e 's,^,scripts/judgelitmus.sh ,' |\n\tsh > $T/judge.stdout 2> $T/judge.stderr\n\nif test -n \"$errs\"\nthen\n\tcat $T/run.stderr 1>&2\nfi\ngrep '!!!' $T/judge.stdout\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}