{
  "module_name": "string.h",
  "hash_id": "13f1b1afd98174190c619818992d21fc1653f87a324bc0eb9d63b7b01bd3adcd",
  "original_prompt": "Ingested from linux-6.6.14/tools/include/nolibc/string.h",
  "human_readable_source": " \n \n\n#ifndef _NOLIBC_STRING_H\n#define _NOLIBC_STRING_H\n\n#include \"std.h\"\n\nstatic void *malloc(size_t len);\n\n \n\nstatic __attribute__((unused))\nint memcmp(const void *s1, const void *s2, size_t n)\n{\n\tsize_t ofs = 0;\n\tint c1 = 0;\n\n\twhile (ofs < n && !(c1 = ((unsigned char *)s1)[ofs] - ((unsigned char *)s2)[ofs])) {\n\t\tofs++;\n\t}\n\treturn c1;\n}\n\nstatic __attribute__((unused))\nvoid *_nolibc_memcpy_up(void *dst, const void *src, size_t len)\n{\n\tsize_t pos = 0;\n\n\twhile (pos < len) {\n\t\t((char *)dst)[pos] = ((const char *)src)[pos];\n\t\tpos++;\n\t}\n\treturn dst;\n}\n\nstatic __attribute__((unused))\nvoid *_nolibc_memcpy_down(void *dst, const void *src, size_t len)\n{\n\twhile (len) {\n\t\tlen--;\n\t\t((char *)dst)[len] = ((const char *)src)[len];\n\t}\n\treturn dst;\n}\n\n \n__attribute__((weak,unused,section(\".text.nolibc_memmove\")))\nvoid *memmove(void *dst, const void *src, size_t len)\n{\n\tsize_t dir, pos;\n\n\tpos = len;\n\tdir = -1;\n\n\tif (dst < src) {\n\t\tpos = -1;\n\t\tdir = 1;\n\t}\n\n\twhile (len) {\n\t\tpos += dir;\n\t\t((char *)dst)[pos] = ((const char *)src)[pos];\n\t\tlen--;\n\t}\n\treturn dst;\n}\n\n \n__attribute__((weak,unused,section(\".text.nolibc_memcpy\")))\nvoid *memcpy(void *dst, const void *src, size_t len)\n{\n\treturn _nolibc_memcpy_up(dst, src, len);\n}\n\n \n__attribute__((weak,unused,section(\".text.nolibc_memset\")))\nvoid *memset(void *dst, int b, size_t len)\n{\n\tchar *p = dst;\n\n\twhile (len--) {\n\t\t \n\t\t__asm__ volatile(\"\");\n\t\t*(p++) = b;\n\t}\n\treturn dst;\n}\n\nstatic __attribute__((unused))\nchar *strchr(const char *s, int c)\n{\n\twhile (*s) {\n\t\tif (*s == (char)c)\n\t\t\treturn (char *)s;\n\t\ts++;\n\t}\n\treturn NULL;\n}\n\nstatic __attribute__((unused))\nint strcmp(const char *a, const char *b)\n{\n\tunsigned int c;\n\tint diff;\n\n\twhile (!(diff = (unsigned char)*a++ - (c = (unsigned char)*b++)) && c)\n\t\t;\n\treturn diff;\n}\n\nstatic __attribute__((unused))\nchar *strcpy(char *dst, const char *src)\n{\n\tchar *ret = dst;\n\n\twhile ((*dst++ = *src++));\n\treturn ret;\n}\n\n \nstatic __attribute__((unused))\nsize_t strlen(const char *str)\n{\n\tsize_t len;\n\n\tfor (len = 0; str[len]; len++)\n\t\t__asm__(\"\");\n\treturn len;\n}\n\n \n#if defined(__OPTIMIZE__)\n#define nolibc_strlen(x) strlen(x)\n#define strlen(str) ({                          \\\n\t__builtin_constant_p((str)) ?           \\\n\t\t__builtin_strlen((str)) :       \\\n\t\tnolibc_strlen((str));           \\\n})\n#endif\n\nstatic __attribute__((unused))\nsize_t strnlen(const char *str, size_t maxlen)\n{\n\tsize_t len;\n\n\tfor (len = 0; (len < maxlen) && str[len]; len++);\n\treturn len;\n}\n\nstatic __attribute__((unused))\nchar *strdup(const char *str)\n{\n\tsize_t len;\n\tchar *ret;\n\n\tlen = strlen(str);\n\tret = malloc(len + 1);\n\tif (__builtin_expect(ret != NULL, 1))\n\t\tmemcpy(ret, str, len + 1);\n\n\treturn ret;\n}\n\nstatic __attribute__((unused))\nchar *strndup(const char *str, size_t maxlen)\n{\n\tsize_t len;\n\tchar *ret;\n\n\tlen = strnlen(str, maxlen);\n\tret = malloc(len + 1);\n\tif (__builtin_expect(ret != NULL, 1)) {\n\t\tmemcpy(ret, str, len);\n\t\tret[len] = '\\0';\n\t}\n\n\treturn ret;\n}\n\nstatic __attribute__((unused))\nsize_t strlcat(char *dst, const char *src, size_t size)\n{\n\tsize_t len;\n\tchar c;\n\n\tfor (len = 0; dst[len];\tlen++)\n\t\t;\n\n\tfor (;;) {\n\t\tc = *src;\n\t\tif (len < size)\n\t\t\tdst[len] = c;\n\t\tif (!c)\n\t\t\tbreak;\n\t\tlen++;\n\t\tsrc++;\n\t}\n\n\treturn len;\n}\n\nstatic __attribute__((unused))\nsize_t strlcpy(char *dst, const char *src, size_t size)\n{\n\tsize_t len;\n\tchar c;\n\n\tfor (len = 0;;) {\n\t\tc = src[len];\n\t\tif (len < size)\n\t\t\tdst[len] = c;\n\t\tif (!c)\n\t\t\tbreak;\n\t\tlen++;\n\t}\n\treturn len;\n}\n\nstatic __attribute__((unused))\nchar *strncat(char *dst, const char *src, size_t size)\n{\n\tchar *orig = dst;\n\n\twhile (*dst)\n\t\tdst++;\n\n\twhile (size && (*dst = *src)) {\n\t\tsrc++;\n\t\tdst++;\n\t\tsize--;\n\t}\n\n\t*dst = 0;\n\treturn orig;\n}\n\nstatic __attribute__((unused))\nint strncmp(const char *a, const char *b, size_t size)\n{\n\tunsigned int c;\n\tint diff = 0;\n\n\twhile (size-- &&\n\t       !(diff = (unsigned char)*a++ - (c = (unsigned char)*b++)) && c)\n\t\t;\n\n\treturn diff;\n}\n\nstatic __attribute__((unused))\nchar *strncpy(char *dst, const char *src, size_t size)\n{\n\tsize_t len;\n\n\tfor (len = 0; len < size; len++)\n\t\tif ((dst[len] = *src))\n\t\t\tsrc++;\n\treturn dst;\n}\n\nstatic __attribute__((unused))\nchar *strrchr(const char *s, int c)\n{\n\tconst char *ret = NULL;\n\n\twhile (*s) {\n\t\tif (*s == (char)c)\n\t\t\tret = s;\n\t\ts++;\n\t}\n\treturn (char *)ret;\n}\n\n \n#include \"nolibc.h\"\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}