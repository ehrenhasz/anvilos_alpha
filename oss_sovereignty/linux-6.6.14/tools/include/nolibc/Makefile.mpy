{
  "module_name": "Makefile",
  "hash_id": "e5d4e3caf85f7ac8d231f0eb7d3be0d6df1b82c4bf91883d48987336a6d75355",
  "original_prompt": "Ingested from linux-6.6.14/tools/include/nolibc/Makefile",
  "human_readable_source": "# SPDX-License-Identifier: GPL-2.0\n# Makefile for nolibc installation and tests\ninclude ../../scripts/Makefile.include\n\n# we're in \".../tools/include/nolibc\"\nifeq ($(srctree),)\nsrctree := $(patsubst %/tools/include/,%,$(dir $(CURDIR)))\nendif\n\n# when run as make -C tools/ nolibc_<foo> the arch is not set\nifeq ($(ARCH),)\ninclude $(srctree)/scripts/subarch.include\nARCH = $(SUBARCH)\nendif\n\n# OUTPUT is only set when run from the main makefile, otherwise\n# it defaults to this nolibc directory.\nOUTPUT ?= $(CURDIR)/\n\nifeq ($(V),1)\nQ=\nelse\nQ=@\nendif\n\nnolibc_arch := $(patsubst arm64,aarch64,$(ARCH))\narch_file := arch-$(nolibc_arch).h\nall_files := \\\n\t\tcompiler.h \\\n\t\tcrt.h \\\n\t\tctype.h \\\n\t\terrno.h \\\n\t\tnolibc.h \\\n\t\tsignal.h \\\n\t\tstackprotector.h \\\n\t\tstd.h \\\n\t\tstdint.h \\\n\t\tstdlib.h \\\n\t\tstring.h \\\n\t\tsys.h \\\n\t\ttime.h \\\n\t\ttypes.h \\\n\t\tunistd.h \\\n\t\tstdio.h \\\n\n\n# install all headers needed to support a bare-metal compiler\nall: headers\n\ninstall: help\n\nhelp:\n\t@echo \"Supported targets under nolibc:\"\n\t@echo \"  all                 call \\\"headers\\\"\"\n\t@echo \"  clean               clean the sysroot\"\n\t@echo \"  headers             prepare a sysroot in tools/include/nolibc/sysroot\"\n\t@echo \"  headers_standalone  like \\\"headers\\\", and also install kernel headers\"\n\t@echo \"  help                this help\"\n\t@echo \"\"\n\t@echo \"These targets may also be called from tools as \\\"make nolibc_<target>\\\".\"\n\t@echo \"\"\n\t@echo \"Currently using the following variables:\"\n\t@echo \"  ARCH    = $(ARCH)\"\n\t@echo \"  OUTPUT  = $(OUTPUT)\"\n\t@echo \"\"\n\n# Note: when ARCH is \"x86\" we concatenate both x86_64 and i386\nheaders:\n\t$(Q)mkdir -p $(OUTPUT)sysroot\n\t$(Q)mkdir -p $(OUTPUT)sysroot/include\n\t$(Q)cp $(all_files) $(OUTPUT)sysroot/include/\n\t$(Q)if [ \"$(ARCH)\" = \"x86\" ]; then      \\\n\t\tsed -e                          \\\n\t\t  's,^#ifndef _NOLIBC_ARCH_X86_64_H,#if !defined(_NOLIBC_ARCH_X86_64_H) \\&\\& defined(__x86_64__),' \\\n\t\t  arch-x86_64.h;                \\\n\t\tsed -e                          \\\n\t\t  's,^#ifndef _NOLIBC_ARCH_I386_H,#if !defined(_NOLIBC_ARCH_I386_H) \\&\\& !defined(__x86_64__),' \\\n\t\t  arch-i386.h;                  \\\n\telif [ -e \"$(arch_file)\" ]; then        \\\n\t\tcat $(arch_file);               \\\n\telse                                    \\\n\t\techo \"Fatal: architecture $(ARCH) not yet supported by nolibc.\" >&2; \\\n\t\texit 1;                         \\\n\tfi > $(OUTPUT)sysroot/include/arch.h\n\nheaders_standalone: headers\n\t$(Q)$(MAKE) -C $(srctree) headers\n\t$(Q)$(MAKE) -C $(srctree) headers_install INSTALL_HDR_PATH=$(OUTPUT)sysroot\n\nclean:\n\t$(call QUIET_CLEAN, nolibc) rm -rf \"$(OUTPUT)sysroot\"\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}