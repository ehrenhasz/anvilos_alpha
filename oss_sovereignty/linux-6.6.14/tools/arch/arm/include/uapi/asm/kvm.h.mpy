{
  "module_name": "kvm.h",
  "hash_id": "91f9d60f7e34656dae837296b9103d274fcb1accf270acddd267c05b313fcdd5",
  "original_prompt": "Ingested from linux-6.6.14/tools/arch/arm/include/uapi/asm/kvm.h",
  "human_readable_source": " \n \n\n#ifndef __ARM_KVM_H__\n#define __ARM_KVM_H__\n\n#include <linux/types.h>\n#include <linux/psci.h>\n#include <asm/ptrace.h>\n\n#define __KVM_HAVE_GUEST_DEBUG\n#define __KVM_HAVE_IRQ_LINE\n#define __KVM_HAVE_READONLY_MEM\n#define __KVM_HAVE_VCPU_EVENTS\n\n#define KVM_COALESCED_MMIO_PAGE_OFFSET 1\n\n#define KVM_REG_SIZE(id)\t\t\t\t\t\t\\\n\t(1U << (((id) & KVM_REG_SIZE_MASK) >> KVM_REG_SIZE_SHIFT))\n\n \n#define KVM_ARM_SVC_sp\t\tsvc_regs[0]\n#define KVM_ARM_SVC_lr\t\tsvc_regs[1]\n#define KVM_ARM_SVC_spsr\tsvc_regs[2]\n#define KVM_ARM_ABT_sp\t\tabt_regs[0]\n#define KVM_ARM_ABT_lr\t\tabt_regs[1]\n#define KVM_ARM_ABT_spsr\tabt_regs[2]\n#define KVM_ARM_UND_sp\t\tund_regs[0]\n#define KVM_ARM_UND_lr\t\tund_regs[1]\n#define KVM_ARM_UND_spsr\tund_regs[2]\n#define KVM_ARM_IRQ_sp\t\tirq_regs[0]\n#define KVM_ARM_IRQ_lr\t\tirq_regs[1]\n#define KVM_ARM_IRQ_spsr\tirq_regs[2]\n\n \n#define KVM_ARM_FIQ_r8\t\tfiq_regs[0]\n#define KVM_ARM_FIQ_r9\t\tfiq_regs[1]\n#define KVM_ARM_FIQ_r10\t\tfiq_regs[2]\n#define KVM_ARM_FIQ_fp\t\tfiq_regs[3]\n#define KVM_ARM_FIQ_ip\t\tfiq_regs[4]\n#define KVM_ARM_FIQ_sp\t\tfiq_regs[5]\n#define KVM_ARM_FIQ_lr\t\tfiq_regs[6]\n#define KVM_ARM_FIQ_spsr\tfiq_regs[7]\n\nstruct kvm_regs {\n\tstruct pt_regs usr_regs;\t \n\tunsigned long svc_regs[3];\t \n\tunsigned long abt_regs[3];\t \n\tunsigned long und_regs[3];\t \n\tunsigned long irq_regs[3];\t \n\tunsigned long fiq_regs[8];\t \n};\n\n \n#define KVM_ARM_TARGET_CORTEX_A15\t0\n#define KVM_ARM_TARGET_CORTEX_A7\t1\n#define KVM_ARM_NUM_TARGETS\t\t2\n\n \n#define KVM_ARM_DEVICE_TYPE_SHIFT\t0\n#define KVM_ARM_DEVICE_TYPE_MASK\t(0xffff << KVM_ARM_DEVICE_TYPE_SHIFT)\n#define KVM_ARM_DEVICE_ID_SHIFT\t\t16\n#define KVM_ARM_DEVICE_ID_MASK\t\t(0xffff << KVM_ARM_DEVICE_ID_SHIFT)\n\n \n#define KVM_ARM_DEVICE_VGIC_V2\t\t0\n\n \n#define KVM_VGIC_V2_ADDR_TYPE_DIST\t0\n#define KVM_VGIC_V2_ADDR_TYPE_CPU\t1\n\n#define KVM_VGIC_V2_DIST_SIZE\t\t0x1000\n#define KVM_VGIC_V2_CPU_SIZE\t\t0x2000\n\n \n#define KVM_VGIC_V3_ADDR_TYPE_DIST\t2\n#define KVM_VGIC_V3_ADDR_TYPE_REDIST\t3\n#define KVM_VGIC_ITS_ADDR_TYPE\t\t4\n#define KVM_VGIC_V3_ADDR_TYPE_REDIST_REGION\t5\n\n#define KVM_VGIC_V3_DIST_SIZE\t\tSZ_64K\n#define KVM_VGIC_V3_REDIST_SIZE\t\t(2 * SZ_64K)\n#define KVM_VGIC_V3_ITS_SIZE\t\t(2 * SZ_64K)\n\n#define KVM_ARM_VCPU_POWER_OFF\t\t0  \n#define KVM_ARM_VCPU_PSCI_0_2\t\t1  \n\nstruct kvm_vcpu_init {\n\t__u32 target;\n\t__u32 features[7];\n};\n\nstruct kvm_sregs {\n};\n\nstruct kvm_fpu {\n};\n\nstruct kvm_guest_debug_arch {\n};\n\nstruct kvm_debug_exit_arch {\n};\n\nstruct kvm_sync_regs {\n\t \n\t__u64 device_irq_level;\n};\n\nstruct kvm_arch_memory_slot {\n};\n\n \nstruct kvm_vcpu_events {\n\tstruct {\n\t\t__u8 serror_pending;\n\t\t__u8 serror_has_esr;\n\t\t__u8 ext_dabt_pending;\n\t\t \n\t\t__u8 pad[5];\n\t\t__u64 serror_esr;\n\t} exception;\n\t__u32 reserved[12];\n};\n\n \n#define KVM_REG_ARM_COPROC_MASK\t\t0x000000000FFF0000\n#define KVM_REG_ARM_COPROC_SHIFT\t16\n#define KVM_REG_ARM_32_OPC2_MASK\t0x0000000000000007\n#define KVM_REG_ARM_32_OPC2_SHIFT\t0\n#define KVM_REG_ARM_OPC1_MASK\t\t0x0000000000000078\n#define KVM_REG_ARM_OPC1_SHIFT\t\t3\n#define KVM_REG_ARM_CRM_MASK\t\t0x0000000000000780\n#define KVM_REG_ARM_CRM_SHIFT\t\t7\n#define KVM_REG_ARM_32_CRN_MASK\t\t0x0000000000007800\n#define KVM_REG_ARM_32_CRN_SHIFT\t11\n \n#define KVM_REG_ARM_SECURE_MASK\t0x0000000010000000\n#define KVM_REG_ARM_SECURE_SHIFT\t28\n\n#define ARM_CP15_REG_SHIFT_MASK(x,n) \\\n\t(((x) << KVM_REG_ARM_ ## n ## _SHIFT) & KVM_REG_ARM_ ## n ## _MASK)\n\n#define __ARM_CP15_REG(op1,crn,crm,op2) \\\n\t(KVM_REG_ARM | (15 << KVM_REG_ARM_COPROC_SHIFT) | \\\n\tARM_CP15_REG_SHIFT_MASK(op1, OPC1) | \\\n\tARM_CP15_REG_SHIFT_MASK(crn, 32_CRN) | \\\n\tARM_CP15_REG_SHIFT_MASK(crm, CRM) | \\\n\tARM_CP15_REG_SHIFT_MASK(op2, 32_OPC2))\n\n#define ARM_CP15_REG32(...) (__ARM_CP15_REG(__VA_ARGS__) | KVM_REG_SIZE_U32)\n\n#define __ARM_CP15_REG64(op1,crm) \\\n\t(__ARM_CP15_REG(op1, 0, crm, 0) | KVM_REG_SIZE_U64)\n#define ARM_CP15_REG64(...) __ARM_CP15_REG64(__VA_ARGS__)\n\n \n#define KVM_REG_ARM_PTIMER_CTL\t\tARM_CP15_REG32(0, 14, 2, 1)\n#define KVM_REG_ARM_PTIMER_CNT\t\tARM_CP15_REG64(0, 14)\n#define KVM_REG_ARM_PTIMER_CVAL\t\tARM_CP15_REG64(2, 14)\n\n \n#define KVM_REG_ARM_TIMER_CTL\t\tARM_CP15_REG32(0, 14, 3, 1)\n#define KVM_REG_ARM_TIMER_CNT\t\tARM_CP15_REG64(1, 14)\n#define KVM_REG_ARM_TIMER_CVAL\t\tARM_CP15_REG64(3, 14)\n\n \n#define KVM_REG_ARM_CORE\t\t(0x0010 << KVM_REG_ARM_COPROC_SHIFT)\n#define KVM_REG_ARM_CORE_REG(name)\t(offsetof(struct kvm_regs, name) / 4)\n\n \n#define KVM_REG_ARM_DEMUX\t\t(0x0011 << KVM_REG_ARM_COPROC_SHIFT)\n#define KVM_REG_ARM_DEMUX_ID_MASK\t0x000000000000FF00\n#define KVM_REG_ARM_DEMUX_ID_SHIFT\t8\n#define KVM_REG_ARM_DEMUX_ID_CCSIDR\t(0x00 << KVM_REG_ARM_DEMUX_ID_SHIFT)\n#define KVM_REG_ARM_DEMUX_VAL_MASK\t0x00000000000000FF\n#define KVM_REG_ARM_DEMUX_VAL_SHIFT\t0\n\n \n#define KVM_REG_ARM_VFP\t\t\t(0x0012 << KVM_REG_ARM_COPROC_SHIFT)\n#define KVM_REG_ARM_VFP_MASK\t\t0x000000000000FFFF\n#define KVM_REG_ARM_VFP_BASE_REG\t0x0\n#define KVM_REG_ARM_VFP_FPSID\t\t0x1000\n#define KVM_REG_ARM_VFP_FPSCR\t\t0x1001\n#define KVM_REG_ARM_VFP_MVFR1\t\t0x1006\n#define KVM_REG_ARM_VFP_MVFR0\t\t0x1007\n#define KVM_REG_ARM_VFP_FPEXC\t\t0x1008\n#define KVM_REG_ARM_VFP_FPINST\t\t0x1009\n#define KVM_REG_ARM_VFP_FPINST2\t\t0x100A\n\n \n#define KVM_REG_ARM_FW\t\t\t(0x0014 << KVM_REG_ARM_COPROC_SHIFT)\n#define KVM_REG_ARM_FW_REG(r)\t\t(KVM_REG_ARM | KVM_REG_SIZE_U64 | \\\n\t\t\t\t\t KVM_REG_ARM_FW | ((r) & 0xffff))\n#define KVM_REG_ARM_PSCI_VERSION\tKVM_REG_ARM_FW_REG(0)\n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_1\tKVM_REG_ARM_FW_REG(1)\n\t \n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_1_NOT_AVAIL\t\t0\n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_1_AVAIL\t\t1\n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_1_NOT_REQUIRED\t2\n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_2\tKVM_REG_ARM_FW_REG(2)\n\t \n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_2_NOT_AVAIL\t\t0\n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_2_UNKNOWN\t\t1\n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_2_AVAIL\t\t2\n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_2_NOT_REQUIRED\t3\n#define KVM_REG_ARM_SMCCC_ARCH_WORKAROUND_2_ENABLED\t(1U << 4)\n\n \n#define KVM_DEV_ARM_VGIC_GRP_ADDR\t0\n#define KVM_DEV_ARM_VGIC_GRP_DIST_REGS\t1\n#define KVM_DEV_ARM_VGIC_GRP_CPU_REGS\t2\n#define   KVM_DEV_ARM_VGIC_CPUID_SHIFT\t32\n#define   KVM_DEV_ARM_VGIC_CPUID_MASK\t(0xffULL << KVM_DEV_ARM_VGIC_CPUID_SHIFT)\n#define   KVM_DEV_ARM_VGIC_V3_MPIDR_SHIFT 32\n#define   KVM_DEV_ARM_VGIC_V3_MPIDR_MASK \\\n\t\t\t(0xffffffffULL << KVM_DEV_ARM_VGIC_V3_MPIDR_SHIFT)\n#define   KVM_DEV_ARM_VGIC_OFFSET_SHIFT\t0\n#define   KVM_DEV_ARM_VGIC_OFFSET_MASK\t(0xffffffffULL << KVM_DEV_ARM_VGIC_OFFSET_SHIFT)\n#define   KVM_DEV_ARM_VGIC_SYSREG_INSTR_MASK (0xffff)\n#define KVM_DEV_ARM_VGIC_GRP_NR_IRQS\t3\n#define KVM_DEV_ARM_VGIC_GRP_CTRL       4\n#define KVM_DEV_ARM_VGIC_GRP_REDIST_REGS 5\n#define KVM_DEV_ARM_VGIC_GRP_CPU_SYSREGS 6\n#define KVM_DEV_ARM_VGIC_GRP_LEVEL_INFO  7\n#define KVM_DEV_ARM_VGIC_GRP_ITS_REGS\t8\n#define KVM_DEV_ARM_VGIC_LINE_LEVEL_INFO_SHIFT\t10\n#define KVM_DEV_ARM_VGIC_LINE_LEVEL_INFO_MASK \\\n\t\t\t(0x3fffffULL << KVM_DEV_ARM_VGIC_LINE_LEVEL_INFO_SHIFT)\n#define KVM_DEV_ARM_VGIC_LINE_LEVEL_INTID_MASK 0x3ff\n#define VGIC_LEVEL_INFO_LINE_LEVEL\t0\n\n \n#define KVM_ARM_VCPU_PMU_V3_CTRL\t0\n#define   KVM_ARM_VCPU_PMU_V3_IRQ\t0\n#define   KVM_ARM_VCPU_PMU_V3_INIT\t1\n#define KVM_ARM_VCPU_TIMER_CTRL\t\t1\n#define   KVM_ARM_VCPU_TIMER_IRQ_VTIMER\t\t0\n#define   KVM_ARM_VCPU_TIMER_IRQ_PTIMER\t\t1\n\n#define   KVM_DEV_ARM_VGIC_CTRL_INIT\t\t0\n#define   KVM_DEV_ARM_ITS_SAVE_TABLES\t\t1\n#define   KVM_DEV_ARM_ITS_RESTORE_TABLES\t2\n#define   KVM_DEV_ARM_VGIC_SAVE_PENDING_TABLES\t3\n#define   KVM_DEV_ARM_ITS_CTRL_RESET\t\t4\n\n \n#define KVM_ARM_IRQ_VCPU2_SHIFT\t\t28\n#define KVM_ARM_IRQ_VCPU2_MASK\t\t0xf\n#define KVM_ARM_IRQ_TYPE_SHIFT\t\t24\n#define KVM_ARM_IRQ_TYPE_MASK\t\t0xf\n#define KVM_ARM_IRQ_VCPU_SHIFT\t\t16\n#define KVM_ARM_IRQ_VCPU_MASK\t\t0xff\n#define KVM_ARM_IRQ_NUM_SHIFT\t\t0\n#define KVM_ARM_IRQ_NUM_MASK\t\t0xffff\n\n \n#define KVM_ARM_IRQ_TYPE_CPU\t\t0\n#define KVM_ARM_IRQ_TYPE_SPI\t\t1\n#define KVM_ARM_IRQ_TYPE_PPI\t\t2\n\n \n#define KVM_ARM_IRQ_CPU_IRQ\t\t0\n#define KVM_ARM_IRQ_CPU_FIQ\t\t1\n\n \n#ifndef __KERNEL__\n#define KVM_ARM_IRQ_GIC_MAX\t\t127\n#endif\n\n \n#define KVM_NR_IRQCHIPS          1\n\n \n#define KVM_PSCI_FN_BASE\t\t0x95c1ba5e\n#define KVM_PSCI_FN(n)\t\t\t(KVM_PSCI_FN_BASE + (n))\n\n#define KVM_PSCI_FN_CPU_SUSPEND\t\tKVM_PSCI_FN(0)\n#define KVM_PSCI_FN_CPU_OFF\t\tKVM_PSCI_FN(1)\n#define KVM_PSCI_FN_CPU_ON\t\tKVM_PSCI_FN(2)\n#define KVM_PSCI_FN_MIGRATE\t\tKVM_PSCI_FN(3)\n\n#define KVM_PSCI_RET_SUCCESS\t\tPSCI_RET_SUCCESS\n#define KVM_PSCI_RET_NI\t\t\tPSCI_RET_NOT_SUPPORTED\n#define KVM_PSCI_RET_INVAL\t\tPSCI_RET_INVALID_PARAMS\n#define KVM_PSCI_RET_DENIED\t\tPSCI_RET_DENIED\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}