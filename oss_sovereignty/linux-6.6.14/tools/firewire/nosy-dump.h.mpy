{
  "module_name": "nosy-dump.h",
  "hash_id": "b24e220796ba63a08aaa878089d34bc4df3f80715292a5568238be369b669733",
  "original_prompt": "Ingested from linux-6.6.14/tools/firewire/nosy-dump.h",
  "human_readable_source": " \n#ifndef __nosy_dump_h__\n#define __nosy_dump_h__\n\n#define array_length(array) (sizeof(array) / sizeof(array[0]))\n\n#define ACK_NO_ACK   0x0\n#define ACK_DONE(a)  ((a >> 2) == 0)\n#define ACK_BUSY(a)  ((a >> 2) == 1)\n#define ACK_ERROR(a) ((a >> 2) == 3)\n\n#include <stdint.h>\n\nstruct phy_packet {\n\tuint32_t timestamp;\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t zero:24;\n\t\t\tuint32_t phy_id:6;\n\t\t\tuint32_t identifier:2;\n\t\t} common, link_on;\n\n\t\tstruct {\n\t\t\tuint32_t zero:16;\n\t\t\tuint32_t gap_count:6;\n\t\t\tuint32_t set_gap_count:1;\n\t\t\tuint32_t set_root:1;\n\t\t\tuint32_t root_id:6;\n\t\t\tuint32_t identifier:2;\n\t\t} phy_config;\n\n\t\tstruct {\n\t\t\tuint32_t more_packets:1;\n\t\t\tuint32_t initiated_reset:1;\n\t\t\tuint32_t port2:2;\n\t\t\tuint32_t port1:2;\n\t\t\tuint32_t port0:2;\n\t\t\tuint32_t power_class:3;\n\t\t\tuint32_t contender:1;\n\t\t\tuint32_t phy_delay:2;\n\t\t\tuint32_t phy_speed:2;\n\t\t\tuint32_t gap_count:6;\n\t\t\tuint32_t link_active:1;\n\t\t\tuint32_t extended:1;\n\t\t\tuint32_t phy_id:6;\n\t\t\tuint32_t identifier:2;\n\t\t} self_id;\n\n\t\tstruct {\n\t\t\tuint32_t more_packets:1;\n\t\t\tuint32_t reserved1:1;\n\t\t\tuint32_t porth:2;\n\t\t\tuint32_t portg:2;\n\t\t\tuint32_t portf:2;\n\t\t\tuint32_t porte:2;\n\t\t\tuint32_t portd:2;\n\t\t\tuint32_t portc:2;\n\t\t\tuint32_t portb:2;\n\t\t\tuint32_t porta:2;\n\t\t\tuint32_t reserved0:2;\n\t\t\tuint32_t sequence:3;\n\t\t\tuint32_t extended:1;\n\t\t\tuint32_t phy_id:6;\n\t\t\tuint32_t identifier:2;\n\t\t} ext_self_id;\n\t};\n\tuint32_t inverted;\n\tuint32_t ack;\n};\n\n#define TCODE_PHY_PACKET 0x10\n\n#define PHY_PACKET_CONFIGURATION 0x00\n#define PHY_PACKET_LINK_ON 0x01\n#define PHY_PACKET_SELF_ID 0x02\n\nstruct link_packet {\n\tuint32_t timestamp;\n\tunion {\n\t\tstruct {\n\t\t\tuint32_t priority:4;\n\t\t\tuint32_t tcode:4;\n\t\t\tuint32_t rt:2;\n\t\t\tuint32_t tlabel:6;\n\t\t\tuint32_t destination:16;\n\n\t\t\tuint32_t offset_high:16;\n\t\t\tuint32_t source:16;\n\n\t\t\tuint32_t offset_low;\n\t\t} common;\n\n\t\tstruct {\n\t\t\tuint32_t common[3];\n\t\t\tuint32_t crc;\n\t\t} read_quadlet;\n\n\t\tstruct {\n\t\t\tuint32_t common[3];\n\t\t\tuint32_t data;\n\t\t\tuint32_t crc;\n\t\t} read_quadlet_response;\n\n\t\tstruct {\n\t\t\tuint32_t common[3];\n\t\t\tuint32_t extended_tcode:16;\n\t\t\tuint32_t data_length:16;\n\t\t\tuint32_t crc;\n\t\t} read_block;\n\n\t\tstruct {\n\t\t\tuint32_t common[3];\n\t\t\tuint32_t extended_tcode:16;\n\t\t\tuint32_t data_length:16;\n\t\t\tuint32_t crc;\n\t\t\tuint32_t data[0];\n\t\t\t \n\t\t} read_block_response;\n\n\t\tstruct {\n\t\t\tuint32_t common[3];\n\t\t\tuint32_t data;\n\t\t\tuint32_t crc;\n\t\t} write_quadlet;\n\n\t\tstruct {\n\t\t\tuint32_t common[3];\n\t\t\tuint32_t extended_tcode:16;\n\t\t\tuint32_t data_length:16;\n\t\t\tuint32_t crc;\n\t\t\tuint32_t data[0];\n\t\t\t \n\t\t} write_block;\n\n\t\tstruct {\n\t\t\tuint32_t common[3];\n\t\t\tuint32_t crc;\n\t\t} write_response;\n\n\t\tstruct {\n\t\t\tuint32_t common[3];\n\t\t\tuint32_t data;\n\t\t\tuint32_t crc;\n\t\t} cycle_start;\n\n\t\tstruct {\n\t\t\tuint32_t sy:4;\n\t\t\tuint32_t tcode:4;\n\t\t\tuint32_t channel:6;\n\t\t\tuint32_t tag:2;\n\t\t\tuint32_t data_length:16;\n\n\t\t\tuint32_t crc;\n\t\t} iso_data;\n\t};\n};\n\nstruct subaction {\n\tuint32_t ack;\n\tsize_t length;\n\tstruct list link;\n\tstruct link_packet packet;\n};\n\nstruct link_transaction {\n\tint request_node, response_node, tlabel;\n\tstruct subaction *request, *response;\n\tstruct list request_list, response_list;\n\tstruct list link;\n};\n\nint decode_fcp(struct link_transaction *t);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}