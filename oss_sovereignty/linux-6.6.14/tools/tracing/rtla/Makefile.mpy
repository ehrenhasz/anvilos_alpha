{
  "module_name": "Makefile",
  "hash_id": "d29fe3a0209ec0d636b1d19afebb3e27f9616babab20bb0a057165d64975fdb0",
  "original_prompt": "Ingested from linux-6.6.14/tools/tracing/rtla/Makefile",
  "human_readable_source": "NAME\t:=\trtla\n# Follow the kernel version\nVERSION :=\t$(shell cat VERSION 2> /dev/null || make -sC ../../.. kernelversion | grep -v make)\n\n# From libtracefs:\n# Makefiles suck: This macro sets a default value of $(2) for the\n# variable named by $(1), unless the variable has been set by\n# environment or command line. This is necessary for CC and AR\n# because make sets default values, so the simpler ?= approach\n# won't work as expected.\ndefine allow-override\n  $(if $(or $(findstring environment,$(origin $(1))),\\\n            $(findstring command line,$(origin $(1)))),,\\\n    $(eval $(1) = $(2)))\nendef\n\n# Allow setting CC and AR, or setting CROSS_COMPILE as a prefix.\n$(call allow-override,CC,$(CROSS_COMPILE)gcc)\n$(call allow-override,AR,$(CROSS_COMPILE)ar)\n$(call allow-override,STRIP,$(CROSS_COMPILE)strip)\n$(call allow-override,PKG_CONFIG,pkg-config)\n$(call allow-override,LD_SO_CONF_PATH,/etc/ld.so.conf.d/)\n$(call allow-override,LDCONFIG,ldconfig)\n\nINSTALL\t=\tinstall\nMKDIR\t=\tmkdir\nFOPTS\t:=\t-flto=auto -ffat-lto-objects -fexceptions -fstack-protector-strong \\\n\t\t-fasynchronous-unwind-tables -fstack-clash-protection\nWOPTS\t:= \t-Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -Wno-maybe-uninitialized\n\nTRACEFS_HEADERS\t:= $$($(PKG_CONFIG) --cflags libtracefs)\n\nCFLAGS\t:=\t-O -g -DVERSION=\\\"$(VERSION)\\\" $(FOPTS) $(MOPTS) $(WOPTS) $(TRACEFS_HEADERS) $(EXTRA_CFLAGS)\nLDFLAGS\t:=\t-ggdb $(EXTRA_LDFLAGS)\nLIBS\t:=\t$$($(PKG_CONFIG) --libs libtracefs)\n\nSRC\t:=\t$(wildcard src/*.c)\nHDR\t:=\t$(wildcard src/*.h)\nOBJ\t:=\t$(SRC:.c=.o)\nDIRS\t:=\tsrc\nFILES\t:=\tMakefile README.txt\nCEXT\t:=\tbz2\nTARBALL\t:=\t$(NAME)-$(VERSION).tar.$(CEXT)\nTAROPTS\t:=\t-cvjf $(TARBALL)\nBINDIR\t:=\t/usr/bin\nDATADIR\t:=\t/usr/share\nDOCDIR\t:=\t$(DATADIR)/doc\nMANDIR\t:=\t$(DATADIR)/man\nLICDIR\t:=\t$(DATADIR)/licenses\nSRCTREE\t:=\t$(or $(BUILD_SRC),$(CURDIR))\n\n# If running from the tarball, man pages are stored in the Documentation\n# dir. If running from the kernel source, man pages are stored in\n# Documentation/tools/rtla/.\nifneq ($(wildcard Documentation/.*),)\nDOCSRC\t=\tDocumentation/\nelse\nDOCSRC\t=\t$(SRCTREE)/../../../Documentation/tools/rtla/\nendif\n\nLIBTRACEEVENT_MIN_VERSION = 1.5\nLIBTRACEFS_MIN_VERSION = 1.3\n\n.PHONY:\tall warnings show_warnings\nall:\twarnings rtla\n\nTEST_LIBTRACEEVENT = $(shell sh -c \"$(PKG_CONFIG) --atleast-version $(LIBTRACEEVENT_MIN_VERSION) libtraceevent > /dev/null 2>&1 || echo n\")\nifeq (\"$(TEST_LIBTRACEEVENT)\", \"n\")\nWARNINGS = show_warnings\nMISSING_LIBS += echo \"**   libtraceevent version $(LIBTRACEEVENT_MIN_VERSION) or higher\";\nMISSING_PACKAGES += \"libtraceevent-devel\"\nMISSING_SOURCE += echo \"**  https://git.kernel.org/pub/scm/libs/libtrace/libtraceevent.git/ \";\nendif\n\nTEST_LIBTRACEFS = $(shell sh -c \"$(PKG_CONFIG) --atleast-version $(LIBTRACEFS_MIN_VERSION) libtracefs > /dev/null 2>&1 || echo n\")\nifeq (\"$(TEST_LIBTRACEFS)\", \"n\")\nWARNINGS = show_warnings\nMISSING_LIBS += echo \"**   libtracefs version $(LIBTRACEFS_MIN_VERSION) or higher\";\nMISSING_PACKAGES += \"libtracefs-devel\"\nMISSING_SOURCE += echo \"**  https://git.kernel.org/pub/scm/libs/libtrace/libtracefs.git/ \";\nendif\n\ndefine show_dependencies\n\t@echo \"********************************************\";\t\t\t\t\\\n\techo \"** NOTICE: Failed build dependencies\";\t\t\t\t\t\\\n\techo \"**\";\t\t\t\t\t\t\t\t\t\\\n\techo \"** Required Libraries:\";\t\t\t\t\t\t\t\\\n\t$(MISSING_LIBS)\t\t\t\t\t\t\t\t\t\\\n\techo \"**\";\t\t\t\t\t\t\t\t\t\\\n\techo \"** Consider installing the latest libtracefs from your\";\t\t\t\\\n\techo \"** distribution, e.g., 'dnf install $(MISSING_PACKAGES)' on Fedora,\";\t\\\n\techo \"** or from source:\";\t\t\t\t\t\t\t\\\n\techo \"**\";\t\t\t\t\t\t\t\t\t\\\n\t$(MISSING_SOURCE)\t\t\t\t\t\t\t\t\\\n\techo \"**\";\t\t\t\t\t\t\t\t\t\\\n\techo \"********************************************\"\nendef\n\nshow_warnings:\n\t$(call show_dependencies);\n\nifneq (\"$(WARNINGS)\", \"\")\nERROR_OUT = $(error Please add the necessary dependencies)\n\nwarnings: $(WARNINGS)\n\t$(ERROR_OUT)\nendif\n\nrtla: $(OBJ)\n\t$(CC) -o rtla $(LDFLAGS) $(OBJ) $(LIBS)\n\nstatic: $(OBJ)\n\t$(CC) -o rtla-static $(LDFLAGS) --static $(OBJ) $(LIBS) -lpthread -ldl\n\n.PHONY: install\ninstall: doc_install\n\t$(MKDIR) -p $(DESTDIR)$(BINDIR)\n\t$(INSTALL) rtla -m 755 $(DESTDIR)$(BINDIR)\n\t$(STRIP) $(DESTDIR)$(BINDIR)/rtla\n\t@test ! -f $(DESTDIR)$(BINDIR)/osnoise || rm $(DESTDIR)$(BINDIR)/osnoise\n\tln -s rtla $(DESTDIR)$(BINDIR)/osnoise\n\t@test ! -f $(DESTDIR)$(BINDIR)/hwnoise || rm $(DESTDIR)$(BINDIR)/hwnoise\n\tln -s rtla $(DESTDIR)$(BINDIR)/hwnoise\n\t@test ! -f $(DESTDIR)$(BINDIR)/timerlat || rm $(DESTDIR)$(BINDIR)/timerlat\n\tln -s rtla $(DESTDIR)$(BINDIR)/timerlat\n\n.PHONY: clean tarball\nclean: doc_clean\n\t@test ! -f rtla || rm rtla\n\t@test ! -f rtla-static || rm rtla-static\n\t@test ! -f src/rtla.o || rm src/rtla.o\n\t@test ! -f $(TARBALL) || rm -f $(TARBALL)\n\t@rm -rf *~ $(OBJ) *.tar.$(CEXT)\n\ntarball: clean\n\trm -rf $(NAME)-$(VERSION) && mkdir $(NAME)-$(VERSION)\n\techo $(VERSION) > $(NAME)-$(VERSION)/VERSION\n\tcp -r $(DIRS) $(FILES) $(NAME)-$(VERSION)\n\tmkdir $(NAME)-$(VERSION)/Documentation/\n\tcp -rp $(SRCTREE)/../../../Documentation/tools/rtla/* $(NAME)-$(VERSION)/Documentation/\n\ttar $(TAROPTS) --exclude='*~' $(NAME)-$(VERSION)\n\trm -rf $(NAME)-$(VERSION)\n\n.PHONY: doc doc_clean doc_install\ndoc:\n\t$(MAKE) -C $(DOCSRC)\n\ndoc_clean:\n\t$(MAKE) -C $(DOCSRC) clean\n\ndoc_install:\n\t$(MAKE) -C $(DOCSRC) install\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}