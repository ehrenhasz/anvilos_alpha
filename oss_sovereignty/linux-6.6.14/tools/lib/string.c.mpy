{
  "module_name": "string.c",
  "hash_id": "968d3fe4fad8d406a2adc1522bc6bd3bb010186ff08cca9f23e840810661c35e",
  "original_prompt": "Ingested from linux-6.6.14/tools/lib/string.c",
  "human_readable_source": "\n \n\n#include <stdlib.h>\n#include <string.h>\n#include <errno.h>\n#include <linux/string.h>\n#include <linux/ctype.h>\n#include <linux/compiler.h>\n\n \nvoid *memdup(const void *src, size_t len)\n{\n\tvoid *p = malloc(len);\n\n\tif (p)\n\t\tmemcpy(p, src, len);\n\n\treturn p;\n}\n\n \nint strtobool(const char *s, bool *res)\n{\n\tif (!s)\n\t\treturn -EINVAL;\n\n\tswitch (s[0]) {\n\tcase 'y':\n\tcase 'Y':\n\tcase '1':\n\t\t*res = true;\n\t\treturn 0;\n\tcase 'n':\n\tcase 'N':\n\tcase '0':\n\t\t*res = false;\n\t\treturn 0;\n\tcase 'o':\n\tcase 'O':\n\t\tswitch (s[1]) {\n\t\tcase 'n':\n\t\tcase 'N':\n\t\t\t*res = true;\n\t\t\treturn 0;\n\t\tcase 'f':\n\t\tcase 'F':\n\t\t\t*res = false;\n\t\t\treturn 0;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\tdefault:\n\t\tbreak;\n\t}\n\n\treturn -EINVAL;\n}\n\n \n#ifdef __clang__\n#pragma clang diagnostic push\n#pragma clang diagnostic ignored \"-Wignored-attributes\"\n#endif\nsize_t __weak strlcpy(char *dest, const char *src, size_t size)\n{\n\tsize_t ret = strlen(src);\n\n\tif (size) {\n\t\tsize_t len = (ret >= size) ? size - 1 : ret;\n\t\tmemcpy(dest, src, len);\n\t\tdest[len] = '\\0';\n\t}\n\treturn ret;\n}\n#ifdef __clang__\n#pragma clang diagnostic pop\n#endif\n\n \nchar *skip_spaces(const char *str)\n{\n\twhile (isspace(*str))\n\t\t++str;\n\treturn (char *)str;\n}\n\n \nchar *strim(char *s)\n{\n\tsize_t size;\n\tchar *end;\n\n\tsize = strlen(s);\n\tif (!size)\n\t\treturn s;\n\n\tend = s + size - 1;\n\twhile (end >= s && isspace(*end))\n\t\tend--;\n\t*(end + 1) = '\\0';\n\n\treturn skip_spaces(s);\n}\n\n \nchar *strreplace(char *s, char old, char new)\n{\n\tfor (; *s; ++s)\n\t\tif (*s == old)\n\t\t\t*s = new;\n\treturn s;\n}\n\nstatic void *check_bytes8(const u8 *start, u8 value, unsigned int bytes)\n{\n\twhile (bytes) {\n\t\tif (*start != value)\n\t\t\treturn (void *)start;\n\t\tstart++;\n\t\tbytes--;\n\t}\n\treturn NULL;\n}\n\n \nvoid *memchr_inv(const void *start, int c, size_t bytes)\n{\n\tu8 value = c;\n\tu64 value64;\n\tunsigned int words, prefix;\n\n\tif (bytes <= 16)\n\t\treturn check_bytes8(start, value, bytes);\n\n\tvalue64 = value;\n\tvalue64 |= value64 << 8;\n\tvalue64 |= value64 << 16;\n\tvalue64 |= value64 << 32;\n\n\tprefix = (unsigned long)start % 8;\n\tif (prefix) {\n\t\tu8 *r;\n\n\t\tprefix = 8 - prefix;\n\t\tr = check_bytes8(start, value, prefix);\n\t\tif (r)\n\t\t\treturn r;\n\t\tstart += prefix;\n\t\tbytes -= prefix;\n\t}\n\n\twords = bytes / 8;\n\n\twhile (words) {\n\t\tif (*(u64 *)start != value64)\n\t\t\treturn check_bytes8(start, value, 8);\n\t\tstart += 8;\n\t\twords--;\n\t}\n\n\treturn check_bytes8(start, value, bytes % 8);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}