{
  "module_name": "bpf_helpers.h",
  "hash_id": "577ad52d91a1af134b27692a6c7496d5bce3c4fc0e4c7371aefc0105d0b4d007",
  "original_prompt": "Ingested from linux-6.6.14/tools/lib/bpf/bpf_helpers.h",
  "human_readable_source": " \n#ifndef __BPF_HELPERS__\n#define __BPF_HELPERS__\n\n \n#include \"bpf_helper_defs.h\"\n\n#define __uint(name, val) int (*name)[val]\n#define __type(name, val) typeof(val) *name\n#define __array(name, val) typeof(val) *name[]\n\n \n#if __GNUC__ && !__clang__\n\n \n#define SEC(name) __attribute__((section(name), used))\n\n#else\n\n#define SEC(name) \\\n\t_Pragma(\"GCC diagnostic push\")\t\t\t\t\t    \\\n\t_Pragma(\"GCC diagnostic ignored \\\"-Wignored-attributes\\\"\")\t    \\\n\t__attribute__((section(name), used))\t\t\t\t    \\\n\t_Pragma(\"GCC diagnostic pop\")\t\t\t\t\t    \\\n\n#endif\n\n \n#undef __always_inline\n#define __always_inline inline __attribute__((always_inline))\n\n#ifndef __noinline\n#define __noinline __attribute__((noinline))\n#endif\n#ifndef __weak\n#define __weak __attribute__((weak))\n#endif\n\n \n#define __hidden __attribute__((visibility(\"hidden\")))\n\n \n#ifndef NULL\n#define NULL ((void *)0)\n#endif\n\n#ifndef KERNEL_VERSION\n#define KERNEL_VERSION(a, b, c) (((a) << 16) + ((b) << 8) + ((c) > 255 ? 255 : (c)))\n#endif\n\n \n\n \n#undef offsetof\n#define offsetof(type, member)\t((unsigned long)&((type *)0)->member)\n\n \n#undef container_of\n#define container_of(ptr, type, member)\t\t\t\t\\\n\t({\t\t\t\t\t\t\t\\\n\t\tvoid *__mptr = (void *)(ptr);\t\t\t\\\n\t\t((type *)(__mptr - offsetof(type, member)));\t\\\n\t})\n\n \n#ifndef barrier\n#define barrier() asm volatile(\"\" ::: \"memory\")\n#endif\n\n \n#ifndef barrier_var\n#define barrier_var(var) asm volatile(\"\" : \"+r\"(var))\n#endif\n\n \n#ifndef __bpf_unreachable\n# define __bpf_unreachable()\t__builtin_trap()\n#endif\n\n \n#if __clang_major__ >= 8 && defined(__bpf__)\nstatic __always_inline void\nbpf_tail_call_static(void *ctx, const void *map, const __u32 slot)\n{\n\tif (!__builtin_constant_p(slot))\n\t\t__bpf_unreachable();\n\n\t \n\tasm volatile(\"r1 = %[ctx]\\n\\t\"\n\t\t     \"r2 = %[map]\\n\\t\"\n\t\t     \"r3 = %[slot]\\n\\t\"\n\t\t     \"call 12\"\n\t\t     :: [ctx]\"r\"(ctx), [map]\"r\"(map), [slot]\"i\"(slot)\n\t\t     : \"r0\", \"r1\", \"r2\", \"r3\", \"r4\", \"r5\");\n}\n#endif\n\nenum libbpf_pin_type {\n\tLIBBPF_PIN_NONE,\n\t \n\tLIBBPF_PIN_BY_NAME,\n};\n\nenum libbpf_tristate {\n\tTRI_NO = 0,\n\tTRI_YES = 1,\n\tTRI_MODULE = 2,\n};\n\n#define __kconfig __attribute__((section(\".kconfig\")))\n#define __ksym __attribute__((section(\".ksyms\")))\n#define __kptr_untrusted __attribute__((btf_type_tag(\"kptr_untrusted\")))\n#define __kptr __attribute__((btf_type_tag(\"kptr\")))\n\n#define bpf_ksym_exists(sym) ({\t\t\t\t\t\t\t\t\t\\\n\t_Static_assert(!__builtin_constant_p(!!sym), #sym \" should be marked as __weak\");\t\\\n\t!!sym;\t\t\t\t\t\t\t\t\t\t\t\\\n})\n\n#ifndef ___bpf_concat\n#define ___bpf_concat(a, b) a ## b\n#endif\n#ifndef ___bpf_apply\n#define ___bpf_apply(fn, n) ___bpf_concat(fn, n)\n#endif\n#ifndef ___bpf_nth\n#define ___bpf_nth(_, _1, _2, _3, _4, _5, _6, _7, _8, _9, _a, _b, _c, N, ...) N\n#endif\n#ifndef ___bpf_narg\n#define ___bpf_narg(...) \\\n\t___bpf_nth(_, ##__VA_ARGS__, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0)\n#endif\n\n#define ___bpf_fill0(arr, p, x) do {} while (0)\n#define ___bpf_fill1(arr, p, x) arr[p] = x\n#define ___bpf_fill2(arr, p, x, args...) arr[p] = x; ___bpf_fill1(arr, p + 1, args)\n#define ___bpf_fill3(arr, p, x, args...) arr[p] = x; ___bpf_fill2(arr, p + 1, args)\n#define ___bpf_fill4(arr, p, x, args...) arr[p] = x; ___bpf_fill3(arr, p + 1, args)\n#define ___bpf_fill5(arr, p, x, args...) arr[p] = x; ___bpf_fill4(arr, p + 1, args)\n#define ___bpf_fill6(arr, p, x, args...) arr[p] = x; ___bpf_fill5(arr, p + 1, args)\n#define ___bpf_fill7(arr, p, x, args...) arr[p] = x; ___bpf_fill6(arr, p + 1, args)\n#define ___bpf_fill8(arr, p, x, args...) arr[p] = x; ___bpf_fill7(arr, p + 1, args)\n#define ___bpf_fill9(arr, p, x, args...) arr[p] = x; ___bpf_fill8(arr, p + 1, args)\n#define ___bpf_fill10(arr, p, x, args...) arr[p] = x; ___bpf_fill9(arr, p + 1, args)\n#define ___bpf_fill11(arr, p, x, args...) arr[p] = x; ___bpf_fill10(arr, p + 1, args)\n#define ___bpf_fill12(arr, p, x, args...) arr[p] = x; ___bpf_fill11(arr, p + 1, args)\n#define ___bpf_fill(arr, args...) \\\n\t___bpf_apply(___bpf_fill, ___bpf_narg(args))(arr, 0, args)\n\n \n#define BPF_SEQ_PRINTF(seq, fmt, args...)\t\t\t\\\n({\t\t\t\t\t\t\t\t\\\n\tstatic const char ___fmt[] = fmt;\t\t\t\\\n\tunsigned long long ___param[___bpf_narg(args)];\t\t\\\n\t\t\t\t\t\t\t\t\\\n\t_Pragma(\"GCC diagnostic push\")\t\t\t\t\\\n\t_Pragma(\"GCC diagnostic ignored \\\"-Wint-conversion\\\"\")\t\\\n\t___bpf_fill(___param, args);\t\t\t\t\\\n\t_Pragma(\"GCC diagnostic pop\")\t\t\t\t\\\n\t\t\t\t\t\t\t\t\\\n\tbpf_seq_printf(seq, ___fmt, sizeof(___fmt),\t\t\\\n\t\t       ___param, sizeof(___param));\t\t\\\n})\n\n \n#define BPF_SNPRINTF(out, out_size, fmt, args...)\t\t\\\n({\t\t\t\t\t\t\t\t\\\n\tstatic const char ___fmt[] = fmt;\t\t\t\\\n\tunsigned long long ___param[___bpf_narg(args)];\t\t\\\n\t\t\t\t\t\t\t\t\\\n\t_Pragma(\"GCC diagnostic push\")\t\t\t\t\\\n\t_Pragma(\"GCC diagnostic ignored \\\"-Wint-conversion\\\"\")\t\\\n\t___bpf_fill(___param, args);\t\t\t\t\\\n\t_Pragma(\"GCC diagnostic pop\")\t\t\t\t\\\n\t\t\t\t\t\t\t\t\\\n\tbpf_snprintf(out, out_size, ___fmt,\t\t\t\\\n\t\t     ___param, sizeof(___param));\t\t\\\n})\n\n#ifdef BPF_NO_GLOBAL_DATA\n#define BPF_PRINTK_FMT_MOD\n#else\n#define BPF_PRINTK_FMT_MOD static const\n#endif\n\n#define __bpf_printk(fmt, ...)\t\t\t\t\\\n({\t\t\t\t\t\t\t\\\n\tBPF_PRINTK_FMT_MOD char ____fmt[] = fmt;\t\\\n\tbpf_trace_printk(____fmt, sizeof(____fmt),\t\\\n\t\t\t ##__VA_ARGS__);\t\t\\\n})\n\n \n#define __bpf_vprintk(fmt, args...)\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\\\n\tstatic const char ___fmt[] = fmt;\t\t\t\\\n\tunsigned long long ___param[___bpf_narg(args)];\t\t\\\n\t\t\t\t\t\t\t\t\\\n\t_Pragma(\"GCC diagnostic push\")\t\t\t\t\\\n\t_Pragma(\"GCC diagnostic ignored \\\"-Wint-conversion\\\"\")\t\\\n\t___bpf_fill(___param, args);\t\t\t\t\\\n\t_Pragma(\"GCC diagnostic pop\")\t\t\t\t\\\n\t\t\t\t\t\t\t\t\\\n\tbpf_trace_vprintk(___fmt, sizeof(___fmt),\t\t\\\n\t\t\t  ___param, sizeof(___param));\t\t\\\n})\n\n \n#define ___bpf_pick_printk(...) \\\n\t___bpf_nth(_, ##__VA_ARGS__, __bpf_vprintk, __bpf_vprintk, __bpf_vprintk,\t\\\n\t\t   __bpf_vprintk, __bpf_vprintk, __bpf_vprintk, __bpf_vprintk,\t\t\\\n\t\t   __bpf_vprintk, __bpf_vprintk, __bpf_printk  , __bpf_printk  ,\\\n\t\t   __bpf_printk  , __bpf_printk  )\n\n \n#define bpf_printk(fmt, args...) ___bpf_pick_printk(args)(fmt, ##args)\n\nstruct bpf_iter_num;\n\nextern int bpf_iter_num_new(struct bpf_iter_num *it, int start, int end) __weak __ksym;\nextern int *bpf_iter_num_next(struct bpf_iter_num *it) __weak __ksym;\nextern void bpf_iter_num_destroy(struct bpf_iter_num *it) __weak __ksym;\n\n#ifndef bpf_for_each\n \n#define bpf_for_each(type, cur, args...) for (\t\t\t\t\t\t\t\\\n\t \t\t\t\t\t\t\t\\\n\tstruct bpf_iter_##type ___it __attribute__((aligned(8),  ,\t\\\n\t\t\t\t\t\t    cleanup(bpf_iter_##type##_destroy))),\t\\\n\t \t\t\\\n\t\t\t       *___p __attribute__((unused)) = (\t\t\t\t\\\n\t\t\t\t\tbpf_iter_##type##_new(&___it, ##args),\t\t\t\\\n\t \t\t\t\\\n\t \t\t\\\n\t\t\t\t\t(void)bpf_iter_##type##_destroy, (void *)0);\t\t\\\n\t \t\t\t\t\t\t\t\\\n\t(((cur) = bpf_iter_##type##_next(&___it)));\t\t\t\t\t\t\\\n)\n#endif  \n\n#ifndef bpf_for\n \n#define bpf_for(i, start, end) for (\t\t\t\t\t\t\t\t\\\n\t \t\t\t\t\t\t\t\\\n\tstruct bpf_iter_num ___it __attribute__((aligned(8),  \t\\\n\t\t\t\t\t\t cleanup(bpf_iter_num_destroy))),\t\t\\\n\t \t\t\\\n\t\t\t    *___p __attribute__((unused)) = (\t\t\t\t\t\\\n\t\t\t\tbpf_iter_num_new(&___it, (start), (end)),\t\t\t\\\n\t \t\t\t\\\n\t \t\t\t\\\n\t\t\t\t(void)bpf_iter_num_destroy, (void *)0);\t\t\t\t\\\n\t({\t\t\t\t\t\t\t\t\t\t\t\\\n\t\t \t\t\t\t\t\t\t\t\\\n\t\tint *___t = bpf_iter_num_next(&___it);\t\t\t\t\t\t\\\n\t\t \t\t\t\t\t\t\\\n\t\t(___t && ((i) = *___t, (i) >= (start) && (i) < (end)));\t\t\t\t\\\n\t});\t\t\t\t\t\t\t\t\t\t\t\\\n)\n#endif  \n\n#ifndef bpf_repeat\n \n#define bpf_repeat(N) for (\t\t\t\t\t\t\t\t\t\\\n\t \t\t\t\t\t\t\t\\\n\tstruct bpf_iter_num ___it __attribute__((aligned(8),  \t\\\n\t\t\t\t\t\t cleanup(bpf_iter_num_destroy))),\t\t\\\n\t \t\t\\\n\t\t\t    *___p __attribute__((unused)) = (\t\t\t\t\t\\\n\t\t\t\tbpf_iter_num_new(&___it, 0, (N)),\t\t\t\t\\\n\t \t\t\t\\\n\t \t\t\t\\\n\t\t\t\t(void)bpf_iter_num_destroy, (void *)0);\t\t\t\t\\\n\tbpf_iter_num_next(&___it);\t\t\t\t\t\t\t\t\\\n\t \t\t\t\t\t\t\t\t\t\\\n)\n#endif  \n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}