{
  "module_name": "thermal.c",
  "hash_id": "474dfe9c7caf86da5984a4f1b730c53a8f460cf1e2c51548cfa994d794c631a4",
  "original_prompt": "Ingested from linux-6.6.14/tools/lib/thermal/thermal.c",
  "human_readable_source": "\n\n#include <stdio.h>\n#include <thermal.h>\n\n#include \"thermal_nl.h\"\n\nint for_each_thermal_cdev(struct thermal_cdev *cdev, cb_tc_t cb, void *arg)\n{\n\tint i, ret = 0;\n\n\tif (!cdev)\n\t\treturn 0;\n\n\tfor (i = 0; cdev[i].id != -1; i++)\n\t\tret |= cb(&cdev[i], arg);\n\n\treturn ret;\n}\n\nint for_each_thermal_trip(struct thermal_trip *tt, cb_tt_t cb, void *arg)\n{\n\tint i, ret = 0;\n\n\tif (!tt)\n\t\treturn 0;\n\n\tfor (i = 0; tt[i].id != -1; i++)\n\t\tret |= cb(&tt[i], arg);\n\n\treturn ret;\n}\n\nint for_each_thermal_zone(struct thermal_zone *tz, cb_tz_t cb, void *arg)\n{\n\tint i, ret = 0;\n\n\tif (!tz)\n\t\treturn 0;\n\n\tfor (i = 0; tz[i].id != -1; i++)\n\t\tret |= cb(&tz[i], arg);\n\n\treturn ret;\n}\n\nstruct thermal_zone *thermal_zone_find_by_name(struct thermal_zone *tz,\n\t\t\t\t\t       const char *name)\n{\n\tint i;\n\n\tif (!tz || !name)\n\t\treturn NULL;\n\n\tfor (i = 0; tz[i].id != -1; i++) {\n\t\tif (!strcmp(tz[i].name, name))\n\t\t\treturn &tz[i];\n\t}\n\n\treturn NULL;\n}\n\nstruct thermal_zone *thermal_zone_find_by_id(struct thermal_zone *tz, int id)\n{\n\tint i;\n\n\tif (!tz || id < 0)\n\t\treturn NULL;\n\n\tfor (i = 0; tz[i].id != -1; i++) {\n\t\tif (tz[i].id == id)\n\t\t\treturn &tz[i];\n\t}\n\n\treturn NULL;\n}\n\nstatic int __thermal_zone_discover(struct thermal_zone *tz, void *th)\n{\n\tif (thermal_cmd_get_trip(th, tz) < 0)\n\t\treturn -1;\n\n\tif (thermal_cmd_get_governor(th, tz))\n\t\treturn -1;\n\n\treturn 0;\n}\n\nstruct thermal_zone *thermal_zone_discover(struct thermal_handler *th)\n{\n\tstruct thermal_zone *tz;\n\n\tif (thermal_cmd_get_tz(th, &tz) < 0)\n\t\treturn NULL;\n\n\tif (for_each_thermal_zone(tz, __thermal_zone_discover, th))\n\t\treturn NULL;\n\n\treturn tz;\n}\n\nvoid thermal_exit(struct thermal_handler *th)\n{\n\tthermal_cmd_exit(th);\n\tthermal_events_exit(th);\n\tthermal_sampling_exit(th);\n\n\tfree(th);\n}\n\nstruct thermal_handler *thermal_init(struct thermal_ops *ops)\n{\n\tstruct thermal_handler *th;\n\n\tth = malloc(sizeof(*th));\n\tif (!th)\n\t\treturn NULL;\n\tth->ops = ops;\n\n\tif (thermal_events_init(th))\n\t\tgoto out_free;\n\n\tif (thermal_sampling_init(th))\n\t\tgoto out_free;\n\n\tif (thermal_cmd_init(th))\n\t\tgoto out_free;\n\n\treturn th;\n\nout_free:\n\tfree(th);\n\n\treturn NULL;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}