{
  "module_name": "Makefile",
  "hash_id": "dbcc2c6a616c48c716b96b49acbfe065513d204b03e21772763309f4978a95ee",
  "original_prompt": "Ingested from linux-6.6.14/tools/lib/thermal/Makefile",
  "human_readable_source": "# SPDX-License-Identifier: (LGPL-2.1 OR BSD-2-Clause)\n# Most of this file is copied from tools/lib/perf/Makefile\n\nLIBTHERMAL_VERSION = 0\nLIBTHERMAL_PATCHLEVEL = 0\nLIBTHERMAL_EXTRAVERSION = 1\n\nMAKEFLAGS += --no-print-directory\n\nifeq ($(srctree),)\nsrctree := $(patsubst %/,%,$(dir $(CURDIR)))\nsrctree := $(patsubst %/,%,$(dir $(srctree)))\nsrctree := $(patsubst %/,%,$(dir $(srctree)))\n# $(info Determined 'srctree' to be $(srctree))\nendif\n\nINSTALL = install\n\n# Use DESTDIR for installing into a different root directory.\n# This is useful for building a package. The program will be\n# installed in this directory as if it was the root directory.\n# Then the build tool can move it later.\nDESTDIR ?=\nDESTDIR_SQ = '$(subst ','\\'',$(DESTDIR))'\n\ninclude $(srctree)/tools/scripts/Makefile.include\ninclude $(srctree)/tools/scripts/Makefile.arch\n\nifeq ($(LP64), 1)\n  libdir_relative = lib64\nelse\n  libdir_relative = lib\nendif\n\nprefix ?=\nlibdir = $(prefix)/$(libdir_relative)\n\n# Shell quotes\nlibdir_SQ = $(subst ','\\'',$(libdir))\nlibdir_relative_SQ = $(subst ','\\'',$(libdir_relative))\n\nifeq (\"$(origin V)\", \"command line\")\n  VERBOSE = $(V)\nendif\nifndef VERBOSE\n  VERBOSE = 0\nendif\n\nifeq ($(VERBOSE),1)\n  Q =\nelse\n  Q = @\nendif\n\n# Set compile option CFLAGS\nifdef EXTRA_CFLAGS\n  CFLAGS := $(EXTRA_CFLAGS)\nelse\n  CFLAGS := -g -Wall\nendif\n\nINCLUDES = \\\n-I/usr/include/libnl3 \\\n-I$(srctree)/tools/lib/thermal/include \\\n-I$(srctree)/tools/lib/ \\\n-I$(srctree)/tools/include \\\n-I$(srctree)/tools/arch/$(SRCARCH)/include/ \\\n-I$(srctree)/tools/arch/$(SRCARCH)/include/uapi \\\n-I$(srctree)/tools/include/uapi\n\n# Append required CFLAGS\noverride CFLAGS += $(EXTRA_WARNINGS)\noverride CFLAGS += -Werror -Wall\noverride CFLAGS += -fPIC\noverride CFLAGS += $(INCLUDES)\noverride CFLAGS += -fvisibility=hidden\noverride CFGLAS += -Wl,-L.\noverride CFGLAS += -Wl,-lthermal\n\nall:\n\nexport srctree OUTPUT CC LD CFLAGS V\nexport DESTDIR DESTDIR_SQ\n\ninclude $(srctree)/tools/build/Makefile.include\n\nVERSION_SCRIPT := libthermal.map\n\nPATCHLEVEL    = $(LIBTHERMAL_PATCHLEVEL)\nEXTRAVERSION  = $(LIBTHERMAL_EXTRAVERSION)\nVERSION       = $(LIBTHERMAL_VERSION).$(LIBTHERMAL_PATCHLEVEL).$(LIBTHERMAL_EXTRAVERSION)\n\nLIBTHERMAL_SO := $(OUTPUT)libthermal.so.$(VERSION)\nLIBTHERMAL_A  := $(OUTPUT)libthermal.a\nLIBTHERMAL_IN := $(OUTPUT)libthermal-in.o\nLIBTHERMAL_PC := $(OUTPUT)libthermal.pc\nLIBTHERMAL_ALL := $(LIBTHERMAL_A) $(OUTPUT)libthermal.so*\n\nTHERMAL_UAPI := include/uapi/linux/thermal.h\n\n$(THERMAL_UAPI): FORCE\n\tln -sf $(srctree)/$@ $(srctree)/tools/$@\n\n$(LIBTHERMAL_IN): FORCE\n\t$(Q)$(MAKE) $(build)=libthermal\n\n$(LIBTHERMAL_A): $(LIBTHERMAL_IN)\n\t$(QUIET_AR)$(RM) $@ && $(AR) rcs $@ $(LIBTHERMAL_IN)\n\n$(LIBTHERMAL_SO): $(LIBTHERMAL_IN)\n\t$(QUIET_LINK)$(CC) --shared -Wl,-soname,libthermal.so \\\n                                    -Wl,--version-script=$(VERSION_SCRIPT) $^ -o $@\n\t@ln -sf $(@F) $(OUTPUT)libthermal.so\n\t@ln -sf $(@F) $(OUTPUT)libthermal.so.$(LIBTHERMAL_VERSION)\n\n\nlibs: $(THERMAL_UAPI) $(LIBTHERMAL_A) $(LIBTHERMAL_SO) $(LIBTHERMAL_PC)\n\nall: fixdep\n\t$(Q)$(MAKE) libs\n\nclean:\n\t$(call QUIET_CLEAN, libthermal) $(RM) $(LIBTHERMAL_A) \\\n                *.o *~ *.a *.so *.so.$(VERSION) *.so.$(LIBTHERMAL_VERSION) .*.d .*.cmd LIBTHERMAL-CFLAGS $(LIBTHERMAL_PC)\n\n$(LIBTHERMAL_PC):\n\t$(QUIET_GEN)sed -e \"s|@PREFIX@|$(prefix)|\" \\\n\t\t-e \"s|@LIBDIR@|$(libdir_SQ)|\" \\\n\t\t-e \"s|@VERSION@|$(VERSION)|\" \\\n\t\t< libthermal.pc.template > $@\n\ndefine do_install_mkdir\n\tif [ ! -d '$(DESTDIR_SQ)$1' ]; then             \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$1'; \\\n\tfi\nendef\n\ndefine do_install\n\tif [ ! -d '$(DESTDIR_SQ)$2' ]; then             \\\n\t\t$(INSTALL) -d -m 755 '$(DESTDIR_SQ)$2'; \\\n\tfi;                                             \\\n\t$(INSTALL) $1 $(if $3,-m $3,) '$(DESTDIR_SQ)$2'\nendef\n\ninstall_lib: libs\n\t$(call QUIET_INSTALL, $(LIBTHERMAL_ALL)) \\\n\t\t$(call do_install_mkdir,$(libdir_SQ)); \\\n\t\tcp -fpR $(LIBTHERMAL_ALL) $(DESTDIR)$(libdir_SQ)\n\ninstall_headers:\n\t$(call QUIET_INSTALL, headers) \\\n\t\t$(call do_install,include/thermal.h,$(prefix)/include/thermal,644); \\\n\ninstall_pkgconfig: $(LIBTHERMAL_PC)\n\t$(call QUIET_INSTALL, $(LIBTHERMAL_PC)) \\\n\t\t$(call do_install,$(LIBTHERMAL_PC),$(libdir_SQ)/pkgconfig,644)\n\ninstall_doc:\n\t$(Q)$(MAKE) -C Documentation install-man install-html install-examples\n\ninstall: install_lib install_headers install_pkgconfig\n\nFORCE:\n\n.PHONY: all install clean FORCE\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}