{
  "module_name": "tests.h",
  "hash_id": "52d7ae7a6d78445dd0cf8fe67aca898280ab4d1aef0c6e80734a24b019cde534",
  "original_prompt": "Ingested from linux-6.6.14/tools/lib/perf/include/internal/tests.h",
  "human_readable_source": " \n#ifndef __LIBPERF_INTERNAL_TESTS_H\n#define __LIBPERF_INTERNAL_TESTS_H\n\n#include <stdio.h>\n#include <unistd.h>\n\nextern int tests_failed;\nextern int tests_verbose;\n\nstatic inline int get_verbose(char **argv, int argc)\n{\n\tint c;\n\tint verbose = 0;\n\n\twhile ((c = getopt(argc, argv, \"v\")) != -1) {\n\t\tswitch (c)\n\t\t{\n\t\tcase 'v':\n\t\t\tverbose = 1;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}\n\toptind = 1;\n\n\treturn verbose;\n}\n\n#define __T_START\t\t\t\t\t\\\ndo {\t\t\t\t\t\t\t\\\n\ttests_verbose = get_verbose(argv, argc);\t\\\n\tfprintf(stdout, \"- running %s...\", __FILE__);\t\\\n\tfflush(NULL);\t\t\t\t\t\\\n\ttests_failed = 0;\t\t\t\t\\\n} while (0)\n\n#define __T_END\t\t\t\t\t\t\t\t\\\ndo {\t\t\t\t\t\t\t\t\t\\\n\tif (tests_failed)\t\t\t\t\t\t\\\n\t\tfprintf(stdout, \"  FAILED (%d)\\n\", tests_failed);\t\\\n\telse\t\t\t\t\t\t\t\t\\\n\t\tfprintf(stdout, \"OK\\n\");\t\t\t\t\\\n} while (0)\n\n#define __T(text, cond)                                                          \\\ndo {                                                                             \\\n\tif (!(cond)) {                                                           \\\n\t\tfprintf(stderr, \"FAILED %s:%d %s\\n\", __FILE__, __LINE__, text);  \\\n\t\ttests_failed++;                                                  \\\n\t\treturn -1;                                                       \\\n\t}                                                                        \\\n} while (0)\n\n#define __T_VERBOSE(...)\t\t\t\t\t\t\\\ndo {\t\t\t\t\t\t\t\t\t\\\n\tif (tests_verbose) {\t\t\t\t\t\t\\\n\t\tif (tests_verbose == 1) {\t\t\t\t\\\n\t\t\tfputc('\\n', stderr);\t\t\t\t\\\n\t\t\ttests_verbose++;\t\t\t\t\\\n\t\t}\t\t\t\t\t\t\t\\\n\t\tfprintf(stderr, ##__VA_ARGS__);\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n} while (0)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}