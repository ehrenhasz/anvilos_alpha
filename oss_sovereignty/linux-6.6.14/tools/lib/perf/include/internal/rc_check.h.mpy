{
  "module_name": "rc_check.h",
  "hash_id": "4e662a3220f92b15b4981ac32a95cac674274de997ec44685c8ccc8663089fad",
  "original_prompt": "Ingested from linux-6.6.14/tools/lib/perf/include/internal/rc_check.h",
  "human_readable_source": " \n#ifndef __LIBPERF_INTERNAL_RC_CHECK_H\n#define __LIBPERF_INTERNAL_RC_CHECK_H\n\n#include <stdlib.h>\n#include <linux/zalloc.h>\n\n \n#if defined(__SANITIZE_ADDRESS__) || defined(LEAK_SANITIZER) || defined(ADDRESS_SANITIZER)\n#define REFCNT_CHECKING 1\n#elif defined(__has_feature)\n#if __has_feature(address_sanitizer) || __has_feature(leak_sanitizer)\n#define REFCNT_CHECKING 1\n#endif\n#endif\n\n \n\n#ifndef REFCNT_CHECKING\n \n#define DECLARE_RC_STRUCT(struct_name)\t\t\\\n\tstruct struct_name\n\n \n#define RC_STRUCT(struct_name) struct struct_name\n\n \n#define ADD_RC_CHK(result, object) (result = object, object)\n\n \n#define RC_CHK_ACCESS(object) object\n\n \n#define RC_CHK_FREE(object) free(object)\n\n \n#define RC_CHK_GET(result, object) ADD_RC_CHK(result, object)\n\n \n#define RC_CHK_PUT(object) {}\n\n#else\n\n \n#define DECLARE_RC_STRUCT(struct_name)\t\t\t\\\n\tstruct original_##struct_name;\t\t\t\\\n\tstruct struct_name {\t\t\t\t\\\n\t\tstruct original_##struct_name *orig;\t\\\n\t};\t\t\t\t\t\t\\\n\tstruct original_##struct_name\n\n \n#define RC_STRUCT(struct_name) struct original_##struct_name\n\n \n#define ADD_RC_CHK(result, object)\t\t\t\t\t\\\n\t(\t\t\t\t\t\t\t\t\\\n\t\tobject ? (result = malloc(sizeof(*result)),\t\t\\\n\t\t\tresult ? (result->orig = object, result)\t\\\n\t\t\t: (result = NULL, NULL))\t\t\t\\\n\t\t: (result = NULL, NULL)\t\t\t\t\t\\\n\t\t)\n\n \n#define RC_CHK_ACCESS(object) object->orig\n\n \n#define RC_CHK_FREE(object)\t\t\t\\\n\tdo {\t\t\t\t\t\\\n\t\tzfree(&object->orig);\t\t\\\n\t\tfree(object);\t\t\t\\\n\t} while(0)\n\n \n#define RC_CHK_GET(result, object) ADD_RC_CHK(result, (object ? object->orig : NULL))\n\n \n#define RC_CHK_PUT(object)\t\t\t\\\n\tdo {\t\t\t\t\t\\\n\t\tif (object) {\t\t\t\\\n\t\t\tobject->orig = NULL;\t\\\n\t\t\tfree(object);\t\t\\\n\t\t}\t\t\t\t\\\n\t} while(0)\n\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}