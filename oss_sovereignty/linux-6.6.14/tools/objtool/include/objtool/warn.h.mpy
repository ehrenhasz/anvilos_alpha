{
  "module_name": "warn.h",
  "hash_id": "c3f9ab7903d862ada7a7b1f609ae865d4fff846a05830c36b3d48c9367a1dc1f",
  "original_prompt": "Ingested from linux-6.6.14/tools/objtool/include/objtool/warn.h",
  "human_readable_source": " \n \n\n#ifndef _WARN_H\n#define _WARN_H\n\n#include <stdlib.h>\n#include <string.h>\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <fcntl.h>\n#include <objtool/builtin.h>\n#include <objtool/elf.h>\n\nextern const char *objname;\n\nstatic inline char *offstr(struct section *sec, unsigned long offset)\n{\n\tbool is_text = (sec->sh.sh_flags & SHF_EXECINSTR);\n\tstruct symbol *sym = NULL;\n\tchar *str;\n\tint len;\n\n\tif (is_text)\n\t\tsym = find_func_containing(sec, offset);\n\tif (!sym)\n\t\tsym = find_symbol_containing(sec, offset);\n\n\tif (sym) {\n\t\tstr = malloc(strlen(sym->name) + strlen(sec->name) + 40);\n\t\tlen = sprintf(str, \"%s+0x%lx\", sym->name, offset - sym->offset);\n\t\tif (opts.sec_address)\n\t\t\tsprintf(str+len, \" (%s+0x%lx)\", sec->name, offset);\n\t} else {\n\t\tstr = malloc(strlen(sec->name) + 20);\n\t\tsprintf(str, \"%s+0x%lx\", sec->name, offset);\n\t}\n\n\treturn str;\n}\n\n#define WARN(format, ...)\t\t\t\t\\\n\tfprintf(stderr,\t\t\t\t\t\\\n\t\t\"%s: warning: objtool: \" format \"\\n\",\t\\\n\t\tobjname, ##__VA_ARGS__)\n\n#define WARN_FUNC(format, sec, offset, ...)\t\t\\\n({\t\t\t\t\t\t\t\\\n\tchar *_str = offstr(sec, offset);\t\t\\\n\tWARN(\"%s: \" format, _str, ##__VA_ARGS__);\t\\\n\tfree(_str);\t\t\t\t\t\\\n})\n\n#define WARN_INSN(insn, format, ...)\t\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\t\\\n\tstruct instruction *_insn = (insn);\t\t\t\t\\\n\tif (!_insn->sym || !_insn->sym->warned)\t\t\t\t\\\n\t\tWARN_FUNC(format, _insn->sec, _insn->offset,\t\t\\\n\t\t\t  ##__VA_ARGS__);\t\t\t\t\\\n\tif (_insn->sym)\t\t\t\t\t\t\t\\\n\t\t_insn->sym->warned = 1;\t\t\t\t\t\\\n})\n\n#define BT_INSN(insn, format, ...)\t\t\t\t\\\n({\t\t\t\t\t\t\t\t\\\n\tif (opts.verbose || opts.backtrace) {\t\t\t\\\n\t\tstruct instruction *_insn = (insn);\t\t\\\n\t\tchar *_str = offstr(_insn->sec, _insn->offset); \\\n\t\tWARN(\"  %s: \" format, _str, ##__VA_ARGS__);\t\\\n\t\tfree(_str);\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n})\n\n#define WARN_ELF(format, ...)\t\t\t\t\\\n\tWARN(format \": %s\", ##__VA_ARGS__, elf_errmsg(-1))\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}