{
  "module_name": "interval_tree.c",
  "hash_id": "445ff6aabbc0a2da42c33b61568e07deca199e6709777a906a1b2cc0bbac076b",
  "original_prompt": "Ingested from linux-6.6.14/mm/interval_tree.c",
  "human_readable_source": "\n \n\n#include <linux/mm.h>\n#include <linux/fs.h>\n#include <linux/rmap.h>\n#include <linux/interval_tree_generic.h>\n\nstatic inline unsigned long vma_start_pgoff(struct vm_area_struct *v)\n{\n\treturn v->vm_pgoff;\n}\n\nstatic inline unsigned long vma_last_pgoff(struct vm_area_struct *v)\n{\n\treturn v->vm_pgoff + vma_pages(v) - 1;\n}\n\nINTERVAL_TREE_DEFINE(struct vm_area_struct, shared.rb,\n\t\t     unsigned long, shared.rb_subtree_last,\n\t\t     vma_start_pgoff, vma_last_pgoff,  , vma_interval_tree)\n\n \nvoid vma_interval_tree_insert_after(struct vm_area_struct *node,\n\t\t\t\t    struct vm_area_struct *prev,\n\t\t\t\t    struct rb_root_cached *root)\n{\n\tstruct rb_node **link;\n\tstruct vm_area_struct *parent;\n\tunsigned long last = vma_last_pgoff(node);\n\n\tVM_BUG_ON_VMA(vma_start_pgoff(node) != vma_start_pgoff(prev), node);\n\n\tif (!prev->shared.rb.rb_right) {\n\t\tparent = prev;\n\t\tlink = &prev->shared.rb.rb_right;\n\t} else {\n\t\tparent = rb_entry(prev->shared.rb.rb_right,\n\t\t\t\t  struct vm_area_struct, shared.rb);\n\t\tif (parent->shared.rb_subtree_last < last)\n\t\t\tparent->shared.rb_subtree_last = last;\n\t\twhile (parent->shared.rb.rb_left) {\n\t\t\tparent = rb_entry(parent->shared.rb.rb_left,\n\t\t\t\tstruct vm_area_struct, shared.rb);\n\t\t\tif (parent->shared.rb_subtree_last < last)\n\t\t\t\tparent->shared.rb_subtree_last = last;\n\t\t}\n\t\tlink = &parent->shared.rb.rb_left;\n\t}\n\n\tnode->shared.rb_subtree_last = last;\n\trb_link_node(&node->shared.rb, &parent->shared.rb, link);\n\trb_insert_augmented(&node->shared.rb, &root->rb_root,\n\t\t\t    &vma_interval_tree_augment);\n}\n\nstatic inline unsigned long avc_start_pgoff(struct anon_vma_chain *avc)\n{\n\treturn vma_start_pgoff(avc->vma);\n}\n\nstatic inline unsigned long avc_last_pgoff(struct anon_vma_chain *avc)\n{\n\treturn vma_last_pgoff(avc->vma);\n}\n\nINTERVAL_TREE_DEFINE(struct anon_vma_chain, rb, unsigned long, rb_subtree_last,\n\t\t     avc_start_pgoff, avc_last_pgoff,\n\t\t     static inline, __anon_vma_interval_tree)\n\nvoid anon_vma_interval_tree_insert(struct anon_vma_chain *node,\n\t\t\t\t   struct rb_root_cached *root)\n{\n#ifdef CONFIG_DEBUG_VM_RB\n\tnode->cached_vma_start = avc_start_pgoff(node);\n\tnode->cached_vma_last = avc_last_pgoff(node);\n#endif\n\t__anon_vma_interval_tree_insert(node, root);\n}\n\nvoid anon_vma_interval_tree_remove(struct anon_vma_chain *node,\n\t\t\t\t   struct rb_root_cached *root)\n{\n\t__anon_vma_interval_tree_remove(node, root);\n}\n\nstruct anon_vma_chain *\nanon_vma_interval_tree_iter_first(struct rb_root_cached *root,\n\t\t\t\t  unsigned long first, unsigned long last)\n{\n\treturn __anon_vma_interval_tree_iter_first(root, first, last);\n}\n\nstruct anon_vma_chain *\nanon_vma_interval_tree_iter_next(struct anon_vma_chain *node,\n\t\t\t\t unsigned long first, unsigned long last)\n{\n\treturn __anon_vma_interval_tree_iter_next(node, first, last);\n}\n\n#ifdef CONFIG_DEBUG_VM_RB\nvoid anon_vma_interval_tree_verify(struct anon_vma_chain *node)\n{\n\tWARN_ON_ONCE(node->cached_vma_start != avc_start_pgoff(node));\n\tWARN_ON_ONCE(node->cached_vma_last != avc_last_pgoff(node));\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}