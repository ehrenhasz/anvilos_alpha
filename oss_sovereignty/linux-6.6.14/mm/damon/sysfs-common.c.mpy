{
  "module_name": "sysfs-common.c",
  "hash_id": "4736448532063e05e538785e58ab6c26f21240474115544fb61fff52234bbde2",
  "original_prompt": "Ingested from linux-6.6.14/mm/damon/sysfs-common.c",
  "human_readable_source": "\n \n\n#include <linux/slab.h>\n\n#include \"sysfs-common.h\"\n\nDEFINE_MUTEX(damon_sysfs_lock);\n\n \n\nstruct damon_sysfs_ul_range *damon_sysfs_ul_range_alloc(\n\t\tunsigned long min,\n\t\tunsigned long max)\n{\n\tstruct damon_sysfs_ul_range *range = kmalloc(sizeof(*range),\n\t\t\tGFP_KERNEL);\n\n\tif (!range)\n\t\treturn NULL;\n\trange->kobj = (struct kobject){};\n\trange->min = min;\n\trange->max = max;\n\n\treturn range;\n}\n\nstatic ssize_t min_show(struct kobject *kobj, struct kobj_attribute *attr,\n\t\tchar *buf)\n{\n\tstruct damon_sysfs_ul_range *range = container_of(kobj,\n\t\t\tstruct damon_sysfs_ul_range, kobj);\n\n\treturn sysfs_emit(buf, \"%lu\\n\", range->min);\n}\n\nstatic ssize_t min_store(struct kobject *kobj, struct kobj_attribute *attr,\n\t\tconst char *buf, size_t count)\n{\n\tstruct damon_sysfs_ul_range *range = container_of(kobj,\n\t\t\tstruct damon_sysfs_ul_range, kobj);\n\tunsigned long min;\n\tint err;\n\n\terr = kstrtoul(buf, 0, &min);\n\tif (err)\n\t\treturn err;\n\n\trange->min = min;\n\treturn count;\n}\n\nstatic ssize_t max_show(struct kobject *kobj, struct kobj_attribute *attr,\n\t\tchar *buf)\n{\n\tstruct damon_sysfs_ul_range *range = container_of(kobj,\n\t\t\tstruct damon_sysfs_ul_range, kobj);\n\n\treturn sysfs_emit(buf, \"%lu\\n\", range->max);\n}\n\nstatic ssize_t max_store(struct kobject *kobj, struct kobj_attribute *attr,\n\t\tconst char *buf, size_t count)\n{\n\tstruct damon_sysfs_ul_range *range = container_of(kobj,\n\t\t\tstruct damon_sysfs_ul_range, kobj);\n\tunsigned long max;\n\tint err;\n\n\terr = kstrtoul(buf, 0, &max);\n\tif (err)\n\t\treturn err;\n\n\trange->max = max;\n\treturn count;\n}\n\nvoid damon_sysfs_ul_range_release(struct kobject *kobj)\n{\n\tkfree(container_of(kobj, struct damon_sysfs_ul_range, kobj));\n}\n\nstatic struct kobj_attribute damon_sysfs_ul_range_min_attr =\n\t\t__ATTR_RW_MODE(min, 0600);\n\nstatic struct kobj_attribute damon_sysfs_ul_range_max_attr =\n\t\t__ATTR_RW_MODE(max, 0600);\n\nstatic struct attribute *damon_sysfs_ul_range_attrs[] = {\n\t&damon_sysfs_ul_range_min_attr.attr,\n\t&damon_sysfs_ul_range_max_attr.attr,\n\tNULL,\n};\nATTRIBUTE_GROUPS(damon_sysfs_ul_range);\n\nconst struct kobj_type damon_sysfs_ul_range_ktype = {\n\t.release = damon_sysfs_ul_range_release,\n\t.sysfs_ops = &kobj_sysfs_ops,\n\t.default_groups = damon_sysfs_ul_range_groups,\n};\n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}