{
  "module_name": "kdb_private.h",
  "hash_id": "364eefec9211da224926ef2ed987c90bdb67ac92f159725581763eb160ef45bc",
  "original_prompt": "Ingested from linux-6.6.14/kernel/debug/kdb/kdb_private.h",
  "human_readable_source": "#ifndef _KDBPRIVATE_H\n#define _KDBPRIVATE_H\n\n \n\n#include <linux/kgdb.h>\n#include \"../debug_core.h\"\n\n \n#define KDB_CMD_GO\t(-1001)\n#define KDB_CMD_CPU\t(-1002)\n#define KDB_CMD_SS\t(-1003)\n#define KDB_CMD_KGDB (-1005)\n\n \n#define KDB_DEBUG_FLAG_BP\t0x0002\t \n#define KDB_DEBUG_FLAG_BB_SUMM\t0x0004\t \n#define KDB_DEBUG_FLAG_AR\t0x0008\t \n#define KDB_DEBUG_FLAG_ARA\t0x0010\t \n#define KDB_DEBUG_FLAG_BB\t0x0020\t \n#define KDB_DEBUG_FLAG_STATE\t0x0040\t \n#define KDB_DEBUG_FLAG_MASK\t0xffff\t \n#define KDB_DEBUG_FLAG_SHIFT\t16\t \n\n#define KDB_DEBUG(flag)\t(kdb_flags & \\\n\t(KDB_DEBUG_FLAG_##flag << KDB_DEBUG_FLAG_SHIFT))\n#define KDB_DEBUG_STATE(text, value) if (KDB_DEBUG(STATE)) \\\n\t\tkdb_print_state(text, value)\n\n#if BITS_PER_LONG == 32\n\n#define KDB_PLATFORM_ENV\t\"BYTESPERWORD=4\"\n\n#define kdb_machreg_fmt\t\t\"0x%lx\"\n#define kdb_machreg_fmt0\t\"0x%08lx\"\n#define kdb_bfd_vma_fmt\t\t\"0x%lx\"\n#define kdb_bfd_vma_fmt0\t\"0x%08lx\"\n#define kdb_elfw_addr_fmt\t\"0x%x\"\n#define kdb_elfw_addr_fmt0\t\"0x%08x\"\n#define kdb_f_count_fmt\t\t\"%d\"\n\n#elif BITS_PER_LONG == 64\n\n#define KDB_PLATFORM_ENV\t\"BYTESPERWORD=8\"\n\n#define kdb_machreg_fmt\t\t\"0x%lx\"\n#define kdb_machreg_fmt0\t\"0x%016lx\"\n#define kdb_bfd_vma_fmt\t\t\"0x%lx\"\n#define kdb_bfd_vma_fmt0\t\"0x%016lx\"\n#define kdb_elfw_addr_fmt\t\"0x%x\"\n#define kdb_elfw_addr_fmt0\t\"0x%016x\"\n#define kdb_f_count_fmt\t\t\"%ld\"\n\n#endif\n\n \n#define KDB_MAXBPT\t16\n\n \ntypedef struct __ksymtab {\n\t\tunsigned long value;\t \n\t\tconst char *mod_name;\t \n\t\tunsigned long mod_start;\n\t\tunsigned long mod_end;\n\t\tconst char *sec_name;\t \n\t\tunsigned long sec_start;\n\t\tunsigned long sec_end;\n\t\tconst char *sym_name;\t \n\t\tunsigned long sym_start;\n\t\tunsigned long sym_end;\n\t\t} kdb_symtab_t;\nextern int kallsyms_symbol_next(char *prefix_name, int flag, int buf_size);\nextern int kallsyms_symbol_complete(char *prefix_name, int max_len);\n\n \nextern int kdb_getarea_size(void *, unsigned long, size_t);\nextern int kdb_putarea_size(unsigned long, void *, size_t);\n\n \n#define kdb_getarea(x, addr) kdb_getarea_size(&(x), addr, sizeof((x)))\n#define kdb_putarea(addr, x) kdb_putarea_size(addr, &(x), sizeof((x)))\n\nextern int kdb_getphysword(unsigned long *word,\n\t\t\tunsigned long addr, size_t size);\nextern int kdb_getword(unsigned long *, unsigned long, size_t);\nextern int kdb_putword(unsigned long, unsigned long, size_t);\n\nextern int kdbgetularg(const char *, unsigned long *);\nextern int kdbgetu64arg(const char *, u64 *);\nextern char *kdbgetenv(const char *);\nextern int kdbgetaddrarg(int, const char **, int*, unsigned long *,\n\t\t\t long *, char **);\nextern int kdbgetsymval(const char *, kdb_symtab_t *);\nextern int kdbnearsym(unsigned long, kdb_symtab_t *);\nextern char *kdb_strdup(const char *str, gfp_t type);\nextern void kdb_symbol_print(unsigned long, const kdb_symtab_t *, unsigned int);\n\n \nextern void kdb_print_state(const char *, int);\n\nextern int kdb_state;\n#define KDB_STATE_KDB\t\t0x00000001\t \n#define KDB_STATE_LEAVING\t0x00000002\t \n#define KDB_STATE_CMD\t\t0x00000004\t \n#define KDB_STATE_KDB_CONTROL\t0x00000008\t \n#define KDB_STATE_HOLD_CPU\t0x00000010\t \n#define KDB_STATE_DOING_SS\t0x00000020\t \n#define KDB_STATE_SSBPT\t\t0x00000080\t \n#define KDB_STATE_REENTRY\t0x00000100\t \n#define KDB_STATE_SUPPRESS\t0x00000200\t \n#define KDB_STATE_PAGER\t\t0x00000400\t \n#define KDB_STATE_GO_SWITCH\t0x00000800\t \n#define KDB_STATE_WAIT_IPI\t0x00002000\t \n#define KDB_STATE_RECURSE\t0x00004000\t \n#define KDB_STATE_IP_ADJUSTED\t0x00008000\t \n#define KDB_STATE_GO1\t\t0x00010000\t \n#define KDB_STATE_KEYBOARD\t0x00020000\t \n#define KDB_STATE_KEXEC\t\t0x00040000\t \n#define KDB_STATE_DOING_KGDB\t0x00080000\t \n#define KDB_STATE_KGDB_TRANS\t0x00200000\t \n#define KDB_STATE_ARCH\t\t0xff000000\t \n\n#define KDB_STATE(flag) (kdb_state & KDB_STATE_##flag)\n#define KDB_STATE_SET(flag) ((void)(kdb_state |= KDB_STATE_##flag))\n#define KDB_STATE_CLEAR(flag) ((void)(kdb_state &= ~KDB_STATE_##flag))\n\nextern int kdb_nextline;  \n\ntypedef struct _kdb_bp {\n\tunsigned long\tbp_addr;\t \n\tunsigned int\tbp_free:1;\t \n\tunsigned int\tbp_enabled:1;\t \n\tunsigned int\tbp_type:4;\t \n\tunsigned int\tbp_installed:1;\t \n\tunsigned int\tbp_delay:1;\t \n\tunsigned int\tbp_delayed:1;\t \n\tunsigned int\tbph_length;\t \n} kdb_bp_t;\n\n#ifdef CONFIG_KGDB_KDB\nextern kdb_bp_t kdb_breakpoints[ ];\n\nextern void kdb_register_table(kdbtab_t *kp, size_t len);\nextern int kdb_bt(int, const char **);\t \n\n \nextern void kdb_initbptab(void);\nextern void kdb_bp_install(struct pt_regs *);\nextern void kdb_bp_remove(void);\n\ntypedef enum {\n\tKDB_DB_BPT,\t \n\tKDB_DB_SS,\t \n\tKDB_DB_SSBPT,\t \n\tKDB_DB_NOBPT\t \n} kdb_dbtrap_t;\n\nextern int kdb_main_loop(kdb_reason_t, kdb_reason_t,\n\t\t\t int, kdb_dbtrap_t, struct pt_regs *);\n\n \nextern int kdb_grepping_flag;\n#define KDB_GREPPING_FLAG_SEARCH 0x8000\nextern char kdb_grep_string[];\n#define KDB_GREP_STRLEN 256\nextern int kdb_grep_leading;\nextern int kdb_grep_trailing;\nextern char *kdb_cmds[];\nextern char kdb_task_state_char (const struct task_struct *);\nextern bool kdb_task_state(const struct task_struct *p, const char *mask);\nextern void kdb_ps_suppressed(void);\nextern void kdb_ps1(const struct task_struct *p);\nextern char kdb_getchar(void);\nextern char *kdb_getstr(char *, size_t, const char *);\nextern void kdb_gdb_state_pass(char *buf);\n\n \n#define KDB_SP_SPACEB\t0x0001\t\t \n#define KDB_SP_SPACEA\t0x0002\t\t \n#define KDB_SP_PAREN\t0x0004\t\t \n#define KDB_SP_VALUE\t0x0008\t\t \n#define KDB_SP_SYMSIZE\t0x0010\t\t \n#define KDB_SP_NEWLINE\t0x0020\t\t \n#define KDB_SP_DEFAULT (KDB_SP_VALUE|KDB_SP_PAREN)\n\n#define KDB_TSK(cpu) kgdb_info[cpu].task\n#define KDB_TSKREGS(cpu) kgdb_info[cpu].debuggerinfo\n\nextern struct task_struct *kdb_curr_task(int);\n\n#define kdb_task_has_cpu(p) (task_curr(p))\n\n#define GFP_KDB (in_dbg_master() ? GFP_ATOMIC : GFP_KERNEL)\n\nextern struct task_struct *kdb_current_task;\nextern struct pt_regs *kdb_current_regs;\n\n#ifdef CONFIG_KDB_KEYBOARD\nextern void kdb_kbd_cleanup_state(void);\n#else  \n#define kdb_kbd_cleanup_state()\n#endif  \n\nextern char kdb_prompt_str[];\n\n#define\tKDB_WORD_SIZE\t((int)sizeof(unsigned long))\n\n#endif  \n\n#define kdb_func_printf(format, args...) \\\n\tkdb_printf(\"%s: \" format, __func__, ## args)\n\n#define kdb_dbg_printf(mask, format, args...) \\\n\tdo { \\\n\t\tif (KDB_DEBUG(mask)) \\\n\t\t\tkdb_func_printf(format, ## args); \\\n\t} while (0)\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}