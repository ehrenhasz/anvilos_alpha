{
  "module_name": "trace_preemptirq.c",
  "hash_id": "c728e4f971a9d01ced868928deda0032d5cfd8a8a0b010f553be46eab5ae065e",
  "original_prompt": "Ingested from linux-6.6.14/kernel/trace/trace_preemptirq.c",
  "human_readable_source": "\n \n\n#include <linux/kallsyms.h>\n#include <linux/uaccess.h>\n#include <linux/module.h>\n#include <linux/ftrace.h>\n#include <linux/kprobes.h>\n#include \"trace.h\"\n\n#define CREATE_TRACE_POINTS\n#include <trace/events/preemptirq.h>\n\n \n#ifdef CONFIG_ARCH_WANTS_NO_INSTR\n#define trace(point)\ttrace_##point\n#else\n#define trace(point)\tif (!in_nmi()) trace_##point##_rcuidle\n#endif\n\n#ifdef CONFIG_TRACE_IRQFLAGS\n \nstatic DEFINE_PER_CPU(int, tracing_irq_cpu);\n\n \nvoid trace_hardirqs_on_prepare(void)\n{\n\tif (this_cpu_read(tracing_irq_cpu)) {\n\t\ttrace(irq_enable)(CALLER_ADDR0, CALLER_ADDR1);\n\t\ttracer_hardirqs_on(CALLER_ADDR0, CALLER_ADDR1);\n\t\tthis_cpu_write(tracing_irq_cpu, 0);\n\t}\n}\nEXPORT_SYMBOL(trace_hardirqs_on_prepare);\nNOKPROBE_SYMBOL(trace_hardirqs_on_prepare);\n\nvoid trace_hardirqs_on(void)\n{\n\tif (this_cpu_read(tracing_irq_cpu)) {\n\t\ttrace(irq_enable)(CALLER_ADDR0, CALLER_ADDR1);\n\t\ttracer_hardirqs_on(CALLER_ADDR0, CALLER_ADDR1);\n\t\tthis_cpu_write(tracing_irq_cpu, 0);\n\t}\n\n\tlockdep_hardirqs_on_prepare();\n\tlockdep_hardirqs_on(CALLER_ADDR0);\n}\nEXPORT_SYMBOL(trace_hardirqs_on);\nNOKPROBE_SYMBOL(trace_hardirqs_on);\n\n \nvoid trace_hardirqs_off_finish(void)\n{\n\tif (!this_cpu_read(tracing_irq_cpu)) {\n\t\tthis_cpu_write(tracing_irq_cpu, 1);\n\t\ttracer_hardirqs_off(CALLER_ADDR0, CALLER_ADDR1);\n\t\ttrace(irq_disable)(CALLER_ADDR0, CALLER_ADDR1);\n\t}\n\n}\nEXPORT_SYMBOL(trace_hardirqs_off_finish);\nNOKPROBE_SYMBOL(trace_hardirqs_off_finish);\n\nvoid trace_hardirqs_off(void)\n{\n\tlockdep_hardirqs_off(CALLER_ADDR0);\n\n\tif (!this_cpu_read(tracing_irq_cpu)) {\n\t\tthis_cpu_write(tracing_irq_cpu, 1);\n\t\ttracer_hardirqs_off(CALLER_ADDR0, CALLER_ADDR1);\n\t\ttrace(irq_disable)(CALLER_ADDR0, CALLER_ADDR1);\n\t}\n}\nEXPORT_SYMBOL(trace_hardirqs_off);\nNOKPROBE_SYMBOL(trace_hardirqs_off);\n#endif  \n\n#ifdef CONFIG_TRACE_PREEMPT_TOGGLE\n\nvoid trace_preempt_on(unsigned long a0, unsigned long a1)\n{\n\ttrace(preempt_enable)(a0, a1);\n\ttracer_preempt_on(a0, a1);\n}\n\nvoid trace_preempt_off(unsigned long a0, unsigned long a1)\n{\n\ttrace(preempt_disable)(a0, a1);\n\ttracer_preempt_off(a0, a1);\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}