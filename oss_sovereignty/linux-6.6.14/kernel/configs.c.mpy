{
  "module_name": "configs.c",
  "hash_id": "eb3538e43afbd10ebfe2468688a52479238f37059dfdbe32d26df301163d7726",
  "original_prompt": "Ingested from linux-6.6.14/kernel/configs.c",
  "human_readable_source": "\n \n\n#include <linux/kernel.h>\n#include <linux/module.h>\n#include <linux/proc_fs.h>\n#include <linux/seq_file.h>\n#include <linux/init.h>\n#include <linux/uaccess.h>\n\n \nasm (\n\"\t.pushsection .rodata, \\\"a\\\"\t\t\\n\"\n\"\t.ascii \\\"IKCFG_ST\\\"\t\t\t\\n\"\n\"\t.global kernel_config_data\t\t\\n\"\n\"kernel_config_data:\t\t\t\t\\n\"\n\"\t.incbin \\\"kernel/config_data.gz\\\"\t\\n\"\n\"\t.global kernel_config_data_end\t\t\\n\"\n\"kernel_config_data_end:\t\t\t\\n\"\n\"\t.ascii \\\"IKCFG_ED\\\"\t\t\t\\n\"\n\"\t.popsection\t\t\t\t\\n\"\n);\n\n#ifdef CONFIG_IKCONFIG_PROC\n\nextern char kernel_config_data;\nextern char kernel_config_data_end;\n\nstatic ssize_t\nikconfig_read_current(struct file *file, char __user *buf,\n\t\t      size_t len, loff_t * offset)\n{\n\treturn simple_read_from_buffer(buf, len, offset,\n\t\t\t\t       &kernel_config_data,\n\t\t\t\t       &kernel_config_data_end -\n\t\t\t\t       &kernel_config_data);\n}\n\nstatic const struct proc_ops config_gz_proc_ops = {\n\t.proc_read\t= ikconfig_read_current,\n\t.proc_lseek\t= default_llseek,\n};\n\nstatic int __init ikconfig_init(void)\n{\n\tstruct proc_dir_entry *entry;\n\n\t \n\tentry = proc_create(\"config.gz\", S_IFREG | S_IRUGO, NULL,\n\t\t\t    &config_gz_proc_ops);\n\tif (!entry)\n\t\treturn -ENOMEM;\n\n\tproc_set_size(entry, &kernel_config_data_end - &kernel_config_data);\n\n\treturn 0;\n}\n\nstatic void __exit ikconfig_cleanup(void)\n{\n\tremove_proc_entry(\"config.gz\", NULL);\n}\n\nmodule_init(ikconfig_init);\nmodule_exit(ikconfig_cleanup);\n\n#endif  \n\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Randy Dunlap\");\nMODULE_DESCRIPTION(\"Echo the kernel .config file used to build the kernel\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}