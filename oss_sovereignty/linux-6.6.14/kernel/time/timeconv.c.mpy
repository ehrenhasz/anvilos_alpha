{
  "module_name": "timeconv.c",
  "hash_id": "a81658e64afecdcc631b6ddb8133b4e610e985b01d542c991a3558396a66760e",
  "original_prompt": "Ingested from linux-6.6.14/kernel/time/timeconv.c",
  "human_readable_source": "\n \n\n \n\n#include <linux/time.h>\n#include <linux/module.h>\n#include <linux/kernel.h>\n\n#define SECS_PER_HOUR\t(60 * 60)\n#define SECS_PER_DAY\t(SECS_PER_HOUR * 24)\n\n \nvoid time64_to_tm(time64_t totalsecs, int offset, struct tm *result)\n{\n\tu32 u32tmp, day_of_century, year_of_century, day_of_year, month, day;\n\tu64 u64tmp, udays, century, year;\n\tbool is_Jan_or_Feb, is_leap_year;\n\tlong days, rem;\n\tint remainder;\n\n\tdays = div_s64_rem(totalsecs, SECS_PER_DAY, &remainder);\n\trem = remainder;\n\trem += offset;\n\twhile (rem < 0) {\n\t\trem += SECS_PER_DAY;\n\t\t--days;\n\t}\n\twhile (rem >= SECS_PER_DAY) {\n\t\trem -= SECS_PER_DAY;\n\t\t++days;\n\t}\n\n\tresult->tm_hour = rem / SECS_PER_HOUR;\n\trem %= SECS_PER_HOUR;\n\tresult->tm_min = rem / 60;\n\tresult->tm_sec = rem % 60;\n\n\t \n\tresult->tm_wday = (4 + days) % 7;\n\tif (result->tm_wday < 0)\n\t\tresult->tm_wday += 7;\n\n\t \n\n\tudays\t= ((u64) days) + 2305843009213814918ULL;\n\n\tu64tmp\t\t= 4 * udays + 3;\n\tcentury\t\t= div64_u64_rem(u64tmp, 146097, &u64tmp);\n\tday_of_century\t= (u32) (u64tmp / 4);\n\n\tu32tmp\t\t= 4 * day_of_century + 3;\n\tu64tmp\t\t= 2939745ULL * u32tmp;\n\tyear_of_century\t= upper_32_bits(u64tmp);\n\tday_of_year\t= lower_32_bits(u64tmp) / 2939745 / 4;\n\n\tyear\t\t= 100 * century + year_of_century;\n\tis_leap_year\t= year_of_century ? !(year_of_century % 4) : !(century % 4);\n\n\tu32tmp\t\t= 2141 * day_of_year + 132377;\n\tmonth\t\t= u32tmp >> 16;\n\tday\t\t= ((u16) u32tmp) / 2141;\n\n\t \n\tis_Jan_or_Feb\t= day_of_year >= 306;\n\n\t \n\tyear\t\t= year + is_Jan_or_Feb - 6313183731940000ULL;\n\tmonth\t\t= is_Jan_or_Feb ? month - 12 : month;\n\tday\t\t= day + 1;\n\tday_of_year\t+= is_Jan_or_Feb ? -306 : 31 + 28 + is_leap_year;\n\n\t \n\tresult->tm_year = (long) (year - 1900);\n\tresult->tm_mon  = (int) month;\n\tresult->tm_mday = (int) day;\n\tresult->tm_yday = (int) day_of_year;\n}\nEXPORT_SYMBOL(time64_to_tm);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}