{
  "module_name": "time_test.c",
  "hash_id": "1a975640161850f1d8fb186c90ac3454421c0b072a7b2a73bb66253e5d955733",
  "original_prompt": "Ingested from linux-6.6.14/kernel/time/time_test.c",
  "human_readable_source": "\n\n#include <kunit/test.h>\n#include <linux/time.h>\n\n \nstatic bool is_leap(long year)\n{\n\treturn year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);\n}\n\n \nstatic int last_day_of_month(long year, int month)\n{\n\tif (month == 2)\n\t\treturn 28 + is_leap(year);\n\tif (month == 4 || month == 6 || month == 9 || month == 11)\n\t\treturn 30;\n\treturn 31;\n}\n\n \nstatic void advance_date(long *year, int *month, int *mday, int *yday)\n{\n\tif (*mday != last_day_of_month(*year, *month)) {\n\t\t++*mday;\n\t\t++*yday;\n\t\treturn;\n\t}\n\n\t*mday = 1;\n\tif (*month != 12) {\n\t\t++*month;\n\t\t++*yday;\n\t\treturn;\n\t}\n\n\t*month = 1;\n\t*yday  = 0;\n\t++*year;\n}\n\n \nstatic void time64_to_tm_test_date_range(struct kunit *test)\n{\n\t \n\ttime64_t total_secs = ((time64_t) 80000) / 400 * 146097 * 86400;\n\tlong year = 1970 - 80000;\n\tint month = 1;\n\tint mdday = 1;\n\tint yday = 0;\n\n\tstruct tm result;\n\ttime64_t secs;\n\ts64 days;\n\n\tfor (secs = -total_secs; secs <= total_secs; secs += 86400) {\n\n\t\ttime64_to_tm(secs, 0, &result);\n\n\t\tdays = div_s64(secs, 86400);\n\n\t\t#define FAIL_MSG \"%05ld/%02d/%02d (%2d) : %ld\", \\\n\t\t\tyear, month, mdday, yday, days\n\n\t\tKUNIT_ASSERT_EQ_MSG(test, year - 1900, result.tm_year, FAIL_MSG);\n\t\tKUNIT_ASSERT_EQ_MSG(test, month - 1, result.tm_mon, FAIL_MSG);\n\t\tKUNIT_ASSERT_EQ_MSG(test, mdday, result.tm_mday, FAIL_MSG);\n\t\tKUNIT_ASSERT_EQ_MSG(test, yday, result.tm_yday, FAIL_MSG);\n\n\t\tadvance_date(&year, &month, &mdday, &yday);\n\t}\n}\n\nstatic struct kunit_case time_test_cases[] = {\n\tKUNIT_CASE_SLOW(time64_to_tm_test_date_range),\n\t{}\n};\n\nstatic struct kunit_suite time_test_suite = {\n\t.name = \"time_test_cases\",\n\t.test_cases = time_test_cases,\n};\n\nkunit_test_suite(time_test_suite);\nMODULE_LICENSE(\"GPL\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}