{
  "module_name": "backtracetest.c",
  "hash_id": "d29737d0c16256ace517b3a9c3bb116f10d070f35235648ea8beec7f6e93ed5c",
  "original_prompt": "Ingested from linux-6.6.14/kernel/backtracetest.c",
  "human_readable_source": "\n \n\n#include <linux/completion.h>\n#include <linux/delay.h>\n#include <linux/interrupt.h>\n#include <linux/module.h>\n#include <linux/sched.h>\n#include <linux/stacktrace.h>\n\nstatic void backtrace_test_normal(void)\n{\n\tpr_info(\"Testing a backtrace from process context.\\n\");\n\tpr_info(\"The following trace is a kernel self test and not a bug!\\n\");\n\n\tdump_stack();\n}\n\nstatic DECLARE_COMPLETION(backtrace_work);\n\nstatic void backtrace_test_irq_callback(unsigned long data)\n{\n\tdump_stack();\n\tcomplete(&backtrace_work);\n}\n\nstatic DECLARE_TASKLET_OLD(backtrace_tasklet, &backtrace_test_irq_callback);\n\nstatic void backtrace_test_irq(void)\n{\n\tpr_info(\"Testing a backtrace from irq context.\\n\");\n\tpr_info(\"The following trace is a kernel self test and not a bug!\\n\");\n\n\tinit_completion(&backtrace_work);\n\ttasklet_schedule(&backtrace_tasklet);\n\twait_for_completion(&backtrace_work);\n}\n\n#ifdef CONFIG_STACKTRACE\nstatic void backtrace_test_saved(void)\n{\n\tunsigned long entries[8];\n\tunsigned int nr_entries;\n\n\tpr_info(\"Testing a saved backtrace.\\n\");\n\tpr_info(\"The following trace is a kernel self test and not a bug!\\n\");\n\n\tnr_entries = stack_trace_save(entries, ARRAY_SIZE(entries), 0);\n\tstack_trace_print(entries, nr_entries, 0);\n}\n#else\nstatic void backtrace_test_saved(void)\n{\n\tpr_info(\"Saved backtrace test skipped.\\n\");\n}\n#endif\n\nstatic int backtrace_regression_test(void)\n{\n\tpr_info(\"====[ backtrace testing ]===========\\n\");\n\n\tbacktrace_test_normal();\n\tbacktrace_test_irq();\n\tbacktrace_test_saved();\n\n\tpr_info(\"====[ end of backtrace testing ]====\\n\");\n\treturn 0;\n}\n\nstatic void exitf(void)\n{\n}\n\nmodule_init(backtrace_regression_test);\nmodule_exit(exitf);\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Arjan van de Ven <arjan@linux.intel.com>\");\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}