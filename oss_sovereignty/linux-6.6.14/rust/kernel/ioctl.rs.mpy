{
  "module_name": "ioctl.rs",
  "hash_id": "577431451333e0affa06bc1fef78f48123c27d6b8a910b493be5f17ddbce9d86",
  "original_prompt": "Ingested from linux-6.6.14/rust/kernel/ioctl.rs",
  "human_readable_source": "// SPDX-License-Identifier: GPL-2.0\n\n//! ioctl() number definitions\n//!\n//! C header: [`include/asm-generic/ioctl.h`](../../../../include/asm-generic/ioctl.h)\n\n#![allow(non_snake_case)]\n\nuse crate::build_assert;\n\n/// Build an ioctl number, analogous to the C macro of the same name.\n#[inline(always)]\nconst fn _IOC(dir: u32, ty: u32, nr: u32, size: usize) -> u32 {\n    build_assert!(dir <= uapi::_IOC_DIRMASK);\n    build_assert!(ty <= uapi::_IOC_TYPEMASK);\n    build_assert!(nr <= uapi::_IOC_NRMASK);\n    build_assert!(size <= (uapi::_IOC_SIZEMASK as usize));\n\n    (dir << uapi::_IOC_DIRSHIFT)\n        | (ty << uapi::_IOC_TYPESHIFT)\n        | (nr << uapi::_IOC_NRSHIFT)\n        | ((size as u32) << uapi::_IOC_SIZESHIFT)\n}\n\n/// Build an ioctl number for an argumentless ioctl.\n#[inline(always)]\npub const fn _IO(ty: u32, nr: u32) -> u32 {\n    _IOC(uapi::_IOC_NONE, ty, nr, 0)\n}\n\n/// Build an ioctl number for an read-only ioctl.\n#[inline(always)]\npub const fn _IOR<T>(ty: u32, nr: u32) -> u32 {\n    _IOC(uapi::_IOC_READ, ty, nr, core::mem::size_of::<T>())\n}\n\n/// Build an ioctl number for an write-only ioctl.\n#[inline(always)]\npub const fn _IOW<T>(ty: u32, nr: u32) -> u32 {\n    _IOC(uapi::_IOC_WRITE, ty, nr, core::mem::size_of::<T>())\n}\n\n/// Build an ioctl number for a read-write ioctl.\n#[inline(always)]\npub const fn _IOWR<T>(ty: u32, nr: u32) -> u32 {\n    _IOC(\n        uapi::_IOC_READ | uapi::_IOC_WRITE,\n        ty,\n        nr,\n        core::mem::size_of::<T>(),\n    )\n}\n\n/// Get the ioctl direction from an ioctl number.\npub const fn _IOC_DIR(nr: u32) -> u32 {\n    (nr >> uapi::_IOC_DIRSHIFT) & uapi::_IOC_DIRMASK\n}\n\n/// Get the ioctl type from an ioctl number.\npub const fn _IOC_TYPE(nr: u32) -> u32 {\n    (nr >> uapi::_IOC_TYPESHIFT) & uapi::_IOC_TYPEMASK\n}\n\n/// Get the ioctl number from an ioctl number.\npub const fn _IOC_NR(nr: u32) -> u32 {\n    (nr >> uapi::_IOC_NRSHIFT) & uapi::_IOC_NRMASK\n}\n\n/// Get the ioctl size from an ioctl number.\npub const fn _IOC_SIZE(nr: u32) -> usize {\n    ((nr >> uapi::_IOC_SIZESHIFT) & uapi::_IOC_SIZEMASK) as usize\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}