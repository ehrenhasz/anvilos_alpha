{
  "module_name": "acl.h",
  "hash_id": "1e1cbe06c046ed43e8c40a4919bad612942eb3d99297ab5091b4fa188244edf3",
  "original_prompt": "Ingested from linux-6.6.14/fs/reiserfs/acl.h",
  "human_readable_source": " \n#include <linux/init.h>\n#include <linux/posix_acl.h>\n\n#define REISERFS_ACL_VERSION\t0x0001\n\ntypedef struct {\n\t__le16 e_tag;\n\t__le16 e_perm;\n\t__le32 e_id;\n} reiserfs_acl_entry;\n\ntypedef struct {\n\t__le16 e_tag;\n\t__le16 e_perm;\n} reiserfs_acl_entry_short;\n\ntypedef struct {\n\t__le32 a_version;\n} reiserfs_acl_header;\n\nstatic inline size_t reiserfs_acl_size(int count)\n{\n\tif (count <= 4) {\n\t\treturn sizeof(reiserfs_acl_header) +\n\t\t    count * sizeof(reiserfs_acl_entry_short);\n\t} else {\n\t\treturn sizeof(reiserfs_acl_header) +\n\t\t    4 * sizeof(reiserfs_acl_entry_short) +\n\t\t    (count - 4) * sizeof(reiserfs_acl_entry);\n\t}\n}\n\nstatic inline int reiserfs_acl_count(size_t size)\n{\n\tssize_t s;\n\tsize -= sizeof(reiserfs_acl_header);\n\ts = size - 4 * sizeof(reiserfs_acl_entry_short);\n\tif (s < 0) {\n\t\tif (size % sizeof(reiserfs_acl_entry_short))\n\t\t\treturn -1;\n\t\treturn size / sizeof(reiserfs_acl_entry_short);\n\t} else {\n\t\tif (s % sizeof(reiserfs_acl_entry))\n\t\t\treturn -1;\n\t\treturn s / sizeof(reiserfs_acl_entry) + 4;\n\t}\n}\n\n#ifdef CONFIG_REISERFS_FS_POSIX_ACL\nstruct posix_acl *reiserfs_get_acl(struct inode *inode, int type, bool rcu);\nint reiserfs_set_acl(struct mnt_idmap *idmap, struct dentry *dentry,\n\t\t     struct posix_acl *acl, int type);\nint reiserfs_acl_chmod(struct dentry *dentry);\nint reiserfs_inherit_default_acl(struct reiserfs_transaction_handle *th,\n\t\t\t\t struct inode *dir, struct dentry *dentry,\n\t\t\t\t struct inode *inode);\nint reiserfs_cache_default_acl(struct inode *dir);\n\n#else\n\n#define reiserfs_cache_default_acl(inode) 0\n#define reiserfs_get_acl NULL\n#define reiserfs_set_acl NULL\n\nstatic inline int reiserfs_acl_chmod(struct dentry *dentry)\n{\n\treturn 0;\n}\n\nstatic inline int\nreiserfs_inherit_default_acl(struct reiserfs_transaction_handle *th,\n\t\t\t     const struct inode *dir, struct dentry *dentry,\n\t\t\t     struct inode *inode)\n{\n\treturn 0;\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}