{
  "module_name": "share_config.h",
  "hash_id": "75650a9453129f71d4ff5d236ff95081c88e28460027902bd2ce6d867a181773",
  "original_prompt": "Ingested from linux-6.6.14/fs/smb/server/mgmt/share_config.h",
  "human_readable_source": " \n \n\n#ifndef __SHARE_CONFIG_MANAGEMENT_H__\n#define __SHARE_CONFIG_MANAGEMENT_H__\n\n#include <linux/workqueue.h>\n#include <linux/hashtable.h>\n#include <linux/path.h>\n#include <linux/unicode.h>\n\nstruct ksmbd_share_config {\n\tchar\t\t\t*name;\n\tchar\t\t\t*path;\n\n\tunsigned int\t\tpath_sz;\n\tunsigned int\t\tflags;\n\tstruct list_head\tveto_list;\n\n\tstruct path\t\tvfs_path;\n\n\tatomic_t\t\trefcount;\n\tstruct hlist_node\thlist;\n\tunsigned short\t\tcreate_mask;\n\tunsigned short\t\tdirectory_mask;\n\tunsigned short\t\tforce_create_mode;\n\tunsigned short\t\tforce_directory_mode;\n\tunsigned short\t\tforce_uid;\n\tunsigned short\t\tforce_gid;\n};\n\n#define KSMBD_SHARE_INVALID_UID\t((__u16)-1)\n#define KSMBD_SHARE_INVALID_GID\t((__u16)-1)\n\nstatic inline umode_t\nshare_config_create_mode(struct ksmbd_share_config *share,\n\t\t\t umode_t posix_mode)\n{\n\tumode_t mode = (posix_mode ?: (umode_t)-1) & share->create_mask;\n\n\treturn mode | share->force_create_mode;\n}\n\nstatic inline umode_t\nshare_config_directory_mode(struct ksmbd_share_config *share,\n\t\t\t    umode_t posix_mode)\n{\n\tumode_t mode = (posix_mode ?: (umode_t)-1) & share->directory_mask;\n\n\treturn mode | share->force_directory_mode;\n}\n\nstatic inline int test_share_config_flag(struct ksmbd_share_config *share,\n\t\t\t\t\t int flag)\n{\n\treturn share->flags & flag;\n}\n\nvoid ksmbd_share_config_del(struct ksmbd_share_config *share);\nvoid __ksmbd_share_config_put(struct ksmbd_share_config *share);\n\nstatic inline void ksmbd_share_config_put(struct ksmbd_share_config *share)\n{\n\tif (!atomic_dec_and_test(&share->refcount))\n\t\treturn;\n\t__ksmbd_share_config_put(share);\n}\n\nstruct ksmbd_share_config *ksmbd_share_config_get(struct unicode_map *um,\n\t\t\t\t\t\t  const char *name);\nbool ksmbd_share_veto_filename(struct ksmbd_share_config *share,\n\t\t\t       const char *filename);\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}