{
  "module_name": "summary.h",
  "hash_id": "8a075a16e77a5772bfe95116487118ba1ac8068e81be7c55a4c37b50d5e5bbbf",
  "original_prompt": "Ingested from linux-6.6.14/fs/jffs2/summary.h",
  "human_readable_source": " \n\n#ifndef JFFS2_SUMMARY_H\n#define JFFS2_SUMMARY_H\n\n \n#define MAX_SUMMARY_SIZE 65536\n\n#include <linux/uio.h>\n#include <linux/jffs2.h>\n\n#define BLK_STATE_ALLFF\t\t0\n#define BLK_STATE_CLEAN\t\t1\n#define BLK_STATE_PARTDIRTY\t2\n#define BLK_STATE_CLEANMARKER\t3\n#define BLK_STATE_ALLDIRTY\t4\n#define BLK_STATE_BADBLOCK\t5\n\n#define JFFS2_SUMMARY_NOSUM_SIZE 0xffffffff\n#define JFFS2_SUMMARY_INODE_SIZE (sizeof(struct jffs2_sum_inode_flash))\n#define JFFS2_SUMMARY_DIRENT_SIZE(x) (sizeof(struct jffs2_sum_dirent_flash) + (x))\n#define JFFS2_SUMMARY_XATTR_SIZE (sizeof(struct jffs2_sum_xattr_flash))\n#define JFFS2_SUMMARY_XREF_SIZE (sizeof(struct jffs2_sum_xref_flash))\n\n \n\nstruct jffs2_sum_unknown_flash\n{\n\tjint16_t nodetype;\t \n};\n\nstruct jffs2_sum_inode_flash\n{\n\tjint16_t nodetype;\t \n\tjint32_t inode;\t\t \n\tjint32_t version;\t \n\tjint32_t offset;\t \n\tjint32_t totlen; \t \n} __attribute__((packed));\n\nstruct jffs2_sum_dirent_flash\n{\n\tjint16_t nodetype;\t \n\tjint32_t totlen;\t \n\tjint32_t offset;\t \n\tjint32_t pino;\t\t \n\tjint32_t version;\t \n\tjint32_t ino; \t\t \n\tuint8_t nsize;\t\t \n\tuint8_t type;\t\t \n\tuint8_t name[];\t \n} __attribute__((packed));\n\nstruct jffs2_sum_xattr_flash\n{\n\tjint16_t nodetype;\t \n\tjint32_t xid;\t\t \n\tjint32_t version;\t \n\tjint32_t offset;\t \n\tjint32_t totlen;\t \n} __attribute__((packed));\n\nstruct jffs2_sum_xref_flash\n{\n\tjint16_t nodetype;\t \n\tjint32_t offset;\t \n} __attribute__((packed));\n\nunion jffs2_sum_flash\n{\n\tstruct jffs2_sum_unknown_flash u;\n\tstruct jffs2_sum_inode_flash i;\n\tstruct jffs2_sum_dirent_flash d;\n\tstruct jffs2_sum_xattr_flash x;\n\tstruct jffs2_sum_xref_flash r;\n};\n\n \n\nstruct jffs2_sum_unknown_mem\n{\n\tunion jffs2_sum_mem *next;\n\tjint16_t nodetype;\t \n};\n\nstruct jffs2_sum_inode_mem\n{\n\tunion jffs2_sum_mem *next;\n\tjint16_t nodetype;\t \n\tjint32_t inode;\t\t \n\tjint32_t version;\t \n\tjint32_t offset;\t \n\tjint32_t totlen; \t \n} __attribute__((packed));\n\nstruct jffs2_sum_dirent_mem\n{\n\tunion jffs2_sum_mem *next;\n\tjint16_t nodetype;\t \n\tjint32_t totlen;\t \n\tjint32_t offset;\t \n\tjint32_t pino;\t\t \n\tjint32_t version;\t \n\tjint32_t ino; \t\t \n\tuint8_t nsize;\t\t \n\tuint8_t type;\t\t \n\tuint8_t name[];\t \n} __attribute__((packed));\n\nstruct jffs2_sum_xattr_mem\n{\n\tunion jffs2_sum_mem *next;\n\tjint16_t nodetype;\n\tjint32_t xid;\n\tjint32_t version;\n\tjint32_t offset;\n\tjint32_t totlen;\n} __attribute__((packed));\n\nstruct jffs2_sum_xref_mem\n{\n\tunion jffs2_sum_mem *next;\n\tjint16_t nodetype;\n\tjint32_t offset;\n} __attribute__((packed));\n\nunion jffs2_sum_mem\n{\n\tstruct jffs2_sum_unknown_mem u;\n\tstruct jffs2_sum_inode_mem i;\n\tstruct jffs2_sum_dirent_mem d;\n\tstruct jffs2_sum_xattr_mem x;\n\tstruct jffs2_sum_xref_mem r;\n};\n\n \n\nstruct jffs2_summary\n{\n\tuint32_t sum_size;       \n\tuint32_t sum_num;\n\tuint32_t sum_padded;\n\tunion jffs2_sum_mem *sum_list_head;\n\tunion jffs2_sum_mem *sum_list_tail;\n\n\tjint32_t *sum_buf;\t \n};\n\n \n\nstruct jffs2_sum_marker\n{\n\tjint32_t offset;\t \n\tjint32_t magic; \t \n};\n\n#define JFFS2_SUMMARY_FRAME_SIZE (sizeof(struct jffs2_raw_summary) + sizeof(struct jffs2_sum_marker))\n\n#ifdef CONFIG_JFFS2_SUMMARY\t \n\n#define jffs2_sum_active() (1)\nint jffs2_sum_init(struct jffs2_sb_info *c);\nvoid jffs2_sum_exit(struct jffs2_sb_info *c);\nvoid jffs2_sum_disable_collecting(struct jffs2_summary *s);\nint jffs2_sum_is_disabled(struct jffs2_summary *s);\nvoid jffs2_sum_reset_collected(struct jffs2_summary *s);\nvoid jffs2_sum_move_collected(struct jffs2_sb_info *c, struct jffs2_summary *s);\nint jffs2_sum_add_kvec(struct jffs2_sb_info *c, const struct kvec *invecs,\n\t\t\tunsigned long count,  uint32_t to);\nint jffs2_sum_write_sumnode(struct jffs2_sb_info *c);\nint jffs2_sum_add_padding_mem(struct jffs2_summary *s, uint32_t size);\nint jffs2_sum_add_inode_mem(struct jffs2_summary *s, struct jffs2_raw_inode *ri, uint32_t ofs);\nint jffs2_sum_add_dirent_mem(struct jffs2_summary *s, struct jffs2_raw_dirent *rd, uint32_t ofs);\nint jffs2_sum_add_xattr_mem(struct jffs2_summary *s, struct jffs2_raw_xattr *rx, uint32_t ofs);\nint jffs2_sum_add_xref_mem(struct jffs2_summary *s, struct jffs2_raw_xref *rr, uint32_t ofs);\nint jffs2_sum_scan_sumnode(struct jffs2_sb_info *c, struct jffs2_eraseblock *jeb,\n\t\t\t   struct jffs2_raw_summary *summary, uint32_t sumlen,\n\t\t\t   uint32_t *pseudo_random);\n\n#else\t\t\t\t \n\n#define jffs2_sum_active() (0)\n#define jffs2_sum_init(a) (0)\n#define jffs2_sum_exit(a) do { } while (0)\n#define jffs2_sum_disable_collecting(a)\n#define jffs2_sum_is_disabled(a) (0)\n#define jffs2_sum_reset_collected(a) do { } while (0)\n#define jffs2_sum_add_kvec(a,b,c,d) (0)\n#define jffs2_sum_move_collected(a,b) do { } while (0)\n#define jffs2_sum_write_sumnode(a) (0)\n#define jffs2_sum_add_padding_mem(a,b) do { } while (0)\n#define jffs2_sum_add_inode_mem(a,b,c) do { } while (0)\n#define jffs2_sum_add_dirent_mem(a,b,c) do { } while (0)\n#define jffs2_sum_add_xattr_mem(a,b,c) do { } while (0)\n#define jffs2_sum_add_xref_mem(a,b,c) do { } while (0)\n#define jffs2_sum_scan_sumnode(a,b,c,d,e) (0)\n\n#endif  \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}