{
  "module_name": "jfs_imap.h",
  "hash_id": "e26857a5455861bdafadcc291438e0a225a9fdab5955eb9d1f8919e3ec8cc012",
  "original_prompt": "Ingested from linux-6.6.14/fs/jfs/jfs_imap.h",
  "human_readable_source": " \n \n#ifndef\t_H_JFS_IMAP\n#define _H_JFS_IMAP\n\n#include \"jfs_txnmgr.h\"\n\n \n\n#define\tEXTSPERIAG\t128\t \n#define IMAPBLKNO\t0\t \n#define SMAPSZ\t\t4\t \n#define\tEXTSPERSUM\t32\t \n#define\tL2EXTSPERSUM\t5\t \n#define\tPGSPERIEXT\t4\t \n#define\tMAXIAGS\t\t((1<<20)-1)\t \n#define\tMAXAG\t\t128\t \n\n#define AMAPSIZE\t512\t \n#define SMAPSIZE\t16\t \n\n \n#define\tINOTOIAG(ino)\t((ino) >> L2INOSPERIAG)\n\n \n#define IAGTOLBLK(iagno,l2nbperpg)\t(((iagno) + 1) << (l2nbperpg))\n\n \n#define INOPBLK(pxd,ino,l2nbperpg)\t(addressPXD((pxd)) +\t\t\\\n\t((((ino) & (INOSPEREXT-1)) >> L2INOSPERPAGE) << (l2nbperpg)))\n\n \n \nstruct iag {\n\t__le64 agstart;\t\t \n\t__le32 iagnum;\t\t \n\t__le32 inofreefwd;\t \n\t__le32 inofreeback;\t \n\t__le32 extfreefwd;\t \n\t__le32 extfreeback;\t \n\t__le32 iagfree;\t\t \n\n\t \n\t__le32 inosmap[SMAPSZ];\t \n\t__le32 extsmap[SMAPSZ];\t \n\t__le32 nfreeinos;\t \n\t__le32 nfreeexts;\t \n\t \n\tu8 pad[1976];\t\t \n\t \n\t__le32 wmap[EXTSPERIAG];\t \n\t__le32 pmap[EXTSPERIAG];\t \n\tpxd_t inoext[EXTSPERIAG];\t \n};\t\t\t\t \n\n \nstruct iagctl_disk {\n\t__le32 inofree;\t\t \n\t__le32 extfree;\t\t \n\t__le32 numinos;\t\t \n\t__le32 numfree;\t\t \n};\t\t\t\t \n\nstruct iagctl {\n\tint inofree;\t\t \n\tint extfree;\t\t \n\tint numinos;\t\t \n\tint numfree;\t\t \n};\n\n \nstruct dinomap_disk {\n\t__le32 in_freeiag;\t \n\t__le32 in_nextiag;\t \n\t__le32 in_numinos;\t \n\t__le32 in_numfree;\t \n\t__le32 in_nbperiext;\t \n\t__le32 in_l2nbperiext;\t \n\t__le32 in_diskblock;\t \n\t__le32 in_maxag;\t \n\tu8 pad[2016];\t\t \n\tstruct iagctl_disk in_agctl[MAXAG];  \n};\t\t\t\t \n\nstruct dinomap {\n\tint in_freeiag;\t\t \n\tint in_nextiag;\t\t \n\tint in_numinos;\t\t \n\tint in_numfree;\t\t \n\tint in_nbperiext;\t \n\tint in_l2nbperiext;\t \n\tint in_diskblock;\t \n\tint in_maxag;\t\t \n\tstruct iagctl in_agctl[MAXAG];\t \n};\n\n \nstruct inomap {\n\tstruct dinomap im_imap;\t\t \n\tstruct inode *im_ipimap;\t \n\tstruct mutex im_freelock;\t \n\tstruct mutex im_aglock[MAXAG];\t \n\tu32 *im_DBGdimap;\n\tatomic_t im_numinos;\t \n\tatomic_t im_numfree;\t \n};\n\n#define\tim_freeiag\tim_imap.in_freeiag\n#define\tim_nextiag\tim_imap.in_nextiag\n#define\tim_agctl\tim_imap.in_agctl\n#define\tim_nbperiext\tim_imap.in_nbperiext\n#define\tim_l2nbperiext\tim_imap.in_l2nbperiext\n\n \n#define\tim_diskblock\tim_imap.in_diskblock\n#define\tim_maxag\tim_imap.in_maxag\n\nextern int diFree(struct inode *);\nextern int diAlloc(struct inode *, bool, struct inode *);\nextern int diSync(struct inode *);\n \nextern int diUpdatePMap(struct inode *ipimap, unsigned long inum,\n\t\t\tbool is_free, struct tblock * tblk);\nextern int diExtendFS(struct inode *ipimap, struct inode *ipbmap);\nextern int diMount(struct inode *);\nextern int diUnmount(struct inode *, int);\nextern int diRead(struct inode *);\nextern struct inode *diReadSpecial(struct super_block *, ino_t, int);\nextern void diWriteSpecial(struct inode *, int);\nextern void diFreeSpecial(struct inode *);\nextern int diWrite(tid_t tid, struct inode *);\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}