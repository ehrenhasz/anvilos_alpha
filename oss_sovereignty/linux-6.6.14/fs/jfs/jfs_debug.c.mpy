{
  "module_name": "jfs_debug.c",
  "hash_id": "76f0d4a18d41c9f4169f0c9319bcc7cdeba2d20c6c40704adc2cdbb7455004ba",
  "original_prompt": "Ingested from linux-6.6.14/fs/jfs/jfs_debug.c",
  "human_readable_source": "\n \n\n#include <linux/fs.h>\n#include <linux/ctype.h>\n#include <linux/module.h>\n#include <linux/proc_fs.h>\n#include <linux/seq_file.h>\n#include <linux/uaccess.h>\n#include \"jfs_incore.h\"\n#include \"jfs_filsys.h\"\n#include \"jfs_debug.h\"\n\n#ifdef PROC_FS_JFS  \n\n#ifdef CONFIG_JFS_DEBUG\nstatic int jfs_loglevel_proc_show(struct seq_file *m, void *v)\n{\n\tseq_printf(m, \"%d\\n\", jfsloglevel);\n\treturn 0;\n}\n\nstatic int jfs_loglevel_proc_open(struct inode *inode, struct file *file)\n{\n\treturn single_open(file, jfs_loglevel_proc_show, NULL);\n}\n\nstatic ssize_t jfs_loglevel_proc_write(struct file *file,\n\t\tconst char __user *buffer, size_t count, loff_t *ppos)\n{\n\tchar c;\n\n\tif (get_user(c, buffer))\n\t\treturn -EFAULT;\n\n\t \n\tif (c < '0' || c > '9')\n\t\treturn -EINVAL;\n\tjfsloglevel = c - '0';\n\treturn count;\n}\n\nstatic const struct proc_ops jfs_loglevel_proc_ops = {\n\t.proc_open\t= jfs_loglevel_proc_open,\n\t.proc_read\t= seq_read,\n\t.proc_lseek\t= seq_lseek,\n\t.proc_release\t= single_release,\n\t.proc_write\t= jfs_loglevel_proc_write,\n};\n#endif\n\nvoid jfs_proc_init(void)\n{\n\tstruct proc_dir_entry *base;\n\n\tbase = proc_mkdir(\"fs/jfs\", NULL);\n\tif (!base)\n\t\treturn;\n\n#ifdef CONFIG_JFS_STATISTICS\n\tproc_create_single(\"lmstats\", 0, base, jfs_lmstats_proc_show);\n\tproc_create_single(\"txstats\", 0, base, jfs_txstats_proc_show);\n\tproc_create_single(\"xtstat\", 0, base, jfs_xtstat_proc_show);\n\tproc_create_single(\"mpstat\", 0, base, jfs_mpstat_proc_show);\n#endif\n#ifdef CONFIG_JFS_DEBUG\n\tproc_create_single(\"TxAnchor\", 0, base, jfs_txanchor_proc_show);\n\tproc_create(\"loglevel\", 0, base, &jfs_loglevel_proc_ops);\n#endif\n}\n\nvoid jfs_proc_clean(void)\n{\n\tremove_proc_subtree(\"fs/jfs\", NULL);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}