{
  "module_name": "jfs_txnmgr.h",
  "hash_id": "be3960349176c0aa65c22e9c826adcce9f840019ca6845e9689e196125547b0c",
  "original_prompt": "Ingested from linux-6.6.14/fs/jfs/jfs_txnmgr.h",
  "human_readable_source": " \n \n#ifndef _H_JFS_TXNMGR\n#define _H_JFS_TXNMGR\n\n#include \"jfs_logmgr.h\"\n\n \n#define tid_to_tblock(tid) (&TxBlock[tid])\n\n#define lid_to_tlock(lid) (&TxLock[lid])\n\n \nstruct tblock {\n\t \n\tu16 xflag;\t\t \n\tu16 flag;\t\t \n\tlid_t dummy;\t\t \n\ts32 lsn;\t\t \n\tstruct list_head synclist;\t \n\n\t \n\tstruct super_block *sb;\t \n\tlid_t next;\t\t \n\tlid_t last;\t\t \n\twait_queue_head_t waitor;\t \n\n\t \n\tu32 logtid;\t\t \n\n\t \n\tstruct list_head cqueue;\t \n\ts32 clsn;\t\t \n\tstruct lbuf *bp;\n\ts32 pn;\t\t\t \n\ts32 eor;\t\t \n\twait_queue_head_t gcwait;\t \n\tunion {\n\t\tstruct inode *ip;  \n\t\tpxd_t ixpxd;\t \n\t} u;\n\tu32 ino;\t\t \n};\n\nextern struct tblock *TxBlock;\t \n\n \n#define\tCOMMIT_SYNC\t0x0001\t \n#define\tCOMMIT_FORCE\t0x0002\t \n#define\tCOMMIT_FLUSH\t0x0004\t \n#define COMMIT_MAP\t0x00f0\n#define\tCOMMIT_PMAP\t0x0010\t \n#define\tCOMMIT_WMAP\t0x0020\t \n#define\tCOMMIT_PWMAP\t0x0040\t \n#define\tCOMMIT_FREE\t0x0f00\n#define\tCOMMIT_DELETE\t0x0100\t \n#define\tCOMMIT_TRUNCATE\t0x0200\t \n#define\tCOMMIT_CREATE\t0x0400\t \n#define\tCOMMIT_LAZY\t0x0800\t \n#define COMMIT_PAGE\t0x1000\t \n#define COMMIT_INODE\t0x2000\t \n\n \n\n \nstruct tlock {\n\tlid_t next;\t\t \n\ttid_t tid;\t\t \n\n\tu16 flag;\t\t \n\tu16 type;\t\t \n\n\tstruct metapage *mp;\t \n\tstruct inode *ip;\t \n\t \n\n\ts16 lock[24];\t\t \n};\t\t\t\t \n\nextern struct tlock *TxLock;\t \n\n \n \n#define tlckPAGELOCK\t\t0x8000\n#define tlckINODELOCK\t\t0x4000\n#define tlckLINELOCK\t\t0x2000\n#define tlckINLINELOCK\t\t0x1000\n \n#define tlckLOG\t\t\t0x0800\n \n#define\ttlckUPDATEMAP\t\t0x0080\n#define\ttlckDIRECTORY\t\t0x0040\n \n#define tlckFREELOCK\t\t0x0008\n#define tlckWRITEPAGE\t\t0x0004\n#define tlckFREEPAGE\t\t0x0002\n\n \n#define\ttlckTYPE\t\t0xfe00\n#define\ttlckINODE\t\t0x8000\n#define\ttlckXTREE\t\t0x4000\n#define\ttlckDTREE\t\t0x2000\n#define\ttlckMAP\t\t\t0x1000\n#define\ttlckEA\t\t\t0x0800\n#define\ttlckACL\t\t\t0x0400\n#define\ttlckDATA\t\t0x0200\n#define\ttlckBTROOT\t\t0x0100\n\n#define\ttlckOPERATION\t\t0x00ff\n#define tlckGROW\t\t0x0001\t \n#define tlckREMOVE\t\t0x0002\t \n#define tlckTRUNCATE\t\t0x0004\t \n#define tlckRELOCATE\t\t0x0008\t \n#define tlckENTRY\t\t0x0001\t \n#define tlckEXTEND\t\t0x0002\t \n#define tlckSPLIT\t\t0x0010\t \n#define tlckNEW\t\t\t0x0020\t \n#define tlckFREE\t\t0x0040\t \n#define tlckRELINK\t\t0x0080\t \n\n \nstruct lv {\n\tu8 offset;\t\t \n\tu8 length;\t\t \n};\t\t\t\t \n\n#define\tTLOCKSHORT\t20\n#define\tTLOCKLONG\t28\n\nstruct linelock {\n\tlid_t next;\t\t \n\n\ts8 maxcnt;\t\t \n\ts8 index;\t\t \n\n\tu16 flag;\t\t \n\tu8 type;\t\t \n\tu8 l2linesize;\t\t \n\t \n\n\tstruct lv lv[20];\t \n};\t\t\t\t \n\n#define dt_lock\tlinelock\n\nstruct xtlock {\n\tlid_t next;\t\t \n\n\ts8 maxcnt;\t\t \n\ts8 index;\t\t \n\n\tu16 flag;\t\t \n\tu8 type;\t\t \n\tu8 l2linesize;\t\t \n\t\t\t\t \n\n\tstruct lv header;\t \n\tstruct lv lwm;\t\t \n\tstruct lv hwm;\t\t \n\tstruct lv twm;\t\t \n\t\t\t\t \n\n\ts32 pxdlock[8];\t\t \n};\t\t\t\t \n\n\n \nstruct maplock {\n\tlid_t next;\t\t \n\n\tu8 maxcnt;\t\t \n\tu8 index;\t\t \n\n\tu16 flag;\t\t \n\tu8 type;\t\t \n\tu8 count;\t\t \n\t\t\t\t \n\n\tpxd_t pxd;\t\t \n};\t\t\t\t \n\n \n#define\tmlckALLOC\t\t0x00f0\n#define\tmlckALLOCXADLIST\t0x0080\n#define\tmlckALLOCPXDLIST\t0x0040\n#define\tmlckALLOCXAD\t\t0x0020\n#define\tmlckALLOCPXD\t\t0x0010\n#define\tmlckFREE\t\t0x000f\n#define\tmlckFREEXADLIST\t\t0x0008\n#define\tmlckFREEPXDLIST\t\t0x0004\n#define\tmlckFREEXAD\t\t0x0002\n#define\tmlckFREEPXD\t\t0x0001\n\n#define\tpxd_lock\tmaplock\n\nstruct xdlistlock {\n\tlid_t next;\t\t \n\n\tu8 maxcnt;\t\t \n\tu8 index;\t\t \n\n\tu16 flag;\t\t \n\tu8 type;\t\t \n\tu8 count;\t\t \n\t\t\t\t \n\n\t \n\tunion {\n\t\tvoid *_xdlist;\t \n\t\ts64 pad;\t \n\t} union64;\n};\t\t\t\t \n\n#define xdlist union64._xdlist\n\n \nstruct commit {\n\ttid_t tid;\t\t \n\tint flag;\t\t \n\tstruct jfs_log *log;\t \n\tstruct super_block *sb;\t \n\n\tint nip;\t\t \n\tstruct inode **iplist;\t \n\n\t \n\tstruct lrd lrd;\t\t \n};\n\n \nextern int jfs_tlocks_low;\n\nextern int txInit(void);\nextern void txExit(void);\nextern struct tlock *txLock(tid_t, struct inode *, struct metapage *, int);\nextern struct tlock *txMaplock(tid_t, struct inode *, int);\nextern int txCommit(tid_t, int, struct inode **, int);\nextern tid_t txBegin(struct super_block *, int);\nextern void txBeginAnon(struct super_block *);\nextern void txEnd(tid_t);\nextern void txAbort(tid_t, int);\nextern struct linelock *txLinelock(struct linelock *);\nextern void txFreeMap(struct inode *, struct maplock *, struct tblock *, int);\nextern void txEA(tid_t, struct inode *, dxd_t *, dxd_t *);\nextern void txFreelock(struct inode *);\nextern int lmLog(struct jfs_log *, struct tblock *, struct lrd *,\n\t\t struct tlock *);\nextern void txQuiesce(struct super_block *);\nextern void txResume(struct super_block *);\nextern void txLazyUnlock(struct tblock *);\nextern int jfs_lazycommit(void *);\nextern int jfs_sync(void *);\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}