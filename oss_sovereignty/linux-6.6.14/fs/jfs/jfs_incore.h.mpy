{
  "module_name": "jfs_incore.h",
  "hash_id": "6b104386008a3394841d026e66465362477ed55b16a54c0989e8c0bc37d4a5d1",
  "original_prompt": "Ingested from linux-6.6.14/fs/jfs/jfs_incore.h",
  "human_readable_source": " \n \n#ifndef _H_JFS_INCORE\n#define _H_JFS_INCORE\n\n#include <linux/mutex.h>\n#include <linux/rwsem.h>\n#include <linux/slab.h>\n#include <linux/bitops.h>\n#include <linux/uuid.h>\n\n#include \"jfs_types.h\"\n#include \"jfs_xtree.h\"\n#include \"jfs_dtree.h\"\n\n \n#define JFS_SUPER_MAGIC 0x3153464a  \n\n \nstruct jfs_inode_info {\n\tint\tfileset;\t \n\tuint\tmode2;\t\t \n\tkuid_t\tsaved_uid;\t \n\tkgid_t\tsaved_gid;\t \n\tpxd_t\tixpxd;\t\t \n\tdxd_t\tacl;\t\t \n\tdxd_t\tea;\t\t \n\ttime64_t otime;\t\t \n\tuint\tnext_index;\t \n\tint\tacltype;\t \n\tshort\tbtorder;\t \n\tshort\tbtindex;\t \n\tstruct inode *ipimap;\t \n\tunsigned long cflag;\t \n\tu64\tagstart;\t \n\tu16\tbxflag;\t\t \n\tunchar\tpad;\n\tsigned char active_ag;\t \n\tlid_t\tblid;\t\t \n\tlid_t\tatlhead;\t \n\tlid_t\tatltail;\t \n\tspinlock_t ag_lock;\t \n\tstruct list_head anon_inode_list;  \n\t \n\tstruct rw_semaphore rdwrlock;\n\t \n\tstruct mutex commit_mutex;\n\t \n\tstruct rw_semaphore xattr_sem;\n\tlid_t\txtlid;\t\t \n\tunion {\n\t\tstruct {\n\t\t\txtpage_t _xtroot;\t \n\t\t\tstruct inomap *_imap;\t \n\t\t} file;\n\t\tstruct {\n\t\t\tstruct dir_table_slot _table[12];  \n\t\t\tdtroot_t _dtroot;\t \n\t\t} dir;\n\t\tstruct {\n\t\t\tunchar _unused[16];\t \n\t\t\tdxd_t _dxd;\t\t \n\t\t\t \n\t\t\t \n\t\t\tunion {\n\t\t\t\tstruct {\n\t\t\t\t\t \n\t\t\t\t\tunchar _inline[128];\n\t\t\t\t\t \n\t\t\t\t\tunchar _inline_ea[128];\n\t\t\t\t};\n\t\t\t\tunchar _inline_all[256];\n\t\t\t};\n\t\t} link;\n\t} u;\n#ifdef CONFIG_QUOTA\n\tstruct dquot *i_dquot[MAXQUOTAS];\n#endif\n\tu32 dev;\t \n\tstruct inode\tvfs_inode;\n};\n#define i_xtroot u.file._xtroot\n#define i_imap u.file._imap\n#define i_dirtable u.dir._table\n#define i_dtroot u.dir._dtroot\n#define i_inline u.link._inline\n#define i_inline_ea u.link._inline_ea\n#define i_inline_all u.link._inline_all\n\n#define IREAD_LOCK(ip, subclass) \\\n\tdown_read_nested(&JFS_IP(ip)->rdwrlock, subclass)\n#define IREAD_UNLOCK(ip)\tup_read(&JFS_IP(ip)->rdwrlock)\n#define IWRITE_LOCK(ip, subclass) \\\n\tdown_write_nested(&JFS_IP(ip)->rdwrlock, subclass)\n#define IWRITE_UNLOCK(ip)\tup_write(&JFS_IP(ip)->rdwrlock)\n\n \nenum cflags {\n\tCOMMIT_Nolink,\t\t \n\tCOMMIT_Inlineea,\t \n\tCOMMIT_Freewmap,\t \n\tCOMMIT_Dirty,\t\t \n\tCOMMIT_Dirtable,\t \n\tCOMMIT_Stale,\t\t \n\tCOMMIT_Synclist,\t \n};\n\n \nenum commit_mutex_class\n{\n\tCOMMIT_MUTEX_PARENT,\n\tCOMMIT_MUTEX_CHILD,\n\tCOMMIT_MUTEX_SECOND_PARENT,\t \n\tCOMMIT_MUTEX_VICTIM\t\t \n};\n\n \nenum rdwrlock_class\n{\n\tRDWRLOCK_NORMAL,\n\tRDWRLOCK_IMAP,\n\tRDWRLOCK_DMAP\n};\n\n#define set_cflag(flag, ip)\tset_bit(flag, &(JFS_IP(ip)->cflag))\n#define clear_cflag(flag, ip)\tclear_bit(flag, &(JFS_IP(ip)->cflag))\n#define test_cflag(flag, ip)\ttest_bit(flag, &(JFS_IP(ip)->cflag))\n#define test_and_clear_cflag(flag, ip) \\\n\ttest_and_clear_bit(flag, &(JFS_IP(ip)->cflag))\n \nstruct jfs_sb_info {\n\tstruct super_block *sb;\t\t \n\tunsigned long\tmntflag;\t \n\tstruct inode\t*ipbmap;\t \n\tstruct inode\t*ipaimap;\t \n\tstruct inode\t*ipaimap2;\t \n\tstruct inode\t*ipimap;\t \n\tstruct jfs_log\t*log;\t\t \n\tstruct list_head log_list;\t \n\tshort\t\tbsize;\t\t \n\tshort\t\tl2bsize;\t \n\tshort\t\tnbperpage;\t \n\tshort\t\tl2nbperpage;\t \n\tshort\t\tl2niperblk;\t \n\tdev_t\t\tlogdev;\t\t \n\tuint\t\taggregate;\t \n\tpxd_t\t\tlogpxd;\t\t \n\tpxd_t\t\tfsckpxd;\t \n\tpxd_t\t\tait2;\t\t \n\tuuid_t\t\tuuid;\t\t \n\tuuid_t\t\tloguuid;\t \n\t \n\tint\t\tcommit_state;\t \n\t \n\tuint\t\tgengen;\t\t \n\tuint\t\tinostamp;\t \n\n\t \n\tstruct bmap\t*bmap;\t\t \n\tstruct nls_table *nls_tab;\t \n\tstruct inode *direct_inode;\t \n\tuint\t\tstate;\t\t \n\tunsigned long\tflag;\t\t \n\tuint\t\tp_state;\t \n\tkuid_t\t\tuid;\t\t \n\tkgid_t\t\tgid;\t\t \n\tuint\t\tumask;\t\t \n\tuint\t\tminblks_trim;\t \n};\n\n \n#define IN_LAZYCOMMIT 1\n\nstatic inline struct jfs_inode_info *JFS_IP(struct inode *inode)\n{\n\treturn container_of(inode, struct jfs_inode_info, vfs_inode);\n}\n\nstatic inline int jfs_dirtable_inline(struct inode *inode)\n{\n\treturn (JFS_IP(inode)->next_index <= (MAX_INLINE_DIRTABLE_ENTRY + 1));\n}\n\nstatic inline struct jfs_sb_info *JFS_SBI(struct super_block *sb)\n{\n\treturn sb->s_fs_info;\n}\n\nstatic inline int isReadOnly(struct inode *inode)\n{\n\tif (JFS_SBI(inode->i_sb)->log)\n\t\treturn 0;\n\treturn 1;\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}