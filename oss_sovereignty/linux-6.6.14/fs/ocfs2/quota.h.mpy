{
  "module_name": "quota.h",
  "hash_id": "4ba7289e370e665f4ae84b81848bb00dcdef7fd6e00e836f27158e0888fb54d1",
  "original_prompt": "Ingested from linux-6.6.14/fs/ocfs2/quota.h",
  "human_readable_source": " \n \n\n#ifndef _OCFS2_QUOTA_H\n#define _OCFS2_QUOTA_H\n\n#include <linux/types.h>\n#include <linux/slab.h>\n#include <linux/quota.h>\n#include <linux/list.h>\n#include <linux/dqblk_qtree.h>\n\n#include \"ocfs2.h\"\n\n \n#define OCFS2_MAXQUOTAS 2\n\n \nstruct ocfs2_dquot {\n\tstruct dquot dq_dquot;\t \n\tloff_t dq_local_off;\t \n\tu64 dq_local_phys_blk;\t \n\tstruct ocfs2_quota_chunk *dq_chunk;\t \n\tunsigned int dq_use_count;\t \n\ts64 dq_origspace;\t \n\ts64 dq_originodes;\t \n\tstruct llist_node list;\t \n};\n\n \nstruct ocfs2_recovery_chunk {\n\tstruct list_head rc_list;\t \n\tint rc_chunk;\t\t\t \n\tunsigned long *rc_bitmap;\t \n};\n\nstruct ocfs2_quota_recovery {\n\tstruct list_head r_list[OCFS2_MAXQUOTAS];\t \n};\n\n \nstruct ocfs2_mem_dqinfo {\n\tunsigned int dqi_type;\t\t \n\tunsigned int dqi_flags;\t\t \n\tunsigned int dqi_chunks;\t \n\tunsigned int dqi_blocks;\t \n\tunsigned int dqi_syncms;\t \n\tstruct list_head dqi_chunk;\t \n\tstruct inode *dqi_gqinode;\t \n\tstruct ocfs2_lock_res dqi_gqlock;\t \n\tstruct buffer_head *dqi_gqi_bh;\t \n\tint dqi_gqi_count;\t\t \n\tu64 dqi_giblk;\t\t\t \n\tstruct buffer_head *dqi_lqi_bh;\t \n\tstruct buffer_head *dqi_libh;\t \n\tstruct qtree_mem_dqinfo dqi_gi;\t \n\tstruct delayed_work dqi_sync_work;\t \n\tstruct ocfs2_quota_recovery *dqi_rec;\t \n};\n\nstatic inline struct ocfs2_dquot *OCFS2_DQUOT(struct dquot *dquot)\n{\n\treturn container_of(dquot, struct ocfs2_dquot, dq_dquot);\n}\n\nstruct ocfs2_quota_chunk {\n\tstruct list_head qc_chunk;\t \n\tint qc_num;\t\t\t \n\tstruct buffer_head *qc_headerbh;\t \n};\n\nextern struct kmem_cache *ocfs2_dquot_cachep;\nextern struct kmem_cache *ocfs2_qf_chunk_cachep;\n\nextern const struct qtree_fmt_operations ocfs2_global_ops;\n\nstruct ocfs2_quota_recovery *ocfs2_begin_quota_recovery(\n\t\t\t\tstruct ocfs2_super *osb, int slot_num);\nint ocfs2_finish_quota_recovery(struct ocfs2_super *osb,\n\t\t\t\tstruct ocfs2_quota_recovery *rec,\n\t\t\t\tint slot_num);\nvoid ocfs2_free_quota_recovery(struct ocfs2_quota_recovery *rec);\nssize_t ocfs2_quota_read(struct super_block *sb, int type, char *data,\n\t\t\t size_t len, loff_t off);\nssize_t ocfs2_quota_write(struct super_block *sb, int type,\n\t\t\t  const char *data, size_t len, loff_t off);\nint ocfs2_global_read_info(struct super_block *sb, int type);\nint ocfs2_global_write_info(struct super_block *sb, int type);\nint ocfs2_global_read_dquot(struct dquot *dquot);\nint __ocfs2_sync_dquot(struct dquot *dquot, int freeing);\nstatic inline int ocfs2_sync_dquot(struct dquot *dquot)\n{\n\treturn __ocfs2_sync_dquot(dquot, 0);\n}\nstatic inline int ocfs2_global_release_dquot(struct dquot *dquot)\n{\n\treturn __ocfs2_sync_dquot(dquot, 1);\n}\n\nint ocfs2_lock_global_qf(struct ocfs2_mem_dqinfo *oinfo, int ex);\nvoid ocfs2_unlock_global_qf(struct ocfs2_mem_dqinfo *oinfo, int ex);\nint ocfs2_validate_quota_block(struct super_block *sb, struct buffer_head *bh);\nint ocfs2_read_quota_phys_block(struct inode *inode, u64 p_block,\n\t\t\t\tstruct buffer_head **bh);\nint ocfs2_create_local_dquot(struct dquot *dquot);\nint ocfs2_local_release_dquot(handle_t *handle, struct dquot *dquot);\nint ocfs2_local_write_dquot(struct dquot *dquot);\nvoid ocfs2_drop_dquot_refs(struct work_struct *work);\n\nextern const struct dquot_operations ocfs2_quota_operations;\nextern struct quota_format_type ocfs2_quota_format;\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}