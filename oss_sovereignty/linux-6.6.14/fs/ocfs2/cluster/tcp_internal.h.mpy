{
  "module_name": "tcp_internal.h",
  "hash_id": "9383bc635fd733ab39879243c4306fd09b4502c37e45b0202954152fd604bab3",
  "original_prompt": "Ingested from linux-6.6.14/fs/ocfs2/cluster/tcp_internal.h",
  "human_readable_source": " \n \n\n#ifndef O2CLUSTER_TCP_INTERNAL_H\n#define O2CLUSTER_TCP_INTERNAL_H\n\n#define O2NET_MSG_MAGIC           ((u16)0xfa55)\n#define O2NET_MSG_STATUS_MAGIC    ((u16)0xfa56)\n#define O2NET_MSG_KEEP_REQ_MAGIC  ((u16)0xfa57)\n#define O2NET_MSG_KEEP_RESP_MAGIC ((u16)0xfa58)\n\n \n#define O2NET_QUORUM_DELAY_MS\t((o2hb_dead_threshold + 2) * O2HB_REGION_TIMEOUT_MS)\n\n \n#define O2NET_PROTOCOL_VERSION 11ULL\nstruct o2net_handshake {\n\t__be64\tprotocol_version;\n\t__be64\tconnector_id;\n\t__be32  o2hb_heartbeat_timeout_ms;\n\t__be32  o2net_idle_timeout_ms;\n\t__be32  o2net_keepalive_delay_ms;\n\t__be32  o2net_reconnect_delay_ms;\n};\n\nstruct o2net_node {\n\t \n\tspinlock_t\t\t\tnn_lock;\n\n\t \n\tstruct o2net_sock_container\t*nn_sc;\n\t \n\tunsigned\t\t\tnn_sc_valid:1;\n\t \n\tint\t\t\t\tnn_persistent_error;\n\t \n\tatomic_t\t\t\tnn_timeout;\n\n\t \n\twait_queue_head_t\t\tnn_sc_wq;\n\n\tstruct idr\t\t\tnn_status_idr;\n\tstruct list_head\t\tnn_status_list;\n\n\t \n\tstruct delayed_work\t\tnn_connect_work;\n\tunsigned long\t\t\tnn_last_connect_attempt;\n\n\t \n\tstruct delayed_work\t\tnn_connect_expired;\n\n\t \n\tstruct delayed_work\t\tnn_still_up;\n};\n\nstruct o2net_sock_container {\n\tstruct kref\t\tsc_kref;\n\t \n\tstruct socket\t\t*sc_sock;\n\tstruct o2nm_node\t*sc_node;\n\n\t \n\n\t \n\tstruct work_struct\tsc_rx_work;\n\tstruct work_struct\tsc_connect_work;\n\t \n\tstruct work_struct\tsc_shutdown_work;\n\n\tstruct timer_list\tsc_idle_timeout;\n\tstruct delayed_work\tsc_keepalive_work;\n\n\tunsigned\t\tsc_handshake_ok:1;\n\n\tstruct page \t\t*sc_page;\n\tsize_t\t\t\tsc_page_off;\n\n\t \n\tvoid\t\t\t(*sc_state_change)(struct sock *sk);\n\tvoid\t\t\t(*sc_data_ready)(struct sock *sk);\n\n\tu32\t\t\tsc_msg_key;\n\tu16\t\t\tsc_msg_type;\n\n#ifdef CONFIG_DEBUG_FS\n\tstruct list_head        sc_net_debug_item;\n\tktime_t\t\t\tsc_tv_timer;\n\tktime_t\t\t\tsc_tv_data_ready;\n\tktime_t\t\t\tsc_tv_advance_start;\n\tktime_t\t\t\tsc_tv_advance_stop;\n\tktime_t\t\t\tsc_tv_func_start;\n\tktime_t\t\t\tsc_tv_func_stop;\n#endif\n#ifdef CONFIG_OCFS2_FS_STATS\n\tktime_t\t\t\tsc_tv_acquiry_total;\n\tktime_t\t\t\tsc_tv_send_total;\n\tktime_t\t\t\tsc_tv_status_total;\n\tu32\t\t\tsc_send_count;\n\tu32\t\t\tsc_recv_count;\n\tktime_t\t\t\tsc_tv_process_total;\n#endif\n\tstruct mutex\t\tsc_send_lock;\n};\n\nstruct o2net_msg_handler {\n\tstruct rb_node\t\tnh_node;\n\tu32\t\t\tnh_max_len;\n\tu32\t\t\tnh_msg_type;\n\tu32\t\t\tnh_key;\n\to2net_msg_handler_func\t*nh_func;\n\tvoid\t\t\t*nh_func_data;\n\to2net_post_msg_handler_func\n\t\t\t\t*nh_post_func;\n\tstruct kref\t\tnh_kref;\n\tstruct list_head\tnh_unregister_item;\n};\n\nenum o2net_system_error {\n\tO2NET_ERR_NONE = 0,\n\tO2NET_ERR_NO_HNDLR,\n\tO2NET_ERR_OVERFLOW,\n\tO2NET_ERR_DIED,\n\tO2NET_ERR_MAX\n};\n\nstruct o2net_status_wait {\n\tenum o2net_system_error\tns_sys_status;\n\ts32\t\t\tns_status;\n\tint\t\t\tns_id;\n\twait_queue_head_t\tns_wq;\n\tstruct list_head\tns_node_item;\n};\n\n#ifdef CONFIG_DEBUG_FS\n \nstruct o2net_send_tracking {\n\tstruct list_head\t\tst_net_debug_item;\n\tstruct task_struct\t\t*st_task;\n\tstruct o2net_sock_container\t*st_sc;\n\tu32\t\t\t\tst_id;\n\tu32\t\t\t\tst_msg_type;\n\tu32\t\t\t\tst_msg_key;\n\tu8\t\t\t\tst_node;\n\tktime_t\t\t\t\tst_sock_time;\n\tktime_t\t\t\t\tst_send_time;\n\tktime_t\t\t\t\tst_status_time;\n};\n#else\nstruct o2net_send_tracking {\n\tu32\tdummy;\n};\n#endif\t \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}