{
  "module_name": "refcounttree.h",
  "hash_id": "e07da67cd3631902a2a6a016b62fe6d495daf0b957a68ad30aca3f8a0c68cea9",
  "original_prompt": "Ingested from linux-6.6.14/fs/ocfs2/refcounttree.h",
  "human_readable_source": " \n \n#ifndef OCFS2_REFCOUNTTREE_H\n#define OCFS2_REFCOUNTTREE_H\n\nstruct ocfs2_refcount_tree {\n\tstruct rb_node rf_node;\n\tu64 rf_blkno;\n\tu32 rf_generation;\n\tstruct kref rf_getcnt;\n\tstruct rw_semaphore rf_sem;\n\tstruct ocfs2_lock_res rf_lockres;\n\tint rf_removed;\n\n\t \n\tspinlock_t rf_lock;\n\tstruct ocfs2_caching_info rf_ci;\n\tstruct mutex rf_io_mutex;\n\tstruct super_block *rf_sb;\n};\n\nvoid ocfs2_purge_refcount_trees(struct ocfs2_super *osb);\nint ocfs2_lock_refcount_tree(struct ocfs2_super *osb, u64 ref_blkno, int rw,\n\t\t\t     struct ocfs2_refcount_tree **tree,\n\t\t\t     struct buffer_head **ref_bh);\nvoid ocfs2_unlock_refcount_tree(struct ocfs2_super *osb,\n\t\t\t\tstruct ocfs2_refcount_tree *tree,\n\t\t\t\tint rw);\n\nint ocfs2_decrease_refcount(struct inode *inode,\n\t\t\t    handle_t *handle, u32 cpos, u32 len,\n\t\t\t    struct ocfs2_alloc_context *meta_ac,\n\t\t\t    struct ocfs2_cached_dealloc_ctxt *dealloc,\n\t\t\t    int delete);\nint ocfs2_prepare_refcount_change_for_del(struct inode *inode,\n\t\t\t\t\t  u64 refcount_loc,\n\t\t\t\t\t  u64 phys_blkno,\n\t\t\t\t\t  u32 clusters,\n\t\t\t\t\t  int *credits,\n\t\t\t\t\t  int *ref_blocks);\nint ocfs2_refcount_cow(struct inode *inode,\n\t\t       struct buffer_head *di_bh,\n\t\t       u32 cpos, u32 write_len, u32 max_cpos);\n\ntypedef int (ocfs2_post_refcount_func)(struct inode *inode,\n\t\t\t\t       handle_t *handle,\n\t\t\t\t       void *para);\n \nstruct ocfs2_post_refcount {\n\tint credits;\t\t\t \n\tocfs2_post_refcount_func *func;\t \n\tvoid *para;\n};\n\nint ocfs2_refcounted_xattr_delete_need(struct inode *inode,\n\t\t\t\t       struct ocfs2_caching_info *ref_ci,\n\t\t\t\t       struct buffer_head *ref_root_bh,\n\t\t\t\t       struct ocfs2_xattr_value_root *xv,\n\t\t\t\t       int *meta_add, int *credits);\nint ocfs2_refcount_cow_xattr(struct inode *inode,\n\t\t\t     struct ocfs2_dinode *di,\n\t\t\t     struct ocfs2_xattr_value_buf *vb,\n\t\t\t     struct ocfs2_refcount_tree *ref_tree,\n\t\t\t     struct buffer_head *ref_root_bh,\n\t\t\t     u32 cpos, u32 write_len,\n\t\t\t     struct ocfs2_post_refcount *post);\nint ocfs2_duplicate_clusters_by_page(handle_t *handle,\n\t\t\t\t     struct inode *inode,\n\t\t\t\t     u32 cpos, u32 old_cluster,\n\t\t\t\t     u32 new_cluster, u32 new_len);\nint ocfs2_duplicate_clusters_by_jbd(handle_t *handle,\n\t\t\t\t    struct inode *inode,\n\t\t\t\t    u32 cpos, u32 old_cluster,\n\t\t\t\t    u32 new_cluster, u32 new_len);\nint ocfs2_cow_sync_writeback(struct super_block *sb,\n\t\t\t     struct inode *inode,\n\t\t\t     u32 cpos, u32 num_clusters);\nint ocfs2_add_refcount_flag(struct inode *inode,\n\t\t\t    struct ocfs2_extent_tree *data_et,\n\t\t\t    struct ocfs2_caching_info *ref_ci,\n\t\t\t    struct buffer_head *ref_root_bh,\n\t\t\t    u32 cpos, u32 p_cluster, u32 num_clusters,\n\t\t\t    struct ocfs2_cached_dealloc_ctxt *dealloc,\n\t\t\t    struct ocfs2_post_refcount *post);\nint ocfs2_remove_refcount_tree(struct inode *inode, struct buffer_head *di_bh);\nint ocfs2_try_remove_refcount_tree(struct inode *inode,\n\t\t\t\t   struct buffer_head *di_bh);\nint ocfs2_increase_refcount(handle_t *handle,\n\t\t\t    struct ocfs2_caching_info *ci,\n\t\t\t    struct buffer_head *ref_root_bh,\n\t\t\t    u64 cpos, u32 len,\n\t\t\t    struct ocfs2_alloc_context *meta_ac,\n\t\t\t    struct ocfs2_cached_dealloc_ctxt *dealloc);\nint ocfs2_reflink_ioctl(struct inode *inode,\n\t\t\tconst char __user *oldname,\n\t\t\tconst char __user *newname,\n\t\t\tbool preserve);\nloff_t ocfs2_reflink_remap_blocks(struct inode *s_inode,\n\t\t\t\t  struct buffer_head *s_bh,\n\t\t\t\t  loff_t pos_in,\n\t\t\t\t  struct inode *t_inode,\n\t\t\t\t  struct buffer_head *t_bh,\n\t\t\t\t  loff_t pos_out,\n\t\t\t\t  loff_t len);\nint ocfs2_reflink_inodes_lock(struct inode *s_inode,\n\t\t\t      struct buffer_head **bh1,\n\t\t\t      struct inode *t_inode,\n\t\t\t      struct buffer_head **bh2);\nvoid ocfs2_reflink_inodes_unlock(struct inode *s_inode,\n\t\t\t\t struct buffer_head *s_bh,\n\t\t\t\t struct inode *t_inode,\n\t\t\t\t struct buffer_head *t_bh);\nint ocfs2_reflink_update_dest(struct inode *dest,\n\t\t\t      struct buffer_head *d_bh,\n\t\t\t      loff_t newlen);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}