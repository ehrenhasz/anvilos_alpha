{
  "module_name": "meta_io.h",
  "hash_id": "6f3252494e00a7fc5f2fac4ea73bd171a8a9f869c4aa36baf7cc66bcc6dbf1ef",
  "original_prompt": "Ingested from linux-6.6.14/fs/gfs2/meta_io.h",
  "human_readable_source": " \n \n\n#ifndef __DIO_DOT_H__\n#define __DIO_DOT_H__\n\n#include <linux/buffer_head.h>\n#include <linux/string.h>\n#include \"incore.h\"\n\nstatic inline void gfs2_buffer_clear(struct buffer_head *bh)\n{\n\tmemset(bh->b_data, 0, bh->b_size);\n}\n\nstatic inline void gfs2_buffer_clear_tail(struct buffer_head *bh, int head)\n{\n\tBUG_ON(head > bh->b_size);\n\tmemset(bh->b_data + head, 0, bh->b_size - head);\n}\n\nstatic inline void gfs2_buffer_copy_tail(struct buffer_head *to_bh,\n\t\t\t\t\t int to_head,\n\t\t\t\t\t struct buffer_head *from_bh,\n\t\t\t\t\t int from_head)\n{\n\tBUG_ON(from_head < to_head);\n\tmemcpy(to_bh->b_data + to_head, from_bh->b_data + from_head,\n\t       from_bh->b_size - from_head);\n\tmemset(to_bh->b_data + to_bh->b_size + to_head - from_head,\n\t       0, from_head - to_head);\n}\n\nextern const struct address_space_operations gfs2_meta_aops;\nextern const struct address_space_operations gfs2_rgrp_aops;\n\nstatic inline struct gfs2_sbd *gfs2_mapping2sbd(struct address_space *mapping)\n{\n\tstruct inode *inode = mapping->host;\n\tif (mapping->a_ops == &gfs2_meta_aops) {\n\t\tstruct gfs2_glock_aspace *gla =\n\t\t\tcontainer_of(mapping, struct gfs2_glock_aspace, mapping);\n\t\treturn gla->glock.gl_name.ln_sbd;\n\t} else if (mapping->a_ops == &gfs2_rgrp_aops)\n\t\treturn container_of(mapping, struct gfs2_sbd, sd_aspace);\n\telse\n\t\treturn inode->i_sb->s_fs_info;\n}\n\nextern struct buffer_head *gfs2_meta_new(struct gfs2_glock *gl, u64 blkno);\nextern int gfs2_meta_read(struct gfs2_glock *gl, u64 blkno, int flags,\n\t\t\t  int rahead, struct buffer_head **bhp);\nextern int gfs2_meta_wait(struct gfs2_sbd *sdp, struct buffer_head *bh);\nextern struct buffer_head *gfs2_getbuf(struct gfs2_glock *gl, u64 blkno,\n\t\t\t\t       int create);\nenum {\n\tREMOVE_JDATA = 0,\n\tREMOVE_META = 1,\n};\n\nextern void gfs2_remove_from_journal(struct buffer_head *bh, int meta);\nextern void gfs2_journal_wipe(struct gfs2_inode *ip, u64 bstart, u32 blen);\nextern int gfs2_meta_buffer(struct gfs2_inode *ip, u32 mtype, u64 num,\n\t\t\t    struct buffer_head **bhp);\n\nstatic inline int gfs2_meta_inode_buffer(struct gfs2_inode *ip,\n\t\t\t\t\t struct buffer_head **bhp)\n{\n\treturn gfs2_meta_buffer(ip, GFS2_METATYPE_DI, ip->i_no_addr, bhp);\n}\n\nstruct buffer_head *gfs2_meta_ra(struct gfs2_glock *gl, u64 dblock, u32 extlen);\n\n#define buffer_busy(bh) \\\n((bh)->b_state & ((1ul << BH_Dirty) | (1ul << BH_Lock) | (1ul << BH_Pinned)))\n\n#endif  \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}