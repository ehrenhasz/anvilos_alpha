{
  "module_name": "quota.h",
  "hash_id": "dffa2a846cbc82abde6b490be80bf81078c7783276f1ffc44d905f000314d390",
  "original_prompt": "Ingested from linux-6.6.14/fs/gfs2/quota.h",
  "human_readable_source": " \n \n\n#ifndef __QUOTA_DOT_H__\n#define __QUOTA_DOT_H__\n\n#include <linux/list_lru.h>\n\nstruct gfs2_inode;\nstruct gfs2_sbd;\n\n#define NO_UID_QUOTA_CHANGE INVALID_UID\n#define NO_GID_QUOTA_CHANGE INVALID_GID\n\nextern int gfs2_qa_get(struct gfs2_inode *ip);\nextern void gfs2_qa_put(struct gfs2_inode *ip);\nextern int gfs2_quota_hold(struct gfs2_inode *ip, kuid_t uid, kgid_t gid);\nextern void gfs2_quota_unhold(struct gfs2_inode *ip);\n\nextern int gfs2_quota_lock(struct gfs2_inode *ip, kuid_t uid, kgid_t gid);\nextern void gfs2_quota_unlock(struct gfs2_inode *ip);\n\nextern int gfs2_quota_check(struct gfs2_inode *ip, kuid_t uid, kgid_t gid,\n\t\t\t    struct gfs2_alloc_parms *ap);\nextern void gfs2_quota_change(struct gfs2_inode *ip, s64 change,\n\t\t\t      kuid_t uid, kgid_t gid);\n\nextern int gfs2_quota_sync(struct super_block *sb, int type);\nextern int gfs2_quota_refresh(struct gfs2_sbd *sdp, struct kqid qid);\n\nextern int gfs2_quota_init(struct gfs2_sbd *sdp);\nextern void gfs2_quota_cleanup(struct gfs2_sbd *sdp);\nextern int gfs2_quotad(void *data);\n\nextern void gfs2_wake_up_statfs(struct gfs2_sbd *sdp);\n\nstatic inline int gfs2_quota_lock_check(struct gfs2_inode *ip,\n\t\t\t\t\tstruct gfs2_alloc_parms *ap)\n{\n\tstruct gfs2_sbd *sdp = GFS2_SB(&ip->i_inode);\n\tint ret;\n\n\tap->allowed = UINT_MAX;  \n\tif (capable(CAP_SYS_RESOURCE) ||\n\t    sdp->sd_args.ar_quota == GFS2_QUOTA_OFF)\n\t\treturn 0;\n\tret = gfs2_quota_lock(ip, NO_UID_QUOTA_CHANGE, NO_GID_QUOTA_CHANGE);\n\tif (ret)\n\t\treturn ret;\n\tif (sdp->sd_args.ar_quota != GFS2_QUOTA_ON &&\n\t    sdp->sd_args.ar_quota != GFS2_QUOTA_QUIET)\n\t\treturn 0;\n\tret = gfs2_quota_check(ip, ip->i_inode.i_uid, ip->i_inode.i_gid, ap);\n\tif (ret)\n\t\tgfs2_quota_unlock(ip);\n\treturn ret;\n}\n\nextern const struct quotactl_ops gfs2_quotactl_ops;\nextern struct shrinker gfs2_qd_shrinker;\nextern struct list_lru gfs2_qd_lru;\nextern void __init gfs2_quota_hash_init(void);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}