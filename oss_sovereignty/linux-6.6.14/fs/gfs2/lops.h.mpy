{
  "module_name": "lops.h",
  "hash_id": "182547126cfce88e622034f61556182fd75af80a44fcc17ec2c1008de5215d59",
  "original_prompt": "Ingested from linux-6.6.14/fs/gfs2/lops.h",
  "human_readable_source": " \n \n\n#ifndef __LOPS_DOT_H__\n#define __LOPS_DOT_H__\n\n#include <linux/list.h>\n#include \"incore.h\"\n\nextern const struct gfs2_log_operations *gfs2_log_ops[];\nextern void gfs2_log_incr_head(struct gfs2_sbd *sdp);\nextern u64 gfs2_log_bmap(struct gfs2_jdesc *jd, unsigned int lbn);\nextern void gfs2_log_write(struct gfs2_sbd *sdp, struct gfs2_jdesc *jd,\n\t\t\t   struct page *page, unsigned size, unsigned offset,\n\t\t\t   u64 blkno);\nextern void gfs2_log_submit_bio(struct bio **biop, blk_opf_t opf);\nextern void gfs2_pin(struct gfs2_sbd *sdp, struct buffer_head *bh);\nextern int gfs2_find_jhead(struct gfs2_jdesc *jd,\n\t\t\t   struct gfs2_log_header_host *head, bool keep_cache);\nextern void gfs2_drain_revokes(struct gfs2_sbd *sdp);\nstatic inline unsigned int buf_limit(struct gfs2_sbd *sdp)\n{\n\treturn sdp->sd_ldptrs;\n}\n\nstatic inline unsigned int databuf_limit(struct gfs2_sbd *sdp)\n{\n\treturn sdp->sd_ldptrs / 2;\n}\n\nstatic inline void lops_before_commit(struct gfs2_sbd *sdp,\n\t\t\t\t      struct gfs2_trans *tr)\n{\n\tint x;\n\tfor (x = 0; gfs2_log_ops[x]; x++)\n\t\tif (gfs2_log_ops[x]->lo_before_commit)\n\t\t\tgfs2_log_ops[x]->lo_before_commit(sdp, tr);\n}\n\nstatic inline void lops_after_commit(struct gfs2_sbd *sdp,\n\t\t\t\t     struct gfs2_trans *tr)\n{\n\tint x;\n\tfor (x = 0; gfs2_log_ops[x]; x++)\n\t\tif (gfs2_log_ops[x]->lo_after_commit)\n\t\t\tgfs2_log_ops[x]->lo_after_commit(sdp, tr);\n}\n\nstatic inline void lops_before_scan(struct gfs2_jdesc *jd,\n\t\t\t\t    struct gfs2_log_header_host *head,\n\t\t\t\t    unsigned int pass)\n{\n\tint x;\n\tfor (x = 0; gfs2_log_ops[x]; x++)\n\t\tif (gfs2_log_ops[x]->lo_before_scan)\n\t\t\tgfs2_log_ops[x]->lo_before_scan(jd, head, pass);\n}\n\nstatic inline int lops_scan_elements(struct gfs2_jdesc *jd, u32 start,\n\t\t\t\t     struct gfs2_log_descriptor *ld,\n\t\t\t\t     __be64 *ptr,\n\t\t\t\t     unsigned int pass)\n{\n\tint x, error;\n\tfor (x = 0; gfs2_log_ops[x]; x++)\n\t\tif (gfs2_log_ops[x]->lo_scan_elements) {\n\t\t\terror = gfs2_log_ops[x]->lo_scan_elements(jd, start,\n\t\t\t\t\t\t\t\t  ld, ptr, pass);\n\t\t\tif (error)\n\t\t\t\treturn error;\n\t\t}\n\n\treturn 0;\n}\n\nstatic inline void lops_after_scan(struct gfs2_jdesc *jd, int error,\n\t\t\t\t   unsigned int pass)\n{\n\tint x;\n\tfor (x = 0; gfs2_log_ops[x]; x++)\n\t\tif (gfs2_log_ops[x]->lo_before_scan)\n\t\t\tgfs2_log_ops[x]->lo_after_scan(jd, error, pass);\n}\n\n#endif  \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}