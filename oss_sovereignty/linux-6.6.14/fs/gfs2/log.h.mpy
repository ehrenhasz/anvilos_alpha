{
  "module_name": "log.h",
  "hash_id": "762294a27e37a859c6e55c5c3f3c1fb6f05338959d3f85538da31546664cfac1",
  "original_prompt": "Ingested from linux-6.6.14/fs/gfs2/log.h",
  "human_readable_source": " \n \n\n#ifndef __LOG_DOT_H__\n#define __LOG_DOT_H__\n\n#include <linux/list.h>\n#include <linux/spinlock.h>\n#include <linux/writeback.h>\n#include \"incore.h\"\n#include \"inode.h\"\n\n \n#define GFS2_LOG_FLUSH_MIN_BLOCKS 4\n\n \n\nstatic inline void gfs2_log_lock(struct gfs2_sbd *sdp)\n__acquires(&sdp->sd_log_lock)\n{\n\tspin_lock(&sdp->sd_log_lock);\n}\n\n \n\nstatic inline void gfs2_log_unlock(struct gfs2_sbd *sdp)\n__releases(&sdp->sd_log_lock)\n{\n\tspin_unlock(&sdp->sd_log_lock);\n}\n\nstatic inline void gfs2_log_pointers_init(struct gfs2_sbd *sdp,\n\t\t\t\t\t  unsigned int value)\n{\n\tif (++value == sdp->sd_jdesc->jd_blocks) {\n\t\tvalue = 0;\n\t}\n\tsdp->sd_log_tail = value;\n\tsdp->sd_log_flush_tail = value;\n\tsdp->sd_log_head = value;\n}\n\nstatic inline void gfs2_ordered_add_inode(struct gfs2_inode *ip)\n{\n\tstruct gfs2_sbd *sdp = GFS2_SB(&ip->i_inode);\n\n\tif (gfs2_is_jdata(ip) || !gfs2_is_ordered(sdp))\n\t\treturn;\n\n\tif (list_empty(&ip->i_ordered)) {\n\t\tspin_lock(&sdp->sd_ordered_lock);\n\t\tif (list_empty(&ip->i_ordered))\n\t\t\tlist_add(&ip->i_ordered, &sdp->sd_log_ordered);\n\t\tspin_unlock(&sdp->sd_ordered_lock);\n\t}\n}\n\nextern void gfs2_ordered_del_inode(struct gfs2_inode *ip);\nextern unsigned int gfs2_struct2blk(struct gfs2_sbd *sdp, unsigned int nstruct);\nextern void gfs2_remove_from_ail(struct gfs2_bufdata *bd);\nextern bool gfs2_log_is_empty(struct gfs2_sbd *sdp);\nextern void gfs2_log_release_revokes(struct gfs2_sbd *sdp, unsigned int revokes);\nextern void gfs2_log_release(struct gfs2_sbd *sdp, unsigned int blks);\nextern bool gfs2_log_try_reserve(struct gfs2_sbd *sdp, struct gfs2_trans *tr,\n\t\t\t\t unsigned int *extra_revokes);\nextern void gfs2_log_reserve(struct gfs2_sbd *sdp, struct gfs2_trans *tr,\n\t\t\t     unsigned int *extra_revokes);\nextern void gfs2_write_log_header(struct gfs2_sbd *sdp, struct gfs2_jdesc *jd,\n\t\t\t\t  u64 seq, u32 tail, u32 lblock, u32 flags,\n\t\t\t\t  blk_opf_t op_flags);\nextern void gfs2_log_flush(struct gfs2_sbd *sdp, struct gfs2_glock *gl,\n\t\t\t   u32 type);\nextern void gfs2_log_commit(struct gfs2_sbd *sdp, struct gfs2_trans *trans);\nextern void gfs2_ail1_flush(struct gfs2_sbd *sdp, struct writeback_control *wbc);\nextern void log_flush_wait(struct gfs2_sbd *sdp);\n\nextern int gfs2_logd(void *data);\nextern void gfs2_add_revoke(struct gfs2_sbd *sdp, struct gfs2_bufdata *bd);\nextern void gfs2_glock_remove_revoke(struct gfs2_glock *gl);\nextern void gfs2_flush_revokes(struct gfs2_sbd *sdp);\nextern void gfs2_ail_drain(struct gfs2_sbd *sdp);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}