{
  "module_name": "inode.h",
  "hash_id": "fb3daeb273d4f76a82f1f9990bf1df8127ab72b86eee2b0fd9eb7034065a7565",
  "original_prompt": "Ingested from linux-6.6.14/fs/gfs2/inode.h",
  "human_readable_source": " \n \n\n#ifndef __INODE_DOT_H__\n#define __INODE_DOT_H__\n\n#include <linux/fs.h>\n#include <linux/buffer_head.h>\n#include <linux/mm.h>\n#include \"util.h\"\n\nbool gfs2_release_folio(struct folio *folio, gfp_t gfp_mask);\nextern int gfs2_internal_read(struct gfs2_inode *ip,\n\t\t\t      char *buf, loff_t *pos, unsigned size);\nextern void gfs2_set_aops(struct inode *inode);\n\nstatic inline int gfs2_is_stuffed(const struct gfs2_inode *ip)\n{\n\treturn !ip->i_height;\n}\n\nstatic inline int gfs2_is_jdata(const struct gfs2_inode *ip)\n{\n\treturn ip->i_diskflags & GFS2_DIF_JDATA;\n}\n\nstatic inline bool gfs2_is_ordered(const struct gfs2_sbd *sdp)\n{\n\treturn sdp->sd_args.ar_data == GFS2_DATA_ORDERED;\n}\n\nstatic inline bool gfs2_is_writeback(const struct gfs2_sbd *sdp)\n{\n\treturn sdp->sd_args.ar_data == GFS2_DATA_WRITEBACK;\n}\n\nstatic inline int gfs2_is_dir(const struct gfs2_inode *ip)\n{\n\treturn S_ISDIR(ip->i_inode.i_mode);\n}\n\nstatic inline void gfs2_set_inode_blocks(struct inode *inode, u64 blocks)\n{\n\tinode->i_blocks = blocks <<\n\t\t(GFS2_SB(inode)->sd_sb.sb_bsize_shift - GFS2_BASIC_BLOCK_SHIFT);\n}\n\nstatic inline u64 gfs2_get_inode_blocks(const struct inode *inode)\n{\n\treturn inode->i_blocks >>\n\t\t(GFS2_SB(inode)->sd_sb.sb_bsize_shift - GFS2_BASIC_BLOCK_SHIFT);\n}\n\nstatic inline void gfs2_add_inode_blocks(struct inode *inode, s64 change)\n{\n\tchange <<= inode->i_blkbits - GFS2_BASIC_BLOCK_SHIFT;\n\tgfs2_assert(GFS2_SB(inode), (change >= 0 || inode->i_blocks >= -change));\n\tinode->i_blocks += change;\n}\n\nstatic inline int gfs2_check_inum(const struct gfs2_inode *ip, u64 no_addr,\n\t\t\t\t  u64 no_formal_ino)\n{\n\treturn ip->i_no_addr == no_addr && ip->i_no_formal_ino == no_formal_ino;\n}\n\nstatic inline void gfs2_inum_out(const struct gfs2_inode *ip,\n\t\t\t\t struct gfs2_dirent *dent)\n{\n\tdent->de_inum.no_formal_ino = cpu_to_be64(ip->i_no_formal_ino);\n\tdent->de_inum.no_addr = cpu_to_be64(ip->i_no_addr);\n}\n\nstatic inline int gfs2_check_internal_file_size(struct inode *inode,\n\t\t\t\t\t\tu64 minsize, u64 maxsize)\n{\n\tu64 size = i_size_read(inode);\n\tif (size < minsize || size > maxsize)\n\t\tgoto err;\n\tif (size & (BIT(inode->i_blkbits) - 1))\n\t\tgoto err;\n\treturn 0;\nerr:\n\tgfs2_consist_inode(GFS2_I(inode));\n\treturn -EIO;\n}\n\nextern struct inode *gfs2_inode_lookup(struct super_block *sb, unsigned type, \n\t\t\t\t       u64 no_addr, u64 no_formal_ino,\n\t\t\t\t       unsigned int blktype);\nextern struct inode *gfs2_lookup_by_inum(struct gfs2_sbd *sdp, u64 no_addr,\n\t\t\t\t\t u64 no_formal_ino,\n\t\t\t\t\t unsigned int blktype);\n\nextern int gfs2_inode_refresh(struct gfs2_inode *ip);\n\nextern struct inode *gfs2_lookupi(struct inode *dir, const struct qstr *name,\n\t\t\t\t  int is_root);\nextern int gfs2_permission(struct mnt_idmap *idmap,\n\t\t\t   struct inode *inode, int mask);\nextern struct inode *gfs2_lookup_simple(struct inode *dip, const char *name);\nextern void gfs2_dinode_out(const struct gfs2_inode *ip, void *buf);\nextern int gfs2_open_common(struct inode *inode, struct file *file);\nextern loff_t gfs2_seek_data(struct file *file, loff_t offset);\nextern loff_t gfs2_seek_hole(struct file *file, loff_t offset);\n\nextern const struct file_operations gfs2_file_fops_nolock;\nextern const struct file_operations gfs2_dir_fops_nolock;\n\nextern int gfs2_fileattr_get(struct dentry *dentry, struct fileattr *fa);\nextern int gfs2_fileattr_set(struct mnt_idmap *idmap,\n\t\t\t     struct dentry *dentry, struct fileattr *fa);\nextern void gfs2_set_inode_flags(struct inode *inode);\n \n#ifdef CONFIG_GFS2_FS_LOCKING_DLM\nextern const struct file_operations gfs2_file_fops;\nextern const struct file_operations gfs2_dir_fops;\n\nstatic inline int gfs2_localflocks(const struct gfs2_sbd *sdp)\n{\n\treturn sdp->sd_args.ar_localflocks;\n}\n#else  \n#define gfs2_file_fops gfs2_file_fops_nolock\n#define gfs2_dir_fops gfs2_dir_fops_nolock\n\nstatic inline int gfs2_localflocks(const struct gfs2_sbd *sdp)\n{\n\treturn 1;\n}\n#endif  \n\n#endif  \n\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}