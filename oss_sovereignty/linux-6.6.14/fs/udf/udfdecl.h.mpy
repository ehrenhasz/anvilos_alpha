{
  "module_name": "udfdecl.h",
  "hash_id": "dd1aadfa60bbd7897c747bf7c03c43c3aeea81e572a8c527d45f24d9c5eeeef6",
  "original_prompt": "Ingested from linux-6.6.14/fs/udf/udfdecl.h",
  "human_readable_source": " \n#ifndef __UDF_DECL_H\n#define __UDF_DECL_H\n\n#define pr_fmt(fmt) \"UDF-fs: \" fmt\n\n#include \"ecma_167.h\"\n#include \"osta_udf.h\"\n\n#include <linux/fs.h>\n#include <linux/types.h>\n#include <linux/buffer_head.h>\n#include <linux/udf_fs_i.h>\n\n#include \"udf_sb.h\"\n#include \"udfend.h\"\n#include \"udf_i.h\"\n\n#define UDF_DEFAULT_PREALLOC_BLOCKS\t8\n\nextern __printf(3, 4) void _udf_err(struct super_block *sb,\n\t\tconst char *function, const char *fmt, ...);\n#define udf_err(sb, fmt, ...)\t\t\t\t\t\\\n\t_udf_err(sb, __func__, fmt, ##__VA_ARGS__)\n\nextern __printf(3, 4) void _udf_warn(struct super_block *sb,\n\t\tconst char *function, const char *fmt, ...);\n#define udf_warn(sb, fmt, ...)\t\t\t\t\t\\\n\t_udf_warn(sb, __func__, fmt, ##__VA_ARGS__)\n\n#define udf_info(fmt, ...)\t\t\t\t\t\\\n\tpr_info(\"INFO \" fmt, ##__VA_ARGS__)\n\n#define udf_debug(fmt, ...)\t\t\t\t\t\\\n\tpr_debug(\"%s:%d:%s: \" fmt, __FILE__, __LINE__, __func__, ##__VA_ARGS__)\n\n#define UDF_EXTENT_LENGTH_MASK\t0x3FFFFFFF\n#define UDF_EXTENT_FLAG_MASK\t0xC0000000\n\n#define UDF_INVALID_ID ((uint32_t)-1)\n\n#define UDF_NAME_PAD\t\t4\n#define UDF_NAME_LEN\t\t254\n#define UDF_NAME_LEN_CS0\t255\n\nstatic inline size_t udf_file_entry_alloc_offset(struct inode *inode)\n{\n\tstruct udf_inode_info *iinfo = UDF_I(inode);\n\tif (iinfo->i_use)\n\t\treturn sizeof(struct unallocSpaceEntry);\n\telse if (iinfo->i_efe)\n\t\treturn sizeof(struct extendedFileEntry) + iinfo->i_lenEAttr;\n\telse\n\t\treturn sizeof(struct fileEntry) + iinfo->i_lenEAttr;\n}\n\nstatic inline size_t udf_ext0_offset(struct inode *inode)\n{\n\tif (UDF_I(inode)->i_alloc_type == ICBTAG_FLAG_AD_IN_ICB)\n\t\treturn udf_file_entry_alloc_offset(inode);\n\telse\n\t\treturn 0;\n}\n\n \nu8 udf_tag_checksum(const struct tag *t);\n\ntypedef uint32_t udf_pblk_t;\n\nstruct dentry;\nstruct inode;\nstruct task_struct;\nstruct buffer_head;\nstruct super_block;\n\nextern const struct export_operations udf_export_ops;\nextern const struct inode_operations udf_dir_inode_operations;\nextern const struct file_operations udf_dir_operations;\nextern const struct inode_operations udf_file_inode_operations;\nextern const struct file_operations udf_file_operations;\nextern const struct inode_operations udf_symlink_inode_operations;\nextern const struct address_space_operations udf_aops;\nextern const struct address_space_operations udf_symlink_aops;\n\nstruct udf_fileident_iter {\n\tstruct inode *dir;\t\t \n\tloff_t pos;\t\t\t \n\tstruct buffer_head *bh[2];\t \n\tstruct kernel_lb_addr eloc;\t \n\tuint32_t elen;\t\t\t \n\tsector_t loffset;\t\t \n\tstruct extent_position epos;\t \n\tstruct fileIdentDesc fi;\t \n\tuint8_t *name;\t\t\t \n\tuint8_t *namebuf;\t\t \n};\n\nstruct udf_vds_record {\n\tuint32_t block;\n\tuint32_t volDescSeqNum;\n};\n\nstruct generic_desc {\n\tstruct tag\tdescTag;\n\t__le32\t\tvolDescSeqNum;\n};\n\n\n \n\nstatic inline void udf_updated_lvid(struct super_block *sb)\n{\n\tstruct buffer_head *bh = UDF_SB(sb)->s_lvid_bh;\n\n\tBUG_ON(!bh);\n\tWARN_ON_ONCE(((struct logicalVolIntegrityDesc *)\n\t\t     bh->b_data)->integrityType !=\n\t\t     cpu_to_le32(LVID_INTEGRITY_TYPE_OPEN));\n\tUDF_SB(sb)->s_lvid_dirty = 1;\n}\nextern u64 lvid_get_unique_id(struct super_block *sb);\nstruct inode *udf_find_metadata_inode_efe(struct super_block *sb,\n\t\t\t\t\tu32 meta_file_loc, u32 partition_num);\n\n \nstatic inline unsigned int udf_dir_entry_len(struct fileIdentDesc *cfi)\n{\n\treturn ALIGN(sizeof(struct fileIdentDesc) +\n\t\tle16_to_cpu(cfi->lengthOfImpUse) + cfi->lengthFileIdent,\n\t\tUDF_NAME_PAD);\n}\n\n \nextern long udf_ioctl(struct file *, unsigned int, unsigned long);\n\n \nextern struct inode *__udf_iget(struct super_block *, struct kernel_lb_addr *,\n\t\t\t\tbool hidden_inode);\nstatic inline struct inode *udf_iget_special(struct super_block *sb,\n\t\t\t\t\t     struct kernel_lb_addr *ino)\n{\n\treturn __udf_iget(sb, ino, true);\n}\nstatic inline struct inode *udf_iget(struct super_block *sb,\n\t\t\t\t     struct kernel_lb_addr *ino)\n{\n\treturn __udf_iget(sb, ino, false);\n}\nextern int udf_expand_file_adinicb(struct inode *);\nextern struct buffer_head *udf_bread(struct inode *inode, udf_pblk_t block,\n\t\t\t\t      int create, int *err);\nextern int udf_setsize(struct inode *, loff_t);\nextern void udf_evict_inode(struct inode *);\nextern int udf_write_inode(struct inode *, struct writeback_control *wbc);\nextern int8_t inode_bmap(struct inode *, sector_t, struct extent_position *,\n\t\t\t struct kernel_lb_addr *, uint32_t *, sector_t *);\nint udf_get_block(struct inode *, sector_t, struct buffer_head *, int);\nextern int udf_setup_indirect_aext(struct inode *inode, udf_pblk_t block,\n\t\t\t\t   struct extent_position *epos);\nextern int __udf_add_aext(struct inode *inode, struct extent_position *epos,\n\t\t\t  struct kernel_lb_addr *eloc, uint32_t elen, int inc);\nextern int udf_add_aext(struct inode *, struct extent_position *,\n\t\t\tstruct kernel_lb_addr *, uint32_t, int);\nextern void udf_write_aext(struct inode *, struct extent_position *,\n\t\t\t   struct kernel_lb_addr *, uint32_t, int);\nextern int8_t udf_delete_aext(struct inode *, struct extent_position);\nextern int8_t udf_next_aext(struct inode *, struct extent_position *,\n\t\t\t    struct kernel_lb_addr *, uint32_t *, int);\nextern int8_t udf_current_aext(struct inode *, struct extent_position *,\n\t\t\t       struct kernel_lb_addr *, uint32_t *, int);\nextern void udf_update_extra_perms(struct inode *inode, umode_t mode);\n\n \nextern struct genericFormat *udf_add_extendedattr(struct inode *, uint32_t,\n\t\t\t\t\t\t  uint32_t, uint8_t);\nextern struct genericFormat *udf_get_extendedattr(struct inode *, uint32_t,\n\t\t\t\t\t\t  uint8_t);\nextern struct buffer_head *udf_read_tagged(struct super_block *, uint32_t,\n\t\t\t\t\t   uint32_t, uint16_t *);\nextern struct buffer_head *udf_read_ptagged(struct super_block *,\n\t\t\t\t\t    struct kernel_lb_addr *, uint32_t,\n\t\t\t\t\t    uint16_t *);\nextern void udf_update_tag(char *, int);\nextern void udf_new_tag(char *, uint16_t, uint16_t, uint16_t, uint32_t, int);\n\n \nextern unsigned int udf_get_last_session(struct super_block *);\nudf_pblk_t udf_get_last_block(struct super_block *);\n\n \nextern uint32_t udf_get_pblock(struct super_block *, uint32_t, uint16_t,\n\t\t\t       uint32_t);\nextern uint32_t udf_get_pblock_virt15(struct super_block *, uint32_t, uint16_t,\n\t\t\t\t      uint32_t);\nextern uint32_t udf_get_pblock_virt20(struct super_block *, uint32_t, uint16_t,\n\t\t\t\t      uint32_t);\nextern uint32_t udf_get_pblock_spar15(struct super_block *, uint32_t, uint16_t,\n\t\t\t\t      uint32_t);\nextern uint32_t udf_get_pblock_meta25(struct super_block *, uint32_t, uint16_t,\n\t\t\t\t\t  uint32_t);\nextern int udf_relocate_blocks(struct super_block *, long, long *);\n\nstatic inline uint32_t\nudf_get_lb_pblock(struct super_block *sb, struct kernel_lb_addr *loc,\n\t\t  uint32_t offset)\n{\n\treturn udf_get_pblock(sb, loc->logicalBlockNum,\n\t\t\tloc->partitionReferenceNum, offset);\n}\n\n \nextern int udf_get_filename(struct super_block *, const uint8_t *, int,\n\t\t\t    uint8_t *, int);\nextern int udf_put_filename(struct super_block *, const uint8_t *, int,\n\t\t\t    uint8_t *, int);\nextern int udf_dstrCS0toChar(struct super_block *, uint8_t *, int,\n\t\t\t     const uint8_t *, int);\n\n \nextern void udf_free_inode(struct inode *);\nextern struct inode *udf_new_inode(struct inode *, umode_t);\n\n \nextern void udf_truncate_tail_extent(struct inode *);\nextern void udf_discard_prealloc(struct inode *);\nextern int udf_truncate_extents(struct inode *);\n\n \nextern void udf_free_blocks(struct super_block *, struct inode *,\n\t\t\t    struct kernel_lb_addr *, uint32_t, uint32_t);\nextern int udf_prealloc_blocks(struct super_block *, struct inode *, uint16_t,\n\t\t\t       uint32_t, uint32_t);\nextern udf_pblk_t udf_new_block(struct super_block *sb, struct inode *inode,\n\t\t\t\t uint16_t partition, uint32_t goal, int *err);\n\n \nint udf_fiiter_init(struct udf_fileident_iter *iter, struct inode *dir,\n\t\t    loff_t pos);\nint udf_fiiter_advance(struct udf_fileident_iter *iter);\nvoid udf_fiiter_release(struct udf_fileident_iter *iter);\nvoid udf_fiiter_write_fi(struct udf_fileident_iter *iter, uint8_t *impuse);\nvoid udf_fiiter_update_elen(struct udf_fileident_iter *iter, uint32_t new_elen);\nint udf_fiiter_append_blk(struct udf_fileident_iter *iter);\nextern struct long_ad *udf_get_filelongad(uint8_t *, int, uint32_t *, int);\nextern struct short_ad *udf_get_fileshortad(uint8_t *, int, uint32_t *, int);\n\n \nextern void udf_disk_stamp_to_time(struct timespec64 *dest,\n\t\t\t\t\t\tstruct timestamp src);\nextern void udf_time_to_disk_stamp(struct timestamp *dest, struct timespec64 src);\n\n#endif\t\t\t\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}