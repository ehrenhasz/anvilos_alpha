{
  "module_name": "udf_sb.h",
  "hash_id": "58c56586b4118f2c80d6a33b5d0f0a0e6f06dbba9044bd92b5f6b19f8608b362",
  "original_prompt": "Ingested from linux-6.6.14/fs/udf/udf_sb.h",
  "human_readable_source": " \n#ifndef __LINUX_UDF_SB_H\n#define __LINUX_UDF_SB_H\n\n#include <linux/mutex.h>\n#include <linux/bitops.h>\n#include <linux/magic.h>\n\n \n#define UDF_MAX_READ_VERSION\t\t0x0260\n#define UDF_MAX_WRITE_VERSION\t\t0x0201\n\n#define UDF_FLAG_USE_EXTENDED_FE\t0\n#define UDF_VERS_USE_EXTENDED_FE\t0x0200\n#define UDF_FLAG_USE_STREAMS\t\t1\n#define UDF_VERS_USE_STREAMS\t\t0x0200\n#define UDF_FLAG_USE_SHORT_AD\t\t2\n#define UDF_FLAG_USE_AD_IN_ICB\t\t3\n#define UDF_FLAG_USE_FILE_CTIME_EA\t4\n#define UDF_FLAG_STRICT\t\t\t5\n#define UDF_FLAG_UNDELETE\t\t6\n#define UDF_FLAG_UNHIDE\t\t\t7\n#define UDF_FLAG_UID_FORGET     11     \n#define UDF_FLAG_GID_FORGET     12\n#define UDF_FLAG_UID_SET\t13\n#define UDF_FLAG_GID_SET\t14\n#define UDF_FLAG_SESSION_SET\t15\n#define UDF_FLAG_LASTBLOCK_SET\t16\n#define UDF_FLAG_BLOCKSIZE_SET\t17\n#define UDF_FLAG_INCONSISTENT\t18\n#define UDF_FLAG_RW_INCOMPAT\t19\t \n\n#define UDF_PART_FLAG_UNALLOC_BITMAP\t0x0001\n#define UDF_PART_FLAG_UNALLOC_TABLE\t0x0002\n#define UDF_PART_FLAG_READ_ONLY\t\t0x0010\n#define UDF_PART_FLAG_WRITE_ONCE\t0x0020\n#define UDF_PART_FLAG_REWRITABLE\t0x0040\n#define UDF_PART_FLAG_OVERWRITABLE\t0x0080\n\n#define UDF_MAX_BLOCK_LOADED\t8\n\n#define UDF_TYPE1_MAP15\t\t\t0x1511U\n#define UDF_VIRTUAL_MAP15\t\t0x1512U\n#define UDF_VIRTUAL_MAP20\t\t0x2012U\n#define UDF_SPARABLE_MAP15\t\t0x1522U\n#define UDF_METADATA_MAP25\t\t0x2511U\n\n#define UDF_INVALID_MODE\t\t((umode_t)-1)\n\n#define MF_DUPLICATE_MD\t\t0x01\n#define MF_MIRROR_FE_LOADED\t0x02\n\n#define EFSCORRUPTED EUCLEAN\n\nstruct udf_meta_data {\n\t__u32\ts_meta_file_loc;\n\t__u32\ts_mirror_file_loc;\n\t__u32\ts_bitmap_file_loc;\n\t__u32\ts_alloc_unit_size;\n\t__u16\ts_align_unit_size;\n\t \n\t__u16   s_phys_partition_ref;\n\tint\ts_flags;\n\tstruct inode *s_metadata_fe;\n\tstruct inode *s_mirror_fe;\n\tstruct inode *s_bitmap_fe;\n};\n\nstruct udf_sparing_data {\n\t__u16\ts_packet_len;\n\tstruct buffer_head *s_spar_map[4];\n};\n\nstruct udf_virtual_data {\n\t__u32\ts_num_entries;\n\t__u16\ts_start_offset;\n};\n\nstruct udf_bitmap {\n\t__u32\t\t\ts_extPosition;\n\tint\t\t\ts_nr_groups;\n\tstruct buffer_head\t*s_block_bitmap[];\n};\n\nstruct udf_part_map {\n\tunion {\n\t\tstruct udf_bitmap\t*s_bitmap;\n\t\tstruct inode\t\t*s_table;\n\t} s_uspace;\n\t__u32\ts_partition_root;\n\t__u32\ts_partition_len;\n\t__u16\ts_partition_type;\n\t__u16\ts_partition_num;\n\tunion {\n\t\tstruct udf_sparing_data s_sparing;\n\t\tstruct udf_virtual_data s_virtual;\n\t\tstruct udf_meta_data s_metadata;\n\t} s_type_specific;\n\t__u32\t(*s_partition_func)(struct super_block *, __u32, __u16, __u32);\n\t__u16\ts_volumeseqnum;\n\t__u16\ts_partition_flags;\n};\n\n#pragma pack()\n\nstruct udf_sb_info {\n\tstruct udf_part_map\t*s_partmaps;\n\t__u8\t\t\ts_volume_ident[32];\n\n\t \n\t__u16\t\t\ts_partitions;\n\t__u16\t\t\ts_partition;\n\n\t \n\t__s32\t\t\ts_session;\n\t__u32\t\t\ts_anchor;\n\t__u32\t\t\ts_last_block;\n\n\tstruct buffer_head\t*s_lvid_bh;\n\n\t \n\tumode_t\t\t\ts_umask;\n\tkgid_t\t\t\ts_gid;\n\tkuid_t\t\t\ts_uid;\n\tumode_t\t\t\ts_fmode;\n\tumode_t\t\t\ts_dmode;\n\t \n\trwlock_t\t\ts_cred_lock;\n\n\t \n\tstruct timespec64\ts_record_time;\n\n\t \n\t__u16\t\t\ts_serial_number;\n\n\t \n\t__u16\t\t\ts_udfrev;\n\n\t \n\tunsigned long\t\ts_flags;\n\n\t \n\tstruct nls_table\t*s_nls_map;\n\n\t \n\tstruct inode\t\t*s_vat_inode;\n\n\tstruct mutex\t\ts_alloc_mutex;\n\t \n\tunsigned int\t\ts_lvid_dirty;\n};\n\nstatic inline struct udf_sb_info *UDF_SB(struct super_block *sb)\n{\n\treturn sb->s_fs_info;\n}\n\nstruct logicalVolIntegrityDescImpUse *udf_sb_lvidiu(struct super_block *sb);\n\nint udf_compute_nr_groups(struct super_block *sb, u32 partition);\n\nstatic inline int UDF_QUERY_FLAG(struct super_block *sb, int flag)\n{\n\treturn test_bit(flag, &UDF_SB(sb)->s_flags);\n}\n\nstatic inline void UDF_SET_FLAG(struct super_block *sb, int flag)\n{\n\tset_bit(flag, &UDF_SB(sb)->s_flags);\n}\n\nstatic inline void UDF_CLEAR_FLAG(struct super_block *sb, int flag)\n{\n\tclear_bit(flag, &UDF_SB(sb)->s_flags);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}