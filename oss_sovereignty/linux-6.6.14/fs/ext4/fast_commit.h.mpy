{
  "module_name": "fast_commit.h",
  "hash_id": "08a6e865acd6508297f2ac587f35d863d06fc8ea95a095d983ec2ba2e962e6fe",
  "original_prompt": "Ingested from linux-6.6.14/fs/ext4/fast_commit.h",
  "human_readable_source": " \n\n#ifndef __FAST_COMMIT_H__\n#define __FAST_COMMIT_H__\n\n \n\n \n#define EXT4_FC_TAG_ADD_RANGE\t\t0x0001\n#define EXT4_FC_TAG_DEL_RANGE\t\t0x0002\n#define EXT4_FC_TAG_CREAT\t\t0x0003\n#define EXT4_FC_TAG_LINK\t\t0x0004\n#define EXT4_FC_TAG_UNLINK\t\t0x0005\n#define EXT4_FC_TAG_INODE\t\t0x0006\n#define EXT4_FC_TAG_PAD\t\t\t0x0007\n#define EXT4_FC_TAG_TAIL\t\t0x0008\n#define EXT4_FC_TAG_HEAD\t\t0x0009\n\n#define EXT4_FC_SUPPORTED_FEATURES\t0x0\n\n \n\n \nstruct ext4_fc_tl {\n\t__le16 fc_tag;\n\t__le16 fc_len;\n};\n\n \nstruct ext4_fc_head {\n\t__le32 fc_features;\n\t__le32 fc_tid;\n};\n\n \nstruct ext4_fc_add_range {\n\t__le32 fc_ino;\n\t__u8 fc_ex[12];\n};\n\n \nstruct ext4_fc_del_range {\n\t__le32 fc_ino;\n\t__le32 fc_lblk;\n\t__le32 fc_len;\n};\n\n \nstruct ext4_fc_dentry_info {\n\t__le32 fc_parent_ino;\n\t__le32 fc_ino;\n\t__u8 fc_dname[];\n};\n\n \nstruct ext4_fc_inode {\n\t__le32 fc_ino;\n\t__u8 fc_raw_inode[];\n};\n\n \nstruct ext4_fc_tail {\n\t__le32 fc_tid;\n\t__le32 fc_crc;\n};\n\n \n#define EXT4_FC_TAG_BASE_LEN (sizeof(struct ext4_fc_tl))\n\n \nenum {\n\tEXT4_FC_STATUS_OK = 0,\n\tEXT4_FC_STATUS_INELIGIBLE,\n\tEXT4_FC_STATUS_SKIPPED,\n\tEXT4_FC_STATUS_FAILED,\n};\n\n \nenum {\n\tEXT4_FC_REASON_XATTR = 0,\n\tEXT4_FC_REASON_CROSS_RENAME,\n\tEXT4_FC_REASON_JOURNAL_FLAG_CHANGE,\n\tEXT4_FC_REASON_NOMEM,\n\tEXT4_FC_REASON_SWAP_BOOT,\n\tEXT4_FC_REASON_RESIZE,\n\tEXT4_FC_REASON_RENAME_DIR,\n\tEXT4_FC_REASON_FALLOC_RANGE,\n\tEXT4_FC_REASON_INODE_JOURNAL_DATA,\n\tEXT4_FC_REASON_ENCRYPTED_FILENAME,\n\tEXT4_FC_REASON_MAX\n};\n\n#ifdef __KERNEL__\n \nstruct ext4_fc_dentry_update {\n\tint fcd_op;\t\t \n\tint fcd_parent;\t\t \n\tint fcd_ino;\t\t \n\tstruct qstr fcd_name;\t \n\tunsigned char fcd_iname[DNAME_INLINE_LEN];\t \n\tstruct list_head fcd_list;\n\tstruct list_head fcd_dilist;\n};\n\nstruct ext4_fc_stats {\n\tunsigned int fc_ineligible_reason_count[EXT4_FC_REASON_MAX];\n\tunsigned long fc_num_commits;\n\tunsigned long fc_ineligible_commits;\n\tunsigned long fc_failed_commits;\n\tunsigned long fc_skipped_commits;\n\tunsigned long fc_numblks;\n\tu64 s_fc_avg_commit_time;\n};\n\n#define EXT4_FC_REPLAY_REALLOC_INCREMENT\t4\n\n \nstruct ext4_fc_alloc_region {\n\text4_lblk_t lblk;\n\text4_fsblk_t pblk;\n\tint ino, len;\n};\n\n \nstruct ext4_fc_replay_state {\n\tint fc_replay_num_tags;\n\tint fc_replay_expected_off;\n\tint fc_current_pass;\n\tint fc_cur_tag;\n\tint fc_crc;\n\tstruct ext4_fc_alloc_region *fc_regions;\n\tint fc_regions_size, fc_regions_used, fc_regions_valid;\n\tint *fc_modified_inodes;\n\tint fc_modified_inodes_used, fc_modified_inodes_size;\n};\n\n#define region_last(__region) (((__region)->lblk) + ((__region)->len) - 1)\n#endif\n\nstatic inline const char *tag2str(__u16 tag)\n{\n\tswitch (tag) {\n\tcase EXT4_FC_TAG_LINK:\n\t\treturn \"ADD_ENTRY\";\n\tcase EXT4_FC_TAG_UNLINK:\n\t\treturn \"DEL_ENTRY\";\n\tcase EXT4_FC_TAG_ADD_RANGE:\n\t\treturn \"ADD_RANGE\";\n\tcase EXT4_FC_TAG_CREAT:\n\t\treturn \"CREAT_DENTRY\";\n\tcase EXT4_FC_TAG_DEL_RANGE:\n\t\treturn \"DEL_RANGE\";\n\tcase EXT4_FC_TAG_INODE:\n\t\treturn \"INODE\";\n\tcase EXT4_FC_TAG_PAD:\n\t\treturn \"PAD\";\n\tcase EXT4_FC_TAG_TAIL:\n\t\treturn \"TAIL\";\n\tcase EXT4_FC_TAG_HEAD:\n\t\treturn \"HEAD\";\n\tdefault:\n\t\treturn \"ERROR\";\n\t}\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}