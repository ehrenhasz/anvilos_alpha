{
  "module_name": "xdr4.h",
  "hash_id": "b5dea34341bcce369f33225a6fe7f1b4bd843dc493cd1072cca73fb557f5c00f",
  "original_prompt": "Ingested from linux-6.6.14/fs/nfsd/xdr4.h",
  "human_readable_source": " \n\n#ifndef _LINUX_NFSD_XDR4_H\n#define _LINUX_NFSD_XDR4_H\n\n#include \"state.h\"\n#include \"nfsd.h\"\n\n#define NFSD4_MAX_TAGLEN\t128\n#define XDR_LEN(n)                     (((n) + 3) & ~3)\n\n#define CURRENT_STATE_ID_FLAG (1<<0)\n#define SAVED_STATE_ID_FLAG (1<<1)\n\n#define SET_CSTATE_FLAG(c, f) ((c)->sid_flags |= (f))\n#define HAS_CSTATE_FLAG(c, f) ((c)->sid_flags & (f))\n#define CLEAR_CSTATE_FLAG(c, f) ((c)->sid_flags &= ~(f))\n\nstruct nfsd4_compound_state {\n\tstruct svc_fh\t\tcurrent_fh;\n\tstruct svc_fh\t\tsave_fh;\n\tstruct nfs4_stateowner\t*replay_owner;\n\tstruct nfs4_client\t*clp;\n\t \n\tstruct nfsd4_session\t*session;\n\tstruct nfsd4_slot\t*slot;\n\tint\t\t\tdata_offset;\n\tbool                    spo_must_allowed;\n\tsize_t\t\t\tiovlen;\n\tu32\t\t\tminorversion;\n\t__be32\t\t\tstatus;\n\tstateid_t\tcurrent_stateid;\n\tstateid_t\tsave_stateid;\n\t \n\tu32\t\tsid_flags;\n};\n\nstatic inline bool nfsd4_has_session(struct nfsd4_compound_state *cs)\n{\n\treturn cs->slot != NULL;\n}\n\nstruct nfsd4_change_info {\n\tu32\t\tatomic;\n\tu64\t\tbefore_change;\n\tu64\t\tafter_change;\n};\n\nstruct nfsd4_access {\n\tu32\t\tac_req_access;       \n\tu32\t\tac_supported;        \n\tu32\t\tac_resp_access;      \n};\n\nstruct nfsd4_close {\n\tu32\t\tcl_seqid;            \n\tstateid_t\tcl_stateid;          \n};\n\nstruct nfsd4_commit {\n\tu64\t\tco_offset;           \n\tu32\t\tco_count;            \n\tnfs4_verifier\tco_verf;             \n};\n\nstruct nfsd4_create {\n\tu32\t\tcr_namelen;          \n\tchar *\t\tcr_name;             \n\tu32\t\tcr_type;             \n\tunion {                              \n\t\tstruct {\n\t\t\tu32 datalen;\n\t\t\tchar *data;\n\t\t\tstruct kvec first;\n\t\t} link;    \n\t\tstruct {\n\t\t\tu32 specdata1;\n\t\t\tu32 specdata2;\n\t\t} dev;     \n\t} u;\n\tu32\t\tcr_bmval[3];         \n\tstruct iattr\tcr_iattr;            \n\tint\t\tcr_umask;            \n\tstruct nfsd4_change_info  cr_cinfo;  \n\tstruct nfs4_acl *cr_acl;\n\tstruct xdr_netobj cr_label;\n};\n#define cr_datalen\tu.link.datalen\n#define cr_data\t\tu.link.data\n#define cr_first\tu.link.first\n#define cr_specdata1\tu.dev.specdata1\n#define cr_specdata2\tu.dev.specdata2\n\nstruct nfsd4_delegreturn {\n\tstateid_t\tdr_stateid;\n};\n\nstruct nfsd4_getattr {\n\tu32\t\tga_bmval[3];         \n\tstruct svc_fh\t*ga_fhp;             \n};\n\nstruct nfsd4_link {\n\tu32\t\tli_namelen;          \n\tchar *\t\tli_name;             \n\tstruct nfsd4_change_info  li_cinfo;  \n};\n\nstruct nfsd4_lock_denied {\n\tclientid_t\tld_clientid;\n\tstruct xdr_netobj\tld_owner;\n\tu64             ld_start;\n\tu64             ld_length;\n\tu32             ld_type;\n};\n\nstruct nfsd4_lock {\n\t \n\tu32             lk_type;\n\tu32             lk_reclaim;          \n\tu64             lk_offset;\n\tu64             lk_length;\n\tu32             lk_is_new;\n\tunion {\n\t\tstruct {\n\t\t\tu32             open_seqid;\n\t\t\tstateid_t       open_stateid;\n\t\t\tu32             lock_seqid;\n\t\t\tclientid_t      clientid;\n\t\t\tstruct xdr_netobj owner;\n\t\t} new;\n\t\tstruct {\n\t\t\tstateid_t       lock_stateid;\n\t\t\tu32             lock_seqid;\n\t\t} old;\n\t} v;\n\n\t \n\tunion {\n\t\tstruct {\n\t\t\tstateid_t               stateid;\n\t\t} ok;\n\t\tstruct nfsd4_lock_denied        denied;\n\t} u;\n};\n#define lk_new_open_seqid       v.new.open_seqid\n#define lk_new_open_stateid     v.new.open_stateid\n#define lk_new_lock_seqid       v.new.lock_seqid\n#define lk_new_clientid         v.new.clientid\n#define lk_new_owner            v.new.owner\n#define lk_old_lock_stateid     v.old.lock_stateid\n#define lk_old_lock_seqid       v.old.lock_seqid\n\n#define lk_resp_stateid u.ok.stateid\n#define lk_denied       u.denied\n\n\nstruct nfsd4_lockt {\n\tu32\t\t\t\tlt_type;\n\tclientid_t\t\t\tlt_clientid;\n\tstruct xdr_netobj\t\tlt_owner;\n\tu64\t\t\t\tlt_offset;\n\tu64\t\t\t\tlt_length;\n\tstruct nfsd4_lock_denied  \tlt_denied;\n};\n\n \nstruct nfsd4_locku {\n\tu32             lu_type;\n\tu32             lu_seqid;\n\tstateid_t       lu_stateid;\n\tu64             lu_offset;\n\tu64             lu_length;\n};\n\n\nstruct nfsd4_lookup {\n\tu32\t\tlo_len;              \n\tchar *\t\tlo_name;             \n};\n\nstruct nfsd4_putfh {\n\tu32\t\tpf_fhlen;            \n\tchar\t\t*pf_fhval;           \n\tbool\t\tno_verify;\t     \n};\n\nstruct nfsd4_getxattr {\n\tchar\t\t*getxa_name;\t\t \n\tu32\t\tgetxa_len;\t\t \n\tvoid\t\t*getxa_buf;\n};\n\nstruct nfsd4_setxattr {\n\tu32\t\tsetxa_flags;\t\t \n\tchar\t\t*setxa_name;\t\t \n\tchar\t\t*setxa_buf;\t\t \n\tu32\t\tsetxa_len;\t\t \n\tstruct nfsd4_change_info  setxa_cinfo;\t \n};\n\nstruct nfsd4_removexattr {\n\tchar\t\t*rmxa_name;\t\t \n\tstruct nfsd4_change_info  rmxa_cinfo;\t \n};\n\nstruct nfsd4_listxattrs {\n\tu64\t\tlsxa_cookie;\t\t \n\tu32\t\tlsxa_maxcount;\t\t \n\tchar\t\t*lsxa_buf;\t\t \n\tu32\t\tlsxa_len;\t\t \n};\n\nstruct nfsd4_open {\n\tu32\t\top_claim_type;       \n\tu32\t\top_fnamelen;\n\tchar *\t\top_fname;\t     \n\tu32\t\top_delegate_type;    \n\tstateid_t       op_delegate_stateid;  \n\tu32\t\top_why_no_deleg;     \n\tu32\t\top_create;     \t     \n\tu32\t\top_createmode;       \n\tint\t\top_umask;            \n\tu32\t\top_bmval[3];         \n\tstruct iattr\top_iattr;            \n\tnfs4_verifier\top_verf __attribute__((aligned(32)));\n\t\t\t\t\t     \n\tclientid_t\top_clientid;         \n\tstruct xdr_netobj op_owner;            \n\tu32\t\top_seqid;            \n\tu32\t\top_share_access;     \n\tu32\t\top_share_deny;       \n\tu32\t\top_deleg_want;       \n\tstateid_t\top_stateid;          \n\t__be32\t\top_xdr_error;        \n\tu32\t\top_recall;           \n\tstruct nfsd4_change_info  op_cinfo;  \n\tu32\t\top_rflags;           \n\tbool\t\top_truncate;         \n\tbool\t\top_created;          \n\tstruct nfs4_openowner *op_openowner;  \n\tstruct file\t*op_filp;            \n\tstruct nfs4_file *op_file;           \n\tstruct nfs4_ol_stateid *op_stp;\t     \n\tstruct nfs4_clnt_odstate *op_odstate;  \n\tstruct nfs4_acl *op_acl;\n\tstruct xdr_netobj op_label;\n\tstruct svc_rqst *op_rqstp;\n};\n\nstruct nfsd4_open_confirm {\n\tstateid_t\toc_req_stateid\t\t ;\n\tu32\t\toc_seqid    \t\t ;\n\tstateid_t\toc_resp_stateid\t\t ;\n};\n\nstruct nfsd4_open_downgrade {\n\tstateid_t       od_stateid;\n\tu32             od_seqid;\n\tu32             od_share_access;\t \n\tu32\t\tod_deleg_want;\t\t \n\tu32             od_share_deny;\t\t \n};\n\n\nstruct nfsd4_read {\n\tstateid_t\t\trd_stateid;          \n\tu64\t\t\trd_offset;           \n\tu32\t\t\trd_length;           \n\tint\t\t\trd_vlen;\n\tstruct nfsd_file\t*rd_nf;\n\n\tstruct svc_rqst\t\t*rd_rqstp;           \n\tstruct svc_fh\t\t*rd_fhp;             \n\tu32\t\t\trd_eof;              \n};\n\nstruct nfsd4_readdir {\n\tu64\t\trd_cookie;           \n\tnfs4_verifier\trd_verf;             \n\tu32\t\trd_dircount;         \n\tu32\t\trd_maxcount;         \n\tu32\t\trd_bmval[3];         \n\tstruct svc_rqst *rd_rqstp;           \n\tstruct svc_fh * rd_fhp;              \n\n\tstruct readdir_cd\tcommon;\n\tstruct xdr_stream\t*xdr;\n\tint\t\t\tcookie_offset;\n};\n\nstruct nfsd4_release_lockowner {\n\tclientid_t        rl_clientid;\n\tstruct xdr_netobj rl_owner;\n};\nstruct nfsd4_readlink {\n\tstruct svc_rqst *rl_rqstp;           \n\tstruct svc_fh *\trl_fhp;              \n};\n\nstruct nfsd4_remove {\n\tu32\t\trm_namelen;          \n\tchar *\t\trm_name;             \n\tstruct nfsd4_change_info  rm_cinfo;  \n};\n\nstruct nfsd4_rename {\n\tu32\t\trn_snamelen;         \n\tchar *\t\trn_sname;            \n\tu32\t\trn_tnamelen;         \n\tchar *\t\trn_tname;            \n\tstruct nfsd4_change_info  rn_sinfo;  \n\tstruct nfsd4_change_info  rn_tinfo;  \n};\n\nstruct nfsd4_secinfo {\n\tu32 si_namelen;\t\t\t\t\t \n\tchar *si_name;\t\t\t\t\t \n\tstruct svc_export *si_exp;\t\t\t \n};\n\nstruct nfsd4_secinfo_no_name {\n\tu32 sin_style;\t\t\t\t\t \n\tstruct svc_export *sin_exp;\t\t\t \n};\n\nstruct nfsd4_setattr {\n\tstateid_t\tsa_stateid;          \n\tu32\t\tsa_bmval[3];         \n\tstruct iattr\tsa_iattr;            \n\tstruct nfs4_acl *sa_acl;\n\tstruct xdr_netobj sa_label;\n};\n\nstruct nfsd4_setclientid {\n\tnfs4_verifier\tse_verf;             \n\tstruct xdr_netobj se_name;\n\tu32\t\tse_callback_prog;    \n\tu32\t\tse_callback_netid_len;   \n\tchar *\t\tse_callback_netid_val;   \n\tu32\t\tse_callback_addr_len;    \n\tchar *\t\tse_callback_addr_val;    \n\tu32\t\tse_callback_ident;   \n\tclientid_t\tse_clientid;         \n\tnfs4_verifier\tse_confirm;          \n};\n\nstruct nfsd4_setclientid_confirm {\n\tclientid_t\tsc_clientid;\n\tnfs4_verifier\tsc_confirm;\n};\n\nstruct nfsd4_test_stateid_id {\n\t__be32\t\t\tts_id_status;\n\tstateid_t\t\tts_id_stateid;\n\tstruct list_head\tts_id_list;\n};\n\nstruct nfsd4_test_stateid {\n\tu32\t\tts_num_ids;\n\tstruct list_head ts_stateid_list;\n};\n\nstruct nfsd4_free_stateid {\n\tstateid_t\tfr_stateid;          \n};\n\n \nstruct nfsd4_verify {\n\tu32\t\tve_bmval[3];         \n\tu32\t\tve_attrlen;          \n\tchar *\t\tve_attrval;          \n};\n\nstruct nfsd4_write {\n\tstateid_t\twr_stateid;          \n\tu64\t\twr_offset;           \n\tu32\t\twr_stable_how;       \n\tu32\t\twr_buflen;           \n\tstruct xdr_buf\twr_payload;          \n\n\tu32\t\twr_bytes_written;    \n\tu32\t\twr_how_written;      \n\tnfs4_verifier\twr_verifier;         \n};\n\nstruct nfsd4_exchange_id {\n\tnfs4_verifier\tverifier;\n\tstruct xdr_netobj clname;\n\tu32\t\tflags;\n\tclientid_t\tclientid;\n\tu32\t\tseqid;\n\tu32\t\tspa_how;\n\tu32             spo_must_enforce[3];\n\tu32             spo_must_allow[3];\n\tstruct xdr_netobj nii_domain;\n\tstruct xdr_netobj nii_name;\n\tstruct timespec64 nii_time;\n};\n\nstruct nfsd4_sequence {\n\tstruct nfs4_sessionid\tsessionid;\t\t \n\tu32\t\t\tseqid;\t\t\t \n\tu32\t\t\tslotid;\t\t\t \n\tu32\t\t\tmaxslots;\t\t \n\tu32\t\t\tcachethis;\t\t \n#if 0\n\tu32\t\t\ttarget_maxslots;\t \n#endif  \n\tu32\t\t\tstatus_flags;\t\t \n};\n\nstruct nfsd4_destroy_session {\n\tstruct nfs4_sessionid\tsessionid;\n};\n\nstruct nfsd4_destroy_clientid {\n\tclientid_t clientid;\n};\n\nstruct nfsd4_reclaim_complete {\n\tu32 rca_one_fs;\n};\n\nstruct nfsd4_deviceid {\n\tu64\t\t\tfsid_idx;\n\tu32\t\t\tgeneration;\n\tu32\t\t\tpad;\n};\n\nstruct nfsd4_layout_seg {\n\tu32\t\t\tiomode;\n\tu64\t\t\toffset;\n\tu64\t\t\tlength;\n};\n\nstruct nfsd4_getdeviceinfo {\n\tstruct nfsd4_deviceid\tgd_devid;\t \n\tu32\t\t\tgd_layout_type;\t \n\tu32\t\t\tgd_maxcount;\t \n\tu32\t\t\tgd_notify_types; \n\tvoid\t\t\t*gd_device;\t \n};\n\nstruct nfsd4_layoutget {\n\tu64\t\t\tlg_minlength;\t \n\tu32\t\t\tlg_signal;\t \n\tu32\t\t\tlg_layout_type;\t \n\tu32\t\t\tlg_maxcount;\t \n\tstateid_t\t\tlg_sid;\t\t \n\tstruct nfsd4_layout_seg\tlg_seg;\t\t \n\tvoid\t\t\t*lg_content;\t \n};\n\nstruct nfsd4_layoutcommit {\n\tstateid_t\t\tlc_sid;\t\t \n\tstruct nfsd4_layout_seg\tlc_seg;\t\t \n\tu32\t\t\tlc_reclaim;\t \n\tu32\t\t\tlc_newoffset;\t \n\tu64\t\t\tlc_last_wr;\t \n\tstruct timespec64\tlc_mtime;\t \n\tu32\t\t\tlc_layout_type;\t \n\tu32\t\t\tlc_up_len;\t \n\tvoid\t\t\t*lc_up_layout;\t \n\tu32\t\t\tlc_size_chg;\t \n\tu64\t\t\tlc_newsize;\t \n};\n\nstruct nfsd4_layoutreturn {\n\tu32\t\t\tlr_return_type;\t \n\tu32\t\t\tlr_layout_type;\t \n\tstruct nfsd4_layout_seg\tlr_seg;\t\t \n\tu32\t\t\tlr_reclaim;\t \n\tu32\t\t\tlrf_body_len;\t \n\tvoid\t\t\t*lrf_body;\t \n\tstateid_t\t\tlr_sid;\t\t \n\tu32\t\t\tlrs_present;\t \n};\n\nstruct nfsd4_fallocate {\n\t \n\tstateid_t\tfalloc_stateid;\n\tloff_t\t\tfalloc_offset;\n\tu64\t\tfalloc_length;\n};\n\nstruct nfsd4_clone {\n\t \n\tstateid_t\tcl_src_stateid;\n\tstateid_t\tcl_dst_stateid;\n\tu64\t\tcl_src_pos;\n\tu64\t\tcl_dst_pos;\n\tu64\t\tcl_count;\n};\n\nstruct nfsd42_write_res {\n\tu64\t\t\twr_bytes_written;\n\tu32\t\t\twr_stable_how;\n\tnfs4_verifier\t\twr_verifier;\n\tstateid_t\t\tcb_stateid;\n};\n\nstruct nfsd4_cb_offload {\n\tstruct nfsd4_callback\tco_cb;\n\tstruct nfsd42_write_res\tco_res;\n\t__be32\t\t\tco_nfserr;\n\tstruct knfsd_fh\t\tco_fh;\n};\n\nstruct nfsd4_copy {\n\t \n\tstateid_t\t\tcp_src_stateid;\n\tstateid_t\t\tcp_dst_stateid;\n\tu64\t\t\tcp_src_pos;\n\tu64\t\t\tcp_dst_pos;\n\tu64\t\t\tcp_count;\n\tstruct nl4_server\t*cp_src;\n\n\tunsigned long\t\tcp_flags;\n#define NFSD4_COPY_F_STOPPED\t\t(0)\n#define NFSD4_COPY_F_INTRA\t\t(1)\n#define NFSD4_COPY_F_SYNCHRONOUS\t(2)\n#define NFSD4_COPY_F_COMMITTED\t\t(3)\n\n\t \n\tstruct nfsd42_write_res\tcp_res;\n\tstruct knfsd_fh\t\tfh;\n\n\tstruct nfs4_client      *cp_clp;\n\n\tstruct nfsd_file        *nf_src;\n\tstruct nfsd_file        *nf_dst;\n\n\tcopy_stateid_t\t\tcp_stateid;\n\n\tstruct list_head\tcopies;\n\tstruct task_struct\t*copy_task;\n\trefcount_t\t\trefcount;\n\n\tstruct nfsd4_ssc_umount_item *ss_nsui;\n\tstruct nfs_fh\t\tc_fh;\n\tnfs4_stateid\t\tstateid;\n};\n\nstatic inline void nfsd4_copy_set_sync(struct nfsd4_copy *copy, bool sync)\n{\n\tif (sync)\n\t\tset_bit(NFSD4_COPY_F_SYNCHRONOUS, &copy->cp_flags);\n\telse\n\t\tclear_bit(NFSD4_COPY_F_SYNCHRONOUS, &copy->cp_flags);\n}\n\nstatic inline bool nfsd4_copy_is_sync(const struct nfsd4_copy *copy)\n{\n\treturn test_bit(NFSD4_COPY_F_SYNCHRONOUS, &copy->cp_flags);\n}\n\nstatic inline bool nfsd4_copy_is_async(const struct nfsd4_copy *copy)\n{\n\treturn !test_bit(NFSD4_COPY_F_SYNCHRONOUS, &copy->cp_flags);\n}\n\nstatic inline bool nfsd4_ssc_is_inter(const struct nfsd4_copy *copy)\n{\n\treturn !test_bit(NFSD4_COPY_F_INTRA, &copy->cp_flags);\n}\n\nstruct nfsd4_seek {\n\t \n\tstateid_t\tseek_stateid;\n\tloff_t\t\tseek_offset;\n\tu32\t\tseek_whence;\n\n\t \n\tu32\t\tseek_eof;\n\tloff_t\t\tseek_pos;\n};\n\nstruct nfsd4_offload_status {\n\t \n\tstateid_t\tstateid;\n\n\t \n\tu64\t\tcount;\n\tu32\t\tstatus;\n};\n\nstruct nfsd4_copy_notify {\n\t \n\tstateid_t\t\tcpn_src_stateid;\n\tstruct nl4_server\t*cpn_dst;\n\n\t \n\tstateid_t\t\tcpn_cnr_stateid;\n\tu64\t\t\tcpn_sec;\n\tu32\t\t\tcpn_nsec;\n\tstruct nl4_server\t*cpn_src;\n};\n\nstruct nfsd4_op {\n\tu32\t\t\t\t\topnum;\n\t__be32\t\t\t\t\tstatus;\n\tconst struct nfsd4_operation\t\t*opdesc;\n\tstruct nfs4_replay\t\t\t*replay;\n\tunion nfsd4_op_u {\n\t\tstruct nfsd4_access\t\taccess;\n\t\tstruct nfsd4_close\t\tclose;\n\t\tstruct nfsd4_commit\t\tcommit;\n\t\tstruct nfsd4_create\t\tcreate;\n\t\tstruct nfsd4_delegreturn\tdelegreturn;\n\t\tstruct nfsd4_getattr\t\tgetattr;\n\t\tstruct svc_fh *\t\t\tgetfh;\n\t\tstruct nfsd4_link\t\tlink;\n\t\tstruct nfsd4_lock\t\tlock;\n\t\tstruct nfsd4_lockt\t\tlockt;\n\t\tstruct nfsd4_locku\t\tlocku;\n\t\tstruct nfsd4_lookup\t\tlookup;\n\t\tstruct nfsd4_verify\t\tnverify;\n\t\tstruct nfsd4_open\t\topen;\n\t\tstruct nfsd4_open_confirm\topen_confirm;\n\t\tstruct nfsd4_open_downgrade\topen_downgrade;\n\t\tstruct nfsd4_putfh\t\tputfh;\n\t\tstruct nfsd4_read\t\tread;\n\t\tstruct nfsd4_readdir\t\treaddir;\n\t\tstruct nfsd4_readlink\t\treadlink;\n\t\tstruct nfsd4_remove\t\tremove;\n\t\tstruct nfsd4_rename\t\trename;\n\t\tclientid_t\t\t\trenew;\n\t\tstruct nfsd4_secinfo\t\tsecinfo;\n\t\tstruct nfsd4_setattr\t\tsetattr;\n\t\tstruct nfsd4_setclientid\tsetclientid;\n\t\tstruct nfsd4_setclientid_confirm setclientid_confirm;\n\t\tstruct nfsd4_verify\t\tverify;\n\t\tstruct nfsd4_write\t\twrite;\n\t\tstruct nfsd4_release_lockowner\trelease_lockowner;\n\n\t\t \n\t\tstruct nfsd4_exchange_id\texchange_id;\n\t\tstruct nfsd4_backchannel_ctl\tbackchannel_ctl;\n\t\tstruct nfsd4_bind_conn_to_session bind_conn_to_session;\n\t\tstruct nfsd4_create_session\tcreate_session;\n\t\tstruct nfsd4_destroy_session\tdestroy_session;\n\t\tstruct nfsd4_destroy_clientid\tdestroy_clientid;\n\t\tstruct nfsd4_sequence\t\tsequence;\n\t\tstruct nfsd4_reclaim_complete\treclaim_complete;\n\t\tstruct nfsd4_test_stateid\ttest_stateid;\n\t\tstruct nfsd4_free_stateid\tfree_stateid;\n\t\tstruct nfsd4_getdeviceinfo\tgetdeviceinfo;\n\t\tstruct nfsd4_layoutget\t\tlayoutget;\n\t\tstruct nfsd4_layoutcommit\tlayoutcommit;\n\t\tstruct nfsd4_layoutreturn\tlayoutreturn;\n\t\tstruct nfsd4_secinfo_no_name\tsecinfo_no_name;\n\n\t\t \n\t\tstruct nfsd4_fallocate\t\tallocate;\n\t\tstruct nfsd4_fallocate\t\tdeallocate;\n\t\tstruct nfsd4_clone\t\tclone;\n\t\tstruct nfsd4_copy\t\tcopy;\n\t\tstruct nfsd4_offload_status\toffload_status;\n\t\tstruct nfsd4_copy_notify\tcopy_notify;\n\t\tstruct nfsd4_seek\t\tseek;\n\n\t\tstruct nfsd4_getxattr\t\tgetxattr;\n\t\tstruct nfsd4_setxattr\t\tsetxattr;\n\t\tstruct nfsd4_listxattrs\t\tlistxattrs;\n\t\tstruct nfsd4_removexattr\tremovexattr;\n\t} u;\n};\n\nbool nfsd4_cache_this_op(struct nfsd4_op *);\n\n \nstruct svcxdr_tmpbuf {\n\tstruct svcxdr_tmpbuf *next;\n\tchar buf[];\n};\n\nstruct nfsd4_compoundargs {\n\t \n\tstruct xdr_stream\t\t*xdr;\n\tstruct svcxdr_tmpbuf\t\t*to_free;\n\tstruct svc_rqst\t\t\t*rqstp;\n\n\tchar *\t\t\t\ttag;\n\tu32\t\t\t\ttaglen;\n\tu32\t\t\t\tminorversion;\n\tu32\t\t\t\tclient_opcnt;\n\tu32\t\t\t\topcnt;\n\tstruct nfsd4_op\t\t\t*ops;\n\tstruct nfsd4_op\t\t\tiops[8];\n};\n\nstruct nfsd4_compoundres {\n\t \n\tstruct xdr_stream\t\t*xdr;\n\tstruct svc_rqst *\t\trqstp;\n\n\t__be32\t\t\t\t*statusp;\n\tchar *\t\t\t\ttag;\n\tu32\t\t\t\ttaglen;\n\tu32\t\t\t\topcnt;\n\n\tstruct nfsd4_compound_state\tcstate;\n};\n\nstatic inline bool nfsd4_is_solo_sequence(struct nfsd4_compoundres *resp)\n{\n\tstruct nfsd4_compoundargs *args = resp->rqstp->rq_argp;\n\treturn resp->opcnt == 1 && args->ops[0].opnum == OP_SEQUENCE;\n}\n\n \nstatic inline bool nfsd4_cache_this(struct nfsd4_compoundres *resp)\n{\n\treturn (resp->cstate.slot->sl_flags & NFSD4_SLOT_CACHETHIS)\n\t\t|| nfsd4_is_solo_sequence(resp);\n}\n\nstatic inline bool nfsd4_last_compound_op(struct svc_rqst *rqstp)\n{\n\tstruct nfsd4_compoundres *resp = rqstp->rq_resp;\n\tstruct nfsd4_compoundargs *argp = rqstp->rq_argp;\n\n\treturn argp->opcnt == resp->opcnt;\n}\n\nconst struct nfsd4_operation *OPDESC(struct nfsd4_op *op);\nint nfsd4_max_reply(struct svc_rqst *rqstp, struct nfsd4_op *op);\nvoid warn_on_nonidempotent_op(struct nfsd4_op *op);\n\n#define NFS4_SVC_XDRSIZE\t\tsizeof(struct nfsd4_compoundargs)\n\nbool nfsd4_mach_creds_match(struct nfs4_client *cl, struct svc_rqst *rqstp);\nbool nfs4svc_decode_compoundargs(struct svc_rqst *rqstp, struct xdr_stream *xdr);\nbool nfs4svc_encode_compoundres(struct svc_rqst *rqstp, struct xdr_stream *xdr);\n__be32 nfsd4_check_resp_size(struct nfsd4_compoundres *, u32);\nvoid nfsd4_encode_operation(struct nfsd4_compoundres *, struct nfsd4_op *);\nvoid nfsd4_encode_replay(struct xdr_stream *xdr, struct nfsd4_op *op);\n__be32 nfsd4_encode_fattr_to_buf(__be32 **p, int words,\n\t\tstruct svc_fh *fhp, struct svc_export *exp,\n\t\tstruct dentry *dentry,\n\t\tu32 *bmval, struct svc_rqst *, int ignore_crossmnt);\nextern __be32 nfsd4_setclientid(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_setclientid_confirm(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_exchange_id(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_backchannel_ctl(struct svc_rqst *,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_bind_conn_to_session(struct svc_rqst *,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_create_session(struct svc_rqst *,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_sequence(struct svc_rqst *,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern void nfsd4_sequence_done(struct nfsd4_compoundres *resp);\nextern __be32 nfsd4_destroy_session(struct svc_rqst *,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_destroy_clientid(struct svc_rqst *, struct nfsd4_compound_state *,\n\t\tunion nfsd4_op_u *u);\n__be32 nfsd4_reclaim_complete(struct svc_rqst *, struct nfsd4_compound_state *,\n\t\tunion nfsd4_op_u *u);\nextern __be32 nfsd4_process_open1(struct nfsd4_compound_state *,\n\t\tstruct nfsd4_open *open, struct nfsd_net *nn);\nextern __be32 nfsd4_process_open2(struct svc_rqst *rqstp,\n\t\tstruct svc_fh *current_fh, struct nfsd4_open *open);\nextern void nfsd4_cstate_clear_replay(struct nfsd4_compound_state *cstate);\nextern void nfsd4_cleanup_open_state(struct nfsd4_compound_state *cstate,\n\t\tstruct nfsd4_open *open);\nextern __be32 nfsd4_open_confirm(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_close(struct svc_rqst *rqstp, struct nfsd4_compound_state *,\n\t\tunion nfsd4_op_u *u);\nextern __be32 nfsd4_open_downgrade(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_lock(struct svc_rqst *rqstp, struct nfsd4_compound_state *,\n\t\tunion nfsd4_op_u *u);\nextern __be32 nfsd4_lockt(struct svc_rqst *rqstp, struct nfsd4_compound_state *,\n\t\tunion nfsd4_op_u *u);\nextern __be32 nfsd4_locku(struct svc_rqst *rqstp, struct nfsd4_compound_state *,\n\t\tunion nfsd4_op_u *u);\nextern __be32\nnfsd4_release_lockowner(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern void nfsd4_release_compoundargs(struct svc_rqst *rqstp);\nextern __be32 nfsd4_delegreturn(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *u);\nextern __be32 nfsd4_renew(struct svc_rqst *rqstp, struct nfsd4_compound_state *,\n\t\tunion nfsd4_op_u *u);\nextern __be32 nfsd4_test_stateid(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *);\nextern __be32 nfsd4_free_stateid(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *, union nfsd4_op_u *);\nextern void nfsd4_bump_seqid(struct nfsd4_compound_state *, __be32 nfserr);\n\nenum nfsd4_op_flags {\n\tALLOWED_WITHOUT_FH = 1 << 0,     \n\tALLOWED_ON_ABSENT_FS = 1 << 1,   \n\tALLOWED_AS_FIRST_OP = 1 << 2,    \n\t \n\tOP_HANDLES_WRONGSEC = 1 << 3,\n\tOP_IS_PUTFH_LIKE = 1 << 4,\n\t \n\tOP_MODIFIES_SOMETHING = 1 << 5,\n\t \n\tOP_CACHEME = 1 << 6,\n\t \n\tOP_CLEAR_STATEID = 1 << 7,\n\t \n\tOP_NONTRIVIAL_ERROR_ENCODE = 1 << 8,\n};\n\nstruct nfsd4_operation {\n\t__be32 (*op_func)(struct svc_rqst *, struct nfsd4_compound_state *,\n\t\t\tunion nfsd4_op_u *);\n\tvoid (*op_release)(union nfsd4_op_u *);\n\tu32 op_flags;\n\tchar *op_name;\n\t \n\tu32 (*op_rsize_bop)(const struct svc_rqst *rqstp,\n\t\t\tconst struct nfsd4_op *op);\n\tvoid (*op_get_currentstateid)(struct nfsd4_compound_state *,\n\t\t\tunion nfsd4_op_u *);\n\tvoid (*op_set_currentstateid)(struct nfsd4_compound_state *,\n\t\t\tunion nfsd4_op_u *);\n};\n\nstruct nfsd4_cb_recall_any {\n\tstruct nfsd4_callback\tra_cb;\n\tu32\t\t\tra_keep;\n\tu32\t\t\tra_bmval[1];\n};\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}