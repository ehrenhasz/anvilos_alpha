{
  "module_name": "stats.h",
  "hash_id": "ff9559c888b9360ce40c3311758869c7d3e6296d1476648e6a0f46122d4bc193",
  "original_prompt": "Ingested from linux-6.6.14/fs/nfsd/stats.h",
  "human_readable_source": " \n \n#ifndef _NFSD_STATS_H\n#define _NFSD_STATS_H\n\n#include <uapi/linux/nfsd/stats.h>\n#include <linux/percpu_counter.h>\n\n\nenum {\n\tNFSD_STATS_RC_HITS,\t\t \n\tNFSD_STATS_RC_MISSES,\t\t \n\tNFSD_STATS_RC_NOCACHE,\t\t \n\tNFSD_STATS_FH_STALE,\t\t \n\tNFSD_STATS_IO_READ,\t\t \n\tNFSD_STATS_IO_WRITE,\t\t \n#ifdef CONFIG_NFSD_V4\n\tNFSD_STATS_FIRST_NFS4_OP,\t \n\tNFSD_STATS_LAST_NFS4_OP = NFSD_STATS_FIRST_NFS4_OP + LAST_NFS4_OP,\n#define NFSD_STATS_NFS4_OP(op)\t(NFSD_STATS_FIRST_NFS4_OP + (op))\n\tNFSD_STATS_WDELEG_GETATTR,\t \n#endif\n\tNFSD_STATS_COUNTERS_NUM\n};\n\nstruct nfsd_stats {\n\tstruct percpu_counter\tcounter[NFSD_STATS_COUNTERS_NUM];\n\n\tatomic_t\tth_cnt;\t\t \n};\n\nextern struct nfsd_stats\tnfsdstats;\n\nextern struct svc_stat\t\tnfsd_svcstats;\n\nint nfsd_percpu_counters_init(struct percpu_counter counters[], int num);\nvoid nfsd_percpu_counters_reset(struct percpu_counter counters[], int num);\nvoid nfsd_percpu_counters_destroy(struct percpu_counter counters[], int num);\nint nfsd_stat_init(void);\nvoid nfsd_stat_shutdown(void);\n\nstatic inline void nfsd_stats_rc_hits_inc(void)\n{\n\tpercpu_counter_inc(&nfsdstats.counter[NFSD_STATS_RC_HITS]);\n}\n\nstatic inline void nfsd_stats_rc_misses_inc(void)\n{\n\tpercpu_counter_inc(&nfsdstats.counter[NFSD_STATS_RC_MISSES]);\n}\n\nstatic inline void nfsd_stats_rc_nocache_inc(void)\n{\n\tpercpu_counter_inc(&nfsdstats.counter[NFSD_STATS_RC_NOCACHE]);\n}\n\nstatic inline void nfsd_stats_fh_stale_inc(struct svc_export *exp)\n{\n\tpercpu_counter_inc(&nfsdstats.counter[NFSD_STATS_FH_STALE]);\n\tif (exp)\n\t\tpercpu_counter_inc(&exp->ex_stats.counter[EXP_STATS_FH_STALE]);\n}\n\nstatic inline void nfsd_stats_io_read_add(struct svc_export *exp, s64 amount)\n{\n\tpercpu_counter_add(&nfsdstats.counter[NFSD_STATS_IO_READ], amount);\n\tif (exp)\n\t\tpercpu_counter_add(&exp->ex_stats.counter[EXP_STATS_IO_READ], amount);\n}\n\nstatic inline void nfsd_stats_io_write_add(struct svc_export *exp, s64 amount)\n{\n\tpercpu_counter_add(&nfsdstats.counter[NFSD_STATS_IO_WRITE], amount);\n\tif (exp)\n\t\tpercpu_counter_add(&exp->ex_stats.counter[EXP_STATS_IO_WRITE], amount);\n}\n\nstatic inline void nfsd_stats_payload_misses_inc(struct nfsd_net *nn)\n{\n\tpercpu_counter_inc(&nn->counter[NFSD_NET_PAYLOAD_MISSES]);\n}\n\nstatic inline void nfsd_stats_drc_mem_usage_add(struct nfsd_net *nn, s64 amount)\n{\n\tpercpu_counter_add(&nn->counter[NFSD_NET_DRC_MEM_USAGE], amount);\n}\n\nstatic inline void nfsd_stats_drc_mem_usage_sub(struct nfsd_net *nn, s64 amount)\n{\n\tpercpu_counter_sub(&nn->counter[NFSD_NET_DRC_MEM_USAGE], amount);\n}\n\n#ifdef CONFIG_NFSD_V4\nstatic inline void nfsd_stats_wdeleg_getattr_inc(void)\n{\n\tpercpu_counter_inc(&nfsdstats.counter[NFSD_STATS_WDELEG_GETATTR]);\n}\n#endif\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}