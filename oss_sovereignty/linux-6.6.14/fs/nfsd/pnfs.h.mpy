{
  "module_name": "pnfs.h",
  "hash_id": "8293857441f25a94149edcc83db35a822a3c7286858e146ff72bed2da23dd199",
  "original_prompt": "Ingested from linux-6.6.14/fs/nfsd/pnfs.h",
  "human_readable_source": " \n#ifndef _FS_NFSD_PNFS_H\n#define _FS_NFSD_PNFS_H 1\n\n#ifdef CONFIG_NFSD_V4\n#include <linux/exportfs.h>\n#include <linux/nfsd/export.h>\n\n#include \"state.h\"\n#include \"xdr4.h\"\n\nstruct xdr_stream;\n\nstruct nfsd4_deviceid_map {\n\tstruct list_head\thash;\n\tu64\t\t\tidx;\n\tint\t\t\tfsid_type;\n\tu32\t\t\tfsid[];\n};\n\nstruct nfsd4_layout_ops {\n\tu32\t\tnotify_types;\n\tbool\t\tdisable_recalls;\n\n\t__be32 (*proc_getdeviceinfo)(struct super_block *sb,\n\t\t\tstruct svc_rqst *rqstp,\n\t\t\tstruct nfs4_client *clp,\n\t\t\tstruct nfsd4_getdeviceinfo *gdevp);\n\t__be32 (*encode_getdeviceinfo)(struct xdr_stream *xdr,\n\t\t\tstruct nfsd4_getdeviceinfo *gdevp);\n\n\t__be32 (*proc_layoutget)(struct inode *, const struct svc_fh *fhp,\n\t\t\tstruct nfsd4_layoutget *lgp);\n\t__be32 (*encode_layoutget)(struct xdr_stream *,\n\t\t\tstruct nfsd4_layoutget *lgp);\n\n\t__be32 (*proc_layoutcommit)(struct inode *inode,\n\t\t\tstruct nfsd4_layoutcommit *lcp);\n\n\tvoid (*fence_client)(struct nfs4_layout_stateid *ls);\n};\n\nextern const struct nfsd4_layout_ops *nfsd4_layout_ops[];\n#ifdef CONFIG_NFSD_BLOCKLAYOUT\nextern const struct nfsd4_layout_ops bl_layout_ops;\n#endif\n#ifdef CONFIG_NFSD_SCSILAYOUT\nextern const struct nfsd4_layout_ops scsi_layout_ops;\n#endif\n#ifdef CONFIG_NFSD_FLEXFILELAYOUT\nextern const struct nfsd4_layout_ops ff_layout_ops;\n#endif\n\n__be32 nfsd4_preprocess_layout_stateid(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *cstate, stateid_t *stateid,\n\t\tbool create, u32 layout_type, struct nfs4_layout_stateid **lsp);\n__be32 nfsd4_insert_layout(struct nfsd4_layoutget *lgp,\n\t\tstruct nfs4_layout_stateid *ls);\n__be32 nfsd4_return_file_layouts(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *cstate,\n\t\tstruct nfsd4_layoutreturn *lrp);\n__be32 nfsd4_return_client_layouts(struct svc_rqst *rqstp,\n\t\tstruct nfsd4_compound_state *cstate,\n\t\tstruct nfsd4_layoutreturn *lrp);\nint nfsd4_set_deviceid(struct nfsd4_deviceid *id, const struct svc_fh *fhp,\n\t\tu32 device_generation);\nstruct nfsd4_deviceid_map *nfsd4_find_devid_map(int idx);\n#endif  \n\n#ifdef CONFIG_NFSD_PNFS\nvoid nfsd4_setup_layout_type(struct svc_export *exp);\nvoid nfsd4_return_all_client_layouts(struct nfs4_client *);\nvoid nfsd4_return_all_file_layouts(struct nfs4_client *clp,\n\t\tstruct nfs4_file *fp);\nint nfsd4_init_pnfs(void);\nvoid nfsd4_exit_pnfs(void);\n#else\nstruct nfs4_client;\nstruct nfs4_file;\n\nstatic inline void nfsd4_setup_layout_type(struct svc_export *exp)\n{\n}\n\nstatic inline void nfsd4_return_all_client_layouts(struct nfs4_client *clp)\n{\n}\nstatic inline void nfsd4_return_all_file_layouts(struct nfs4_client *clp,\n\t\tstruct nfs4_file *fp)\n{\n}\nstatic inline void nfsd4_exit_pnfs(void)\n{\n}\nstatic inline int nfsd4_init_pnfs(void)\n{\n\treturn 0;\n}\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}