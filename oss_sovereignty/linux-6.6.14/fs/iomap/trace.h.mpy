{
  "module_name": "trace.h",
  "hash_id": "94eebdf065a808c98993980cd6d26e135254a3215922e3211f7a5f5975cbbbb2",
  "original_prompt": "Ingested from linux-6.6.14/fs/iomap/trace.h",
  "human_readable_source": " \n \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM iomap\n\n#if !defined(_IOMAP_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _IOMAP_TRACE_H\n\n#include <linux/tracepoint.h>\n\nstruct inode;\n\nDECLARE_EVENT_CLASS(iomap_readpage_class,\n\tTP_PROTO(struct inode *inode, int nr_pages),\n\tTP_ARGS(inode, nr_pages),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(u64, ino)\n\t\t__field(int, nr_pages)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->nr_pages = nr_pages;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx nr_pages %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->nr_pages)\n)\n\n#define DEFINE_READPAGE_EVENT(name)\t\t\\\nDEFINE_EVENT(iomap_readpage_class, name,\t\\\n\tTP_PROTO(struct inode *inode, int nr_pages), \\\n\tTP_ARGS(inode, nr_pages))\nDEFINE_READPAGE_EVENT(iomap_readpage);\nDEFINE_READPAGE_EVENT(iomap_readahead);\n\nDECLARE_EVENT_CLASS(iomap_range_class,\n\tTP_PROTO(struct inode *inode, loff_t off, u64 len),\n\tTP_ARGS(inode, off, len),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(u64, ino)\n\t\t__field(loff_t, size)\n\t\t__field(loff_t, offset)\n\t\t__field(u64, length)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->size = i_size_read(inode);\n\t\t__entry->offset = off;\n\t\t__entry->length = len;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx size 0x%llx offset 0x%llx length 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->size,\n\t\t  __entry->offset,\n\t\t  __entry->length)\n)\n\n#define DEFINE_RANGE_EVENT(name)\t\t\\\nDEFINE_EVENT(iomap_range_class, name,\t\\\n\tTP_PROTO(struct inode *inode, loff_t off, u64 len),\\\n\tTP_ARGS(inode, off, len))\nDEFINE_RANGE_EVENT(iomap_writepage);\nDEFINE_RANGE_EVENT(iomap_release_folio);\nDEFINE_RANGE_EVENT(iomap_invalidate_folio);\nDEFINE_RANGE_EVENT(iomap_dio_invalidate_fail);\nDEFINE_RANGE_EVENT(iomap_dio_rw_queued);\n\n#define IOMAP_TYPE_STRINGS \\\n\t{ IOMAP_HOLE,\t\t\"HOLE\" }, \\\n\t{ IOMAP_DELALLOC,\t\"DELALLOC\" }, \\\n\t{ IOMAP_MAPPED,\t\t\"MAPPED\" }, \\\n\t{ IOMAP_UNWRITTEN,\t\"UNWRITTEN\" }, \\\n\t{ IOMAP_INLINE,\t\t\"INLINE\" }\n\n#define IOMAP_FLAGS_STRINGS \\\n\t{ IOMAP_WRITE,\t\t\"WRITE\" }, \\\n\t{ IOMAP_ZERO,\t\t\"ZERO\" }, \\\n\t{ IOMAP_REPORT,\t\t\"REPORT\" }, \\\n\t{ IOMAP_FAULT,\t\t\"FAULT\" }, \\\n\t{ IOMAP_DIRECT,\t\t\"DIRECT\" }, \\\n\t{ IOMAP_NOWAIT,\t\t\"NOWAIT\" }\n\n#define IOMAP_F_FLAGS_STRINGS \\\n\t{ IOMAP_F_NEW,\t\t\"NEW\" }, \\\n\t{ IOMAP_F_DIRTY,\t\"DIRTY\" }, \\\n\t{ IOMAP_F_SHARED,\t\"SHARED\" }, \\\n\t{ IOMAP_F_MERGED,\t\"MERGED\" }, \\\n\t{ IOMAP_F_BUFFER_HEAD,\t\"BH\" }, \\\n\t{ IOMAP_F_SIZE_CHANGED,\t\"SIZE_CHANGED\" }\n\n#define IOMAP_DIO_STRINGS \\\n\t{IOMAP_DIO_FORCE_WAIT,\t\"DIO_FORCE_WAIT\" }, \\\n\t{IOMAP_DIO_OVERWRITE_ONLY, \"DIO_OVERWRITE_ONLY\" }, \\\n\t{IOMAP_DIO_PARTIAL,\t\"DIO_PARTIAL\" }\n\nDECLARE_EVENT_CLASS(iomap_class,\n\tTP_PROTO(struct inode *inode, struct iomap *iomap),\n\tTP_ARGS(inode, iomap),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(u64, ino)\n\t\t__field(u64, addr)\n\t\t__field(loff_t, offset)\n\t\t__field(u64, length)\n\t\t__field(u16, type)\n\t\t__field(u16, flags)\n\t\t__field(dev_t, bdev)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->ino = inode->i_ino;\n\t\t__entry->addr = iomap->addr;\n\t\t__entry->offset = iomap->offset;\n\t\t__entry->length = iomap->length;\n\t\t__entry->type = iomap->type;\n\t\t__entry->flags = iomap->flags;\n\t\t__entry->bdev = iomap->bdev ? iomap->bdev->bd_dev : 0;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx bdev %d:%d addr 0x%llx offset 0x%llx \"\n\t\t  \"length 0x%llx type %s flags %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  MAJOR(__entry->bdev), MINOR(__entry->bdev),\n\t\t  __entry->addr,\n\t\t  __entry->offset,\n\t\t  __entry->length,\n\t\t  __print_symbolic(__entry->type, IOMAP_TYPE_STRINGS),\n\t\t  __print_flags(__entry->flags, \"|\", IOMAP_F_FLAGS_STRINGS))\n)\n\n#define DEFINE_IOMAP_EVENT(name)\t\t\\\nDEFINE_EVENT(iomap_class, name,\t\\\n\tTP_PROTO(struct inode *inode, struct iomap *iomap), \\\n\tTP_ARGS(inode, iomap))\nDEFINE_IOMAP_EVENT(iomap_iter_dstmap);\nDEFINE_IOMAP_EVENT(iomap_iter_srcmap);\nDEFINE_IOMAP_EVENT(iomap_writepage_map);\n\nTRACE_EVENT(iomap_iter,\n\tTP_PROTO(struct iomap_iter *iter, const void *ops,\n\t\t unsigned long caller),\n\tTP_ARGS(iter, ops, caller),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(u64, ino)\n\t\t__field(loff_t, pos)\n\t\t__field(u64, length)\n\t\t__field(unsigned int, flags)\n\t\t__field(const void *, ops)\n\t\t__field(unsigned long, caller)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = iter->inode->i_sb->s_dev;\n\t\t__entry->ino = iter->inode->i_ino;\n\t\t__entry->pos = iter->pos;\n\t\t__entry->length = iomap_length(iter);\n\t\t__entry->flags = iter->flags;\n\t\t__entry->ops = ops;\n\t\t__entry->caller = caller;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx pos 0x%llx length 0x%llx flags %s (0x%x) ops %ps caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t   __entry->ino,\n\t\t   __entry->pos,\n\t\t   __entry->length,\n\t\t   __print_flags(__entry->flags, \"|\", IOMAP_FLAGS_STRINGS),\n\t\t   __entry->flags,\n\t\t   __entry->ops,\n\t\t   (void *)__entry->caller)\n);\n\nTRACE_EVENT(iomap_dio_rw_begin,\n\tTP_PROTO(struct kiocb *iocb, struct iov_iter *iter,\n\t\t unsigned int dio_flags, size_t done_before),\n\tTP_ARGS(iocb, iter, dio_flags, done_before),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t,\tdev)\n\t\t__field(ino_t,\tino)\n\t\t__field(loff_t, isize)\n\t\t__field(loff_t, pos)\n\t\t__field(size_t,\tcount)\n\t\t__field(size_t,\tdone_before)\n\t\t__field(int,\tki_flags)\n\t\t__field(unsigned int,\tdio_flags)\n\t\t__field(bool,\taio)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = file_inode(iocb->ki_filp)->i_sb->s_dev;\n\t\t__entry->ino = file_inode(iocb->ki_filp)->i_ino;\n\t\t__entry->isize = file_inode(iocb->ki_filp)->i_size;\n\t\t__entry->pos = iocb->ki_pos;\n\t\t__entry->count = iov_iter_count(iter);\n\t\t__entry->done_before = done_before;\n\t\t__entry->ki_flags = iocb->ki_flags;\n\t\t__entry->dio_flags = dio_flags;\n\t\t__entry->aio = !is_sync_kiocb(iocb);\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%lx size 0x%llx offset 0x%llx length 0x%zx done_before 0x%zx flags %s dio_flags %s aio %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->isize,\n\t\t  __entry->pos,\n\t\t  __entry->count,\n\t\t  __entry->done_before,\n\t\t  __print_flags(__entry->ki_flags, \"|\", TRACE_IOCB_STRINGS),\n\t\t  __print_flags(__entry->dio_flags, \"|\", IOMAP_DIO_STRINGS),\n\t\t  __entry->aio)\n);\n\nTRACE_EVENT(iomap_dio_complete,\n\tTP_PROTO(struct kiocb *iocb, int error, ssize_t ret),\n\tTP_ARGS(iocb, error, ret),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t,\tdev)\n\t\t__field(ino_t,\tino)\n\t\t__field(loff_t, isize)\n\t\t__field(loff_t, pos)\n\t\t__field(int,\tki_flags)\n\t\t__field(bool,\taio)\n\t\t__field(int,\terror)\n\t\t__field(ssize_t, ret)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = file_inode(iocb->ki_filp)->i_sb->s_dev;\n\t\t__entry->ino = file_inode(iocb->ki_filp)->i_ino;\n\t\t__entry->isize = file_inode(iocb->ki_filp)->i_size;\n\t\t__entry->pos = iocb->ki_pos;\n\t\t__entry->ki_flags = iocb->ki_flags;\n\t\t__entry->aio = !is_sync_kiocb(iocb);\n\t\t__entry->error = error;\n\t\t__entry->ret = ret;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%lx size 0x%llx offset 0x%llx flags %s aio %d error %d ret %zd\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->isize,\n\t\t  __entry->pos,\n\t\t  __print_flags(__entry->ki_flags, \"|\", TRACE_IOCB_STRINGS),\n\t\t  __entry->aio,\n\t\t  __entry->error,\n\t\t  __entry->ret)\n);\n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE trace\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}