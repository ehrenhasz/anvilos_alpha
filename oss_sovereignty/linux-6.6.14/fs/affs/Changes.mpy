{
  "module_name": "Changes",
  "hash_id": "5336f70e278331890b08cfde8a6f0a24bb86b091ab51bfead46af9fc2f7227ed",
  "original_prompt": "Ingested from linux-6.6.14/fs/affs/Changes",
  "human_readable_source": "(Note: I consider version numbers as cheap. That means\nthat I do not like numbers like 0.1 and the like for\nthings that can be used since quite some time. But\nthen, 3.1 doesn't mean 'perfectly stable', too.)\n\nKnown bugs:\n-----------\n\n- Doesn't work on the alpha. The only 64/32-bit\n  problem that I'm aware of (pointer/int conversion\n  in readdir()) gives compiler warnings but is\n  apparently not causing the failure, as directory\n  reads basically work (but all files are of size 0).\n  Alas, I've got no alpha to debug. :-(\n\n- The partition checker (drivers/block/genhd.c)\n  doesn't work with devices which have 256 byte\n  blocks (some very old SCSI drives). \n\n- The feature to automatically make the fs clean\n  might leave a trashed file system with the\n  bitmap flag set valid.\n\n- When a file is truncated to a size that is not\n  a multiple of the blocksize, the rest of the\n  last allocated block is not cleared. Well,\n  this fs never claimed to be Posix conformant.\n\nPlease direct bug reports to: zippel@linux-m68k.org\n\nVersion 3.20\n------------\n- kill kernel lock\n- fix for a possible bitmap corruption\n\nVersion 3.19\n------------\n\n- sizeof changes from Kernel Janitor Project\n- several bug fixes found with fsx\n\nVersion 3.18\n------------\n\n- change to global min macro + warning fixes\n- add module tags\n\nVersion 3.17\n------------\n\n- locking fixes\n- wrong sign in __affs_hash_dentry\n- remove unnecessary check in affs_new_inode\n- enable international mode for dircache fs\n\nVersion 3.16\n------------\n\n- use mark_buffer_dirty_inode instead of mark_buffer_dirty.\n- introduce affs_lock_{link|dir|ext}.\n\nVersion 3.15\n------------\n\n- disable link to directories until we can properly support them.\n- locking fixes for link creation/removal.\n\nVersion 3.14\n------------\n\n- correctly cut off long file names for compares\n- correctly initialize s_last_bmap\n\nVersion 3.13\n------------\n\nMajor cleanup for 2.4 [Roman Zippel]\n- new extended block handling\n- new bitmap allocation functions\n- locking should be safe for the future\n- cleanup of some interfaces\n\nVersion 3.12\n------------\n\nmore 2.4 fixes: [Roman Zippel]\n- s_lock changes\n- increased getblock mess\n- clear meta blocks \n\nVersion 3.11\n------------\n\n- Converted to use 2.3.x page cache [Dave Jones]\n- Corruption in truncate() bugfix [Ken Tyler <kent@werple.net.au>]\n\nVersion 3.10\n------------\n\n- Changed partition checker to allow devices\n  with physical blocks != 512 bytes.\n\n- The partition checker now also ignores the\n  word at 0xd0 that Windows likes to write to.\n\nVersion 3.9\n-----------\n\n- Moved cleanup from release_file() to put_inode().\n  This makes the first one obsolete.\n\n- truncate() zeroes the unused remainder of a\n  partially used last block when a file is truncated.\n  It also marks the inode dirty now (which is not\n  really necessary as notify_change() will do\n  it anyway).\n\n- Added a few comments, fixed some typos (and\n  introduced some new ones), made the debug messages\n  more consistent. Changed a bad example in the\n  doc file (affs.txt).\n\n- Sets the NOEXEC flag in read_super() for old file\n  systems, since you can't run programs on them.\n\nVersion 3.8\n-----------\nBill Hawes kindly reviewed the affs and sent me the\npatches he did. They're marked (BH). Thanks, Bill!\n\n- Cleanup of error handling in read_super().\n  Didn't release all resources in case of an\n  error. (BH)\n\n- put_inode() releases the ext cache only if it's\n  no longer needed. (BH)\n\n- One set of dentry callbacks is enough. (BH)\n\n- Cleanup of error handling in namei.c. (BH)\n\n- Cleanup of error handling in file.c. (BH)\n\n- The original blocksize of the device is\n  restored when the fs is unmounted. (BH)\n\n- getblock() did not invalidate the key cache\n  when it allocated a new block.\n\n- Removed some unnecessary locks as Bill\n  suggested.\n\n- Simplified match_name(), changed all hashing\n  and case insensitive name comparisons to use\n  uppercase. This makes the tolower() routines\n  obsolete.\n\n- Added mount option 'mufs' to force muFS\n  uid/gid interpretation.\n\n- File mode changes were not updated on disk.\n  This was fixed before, but somehow got lost.\n\nVersion 3.7\n-----------\n\n- Added dentry callbacks to allow the dcache to\n  operate case insensitive and length ignorant\n  like the affs itself.\n\n- getblock() didn't update the lastblock field in the\n  inode if the fs was not an OFS. This bug only shows\n  up if a file was enlarged via truncate() and there\n  was not enough space.\n\n- Remove some more superfluous code left over from\n  the old link days ...\n\n- Fixed some oversights which were in patch 2.1.78.\n\n- Fixed a few typos.\n\nVersion 3.6\n-----------\n\n- dentry changes. (Thanks to Jes Sorensen for his help.)\n\n- Fixed bug in balloc(): Superblock was not set dirty after\n  the bitmap was changed, so the bitmap wasn't sync'd.\n\n- Fixed nasty bug in find_new_zone(): If the current\n  zone number was zero, the loop didn't terminate,\n  causing a solid lock-up.\n\n- Removed support for old-style directory reads.\n\n- Fixed bug in add_entry(): When doing a sorted insert,\n  the pointer to the next entry in the hash chain wasn't\n  correctly byte-swapped. Since most of the users of the\n  affs use it on a 68k, they didn't notice. But why did\n  I not find this during my tests?\n\n- Fixed some oversights (version wasn't updated on some\n  directory changes).\n\n- Handling of hard links rewritten. To the VFS\n  they appear now as normal Unix links. They are\n  now resolved only once in lookup(). The backside\n  is that unlink(), rename() and rmdir() have to\n  be smart about them, but the result is worth the\n  effort. This also led to some code cleanup.\n\n- Changed name type to unsigned char; the test for\n  invalid filenames didn't work correctly.\n  (Thanks to Michael Krause for pointing at this.)\n\n- Changed mapping of executable flag.\n\n- Changed all network byte-order macros to the\n  recommended ones.\n\n- Added a remount function, so attempts to remount\n  a dircache filesystem or one with errors read/write\n  can be trapped. Previously, ro remounts didn't\n  flush the super block, and rw remounts didn't\n  create allocation zones ...\n\n- Call shrink_dcache_parent() in rmdir().\n  (Thanks to Bill Hawes.)\n\n- Permission checks in unlink().\n\n- Allow mounting of volumes with superfluous\n  bitmap pointers read only, also allows them\n  to be remounted read/write.\n\n- Owner/Group defaults now to the fs user (i.e.\n  the one that mounted it) instead of root. This\n  obsoletes the mount options uid and gid.\n\n- Argument to volume option could overflow the\n  name buffer. It is now silently truncated to\n  30 characters. (Damn it! This kind of bug\n  is too embarrassing.)\n\n- Split inode.c into 2 files, the superblock\n  routines desperately wanted their own file.\n\n- truncate() didn't allocate an extension block\n  cache. If a file was extended by means of\n  truncate(), this led to an Oops.\n\n- fsuser is now checked last.\n\n- rename() will not ignore changes in filename\n  casing any more (though mv(1) still won't allow\n  you to do \"mv oldname OldName\").\n\nVersion 3.5\n-----------\n\n- Extension block caches are now allocated on\n  demand instead of when a file is opened, as\n  files can be read and written without opening\n  them (e. g. the loopback device does this).\n\n- Removed an unused function.\n\nVersion 3.4\n-----------\n\n- Hash chains are now sorted by block numbers.\n  (Thanks to Kars de Jong for finding this.)\n- Removed all unnecessary external symbols.\n\nVersion 3.3\n-----------\n\n- Tried to make all types 'correct' and consistent.\n- Errors and warnings are now reported via a\n  function. They are all prefixed by a severity\n  and have the same appearance:\n    \"AFFS: <function>: <error message>\"\n  (There's one exception to this, as in that function\n  is no pointer to the super block available.)\n- The filesystem is remounted read-only after an\n  error.\n- The names of newly created filesystem objects are\n  now checked for validity.\n- Minor cleanups in comments.\n- Added this Changes file. At last!\n\nVersion 3.2\n-----------\n\n- Extension block cache: Reading/writing of huge files\n  (several MB) is much faster (of course the added\n  overhead slows down opening, but this is hardly\n  noticeable).\n- The same get_block()-routine can now be used for\n  both OFS and FFS.\n- The super block is now searched in the block that\n  was calculated and in the one following. This\n  should remedy the round-off error introduced by\n  the 1-k blocks that Linux uses.\n- Minor changes to adhere to the new VFS interface.\n- The number of used blocks is now also calculated\n  if the filesystem is mounted read-only.\n- Prefixed some constants with AFFS_ to avoid name\n  clashes.\n- Removed 'EXPERIMENTAL' status.\n\nVersion 3.1\n-----------\n\n- Fixed a nasty bug which didn't allow read-only\n  mounts.\n- Allow dir-cache filesystems to be mounted\n  read only.\n- OFS support.\n- Several other changes I just cannot remember\n  any more.\n\nVersion 3.0\n-----------\n\n- Almost complete rewrite for the new VFS\n  interface in Linux 1.3.\n- Write support.\n- Support for hard and symbolic links.\n- Lots of things I remember even less ...\n\nVersion 2.0\n-----------\n\n- Fixed a few things to get it compiled.\n- Automatic root block calculation.\n- Partition checker for genhd.c\n\n========================================\n\nLet's just call Ray Burr's original affs\n'Version 1.0'.\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}