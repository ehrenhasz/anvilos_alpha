{
  "module_name": "vfsmod.h",
  "hash_id": "1a62b013f61215cf29fdc92238cf9761348cbddfef289feff6c05c1fee0644cb",
  "original_prompt": "Ingested from linux-6.6.14/fs/vboxsf/vfsmod.h",
  "human_readable_source": " \n \n\n#ifndef VFSMOD_H\n#define VFSMOD_H\n\n#include <linux/backing-dev.h>\n#include <linux/idr.h>\n#include \"shfl_hostintf.h\"\n\n#define DIR_BUFFER_SIZE SZ_16K\n\n \n#define VBOXSF_SBI(sb)\t((struct vboxsf_sbi *)(sb)->s_fs_info)\n#define VBOXSF_I(i)\tcontainer_of(i, struct vboxsf_inode, vfs_inode)\n\nstruct vboxsf_handle;\n\nstruct vboxsf_options {\n\tunsigned long ttl;\n\tkuid_t uid;\n\tkgid_t gid;\n\tbool dmode_set;\n\tbool fmode_set;\n\tumode_t dmode;\n\tumode_t fmode;\n\tumode_t dmask;\n\tumode_t fmask;\n};\n\nstruct vboxsf_fs_context {\n\tstruct vboxsf_options o;\n\tchar *nls_name;\n};\n\n \nstruct vboxsf_sbi {\n\tstruct vboxsf_options o;\n\tstruct shfl_fsobjinfo root_info;\n\tstruct idr ino_idr;\n\tspinlock_t ino_idr_lock;  \n\tstruct nls_table *nls;\n\tu32 next_generation;\n\tu32 root;\n\tint bdi_id;\n};\n\n \nstruct vboxsf_inode {\n\t \n\tint force_restat;\n\t \n\tstruct list_head handle_list;\n\t \n\tstruct mutex handle_list_mutex;\n\t \n\tstruct inode vfs_inode;\n};\n\nstruct vboxsf_dir_info {\n\tstruct list_head info_list;\n};\n\nstruct vboxsf_dir_buf {\n\tsize_t entries;\n\tsize_t free;\n\tsize_t used;\n\tvoid *buf;\n\tstruct list_head head;\n};\n\n \nextern const struct inode_operations vboxsf_dir_iops;\nextern const struct inode_operations vboxsf_lnk_iops;\nextern const struct inode_operations vboxsf_reg_iops;\nextern const struct file_operations vboxsf_dir_fops;\nextern const struct file_operations vboxsf_reg_fops;\nextern const struct address_space_operations vboxsf_reg_aops;\nextern const struct dentry_operations vboxsf_dentry_ops;\n\n \nstruct vboxsf_handle *vboxsf_create_sf_handle(struct inode *inode,\n\t\t\t\t\t      u64 handle, u32 access_flags);\nvoid vboxsf_release_sf_handle(struct inode *inode, struct vboxsf_handle *sf_handle);\n\n \nstruct inode *vboxsf_new_inode(struct super_block *sb);\nint vboxsf_init_inode(struct vboxsf_sbi *sbi, struct inode *inode,\n\t\t       const struct shfl_fsobjinfo *info, bool reinit);\nint vboxsf_create_at_dentry(struct dentry *dentry,\n\t\t\t    struct shfl_createparms *params);\nint vboxsf_stat(struct vboxsf_sbi *sbi, struct shfl_string *path,\n\t\tstruct shfl_fsobjinfo *info);\nint vboxsf_stat_dentry(struct dentry *dentry, struct shfl_fsobjinfo *info);\nint vboxsf_inode_revalidate(struct dentry *dentry);\nint vboxsf_getattr(struct mnt_idmap *idmap, const struct path *path,\n\t\t   struct kstat *kstat, u32 request_mask,\n\t\t   unsigned int query_flags);\nint vboxsf_setattr(struct mnt_idmap *idmap, struct dentry *dentry,\n\t\t   struct iattr *iattr);\nstruct shfl_string *vboxsf_path_from_dentry(struct vboxsf_sbi *sbi,\n\t\t\t\t\t    struct dentry *dentry);\nint vboxsf_nlscpy(struct vboxsf_sbi *sbi, char *name, size_t name_bound_len,\n\t\t  const unsigned char *utf8_name, size_t utf8_len);\nstruct vboxsf_dir_info *vboxsf_dir_info_alloc(void);\nvoid vboxsf_dir_info_free(struct vboxsf_dir_info *p);\nint vboxsf_dir_read_all(struct vboxsf_sbi *sbi, struct vboxsf_dir_info *sf_d,\n\t\t\tu64 handle);\n\n \nint vboxsf_connect(void);\nvoid vboxsf_disconnect(void);\n\nint vboxsf_create(u32 root, struct shfl_string *parsed_path,\n\t\t  struct shfl_createparms *create_parms);\n\nint vboxsf_close(u32 root, u64 handle);\nint vboxsf_remove(u32 root, struct shfl_string *parsed_path, u32 flags);\nint vboxsf_rename(u32 root, struct shfl_string *src_path,\n\t\t  struct shfl_string *dest_path, u32 flags);\n\nint vboxsf_read(u32 root, u64 handle, u64 offset, u32 *buf_len, u8 *buf);\nint vboxsf_write(u32 root, u64 handle, u64 offset, u32 *buf_len, u8 *buf);\n\nint vboxsf_dirinfo(u32 root, u64 handle,\n\t\t   struct shfl_string *parsed_path, u32 flags, u32 index,\n\t\t   u32 *buf_len, struct shfl_dirinfo *buf, u32 *file_count);\nint vboxsf_fsinfo(u32 root, u64 handle, u32 flags,\n\t\t  u32 *buf_len, void *buf);\n\nint vboxsf_map_folder(struct shfl_string *folder_name, u32 *root);\nint vboxsf_unmap_folder(u32 root);\n\nint vboxsf_readlink(u32 root, struct shfl_string *parsed_path,\n\t\t    u32 buf_len, u8 *buf);\nint vboxsf_symlink(u32 root, struct shfl_string *new_path,\n\t\t   struct shfl_string *old_path, struct shfl_fsobjinfo *buf);\n\nint vboxsf_set_utf8(void);\nint vboxsf_set_symlinks(void);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}