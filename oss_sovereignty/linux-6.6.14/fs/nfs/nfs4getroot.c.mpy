{
  "module_name": "nfs4getroot.c",
  "hash_id": "bb52b2675fd2a6a628c79825a75d8021ceb7ff38cac577edfc3910ba05501bab",
  "original_prompt": "Ingested from linux-6.6.14/fs/nfs/nfs4getroot.c",
  "human_readable_source": "\n \n\n#include <linux/nfs_fs.h>\n#include \"nfs4_fs.h\"\n#include \"internal.h\"\n\n#define NFSDBG_FACILITY\t\tNFSDBG_CLIENT\n\nint nfs4_get_rootfh(struct nfs_server *server, struct nfs_fh *mntfh, bool auth_probe)\n{\n\tstruct nfs_fsinfo fsinfo;\n\tint ret = -ENOMEM;\n\n\tfsinfo.fattr = nfs_alloc_fattr();\n\tif (fsinfo.fattr == NULL)\n\t\tgoto out;\n\n\t \n\tret = nfs4_proc_get_rootfh(server, mntfh, &fsinfo, auth_probe);\n\tif (ret < 0) {\n\t\tdprintk(\"nfs4_get_rootfh: getroot error = %d\\n\", -ret);\n\t\tgoto out;\n\t}\n\n\tif (!(fsinfo.fattr->valid & NFS_ATTR_FATTR_TYPE)\n\t\t\t|| !S_ISDIR(fsinfo.fattr->mode)) {\n\t\tprintk(KERN_ERR \"nfs4_get_rootfh:\"\n\t\t       \" getroot encountered non-directory\\n\");\n\t\tret = -ENOTDIR;\n\t\tgoto out;\n\t}\n\n\tmemcpy(&server->fsid, &fsinfo.fattr->fsid, sizeof(server->fsid));\nout:\n\tnfs_free_fattr(fsinfo.fattr);\n\treturn ret;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}