{
  "module_name": "nfstrace.h",
  "hash_id": "50a66eae178d8f25caae6183ad78f6a058f6aa1eff42b1bbe8559f42d52329eb",
  "original_prompt": "Ingested from linux-6.6.14/fs/nfs/nfstrace.h",
  "human_readable_source": " \n \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM nfs\n\n#if !defined(_TRACE_NFS_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_NFS_H\n\n#include <linux/tracepoint.h>\n#include <linux/iversion.h>\n\n#include <trace/misc/fs.h>\n#include <trace/misc/nfs.h>\n#include <trace/misc/sunrpc.h>\n\n#define nfs_show_cache_validity(v) \\\n\t__print_flags(v, \"|\", \\\n\t\t\t{ NFS_INO_INVALID_DATA, \"INVALID_DATA\" }, \\\n\t\t\t{ NFS_INO_INVALID_ATIME, \"INVALID_ATIME\" }, \\\n\t\t\t{ NFS_INO_INVALID_ACCESS, \"INVALID_ACCESS\" }, \\\n\t\t\t{ NFS_INO_INVALID_ACL, \"INVALID_ACL\" }, \\\n\t\t\t{ NFS_INO_REVAL_FORCED, \"REVAL_FORCED\" }, \\\n\t\t\t{ NFS_INO_INVALID_LABEL, \"INVALID_LABEL\" }, \\\n\t\t\t{ NFS_INO_INVALID_CHANGE, \"INVALID_CHANGE\" }, \\\n\t\t\t{ NFS_INO_INVALID_CTIME, \"INVALID_CTIME\" }, \\\n\t\t\t{ NFS_INO_INVALID_MTIME, \"INVALID_MTIME\" }, \\\n\t\t\t{ NFS_INO_INVALID_SIZE, \"INVALID_SIZE\" }, \\\n\t\t\t{ NFS_INO_INVALID_OTHER, \"INVALID_OTHER\" }, \\\n\t\t\t{ NFS_INO_DATA_INVAL_DEFER, \"DATA_INVAL_DEFER\" }, \\\n\t\t\t{ NFS_INO_INVALID_BLOCKS, \"INVALID_BLOCKS\" }, \\\n\t\t\t{ NFS_INO_INVALID_XATTR, \"INVALID_XATTR\" }, \\\n\t\t\t{ NFS_INO_INVALID_NLINK, \"INVALID_NLINK\" }, \\\n\t\t\t{ NFS_INO_INVALID_MODE, \"INVALID_MODE\" })\n\n#define nfs_show_nfsi_flags(v) \\\n\t__print_flags(v, \"|\", \\\n\t\t\t{ BIT(NFS_INO_STALE), \"STALE\" }, \\\n\t\t\t{ BIT(NFS_INO_ACL_LRU_SET), \"ACL_LRU_SET\" }, \\\n\t\t\t{ BIT(NFS_INO_INVALIDATING), \"INVALIDATING\" }, \\\n\t\t\t{ BIT(NFS_INO_LAYOUTCOMMIT), \"NEED_LAYOUTCOMMIT\" }, \\\n\t\t\t{ BIT(NFS_INO_LAYOUTCOMMITTING), \"LAYOUTCOMMIT\" }, \\\n\t\t\t{ BIT(NFS_INO_LAYOUTSTATS), \"LAYOUTSTATS\" }, \\\n\t\t\t{ BIT(NFS_INO_ODIRECT), \"ODIRECT\" })\n\nDECLARE_EVENT_CLASS(nfs_inode_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode\n\t\t),\n\n\t\tTP_ARGS(inode),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->version = inode_peek_iversion_raw(inode);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x version=%llu \",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(unsigned long long)__entry->version\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs_inode_event_done,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(unsigned char, type)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t\t__field(loff_t, size)\n\t\t\t__field(unsigned long, nfsi_flags)\n\t\t\t__field(unsigned long, cache_validity)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->type = nfs_umode_to_dtype(inode->i_mode);\n\t\t\t__entry->version = inode_peek_iversion_raw(inode);\n\t\t\t__entry->size = i_size_read(inode);\n\t\t\t__entry->nfsi_flags = nfsi->flags;\n\t\t\t__entry->cache_validity = nfsi->cache_validity;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"type=%u (%s) version=%llu size=%lld \"\n\t\t\t\"cache_validity=0x%lx (%s) nfs_flags=0x%lx (%s)\",\n\t\t\t-__entry->error, show_nfs_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->type,\n\t\t\tshow_fs_dirent_type(__entry->type),\n\t\t\t(unsigned long long)__entry->version,\n\t\t\t(long long)__entry->size,\n\t\t\t__entry->cache_validity,\n\t\t\tnfs_show_cache_validity(__entry->cache_validity),\n\t\t\t__entry->nfsi_flags,\n\t\t\tnfs_show_nfsi_flags(__entry->nfsi_flags)\n\t\t)\n);\n\n#define DEFINE_NFS_INODE_EVENT(name) \\\n\tDEFINE_EVENT(nfs_inode_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode))\n#define DEFINE_NFS_INODE_EVENT_DONE(name) \\\n\tDEFINE_EVENT(nfs_inode_event_done, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, error))\nDEFINE_NFS_INODE_EVENT(nfs_set_inode_stale);\nDEFINE_NFS_INODE_EVENT(nfs_refresh_inode_enter);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_refresh_inode_exit);\nDEFINE_NFS_INODE_EVENT(nfs_revalidate_inode_enter);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_revalidate_inode_exit);\nDEFINE_NFS_INODE_EVENT(nfs_invalidate_mapping_enter);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_invalidate_mapping_exit);\nDEFINE_NFS_INODE_EVENT(nfs_getattr_enter);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_getattr_exit);\nDEFINE_NFS_INODE_EVENT(nfs_setattr_enter);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_setattr_exit);\nDEFINE_NFS_INODE_EVENT(nfs_writeback_inode_enter);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_writeback_inode_exit);\nDEFINE_NFS_INODE_EVENT(nfs_fsync_enter);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_fsync_exit);\nDEFINE_NFS_INODE_EVENT(nfs_access_enter);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_set_cache_invalid);\nDEFINE_NFS_INODE_EVENT(nfs_readdir_force_readdirplus);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_readdir_cache_fill_done);\nDEFINE_NFS_INODE_EVENT_DONE(nfs_readdir_uncached_done);\n\nTRACE_EVENT(nfs_access_exit,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tunsigned int mask,\n\t\t\tunsigned int permitted,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, mask, permitted, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(unsigned char, type)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t\t__field(loff_t, size)\n\t\t\t__field(unsigned long, nfsi_flags)\n\t\t\t__field(unsigned long, cache_validity)\n\t\t\t__field(unsigned int, mask)\n\t\t\t__field(unsigned int, permitted)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->type = nfs_umode_to_dtype(inode->i_mode);\n\t\t\t__entry->version = inode_peek_iversion_raw(inode);\n\t\t\t__entry->size = i_size_read(inode);\n\t\t\t__entry->nfsi_flags = nfsi->flags;\n\t\t\t__entry->cache_validity = nfsi->cache_validity;\n\t\t\t__entry->mask = mask;\n\t\t\t__entry->permitted = permitted;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"type=%u (%s) version=%llu size=%lld \"\n\t\t\t\"cache_validity=0x%lx (%s) nfs_flags=0x%lx (%s) \"\n\t\t\t\"mask=0x%x permitted=0x%x\",\n\t\t\t-__entry->error, show_nfs_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->type,\n\t\t\tshow_fs_dirent_type(__entry->type),\n\t\t\t(unsigned long long)__entry->version,\n\t\t\t(long long)__entry->size,\n\t\t\t__entry->cache_validity,\n\t\t\tnfs_show_cache_validity(__entry->cache_validity),\n\t\t\t__entry->nfsi_flags,\n\t\t\tnfs_show_nfsi_flags(__entry->nfsi_flags),\n\t\t\t__entry->mask, __entry->permitted\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs_update_size_class,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tloff_t new_size\n\t\t),\n\n\t\tTP_ARGS(inode, new_size),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t\t__field(loff_t, cur_size)\n\t\t\t__field(loff_t, new_size)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->version = inode_peek_iversion_raw(inode);\n\t\t\t__entry->cur_size = i_size_read(inode);\n\t\t\t__entry->new_size = new_size;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x version=%llu cursize=%lld newsize=%lld\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle, __entry->version,\n\t\t\t__entry->cur_size, __entry->new_size\n\t\t)\n);\n\n#define DEFINE_NFS_UPDATE_SIZE_EVENT(name) \\\n\tDEFINE_EVENT(nfs_update_size_class, nfs_size_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tloff_t new_size \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, new_size))\n\nDEFINE_NFS_UPDATE_SIZE_EVENT(truncate);\nDEFINE_NFS_UPDATE_SIZE_EVENT(wcc);\nDEFINE_NFS_UPDATE_SIZE_EVENT(update);\nDEFINE_NFS_UPDATE_SIZE_EVENT(grow);\n\nDECLARE_EVENT_CLASS(nfs_inode_range_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tloff_t range_start,\n\t\t\tloff_t range_end\n\t\t),\n\n\t\tTP_ARGS(inode, range_start, range_end),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t\t__field(loff_t, range_start)\n\t\t\t__field(loff_t, range_end)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->version = inode_peek_iversion_raw(inode);\n\t\t\t__entry->range_start = range_start;\n\t\t\t__entry->range_end = range_end;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x version=%llu \"\n\t\t\t\"range=[%lld, %lld]\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle, __entry->version,\n\t\t\t__entry->range_start, __entry->range_end\n\t\t)\n);\n\n#define DEFINE_NFS_INODE_RANGE_EVENT(name) \\\n\tDEFINE_EVENT(nfs_inode_range_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tloff_t range_start, \\\n\t\t\t\tloff_t range_end \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, range_start, range_end))\n\nDEFINE_NFS_INODE_RANGE_EVENT(nfs_readdir_invalidate_cache_range);\n\nDECLARE_EVENT_CLASS(nfs_readdir_event,\n\t\tTP_PROTO(\n\t\t\tconst struct file *file,\n\t\t\tconst __be32 *verifier,\n\t\t\tu64 cookie,\n\t\t\tpgoff_t page_index,\n\t\t\tunsigned int dtsize\n\t\t),\n\n\t\tTP_ARGS(file, verifier, cookie, page_index, dtsize),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t\t__array(char, verifier, NFS4_VERIFIER_SIZE)\n\t\t\t__field(u64, cookie)\n\t\t\t__field(pgoff_t, index)\n\t\t\t__field(unsigned int, dtsize)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *dir = file_inode(file);\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(dir);\n\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->version = inode_peek_iversion_raw(dir);\n\t\t\tif (cookie != 0)\n\t\t\t\tmemcpy(__entry->verifier, verifier,\n\t\t\t\t       NFS4_VERIFIER_SIZE);\n\t\t\telse\n\t\t\t\tmemset(__entry->verifier, 0,\n\t\t\t\t       NFS4_VERIFIER_SIZE);\n\t\t\t__entry->cookie = cookie;\n\t\t\t__entry->index = page_index;\n\t\t\t__entry->dtsize = dtsize;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x version=%llu \"\n\t\t\t\"cookie=%s:0x%llx cache_index=%lu dtsize=%u\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid, __entry->fhandle,\n\t\t\t__entry->version, show_nfs4_verifier(__entry->verifier),\n\t\t\t(unsigned long long)__entry->cookie, __entry->index,\n\t\t\t__entry->dtsize\n\t\t)\n);\n\n#define DEFINE_NFS_READDIR_EVENT(name) \\\n\tDEFINE_EVENT(nfs_readdir_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct file *file, \\\n\t\t\t\tconst __be32 *verifier, \\\n\t\t\t\tu64 cookie, \\\n\t\t\t\tpgoff_t page_index, \\\n\t\t\t\tunsigned int dtsize \\\n\t\t\t\t), \\\n\t\t\tTP_ARGS(file, verifier, cookie, page_index, dtsize))\n\nDEFINE_NFS_READDIR_EVENT(nfs_readdir_cache_fill);\nDEFINE_NFS_READDIR_EVENT(nfs_readdir_uncached);\n\nDECLARE_EVENT_CLASS(nfs_lookup_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct dentry *dentry,\n\t\t\tunsigned int flags\n\t\t),\n\n\t\tTP_ARGS(dir, dentry, flags),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, flags)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->flags = flags;\n\t\t\t__assign_str(name, dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"flags=0x%lx (%s) name=%02x:%02x:%llu/%s\",\n\t\t\t__entry->flags,\n\t\t\tshow_fs_lookup_flags(__entry->flags),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\n#define DEFINE_NFS_LOOKUP_EVENT(name) \\\n\tDEFINE_EVENT(nfs_lookup_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *dir, \\\n\t\t\t\tconst struct dentry *dentry, \\\n\t\t\t\tunsigned int flags \\\n\t\t\t), \\\n\t\t\tTP_ARGS(dir, dentry, flags))\n\nDECLARE_EVENT_CLASS(nfs_lookup_event_done,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct dentry *dentry,\n\t\t\tunsigned int flags,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(dir, dentry, flags, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(unsigned long, flags)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->flags = flags;\n\t\t\t__assign_str(name, dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) flags=0x%lx (%s) name=%02x:%02x:%llu/%s\",\n\t\t\t-__entry->error, show_nfs_status(__entry->error),\n\t\t\t__entry->flags,\n\t\t\tshow_fs_lookup_flags(__entry->flags),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\n#define DEFINE_NFS_LOOKUP_EVENT_DONE(name) \\\n\tDEFINE_EVENT(nfs_lookup_event_done, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *dir, \\\n\t\t\t\tconst struct dentry *dentry, \\\n\t\t\t\tunsigned int flags, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(dir, dentry, flags, error))\n\nDEFINE_NFS_LOOKUP_EVENT(nfs_lookup_enter);\nDEFINE_NFS_LOOKUP_EVENT_DONE(nfs_lookup_exit);\nDEFINE_NFS_LOOKUP_EVENT(nfs_lookup_revalidate_enter);\nDEFINE_NFS_LOOKUP_EVENT_DONE(nfs_lookup_revalidate_exit);\nDEFINE_NFS_LOOKUP_EVENT(nfs_readdir_lookup);\nDEFINE_NFS_LOOKUP_EVENT(nfs_readdir_lookup_revalidate_failed);\nDEFINE_NFS_LOOKUP_EVENT_DONE(nfs_readdir_lookup_revalidate);\n\nTRACE_EVENT(nfs_atomic_open_enter,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct nfs_open_context *ctx,\n\t\t\tunsigned int flags\n\t\t),\n\n\t\tTP_ARGS(dir, ctx, flags),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, flags)\n\t\t\t__field(unsigned long, fmode)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, ctx->dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->flags = flags;\n\t\t\t__entry->fmode = (__force unsigned long)ctx->mode;\n\t\t\t__assign_str(name, ctx->dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"flags=0x%lx (%s) fmode=%s name=%02x:%02x:%llu/%s\",\n\t\t\t__entry->flags,\n\t\t\tshow_fs_fcntl_open_flags(__entry->flags),\n\t\t\tshow_fs_fmode_flags(__entry->fmode),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\nTRACE_EVENT(nfs_atomic_open_exit,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct nfs_open_context *ctx,\n\t\t\tunsigned int flags,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(dir, ctx, flags, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(unsigned long, flags)\n\t\t\t__field(unsigned long, fmode)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, ctx->dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = -error;\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->flags = flags;\n\t\t\t__entry->fmode = (__force unsigned long)ctx->mode;\n\t\t\t__assign_str(name, ctx->dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) flags=0x%lx (%s) fmode=%s \"\n\t\t\t\"name=%02x:%02x:%llu/%s\",\n\t\t\t-__entry->error, show_nfs_status(__entry->error),\n\t\t\t__entry->flags,\n\t\t\tshow_fs_fcntl_open_flags(__entry->flags),\n\t\t\tshow_fs_fmode_flags(__entry->fmode),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\nTRACE_EVENT(nfs_create_enter,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct dentry *dentry,\n\t\t\tunsigned int flags\n\t\t),\n\n\t\tTP_ARGS(dir, dentry, flags),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, flags)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->flags = flags;\n\t\t\t__assign_str(name, dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"flags=0x%lx (%s) name=%02x:%02x:%llu/%s\",\n\t\t\t__entry->flags,\n\t\t\tshow_fs_fcntl_open_flags(__entry->flags),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\nTRACE_EVENT(nfs_create_exit,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct dentry *dentry,\n\t\t\tunsigned int flags,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(dir, dentry, flags, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(unsigned long, flags)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = -error;\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->flags = flags;\n\t\t\t__assign_str(name, dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) flags=0x%lx (%s) name=%02x:%02x:%llu/%s\",\n\t\t\t-__entry->error, show_nfs_status(__entry->error),\n\t\t\t__entry->flags,\n\t\t\tshow_fs_fcntl_open_flags(__entry->flags),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs_directory_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct dentry *dentry\n\t\t),\n\n\t\tTP_ARGS(dir, dentry),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__assign_str(name, dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"name=%02x:%02x:%llu/%s\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\n#define DEFINE_NFS_DIRECTORY_EVENT(name) \\\n\tDEFINE_EVENT(nfs_directory_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *dir, \\\n\t\t\t\tconst struct dentry *dentry \\\n\t\t\t), \\\n\t\t\tTP_ARGS(dir, dentry))\n\nDECLARE_EVENT_CLASS(nfs_directory_event_done,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct dentry *dentry,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(dir, dentry, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__assign_str(name, dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) name=%02x:%02x:%llu/%s\",\n\t\t\t-__entry->error, show_nfs_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\n#define DEFINE_NFS_DIRECTORY_EVENT_DONE(name) \\\n\tDEFINE_EVENT(nfs_directory_event_done, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *dir, \\\n\t\t\t\tconst struct dentry *dentry, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(dir, dentry, error))\n\nDEFINE_NFS_DIRECTORY_EVENT(nfs_mknod_enter);\nDEFINE_NFS_DIRECTORY_EVENT_DONE(nfs_mknod_exit);\nDEFINE_NFS_DIRECTORY_EVENT(nfs_mkdir_enter);\nDEFINE_NFS_DIRECTORY_EVENT_DONE(nfs_mkdir_exit);\nDEFINE_NFS_DIRECTORY_EVENT(nfs_rmdir_enter);\nDEFINE_NFS_DIRECTORY_EVENT_DONE(nfs_rmdir_exit);\nDEFINE_NFS_DIRECTORY_EVENT(nfs_remove_enter);\nDEFINE_NFS_DIRECTORY_EVENT_DONE(nfs_remove_exit);\nDEFINE_NFS_DIRECTORY_EVENT(nfs_unlink_enter);\nDEFINE_NFS_DIRECTORY_EVENT_DONE(nfs_unlink_exit);\nDEFINE_NFS_DIRECTORY_EVENT(nfs_symlink_enter);\nDEFINE_NFS_DIRECTORY_EVENT_DONE(nfs_symlink_exit);\n\nTRACE_EVENT(nfs_link_enter,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct dentry *dentry\n\t\t),\n\n\t\tTP_ARGS(inode, dir, dentry),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__assign_str(name, dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu name=%02x:%02x:%llu/%s\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t__entry->fileid,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\nTRACE_EVENT(nfs_link_exit,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct dentry *dentry,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, dir, dentry, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__assign_str(name, dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu name=%02x:%02x:%llu/%s\",\n\t\t\t-__entry->error, show_nfs_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t__entry->fileid,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs_rename_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *old_dir,\n\t\t\tconst struct dentry *old_dentry,\n\t\t\tconst struct inode *new_dir,\n\t\t\tconst struct dentry *new_dentry\n\t\t),\n\n\t\tTP_ARGS(old_dir, old_dentry, new_dir, new_dentry),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, old_dir)\n\t\t\t__field(u64, new_dir)\n\t\t\t__string(old_name, old_dentry->d_name.name)\n\t\t\t__string(new_name, new_dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = old_dir->i_sb->s_dev;\n\t\t\t__entry->old_dir = NFS_FILEID(old_dir);\n\t\t\t__entry->new_dir = NFS_FILEID(new_dir);\n\t\t\t__assign_str(old_name, old_dentry->d_name.name);\n\t\t\t__assign_str(new_name, new_dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"old_name=%02x:%02x:%llu/%s new_name=%02x:%02x:%llu/%s\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->old_dir,\n\t\t\t__get_str(old_name),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->new_dir,\n\t\t\t__get_str(new_name)\n\t\t)\n);\n#define DEFINE_NFS_RENAME_EVENT(name) \\\n\tDEFINE_EVENT(nfs_rename_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *old_dir, \\\n\t\t\t\tconst struct dentry *old_dentry, \\\n\t\t\t\tconst struct inode *new_dir, \\\n\t\t\t\tconst struct dentry *new_dentry \\\n\t\t\t), \\\n\t\t\tTP_ARGS(old_dir, old_dentry, new_dir, new_dentry))\n\nDECLARE_EVENT_CLASS(nfs_rename_event_done,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *old_dir,\n\t\t\tconst struct dentry *old_dentry,\n\t\t\tconst struct inode *new_dir,\n\t\t\tconst struct dentry *new_dentry,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(old_dir, old_dentry, new_dir, new_dentry, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u64, old_dir)\n\t\t\t__string(old_name, old_dentry->d_name.name)\n\t\t\t__field(u64, new_dir)\n\t\t\t__string(new_name, new_dentry->d_name.name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = old_dir->i_sb->s_dev;\n\t\t\t__entry->error = -error;\n\t\t\t__entry->old_dir = NFS_FILEID(old_dir);\n\t\t\t__entry->new_dir = NFS_FILEID(new_dir);\n\t\t\t__assign_str(old_name, old_dentry->d_name.name);\n\t\t\t__assign_str(new_name, new_dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) old_name=%02x:%02x:%llu/%s \"\n\t\t\t\"new_name=%02x:%02x:%llu/%s\",\n\t\t\t-__entry->error, show_nfs_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->old_dir,\n\t\t\t__get_str(old_name),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->new_dir,\n\t\t\t__get_str(new_name)\n\t\t)\n);\n#define DEFINE_NFS_RENAME_EVENT_DONE(name) \\\n\tDEFINE_EVENT(nfs_rename_event_done, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *old_dir, \\\n\t\t\t\tconst struct dentry *old_dentry, \\\n\t\t\t\tconst struct inode *new_dir, \\\n\t\t\t\tconst struct dentry *new_dentry, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(old_dir, old_dentry, new_dir, \\\n\t\t\t\tnew_dentry, error))\n\nDEFINE_NFS_RENAME_EVENT(nfs_rename_enter);\nDEFINE_NFS_RENAME_EVENT_DONE(nfs_rename_exit);\n\nDEFINE_NFS_RENAME_EVENT_DONE(nfs_sillyrename_rename);\n\nTRACE_EVENT(nfs_sillyrename_unlink,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_unlinkdata *data,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(data, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u64, dir)\n\t\t\t__dynamic_array(char, name, data->args.name.len + 1)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tstruct inode *dir = d_inode(data->dentry->d_parent);\n\t\t\tsize_t len = data->args.name.len;\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->error = -error;\n\t\t\tmemcpy(__get_str(name),\n\t\t\t\tdata->args.name.name, len);\n\t\t\t__get_str(name)[len] = 0;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) name=%02x:%02x:%llu/%s\",\n\t\t\t-__entry->error, show_nfs_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs_folio_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tstruct folio *folio\n\t\t),\n\n\t\tTP_ARGS(inode, folio),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, count)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->version = inode_peek_iversion_raw(inode);\n\t\t\t__entry->offset = folio_file_pos(folio);\n\t\t\t__entry->count = nfs_folio_length(folio);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x version=%llu \"\n\t\t\t\"offset=%lld count=%u\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle, __entry->version,\n\t\t\t__entry->offset, __entry->count\n\t\t)\n);\n\n#define DEFINE_NFS_FOLIO_EVENT(name) \\\n\tDEFINE_EVENT(nfs_folio_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tstruct folio *folio \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, folio))\n\nDECLARE_EVENT_CLASS(nfs_folio_event_done,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tstruct folio *folio,\n\t\t\tint ret\n\t\t),\n\n\t\tTP_ARGS(inode, folio, ret),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(int, ret)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, count)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->version = inode_peek_iversion_raw(inode);\n\t\t\t__entry->offset = folio_file_pos(folio);\n\t\t\t__entry->count = nfs_folio_length(folio);\n\t\t\t__entry->ret = ret;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x version=%llu \"\n\t\t\t\"offset=%lld count=%u ret=%d\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle, __entry->version,\n\t\t\t__entry->offset, __entry->count, __entry->ret\n\t\t)\n);\n\n#define DEFINE_NFS_FOLIO_EVENT_DONE(name) \\\n\tDEFINE_EVENT(nfs_folio_event_done, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tstruct folio *folio, \\\n\t\t\t\tint ret \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, folio, ret))\n\nDEFINE_NFS_FOLIO_EVENT(nfs_aop_readpage);\nDEFINE_NFS_FOLIO_EVENT_DONE(nfs_aop_readpage_done);\n\nDEFINE_NFS_FOLIO_EVENT(nfs_writeback_folio);\nDEFINE_NFS_FOLIO_EVENT_DONE(nfs_writeback_folio_done);\n\nDEFINE_NFS_FOLIO_EVENT(nfs_invalidate_folio);\nDEFINE_NFS_FOLIO_EVENT_DONE(nfs_launder_folio_done);\n\nTRACE_EVENT(nfs_aop_readahead,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tloff_t pos,\n\t\t\tunsigned int nr_pages\n\t\t),\n\n\t\tTP_ARGS(inode, pos, nr_pages),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(unsigned int, nr_pages)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->version = inode_peek_iversion_raw(inode);\n\t\t\t__entry->offset = pos;\n\t\t\t__entry->nr_pages = nr_pages;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x version=%llu offset=%lld nr_pages=%u\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle, __entry->version,\n\t\t\t__entry->offset, __entry->nr_pages\n\t\t)\n);\n\nTRACE_EVENT(nfs_aop_readahead_done,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tunsigned int nr_pages,\n\t\t\tint ret\n\t\t),\n\n\t\tTP_ARGS(inode, nr_pages, ret),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(int, ret)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, version)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(unsigned int, nr_pages)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->version = inode_peek_iversion_raw(inode);\n\t\t\t__entry->nr_pages = nr_pages;\n\t\t\t__entry->ret = ret;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x version=%llu nr_pages=%u ret=%d\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle, __entry->version,\n\t\t\t__entry->nr_pages, __entry->ret\n\t\t)\n);\n\nTRACE_EVENT(nfs_initiate_read,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_pgio_header *hdr\n\t\t),\n\n\t\tTP_ARGS(hdr),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, count)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = hdr->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = hdr->args.fh ?\n\t\t\t\t\t\t  hdr->args.fh : &nfsi->fh;\n\n\t\t\t__entry->offset = hdr->args.offset;\n\t\t\t__entry->count = hdr->args.count;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset, __entry->count\n\t\t)\n);\n\nTRACE_EVENT(nfs_readpage_done,\n\t\tTP_PROTO(\n\t\t\tconst struct rpc_task *task,\n\t\t\tconst struct nfs_pgio_header *hdr\n\t\t),\n\n\t\tTP_ARGS(task, hdr),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, arg_count)\n\t\t\t__field(u32, res_count)\n\t\t\t__field(bool, eof)\n\t\t\t__field(int, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = hdr->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = hdr->args.fh ?\n\t\t\t\t\t\t  hdr->args.fh : &nfsi->fh;\n\n\t\t\t__entry->error = task->tk_status;\n\t\t\t__entry->offset = hdr->args.offset;\n\t\t\t__entry->arg_count = hdr->args.count;\n\t\t\t__entry->res_count = hdr->res.count;\n\t\t\t__entry->eof = hdr->res.eof;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%d fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u res=%u%s\", __entry->error,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset, __entry->arg_count,\n\t\t\t__entry->res_count, __entry->eof ? \" eof\" : \"\"\n\t\t)\n);\n\nTRACE_EVENT(nfs_readpage_short,\n\t\tTP_PROTO(\n\t\t\tconst struct rpc_task *task,\n\t\t\tconst struct nfs_pgio_header *hdr\n\t\t),\n\n\t\tTP_ARGS(task, hdr),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, arg_count)\n\t\t\t__field(u32, res_count)\n\t\t\t__field(bool, eof)\n\t\t\t__field(int, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = hdr->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = hdr->args.fh ?\n\t\t\t\t\t\t  hdr->args.fh : &nfsi->fh;\n\n\t\t\t__entry->error = task->tk_status;\n\t\t\t__entry->offset = hdr->args.offset;\n\t\t\t__entry->arg_count = hdr->args.count;\n\t\t\t__entry->res_count = hdr->res.count;\n\t\t\t__entry->eof = hdr->res.eof;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%d fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u res=%u%s\", __entry->error,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset, __entry->arg_count,\n\t\t\t__entry->res_count, __entry->eof ? \" eof\" : \"\"\n\t\t)\n);\n\n\nTRACE_EVENT(nfs_pgio_error,\n\tTP_PROTO(\n\t\tconst struct nfs_pgio_header *hdr,\n\t\tint error,\n\t\tloff_t pos\n\t),\n\n\tTP_ARGS(hdr, error, pos),\n\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(u32, fhandle)\n\t\t__field(u64, fileid)\n\t\t__field(loff_t, offset)\n\t\t__field(u32, arg_count)\n\t\t__field(u32, res_count)\n\t\t__field(loff_t, pos)\n\t\t__field(int, error)\n\t),\n\n\tTP_fast_assign(\n\t\tconst struct inode *inode = hdr->inode;\n\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\tconst struct nfs_fh *fh = hdr->args.fh ?\n\t\t\t\t\t  hdr->args.fh : &nfsi->fh;\n\n\t\t__entry->error = error;\n\t\t__entry->offset = hdr->args.offset;\n\t\t__entry->arg_count = hdr->args.count;\n\t\t__entry->res_count = hdr->res.count;\n\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t__entry->fileid = nfsi->fileid;\n\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t),\n\n\tTP_printk(\"error=%d fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t  \"offset=%lld count=%u res=%u pos=%llu\", __entry->error,\n\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t(unsigned long long)__entry->fileid, __entry->fhandle,\n\t\t(long long)__entry->offset, __entry->arg_count, __entry->res_count,\n\t\t__entry->pos\n\t)\n);\n\nTRACE_EVENT(nfs_initiate_write,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_pgio_header *hdr\n\t\t),\n\n\t\tTP_ARGS(hdr),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, count)\n\t\t\t__field(unsigned long, stable)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = hdr->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = hdr->args.fh ?\n\t\t\t\t\t\t  hdr->args.fh : &nfsi->fh;\n\n\t\t\t__entry->offset = hdr->args.offset;\n\t\t\t__entry->count = hdr->args.count;\n\t\t\t__entry->stable = hdr->args.stable;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u stable=%s\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset, __entry->count,\n\t\t\tshow_nfs_stable_how(__entry->stable)\n\t\t)\n);\n\nTRACE_EVENT(nfs_writeback_done,\n\t\tTP_PROTO(\n\t\t\tconst struct rpc_task *task,\n\t\t\tconst struct nfs_pgio_header *hdr\n\t\t),\n\n\t\tTP_ARGS(task, hdr),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, arg_count)\n\t\t\t__field(u32, res_count)\n\t\t\t__field(int, error)\n\t\t\t__field(unsigned long, stable)\n\t\t\t__array(char, verifier, NFS4_VERIFIER_SIZE)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = hdr->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = hdr->args.fh ?\n\t\t\t\t\t\t  hdr->args.fh : &nfsi->fh;\n\t\t\tconst struct nfs_writeverf *verf = hdr->res.verf;\n\n\t\t\t__entry->error = task->tk_status;\n\t\t\t__entry->offset = hdr->args.offset;\n\t\t\t__entry->arg_count = hdr->args.count;\n\t\t\t__entry->res_count = hdr->res.count;\n\t\t\t__entry->stable = verf->committed;\n\t\t\tmemcpy(__entry->verifier,\n\t\t\t\t&verf->verifier,\n\t\t\t\tNFS4_VERIFIER_SIZE);\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%d fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u res=%u stable=%s \"\n\t\t\t\"verifier=%s\", __entry->error,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset, __entry->arg_count,\n\t\t\t__entry->res_count,\n\t\t\tshow_nfs_stable_how(__entry->stable),\n\t\t\tshow_nfs4_verifier(__entry->verifier)\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs_page_error_class,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tconst struct nfs_page *req,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, req, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(unsigned int, count)\n\t\t\t__field(int, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(&nfsi->fh);\n\t\t\t__entry->offset = req_offset(req);\n\t\t\t__entry->count = req->wb_bytes;\n\t\t\t__entry->error = error;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%d fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u\", __entry->error,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle, __entry->offset,\n\t\t\t__entry->count\n\t\t)\n);\n\n#define DEFINE_NFS_PAGEERR_EVENT(name) \\\n\tDEFINE_EVENT(nfs_page_error_class, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tconst struct nfs_page *req, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, req, error))\n\nDEFINE_NFS_PAGEERR_EVENT(nfs_write_error);\nDEFINE_NFS_PAGEERR_EVENT(nfs_comp_error);\nDEFINE_NFS_PAGEERR_EVENT(nfs_commit_error);\n\nTRACE_EVENT(nfs_initiate_commit,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_commit_data *data\n\t\t),\n\n\t\tTP_ARGS(data),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, count)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = data->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = data->args.fh ?\n\t\t\t\t\t\t  data->args.fh : &nfsi->fh;\n\n\t\t\t__entry->offset = data->args.offset;\n\t\t\t__entry->count = data->args.count;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset, __entry->count\n\t\t)\n);\n\nTRACE_EVENT(nfs_commit_done,\n\t\tTP_PROTO(\n\t\t\tconst struct rpc_task *task,\n\t\t\tconst struct nfs_commit_data *data\n\t\t),\n\n\t\tTP_ARGS(task, data),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(int, error)\n\t\t\t__field(unsigned long, stable)\n\t\t\t__array(char, verifier, NFS4_VERIFIER_SIZE)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = data->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = data->args.fh ?\n\t\t\t\t\t\t  data->args.fh : &nfsi->fh;\n\t\t\tconst struct nfs_writeverf *verf = data->res.verf;\n\n\t\t\t__entry->error = task->tk_status;\n\t\t\t__entry->offset = data->args.offset;\n\t\t\t__entry->stable = verf->committed;\n\t\t\tmemcpy(__entry->verifier,\n\t\t\t\t&verf->verifier,\n\t\t\t\tNFS4_VERIFIER_SIZE);\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%d fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld stable=%s verifier=%s\", __entry->error,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset,\n\t\t\tshow_nfs_stable_how(__entry->stable),\n\t\t\tshow_nfs4_verifier(__entry->verifier)\n\t\t)\n);\n\n#define nfs_show_direct_req_flags(v) \\\n\t__print_flags(v, \"|\", \\\n\t\t\t{ NFS_ODIRECT_DO_COMMIT, \"DO_COMMIT\" }, \\\n\t\t\t{ NFS_ODIRECT_RESCHED_WRITES, \"RESCHED_WRITES\" }, \\\n\t\t\t{ NFS_ODIRECT_SHOULD_DIRTY, \"SHOULD DIRTY\" }, \\\n\t\t\t{ NFS_ODIRECT_DONE, \"DONE\" } )\n\nDECLARE_EVENT_CLASS(nfs_direct_req_class,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_direct_req *dreq\n\t\t),\n\n\t\tTP_ARGS(dreq),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(ssize_t, count)\n\t\t\t__field(ssize_t, bytes_left)\n\t\t\t__field(ssize_t, error)\n\t\t\t__field(int, flags)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = dreq->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = &nfsi->fh;\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t\t__entry->offset = dreq->io_start;\n\t\t\t__entry->count = dreq->count;\n\t\t\t__entry->bytes_left = dreq->bytes_left;\n\t\t\t__entry->error = dreq->error;\n\t\t\t__entry->flags = dreq->flags;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%zd fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%zd bytes_left=%zd flags=%s\",\n\t\t\t__entry->error, MAJOR(__entry->dev),\n\t\t\tMINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle, __entry->offset,\n\t\t\t__entry->count, __entry->bytes_left,\n\t\t\tnfs_show_direct_req_flags(__entry->flags)\n\t\t)\n);\n\n#define DEFINE_NFS_DIRECT_REQ_EVENT(name) \\\n\tDEFINE_EVENT(nfs_direct_req_class, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_direct_req *dreq \\\n\t\t\t), \\\n\t\t\tTP_ARGS(dreq))\n\nDEFINE_NFS_DIRECT_REQ_EVENT(nfs_direct_commit_complete);\nDEFINE_NFS_DIRECT_REQ_EVENT(nfs_direct_resched_write);\nDEFINE_NFS_DIRECT_REQ_EVENT(nfs_direct_write_complete);\nDEFINE_NFS_DIRECT_REQ_EVENT(nfs_direct_write_completion);\nDEFINE_NFS_DIRECT_REQ_EVENT(nfs_direct_write_schedule_iovec);\nDEFINE_NFS_DIRECT_REQ_EVENT(nfs_direct_write_reschedule_io);\n\nTRACE_EVENT(nfs_fh_to_dentry,\n\t\tTP_PROTO(\n\t\t\tconst struct super_block *sb,\n\t\t\tconst struct nfs_fh *fh,\n\t\t\tu64 fileid,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(sb, fh, fileid, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(int, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = error;\n\t\t\t__entry->dev = sb->s_dev;\n\t\t\t__entry->fileid = fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%d fileid=%02x:%02x:%llu fhandle=0x%08x \",\n\t\t\t__entry->error,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle\n\t\t)\n);\n\nTRACE_EVENT(nfs_mount_assign,\n\tTP_PROTO(\n\t\tconst char *option,\n\t\tconst char *value\n\t),\n\n\tTP_ARGS(option, value),\n\n\tTP_STRUCT__entry(\n\t\t__string(option, option)\n\t\t__string(value, value)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(option, option);\n\t\t__assign_str(value, value);\n\t),\n\n\tTP_printk(\"option %s=%s\",\n\t\t__get_str(option), __get_str(value)\n\t)\n);\n\nTRACE_EVENT(nfs_mount_option,\n\tTP_PROTO(\n\t\tconst struct fs_parameter *param\n\t),\n\n\tTP_ARGS(param),\n\n\tTP_STRUCT__entry(\n\t\t__string(option, param->key)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(option, param->key);\n\t),\n\n\tTP_printk(\"option %s\", __get_str(option))\n);\n\nTRACE_EVENT(nfs_mount_path,\n\tTP_PROTO(\n\t\tconst char *path\n\t),\n\n\tTP_ARGS(path),\n\n\tTP_STRUCT__entry(\n\t\t__string(path, path)\n\t),\n\n\tTP_fast_assign(\n\t\t__assign_str(path, path);\n\t),\n\n\tTP_printk(\"path='%s'\", __get_str(path))\n);\n\nDECLARE_EVENT_CLASS(nfs_xdr_event,\n\t\tTP_PROTO(\n\t\t\tconst struct xdr_stream *xdr,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(xdr, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned int, task_id)\n\t\t\t__field(unsigned int, client_id)\n\t\t\t__field(u32, xid)\n\t\t\t__field(int, version)\n\t\t\t__field(unsigned long, error)\n\t\t\t__string(program,\n\t\t\t\t xdr->rqst->rq_task->tk_client->cl_program->name)\n\t\t\t__string(procedure,\n\t\t\t\t xdr->rqst->rq_task->tk_msg.rpc_proc->p_name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct rpc_rqst *rqstp = xdr->rqst;\n\t\t\tconst struct rpc_task *task = rqstp->rq_task;\n\n\t\t\t__entry->task_id = task->tk_pid;\n\t\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t\t__entry->xid = be32_to_cpu(rqstp->rq_xid);\n\t\t\t__entry->version = task->tk_client->cl_vers;\n\t\t\t__entry->error = error;\n\t\t\t__assign_str(program,\n\t\t\t\t     task->tk_client->cl_program->name);\n\t\t\t__assign_str(procedure, task->tk_msg.rpc_proc->p_name);\n\t\t),\n\n\t\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t\t  \" xid=0x%08x %sv%d %s error=%ld (%s)\",\n\t\t\t__entry->task_id, __entry->client_id, __entry->xid,\n\t\t\t__get_str(program), __entry->version,\n\t\t\t__get_str(procedure), -__entry->error,\n\t\t\tshow_nfs_status(__entry->error)\n\t\t)\n);\n#define DEFINE_NFS_XDR_EVENT(name) \\\n\tDEFINE_EVENT(nfs_xdr_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct xdr_stream *xdr, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xdr, error))\nDEFINE_NFS_XDR_EVENT(nfs_xdr_status);\nDEFINE_NFS_XDR_EVENT(nfs_xdr_bad_filehandle);\n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE nfstrace\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}