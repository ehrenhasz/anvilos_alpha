{
  "module_name": "delegation.h",
  "hash_id": "d69055758ea5ac9f630e57d9c3741d17a9ebd5c07ee5e5b898fd99ca9bc197b3",
  "original_prompt": "Ingested from linux-6.6.14/fs/nfs/delegation.h",
  "human_readable_source": " \n \n#ifndef FS_NFS_DELEGATION_H\n#define FS_NFS_DELEGATION_H\n\n#if IS_ENABLED(CONFIG_NFS_V4)\n \nstruct nfs_delegation {\n\tstruct list_head super_list;\n\tconst struct cred *cred;\n\tstruct inode *inode;\n\tnfs4_stateid stateid;\n\tfmode_t type;\n\tunsigned long pagemod_limit;\n\t__u64 change_attr;\n\tunsigned long flags;\n\trefcount_t refcount;\n\tspinlock_t lock;\n\tstruct rcu_head rcu;\n};\n\nenum {\n\tNFS_DELEGATION_NEED_RECLAIM = 0,\n\tNFS_DELEGATION_RETURN,\n\tNFS_DELEGATION_RETURN_IF_CLOSED,\n\tNFS_DELEGATION_REFERENCED,\n\tNFS_DELEGATION_RETURNING,\n\tNFS_DELEGATION_REVOKED,\n\tNFS_DELEGATION_TEST_EXPIRED,\n\tNFS_DELEGATION_INODE_FREEING,\n\tNFS_DELEGATION_RETURN_DELAYED,\n};\n\nint nfs_inode_set_delegation(struct inode *inode, const struct cred *cred,\n\t\tfmode_t type, const nfs4_stateid *stateid, unsigned long pagemod_limit);\nvoid nfs_inode_reclaim_delegation(struct inode *inode, const struct cred *cred,\n\t\tfmode_t type, const nfs4_stateid *stateid, unsigned long pagemod_limit);\nint nfs4_inode_return_delegation(struct inode *inode);\nvoid nfs4_inode_return_delegation_on_close(struct inode *inode);\nint nfs_async_inode_return_delegation(struct inode *inode, const nfs4_stateid *stateid);\nvoid nfs_inode_evict_delegation(struct inode *inode);\n\nstruct inode *nfs_delegation_find_inode(struct nfs_client *clp, const struct nfs_fh *fhandle);\nvoid nfs_server_return_all_delegations(struct nfs_server *);\nvoid nfs_expire_all_delegations(struct nfs_client *clp);\nvoid nfs_expire_unused_delegation_types(struct nfs_client *clp, fmode_t flags);\nvoid nfs_expire_unreferenced_delegations(struct nfs_client *clp);\nint nfs_client_return_marked_delegations(struct nfs_client *clp);\nint nfs_delegations_present(struct nfs_client *clp);\nvoid nfs_remove_bad_delegation(struct inode *inode, const nfs4_stateid *stateid);\nvoid nfs_delegation_mark_returned(struct inode *inode, const nfs4_stateid *stateid);\n\nvoid nfs_delegation_mark_reclaim(struct nfs_client *clp);\nvoid nfs_delegation_reap_unclaimed(struct nfs_client *clp);\n\nvoid nfs_mark_test_expired_all_delegations(struct nfs_client *clp);\nvoid nfs_test_expired_all_delegations(struct nfs_client *clp);\nvoid nfs_reap_expired_delegations(struct nfs_client *clp);\n\n \nint nfs4_proc_delegreturn(struct inode *inode, const struct cred *cred, const nfs4_stateid *stateid, int issync);\nint nfs4_open_delegation_recall(struct nfs_open_context *ctx, struct nfs4_state *state, const nfs4_stateid *stateid);\nint nfs4_lock_delegation_recall(struct file_lock *fl, struct nfs4_state *state, const nfs4_stateid *stateid);\nbool nfs4_copy_delegation_stateid(struct inode *inode, fmode_t flags, nfs4_stateid *dst, const struct cred **cred);\nbool nfs4_refresh_delegation_stateid(nfs4_stateid *dst, struct inode *inode);\n\nstruct nfs_delegation *nfs4_get_valid_delegation(const struct inode *inode);\nvoid nfs_mark_delegation_referenced(struct nfs_delegation *delegation);\nint nfs4_have_delegation(struct inode *inode, fmode_t flags);\nint nfs4_check_delegation(struct inode *inode, fmode_t flags);\nbool nfs4_delegation_flush_on_close(const struct inode *inode);\nvoid nfs_inode_find_delegation_state_and_recover(struct inode *inode,\n\t\tconst nfs4_stateid *stateid);\nint nfs4_inode_make_writeable(struct inode *inode);\n\n#endif\n\nstatic inline int nfs_have_delegated_attributes(struct inode *inode)\n{\n\treturn NFS_PROTO(inode)->have_delegation(inode, FMODE_READ);\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}