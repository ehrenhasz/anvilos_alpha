{
  "module_name": "nfs4trace.h",
  "hash_id": "24bb6bf8569f3980b35dbe47f049b286deed6194a7b05a9ea0d2cd825cbc1856",
  "original_prompt": "Ingested from linux-6.6.14/fs/nfs/nfs4trace.h",
  "human_readable_source": " \n \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM nfs4\n\n#if !defined(_TRACE_NFS4_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_NFS4_H\n\n#include <linux/tracepoint.h>\n#include <trace/misc/sunrpc.h>\n\n#include <trace/misc/fs.h>\n#include <trace/misc/nfs.h>\n\n#define show_nfs_fattr_flags(valid) \\\n\t__print_flags((unsigned long)valid, \"|\", \\\n\t\t{ NFS_ATTR_FATTR_TYPE, \"TYPE\" }, \\\n\t\t{ NFS_ATTR_FATTR_MODE, \"MODE\" }, \\\n\t\t{ NFS_ATTR_FATTR_NLINK, \"NLINK\" }, \\\n\t\t{ NFS_ATTR_FATTR_OWNER, \"OWNER\" }, \\\n\t\t{ NFS_ATTR_FATTR_GROUP, \"GROUP\" }, \\\n\t\t{ NFS_ATTR_FATTR_RDEV, \"RDEV\" }, \\\n\t\t{ NFS_ATTR_FATTR_SIZE, \"SIZE\" }, \\\n\t\t{ NFS_ATTR_FATTR_FSID, \"FSID\" }, \\\n\t\t{ NFS_ATTR_FATTR_FILEID, \"FILEID\" }, \\\n\t\t{ NFS_ATTR_FATTR_ATIME, \"ATIME\" }, \\\n\t\t{ NFS_ATTR_FATTR_MTIME, \"MTIME\" }, \\\n\t\t{ NFS_ATTR_FATTR_CTIME, \"CTIME\" }, \\\n\t\t{ NFS_ATTR_FATTR_CHANGE, \"CHANGE\" }, \\\n\t\t{ NFS_ATTR_FATTR_OWNER_NAME, \"OWNER_NAME\" }, \\\n\t\t{ NFS_ATTR_FATTR_GROUP_NAME, \"GROUP_NAME\" })\n\nDECLARE_EVENT_CLASS(nfs4_clientid_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_client *clp,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(clp, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__string(dstaddr, clp->cl_hostname)\n\t\t\t__field(unsigned long, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__assign_str(dstaddr, clp->cl_hostname);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) dstaddr=%s\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\t__get_str(dstaddr)\n\t\t)\n);\n#define DEFINE_NFS4_CLIENTID_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_clientid_event, name,\t \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_client *clp, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(clp, error))\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_setclientid);\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_setclientid_confirm);\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_renew);\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_renew_async);\n#ifdef CONFIG_NFS_V4_1\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_exchange_id);\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_create_session);\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_destroy_session);\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_destroy_clientid);\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_bind_conn_to_session);\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_sequence);\nDEFINE_NFS4_CLIENTID_EVENT(nfs4_reclaim_complete);\n\nTRACE_EVENT(nfs4_sequence_done,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs4_session *session,\n\t\t\tconst struct nfs4_sequence_res *res\n\t\t),\n\t\tTP_ARGS(session, res),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned int, session)\n\t\t\t__field(unsigned int, slot_nr)\n\t\t\t__field(unsigned int, seq_nr)\n\t\t\t__field(unsigned int, highest_slotid)\n\t\t\t__field(unsigned int, target_highest_slotid)\n\t\t\t__field(unsigned long, status_flags)\n\t\t\t__field(unsigned long, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs4_slot *sr_slot = res->sr_slot;\n\t\t\t__entry->session = nfs_session_id_hash(&session->sess_id);\n\t\t\t__entry->slot_nr = sr_slot->slot_nr;\n\t\t\t__entry->seq_nr = sr_slot->seq_nr;\n\t\t\t__entry->highest_slotid = res->sr_highest_slotid;\n\t\t\t__entry->target_highest_slotid =\n\t\t\t\t\tres->sr_target_highest_slotid;\n\t\t\t__entry->status_flags = res->sr_status_flags;\n\t\t\t__entry->error = res->sr_status < 0 ?\n\t\t\t\t\t-res->sr_status : 0;\n\t\t),\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) session=0x%08x slot_nr=%u seq_nr=%u \"\n\t\t\t\"highest_slotid=%u target_highest_slotid=%u \"\n\t\t\t\"status_flags=0x%lx (%s)\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\t__entry->session,\n\t\t\t__entry->slot_nr,\n\t\t\t__entry->seq_nr,\n\t\t\t__entry->highest_slotid,\n\t\t\t__entry->target_highest_slotid,\n\t\t\t__entry->status_flags,\n\t\t\tshow_nfs4_seq4_status(__entry->status_flags)\n\t\t)\n);\n\nstruct cb_sequenceargs;\nstruct cb_sequenceres;\n\nTRACE_EVENT(nfs4_cb_sequence,\n\t\tTP_PROTO(\n\t\t\tconst struct cb_sequenceargs *args,\n\t\t\tconst struct cb_sequenceres *res,\n\t\t\t__be32 status\n\t\t),\n\t\tTP_ARGS(args, res, status),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned int, session)\n\t\t\t__field(unsigned int, slot_nr)\n\t\t\t__field(unsigned int, seq_nr)\n\t\t\t__field(unsigned int, highest_slotid)\n\t\t\t__field(unsigned int, cachethis)\n\t\t\t__field(unsigned long, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->session = nfs_session_id_hash(&args->csa_sessionid);\n\t\t\t__entry->slot_nr = args->csa_slotid;\n\t\t\t__entry->seq_nr = args->csa_sequenceid;\n\t\t\t__entry->highest_slotid = args->csa_highestslotid;\n\t\t\t__entry->cachethis = args->csa_cachethis;\n\t\t\t__entry->error = be32_to_cpu(status);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) session=0x%08x slot_nr=%u seq_nr=%u \"\n\t\t\t\"highest_slotid=%u\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\t__entry->session,\n\t\t\t__entry->slot_nr,\n\t\t\t__entry->seq_nr,\n\t\t\t__entry->highest_slotid\n\t\t)\n);\n\nTRACE_EVENT(nfs4_cb_seqid_err,\n\t\tTP_PROTO(\n\t\t\tconst struct cb_sequenceargs *args,\n\t\t\t__be32 status\n\t\t),\n\t\tTP_ARGS(args, status),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned int, session)\n\t\t\t__field(unsigned int, slot_nr)\n\t\t\t__field(unsigned int, seq_nr)\n\t\t\t__field(unsigned int, highest_slotid)\n\t\t\t__field(unsigned int, cachethis)\n\t\t\t__field(unsigned long, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->session = nfs_session_id_hash(&args->csa_sessionid);\n\t\t\t__entry->slot_nr = args->csa_slotid;\n\t\t\t__entry->seq_nr = args->csa_sequenceid;\n\t\t\t__entry->highest_slotid = args->csa_highestslotid;\n\t\t\t__entry->cachethis = args->csa_cachethis;\n\t\t\t__entry->error = be32_to_cpu(status);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) session=0x%08x slot_nr=%u seq_nr=%u \"\n\t\t\t\"highest_slotid=%u\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\t__entry->session,\n\t\t\t__entry->slot_nr,\n\t\t\t__entry->seq_nr,\n\t\t\t__entry->highest_slotid\n\t\t)\n);\n\nTRACE_EVENT(nfs4_cb_offload,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_fh *cb_fh,\n\t\t\tconst nfs4_stateid *cb_stateid,\n\t\t\tuint64_t cb_count,\n\t\t\tint cb_error,\n\t\t\tint cb_how_stable\n\t\t),\n\n\t\tTP_ARGS(cb_fh, cb_stateid, cb_count, cb_error,\n\t\t\tcb_how_stable),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(loff_t, cb_count)\n\t\t\t__field(int, cb_how)\n\t\t\t__field(int, cb_stateid_seq)\n\t\t\t__field(u32, cb_stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = cb_error < 0 ? -cb_error : 0;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(cb_fh);\n\t\t\t__entry->cb_stateid_seq =\n\t\t\t\tbe32_to_cpu(cb_stateid->seqid);\n\t\t\t__entry->cb_stateid_hash =\n\t\t\t\tnfs_stateid_hash(cb_stateid);\n\t\t\t__entry->cb_count = cb_count;\n\t\t\t__entry->cb_how = cb_how_stable;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fhandle=0x%08x cb_stateid=%d:0x%08x \"\n\t\t\t\"cb_count=%llu cb_how=%s\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\t__entry->fhandle,\n\t\t\t__entry->cb_stateid_seq, __entry->cb_stateid_hash,\n\t\t\t__entry->cb_count,\n\t\t\tshow_nfs_stable_how(__entry->cb_how)\n\t\t)\n);\n#endif  \n\nTRACE_EVENT(nfs4_setup_sequence,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs4_session *session,\n\t\t\tconst struct nfs4_sequence_args *args\n\t\t),\n\t\tTP_ARGS(session, args),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned int, session)\n\t\t\t__field(unsigned int, slot_nr)\n\t\t\t__field(unsigned int, seq_nr)\n\t\t\t__field(unsigned int, highest_used_slotid)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs4_slot *sa_slot = args->sa_slot;\n\t\t\t__entry->session = session ? nfs_session_id_hash(&session->sess_id) : 0;\n\t\t\t__entry->slot_nr = sa_slot->slot_nr;\n\t\t\t__entry->seq_nr = sa_slot->seq_nr;\n\t\t\t__entry->highest_used_slotid =\n\t\t\t\t\tsa_slot->table->highest_used_slotid;\n\t\t),\n\t\tTP_printk(\n\t\t\t\"session=0x%08x slot_nr=%u seq_nr=%u \"\n\t\t\t\"highest_used_slotid=%u\",\n\t\t\t__entry->session,\n\t\t\t__entry->slot_nr,\n\t\t\t__entry->seq_nr,\n\t\t\t__entry->highest_used_slotid\n\t\t)\n);\n\nTRACE_DEFINE_ENUM(NFS4CLNT_MANAGER_RUNNING);\nTRACE_DEFINE_ENUM(NFS4CLNT_CHECK_LEASE);\nTRACE_DEFINE_ENUM(NFS4CLNT_LEASE_EXPIRED);\nTRACE_DEFINE_ENUM(NFS4CLNT_RECLAIM_REBOOT);\nTRACE_DEFINE_ENUM(NFS4CLNT_RECLAIM_NOGRACE);\nTRACE_DEFINE_ENUM(NFS4CLNT_DELEGRETURN);\nTRACE_DEFINE_ENUM(NFS4CLNT_SESSION_RESET);\nTRACE_DEFINE_ENUM(NFS4CLNT_LEASE_CONFIRM);\nTRACE_DEFINE_ENUM(NFS4CLNT_SERVER_SCOPE_MISMATCH);\nTRACE_DEFINE_ENUM(NFS4CLNT_PURGE_STATE);\nTRACE_DEFINE_ENUM(NFS4CLNT_BIND_CONN_TO_SESSION);\nTRACE_DEFINE_ENUM(NFS4CLNT_MOVED);\nTRACE_DEFINE_ENUM(NFS4CLNT_LEASE_MOVED);\nTRACE_DEFINE_ENUM(NFS4CLNT_DELEGATION_EXPIRED);\nTRACE_DEFINE_ENUM(NFS4CLNT_RUN_MANAGER);\nTRACE_DEFINE_ENUM(NFS4CLNT_MANAGER_AVAILABLE);\nTRACE_DEFINE_ENUM(NFS4CLNT_RECALL_RUNNING);\nTRACE_DEFINE_ENUM(NFS4CLNT_RECALL_ANY_LAYOUT_READ);\nTRACE_DEFINE_ENUM(NFS4CLNT_RECALL_ANY_LAYOUT_RW);\nTRACE_DEFINE_ENUM(NFS4CLNT_DELEGRETURN_DELAYED);\n\n#define show_nfs4_clp_state(state) \\\n\t__print_flags(state, \"|\", \\\n\t{ BIT(NFS4CLNT_MANAGER_RUNNING),\t\"MANAGER_RUNNING\" }, \\\n\t{ BIT(NFS4CLNT_CHECK_LEASE),\t\t\"CHECK_LEASE\" }, \\\n\t{ BIT(NFS4CLNT_LEASE_EXPIRED),\t\"LEASE_EXPIRED\" }, \\\n\t{ BIT(NFS4CLNT_RECLAIM_REBOOT),\t\"RECLAIM_REBOOT\" }, \\\n\t{ BIT(NFS4CLNT_RECLAIM_NOGRACE),\t\"RECLAIM_NOGRACE\" }, \\\n\t{ BIT(NFS4CLNT_DELEGRETURN),\t\t\"DELEGRETURN\" }, \\\n\t{ BIT(NFS4CLNT_SESSION_RESET),\t\"SESSION_RESET\" }, \\\n\t{ BIT(NFS4CLNT_LEASE_CONFIRM),\t\"LEASE_CONFIRM\" }, \\\n\t{ BIT(NFS4CLNT_SERVER_SCOPE_MISMATCH),\t\"SERVER_SCOPE_MISMATCH\" }, \\\n\t{ BIT(NFS4CLNT_PURGE_STATE),\t\t\"PURGE_STATE\" }, \\\n\t{ BIT(NFS4CLNT_BIND_CONN_TO_SESSION),\t\"BIND_CONN_TO_SESSION\" }, \\\n\t{ BIT(NFS4CLNT_MOVED),\t\t\"MOVED\" }, \\\n\t{ BIT(NFS4CLNT_LEASE_MOVED),\t\t\"LEASE_MOVED\" }, \\\n\t{ BIT(NFS4CLNT_DELEGATION_EXPIRED),\t\"DELEGATION_EXPIRED\" }, \\\n\t{ BIT(NFS4CLNT_RUN_MANAGER),\t\t\"RUN_MANAGER\" }, \\\n\t{ BIT(NFS4CLNT_MANAGER_AVAILABLE), \"MANAGER_AVAILABLE\" }, \\\n\t{ BIT(NFS4CLNT_RECALL_RUNNING),\t\"RECALL_RUNNING\" }, \\\n\t{ BIT(NFS4CLNT_RECALL_ANY_LAYOUT_READ), \"RECALL_ANY_LAYOUT_READ\" }, \\\n\t{ BIT(NFS4CLNT_RECALL_ANY_LAYOUT_RW), \"RECALL_ANY_LAYOUT_RW\" }, \\\n\t{ BIT(NFS4CLNT_DELEGRETURN_DELAYED), \"DELERETURN_DELAYED\" })\n\nTRACE_EVENT(nfs4_state_mgr,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_client *clp\n\t\t),\n\n\t\tTP_ARGS(clp),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, state)\n\t\t\t__string(hostname, clp->cl_hostname)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->state = clp->cl_state;\n\t\t\t__assign_str(hostname, clp->cl_hostname);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"hostname=%s clp state=%s\", __get_str(hostname),\n\t\t\tshow_nfs4_clp_state(__entry->state)\n\t\t)\n)\n\nTRACE_EVENT(nfs4_state_mgr_failed,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_client *clp,\n\t\t\tconst char *section,\n\t\t\tint status\n\t\t),\n\n\t\tTP_ARGS(clp, section, status),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(unsigned long, state)\n\t\t\t__string(hostname, clp->cl_hostname)\n\t\t\t__string(section, section)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = status < 0 ? -status : 0;\n\t\t\t__entry->state = clp->cl_state;\n\t\t\t__assign_str(hostname, clp->cl_hostname);\n\t\t\t__assign_str(section, section);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"hostname=%s clp state=%s error=%ld (%s) section=%s\",\n\t\t\t__get_str(hostname),\n\t\t\tshow_nfs4_clp_state(__entry->state), -__entry->error,\n\t\t\tshow_nfs4_status(__entry->error), __get_str(section)\n\n\t\t)\n)\n\nTRACE_EVENT(nfs4_xdr_bad_operation,\n\t\tTP_PROTO(\n\t\t\tconst struct xdr_stream *xdr,\n\t\t\tu32 op,\n\t\t\tu32 expected\n\t\t),\n\n\t\tTP_ARGS(xdr, op, expected),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned int, task_id)\n\t\t\t__field(unsigned int, client_id)\n\t\t\t__field(u32, xid)\n\t\t\t__field(u32, op)\n\t\t\t__field(u32, expected)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct rpc_rqst *rqstp = xdr->rqst;\n\t\t\tconst struct rpc_task *task = rqstp->rq_task;\n\n\t\t\t__entry->task_id = task->tk_pid;\n\t\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t\t__entry->xid = be32_to_cpu(rqstp->rq_xid);\n\t\t\t__entry->op = op;\n\t\t\t__entry->expected = expected;\n\t\t),\n\n\t\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t\t  \" xid=0x%08x operation=%u, expected=%u\",\n\t\t\t__entry->task_id, __entry->client_id, __entry->xid,\n\t\t\t__entry->op, __entry->expected\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs4_xdr_event,\n\t\tTP_PROTO(\n\t\t\tconst struct xdr_stream *xdr,\n\t\t\tu32 op,\n\t\t\tu32 error\n\t\t),\n\n\t\tTP_ARGS(xdr, op, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned int, task_id)\n\t\t\t__field(unsigned int, client_id)\n\t\t\t__field(u32, xid)\n\t\t\t__field(u32, op)\n\t\t\t__field(unsigned long, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct rpc_rqst *rqstp = xdr->rqst;\n\t\t\tconst struct rpc_task *task = rqstp->rq_task;\n\n\t\t\t__entry->task_id = task->tk_pid;\n\t\t\t__entry->client_id = task->tk_client->cl_clid;\n\t\t\t__entry->xid = be32_to_cpu(rqstp->rq_xid);\n\t\t\t__entry->op = op;\n\t\t\t__entry->error = error;\n\t\t),\n\n\t\tTP_printk(SUNRPC_TRACE_TASK_SPECIFIER\n\t\t\t  \" xid=0x%08x error=%ld (%s) operation=%u\",\n\t\t\t__entry->task_id, __entry->client_id, __entry->xid,\n\t\t\t-__entry->error, show_nfs4_status(__entry->error),\n\t\t\t__entry->op\n\t\t)\n);\n#define DEFINE_NFS4_XDR_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_xdr_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct xdr_stream *xdr, \\\n\t\t\t\tu32 op, \\\n\t\t\t\tu32 error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xdr, op, error))\nDEFINE_NFS4_XDR_EVENT(nfs4_xdr_status);\nDEFINE_NFS4_XDR_EVENT(nfs4_xdr_bad_filehandle);\n\nDECLARE_EVENT_CLASS(nfs4_cb_error_class,\n\t\tTP_PROTO(\n\t\t\t__be32 xid,\n\t\t\tu32 cb_ident\n\t\t),\n\n\t\tTP_ARGS(xid, cb_ident),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(u32, xid)\n\t\t\t__field(u32, cbident)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->xid = be32_to_cpu(xid);\n\t\t\t__entry->cbident = cb_ident;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"xid=0x%08x cb_ident=0x%08x\",\n\t\t\t__entry->xid, __entry->cbident\n\t\t)\n);\n\n#define DEFINE_CB_ERROR_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_cb_error_class, nfs_cb_##name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\t__be32 xid, \\\n\t\t\t\tu32 cb_ident \\\n\t\t\t), \\\n\t\t\tTP_ARGS(xid, cb_ident))\n\nDEFINE_CB_ERROR_EVENT(no_clp);\nDEFINE_CB_ERROR_EVENT(badprinc);\n\nDECLARE_EVENT_CLASS(nfs4_open_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_open_context *ctx,\n\t\t\tint flags,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(ctx, flags, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(unsigned long, flags)\n\t\t\t__field(unsigned long, fmode)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, ctx->dentry->d_name.name)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t\t__field(int, openstateid_seq)\n\t\t\t__field(u32, openstateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs4_state *state = ctx->state;\n\t\t\tconst struct inode *inode = NULL;\n\n\t\t\t__entry->error = -error;\n\t\t\t__entry->flags = flags;\n\t\t\t__entry->fmode = (__force unsigned long)ctx->mode;\n\t\t\t__entry->dev = ctx->dentry->d_sb->s_dev;\n\t\t\tif (!IS_ERR_OR_NULL(state)) {\n\t\t\t\tinode = state->inode;\n\t\t\t\t__entry->stateid_seq =\n\t\t\t\t\tbe32_to_cpu(state->stateid.seqid);\n\t\t\t\t__entry->stateid_hash =\n\t\t\t\t\tnfs_stateid_hash(&state->stateid);\n\t\t\t\t__entry->openstateid_seq =\n\t\t\t\t\tbe32_to_cpu(state->open_stateid.seqid);\n\t\t\t\t__entry->openstateid_hash =\n\t\t\t\t\tnfs_stateid_hash(&state->open_stateid);\n\t\t\t} else {\n\t\t\t\t__entry->stateid_seq = 0;\n\t\t\t\t__entry->stateid_hash = 0;\n\t\t\t\t__entry->openstateid_seq = 0;\n\t\t\t\t__entry->openstateid_hash = 0;\n\t\t\t}\n\t\t\tif (inode != NULL) {\n\t\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t} else {\n\t\t\t\t__entry->fileid = 0;\n\t\t\t\t__entry->fhandle = 0;\n\t\t\t}\n\t\t\t__entry->dir = NFS_FILEID(d_inode(ctx->dentry->d_parent));\n\t\t\t__assign_str(name, ctx->dentry->d_name.name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) flags=%lu (%s) fmode=%s \"\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"name=%02x:%02x:%llu/%s stateid=%d:0x%08x \"\n\t\t\t\"openstateid=%d:0x%08x\",\n\t\t\t -__entry->error,\n\t\t\t show_nfs4_status(__entry->error),\n\t\t\t __entry->flags,\n\t\t\t show_fs_fcntl_open_flags(__entry->flags),\n\t\t\t show_fs_fmode_flags(__entry->fmode),\n\t\t\t MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t (unsigned long long)__entry->fileid,\n\t\t\t __entry->fhandle,\n\t\t\t MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t (unsigned long long)__entry->dir,\n\t\t\t __get_str(name),\n\t\t\t __entry->stateid_seq, __entry->stateid_hash,\n\t\t\t __entry->openstateid_seq, __entry->openstateid_hash\n\t\t)\n);\n\n#define DEFINE_NFS4_OPEN_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_open_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_open_context *ctx, \\\n\t\t\t\tint flags, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(ctx, flags, error))\nDEFINE_NFS4_OPEN_EVENT(nfs4_open_reclaim);\nDEFINE_NFS4_OPEN_EVENT(nfs4_open_expired);\nDEFINE_NFS4_OPEN_EVENT(nfs4_open_file);\n\nTRACE_EVENT(nfs4_cached_open,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs4_state *state\n\t\t),\n\t\tTP_ARGS(state),\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(unsigned int, fmode)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = state->inode;\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->fmode = (__force unsigned int)state->state;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(state->stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&state->stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fmode=%s fileid=%02x:%02x:%llu \"\n\t\t\t\"fhandle=0x%08x stateid=%d:0x%08x\",\n\t\t\t__entry->fmode ?  show_fs_fmode_flags(__entry->fmode) :\n\t\t\t\t\t  \"closed\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash\n\t\t)\n);\n\nTRACE_EVENT(nfs4_close,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs4_state *state,\n\t\t\tconst struct nfs_closeargs *args,\n\t\t\tconst struct nfs_closeres *res,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(state, args, res, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(unsigned int, fmode)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = state->inode;\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->fmode = (__force unsigned int)state->state;\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(args->stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&args->stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fmode=%s fileid=%02x:%02x:%llu \"\n\t\t\t\"fhandle=0x%08x openstateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\t__entry->fmode ?  show_fs_fmode_flags(__entry->fmode) :\n\t\t\t\t\t  \"closed\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs4_lock_event,\n\t\tTP_PROTO(\n\t\t\tconst struct file_lock *request,\n\t\t\tconst struct nfs4_state *state,\n\t\t\tint cmd,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(request, state, cmd, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(unsigned long, cmd)\n\t\t\t__field(unsigned long, type)\n\t\t\t__field(loff_t, start)\n\t\t\t__field(loff_t, end)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = state->inode;\n\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->cmd = cmd;\n\t\t\t__entry->type = request->fl_type;\n\t\t\t__entry->start = request->fl_start;\n\t\t\t__entry->end = request->fl_end;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(state->stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&state->stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) cmd=%s:%s range=%lld:%lld \"\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tshow_fs_fcntl_cmd(__entry->cmd),\n\t\t\tshow_fs_fcntl_lock_type(__entry->type),\n\t\t\t(long long)__entry->start,\n\t\t\t(long long)__entry->end,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash\n\t\t)\n);\n\n#define DEFINE_NFS4_LOCK_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_lock_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct file_lock *request, \\\n\t\t\t\tconst struct nfs4_state *state, \\\n\t\t\t\tint cmd, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(request, state, cmd, error))\nDEFINE_NFS4_LOCK_EVENT(nfs4_get_lock);\nDEFINE_NFS4_LOCK_EVENT(nfs4_unlock);\n\nTRACE_EVENT(nfs4_set_lock,\n\t\tTP_PROTO(\n\t\t\tconst struct file_lock *request,\n\t\t\tconst struct nfs4_state *state,\n\t\t\tconst nfs4_stateid *lockstateid,\n\t\t\tint cmd,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(request, state, lockstateid, cmd, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(unsigned long, cmd)\n\t\t\t__field(unsigned long, type)\n\t\t\t__field(loff_t, start)\n\t\t\t__field(loff_t, end)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t\t__field(int, lockstateid_seq)\n\t\t\t__field(u32, lockstateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = state->inode;\n\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->cmd = cmd;\n\t\t\t__entry->type = request->fl_type;\n\t\t\t__entry->start = request->fl_start;\n\t\t\t__entry->end = request->fl_end;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(state->stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&state->stateid);\n\t\t\t__entry->lockstateid_seq =\n\t\t\t\tbe32_to_cpu(lockstateid->seqid);\n\t\t\t__entry->lockstateid_hash =\n\t\t\t\tnfs_stateid_hash(lockstateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) cmd=%s:%s range=%lld:%lld \"\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x lockstateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tshow_fs_fcntl_cmd(__entry->cmd),\n\t\t\tshow_fs_fcntl_lock_type(__entry->type),\n\t\t\t(long long)__entry->start,\n\t\t\t(long long)__entry->end,\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\t__entry->lockstateid_seq, __entry->lockstateid_hash\n\t\t)\n);\n\nTRACE_DEFINE_ENUM(LK_STATE_IN_USE);\nTRACE_DEFINE_ENUM(NFS_DELEGATED_STATE);\nTRACE_DEFINE_ENUM(NFS_OPEN_STATE);\nTRACE_DEFINE_ENUM(NFS_O_RDONLY_STATE);\nTRACE_DEFINE_ENUM(NFS_O_WRONLY_STATE);\nTRACE_DEFINE_ENUM(NFS_O_RDWR_STATE);\nTRACE_DEFINE_ENUM(NFS_STATE_RECLAIM_REBOOT);\nTRACE_DEFINE_ENUM(NFS_STATE_RECLAIM_NOGRACE);\nTRACE_DEFINE_ENUM(NFS_STATE_POSIX_LOCKS);\nTRACE_DEFINE_ENUM(NFS_STATE_RECOVERY_FAILED);\nTRACE_DEFINE_ENUM(NFS_STATE_MAY_NOTIFY_LOCK);\nTRACE_DEFINE_ENUM(NFS_STATE_CHANGE_WAIT);\nTRACE_DEFINE_ENUM(NFS_CLNT_DST_SSC_COPY_STATE);\nTRACE_DEFINE_ENUM(NFS_CLNT_SRC_SSC_COPY_STATE);\nTRACE_DEFINE_ENUM(NFS_SRV_SSC_COPY_STATE);\n\n#define show_nfs4_state_flags(flags) \\\n\t__print_flags(flags, \"|\", \\\n\t\t{ LK_STATE_IN_USE,\t\t\"IN_USE\" }, \\\n\t\t{ NFS_DELEGATED_STATE,\t\t\"DELEGATED\" }, \\\n\t\t{ NFS_OPEN_STATE,\t\t\"OPEN\" }, \\\n\t\t{ NFS_O_RDONLY_STATE,\t\t\"O_RDONLY\" }, \\\n\t\t{ NFS_O_WRONLY_STATE,\t\t\"O_WRONLY\" }, \\\n\t\t{ NFS_O_RDWR_STATE,\t\t\"O_RDWR\" }, \\\n\t\t{ NFS_STATE_RECLAIM_REBOOT,\t\"RECLAIM_REBOOT\" }, \\\n\t\t{ NFS_STATE_RECLAIM_NOGRACE,\t\"RECLAIM_NOGRACE\" }, \\\n\t\t{ NFS_STATE_POSIX_LOCKS,\t\"POSIX_LOCKS\" }, \\\n\t\t{ NFS_STATE_RECOVERY_FAILED,\t\"RECOVERY_FAILED\" }, \\\n\t\t{ NFS_STATE_MAY_NOTIFY_LOCK,\t\"MAY_NOTIFY_LOCK\" }, \\\n\t\t{ NFS_STATE_CHANGE_WAIT,\t\"CHANGE_WAIT\" }, \\\n\t\t{ NFS_CLNT_DST_SSC_COPY_STATE,\t\"CLNT_DST_SSC_COPY\" }, \\\n\t\t{ NFS_CLNT_SRC_SSC_COPY_STATE,\t\"CLNT_SRC_SSC_COPY\" }, \\\n\t\t{ NFS_SRV_SSC_COPY_STATE,\t\"SRV_SSC_COPY\" })\n\n#define show_nfs4_lock_flags(flags) \\\n\t__print_flags(flags, \"|\", \\\n\t\t{ BIT(NFS_LOCK_INITIALIZED),\t\"INITIALIZED\" }, \\\n\t\t{ BIT(NFS_LOCK_LOST),\t\t\"LOST\" })\n\nTRACE_EVENT(nfs4_state_lock_reclaim,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs4_state *state,\n\t\t\tconst struct nfs4_lock_state *lock\n\t\t),\n\n\t\tTP_ARGS(state, lock),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(unsigned long, state_flags)\n\t\t\t__field(unsigned long, lock_flags)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = state->inode;\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->state_flags = state->flags;\n\t\t\t__entry->lock_flags = lock->ls_flags;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(state->stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&state->stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x state_flags=%s lock_flags=%s\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid, __entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\tshow_nfs4_state_flags(__entry->state_flags),\n\t\t\tshow_nfs4_lock_flags(__entry->lock_flags)\n\t\t)\n)\n\nDECLARE_EVENT_CLASS(nfs4_set_delegation_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tfmode_t fmode\n\t\t),\n\n\t\tTP_ARGS(inode, fmode),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(unsigned int, fmode)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->fmode = (__force unsigned int)fmode;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"fmode=%s fileid=%02x:%02x:%llu fhandle=0x%08x\",\n\t\t\tshow_fs_fmode_flags(__entry->fmode),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle\n\t\t)\n);\n#define DEFINE_NFS4_SET_DELEGATION_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_set_delegation_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tfmode_t fmode \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, fmode))\nDEFINE_NFS4_SET_DELEGATION_EVENT(nfs4_set_delegation);\nDEFINE_NFS4_SET_DELEGATION_EVENT(nfs4_reclaim_delegation);\n\nTRACE_EVENT(nfs4_delegreturn_exit,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs4_delegreturnargs *args,\n\t\t\tconst struct nfs4_delegreturnres *res,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(args, res, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = res->server->s_dev;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(args->fhandle);\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(args->stateid->seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(args->stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) dev=%02x:%02x fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash\n\t\t)\n);\n\n#ifdef CONFIG_NFS_V4_1\nDECLARE_EVENT_CLASS(nfs4_test_stateid_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs4_state *state,\n\t\t\tconst struct nfs4_lock_state *lsp,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(state, lsp, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = state->inode;\n\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(state->stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&state->stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash\n\t\t)\n);\n\n#define DEFINE_NFS4_TEST_STATEID_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_test_stateid_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs4_state *state, \\\n\t\t\t\tconst struct nfs4_lock_state *lsp, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(state, lsp, error))\nDEFINE_NFS4_TEST_STATEID_EVENT(nfs4_test_delegation_stateid);\nDEFINE_NFS4_TEST_STATEID_EVENT(nfs4_test_open_stateid);\nDEFINE_NFS4_TEST_STATEID_EVENT(nfs4_test_lock_stateid);\n#endif  \n\nDECLARE_EVENT_CLASS(nfs4_lookup_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *dir,\n\t\t\tconst struct qstr *name,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(dir, name, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u64, dir)\n\t\t\t__string(name, name->name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = dir->i_sb->s_dev;\n\t\t\t__entry->dir = NFS_FILEID(dir);\n\t\t\t__entry->error = -error;\n\t\t\t__assign_str(name, name->name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) name=%02x:%02x:%llu/%s\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->dir,\n\t\t\t__get_str(name)\n\t\t)\n);\n\n#define DEFINE_NFS4_LOOKUP_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_lookup_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *dir, \\\n\t\t\t\tconst struct qstr *name, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(dir, name, error))\n\nDEFINE_NFS4_LOOKUP_EVENT(nfs4_lookup);\nDEFINE_NFS4_LOOKUP_EVENT(nfs4_symlink);\nDEFINE_NFS4_LOOKUP_EVENT(nfs4_mkdir);\nDEFINE_NFS4_LOOKUP_EVENT(nfs4_mknod);\nDEFINE_NFS4_LOOKUP_EVENT(nfs4_remove);\nDEFINE_NFS4_LOOKUP_EVENT(nfs4_get_fs_locations);\nDEFINE_NFS4_LOOKUP_EVENT(nfs4_secinfo);\n\nTRACE_EVENT(nfs4_lookupp,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, ino)\n\t\t\t__field(unsigned long, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->ino = NFS_FILEID(inode);\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) inode=%02x:%02x:%llu\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->ino\n\t\t)\n);\n\nTRACE_EVENT(nfs4_rename,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *olddir,\n\t\t\tconst struct qstr *oldname,\n\t\t\tconst struct inode *newdir,\n\t\t\tconst struct qstr *newname,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(olddir, oldname, newdir, newname, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u64, olddir)\n\t\t\t__string(oldname, oldname->name)\n\t\t\t__field(u64, newdir)\n\t\t\t__string(newname, newname->name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = olddir->i_sb->s_dev;\n\t\t\t__entry->olddir = NFS_FILEID(olddir);\n\t\t\t__entry->newdir = NFS_FILEID(newdir);\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__assign_str(oldname, oldname->name);\n\t\t\t__assign_str(newname, newname->name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) oldname=%02x:%02x:%llu/%s \"\n\t\t\t\"newname=%02x:%02x:%llu/%s\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->olddir,\n\t\t\t__get_str(oldname),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->newdir,\n\t\t\t__get_str(newname)\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs4_inode_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(unsigned long, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle\n\t\t)\n);\n\n#define DEFINE_NFS4_INODE_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_inode_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, error))\n\nDEFINE_NFS4_INODE_EVENT(nfs4_access);\nDEFINE_NFS4_INODE_EVENT(nfs4_readlink);\nDEFINE_NFS4_INODE_EVENT(nfs4_readdir);\nDEFINE_NFS4_INODE_EVENT(nfs4_get_acl);\nDEFINE_NFS4_INODE_EVENT(nfs4_set_acl);\n#ifdef CONFIG_NFS_V4_SECURITY_LABEL\nDEFINE_NFS4_INODE_EVENT(nfs4_get_security_label);\nDEFINE_NFS4_INODE_EVENT(nfs4_set_security_label);\n#endif  \n\nDECLARE_EVENT_CLASS(nfs4_inode_stateid_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tconst nfs4_stateid *stateid,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, stateid, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(stateid->seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash\n\t\t)\n);\n\n#define DEFINE_NFS4_INODE_STATEID_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_inode_stateid_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tconst nfs4_stateid *stateid, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, stateid, error))\n\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_setattr);\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_delegreturn);\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_open_stateid_update);\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_open_stateid_update_wait);\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_close_stateid_update_wait);\n\nDECLARE_EVENT_CLASS(nfs4_getattr_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_server *server,\n\t\t\tconst struct nfs_fh *fhandle,\n\t\t\tconst struct nfs_fattr *fattr,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(server, fhandle, fattr, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(unsigned int, valid)\n\t\t\t__field(unsigned long, error)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = server->s_dev;\n\t\t\t__entry->valid = fattr->valid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fhandle);\n\t\t\t__entry->fileid = (fattr->valid & NFS_ATTR_FATTR_FILEID) ? fattr->fileid : 0;\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"valid=%s\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\tshow_nfs_fattr_flags(__entry->valid)\n\t\t)\n);\n\n#define DEFINE_NFS4_GETATTR_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_getattr_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_server *server, \\\n\t\t\t\tconst struct nfs_fh *fhandle, \\\n\t\t\t\tconst struct nfs_fattr *fattr, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(server, fhandle, fattr, error))\nDEFINE_NFS4_GETATTR_EVENT(nfs4_getattr);\nDEFINE_NFS4_GETATTR_EVENT(nfs4_lookup_root);\nDEFINE_NFS4_GETATTR_EVENT(nfs4_fsinfo);\n\nDECLARE_EVENT_CLASS(nfs4_inode_callback_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_client *clp,\n\t\t\tconst struct nfs_fh *fhandle,\n\t\t\tconst struct inode *inode,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(clp, fhandle, inode, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__string(dstaddr, clp ? clp->cl_hostname : \"unknown\")\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fhandle);\n\t\t\tif (!IS_ERR_OR_NULL(inode)) {\n\t\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t} else {\n\t\t\t\t__entry->fileid = 0;\n\t\t\t\t__entry->dev = 0;\n\t\t\t}\n\t\t\t__assign_str(dstaddr, clp ? clp->cl_hostname : \"unknown\");\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"dstaddr=%s\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__get_str(dstaddr)\n\t\t)\n);\n\n#define DEFINE_NFS4_INODE_CALLBACK_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_inode_callback_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_client *clp, \\\n\t\t\t\tconst struct nfs_fh *fhandle, \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(clp, fhandle, inode, error))\nDEFINE_NFS4_INODE_CALLBACK_EVENT(nfs4_cb_getattr);\n\nDECLARE_EVENT_CLASS(nfs4_inode_stateid_callback_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_client *clp,\n\t\t\tconst struct nfs_fh *fhandle,\n\t\t\tconst struct inode *inode,\n\t\t\tconst nfs4_stateid *stateid,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(clp, fhandle, inode, stateid, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__string(dstaddr, clp ? clp->cl_hostname : \"unknown\")\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fhandle);\n\t\t\tif (!IS_ERR_OR_NULL(inode)) {\n\t\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t} else {\n\t\t\t\t__entry->fileid = 0;\n\t\t\t\t__entry->dev = 0;\n\t\t\t}\n\t\t\t__assign_str(dstaddr, clp ? clp->cl_hostname : \"unknown\");\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(stateid->seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x dstaddr=%s\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\t__get_str(dstaddr)\n\t\t)\n);\n\n#define DEFINE_NFS4_INODE_STATEID_CALLBACK_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_inode_stateid_callback_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_client *clp, \\\n\t\t\t\tconst struct nfs_fh *fhandle, \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tconst nfs4_stateid *stateid, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(clp, fhandle, inode, stateid, error))\nDEFINE_NFS4_INODE_STATEID_CALLBACK_EVENT(nfs4_cb_recall);\nDEFINE_NFS4_INODE_STATEID_CALLBACK_EVENT(nfs4_cb_layoutrecall_file);\n\nDECLARE_EVENT_CLASS(nfs4_idmap_event,\n\t\tTP_PROTO(\n\t\t\tconst char *name,\n\t\t\tint len,\n\t\t\tu32 id,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(name, len, id, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u32, id)\n\t\t\t__dynamic_array(char, name, len > 0 ? len + 1 : 1)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tif (len < 0)\n\t\t\t\tlen = 0;\n\t\t\t__entry->error = error < 0 ? error : 0;\n\t\t\t__entry->id = id;\n\t\t\tmemcpy(__get_str(name), name, len);\n\t\t\t__get_str(name)[len] = 0;\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) id=%u name=%s\",\n\t\t\t-__entry->error, show_nfs4_status(__entry->error),\n\t\t\t__entry->id,\n\t\t\t__get_str(name)\n\t\t)\n);\n#define DEFINE_NFS4_IDMAP_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_idmap_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst char *name, \\\n\t\t\t\tint len, \\\n\t\t\t\tu32 id, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(name, len, id, error))\nDEFINE_NFS4_IDMAP_EVENT(nfs4_map_name_to_uid);\nDEFINE_NFS4_IDMAP_EVENT(nfs4_map_group_to_gid);\nDEFINE_NFS4_IDMAP_EVENT(nfs4_map_uid_to_name);\nDEFINE_NFS4_IDMAP_EVENT(nfs4_map_gid_to_group);\n\n#ifdef CONFIG_NFS_V4_1\n#define NFS4_LSEG_LAYOUT_STATEID_HASH(lseg) \\\n\t(lseg ? nfs_stateid_hash(&lseg->pls_layout->plh_stateid) : 0)\n#else\n#define NFS4_LSEG_LAYOUT_STATEID_HASH(lseg) (0)\n#endif\n\nDECLARE_EVENT_CLASS(nfs4_read_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_pgio_header *hdr,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(hdr, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, arg_count)\n\t\t\t__field(u32, res_count)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t\t__field(int, layoutstateid_seq)\n\t\t\t__field(u32, layoutstateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = hdr->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = hdr->args.fh ?\n\t\t\t\t\t\t  hdr->args.fh : &nfsi->fh;\n\t\t\tconst struct nfs4_state *state =\n\t\t\t\thdr->args.context->state;\n\t\t\tconst struct pnfs_layout_segment *lseg = hdr->lseg;\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t\t__entry->offset = hdr->args.offset;\n\t\t\t__entry->arg_count = hdr->args.count;\n\t\t\t__entry->res_count = hdr->res.count;\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(state->stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&state->stateid);\n\t\t\t__entry->layoutstateid_seq = lseg ? lseg->pls_seq : 0;\n\t\t\t__entry->layoutstateid_hash =\n\t\t\t\tNFS4_LSEG_LAYOUT_STATEID_HASH(lseg);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u res=%u stateid=%d:0x%08x \"\n\t\t\t\"layoutstateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset,\n\t\t\t__entry->arg_count, __entry->res_count,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\t__entry->layoutstateid_seq, __entry->layoutstateid_hash\n\t\t)\n);\n#define DEFINE_NFS4_READ_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_read_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_pgio_header *hdr, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(hdr, error))\nDEFINE_NFS4_READ_EVENT(nfs4_read);\n#ifdef CONFIG_NFS_V4_1\nDEFINE_NFS4_READ_EVENT(nfs4_pnfs_read);\n#endif  \n\nDECLARE_EVENT_CLASS(nfs4_write_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_pgio_header *hdr,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(hdr, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, arg_count)\n\t\t\t__field(u32, res_count)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t\t__field(int, layoutstateid_seq)\n\t\t\t__field(u32, layoutstateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = hdr->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = hdr->args.fh ?\n\t\t\t\t\t\t  hdr->args.fh : &nfsi->fh;\n\t\t\tconst struct nfs4_state *state =\n\t\t\t\thdr->args.context->state;\n\t\t\tconst struct pnfs_layout_segment *lseg = hdr->lseg;\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t\t__entry->offset = hdr->args.offset;\n\t\t\t__entry->arg_count = hdr->args.count;\n\t\t\t__entry->res_count = hdr->res.count;\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(state->stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&state->stateid);\n\t\t\t__entry->layoutstateid_seq = lseg ? lseg->pls_seq : 0;\n\t\t\t__entry->layoutstateid_hash =\n\t\t\t\tNFS4_LSEG_LAYOUT_STATEID_HASH(lseg);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u res=%u stateid=%d:0x%08x \"\n\t\t\t\"layoutstateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset,\n\t\t\t__entry->arg_count, __entry->res_count,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\t__entry->layoutstateid_seq, __entry->layoutstateid_hash\n\t\t)\n);\n\n#define DEFINE_NFS4_WRITE_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_write_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_pgio_header *hdr, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(hdr, error))\nDEFINE_NFS4_WRITE_EVENT(nfs4_write);\n#ifdef CONFIG_NFS_V4_1\nDEFINE_NFS4_WRITE_EVENT(nfs4_pnfs_write);\n#endif  \n\nDECLARE_EVENT_CLASS(nfs4_commit_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_commit_data *data,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(data, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, count)\n\t\t\t__field(int, layoutstateid_seq)\n\t\t\t__field(u32, layoutstateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = data->inode;\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = data->args.fh ?\n\t\t\t\t\t\t  data->args.fh : &nfsi->fh;\n\t\t\tconst struct pnfs_layout_segment *lseg = data->lseg;\n\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t\t__entry->offset = data->args.offset;\n\t\t\t__entry->count = data->args.count;\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->layoutstateid_seq = lseg ? lseg->pls_seq : 0;\n\t\t\t__entry->layoutstateid_hash =\n\t\t\t\tNFS4_LSEG_LAYOUT_STATEID_HASH(lseg);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%lld count=%u layoutstateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t(long long)__entry->offset,\n\t\t\t__entry->count,\n\t\t\t__entry->layoutstateid_seq, __entry->layoutstateid_hash\n\t\t)\n);\n#define DEFINE_NFS4_COMMIT_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_commit_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_commit_data *data, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(data, error))\nDEFINE_NFS4_COMMIT_EVENT(nfs4_commit);\n#ifdef CONFIG_NFS_V4_1\nDEFINE_NFS4_COMMIT_EVENT(nfs4_pnfs_commit_ds);\n\nTRACE_EVENT(nfs4_layoutget,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_open_context *ctx,\n\t\t\tconst struct pnfs_layout_range *args,\n\t\t\tconst struct pnfs_layout_range *res,\n\t\t\tconst nfs4_stateid *layout_stateid,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(ctx, args, res, layout_stateid, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u32, iomode)\n\t\t\t__field(u64, offset)\n\t\t\t__field(u64, count)\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t\t__field(int, layoutstateid_seq)\n\t\t\t__field(u32, layoutstateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = d_inode(ctx->dentry);\n\t\t\tconst struct nfs4_state *state = ctx->state;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->iomode = args->iomode;\n\t\t\t__entry->offset = args->offset;\n\t\t\t__entry->count = args->length;\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(state->stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&state->stateid);\n\t\t\tif (!error) {\n\t\t\t\t__entry->layoutstateid_seq =\n\t\t\t\tbe32_to_cpu(layout_stateid->seqid);\n\t\t\t\t__entry->layoutstateid_hash =\n\t\t\t\tnfs_stateid_hash(layout_stateid);\n\t\t\t} else {\n\t\t\t\t__entry->layoutstateid_seq = 0;\n\t\t\t\t__entry->layoutstateid_hash = 0;\n\t\t\t}\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"iomode=%s offset=%llu count=%llu stateid=%d:0x%08x \"\n\t\t\t\"layoutstateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\tshow_pnfs_layout_iomode(__entry->iomode),\n\t\t\t(unsigned long long)__entry->offset,\n\t\t\t(unsigned long long)__entry->count,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\t__entry->layoutstateid_seq, __entry->layoutstateid_hash\n\t\t)\n);\n\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_layoutcommit);\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_layoutreturn);\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_layoutreturn_on_close);\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_layouterror);\nDEFINE_NFS4_INODE_STATEID_EVENT(nfs4_layoutstats);\n\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_UNKNOWN);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_NO_PNFS);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_RD_ZEROLEN);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_MDSTHRESH);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_NOMEM);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_BULK_RECALL);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_IO_TEST_FAIL);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_FOUND_CACHED);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_RETURN);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_BLOCKED);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_INVALID_OPEN);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_RETRY);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_SEND_LAYOUTGET);\nTRACE_DEFINE_ENUM(PNFS_UPDATE_LAYOUT_EXIT);\n\n#define show_pnfs_update_layout_reason(reason)\t\t\t\t\\\n\t__print_symbolic(reason,\t\t\t\t\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_UNKNOWN, \"unknown\" },\t\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_NO_PNFS, \"no pnfs\" },\t\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_RD_ZEROLEN, \"read+zerolen\" },\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_MDSTHRESH, \"mdsthresh\" },\t\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_NOMEM, \"nomem\" },\t\t\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_BULK_RECALL, \"bulk recall\" },\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_IO_TEST_FAIL, \"io test fail\" },\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_FOUND_CACHED, \"found cached\" },\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_RETURN, \"layoutreturn\" },\t\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_BLOCKED, \"layouts blocked\" },\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_INVALID_OPEN, \"invalid open\" },\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_RETRY, \"retrying\" },\t\\\n\t\t{ PNFS_UPDATE_LAYOUT_SEND_LAYOUTGET, \"sent layoutget\" }, \\\n\t\t{ PNFS_UPDATE_LAYOUT_EXIT, \"exit\" })\n\nTRACE_EVENT(pnfs_update_layout,\n\t\tTP_PROTO(struct inode *inode,\n\t\t\tloff_t pos,\n\t\t\tu64 count,\n\t\t\tenum pnfs_iomode iomode,\n\t\t\tstruct pnfs_layout_hdr *lo,\n\t\t\tstruct pnfs_layout_segment *lseg,\n\t\t\tenum pnfs_update_layout_reason reason\n\t\t),\n\t\tTP_ARGS(inode, pos, count, iomode, lo, lseg, reason),\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(loff_t, pos)\n\t\t\t__field(u64, count)\n\t\t\t__field(enum pnfs_iomode, iomode)\n\t\t\t__field(int, layoutstateid_seq)\n\t\t\t__field(u32, layoutstateid_hash)\n\t\t\t__field(long, lseg)\n\t\t\t__field(enum pnfs_update_layout_reason, reason)\n\t\t),\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->pos = pos;\n\t\t\t__entry->count = count;\n\t\t\t__entry->iomode = iomode;\n\t\t\t__entry->reason = reason;\n\t\t\tif (lo != NULL && pnfs_layout_is_valid(lo)) {\n\t\t\t\t__entry->layoutstateid_seq =\n\t\t\t\tbe32_to_cpu(lo->plh_stateid.seqid);\n\t\t\t\t__entry->layoutstateid_hash =\n\t\t\t\tnfs_stateid_hash(&lo->plh_stateid);\n\t\t\t} else {\n\t\t\t\t__entry->layoutstateid_seq = 0;\n\t\t\t\t__entry->layoutstateid_hash = 0;\n\t\t\t}\n\t\t\t__entry->lseg = (long)lseg;\n\t\t),\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"iomode=%s pos=%llu count=%llu \"\n\t\t\t\"layoutstateid=%d:0x%08x lseg=0x%lx (%s)\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\tshow_pnfs_layout_iomode(__entry->iomode),\n\t\t\t(unsigned long long)__entry->pos,\n\t\t\t(unsigned long long)__entry->count,\n\t\t\t__entry->layoutstateid_seq, __entry->layoutstateid_hash,\n\t\t\t__entry->lseg,\n\t\t\tshow_pnfs_update_layout_reason(__entry->reason)\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(pnfs_layout_event,\n\t\tTP_PROTO(struct inode *inode,\n\t\t\tloff_t pos,\n\t\t\tu64 count,\n\t\t\tenum pnfs_iomode iomode,\n\t\t\tstruct pnfs_layout_hdr *lo,\n\t\t\tstruct pnfs_layout_segment *lseg\n\t\t),\n\t\tTP_ARGS(inode, pos, count, iomode, lo, lseg),\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(loff_t, pos)\n\t\t\t__field(u64, count)\n\t\t\t__field(enum pnfs_iomode, iomode)\n\t\t\t__field(int, layoutstateid_seq)\n\t\t\t__field(u32, layoutstateid_hash)\n\t\t\t__field(long, lseg)\n\t\t),\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->pos = pos;\n\t\t\t__entry->count = count;\n\t\t\t__entry->iomode = iomode;\n\t\t\tif (lo != NULL && pnfs_layout_is_valid(lo)) {\n\t\t\t\t__entry->layoutstateid_seq =\n\t\t\t\tbe32_to_cpu(lo->plh_stateid.seqid);\n\t\t\t\t__entry->layoutstateid_hash =\n\t\t\t\tnfs_stateid_hash(&lo->plh_stateid);\n\t\t\t} else {\n\t\t\t\t__entry->layoutstateid_seq = 0;\n\t\t\t\t__entry->layoutstateid_hash = 0;\n\t\t\t}\n\t\t\t__entry->lseg = (long)lseg;\n\t\t),\n\t\tTP_printk(\n\t\t\t\"fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"iomode=%s pos=%llu count=%llu \"\n\t\t\t\"layoutstateid=%d:0x%08x lseg=0x%lx\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\tshow_pnfs_layout_iomode(__entry->iomode),\n\t\t\t(unsigned long long)__entry->pos,\n\t\t\t(unsigned long long)__entry->count,\n\t\t\t__entry->layoutstateid_seq, __entry->layoutstateid_hash,\n\t\t\t__entry->lseg\n\t\t)\n);\n\n#define DEFINE_PNFS_LAYOUT_EVENT(name) \\\n\tDEFINE_EVENT(pnfs_layout_event, name, \\\n\t\tTP_PROTO(struct inode *inode, \\\n\t\t\tloff_t pos, \\\n\t\t\tu64 count, \\\n\t\t\tenum pnfs_iomode iomode, \\\n\t\t\tstruct pnfs_layout_hdr *lo, \\\n\t\t\tstruct pnfs_layout_segment *lseg \\\n\t\t), \\\n\t\tTP_ARGS(inode, pos, count, iomode, lo, lseg))\n\nDEFINE_PNFS_LAYOUT_EVENT(pnfs_mds_fallback_pg_init_read);\nDEFINE_PNFS_LAYOUT_EVENT(pnfs_mds_fallback_pg_init_write);\nDEFINE_PNFS_LAYOUT_EVENT(pnfs_mds_fallback_pg_get_mirror_count);\nDEFINE_PNFS_LAYOUT_EVENT(pnfs_mds_fallback_read_done);\nDEFINE_PNFS_LAYOUT_EVENT(pnfs_mds_fallback_write_done);\nDEFINE_PNFS_LAYOUT_EVENT(pnfs_mds_fallback_read_pagelist);\nDEFINE_PNFS_LAYOUT_EVENT(pnfs_mds_fallback_write_pagelist);\n\nDECLARE_EVENT_CLASS(nfs4_deviceid_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_client *clp,\n\t\t\tconst struct nfs4_deviceid *deviceid\n\t\t),\n\n\t\tTP_ARGS(clp, deviceid),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__string(dstaddr, clp->cl_hostname)\n\t\t\t__array(unsigned char, deviceid, NFS4_DEVICEID4_SIZE)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__assign_str(dstaddr, clp->cl_hostname);\n\t\t\tmemcpy(__entry->deviceid, deviceid->data,\n\t\t\t       NFS4_DEVICEID4_SIZE);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"deviceid=%s, dstaddr=%s\",\n\t\t\t__print_hex(__entry->deviceid, NFS4_DEVICEID4_SIZE),\n\t\t\t__get_str(dstaddr)\n\t\t)\n);\n#define DEFINE_PNFS_DEVICEID_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_deviceid_event, name, \\\n\t\t\tTP_PROTO(const struct nfs_client *clp, \\\n\t\t\t\tconst struct nfs4_deviceid *deviceid \\\n\t\t\t), \\\n\t\t\tTP_ARGS(clp, deviceid))\nDEFINE_PNFS_DEVICEID_EVENT(nfs4_deviceid_free);\n\nDECLARE_EVENT_CLASS(nfs4_deviceid_status,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_server *server,\n\t\t\tconst struct nfs4_deviceid *deviceid,\n\t\t\tint status\n\t\t),\n\n\t\tTP_ARGS(server, deviceid, status),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(int, status)\n\t\t\t__string(dstaddr, server->nfs_client->cl_hostname)\n\t\t\t__array(unsigned char, deviceid, NFS4_DEVICEID4_SIZE)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->dev = server->s_dev;\n\t\t\t__entry->status = status;\n\t\t\t__assign_str(dstaddr, server->nfs_client->cl_hostname);\n\t\t\tmemcpy(__entry->deviceid, deviceid->data,\n\t\t\t       NFS4_DEVICEID4_SIZE);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"dev=%02x:%02x: deviceid=%s, dstaddr=%s, status=%d\",\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t__print_hex(__entry->deviceid, NFS4_DEVICEID4_SIZE),\n\t\t\t__get_str(dstaddr),\n\t\t\t__entry->status\n\t\t)\n);\n#define DEFINE_PNFS_DEVICEID_STATUS(name) \\\n\tDEFINE_EVENT(nfs4_deviceid_status, name, \\\n\t\t\tTP_PROTO(const struct nfs_server *server, \\\n\t\t\t\tconst struct nfs4_deviceid *deviceid, \\\n\t\t\t\tint status \\\n\t\t\t), \\\n\t\t\tTP_ARGS(server, deviceid, status))\nDEFINE_PNFS_DEVICEID_STATUS(nfs4_getdeviceinfo);\nDEFINE_PNFS_DEVICEID_STATUS(nfs4_find_deviceid);\n\nDECLARE_EVENT_CLASS(nfs4_flexfiles_io_event,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_pgio_header *hdr\n\t\t),\n\n\t\tTP_ARGS(hdr),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, count)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t\t__string(dstaddr, hdr->ds_clp ?\n\t\t\t\trpc_peeraddr2str(hdr->ds_clp->cl_rpcclient,\n\t\t\t\t\tRPC_DISPLAY_ADDR) : \"unknown\")\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = hdr->inode;\n\n\t\t\t__entry->error = hdr->res.op_status;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(hdr->args.fh);\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->offset = hdr->args.offset;\n\t\t\t__entry->count = hdr->args.count;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(hdr->args.stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&hdr->args.stateid);\n\t\t\t__assign_str(dstaddr, hdr->ds_clp ?\n\t\t\t\trpc_peeraddr2str(hdr->ds_clp->cl_rpcclient,\n\t\t\t\t\tRPC_DISPLAY_ADDR) : \"unknown\");\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%llu count=%u stateid=%d:0x%08x dstaddr=%s\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->offset, __entry->count,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\t__get_str(dstaddr)\n\t\t)\n);\n\n#define DEFINE_NFS4_FLEXFILES_IO_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_flexfiles_io_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct nfs_pgio_header *hdr \\\n\t\t\t), \\\n\t\t\tTP_ARGS(hdr))\nDEFINE_NFS4_FLEXFILES_IO_EVENT(ff_layout_read_error);\nDEFINE_NFS4_FLEXFILES_IO_EVENT(ff_layout_write_error);\n\nTRACE_EVENT(ff_layout_commit_error,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs_commit_data *data\n\t\t),\n\n\t\tTP_ARGS(data),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(u32, count)\n\t\t\t__string(dstaddr, data->ds_clp ?\n\t\t\t\trpc_peeraddr2str(data->ds_clp->cl_rpcclient,\n\t\t\t\t\tRPC_DISPLAY_ADDR) : \"unknown\")\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct inode *inode = data->inode;\n\n\t\t\t__entry->error = data->res.op_status;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(data->args.fh);\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->offset = data->args.offset;\n\t\t\t__entry->count = data->args.count;\n\t\t\t__assign_str(dstaddr, data->ds_clp ?\n\t\t\t\trpc_peeraddr2str(data->ds_clp->cl_rpcclient,\n\t\t\t\t\tRPC_DISPLAY_ADDR) : \"unknown\");\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"offset=%llu count=%u dstaddr=%s\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->offset, __entry->count,\n\t\t\t__get_str(dstaddr)\n\t\t)\n);\n\n#ifdef CONFIG_NFS_V4_2\nTRACE_DEFINE_ENUM(NFS4_CONTENT_DATA);\nTRACE_DEFINE_ENUM(NFS4_CONTENT_HOLE);\n\n#define show_llseek_mode(what)\t\t\t\\\n\t__print_symbolic(what,\t\t\t\\\n\t\t{ NFS4_CONTENT_DATA, \"DATA\" },\t\t\\\n\t\t{ NFS4_CONTENT_HOLE, \"HOLE\" })\n\nTRACE_EVENT(nfs4_llseek,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tconst struct nfs42_seek_args *args,\n\t\t\tconst struct nfs42_seek_res *res,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, args, res, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u32, fileid)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t\t__field(loff_t, offset_s)\n\t\t\t__field(u32, what)\n\t\t\t__field(loff_t, offset_r)\n\t\t\t__field(u32, eof)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\t\t\tconst struct nfs_fh *fh = args->sa_fh;\n\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(fh);\n\t\t\t__entry->offset_s = args->sa_offset;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(args->sa_stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&args->sa_stateid);\n\t\t\t__entry->what = args->sa_what;\n\t\t\tif (error) {\n\t\t\t\t__entry->error = -error;\n\t\t\t\t__entry->offset_r = 0;\n\t\t\t\t__entry->eof = 0;\n\t\t\t} else {\n\t\t\t\t__entry->error = 0;\n\t\t\t\t__entry->offset_r = res->sr_offset;\n\t\t\t\t__entry->eof = res->sr_eof;\n\t\t\t}\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x offset_s=%llu what=%s \"\n\t\t\t\"offset_r=%llu eof=%u\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\t__entry->offset_s,\n\t\t\tshow_llseek_mode(__entry->what),\n\t\t\t__entry->offset_r,\n\t\t\t__entry->eof\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs4_sparse_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tconst struct nfs42_falloc_args *args,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, args, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(loff_t, offset)\n\t\t\t__field(loff_t, len)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->offset = args->falloc_offset;\n\t\t\t__entry->len = args->falloc_length;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(args->falloc_stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&args->falloc_stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x offset=%llu len=%llu\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\t(long long)__entry->offset,\n\t\t\t(long long)__entry->len\n\t\t)\n);\n#define DEFINE_NFS4_SPARSE_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_sparse_event, name, \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tconst struct nfs42_falloc_args *args, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, args, error))\nDEFINE_NFS4_SPARSE_EVENT(nfs4_fallocate);\nDEFINE_NFS4_SPARSE_EVENT(nfs4_deallocate);\n\nTRACE_EVENT(nfs4_copy,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *src_inode,\n\t\t\tconst struct inode *dst_inode,\n\t\t\tconst struct nfs42_copy_args *args,\n\t\t\tconst struct nfs42_copy_res *res,\n\t\t\tconst struct nl4_server *nss,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(src_inode, dst_inode, args, res, nss, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u32, src_fhandle)\n\t\t\t__field(u32, src_fileid)\n\t\t\t__field(u32, dst_fhandle)\n\t\t\t__field(u32, dst_fileid)\n\t\t\t__field(dev_t, src_dev)\n\t\t\t__field(dev_t, dst_dev)\n\t\t\t__field(int, src_stateid_seq)\n\t\t\t__field(u32, src_stateid_hash)\n\t\t\t__field(int, dst_stateid_seq)\n\t\t\t__field(u32, dst_stateid_hash)\n\t\t\t__field(loff_t, src_offset)\n\t\t\t__field(loff_t, dst_offset)\n\t\t\t__field(bool, sync)\n\t\t\t__field(loff_t, len)\n\t\t\t__field(int, res_stateid_seq)\n\t\t\t__field(u32, res_stateid_hash)\n\t\t\t__field(loff_t, res_count)\n\t\t\t__field(bool, res_sync)\n\t\t\t__field(bool, res_cons)\n\t\t\t__field(bool, intra)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *src_nfsi = NFS_I(src_inode);\n\t\t\tconst struct nfs_inode *dst_nfsi = NFS_I(dst_inode);\n\n\t\t\t__entry->src_fileid = src_nfsi->fileid;\n\t\t\t__entry->src_dev = src_inode->i_sb->s_dev;\n\t\t\t__entry->src_fhandle = nfs_fhandle_hash(args->src_fh);\n\t\t\t__entry->src_offset = args->src_pos;\n\t\t\t__entry->dst_fileid = dst_nfsi->fileid;\n\t\t\t__entry->dst_dev = dst_inode->i_sb->s_dev;\n\t\t\t__entry->dst_fhandle = nfs_fhandle_hash(args->dst_fh);\n\t\t\t__entry->dst_offset = args->dst_pos;\n\t\t\t__entry->len = args->count;\n\t\t\t__entry->sync = args->sync;\n\t\t\t__entry->src_stateid_seq =\n\t\t\t\tbe32_to_cpu(args->src_stateid.seqid);\n\t\t\t__entry->src_stateid_hash =\n\t\t\t\tnfs_stateid_hash(&args->src_stateid);\n\t\t\t__entry->dst_stateid_seq =\n\t\t\t\tbe32_to_cpu(args->dst_stateid.seqid);\n\t\t\t__entry->dst_stateid_hash =\n\t\t\t\tnfs_stateid_hash(&args->dst_stateid);\n\t\t\t__entry->intra = nss ? 0 : 1;\n\t\t\tif (error) {\n\t\t\t\t__entry->error = -error;\n\t\t\t\t__entry->res_stateid_seq = 0;\n\t\t\t\t__entry->res_stateid_hash = 0;\n\t\t\t\t__entry->res_count = 0;\n\t\t\t\t__entry->res_sync = 0;\n\t\t\t\t__entry->res_cons = 0;\n\t\t\t} else {\n\t\t\t\t__entry->error = 0;\n\t\t\t\t__entry->res_stateid_seq =\n\t\t\t\t\tbe32_to_cpu(res->write_res.stateid.seqid);\n\t\t\t\t__entry->res_stateid_hash =\n\t\t\t\t\tnfs_stateid_hash(&res->write_res.stateid);\n\t\t\t\t__entry->res_count = res->write_res.count;\n\t\t\t\t__entry->res_sync = res->synchronous;\n\t\t\t\t__entry->res_cons = res->consecutive;\n\t\t\t}\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) intra=%d src_fileid=%02x:%02x:%llu \"\n\t\t\t\"src_fhandle=0x%08x dst_fileid=%02x:%02x:%llu \"\n\t\t\t\"dst_fhandle=0x%08x src_stateid=%d:0x%08x \"\n\t\t\t\"dst_stateid=%d:0x%08x src_offset=%llu dst_offset=%llu \"\n\t\t\t\"len=%llu sync=%d cb_stateid=%d:0x%08x res_sync=%d \"\n\t\t\t\"res_cons=%d res_count=%llu\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\t__entry->intra,\n\t\t\tMAJOR(__entry->src_dev), MINOR(__entry->src_dev),\n\t\t\t(unsigned long long)__entry->src_fileid,\n\t\t\t__entry->src_fhandle,\n\t\t\tMAJOR(__entry->dst_dev), MINOR(__entry->dst_dev),\n\t\t\t(unsigned long long)__entry->dst_fileid,\n\t\t\t__entry->dst_fhandle,\n\t\t\t__entry->src_stateid_seq, __entry->src_stateid_hash,\n\t\t\t__entry->dst_stateid_seq, __entry->dst_stateid_hash,\n\t\t\t__entry->src_offset,\n\t\t\t__entry->dst_offset,\n\t\t\t__entry->len,\n\t\t\t__entry->sync,\n\t\t\t__entry->res_stateid_seq, __entry->res_stateid_hash,\n\t\t\t__entry->res_sync,\n\t\t\t__entry->res_cons,\n\t\t\t__entry->res_count\n\t\t)\n);\n\nTRACE_EVENT(nfs4_clone,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *src_inode,\n\t\t\tconst struct inode *dst_inode,\n\t\t\tconst struct nfs42_clone_args *args,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(src_inode, dst_inode, args, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u32, src_fhandle)\n\t\t\t__field(u32, src_fileid)\n\t\t\t__field(u32, dst_fhandle)\n\t\t\t__field(u32, dst_fileid)\n\t\t\t__field(dev_t, src_dev)\n\t\t\t__field(dev_t, dst_dev)\n\t\t\t__field(loff_t, src_offset)\n\t\t\t__field(loff_t, dst_offset)\n\t\t\t__field(int, src_stateid_seq)\n\t\t\t__field(u32, src_stateid_hash)\n\t\t\t__field(int, dst_stateid_seq)\n\t\t\t__field(u32, dst_stateid_hash)\n\t\t\t__field(loff_t, len)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *src_nfsi = NFS_I(src_inode);\n\t\t\tconst struct nfs_inode *dst_nfsi = NFS_I(dst_inode);\n\n\t\t\t__entry->src_fileid = src_nfsi->fileid;\n\t\t\t__entry->src_dev = src_inode->i_sb->s_dev;\n\t\t\t__entry->src_fhandle = nfs_fhandle_hash(args->src_fh);\n\t\t\t__entry->src_offset = args->src_offset;\n\t\t\t__entry->dst_fileid = dst_nfsi->fileid;\n\t\t\t__entry->dst_dev = dst_inode->i_sb->s_dev;\n\t\t\t__entry->dst_fhandle = nfs_fhandle_hash(args->dst_fh);\n\t\t\t__entry->dst_offset = args->dst_offset;\n\t\t\t__entry->len = args->count;\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->src_stateid_seq =\n\t\t\t\tbe32_to_cpu(args->src_stateid.seqid);\n\t\t\t__entry->src_stateid_hash =\n\t\t\t\tnfs_stateid_hash(&args->src_stateid);\n\t\t\t__entry->dst_stateid_seq =\n\t\t\t\tbe32_to_cpu(args->dst_stateid.seqid);\n\t\t\t__entry->dst_stateid_hash =\n\t\t\t\tnfs_stateid_hash(&args->dst_stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) src_fileid=%02x:%02x:%llu \"\n\t\t\t\"src_fhandle=0x%08x dst_fileid=%02x:%02x:%llu \"\n\t\t\t\"dst_fhandle=0x%08x src_stateid=%d:0x%08x \"\n\t\t\t\"dst_stateid=%d:0x%08x src_offset=%llu \"\n\t\t\t\"dst_offset=%llu len=%llu\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->src_dev), MINOR(__entry->src_dev),\n\t\t\t(unsigned long long)__entry->src_fileid,\n\t\t\t__entry->src_fhandle,\n\t\t\tMAJOR(__entry->dst_dev), MINOR(__entry->dst_dev),\n\t\t\t(unsigned long long)__entry->dst_fileid,\n\t\t\t__entry->dst_fhandle,\n\t\t\t__entry->src_stateid_seq, __entry->src_stateid_hash,\n\t\t\t__entry->dst_stateid_seq, __entry->dst_stateid_hash,\n\t\t\t__entry->src_offset,\n\t\t\t__entry->dst_offset,\n\t\t\t__entry->len\n\t\t)\n);\n\nTRACE_EVENT(nfs4_copy_notify,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tconst struct nfs42_copy_notify_args *args,\n\t\t\tconst struct nfs42_copy_notify_res *res,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, args, res, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u32, fileid)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t\t__field(int, res_stateid_seq)\n\t\t\t__field(u32, res_stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\tconst struct nfs_inode *nfsi = NFS_I(inode);\n\n\t\t\t__entry->fileid = nfsi->fileid;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fhandle = nfs_fhandle_hash(args->cna_src_fh);\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(args->cna_src_stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&args->cna_src_stateid);\n\t\t\tif (error) {\n\t\t\t\t__entry->error = -error;\n\t\t\t\t__entry->res_stateid_seq = 0;\n\t\t\t\t__entry->res_stateid_hash = 0;\n\t\t\t} else {\n\t\t\t\t__entry->error = 0;\n\t\t\t\t__entry->res_stateid_seq =\n\t\t\t\t\tbe32_to_cpu(res->cnr_stateid.seqid);\n\t\t\t\t__entry->res_stateid_hash =\n\t\t\t\t\tnfs_stateid_hash(&res->cnr_stateid);\n\t\t\t}\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"stateid=%d:0x%08x res_stateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash,\n\t\t\t__entry->res_stateid_seq, __entry->res_stateid_hash\n\t\t)\n);\n\nTRACE_EVENT(nfs4_offload_cancel,\n\t\tTP_PROTO(\n\t\t\tconst struct nfs42_offload_status_args *args,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(args, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(int, stateid_seq)\n\t\t\t__field(u32, stateid_hash)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->fhandle = nfs_fhandle_hash(args->osa_src_fh);\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->stateid_seq =\n\t\t\t\tbe32_to_cpu(args->osa_stateid.seqid);\n\t\t\t__entry->stateid_hash =\n\t\t\t\tnfs_stateid_hash(&args->osa_stateid);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fhandle=0x%08x stateid=%d:0x%08x\",\n\t\t\t-__entry->error,\n\t\t\tshow_nfs4_status(__entry->error),\n\t\t\t__entry->fhandle,\n\t\t\t__entry->stateid_seq, __entry->stateid_hash\n\t\t)\n);\n\nDECLARE_EVENT_CLASS(nfs4_xattr_event,\n\t\tTP_PROTO(\n\t\t\tconst struct inode *inode,\n\t\t\tconst char *name,\n\t\t\tint error\n\t\t),\n\n\t\tTP_ARGS(inode, name, error),\n\n\t\tTP_STRUCT__entry(\n\t\t\t__field(unsigned long, error)\n\t\t\t__field(dev_t, dev)\n\t\t\t__field(u32, fhandle)\n\t\t\t__field(u64, fileid)\n\t\t\t__string(name, name)\n\t\t),\n\n\t\tTP_fast_assign(\n\t\t\t__entry->error = error < 0 ? -error : 0;\n\t\t\t__entry->dev = inode->i_sb->s_dev;\n\t\t\t__entry->fileid = NFS_FILEID(inode);\n\t\t\t__entry->fhandle = nfs_fhandle_hash(NFS_FH(inode));\n\t\t\t__assign_str(name, name);\n\t\t),\n\n\t\tTP_printk(\n\t\t\t\"error=%ld (%s) fileid=%02x:%02x:%llu fhandle=0x%08x \"\n\t\t\t\"name=%s\",\n\t\t\t-__entry->error, show_nfs4_status(__entry->error),\n\t\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t\t(unsigned long long)__entry->fileid,\n\t\t\t__entry->fhandle, __get_str(name)\n\t\t)\n);\n#define DEFINE_NFS4_XATTR_EVENT(name) \\\n\tDEFINE_EVENT(nfs4_xattr_event, name,  \\\n\t\t\tTP_PROTO( \\\n\t\t\t\tconst struct inode *inode, \\\n\t\t\t\tconst char *name, \\\n\t\t\t\tint error \\\n\t\t\t), \\\n\t\t\tTP_ARGS(inode, name, error))\nDEFINE_NFS4_XATTR_EVENT(nfs4_getxattr);\nDEFINE_NFS4_XATTR_EVENT(nfs4_setxattr);\nDEFINE_NFS4_XATTR_EVENT(nfs4_removexattr);\n\nDEFINE_NFS4_INODE_EVENT(nfs4_listxattr);\n#endif  \n\n#endif  \n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE nfs4trace\n \n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}