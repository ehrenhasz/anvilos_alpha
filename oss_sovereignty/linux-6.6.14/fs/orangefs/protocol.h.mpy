{
  "module_name": "protocol.h",
  "hash_id": "e42b6095abe2d9645381b2e27f3bdfbcc0ab0f95aed9cd0686f046ab82458c50",
  "original_prompt": "Ingested from linux-6.6.14/fs/orangefs/protocol.h",
  "human_readable_source": " \n#include <linux/kernel.h>\n#include <linux/types.h>\n#include <linux/spinlock_types.h>\n#include <linux/slab.h>\n#include <linux/ioctl.h>\n\n \n\n \nstruct orangefs_khandle {\n\tunsigned char u[16];\n}  __aligned(8);\n\n \nstruct orangefs_object_kref {\n\tstruct orangefs_khandle khandle;\n\t__s32 fs_id;\n\t__s32 __pad1;\n};\n\n \nstatic inline int ORANGEFS_khandle_cmp(const struct orangefs_khandle *kh1,\n\t\t\t\t   const struct orangefs_khandle *kh2)\n{\n\tint i;\n\n\tfor (i = 15; i >= 0; i--) {\n\t\tif (kh1->u[i] > kh2->u[i])\n\t\t\treturn 1;\n\t\tif (kh1->u[i] < kh2->u[i])\n\t\t\treturn -1;\n\t}\n\n\treturn 0;\n}\n\nstatic inline void ORANGEFS_khandle_to(const struct orangefs_khandle *kh,\n\t\t\t\t   void *p, int size)\n{\n\n\tmemcpy(p, kh->u, 16);\n\tmemset(p + 16, 0, size - 16);\n\n}\n\nstatic inline void ORANGEFS_khandle_from(struct orangefs_khandle *kh,\n\t\t\t\t     void *p, int size)\n{\n\tmemset(kh, 0, 16);\n\tmemcpy(kh->u, p, 16);\n\n}\n\n \n\n#define ORANGEFS_SUPER_MAGIC 0x20030528\n\n \n\n \n\n \n#define ORANGEFS_ERROR_BIT (1 << 30)\n\n \n#define ORANGEFS_NON_ERRNO_ERROR_BIT (1 << 29)\n\n \n#define ORANGEFS_ERROR_CLASS_BITS 0x380\n\n \n#define ORANGEFS_ERROR_NUMBER_BITS 0x7f\n\n \n\n \n#define ORANGEFS_ECANCEL    (1|ORANGEFS_NON_ERRNO_ERROR_BIT|ORANGEFS_ERROR_BIT)\n#define ORANGEFS_EDEVINIT   (2|ORANGEFS_NON_ERRNO_ERROR_BIT|ORANGEFS_ERROR_BIT)\n#define ORANGEFS_EDETAIL    (3|ORANGEFS_NON_ERRNO_ERROR_BIT|ORANGEFS_ERROR_BIT)\n#define ORANGEFS_EHOSTNTFD  (4|ORANGEFS_NON_ERRNO_ERROR_BIT|ORANGEFS_ERROR_BIT)\n#define ORANGEFS_EADDRNTFD  (5|ORANGEFS_NON_ERRNO_ERROR_BIT|ORANGEFS_ERROR_BIT)\n#define ORANGEFS_ENORECVR   (6|ORANGEFS_NON_ERRNO_ERROR_BIT|ORANGEFS_ERROR_BIT)\n#define ORANGEFS_ETRYAGAIN  (7|ORANGEFS_NON_ERRNO_ERROR_BIT|ORANGEFS_ERROR_BIT)\n#define ORANGEFS_ENOTPVFS   (8|ORANGEFS_NON_ERRNO_ERROR_BIT|ORANGEFS_ERROR_BIT)\n#define ORANGEFS_ESECURITY  (9|ORANGEFS_NON_ERRNO_ERROR_BIT|ORANGEFS_ERROR_BIT)\n\n \n#define ORANGEFS_O_EXECUTE (1 << 0)\n#define ORANGEFS_O_WRITE   (1 << 1)\n#define ORANGEFS_O_READ    (1 << 2)\n#define ORANGEFS_G_EXECUTE (1 << 3)\n#define ORANGEFS_G_WRITE   (1 << 4)\n#define ORANGEFS_G_READ    (1 << 5)\n#define ORANGEFS_U_EXECUTE (1 << 6)\n#define ORANGEFS_U_WRITE   (1 << 7)\n#define ORANGEFS_U_READ    (1 << 8)\n \n#define ORANGEFS_G_SGID    (1 << 10)\n#define ORANGEFS_U_SUID    (1 << 11)\n\n#define ORANGEFS_ITERATE_START    2147483646\n#define ORANGEFS_ITERATE_END      2147483645\n#define ORANGEFS_IMMUTABLE_FL FS_IMMUTABLE_FL\n#define ORANGEFS_APPEND_FL    FS_APPEND_FL\n#define ORANGEFS_NOATIME_FL   FS_NOATIME_FL\n#define ORANGEFS_MIRROR_FL    0x01000000ULL\n#define ORANGEFS_FS_ID_NULL       ((__s32)0)\n#define ORANGEFS_ATTR_SYS_UID                   (1 << 0)\n#define ORANGEFS_ATTR_SYS_GID                   (1 << 1)\n#define ORANGEFS_ATTR_SYS_PERM                  (1 << 2)\n#define ORANGEFS_ATTR_SYS_ATIME                 (1 << 3)\n#define ORANGEFS_ATTR_SYS_CTIME                 (1 << 4)\n#define ORANGEFS_ATTR_SYS_MTIME                 (1 << 5)\n#define ORANGEFS_ATTR_SYS_TYPE                  (1 << 6)\n#define ORANGEFS_ATTR_SYS_ATIME_SET             (1 << 7)\n#define ORANGEFS_ATTR_SYS_MTIME_SET             (1 << 8)\n#define ORANGEFS_ATTR_SYS_SIZE                  (1 << 20)\n#define ORANGEFS_ATTR_SYS_LNK_TARGET            (1 << 24)\n#define ORANGEFS_ATTR_SYS_DFILE_COUNT           (1 << 25)\n#define ORANGEFS_ATTR_SYS_DIRENT_COUNT          (1 << 26)\n#define ORANGEFS_ATTR_SYS_BLKSIZE               (1 << 28)\n#define ORANGEFS_ATTR_SYS_MIRROR_COPIES_COUNT   (1 << 29)\n#define ORANGEFS_ATTR_SYS_COMMON_ALL\t\\\n\t(ORANGEFS_ATTR_SYS_UID\t|\t\\\n\t ORANGEFS_ATTR_SYS_GID\t|\t\\\n\t ORANGEFS_ATTR_SYS_PERM\t|\t\\\n\t ORANGEFS_ATTR_SYS_ATIME\t|\t\\\n\t ORANGEFS_ATTR_SYS_CTIME\t|\t\\\n\t ORANGEFS_ATTR_SYS_MTIME\t|\t\\\n\t ORANGEFS_ATTR_SYS_TYPE)\n\n#define ORANGEFS_ATTR_SYS_ALL_SETABLE\t\t\\\n(ORANGEFS_ATTR_SYS_COMMON_ALL-ORANGEFS_ATTR_SYS_TYPE)\n\n#define ORANGEFS_ATTR_SYS_ALL_NOHINT\t\t\t\\\n\t(ORANGEFS_ATTR_SYS_COMMON_ALL\t\t|\t\\\n\t ORANGEFS_ATTR_SYS_SIZE\t\t\t|\t\\\n\t ORANGEFS_ATTR_SYS_LNK_TARGET\t\t|\t\\\n\t ORANGEFS_ATTR_SYS_DFILE_COUNT\t\t|\t\\\n\t ORANGEFS_ATTR_SYS_MIRROR_COPIES_COUNT\t|\t\\\n\t ORANGEFS_ATTR_SYS_DIRENT_COUNT\t\t|\t\\\n\t ORANGEFS_ATTR_SYS_BLKSIZE)\n\n#define ORANGEFS_XATTR_REPLACE 0x2\n#define ORANGEFS_XATTR_CREATE  0x1\n#define ORANGEFS_MAX_SERVER_ADDR_LEN 256\n#define ORANGEFS_NAME_MAX                256\n \n#define ORANGEFS_MAX_XATTR_NAMELEN   ORANGEFS_NAME_MAX\t \n#define ORANGEFS_MAX_XATTR_VALUELEN  8192\t \n#define ORANGEFS_MAX_XATTR_LISTLEN   16\t \n \nenum ORANGEFS_io_type {\n\tORANGEFS_IO_READ = 1,\n\tORANGEFS_IO_WRITE = 2\n};\n\n \nenum orangefs_ds_type {\n\tORANGEFS_TYPE_NONE = 0,\n\tORANGEFS_TYPE_METAFILE = (1 << 0),\n\tORANGEFS_TYPE_DATAFILE = (1 << 1),\n\tORANGEFS_TYPE_DIRECTORY = (1 << 2),\n\tORANGEFS_TYPE_SYMLINK = (1 << 3),\n\tORANGEFS_TYPE_DIRDATA = (1 << 4),\n\tORANGEFS_TYPE_INTERNAL = (1 << 5)\t \n};\n\n \nstruct ORANGEFS_keyval_pair {\n\tchar key[ORANGEFS_MAX_XATTR_NAMELEN];\n\t__s32 key_sz;\t \n\t__s32 val_sz;\n\tchar val[ORANGEFS_MAX_XATTR_VALUELEN];\n};\n\n \n \nstruct ORANGEFS_sys_attr_s {\n\t__u32 owner;\n\t__u32 group;\n\t__u32 perms;\n\t__u64 atime;\n\t__u64 mtime;\n\t__u64 ctime;\n\t__s64 size;\n\n\t \n\tchar *link_target;\n\n\t \n\t__s32 dfile_count;\n\n\t \n\t__s32 distr_dir_servers_initial;\n\n\t \n\t__s32 distr_dir_servers_max;\n\n\t \n\t__s32 distr_dir_split_size;\n\n\t__u32 mirror_copies_count;\n\n\t \n\tchar *dist_name;\n\n\t \n\tchar *dist_params;\n\n\t__s64 dirent_count;\n\tenum orangefs_ds_type objtype;\n\t__u64 flags;\n\t__u32 mask;\n\t__s64 blksize;\n};\n\n#define ORANGEFS_LOOKUP_LINK_NO_FOLLOW 0\n\n \n\n \nstruct dev_mask_info_s {\n\tenum {\n\t\tKERNEL_MASK,\n\t\tCLIENT_MASK,\n\t} mask_type;\n\t__u64 mask_value;\n};\n\nstruct dev_mask2_info_s {\n\t__u64 mask1_value;\n\t__u64 mask2_value;\n};\n\n \n__s32 ORANGEFS_util_translate_mode(int mode);\n\n \n#include \"orangefs-debug.h\"\n\n \n#define llu(x) (unsigned long long)(x)\n#define lld(x) (long long)(x)\n\n \n#define ORANGEFS_DEV_MAGIC 'k'\n\n#define ORANGEFS_READDIR_DEFAULT_DESC_COUNT  5\n\n#define DEV_GET_MAGIC           0x1\n#define DEV_GET_MAX_UPSIZE      0x2\n#define DEV_GET_MAX_DOWNSIZE    0x3\n#define DEV_MAP                 0x4\n#define DEV_REMOUNT_ALL         0x5\n#define DEV_DEBUG               0x6\n#define DEV_UPSTREAM            0x7\n#define DEV_CLIENT_MASK         0x8\n#define DEV_CLIENT_STRING       0x9\n#define DEV_MAX_NR              0xa\n\n \nenum {\n\tORANGEFS_DEV_GET_MAGIC = _IOW(ORANGEFS_DEV_MAGIC, DEV_GET_MAGIC, __s32),\n\tORANGEFS_DEV_GET_MAX_UPSIZE =\n\t    _IOW(ORANGEFS_DEV_MAGIC, DEV_GET_MAX_UPSIZE, __s32),\n\tORANGEFS_DEV_GET_MAX_DOWNSIZE =\n\t    _IOW(ORANGEFS_DEV_MAGIC, DEV_GET_MAX_DOWNSIZE, __s32),\n\tORANGEFS_DEV_MAP = _IO(ORANGEFS_DEV_MAGIC, DEV_MAP),\n\tORANGEFS_DEV_REMOUNT_ALL = _IO(ORANGEFS_DEV_MAGIC, DEV_REMOUNT_ALL),\n\tORANGEFS_DEV_DEBUG = _IOR(ORANGEFS_DEV_MAGIC, DEV_DEBUG, __s32),\n\tORANGEFS_DEV_UPSTREAM = _IOW(ORANGEFS_DEV_MAGIC, DEV_UPSTREAM, int),\n\tORANGEFS_DEV_CLIENT_MASK = _IOW(ORANGEFS_DEV_MAGIC,\n\t\t\t\t    DEV_CLIENT_MASK,\n\t\t\t\t    struct dev_mask2_info_s),\n\tORANGEFS_DEV_CLIENT_STRING = _IOW(ORANGEFS_DEV_MAGIC,\n\t\t\t\t      DEV_CLIENT_STRING,\n\t\t\t\t      char *),\n\tORANGEFS_DEV_MAXNR = DEV_MAX_NR,\n};\n\n \n#define ORANGEFS_KERNEL_PROTO_VERSION 0\n#define ORANGEFS_MINIMUM_USERSPACE_VERSION 20903\n\n \nstruct ORANGEFS_dev_map_desc {\n\tvoid __user *ptr;\n\t__s32 total_size;\n\t__s32 size;\n\t__s32 count;\n};\n\n \n\nextern __u64 orangefs_gossip_debug_mask;\n\n \n#define gossip_debug(mask, fmt, ...)\t\t\t\t\t\\\ndo {\t\t\t\t\t\t\t\t\t\\\n\tif (orangefs_gossip_debug_mask & (mask))\t\t\t\\\n\t\tprintk(KERN_DEBUG fmt, ##__VA_ARGS__);\t\t\t\\\n} while (0)\n\n#define gossip_err pr_err\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}