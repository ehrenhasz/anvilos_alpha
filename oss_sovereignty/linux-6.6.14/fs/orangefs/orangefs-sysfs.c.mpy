{
  "module_name": "orangefs-sysfs.c",
  "hash_id": "aa9d77be9b7936bae6574bbba9e2072029013bd88162eb3fbc44efabd2f3b8b3",
  "original_prompt": "Ingested from linux-6.6.14/fs/orangefs/orangefs-sysfs.c",
  "human_readable_source": "\n \n\n#include <linux/fs.h>\n#include <linux/kobject.h>\n#include <linux/string.h>\n#include <linux/sysfs.h>\n#include <linux/module.h>\n#include <linux/init.h>\n\n#include \"protocol.h\"\n#include \"orangefs-kernel.h\"\n#include \"orangefs-sysfs.h\"\n\n#define ORANGEFS_KOBJ_ID \"orangefs\"\n#define ACACHE_KOBJ_ID \"acache\"\n#define CAPCACHE_KOBJ_ID \"capcache\"\n#define CCACHE_KOBJ_ID \"ccache\"\n#define NCACHE_KOBJ_ID \"ncache\"\n#define PC_KOBJ_ID \"pc\"\n#define STATS_KOBJ_ID \"stats\"\n\n \n\nstruct orangefs_attribute {\n\tstruct attribute attr;\n\tssize_t (*show)(struct kobject *kobj,\n\t\t\tstruct orangefs_attribute *attr,\n\t\t\tchar *buf);\n\tssize_t (*store)(struct kobject *kobj,\n\t\t\t struct orangefs_attribute *attr,\n\t\t\t const char *buf,\n\t\t\t size_t count);\n};\n\nstatic ssize_t orangefs_attr_show(struct kobject *kobj,\n\t\t\t\t  struct attribute *attr,\n\t\t\t\t  char *buf)\n{\n\tstruct orangefs_attribute *attribute;\n\n\tattribute = container_of(attr, struct orangefs_attribute, attr);\n\tif (!attribute->show)\n\t\treturn -EIO;\n\treturn attribute->show(kobj, attribute, buf);\n}\n\nstatic ssize_t orangefs_attr_store(struct kobject *kobj,\n\t\t\t\t   struct attribute *attr,\n\t\t\t\t   const char *buf,\n\t\t\t\t   size_t len)\n{\n\tstruct orangefs_attribute *attribute;\n\n\tif (!strcmp(kobj->name, PC_KOBJ_ID) ||\n\t    !strcmp(kobj->name, STATS_KOBJ_ID))\n\t\treturn -EPERM;\n\n\tattribute = container_of(attr, struct orangefs_attribute, attr);\n\tif (!attribute->store)\n\t\treturn -EIO;\n\treturn attribute->store(kobj, attribute, buf, len);\n}\n\nstatic const struct sysfs_ops orangefs_sysfs_ops = {\n\t.show = orangefs_attr_show,\n\t.store = orangefs_attr_store,\n};\n\nstatic ssize_t sysfs_int_show(struct kobject *kobj,\n    struct orangefs_attribute *attr, char *buf)\n{\n\tint rc = -EIO;\n\n\tgossip_debug(GOSSIP_SYSFS_DEBUG, \"sysfs_int_show: id:%s:\\n\",\n\t    kobj->name);\n\n\tif (!strcmp(kobj->name, ORANGEFS_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"op_timeout_secs\")) {\n\t\t\trc = scnprintf(buf,\n\t\t\t\t       PAGE_SIZE,\n\t\t\t\t       \"%d\\n\",\n\t\t\t\t       op_timeout_secs);\n\t\t\tgoto out;\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"slot_timeout_secs\")) {\n\t\t\trc = scnprintf(buf,\n\t\t\t\t       PAGE_SIZE,\n\t\t\t\t       \"%d\\n\",\n\t\t\t\t       slot_timeout_secs);\n\t\t\tgoto out;\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"cache_timeout_msecs\")) {\n\t\t\trc = scnprintf(buf,\n\t\t\t\t       PAGE_SIZE,\n\t\t\t\t       \"%d\\n\",\n\t\t\t\t       orangefs_cache_timeout_msecs);\n\t\t\tgoto out;\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"dcache_timeout_msecs\")) {\n\t\t\trc = scnprintf(buf,\n\t\t\t\t       PAGE_SIZE,\n\t\t\t\t       \"%d\\n\",\n\t\t\t\t       orangefs_dcache_timeout_msecs);\n\t\t\tgoto out;\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"getattr_timeout_msecs\")) {\n\t\t\trc = scnprintf(buf,\n\t\t\t\t       PAGE_SIZE,\n\t\t\t\t       \"%d\\n\",\n\t\t\t\t       orangefs_getattr_timeout_msecs);\n\t\t\tgoto out;\n\t\t} else {\n\t\t\tgoto out;\n\t\t}\n\n\t} else if (!strcmp(kobj->name, STATS_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"reads\")) {\n\t\t\trc = scnprintf(buf,\n\t\t\t\t       PAGE_SIZE,\n\t\t\t\t       \"%lu\\n\",\n\t\t\t\t       orangefs_stats.reads);\n\t\t\tgoto out;\n\t\t} else if (!strcmp(attr->attr.name, \"writes\")) {\n\t\t\trc = scnprintf(buf,\n\t\t\t\t       PAGE_SIZE,\n\t\t\t\t       \"%lu\\n\",\n\t\t\t\t       orangefs_stats.writes);\n\t\t\tgoto out;\n\t\t} else {\n\t\t\tgoto out;\n\t\t}\n\t}\n\nout:\n\n\treturn rc;\n}\n\nstatic ssize_t sysfs_int_store(struct kobject *kobj,\n    struct orangefs_attribute *attr, const char *buf, size_t count)\n{\n\tint rc = 0;\n\n\tgossip_debug(GOSSIP_SYSFS_DEBUG,\n\t\t     \"sysfs_int_store: start attr->attr.name:%s: buf:%s:\\n\",\n\t\t     attr->attr.name, buf);\n\n\tif (!strcmp(attr->attr.name, \"op_timeout_secs\")) {\n\t\trc = kstrtoint(buf, 0, &op_timeout_secs);\n\t\tgoto out;\n\t} else if (!strcmp(attr->attr.name, \"slot_timeout_secs\")) {\n\t\trc = kstrtoint(buf, 0, &slot_timeout_secs);\n\t\tgoto out;\n\t} else if (!strcmp(attr->attr.name, \"cache_timeout_msecs\")) {\n\t\trc = kstrtoint(buf, 0, &orangefs_cache_timeout_msecs);\n\t\tgoto out;\n\t} else if (!strcmp(attr->attr.name, \"dcache_timeout_msecs\")) {\n\t\trc = kstrtoint(buf, 0, &orangefs_dcache_timeout_msecs);\n\t\tgoto out;\n\t} else if (!strcmp(attr->attr.name, \"getattr_timeout_msecs\")) {\n\t\trc = kstrtoint(buf, 0, &orangefs_getattr_timeout_msecs);\n\t\tgoto out;\n\t} else {\n\t\tgoto out;\n\t}\n\nout:\n\tif (rc)\n\t\trc = -EINVAL;\n\telse\n\t\trc = count;\n\n\treturn rc;\n}\n\n \nstatic ssize_t sysfs_service_op_show(struct kobject *kobj,\n    struct orangefs_attribute *attr, char *buf)\n{\n\tstruct orangefs_kernel_op_s *new_op = NULL;\n\tint rc = 0;\n\tchar *ser_op_type = NULL;\n\t__u32 op_alloc_type;\n\n\tgossip_debug(GOSSIP_SYSFS_DEBUG,\n\t\t     \"sysfs_service_op_show: id:%s:\\n\",\n\t\t     kobj->name);\n\n\tif (strcmp(kobj->name, PC_KOBJ_ID))\n\t\top_alloc_type = ORANGEFS_VFS_OP_PARAM;\n\telse\n\t\top_alloc_type = ORANGEFS_VFS_OP_PERF_COUNT;\n\n\tnew_op = op_alloc(op_alloc_type);\n\tif (!new_op)\n\t\treturn -ENOMEM;\n\n\t \n\trc = is_daemon_in_service();\n\tif (rc) {\n\t\tpr_info_ratelimited(\"%s: Client not running :%d:\\n\",\n\t\t\t__func__,\n\t\t\tis_daemon_in_service());\n\t\tgoto out;\n\t}\n\n\tif (strcmp(kobj->name, PC_KOBJ_ID))\n\t\tnew_op->upcall.req.param.type = ORANGEFS_PARAM_REQUEST_GET;\n\n\tif (!strcmp(kobj->name, ORANGEFS_KOBJ_ID)) {\n\t\t \n\t\tif (!(orangefs_features & ORANGEFS_FEATURE_READAHEAD) &&\n\t\t    (!strcmp(attr->attr.name, \"readahead_count\") ||\n\t\t    !strcmp(attr->attr.name, \"readahead_size\") ||\n\t\t    !strcmp(attr->attr.name, \"readahead_count_size\") ||\n\t\t    !strcmp(attr->attr.name, \"readahead_readcnt\"))) {\n\t\t\trc = -EINVAL;\n\t\t\tgoto out;\n\t\t}\n\n\t\tif (!strcmp(attr->attr.name, \"perf_history_size\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_PERF_HISTORY_SIZE;\n\t\telse if (!strcmp(attr->attr.name,\n\t\t\t\t \"perf_time_interval_secs\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_PERF_TIME_INTERVAL_SECS;\n\t\telse if (!strcmp(attr->attr.name,\n\t\t\t\t \"perf_counter_reset\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_PERF_RESET;\n\n\t\telse if (!strcmp(attr->attr.name,\n\t\t\t\t \"readahead_count\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_READAHEAD_COUNT;\n\n\t\telse if (!strcmp(attr->attr.name,\n\t\t\t\t \"readahead_size\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_READAHEAD_SIZE;\n\n\t\telse if (!strcmp(attr->attr.name,\n\t\t\t\t \"readahead_count_size\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_READAHEAD_COUNT_SIZE;\n\n\t\telse if (!strcmp(attr->attr.name,\n\t\t\t\t \"readahead_readcnt\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_READAHEAD_READCNT;\n\t} else if (!strcmp(kobj->name, ACACHE_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"timeout_msecs\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_ACACHE_TIMEOUT_MSECS;\n\n\t\tif (!strcmp(attr->attr.name, \"hard_limit\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_ACACHE_HARD_LIMIT;\n\n\t\tif (!strcmp(attr->attr.name, \"soft_limit\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_ACACHE_SOFT_LIMIT;\n\n\t\tif (!strcmp(attr->attr.name, \"reclaim_percentage\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t  ORANGEFS_PARAM_REQUEST_OP_ACACHE_RECLAIM_PERCENTAGE;\n\n\t} else if (!strcmp(kobj->name, CAPCACHE_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"timeout_secs\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_CAPCACHE_TIMEOUT_SECS;\n\n\t\tif (!strcmp(attr->attr.name, \"hard_limit\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_CAPCACHE_HARD_LIMIT;\n\n\t\tif (!strcmp(attr->attr.name, \"soft_limit\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_CAPCACHE_SOFT_LIMIT;\n\n\t\tif (!strcmp(attr->attr.name, \"reclaim_percentage\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CAPCACHE_RECLAIM_PERCENTAGE;\n\n\t} else if (!strcmp(kobj->name, CCACHE_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"timeout_secs\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_CCACHE_TIMEOUT_SECS;\n\n\t\tif (!strcmp(attr->attr.name, \"hard_limit\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_CCACHE_HARD_LIMIT;\n\n\t\tif (!strcmp(attr->attr.name, \"soft_limit\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_CCACHE_SOFT_LIMIT;\n\n\t\tif (!strcmp(attr->attr.name, \"reclaim_percentage\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CCACHE_RECLAIM_PERCENTAGE;\n\n\t} else if (!strcmp(kobj->name, NCACHE_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"timeout_msecs\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_NCACHE_TIMEOUT_MSECS;\n\n\t\tif (!strcmp(attr->attr.name, \"hard_limit\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_NCACHE_HARD_LIMIT;\n\n\t\tif (!strcmp(attr->attr.name, \"soft_limit\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_NCACHE_SOFT_LIMIT;\n\n\t\tif (!strcmp(attr->attr.name, \"reclaim_percentage\"))\n\t\t\tnew_op->upcall.req.param.op =\n\t\t\t  ORANGEFS_PARAM_REQUEST_OP_NCACHE_RECLAIM_PERCENTAGE;\n\n\t} else if (!strcmp(kobj->name, PC_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, ACACHE_KOBJ_ID))\n\t\t\tnew_op->upcall.req.perf_count.type =\n\t\t\t\tORANGEFS_PERF_COUNT_REQUEST_ACACHE;\n\n\t\tif (!strcmp(attr->attr.name, CAPCACHE_KOBJ_ID))\n\t\t\tnew_op->upcall.req.perf_count.type =\n\t\t\t\tORANGEFS_PERF_COUNT_REQUEST_CAPCACHE;\n\n\t\tif (!strcmp(attr->attr.name, NCACHE_KOBJ_ID))\n\t\t\tnew_op->upcall.req.perf_count.type =\n\t\t\t\tORANGEFS_PERF_COUNT_REQUEST_NCACHE;\n\n\t} else {\n\t\tgossip_err(\"sysfs_service_op_show: unknown kobj_id:%s:\\n\",\n\t\t\t   kobj->name);\n\t\trc = -EINVAL;\n\t\tgoto out;\n\t}\n\n\n\tif (strcmp(kobj->name, PC_KOBJ_ID))\n\t\tser_op_type = \"orangefs_param\";\n\telse\n\t\tser_op_type = \"orangefs_perf_count\";\n\n\t \n\trc = service_operation(new_op, ser_op_type, ORANGEFS_OP_INTERRUPTIBLE);\n\nout:\n\tif (!rc) {\n\t\tif (strcmp(kobj->name, PC_KOBJ_ID)) {\n\t\t\tif (new_op->upcall.req.param.op ==\n\t\t\t    ORANGEFS_PARAM_REQUEST_OP_READAHEAD_COUNT_SIZE) {\n\t\t\t\trc = scnprintf(buf, PAGE_SIZE, \"%d %d\\n\",\n\t\t\t\t    (int)new_op->downcall.resp.param.u.\n\t\t\t\t    value32[0],\n\t\t\t\t    (int)new_op->downcall.resp.param.u.\n\t\t\t\t    value32[1]);\n\t\t\t} else {\n\t\t\t\trc = scnprintf(buf, PAGE_SIZE, \"%d\\n\",\n\t\t\t\t    (int)new_op->downcall.resp.param.u.value64);\n\t\t\t}\n\t\t} else {\n\t\t\trc = scnprintf(\n\t\t\t\tbuf,\n\t\t\t\tPAGE_SIZE,\n\t\t\t\t\"%s\",\n\t\t\t\tnew_op->downcall.resp.perf_count.buffer);\n\t\t}\n\t}\n\n\top_release(new_op);\n\n\treturn rc;\n\n}\n\n \nstatic ssize_t sysfs_service_op_store(struct kobject *kobj,\n    struct orangefs_attribute *attr, const char *buf, size_t count)\n{\n\tstruct orangefs_kernel_op_s *new_op = NULL;\n\tint val = 0;\n\tint rc = 0;\n\n\tgossip_debug(GOSSIP_SYSFS_DEBUG,\n\t\t     \"sysfs_service_op_store: id:%s:\\n\",\n\t\t     kobj->name);\n\n\tnew_op = op_alloc(ORANGEFS_VFS_OP_PARAM);\n\tif (!new_op)\n\t\treturn -EINVAL;  \n\n\t \n\trc = is_daemon_in_service();\n\tif (rc) {\n\t\tpr_info(\"%s: Client not running :%d:\\n\",\n\t\t\t__func__,\n\t\t\tis_daemon_in_service());\n\t\tgoto out;\n\t}\n\n\t \n\tif (strcmp(kobj->name, ORANGEFS_KOBJ_ID) ||\n\t    strcmp(attr->attr.name, \"readahead_count_size\")) {\n\t\trc = kstrtoint(buf, 0, &val);\n\t\tif (rc)\n\t\t\tgoto out;\n\t}\n\n\tnew_op->upcall.req.param.type = ORANGEFS_PARAM_REQUEST_SET;\n\n\tif (!strcmp(kobj->name, ORANGEFS_KOBJ_ID)) {\n\t\t \n\t\tif (!(orangefs_features & ORANGEFS_FEATURE_READAHEAD) &&\n\t\t    (!strcmp(attr->attr.name, \"readahead_count\") ||\n\t\t    !strcmp(attr->attr.name, \"readahead_size\") ||\n\t\t    !strcmp(attr->attr.name, \"readahead_count_size\") ||\n\t\t    !strcmp(attr->attr.name, \"readahead_readcnt\"))) {\n\t\t\trc = -EINVAL;\n\t\t\tgoto out;\n\t\t}\n\n\t\tif (!strcmp(attr->attr.name, \"perf_history_size\")) {\n\t\t\tif (val > 0) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_PERF_HISTORY_SIZE;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"perf_time_interval_secs\")) {\n\t\t\tif (val > 0) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_PERF_TIME_INTERVAL_SECS;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"perf_counter_reset\")) {\n\t\t\tif ((val == 0) || (val == 1)) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t\tORANGEFS_PARAM_REQUEST_OP_PERF_RESET;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"readahead_count\")) {\n\t\t\tif ((val >= 0)) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_READAHEAD_COUNT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"readahead_size\")) {\n\t\t\tif ((val >= 0)) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_READAHEAD_SIZE;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"readahead_count_size\")) {\n\t\t\tint val1, val2;\n\t\t\trc = sscanf(buf, \"%d %d\", &val1, &val2);\n\t\t\tif (rc < 2) {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t\tif ((val1 >= 0) && (val2 >= 0)) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_READAHEAD_COUNT_SIZE;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t\tnew_op->upcall.req.param.u.value32[0] = val1;\n\t\t\tnew_op->upcall.req.param.u.value32[1] = val2;\n\t\t\tgoto value_set;\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"readahead_readcnt\")) {\n\t\t\tif ((val >= 0)) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\tORANGEFS_PARAM_REQUEST_OP_READAHEAD_READCNT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t}\n\n\t} else if (!strcmp(kobj->name, ACACHE_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"hard_limit\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_ACACHE_HARD_LIMIT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name, \"soft_limit\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_ACACHE_SOFT_LIMIT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"reclaim_percentage\")) {\n\t\t\tif ((val > -1) && (val < 101)) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_ACACHE_RECLAIM_PERCENTAGE;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name, \"timeout_msecs\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_ACACHE_TIMEOUT_MSECS;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t}\n\n\t} else if (!strcmp(kobj->name, CAPCACHE_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"hard_limit\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CAPCACHE_HARD_LIMIT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name, \"soft_limit\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CAPCACHE_SOFT_LIMIT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"reclaim_percentage\")) {\n\t\t\tif ((val > -1) && (val < 101)) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CAPCACHE_RECLAIM_PERCENTAGE;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name, \"timeout_secs\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CAPCACHE_TIMEOUT_SECS;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t}\n\n\t} else if (!strcmp(kobj->name, CCACHE_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"hard_limit\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CCACHE_HARD_LIMIT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name, \"soft_limit\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CCACHE_SOFT_LIMIT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"reclaim_percentage\")) {\n\t\t\tif ((val > -1) && (val < 101)) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CCACHE_RECLAIM_PERCENTAGE;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name, \"timeout_secs\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_CCACHE_TIMEOUT_SECS;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t}\n\n\t} else if (!strcmp(kobj->name, NCACHE_KOBJ_ID)) {\n\t\tif (!strcmp(attr->attr.name, \"hard_limit\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_NCACHE_HARD_LIMIT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name, \"soft_limit\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_NCACHE_SOFT_LIMIT;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name,\n\t\t\t\t   \"reclaim_percentage\")) {\n\t\t\tif ((val > -1) && (val < 101)) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t\tORANGEFS_PARAM_REQUEST_OP_NCACHE_RECLAIM_PERCENTAGE;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t} else if (!strcmp(attr->attr.name, \"timeout_msecs\")) {\n\t\t\tif (val > -1) {\n\t\t\t\tnew_op->upcall.req.param.op =\n\t\t\t\t  ORANGEFS_PARAM_REQUEST_OP_NCACHE_TIMEOUT_MSECS;\n\t\t\t} else {\n\t\t\t\trc = 0;\n\t\t\t\tgoto out;\n\t\t\t}\n\t\t}\n\n\t} else {\n\t\tgossip_err(\"sysfs_service_op_store: unknown kobj_id:%s:\\n\",\n\t\t\t   kobj->name);\n\t\trc = -EINVAL;\n\t\tgoto out;\n\t}\n\n\tnew_op->upcall.req.param.u.value64 = val;\nvalue_set:\n\n\t \n\trc = service_operation(new_op, \"orangefs_param\", ORANGEFS_OP_INTERRUPTIBLE);\n\n\tif (rc < 0) {\n\t\tgossip_err(\"sysfs_service_op_store: service op returned:%d:\\n\",\n\t\t\trc);\n\t\trc = 0;\n\t} else {\n\t\trc = count;\n\t}\n\nout:\n\top_release(new_op);\n\n\tif (rc == -ENOMEM || rc == 0)\n\t\trc = -EINVAL;\n\n\treturn rc;\n}\n\nstatic struct orangefs_attribute op_timeout_secs_attribute =\n\t__ATTR(op_timeout_secs, 0664, sysfs_int_show, sysfs_int_store);\n\nstatic struct orangefs_attribute slot_timeout_secs_attribute =\n\t__ATTR(slot_timeout_secs, 0664, sysfs_int_show, sysfs_int_store);\n\nstatic struct orangefs_attribute cache_timeout_msecs_attribute =\n\t__ATTR(cache_timeout_msecs, 0664, sysfs_int_show, sysfs_int_store);\n\nstatic struct orangefs_attribute dcache_timeout_msecs_attribute =\n\t__ATTR(dcache_timeout_msecs, 0664, sysfs_int_show, sysfs_int_store);\n\nstatic struct orangefs_attribute getattr_timeout_msecs_attribute =\n\t__ATTR(getattr_timeout_msecs, 0664, sysfs_int_show, sysfs_int_store);\n\nstatic struct orangefs_attribute readahead_count_attribute =\n\t__ATTR(readahead_count, 0664, sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute readahead_size_attribute =\n\t__ATTR(readahead_size, 0664, sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute readahead_count_size_attribute =\n\t__ATTR(readahead_count_size, 0664, sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute readahead_readcnt_attribute =\n\t__ATTR(readahead_readcnt, 0664, sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute perf_counter_reset_attribute =\n\t__ATTR(perf_counter_reset,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute perf_history_size_attribute =\n\t__ATTR(perf_history_size,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute perf_time_interval_secs_attribute =\n\t__ATTR(perf_time_interval_secs,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct attribute *orangefs_default_attrs[] = {\n\t&op_timeout_secs_attribute.attr,\n\t&slot_timeout_secs_attribute.attr,\n\t&cache_timeout_msecs_attribute.attr,\n\t&dcache_timeout_msecs_attribute.attr,\n\t&getattr_timeout_msecs_attribute.attr,\n\t&readahead_count_attribute.attr,\n\t&readahead_size_attribute.attr,\n\t&readahead_count_size_attribute.attr,\n\t&readahead_readcnt_attribute.attr,\n\t&perf_counter_reset_attribute.attr,\n\t&perf_history_size_attribute.attr,\n\t&perf_time_interval_secs_attribute.attr,\n\tNULL,\n};\nATTRIBUTE_GROUPS(orangefs_default);\n\nstatic struct kobject *orangefs_obj;\n\nstatic void orangefs_obj_release(struct kobject *kobj)\n{\n\tkfree(orangefs_obj);\n\torangefs_obj = NULL;\n}\n\nstatic struct kobj_type orangefs_ktype = {\n\t.sysfs_ops = &orangefs_sysfs_ops,\n\t.default_groups = orangefs_default_groups,\n\t.release = orangefs_obj_release,\n};\n\nstatic struct orangefs_attribute acache_hard_limit_attribute =\n\t__ATTR(hard_limit,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute acache_reclaim_percent_attribute =\n\t__ATTR(reclaim_percentage,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute acache_soft_limit_attribute =\n\t__ATTR(soft_limit,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute acache_timeout_msecs_attribute =\n\t__ATTR(timeout_msecs,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct attribute *acache_orangefs_default_attrs[] = {\n\t&acache_hard_limit_attribute.attr,\n\t&acache_reclaim_percent_attribute.attr,\n\t&acache_soft_limit_attribute.attr,\n\t&acache_timeout_msecs_attribute.attr,\n\tNULL,\n};\nATTRIBUTE_GROUPS(acache_orangefs_default);\n\nstatic struct kobject *acache_orangefs_obj;\n\nstatic void acache_orangefs_obj_release(struct kobject *kobj)\n{\n\tkfree(acache_orangefs_obj);\n\tacache_orangefs_obj = NULL;\n}\n\nstatic struct kobj_type acache_orangefs_ktype = {\n\t.sysfs_ops = &orangefs_sysfs_ops,\n\t.default_groups = acache_orangefs_default_groups,\n\t.release = acache_orangefs_obj_release,\n};\n\nstatic struct orangefs_attribute capcache_hard_limit_attribute =\n\t__ATTR(hard_limit,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute capcache_reclaim_percent_attribute =\n\t__ATTR(reclaim_percentage,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute capcache_soft_limit_attribute =\n\t__ATTR(soft_limit,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute capcache_timeout_secs_attribute =\n\t__ATTR(timeout_secs,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct attribute *capcache_orangefs_default_attrs[] = {\n\t&capcache_hard_limit_attribute.attr,\n\t&capcache_reclaim_percent_attribute.attr,\n\t&capcache_soft_limit_attribute.attr,\n\t&capcache_timeout_secs_attribute.attr,\n\tNULL,\n};\nATTRIBUTE_GROUPS(capcache_orangefs_default);\n\nstatic struct kobject *capcache_orangefs_obj;\n\nstatic void capcache_orangefs_obj_release(struct kobject *kobj)\n{\n\tkfree(capcache_orangefs_obj);\n\tcapcache_orangefs_obj = NULL;\n}\n\nstatic struct kobj_type capcache_orangefs_ktype = {\n\t.sysfs_ops = &orangefs_sysfs_ops,\n\t.default_groups = capcache_orangefs_default_groups,\n\t.release = capcache_orangefs_obj_release,\n};\n\nstatic struct orangefs_attribute ccache_hard_limit_attribute =\n\t__ATTR(hard_limit,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute ccache_reclaim_percent_attribute =\n\t__ATTR(reclaim_percentage,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute ccache_soft_limit_attribute =\n\t__ATTR(soft_limit,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute ccache_timeout_secs_attribute =\n\t__ATTR(timeout_secs,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct attribute *ccache_orangefs_default_attrs[] = {\n\t&ccache_hard_limit_attribute.attr,\n\t&ccache_reclaim_percent_attribute.attr,\n\t&ccache_soft_limit_attribute.attr,\n\t&ccache_timeout_secs_attribute.attr,\n\tNULL,\n};\nATTRIBUTE_GROUPS(ccache_orangefs_default);\n\nstatic struct kobject *ccache_orangefs_obj;\n\nstatic void ccache_orangefs_obj_release(struct kobject *kobj)\n{\n\tkfree(ccache_orangefs_obj);\n\tccache_orangefs_obj = NULL;\n}\n\nstatic struct kobj_type ccache_orangefs_ktype = {\n\t.sysfs_ops = &orangefs_sysfs_ops,\n\t.default_groups = ccache_orangefs_default_groups,\n\t.release = ccache_orangefs_obj_release,\n};\n\nstatic struct orangefs_attribute ncache_hard_limit_attribute =\n\t__ATTR(hard_limit,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute ncache_reclaim_percent_attribute =\n\t__ATTR(reclaim_percentage,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute ncache_soft_limit_attribute =\n\t__ATTR(soft_limit,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct orangefs_attribute ncache_timeout_msecs_attribute =\n\t__ATTR(timeout_msecs,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       sysfs_service_op_store);\n\nstatic struct attribute *ncache_orangefs_default_attrs[] = {\n\t&ncache_hard_limit_attribute.attr,\n\t&ncache_reclaim_percent_attribute.attr,\n\t&ncache_soft_limit_attribute.attr,\n\t&ncache_timeout_msecs_attribute.attr,\n\tNULL,\n};\nATTRIBUTE_GROUPS(ncache_orangefs_default);\n\nstatic struct kobject *ncache_orangefs_obj;\n\nstatic void ncache_orangefs_obj_release(struct kobject *kobj)\n{\n\tkfree(ncache_orangefs_obj);\n\tncache_orangefs_obj = NULL;\n}\n\nstatic struct kobj_type ncache_orangefs_ktype = {\n\t.sysfs_ops = &orangefs_sysfs_ops,\n\t.default_groups = ncache_orangefs_default_groups,\n\t.release = ncache_orangefs_obj_release,\n};\n\nstatic struct orangefs_attribute pc_acache_attribute =\n\t__ATTR(acache,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       NULL);\n\nstatic struct orangefs_attribute pc_capcache_attribute =\n\t__ATTR(capcache,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       NULL);\n\nstatic struct orangefs_attribute pc_ncache_attribute =\n\t__ATTR(ncache,\n\t       0664,\n\t       sysfs_service_op_show,\n\t       NULL);\n\nstatic struct attribute *pc_orangefs_default_attrs[] = {\n\t&pc_acache_attribute.attr,\n\t&pc_capcache_attribute.attr,\n\t&pc_ncache_attribute.attr,\n\tNULL,\n};\nATTRIBUTE_GROUPS(pc_orangefs_default);\n\nstatic struct kobject *pc_orangefs_obj;\n\nstatic void pc_orangefs_obj_release(struct kobject *kobj)\n{\n\tkfree(pc_orangefs_obj);\n\tpc_orangefs_obj = NULL;\n}\n\nstatic struct kobj_type pc_orangefs_ktype = {\n\t.sysfs_ops = &orangefs_sysfs_ops,\n\t.default_groups = pc_orangefs_default_groups,\n\t.release = pc_orangefs_obj_release,\n};\n\nstatic struct orangefs_attribute stats_reads_attribute =\n\t__ATTR(reads,\n\t       0664,\n\t       sysfs_int_show,\n\t       NULL);\n\nstatic struct orangefs_attribute stats_writes_attribute =\n\t__ATTR(writes,\n\t       0664,\n\t       sysfs_int_show,\n\t       NULL);\n\nstatic struct attribute *stats_orangefs_default_attrs[] = {\n\t&stats_reads_attribute.attr,\n\t&stats_writes_attribute.attr,\n\tNULL,\n};\nATTRIBUTE_GROUPS(stats_orangefs_default);\n\nstatic struct kobject *stats_orangefs_obj;\n\nstatic void stats_orangefs_obj_release(struct kobject *kobj)\n{\n\tkfree(stats_orangefs_obj);\n\tstats_orangefs_obj = NULL;\n}\n\nstatic struct kobj_type stats_orangefs_ktype = {\n\t.sysfs_ops = &orangefs_sysfs_ops,\n\t.default_groups = stats_orangefs_default_groups,\n\t.release = stats_orangefs_obj_release,\n};\n\nint orangefs_sysfs_init(void)\n{\n\tint rc = -EINVAL;\n\n\tgossip_debug(GOSSIP_SYSFS_DEBUG, \"orangefs_sysfs_init: start\\n\");\n\n\t \n\torangefs_obj = kzalloc(sizeof(*orangefs_obj), GFP_KERNEL);\n\tif (!orangefs_obj)\n\t\tgoto out;\n\n\trc = kobject_init_and_add(orangefs_obj,\n\t\t\t\t  &orangefs_ktype,\n\t\t\t\t  fs_kobj,\n\t\t\t\t  ORANGEFS_KOBJ_ID);\n\n\tif (rc)\n\t\tgoto ofs_obj_bail;\n\n\tkobject_uevent(orangefs_obj, KOBJ_ADD);\n\n\t \n\tacache_orangefs_obj = kzalloc(sizeof(*acache_orangefs_obj), GFP_KERNEL);\n\tif (!acache_orangefs_obj) {\n\t\trc = -EINVAL;\n\t\tgoto ofs_obj_bail;\n\t}\n\n\trc = kobject_init_and_add(acache_orangefs_obj,\n\t\t\t\t  &acache_orangefs_ktype,\n\t\t\t\t  orangefs_obj,\n\t\t\t\t  ACACHE_KOBJ_ID);\n\n\tif (rc)\n\t\tgoto acache_obj_bail;\n\n\tkobject_uevent(acache_orangefs_obj, KOBJ_ADD);\n\n\t \n\tcapcache_orangefs_obj =\n\t\tkzalloc(sizeof(*capcache_orangefs_obj), GFP_KERNEL);\n\tif (!capcache_orangefs_obj) {\n\t\trc = -EINVAL;\n\t\tgoto acache_obj_bail;\n\t}\n\n\trc = kobject_init_and_add(capcache_orangefs_obj,\n\t\t\t\t  &capcache_orangefs_ktype,\n\t\t\t\t  orangefs_obj,\n\t\t\t\t  CAPCACHE_KOBJ_ID);\n\tif (rc)\n\t\tgoto capcache_obj_bail;\n\n\tkobject_uevent(capcache_orangefs_obj, KOBJ_ADD);\n\n\t \n\tccache_orangefs_obj =\n\t\tkzalloc(sizeof(*ccache_orangefs_obj), GFP_KERNEL);\n\tif (!ccache_orangefs_obj) {\n\t\trc = -EINVAL;\n\t\tgoto capcache_obj_bail;\n\t}\n\n\trc = kobject_init_and_add(ccache_orangefs_obj,\n\t\t\t\t  &ccache_orangefs_ktype,\n\t\t\t\t  orangefs_obj,\n\t\t\t\t  CCACHE_KOBJ_ID);\n\tif (rc)\n\t\tgoto ccache_obj_bail;\n\n\tkobject_uevent(ccache_orangefs_obj, KOBJ_ADD);\n\n\t \n\tncache_orangefs_obj = kzalloc(sizeof(*ncache_orangefs_obj), GFP_KERNEL);\n\tif (!ncache_orangefs_obj) {\n\t\trc = -EINVAL;\n\t\tgoto ccache_obj_bail;\n\t}\n\n\trc = kobject_init_and_add(ncache_orangefs_obj,\n\t\t\t\t  &ncache_orangefs_ktype,\n\t\t\t\t  orangefs_obj,\n\t\t\t\t  NCACHE_KOBJ_ID);\n\n\tif (rc)\n\t\tgoto ncache_obj_bail;\n\n\tkobject_uevent(ncache_orangefs_obj, KOBJ_ADD);\n\n\t \n\tpc_orangefs_obj = kzalloc(sizeof(*pc_orangefs_obj), GFP_KERNEL);\n\tif (!pc_orangefs_obj) {\n\t\trc = -EINVAL;\n\t\tgoto ncache_obj_bail;\n\t}\n\n\trc = kobject_init_and_add(pc_orangefs_obj,\n\t\t\t\t  &pc_orangefs_ktype,\n\t\t\t\t  orangefs_obj,\n\t\t\t\t  \"perf_counters\");\n\n\tif (rc)\n\t\tgoto pc_obj_bail;\n\n\tkobject_uevent(pc_orangefs_obj, KOBJ_ADD);\n\n\t \n\tstats_orangefs_obj = kzalloc(sizeof(*stats_orangefs_obj), GFP_KERNEL);\n\tif (!stats_orangefs_obj) {\n\t\trc = -EINVAL;\n\t\tgoto pc_obj_bail;\n\t}\n\n\trc = kobject_init_and_add(stats_orangefs_obj,\n\t\t\t\t  &stats_orangefs_ktype,\n\t\t\t\t  orangefs_obj,\n\t\t\t\t  STATS_KOBJ_ID);\n\n\tif (rc)\n\t\tgoto stats_obj_bail;\n\n\tkobject_uevent(stats_orangefs_obj, KOBJ_ADD);\n\tgoto out;\n\nstats_obj_bail:\n\t\tkobject_put(stats_orangefs_obj);\npc_obj_bail:\n\t\tkobject_put(pc_orangefs_obj);\nncache_obj_bail:\n\t\tkobject_put(ncache_orangefs_obj);\nccache_obj_bail:\n\t\tkobject_put(ccache_orangefs_obj);\ncapcache_obj_bail:\n\t\tkobject_put(capcache_orangefs_obj);\nacache_obj_bail:\n\t\tkobject_put(acache_orangefs_obj);\nofs_obj_bail:\n\t\tkobject_put(orangefs_obj);\nout:\n\treturn rc;\n}\n\nvoid orangefs_sysfs_exit(void)\n{\n\tgossip_debug(GOSSIP_SYSFS_DEBUG, \"orangefs_sysfs_exit: start\\n\");\n\tkobject_put(acache_orangefs_obj);\n\tkobject_put(capcache_orangefs_obj);\n\tkobject_put(ccache_orangefs_obj);\n\tkobject_put(ncache_orangefs_obj);\n\tkobject_put(pc_orangefs_obj);\n\tkobject_put(stats_orangefs_obj);\n\tkobject_put(orangefs_obj);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}