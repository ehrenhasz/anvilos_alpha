{
  "module_name": "xfs_trace.h",
  "hash_id": "68b3c76f688e5fa6eaa05efdeef09cc35f4f83bdd897383c576621256e165cde",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/xfs_trace.h",
  "human_readable_source": "\n \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM xfs\n\n#if !defined(_TRACE_XFS_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_XFS_H\n\n#include <linux/tracepoint.h>\n\nstruct xfs_agf;\nstruct xfs_alloc_arg;\nstruct xfs_attr_list_context;\nstruct xfs_buf_log_item;\nstruct xfs_da_args;\nstruct xfs_da_node_entry;\nstruct xfs_dquot;\nstruct xfs_log_item;\nstruct xlog;\nstruct xlog_ticket;\nstruct xlog_recover;\nstruct xlog_recover_item;\nstruct xlog_rec_header;\nstruct xlog_in_core;\nstruct xfs_buf_log_format;\nstruct xfs_inode_log_format;\nstruct xfs_bmbt_irec;\nstruct xfs_btree_cur;\nstruct xfs_refcount_irec;\nstruct xfs_fsmap;\nstruct xfs_rmap_irec;\nstruct xfs_icreate_log;\nstruct xfs_owner_info;\nstruct xfs_trans_res;\nstruct xfs_inobt_rec_incore;\nunion xfs_btree_ptr;\nstruct xfs_dqtrx;\nstruct xfs_icwalk;\nstruct xfs_perag;\n\n#define XFS_ATTR_FILTER_FLAGS \\\n\t{ XFS_ATTR_ROOT,\t\"ROOT\" }, \\\n\t{ XFS_ATTR_SECURE,\t\"SECURE\" }, \\\n\t{ XFS_ATTR_INCOMPLETE,\t\"INCOMPLETE\" }\n\nDECLARE_EVENT_CLASS(xfs_attr_list_class,\n\tTP_PROTO(struct xfs_attr_list_context *ctx),\n\tTP_ARGS(ctx),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(u32, hashval)\n\t\t__field(u32, blkno)\n\t\t__field(u32, offset)\n\t\t__field(void *, buffer)\n\t\t__field(int, bufsize)\n\t\t__field(int, count)\n\t\t__field(int, firstu)\n\t\t__field(int, dupcnt)\n\t\t__field(unsigned int, attr_filter)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ctx->dp)->i_sb->s_dev;\n\t\t__entry->ino = ctx->dp->i_ino;\n\t\t__entry->hashval = ctx->cursor.hashval;\n\t\t__entry->blkno = ctx->cursor.blkno;\n\t\t__entry->offset = ctx->cursor.offset;\n\t\t__entry->buffer = ctx->buffer;\n\t\t__entry->bufsize = ctx->bufsize;\n\t\t__entry->count = ctx->count;\n\t\t__entry->firstu = ctx->firstu;\n\t\t__entry->attr_filter = ctx->attr_filter;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx cursor h/b/o 0x%x/0x%x/%u dupcnt %u \"\n\t\t  \"buffer %p size %u count %u firstu %u filter %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t   __entry->ino,\n\t\t   __entry->hashval,\n\t\t   __entry->blkno,\n\t\t   __entry->offset,\n\t\t   __entry->dupcnt,\n\t\t   __entry->buffer,\n\t\t   __entry->bufsize,\n\t\t   __entry->count,\n\t\t   __entry->firstu,\n\t\t   __print_flags(__entry->attr_filter, \"|\",\n\t\t\t\t XFS_ATTR_FILTER_FLAGS)\n\t)\n)\n\n#define DEFINE_ATTR_LIST_EVENT(name) \\\nDEFINE_EVENT(xfs_attr_list_class, name, \\\n\tTP_PROTO(struct xfs_attr_list_context *ctx), \\\n\tTP_ARGS(ctx))\nDEFINE_ATTR_LIST_EVENT(xfs_attr_list_sf);\nDEFINE_ATTR_LIST_EVENT(xfs_attr_list_sf_all);\nDEFINE_ATTR_LIST_EVENT(xfs_attr_list_leaf);\nDEFINE_ATTR_LIST_EVENT(xfs_attr_list_leaf_end);\nDEFINE_ATTR_LIST_EVENT(xfs_attr_list_full);\nDEFINE_ATTR_LIST_EVENT(xfs_attr_list_add);\nDEFINE_ATTR_LIST_EVENT(xfs_attr_list_wrong_blk);\nDEFINE_ATTR_LIST_EVENT(xfs_attr_list_notfound);\nDEFINE_ATTR_LIST_EVENT(xfs_attr_leaf_list);\nDEFINE_ATTR_LIST_EVENT(xfs_attr_node_list);\n\nTRACE_EVENT(xlog_intent_recovery_failed,\n\tTP_PROTO(struct xfs_mount *mp, int error, void *function),\n\tTP_ARGS(mp, error, function),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, error)\n\t\t__field(void *, function)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->error = error;\n\t\t__entry->function = function;\n\t),\n\tTP_printk(\"dev %d:%d error %d function %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->error, __entry->function)\n);\n\nDECLARE_EVENT_CLASS(xfs_perag_class,\n\tTP_PROTO(struct xfs_perag *pag, unsigned long caller_ip),\n\tTP_ARGS(pag, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(int, refcount)\n\t\t__field(int, active_refcount)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = pag->pag_mount->m_super->s_dev;\n\t\t__entry->agno = pag->pag_agno;\n\t\t__entry->refcount = atomic_read(&pag->pag_ref);\n\t\t__entry->active_refcount = atomic_read(&pag->pag_active_ref);\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x passive refs %d active refs %d caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->refcount,\n\t\t  __entry->active_refcount,\n\t\t  (char *)__entry->caller_ip)\n);\n\n#define DEFINE_PERAG_REF_EVENT(name)\t\\\nDEFINE_EVENT(xfs_perag_class, name,\t\\\n\tTP_PROTO(struct xfs_perag *pag, unsigned long caller_ip), \\\n\tTP_ARGS(pag, caller_ip))\nDEFINE_PERAG_REF_EVENT(xfs_perag_get);\nDEFINE_PERAG_REF_EVENT(xfs_perag_get_tag);\nDEFINE_PERAG_REF_EVENT(xfs_perag_hold);\nDEFINE_PERAG_REF_EVENT(xfs_perag_put);\nDEFINE_PERAG_REF_EVENT(xfs_perag_grab);\nDEFINE_PERAG_REF_EVENT(xfs_perag_grab_tag);\nDEFINE_PERAG_REF_EVENT(xfs_perag_rele);\nDEFINE_PERAG_REF_EVENT(xfs_perag_set_inode_tag);\nDEFINE_PERAG_REF_EVENT(xfs_perag_clear_inode_tag);\n\nTRACE_EVENT(xfs_inodegc_worker,\n\tTP_PROTO(struct xfs_mount *mp, unsigned int shrinker_hits),\n\tTP_ARGS(mp, shrinker_hits),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, shrinker_hits)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->shrinker_hits = shrinker_hits;\n\t),\n\tTP_printk(\"dev %d:%d shrinker_hits %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->shrinker_hits)\n);\n\nDECLARE_EVENT_CLASS(xfs_fs_class,\n\tTP_PROTO(struct xfs_mount *mp, void *caller_ip),\n\tTP_ARGS(mp, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned long long, mflags)\n\t\t__field(unsigned long, opstate)\n\t\t__field(unsigned long, sbflags)\n\t\t__field(void *, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\tif (mp) {\n\t\t\t__entry->dev = mp->m_super->s_dev;\n\t\t\t__entry->mflags = mp->m_features;\n\t\t\t__entry->opstate = mp->m_opstate;\n\t\t\t__entry->sbflags = mp->m_super->s_flags;\n\t\t}\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d m_features 0x%llx opstate (%s) s_flags 0x%lx caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->mflags,\n\t\t  __print_flags(__entry->opstate, \"|\", XFS_OPSTATE_STRINGS),\n\t\t  __entry->sbflags,\n\t\t  __entry->caller_ip)\n);\n\n#define DEFINE_FS_EVENT(name)\t\\\nDEFINE_EVENT(xfs_fs_class, name,\t\t\t\t\t\\\n\tTP_PROTO(struct xfs_mount *mp, void *caller_ip), \\\n\tTP_ARGS(mp, caller_ip))\nDEFINE_FS_EVENT(xfs_inodegc_flush);\nDEFINE_FS_EVENT(xfs_inodegc_push);\nDEFINE_FS_EVENT(xfs_inodegc_start);\nDEFINE_FS_EVENT(xfs_inodegc_stop);\nDEFINE_FS_EVENT(xfs_inodegc_queue);\nDEFINE_FS_EVENT(xfs_inodegc_throttle);\nDEFINE_FS_EVENT(xfs_fs_sync_fs);\nDEFINE_FS_EVENT(xfs_blockgc_start);\nDEFINE_FS_EVENT(xfs_blockgc_stop);\nDEFINE_FS_EVENT(xfs_blockgc_worker);\nDEFINE_FS_EVENT(xfs_blockgc_flush_all);\n\nTRACE_EVENT(xfs_inodegc_shrinker_scan,\n\tTP_PROTO(struct xfs_mount *mp, struct shrink_control *sc,\n\t\t void *caller_ip),\n\tTP_ARGS(mp, sc, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned long, nr_to_scan)\n\t\t__field(void *, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->nr_to_scan = sc->nr_to_scan;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d nr_to_scan %lu caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->nr_to_scan,\n\t\t  __entry->caller_ip)\n);\n\nDECLARE_EVENT_CLASS(xfs_ag_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno),\n\tTP_ARGS(mp, agno),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno)\n);\n#define DEFINE_AG_EVENT(name)\t\\\nDEFINE_EVENT(xfs_ag_class, name,\t\\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno),\t\\\n\tTP_ARGS(mp, agno))\n\nDEFINE_AG_EVENT(xfs_read_agf);\nDEFINE_AG_EVENT(xfs_alloc_read_agf);\nDEFINE_AG_EVENT(xfs_read_agi);\nDEFINE_AG_EVENT(xfs_ialloc_read_agi);\n\nTRACE_EVENT(xfs_attr_list_node_descend,\n\tTP_PROTO(struct xfs_attr_list_context *ctx,\n\t\t struct xfs_da_node_entry *btree),\n\tTP_ARGS(ctx, btree),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(u32, hashval)\n\t\t__field(u32, blkno)\n\t\t__field(u32, offset)\n\t\t__field(void *, buffer)\n\t\t__field(int, bufsize)\n\t\t__field(int, count)\n\t\t__field(int, firstu)\n\t\t__field(int, dupcnt)\n\t\t__field(unsigned int, attr_filter)\n\t\t__field(u32, bt_hashval)\n\t\t__field(u32, bt_before)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ctx->dp)->i_sb->s_dev;\n\t\t__entry->ino = ctx->dp->i_ino;\n\t\t__entry->hashval = ctx->cursor.hashval;\n\t\t__entry->blkno = ctx->cursor.blkno;\n\t\t__entry->offset = ctx->cursor.offset;\n\t\t__entry->buffer = ctx->buffer;\n\t\t__entry->bufsize = ctx->bufsize;\n\t\t__entry->count = ctx->count;\n\t\t__entry->firstu = ctx->firstu;\n\t\t__entry->attr_filter = ctx->attr_filter;\n\t\t__entry->bt_hashval = be32_to_cpu(btree->hashval);\n\t\t__entry->bt_before = be32_to_cpu(btree->before);\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx cursor h/b/o 0x%x/0x%x/%u dupcnt %u \"\n\t\t  \"buffer %p size %u count %u firstu %u filter %s \"\n\t\t  \"node hashval %u, node before %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t   __entry->ino,\n\t\t   __entry->hashval,\n\t\t   __entry->blkno,\n\t\t   __entry->offset,\n\t\t   __entry->dupcnt,\n\t\t   __entry->buffer,\n\t\t   __entry->bufsize,\n\t\t   __entry->count,\n\t\t   __entry->firstu,\n\t\t   __print_flags(__entry->attr_filter, \"|\",\n\t\t\t\t XFS_ATTR_FILTER_FLAGS),\n\t\t   __entry->bt_hashval,\n\t\t   __entry->bt_before)\n);\n\nDECLARE_EVENT_CLASS(xfs_bmap_class,\n\tTP_PROTO(struct xfs_inode *ip, struct xfs_iext_cursor *cur, int state,\n\t\t unsigned long caller_ip),\n\tTP_ARGS(ip, cur, state, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(void *, leaf)\n\t\t__field(int, pos)\n\t\t__field(xfs_fileoff_t, startoff)\n\t\t__field(xfs_fsblock_t, startblock)\n\t\t__field(xfs_filblks_t, blockcount)\n\t\t__field(xfs_exntst_t, state)\n\t\t__field(int, bmap_state)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\tstruct xfs_ifork\t*ifp;\n\t\tstruct xfs_bmbt_irec\tr;\n\n\t\tifp = xfs_iext_state_to_fork(ip, state);\n\t\txfs_iext_get_extent(ifp, cur, &r);\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->leaf = cur->leaf;\n\t\t__entry->pos = cur->pos;\n\t\t__entry->startoff = r.br_startoff;\n\t\t__entry->startblock = r.br_startblock;\n\t\t__entry->blockcount = r.br_blockcount;\n\t\t__entry->state = r.br_state;\n\t\t__entry->bmap_state = state;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx state %s cur %p/%d \"\n\t\t  \"fileoff 0x%llx startblock 0x%llx fsbcount 0x%llx flag %d caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_flags(__entry->bmap_state, \"|\", XFS_BMAP_EXT_FLAGS),\n\t\t  __entry->leaf,\n\t\t  __entry->pos,\n\t\t  __entry->startoff,\n\t\t  (int64_t)__entry->startblock,\n\t\t  __entry->blockcount,\n\t\t  __entry->state,\n\t\t  (char *)__entry->caller_ip)\n)\n\n#define DEFINE_BMAP_EVENT(name) \\\nDEFINE_EVENT(xfs_bmap_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, struct xfs_iext_cursor *cur, int state, \\\n\t\t unsigned long caller_ip), \\\n\tTP_ARGS(ip, cur, state, caller_ip))\nDEFINE_BMAP_EVENT(xfs_iext_insert);\nDEFINE_BMAP_EVENT(xfs_iext_remove);\nDEFINE_BMAP_EVENT(xfs_bmap_pre_update);\nDEFINE_BMAP_EVENT(xfs_bmap_post_update);\nDEFINE_BMAP_EVENT(xfs_read_extent);\nDEFINE_BMAP_EVENT(xfs_write_extent);\n\nDECLARE_EVENT_CLASS(xfs_buf_class,\n\tTP_PROTO(struct xfs_buf *bp, unsigned long caller_ip),\n\tTP_ARGS(bp, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_daddr_t, bno)\n\t\t__field(int, nblks)\n\t\t__field(int, hold)\n\t\t__field(int, pincount)\n\t\t__field(unsigned, lockval)\n\t\t__field(unsigned, flags)\n\t\t__field(unsigned long, caller_ip)\n\t\t__field(const void *, buf_ops)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = bp->b_target->bt_dev;\n\t\t__entry->bno = xfs_buf_daddr(bp);\n\t\t__entry->nblks = bp->b_length;\n\t\t__entry->hold = atomic_read(&bp->b_hold);\n\t\t__entry->pincount = atomic_read(&bp->b_pin_count);\n\t\t__entry->lockval = bp->b_sema.count;\n\t\t__entry->flags = bp->b_flags;\n\t\t__entry->caller_ip = caller_ip;\n\t\t__entry->buf_ops = bp->b_ops;\n\t),\n\tTP_printk(\"dev %d:%d daddr 0x%llx bbcount 0x%x hold %d pincount %d \"\n\t\t  \"lock %d flags %s bufops %pS caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long long)__entry->bno,\n\t\t  __entry->nblks,\n\t\t  __entry->hold,\n\t\t  __entry->pincount,\n\t\t  __entry->lockval,\n\t\t  __print_flags(__entry->flags, \"|\", XFS_BUF_FLAGS),\n\t\t  __entry->buf_ops,\n\t\t  (void *)__entry->caller_ip)\n)\n\n#define DEFINE_BUF_EVENT(name) \\\nDEFINE_EVENT(xfs_buf_class, name, \\\n\tTP_PROTO(struct xfs_buf *bp, unsigned long caller_ip), \\\n\tTP_ARGS(bp, caller_ip))\nDEFINE_BUF_EVENT(xfs_buf_init);\nDEFINE_BUF_EVENT(xfs_buf_free);\nDEFINE_BUF_EVENT(xfs_buf_hold);\nDEFINE_BUF_EVENT(xfs_buf_rele);\nDEFINE_BUF_EVENT(xfs_buf_iodone);\nDEFINE_BUF_EVENT(xfs_buf_submit);\nDEFINE_BUF_EVENT(xfs_buf_lock);\nDEFINE_BUF_EVENT(xfs_buf_lock_done);\nDEFINE_BUF_EVENT(xfs_buf_trylock_fail);\nDEFINE_BUF_EVENT(xfs_buf_trylock);\nDEFINE_BUF_EVENT(xfs_buf_unlock);\nDEFINE_BUF_EVENT(xfs_buf_iowait);\nDEFINE_BUF_EVENT(xfs_buf_iowait_done);\nDEFINE_BUF_EVENT(xfs_buf_delwri_queue);\nDEFINE_BUF_EVENT(xfs_buf_delwri_queued);\nDEFINE_BUF_EVENT(xfs_buf_delwri_split);\nDEFINE_BUF_EVENT(xfs_buf_delwri_pushbuf);\nDEFINE_BUF_EVENT(xfs_buf_get_uncached);\nDEFINE_BUF_EVENT(xfs_buf_item_relse);\nDEFINE_BUF_EVENT(xfs_buf_iodone_async);\nDEFINE_BUF_EVENT(xfs_buf_error_relse);\nDEFINE_BUF_EVENT(xfs_buf_drain_buftarg);\nDEFINE_BUF_EVENT(xfs_trans_read_buf_shut);\n\n \nDEFINE_BUF_EVENT(xfs_btree_corrupt);\nDEFINE_BUF_EVENT(xfs_reset_dqcounts);\n\n \nDECLARE_EVENT_CLASS(xfs_buf_flags_class,\n\tTP_PROTO(struct xfs_buf *bp, unsigned flags, unsigned long caller_ip),\n\tTP_ARGS(bp, flags, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_daddr_t, bno)\n\t\t__field(unsigned int, length)\n\t\t__field(int, hold)\n\t\t__field(int, pincount)\n\t\t__field(unsigned, lockval)\n\t\t__field(unsigned, flags)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = bp->b_target->bt_dev;\n\t\t__entry->bno = xfs_buf_daddr(bp);\n\t\t__entry->length = bp->b_length;\n\t\t__entry->flags = flags;\n\t\t__entry->hold = atomic_read(&bp->b_hold);\n\t\t__entry->pincount = atomic_read(&bp->b_pin_count);\n\t\t__entry->lockval = bp->b_sema.count;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d daddr 0x%llx bbcount 0x%x hold %d pincount %d \"\n\t\t  \"lock %d flags %s caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long long)__entry->bno,\n\t\t  __entry->length,\n\t\t  __entry->hold,\n\t\t  __entry->pincount,\n\t\t  __entry->lockval,\n\t\t  __print_flags(__entry->flags, \"|\", XFS_BUF_FLAGS),\n\t\t  (void *)__entry->caller_ip)\n)\n\n#define DEFINE_BUF_FLAGS_EVENT(name) \\\nDEFINE_EVENT(xfs_buf_flags_class, name, \\\n\tTP_PROTO(struct xfs_buf *bp, unsigned flags, unsigned long caller_ip), \\\n\tTP_ARGS(bp, flags, caller_ip))\nDEFINE_BUF_FLAGS_EVENT(xfs_buf_find);\nDEFINE_BUF_FLAGS_EVENT(xfs_buf_get);\nDEFINE_BUF_FLAGS_EVENT(xfs_buf_read);\n\nTRACE_EVENT(xfs_buf_ioerror,\n\tTP_PROTO(struct xfs_buf *bp, int error, xfs_failaddr_t caller_ip),\n\tTP_ARGS(bp, error, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_daddr_t, bno)\n\t\t__field(unsigned int, length)\n\t\t__field(unsigned, flags)\n\t\t__field(int, hold)\n\t\t__field(int, pincount)\n\t\t__field(unsigned, lockval)\n\t\t__field(int, error)\n\t\t__field(xfs_failaddr_t, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = bp->b_target->bt_dev;\n\t\t__entry->bno = xfs_buf_daddr(bp);\n\t\t__entry->length = bp->b_length;\n\t\t__entry->hold = atomic_read(&bp->b_hold);\n\t\t__entry->pincount = atomic_read(&bp->b_pin_count);\n\t\t__entry->lockval = bp->b_sema.count;\n\t\t__entry->error = error;\n\t\t__entry->flags = bp->b_flags;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d daddr 0x%llx bbcount 0x%x hold %d pincount %d \"\n\t\t  \"lock %d error %d flags %s caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long long)__entry->bno,\n\t\t  __entry->length,\n\t\t  __entry->hold,\n\t\t  __entry->pincount,\n\t\t  __entry->lockval,\n\t\t  __entry->error,\n\t\t  __print_flags(__entry->flags, \"|\", XFS_BUF_FLAGS),\n\t\t  (void *)__entry->caller_ip)\n);\n\nDECLARE_EVENT_CLASS(xfs_buf_item_class,\n\tTP_PROTO(struct xfs_buf_log_item *bip),\n\tTP_ARGS(bip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_daddr_t, buf_bno)\n\t\t__field(unsigned int, buf_len)\n\t\t__field(int, buf_hold)\n\t\t__field(int, buf_pincount)\n\t\t__field(int, buf_lockval)\n\t\t__field(unsigned, buf_flags)\n\t\t__field(unsigned, bli_recur)\n\t\t__field(int, bli_refcount)\n\t\t__field(unsigned, bli_flags)\n\t\t__field(unsigned long, li_flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = bip->bli_buf->b_target->bt_dev;\n\t\t__entry->bli_flags = bip->bli_flags;\n\t\t__entry->bli_recur = bip->bli_recur;\n\t\t__entry->bli_refcount = atomic_read(&bip->bli_refcount);\n\t\t__entry->buf_bno = xfs_buf_daddr(bip->bli_buf);\n\t\t__entry->buf_len = bip->bli_buf->b_length;\n\t\t__entry->buf_flags = bip->bli_buf->b_flags;\n\t\t__entry->buf_hold = atomic_read(&bip->bli_buf->b_hold);\n\t\t__entry->buf_pincount = atomic_read(&bip->bli_buf->b_pin_count);\n\t\t__entry->buf_lockval = bip->bli_buf->b_sema.count;\n\t\t__entry->li_flags = bip->bli_item.li_flags;\n\t),\n\tTP_printk(\"dev %d:%d daddr 0x%llx bbcount 0x%x hold %d pincount %d \"\n\t\t  \"lock %d flags %s recur %d refcount %d bliflags %s \"\n\t\t  \"liflags %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  (unsigned long long)__entry->buf_bno,\n\t\t  __entry->buf_len,\n\t\t  __entry->buf_hold,\n\t\t  __entry->buf_pincount,\n\t\t  __entry->buf_lockval,\n\t\t  __print_flags(__entry->buf_flags, \"|\", XFS_BUF_FLAGS),\n\t\t  __entry->bli_recur,\n\t\t  __entry->bli_refcount,\n\t\t  __print_flags(__entry->bli_flags, \"|\", XFS_BLI_FLAGS),\n\t\t  __print_flags(__entry->li_flags, \"|\", XFS_LI_FLAGS))\n)\n\n#define DEFINE_BUF_ITEM_EVENT(name) \\\nDEFINE_EVENT(xfs_buf_item_class, name, \\\n\tTP_PROTO(struct xfs_buf_log_item *bip), \\\n\tTP_ARGS(bip))\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_size);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_size_ordered);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_size_stale);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_format);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_format_stale);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_ordered);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_pin);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_unpin);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_unpin_stale);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_release);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_committed);\nDEFINE_BUF_ITEM_EVENT(xfs_buf_item_push);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_get_buf);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_get_buf_recur);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_getsb);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_getsb_recur);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_read_buf);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_read_buf_recur);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_log_buf);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_brelse);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_bjoin);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_bhold);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_bhold_release);\nDEFINE_BUF_ITEM_EVENT(xfs_trans_binval);\n\nDECLARE_EVENT_CLASS(xfs_filestream_class,\n\tTP_PROTO(struct xfs_perag *pag, xfs_ino_t ino),\n\tTP_ARGS(pag, ino),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(int, streams)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = pag->pag_mount->m_super->s_dev;\n\t\t__entry->ino = ino;\n\t\t__entry->agno = pag->pag_agno;\n\t\t__entry->streams = atomic_read(&pag->pagf_fstrms);\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx agno 0x%x streams %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->agno,\n\t\t  __entry->streams)\n)\n#define DEFINE_FILESTREAM_EVENT(name) \\\nDEFINE_EVENT(xfs_filestream_class, name, \\\n\tTP_PROTO(struct xfs_perag *pag, xfs_ino_t ino), \\\n\tTP_ARGS(pag, ino))\nDEFINE_FILESTREAM_EVENT(xfs_filestream_free);\nDEFINE_FILESTREAM_EVENT(xfs_filestream_lookup);\nDEFINE_FILESTREAM_EVENT(xfs_filestream_scan);\n\nTRACE_EVENT(xfs_filestream_pick,\n\tTP_PROTO(struct xfs_perag *pag, xfs_ino_t ino, xfs_extlen_t free),\n\tTP_ARGS(pag, ino, free),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(int, streams)\n\t\t__field(xfs_extlen_t, free)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = pag->pag_mount->m_super->s_dev;\n\t\t__entry->ino = ino;\n\t\tif (pag) {\n\t\t\t__entry->agno = pag->pag_agno;\n\t\t\t__entry->streams = atomic_read(&pag->pagf_fstrms);\n\t\t} else {\n\t\t\t__entry->agno = NULLAGNUMBER;\n\t\t\t__entry->streams = 0;\n\t\t}\n\t\t__entry->free = free;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx agno 0x%x streams %d free %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->agno,\n\t\t  __entry->streams,\n\t\t  __entry->free)\n);\n\nDECLARE_EVENT_CLASS(xfs_lock_class,\n\tTP_PROTO(struct xfs_inode *ip, unsigned lock_flags,\n\t\t unsigned long caller_ip),\n\tTP_ARGS(ip,  lock_flags, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(int, lock_flags)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->lock_flags = lock_flags;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx flags %s caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_flags(__entry->lock_flags, \"|\", XFS_LOCK_FLAGS),\n\t\t  (void *)__entry->caller_ip)\n)\n\n#define DEFINE_LOCK_EVENT(name) \\\nDEFINE_EVENT(xfs_lock_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, unsigned lock_flags, \\\n\t\t unsigned long caller_ip), \\\n\tTP_ARGS(ip,  lock_flags, caller_ip))\nDEFINE_LOCK_EVENT(xfs_ilock);\nDEFINE_LOCK_EVENT(xfs_ilock_nowait);\nDEFINE_LOCK_EVENT(xfs_ilock_demote);\nDEFINE_LOCK_EVENT(xfs_iunlock);\n\nDECLARE_EVENT_CLASS(xfs_inode_class,\n\tTP_PROTO(struct xfs_inode *ip),\n\tTP_ARGS(ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(unsigned long, iflags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->iflags = ip->i_flags;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx iflags 0x%lx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->iflags)\n)\n\n#define DEFINE_INODE_EVENT(name) \\\nDEFINE_EVENT(xfs_inode_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip), \\\n\tTP_ARGS(ip))\nDEFINE_INODE_EVENT(xfs_iget_skip);\nDEFINE_INODE_EVENT(xfs_iget_recycle);\nDEFINE_INODE_EVENT(xfs_iget_recycle_fail);\nDEFINE_INODE_EVENT(xfs_iget_hit);\nDEFINE_INODE_EVENT(xfs_iget_miss);\n\nDEFINE_INODE_EVENT(xfs_getattr);\nDEFINE_INODE_EVENT(xfs_setattr);\nDEFINE_INODE_EVENT(xfs_readlink);\nDEFINE_INODE_EVENT(xfs_inactive_symlink);\nDEFINE_INODE_EVENT(xfs_alloc_file_space);\nDEFINE_INODE_EVENT(xfs_free_file_space);\nDEFINE_INODE_EVENT(xfs_zero_file_space);\nDEFINE_INODE_EVENT(xfs_collapse_file_space);\nDEFINE_INODE_EVENT(xfs_insert_file_space);\nDEFINE_INODE_EVENT(xfs_readdir);\n#ifdef CONFIG_XFS_POSIX_ACL\nDEFINE_INODE_EVENT(xfs_get_acl);\n#endif\nDEFINE_INODE_EVENT(xfs_vm_bmap);\nDEFINE_INODE_EVENT(xfs_file_ioctl);\nDEFINE_INODE_EVENT(xfs_file_compat_ioctl);\nDEFINE_INODE_EVENT(xfs_ioctl_setattr);\nDEFINE_INODE_EVENT(xfs_dir_fsync);\nDEFINE_INODE_EVENT(xfs_file_fsync);\nDEFINE_INODE_EVENT(xfs_destroy_inode);\nDEFINE_INODE_EVENT(xfs_update_time);\n\nDEFINE_INODE_EVENT(xfs_dquot_dqalloc);\nDEFINE_INODE_EVENT(xfs_dquot_dqdetach);\n\nDEFINE_INODE_EVENT(xfs_inode_set_eofblocks_tag);\nDEFINE_INODE_EVENT(xfs_inode_clear_eofblocks_tag);\nDEFINE_INODE_EVENT(xfs_inode_free_eofblocks_invalid);\nDEFINE_INODE_EVENT(xfs_inode_set_cowblocks_tag);\nDEFINE_INODE_EVENT(xfs_inode_clear_cowblocks_tag);\nDEFINE_INODE_EVENT(xfs_inode_free_cowblocks_invalid);\nDEFINE_INODE_EVENT(xfs_inode_set_reclaimable);\nDEFINE_INODE_EVENT(xfs_inode_reclaiming);\nDEFINE_INODE_EVENT(xfs_inode_set_need_inactive);\nDEFINE_INODE_EVENT(xfs_inode_inactivating);\n\n \nTRACE_DEFINE_ENUM(XFS_REFC_DOMAIN_SHARED);\nTRACE_DEFINE_ENUM(XFS_REFC_DOMAIN_COW);\n\nTRACE_EVENT(xfs_filemap_fault,\n\tTP_PROTO(struct xfs_inode *ip, unsigned int order, bool write_fault),\n\tTP_ARGS(ip, order, write_fault),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(unsigned int, order)\n\t\t__field(bool, write_fault)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->order = order;\n\t\t__entry->write_fault = write_fault;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx order %u write_fault %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->order,\n\t\t  __entry->write_fault)\n)\n\nDECLARE_EVENT_CLASS(xfs_iref_class,\n\tTP_PROTO(struct xfs_inode *ip, unsigned long caller_ip),\n\tTP_ARGS(ip, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(int, count)\n\t\t__field(int, pincount)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->count = atomic_read(&VFS_I(ip)->i_count);\n\t\t__entry->pincount = atomic_read(&ip->i_pincount);\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx count %d pincount %d caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->count,\n\t\t  __entry->pincount,\n\t\t  (char *)__entry->caller_ip)\n)\n\nTRACE_EVENT(xfs_iomap_prealloc_size,\n\tTP_PROTO(struct xfs_inode *ip, xfs_fsblock_t blocks, int shift,\n\t\t unsigned int writeio_blocks),\n\tTP_ARGS(ip, blocks, shift, writeio_blocks),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(xfs_fsblock_t, blocks)\n\t\t__field(int, shift)\n\t\t__field(unsigned int, writeio_blocks)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->blocks = blocks;\n\t\t__entry->shift = shift;\n\t\t__entry->writeio_blocks = writeio_blocks;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx prealloc blocks %llu shift %d \"\n\t\t  \"m_allocsize_blocks %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->ino,\n\t\t  __entry->blocks, __entry->shift, __entry->writeio_blocks)\n)\n\nTRACE_EVENT(xfs_irec_merge_pre,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, xfs_agino_t agino,\n\t\t uint16_t holemask, xfs_agino_t nagino, uint16_t nholemask),\n\tTP_ARGS(mp, agno, agino, holemask, nagino, nholemask),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, agino)\n\t\t__field(uint16_t, holemask)\n\t\t__field(xfs_agino_t, nagino)\n\t\t__field(uint16_t, nholemask)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agino = agino;\n\t\t__entry->holemask = holemask;\n\t\t__entry->nagino = nagino;\n\t\t__entry->nholemask = holemask;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agino 0x%x holemask 0x%x new_agino 0x%x new_holemask 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agino,\n\t\t  __entry->holemask,\n\t\t  __entry->nagino,\n\t\t  __entry->nholemask)\n)\n\nTRACE_EVENT(xfs_irec_merge_post,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, xfs_agino_t agino,\n\t\t uint16_t holemask),\n\tTP_ARGS(mp, agno, agino, holemask),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, agino)\n\t\t__field(uint16_t, holemask)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agino = agino;\n\t\t__entry->holemask = holemask;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agino 0x%x holemask 0x%x\",\n\t\t  MAJOR(__entry->dev),\n\t\t  MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agino,\n\t\t  __entry->holemask)\n)\n\n#define DEFINE_IREF_EVENT(name) \\\nDEFINE_EVENT(xfs_iref_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, unsigned long caller_ip), \\\n\tTP_ARGS(ip, caller_ip))\nDEFINE_IREF_EVENT(xfs_irele);\nDEFINE_IREF_EVENT(xfs_inode_pin);\nDEFINE_IREF_EVENT(xfs_inode_unpin);\nDEFINE_IREF_EVENT(xfs_inode_unpin_nowait);\n\nDECLARE_EVENT_CLASS(xfs_namespace_class,\n\tTP_PROTO(struct xfs_inode *dp, const struct xfs_name *name),\n\tTP_ARGS(dp, name),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, dp_ino)\n\t\t__field(int, namelen)\n\t\t__dynamic_array(char, name, name->len)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(dp)->i_sb->s_dev;\n\t\t__entry->dp_ino = dp->i_ino;\n\t\t__entry->namelen = name->len;\n\t\tmemcpy(__get_str(name), name->name, name->len);\n\t),\n\tTP_printk(\"dev %d:%d dp ino 0x%llx name %.*s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->dp_ino,\n\t\t  __entry->namelen,\n\t\t  __get_str(name))\n)\n\n#define DEFINE_NAMESPACE_EVENT(name) \\\nDEFINE_EVENT(xfs_namespace_class, name, \\\n\tTP_PROTO(struct xfs_inode *dp, const struct xfs_name *name), \\\n\tTP_ARGS(dp, name))\nDEFINE_NAMESPACE_EVENT(xfs_remove);\nDEFINE_NAMESPACE_EVENT(xfs_link);\nDEFINE_NAMESPACE_EVENT(xfs_lookup);\nDEFINE_NAMESPACE_EVENT(xfs_create);\nDEFINE_NAMESPACE_EVENT(xfs_symlink);\n\nTRACE_EVENT(xfs_rename,\n\tTP_PROTO(struct xfs_inode *src_dp, struct xfs_inode *target_dp,\n\t\t struct xfs_name *src_name, struct xfs_name *target_name),\n\tTP_ARGS(src_dp, target_dp, src_name, target_name),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, src_dp_ino)\n\t\t__field(xfs_ino_t, target_dp_ino)\n\t\t__field(int, src_namelen)\n\t\t__field(int, target_namelen)\n\t\t__dynamic_array(char, src_name, src_name->len)\n\t\t__dynamic_array(char, target_name, target_name->len)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(src_dp)->i_sb->s_dev;\n\t\t__entry->src_dp_ino = src_dp->i_ino;\n\t\t__entry->target_dp_ino = target_dp->i_ino;\n\t\t__entry->src_namelen = src_name->len;\n\t\t__entry->target_namelen = target_name->len;\n\t\tmemcpy(__get_str(src_name), src_name->name, src_name->len);\n\t\tmemcpy(__get_str(target_name), target_name->name,\n\t\t\ttarget_name->len);\n\t),\n\tTP_printk(\"dev %d:%d src dp ino 0x%llx target dp ino 0x%llx\"\n\t\t  \" src name %.*s target name %.*s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->src_dp_ino,\n\t\t  __entry->target_dp_ino,\n\t\t  __entry->src_namelen,\n\t\t  __get_str(src_name),\n\t\t  __entry->target_namelen,\n\t\t  __get_str(target_name))\n)\n\nDECLARE_EVENT_CLASS(xfs_dquot_class,\n\tTP_PROTO(struct xfs_dquot *dqp),\n\tTP_ARGS(dqp),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(u32, id)\n\t\t__field(xfs_dqtype_t, type)\n\t\t__field(unsigned, flags)\n\t\t__field(unsigned, nrefs)\n\t\t__field(unsigned long long, res_bcount)\n\t\t__field(unsigned long long, res_rtbcount)\n\t\t__field(unsigned long long, res_icount)\n\n\t\t__field(unsigned long long, bcount)\n\t\t__field(unsigned long long, rtbcount)\n\t\t__field(unsigned long long, icount)\n\n\t\t__field(unsigned long long, blk_hardlimit)\n\t\t__field(unsigned long long, blk_softlimit)\n\t\t__field(unsigned long long, rtb_hardlimit)\n\t\t__field(unsigned long long, rtb_softlimit)\n\t\t__field(unsigned long long, ino_hardlimit)\n\t\t__field(unsigned long long, ino_softlimit)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = dqp->q_mount->m_super->s_dev;\n\t\t__entry->id = dqp->q_id;\n\t\t__entry->type = dqp->q_type;\n\t\t__entry->flags = dqp->q_flags;\n\t\t__entry->nrefs = dqp->q_nrefs;\n\n\t\t__entry->res_bcount = dqp->q_blk.reserved;\n\t\t__entry->res_rtbcount = dqp->q_rtb.reserved;\n\t\t__entry->res_icount = dqp->q_ino.reserved;\n\n\t\t__entry->bcount = dqp->q_blk.count;\n\t\t__entry->rtbcount = dqp->q_rtb.count;\n\t\t__entry->icount = dqp->q_ino.count;\n\n\t\t__entry->blk_hardlimit = dqp->q_blk.hardlimit;\n\t\t__entry->blk_softlimit = dqp->q_blk.softlimit;\n\t\t__entry->rtb_hardlimit = dqp->q_rtb.hardlimit;\n\t\t__entry->rtb_softlimit = dqp->q_rtb.softlimit;\n\t\t__entry->ino_hardlimit = dqp->q_ino.hardlimit;\n\t\t__entry->ino_softlimit = dqp->q_ino.softlimit;\n\t),\n\tTP_printk(\"dev %d:%d id 0x%x type %s flags %s nrefs %u \"\n\t\t  \"res_bc 0x%llx res_rtbc 0x%llx res_ic 0x%llx \"\n\t\t  \"bcnt 0x%llx bhardlimit 0x%llx bsoftlimit 0x%llx \"\n\t\t  \"rtbcnt 0x%llx rtbhardlimit 0x%llx rtbsoftlimit 0x%llx \"\n\t\t  \"icnt 0x%llx ihardlimit 0x%llx isoftlimit 0x%llx]\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->id,\n\t\t  __print_flags(__entry->type, \"|\", XFS_DQTYPE_STRINGS),\n\t\t  __print_flags(__entry->flags, \"|\", XFS_DQFLAG_STRINGS),\n\t\t  __entry->nrefs,\n\t\t  __entry->res_bcount,\n\t\t  __entry->res_rtbcount,\n\t\t  __entry->res_icount,\n\t\t  __entry->bcount,\n\t\t  __entry->blk_hardlimit,\n\t\t  __entry->blk_softlimit,\n\t\t  __entry->rtbcount,\n\t\t  __entry->rtb_hardlimit,\n\t\t  __entry->rtb_softlimit,\n\t\t  __entry->icount,\n\t\t  __entry->ino_hardlimit,\n\t\t  __entry->ino_softlimit)\n)\n\n#define DEFINE_DQUOT_EVENT(name) \\\nDEFINE_EVENT(xfs_dquot_class, name, \\\n\tTP_PROTO(struct xfs_dquot *dqp), \\\n\tTP_ARGS(dqp))\nDEFINE_DQUOT_EVENT(xfs_dqadjust);\nDEFINE_DQUOT_EVENT(xfs_dqreclaim_want);\nDEFINE_DQUOT_EVENT(xfs_dqreclaim_dirty);\nDEFINE_DQUOT_EVENT(xfs_dqreclaim_busy);\nDEFINE_DQUOT_EVENT(xfs_dqreclaim_done);\nDEFINE_DQUOT_EVENT(xfs_dqattach_found);\nDEFINE_DQUOT_EVENT(xfs_dqattach_get);\nDEFINE_DQUOT_EVENT(xfs_dqalloc);\nDEFINE_DQUOT_EVENT(xfs_dqtobp_read);\nDEFINE_DQUOT_EVENT(xfs_dqread);\nDEFINE_DQUOT_EVENT(xfs_dqread_fail);\nDEFINE_DQUOT_EVENT(xfs_dqget_hit);\nDEFINE_DQUOT_EVENT(xfs_dqget_miss);\nDEFINE_DQUOT_EVENT(xfs_dqget_freeing);\nDEFINE_DQUOT_EVENT(xfs_dqget_dup);\nDEFINE_DQUOT_EVENT(xfs_dqput);\nDEFINE_DQUOT_EVENT(xfs_dqput_free);\nDEFINE_DQUOT_EVENT(xfs_dqrele);\nDEFINE_DQUOT_EVENT(xfs_dqflush);\nDEFINE_DQUOT_EVENT(xfs_dqflush_force);\nDEFINE_DQUOT_EVENT(xfs_dqflush_done);\nDEFINE_DQUOT_EVENT(xfs_trans_apply_dquot_deltas_before);\nDEFINE_DQUOT_EVENT(xfs_trans_apply_dquot_deltas_after);\n\nTRACE_EVENT(xfs_trans_mod_dquot,\n\tTP_PROTO(struct xfs_trans *tp, struct xfs_dquot *dqp,\n\t\t unsigned int field, int64_t delta),\n\tTP_ARGS(tp, dqp, field, delta),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_dqtype_t, type)\n\t\t__field(unsigned int, flags)\n\t\t__field(unsigned int, dqid)\n\t\t__field(unsigned int, field)\n\t\t__field(int64_t, delta)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = tp->t_mountp->m_super->s_dev;\n\t\t__entry->type = dqp->q_type;\n\t\t__entry->flags = dqp->q_flags;\n\t\t__entry->dqid = dqp->q_id;\n\t\t__entry->field = field;\n\t\t__entry->delta = delta;\n\t),\n\tTP_printk(\"dev %d:%d dquot id 0x%x type %s flags %s field %s delta %lld\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->dqid,\n\t\t  __print_flags(__entry->type, \"|\", XFS_DQTYPE_STRINGS),\n\t\t  __print_flags(__entry->flags, \"|\", XFS_DQFLAG_STRINGS),\n\t\t  __print_flags(__entry->field, \"|\", XFS_QMOPT_FLAGS),\n\t\t  __entry->delta)\n);\n\nDECLARE_EVENT_CLASS(xfs_dqtrx_class,\n\tTP_PROTO(struct xfs_dqtrx *qtrx),\n\tTP_ARGS(qtrx),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_dqtype_t, type)\n\t\t__field(unsigned int, flags)\n\t\t__field(u32, dqid)\n\n\t\t__field(uint64_t, blk_res)\n\t\t__field(int64_t,  bcount_delta)\n\t\t__field(int64_t,  delbcnt_delta)\n\n\t\t__field(uint64_t, rtblk_res)\n\t\t__field(uint64_t, rtblk_res_used)\n\t\t__field(int64_t,  rtbcount_delta)\n\t\t__field(int64_t,  delrtb_delta)\n\n\t\t__field(uint64_t, ino_res)\n\t\t__field(uint64_t, ino_res_used)\n\t\t__field(int64_t,  icount_delta)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = qtrx->qt_dquot->q_mount->m_super->s_dev;\n\t\t__entry->type = qtrx->qt_dquot->q_type;\n\t\t__entry->flags = qtrx->qt_dquot->q_flags;\n\t\t__entry->dqid = qtrx->qt_dquot->q_id;\n\n\t\t__entry->blk_res = qtrx->qt_blk_res;\n\t\t__entry->bcount_delta = qtrx->qt_bcount_delta;\n\t\t__entry->delbcnt_delta = qtrx->qt_delbcnt_delta;\n\n\t\t__entry->rtblk_res = qtrx->qt_rtblk_res;\n\t\t__entry->rtblk_res_used = qtrx->qt_rtblk_res_used;\n\t\t__entry->rtbcount_delta = qtrx->qt_rtbcount_delta;\n\t\t__entry->delrtb_delta = qtrx->qt_delrtb_delta;\n\n\t\t__entry->ino_res = qtrx->qt_ino_res;\n\t\t__entry->ino_res_used = qtrx->qt_ino_res_used;\n\t\t__entry->icount_delta = qtrx->qt_icount_delta;\n\t),\n\tTP_printk(\"dev %d:%d dquot id 0x%x type %s flags %s \"\n\t\t  \"blk_res %llu bcount_delta %lld delbcnt_delta %lld \"\n\t\t  \"rtblk_res %llu rtblk_res_used %llu rtbcount_delta %lld delrtb_delta %lld \"\n\t\t  \"ino_res %llu ino_res_used %llu icount_delta %lld\",\n\t\tMAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t__entry->dqid,\n\t\t  __print_flags(__entry->type, \"|\", XFS_DQTYPE_STRINGS),\n\t\t  __print_flags(__entry->flags, \"|\", XFS_DQFLAG_STRINGS),\n\n\t\t__entry->blk_res,\n\t\t__entry->bcount_delta,\n\t\t__entry->delbcnt_delta,\n\n\t\t__entry->rtblk_res,\n\t\t__entry->rtblk_res_used,\n\t\t__entry->rtbcount_delta,\n\t\t__entry->delrtb_delta,\n\n\t\t__entry->ino_res,\n\t\t__entry->ino_res_used,\n\t\t__entry->icount_delta)\n)\n\n#define DEFINE_DQTRX_EVENT(name) \\\nDEFINE_EVENT(xfs_dqtrx_class, name, \\\n\tTP_PROTO(struct xfs_dqtrx *qtrx), \\\n\tTP_ARGS(qtrx))\nDEFINE_DQTRX_EVENT(xfs_trans_apply_dquot_deltas);\nDEFINE_DQTRX_EVENT(xfs_trans_mod_dquot_before);\nDEFINE_DQTRX_EVENT(xfs_trans_mod_dquot_after);\n\nDECLARE_EVENT_CLASS(xfs_loggrant_class,\n\tTP_PROTO(struct xlog *log, struct xlog_ticket *tic),\n\tTP_ARGS(log, tic),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(char, ocnt)\n\t\t__field(char, cnt)\n\t\t__field(int, curr_res)\n\t\t__field(int, unit_res)\n\t\t__field(unsigned int, flags)\n\t\t__field(int, reserveq)\n\t\t__field(int, writeq)\n\t\t__field(int, grant_reserve_cycle)\n\t\t__field(int, grant_reserve_bytes)\n\t\t__field(int, grant_write_cycle)\n\t\t__field(int, grant_write_bytes)\n\t\t__field(int, curr_cycle)\n\t\t__field(int, curr_block)\n\t\t__field(xfs_lsn_t, tail_lsn)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = log->l_mp->m_super->s_dev;\n\t\t__entry->ocnt = tic->t_ocnt;\n\t\t__entry->cnt = tic->t_cnt;\n\t\t__entry->curr_res = tic->t_curr_res;\n\t\t__entry->unit_res = tic->t_unit_res;\n\t\t__entry->flags = tic->t_flags;\n\t\t__entry->reserveq = list_empty(&log->l_reserve_head.waiters);\n\t\t__entry->writeq = list_empty(&log->l_write_head.waiters);\n\t\txlog_crack_grant_head(&log->l_reserve_head.grant,\n\t\t\t\t&__entry->grant_reserve_cycle,\n\t\t\t\t&__entry->grant_reserve_bytes);\n\t\txlog_crack_grant_head(&log->l_write_head.grant,\n\t\t\t\t&__entry->grant_write_cycle,\n\t\t\t\t&__entry->grant_write_bytes);\n\t\t__entry->curr_cycle = log->l_curr_cycle;\n\t\t__entry->curr_block = log->l_curr_block;\n\t\t__entry->tail_lsn = atomic64_read(&log->l_tail_lsn);\n\t),\n\tTP_printk(\"dev %d:%d t_ocnt %u t_cnt %u t_curr_res %u \"\n\t\t  \"t_unit_res %u t_flags %s reserveq %s \"\n\t\t  \"writeq %s grant_reserve_cycle %d \"\n\t\t  \"grant_reserve_bytes %d grant_write_cycle %d \"\n\t\t  \"grant_write_bytes %d curr_cycle %d curr_block %d \"\n\t\t  \"tail_cycle %d tail_block %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ocnt,\n\t\t  __entry->cnt,\n\t\t  __entry->curr_res,\n\t\t  __entry->unit_res,\n\t\t  __print_flags(__entry->flags, \"|\", XLOG_TIC_FLAGS),\n\t\t  __entry->reserveq ? \"empty\" : \"active\",\n\t\t  __entry->writeq ? \"empty\" : \"active\",\n\t\t  __entry->grant_reserve_cycle,\n\t\t  __entry->grant_reserve_bytes,\n\t\t  __entry->grant_write_cycle,\n\t\t  __entry->grant_write_bytes,\n\t\t  __entry->curr_cycle,\n\t\t  __entry->curr_block,\n\t\t  CYCLE_LSN(__entry->tail_lsn),\n\t\t  BLOCK_LSN(__entry->tail_lsn)\n\t)\n)\n\n#define DEFINE_LOGGRANT_EVENT(name) \\\nDEFINE_EVENT(xfs_loggrant_class, name, \\\n\tTP_PROTO(struct xlog *log, struct xlog_ticket *tic), \\\n\tTP_ARGS(log, tic))\nDEFINE_LOGGRANT_EVENT(xfs_log_umount_write);\nDEFINE_LOGGRANT_EVENT(xfs_log_grant_sleep);\nDEFINE_LOGGRANT_EVENT(xfs_log_grant_wake);\nDEFINE_LOGGRANT_EVENT(xfs_log_grant_wake_up);\nDEFINE_LOGGRANT_EVENT(xfs_log_reserve);\nDEFINE_LOGGRANT_EVENT(xfs_log_reserve_exit);\nDEFINE_LOGGRANT_EVENT(xfs_log_regrant);\nDEFINE_LOGGRANT_EVENT(xfs_log_regrant_exit);\nDEFINE_LOGGRANT_EVENT(xfs_log_ticket_regrant);\nDEFINE_LOGGRANT_EVENT(xfs_log_ticket_regrant_exit);\nDEFINE_LOGGRANT_EVENT(xfs_log_ticket_regrant_sub);\nDEFINE_LOGGRANT_EVENT(xfs_log_ticket_ungrant);\nDEFINE_LOGGRANT_EVENT(xfs_log_ticket_ungrant_sub);\nDEFINE_LOGGRANT_EVENT(xfs_log_ticket_ungrant_exit);\nDEFINE_LOGGRANT_EVENT(xfs_log_cil_wait);\n\nDECLARE_EVENT_CLASS(xfs_log_item_class,\n\tTP_PROTO(struct xfs_log_item *lip),\n\tTP_ARGS(lip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(void *, lip)\n\t\t__field(uint, type)\n\t\t__field(unsigned long, flags)\n\t\t__field(xfs_lsn_t, lsn)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = lip->li_log->l_mp->m_super->s_dev;\n\t\t__entry->lip = lip;\n\t\t__entry->type = lip->li_type;\n\t\t__entry->flags = lip->li_flags;\n\t\t__entry->lsn = lip->li_lsn;\n\t),\n\tTP_printk(\"dev %d:%d lip %p lsn %d/%d type %s flags %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->lip,\n\t\t  CYCLE_LSN(__entry->lsn), BLOCK_LSN(__entry->lsn),\n\t\t  __print_symbolic(__entry->type, XFS_LI_TYPE_DESC),\n\t\t  __print_flags(__entry->flags, \"|\", XFS_LI_FLAGS))\n)\n\nTRACE_EVENT(xfs_log_force,\n\tTP_PROTO(struct xfs_mount *mp, xfs_lsn_t lsn, unsigned long caller_ip),\n\tTP_ARGS(mp, lsn, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_lsn_t, lsn)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->lsn = lsn;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d lsn 0x%llx caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->lsn, (void *)__entry->caller_ip)\n)\n\n#define DEFINE_LOG_ITEM_EVENT(name) \\\nDEFINE_EVENT(xfs_log_item_class, name, \\\n\tTP_PROTO(struct xfs_log_item *lip), \\\n\tTP_ARGS(lip))\nDEFINE_LOG_ITEM_EVENT(xfs_ail_push);\nDEFINE_LOG_ITEM_EVENT(xfs_ail_pinned);\nDEFINE_LOG_ITEM_EVENT(xfs_ail_locked);\nDEFINE_LOG_ITEM_EVENT(xfs_ail_flushing);\nDEFINE_LOG_ITEM_EVENT(xfs_cil_whiteout_mark);\nDEFINE_LOG_ITEM_EVENT(xfs_cil_whiteout_skip);\nDEFINE_LOG_ITEM_EVENT(xfs_cil_whiteout_unpin);\n\nDECLARE_EVENT_CLASS(xfs_ail_class,\n\tTP_PROTO(struct xfs_log_item *lip, xfs_lsn_t old_lsn, xfs_lsn_t new_lsn),\n\tTP_ARGS(lip, old_lsn, new_lsn),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(void *, lip)\n\t\t__field(uint, type)\n\t\t__field(unsigned long, flags)\n\t\t__field(xfs_lsn_t, old_lsn)\n\t\t__field(xfs_lsn_t, new_lsn)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = lip->li_log->l_mp->m_super->s_dev;\n\t\t__entry->lip = lip;\n\t\t__entry->type = lip->li_type;\n\t\t__entry->flags = lip->li_flags;\n\t\t__entry->old_lsn = old_lsn;\n\t\t__entry->new_lsn = new_lsn;\n\t),\n\tTP_printk(\"dev %d:%d lip %p old lsn %d/%d new lsn %d/%d type %s flags %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->lip,\n\t\t  CYCLE_LSN(__entry->old_lsn), BLOCK_LSN(__entry->old_lsn),\n\t\t  CYCLE_LSN(__entry->new_lsn), BLOCK_LSN(__entry->new_lsn),\n\t\t  __print_symbolic(__entry->type, XFS_LI_TYPE_DESC),\n\t\t  __print_flags(__entry->flags, \"|\", XFS_LI_FLAGS))\n)\n\n#define DEFINE_AIL_EVENT(name) \\\nDEFINE_EVENT(xfs_ail_class, name, \\\n\tTP_PROTO(struct xfs_log_item *lip, xfs_lsn_t old_lsn, xfs_lsn_t new_lsn), \\\n\tTP_ARGS(lip, old_lsn, new_lsn))\nDEFINE_AIL_EVENT(xfs_ail_insert);\nDEFINE_AIL_EVENT(xfs_ail_move);\nDEFINE_AIL_EVENT(xfs_ail_delete);\n\nTRACE_EVENT(xfs_log_assign_tail_lsn,\n\tTP_PROTO(struct xlog *log, xfs_lsn_t new_lsn),\n\tTP_ARGS(log, new_lsn),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_lsn_t, new_lsn)\n\t\t__field(xfs_lsn_t, old_lsn)\n\t\t__field(xfs_lsn_t, last_sync_lsn)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = log->l_mp->m_super->s_dev;\n\t\t__entry->new_lsn = new_lsn;\n\t\t__entry->old_lsn = atomic64_read(&log->l_tail_lsn);\n\t\t__entry->last_sync_lsn = atomic64_read(&log->l_last_sync_lsn);\n\t),\n\tTP_printk(\"dev %d:%d new tail lsn %d/%d, old lsn %d/%d, last sync %d/%d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  CYCLE_LSN(__entry->new_lsn), BLOCK_LSN(__entry->new_lsn),\n\t\t  CYCLE_LSN(__entry->old_lsn), BLOCK_LSN(__entry->old_lsn),\n\t\t  CYCLE_LSN(__entry->last_sync_lsn), BLOCK_LSN(__entry->last_sync_lsn))\n)\n\nDECLARE_EVENT_CLASS(xfs_file_class,\n\tTP_PROTO(struct kiocb *iocb, struct iov_iter *iter),\n\tTP_ARGS(iocb, iter),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(xfs_fsize_t, size)\n\t\t__field(loff_t, offset)\n\t\t__field(size_t, count)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = file_inode(iocb->ki_filp)->i_sb->s_dev;\n\t\t__entry->ino = XFS_I(file_inode(iocb->ki_filp))->i_ino;\n\t\t__entry->size = XFS_I(file_inode(iocb->ki_filp))->i_disk_size;\n\t\t__entry->offset = iocb->ki_pos;\n\t\t__entry->count = iov_iter_count(iter);\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx disize 0x%llx pos 0x%llx bytecount 0x%zx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->size,\n\t\t  __entry->offset,\n\t\t  __entry->count)\n)\n\n#define DEFINE_RW_EVENT(name)\t\t\\\nDEFINE_EVENT(xfs_file_class, name,\t\\\n\tTP_PROTO(struct kiocb *iocb, struct iov_iter *iter),\t\t\\\n\tTP_ARGS(iocb, iter))\nDEFINE_RW_EVENT(xfs_file_buffered_read);\nDEFINE_RW_EVENT(xfs_file_direct_read);\nDEFINE_RW_EVENT(xfs_file_dax_read);\nDEFINE_RW_EVENT(xfs_file_buffered_write);\nDEFINE_RW_EVENT(xfs_file_direct_write);\nDEFINE_RW_EVENT(xfs_file_dax_write);\nDEFINE_RW_EVENT(xfs_reflink_bounce_dio_write);\n\nDECLARE_EVENT_CLASS(xfs_imap_class,\n\tTP_PROTO(struct xfs_inode *ip, xfs_off_t offset, ssize_t count,\n\t\t int whichfork, struct xfs_bmbt_irec *irec),\n\tTP_ARGS(ip, offset, count, whichfork, irec),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(loff_t, size)\n\t\t__field(loff_t, offset)\n\t\t__field(size_t, count)\n\t\t__field(int, whichfork)\n\t\t__field(xfs_fileoff_t, startoff)\n\t\t__field(xfs_fsblock_t, startblock)\n\t\t__field(xfs_filblks_t, blockcount)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->size = ip->i_disk_size;\n\t\t__entry->offset = offset;\n\t\t__entry->count = count;\n\t\t__entry->whichfork = whichfork;\n\t\t__entry->startoff = irec ? irec->br_startoff : 0;\n\t\t__entry->startblock = irec ? irec->br_startblock : 0;\n\t\t__entry->blockcount = irec ? irec->br_blockcount : 0;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx disize 0x%llx pos 0x%llx bytecount 0x%zx \"\n\t\t  \"fork %s startoff 0x%llx startblock 0x%llx fsbcount 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->size,\n\t\t  __entry->offset,\n\t\t  __entry->count,\n\t\t  __print_symbolic(__entry->whichfork, XFS_WHICHFORK_STRINGS),\n\t\t  __entry->startoff,\n\t\t  (int64_t)__entry->startblock,\n\t\t  __entry->blockcount)\n)\n\n#define DEFINE_IMAP_EVENT(name)\t\\\nDEFINE_EVENT(xfs_imap_class, name,\t\\\n\tTP_PROTO(struct xfs_inode *ip, xfs_off_t offset, ssize_t count,\t\\\n\t\t int whichfork, struct xfs_bmbt_irec *irec),\t\t\\\n\tTP_ARGS(ip, offset, count, whichfork, irec))\nDEFINE_IMAP_EVENT(xfs_map_blocks_found);\nDEFINE_IMAP_EVENT(xfs_map_blocks_alloc);\nDEFINE_IMAP_EVENT(xfs_iomap_alloc);\nDEFINE_IMAP_EVENT(xfs_iomap_found);\n\nDECLARE_EVENT_CLASS(xfs_simple_io_class,\n\tTP_PROTO(struct xfs_inode *ip, xfs_off_t offset, ssize_t count),\n\tTP_ARGS(ip, offset, count),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(loff_t, isize)\n\t\t__field(loff_t, disize)\n\t\t__field(loff_t, offset)\n\t\t__field(size_t, count)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->isize = VFS_I(ip)->i_size;\n\t\t__entry->disize = ip->i_disk_size;\n\t\t__entry->offset = offset;\n\t\t__entry->count = count;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx isize 0x%llx disize 0x%llx \"\n\t\t  \"pos 0x%llx bytecount 0x%zx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->isize,\n\t\t  __entry->disize,\n\t\t  __entry->offset,\n\t\t  __entry->count)\n);\n\n#define DEFINE_SIMPLE_IO_EVENT(name)\t\\\nDEFINE_EVENT(xfs_simple_io_class, name,\t\\\n\tTP_PROTO(struct xfs_inode *ip, xfs_off_t offset, ssize_t count),\t\\\n\tTP_ARGS(ip, offset, count))\nDEFINE_SIMPLE_IO_EVENT(xfs_delalloc_enospc);\nDEFINE_SIMPLE_IO_EVENT(xfs_unwritten_convert);\nDEFINE_SIMPLE_IO_EVENT(xfs_setfilesize);\nDEFINE_SIMPLE_IO_EVENT(xfs_zero_eof);\nDEFINE_SIMPLE_IO_EVENT(xfs_end_io_direct_write);\nDEFINE_SIMPLE_IO_EVENT(xfs_end_io_direct_write_unwritten);\nDEFINE_SIMPLE_IO_EVENT(xfs_end_io_direct_write_append);\nDEFINE_SIMPLE_IO_EVENT(xfs_file_splice_read);\n\nDECLARE_EVENT_CLASS(xfs_itrunc_class,\n\tTP_PROTO(struct xfs_inode *ip, xfs_fsize_t new_size),\n\tTP_ARGS(ip, new_size),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(xfs_fsize_t, size)\n\t\t__field(xfs_fsize_t, new_size)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->size = ip->i_disk_size;\n\t\t__entry->new_size = new_size;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx disize 0x%llx new_size 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->size,\n\t\t  __entry->new_size)\n)\n\n#define DEFINE_ITRUNC_EVENT(name) \\\nDEFINE_EVENT(xfs_itrunc_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, xfs_fsize_t new_size), \\\n\tTP_ARGS(ip, new_size))\nDEFINE_ITRUNC_EVENT(xfs_itruncate_extents_start);\nDEFINE_ITRUNC_EVENT(xfs_itruncate_extents_end);\n\nTRACE_EVENT(xfs_pagecache_inval,\n\tTP_PROTO(struct xfs_inode *ip, xfs_off_t start, xfs_off_t finish),\n\tTP_ARGS(ip, start, finish),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(xfs_fsize_t, size)\n\t\t__field(xfs_off_t, start)\n\t\t__field(xfs_off_t, finish)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->size = ip->i_disk_size;\n\t\t__entry->start = start;\n\t\t__entry->finish = finish;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx disize 0x%llx start 0x%llx finish 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->size,\n\t\t  __entry->start,\n\t\t  __entry->finish)\n);\n\nTRACE_EVENT(xfs_bunmap,\n\tTP_PROTO(struct xfs_inode *ip, xfs_fileoff_t fileoff, xfs_filblks_t len,\n\t\t int flags, unsigned long caller_ip),\n\tTP_ARGS(ip, fileoff, len, flags, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(xfs_fsize_t, size)\n\t\t__field(xfs_fileoff_t, fileoff)\n\t\t__field(xfs_filblks_t, len)\n\t\t__field(unsigned long, caller_ip)\n\t\t__field(int, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->size = ip->i_disk_size;\n\t\t__entry->fileoff = fileoff;\n\t\t__entry->len = len;\n\t\t__entry->caller_ip = caller_ip;\n\t\t__entry->flags = flags;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx disize 0x%llx fileoff 0x%llx fsbcount 0x%llx \"\n\t\t  \"flags %s caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->size,\n\t\t  __entry->fileoff,\n\t\t  __entry->len,\n\t\t  __print_flags(__entry->flags, \"|\", XFS_BMAPI_FLAGS),\n\t\t  (void *)__entry->caller_ip)\n\n);\n\nDECLARE_EVENT_CLASS(xfs_extent_busy_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agblock_t agbno, xfs_extlen_t len),\n\tTP_ARGS(mp, agno, agbno, len),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len)\n);\n#define DEFINE_BUSY_EVENT(name) \\\nDEFINE_EVENT(xfs_extent_busy_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t xfs_agblock_t agbno, xfs_extlen_t len), \\\n\tTP_ARGS(mp, agno, agbno, len))\nDEFINE_BUSY_EVENT(xfs_extent_busy);\nDEFINE_BUSY_EVENT(xfs_extent_busy_enomem);\nDEFINE_BUSY_EVENT(xfs_extent_busy_force);\nDEFINE_BUSY_EVENT(xfs_extent_busy_reuse);\nDEFINE_BUSY_EVENT(xfs_extent_busy_clear);\n\nTRACE_EVENT(xfs_extent_busy_trim,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agblock_t agbno, xfs_extlen_t len,\n\t\t xfs_agblock_t tbno, xfs_extlen_t tlen),\n\tTP_ARGS(mp, agno, agbno, len, tbno, tlen),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t\t__field(xfs_agblock_t, tbno)\n\t\t__field(xfs_extlen_t, tlen)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t\t__entry->tbno = tbno;\n\t\t__entry->tlen = tlen;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x found_agbno 0x%x found_fsbcount 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len,\n\t\t  __entry->tbno,\n\t\t  __entry->tlen)\n);\n\nDECLARE_EVENT_CLASS(xfs_agf_class,\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_agf *agf, int flags,\n\t\t unsigned long caller_ip),\n\tTP_ARGS(mp, agf, flags, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(int, flags)\n\t\t__field(__u32, length)\n\t\t__field(__u32, bno_root)\n\t\t__field(__u32, cnt_root)\n\t\t__field(__u32, bno_level)\n\t\t__field(__u32, cnt_level)\n\t\t__field(__u32, flfirst)\n\t\t__field(__u32, fllast)\n\t\t__field(__u32, flcount)\n\t\t__field(__u32, freeblks)\n\t\t__field(__u32, longest)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = be32_to_cpu(agf->agf_seqno),\n\t\t__entry->flags = flags;\n\t\t__entry->length = be32_to_cpu(agf->agf_length),\n\t\t__entry->bno_root = be32_to_cpu(agf->agf_roots[XFS_BTNUM_BNO]),\n\t\t__entry->cnt_root = be32_to_cpu(agf->agf_roots[XFS_BTNUM_CNT]),\n\t\t__entry->bno_level =\n\t\t\t\tbe32_to_cpu(agf->agf_levels[XFS_BTNUM_BNO]),\n\t\t__entry->cnt_level =\n\t\t\t\tbe32_to_cpu(agf->agf_levels[XFS_BTNUM_CNT]),\n\t\t__entry->flfirst = be32_to_cpu(agf->agf_flfirst),\n\t\t__entry->fllast = be32_to_cpu(agf->agf_fllast),\n\t\t__entry->flcount = be32_to_cpu(agf->agf_flcount),\n\t\t__entry->freeblks = be32_to_cpu(agf->agf_freeblks),\n\t\t__entry->longest = be32_to_cpu(agf->agf_longest);\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x flags %s length %u roots b %u c %u \"\n\t\t  \"levels b %u c %u flfirst %u fllast %u flcount %u \"\n\t\t  \"freeblks %u longest %u caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __print_flags(__entry->flags, \"|\", XFS_AGF_FLAGS),\n\t\t  __entry->length,\n\t\t  __entry->bno_root,\n\t\t  __entry->cnt_root,\n\t\t  __entry->bno_level,\n\t\t  __entry->cnt_level,\n\t\t  __entry->flfirst,\n\t\t  __entry->fllast,\n\t\t  __entry->flcount,\n\t\t  __entry->freeblks,\n\t\t  __entry->longest,\n\t\t  (void *)__entry->caller_ip)\n);\n#define DEFINE_AGF_EVENT(name) \\\nDEFINE_EVENT(xfs_agf_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_agf *agf, int flags, \\\n\t\t unsigned long caller_ip), \\\n\tTP_ARGS(mp, agf, flags, caller_ip))\nDEFINE_AGF_EVENT(xfs_agf);\nDEFINE_AGF_EVENT(xfs_agfl_reset);\n\nTRACE_EVENT(xfs_free_extent,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, xfs_agblock_t agbno,\n\t\t xfs_extlen_t len, enum xfs_ag_resv_type resv, int haveleft,\n\t\t int haveright),\n\tTP_ARGS(mp, agno, agbno, len, resv, haveleft, haveright),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t\t__field(int, resv)\n\t\t__field(int, haveleft)\n\t\t__field(int, haveright)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t\t__entry->resv = resv;\n\t\t__entry->haveleft = haveleft;\n\t\t__entry->haveright = haveright;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x resv %d %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len,\n\t\t  __entry->resv,\n\t\t  __entry->haveleft ?\n\t\t\t(__entry->haveright ? \"both\" : \"left\") :\n\t\t\t(__entry->haveright ? \"right\" : \"none\"))\n\n);\n\nDECLARE_EVENT_CLASS(xfs_alloc_class,\n\tTP_PROTO(struct xfs_alloc_arg *args),\n\tTP_ARGS(args),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, minlen)\n\t\t__field(xfs_extlen_t, maxlen)\n\t\t__field(xfs_extlen_t, mod)\n\t\t__field(xfs_extlen_t, prod)\n\t\t__field(xfs_extlen_t, minleft)\n\t\t__field(xfs_extlen_t, total)\n\t\t__field(xfs_extlen_t, alignment)\n\t\t__field(xfs_extlen_t, minalignslop)\n\t\t__field(xfs_extlen_t, len)\n\t\t__field(char, wasdel)\n\t\t__field(char, wasfromfl)\n\t\t__field(int, resv)\n\t\t__field(int, datatype)\n\t\t__field(xfs_agnumber_t, highest_agno)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = args->mp->m_super->s_dev;\n\t\t__entry->agno = args->agno;\n\t\t__entry->agbno = args->agbno;\n\t\t__entry->minlen = args->minlen;\n\t\t__entry->maxlen = args->maxlen;\n\t\t__entry->mod = args->mod;\n\t\t__entry->prod = args->prod;\n\t\t__entry->minleft = args->minleft;\n\t\t__entry->total = args->total;\n\t\t__entry->alignment = args->alignment;\n\t\t__entry->minalignslop = args->minalignslop;\n\t\t__entry->len = args->len;\n\t\t__entry->wasdel = args->wasdel;\n\t\t__entry->wasfromfl = args->wasfromfl;\n\t\t__entry->resv = args->resv;\n\t\t__entry->datatype = args->datatype;\n\t\t__entry->highest_agno = args->tp->t_highest_agno;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x minlen %u maxlen %u mod %u \"\n\t\t  \"prod %u minleft %u total %u alignment %u minalignslop %u \"\n\t\t  \"len %u wasdel %d wasfromfl %d resv %d \"\n\t\t  \"datatype 0x%x highest_agno 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->minlen,\n\t\t  __entry->maxlen,\n\t\t  __entry->mod,\n\t\t  __entry->prod,\n\t\t  __entry->minleft,\n\t\t  __entry->total,\n\t\t  __entry->alignment,\n\t\t  __entry->minalignslop,\n\t\t  __entry->len,\n\t\t  __entry->wasdel,\n\t\t  __entry->wasfromfl,\n\t\t  __entry->resv,\n\t\t  __entry->datatype,\n\t\t  __entry->highest_agno)\n)\n\n#define DEFINE_ALLOC_EVENT(name) \\\nDEFINE_EVENT(xfs_alloc_class, name, \\\n\tTP_PROTO(struct xfs_alloc_arg *args), \\\n\tTP_ARGS(args))\nDEFINE_ALLOC_EVENT(xfs_alloc_exact_done);\nDEFINE_ALLOC_EVENT(xfs_alloc_exact_notfound);\nDEFINE_ALLOC_EVENT(xfs_alloc_exact_error);\nDEFINE_ALLOC_EVENT(xfs_alloc_near_nominleft);\nDEFINE_ALLOC_EVENT(xfs_alloc_near_first);\nDEFINE_ALLOC_EVENT(xfs_alloc_cur);\nDEFINE_ALLOC_EVENT(xfs_alloc_cur_right);\nDEFINE_ALLOC_EVENT(xfs_alloc_cur_left);\nDEFINE_ALLOC_EVENT(xfs_alloc_cur_lookup);\nDEFINE_ALLOC_EVENT(xfs_alloc_cur_lookup_done);\nDEFINE_ALLOC_EVENT(xfs_alloc_near_error);\nDEFINE_ALLOC_EVENT(xfs_alloc_near_noentry);\nDEFINE_ALLOC_EVENT(xfs_alloc_near_busy);\nDEFINE_ALLOC_EVENT(xfs_alloc_size_neither);\nDEFINE_ALLOC_EVENT(xfs_alloc_size_noentry);\nDEFINE_ALLOC_EVENT(xfs_alloc_size_nominleft);\nDEFINE_ALLOC_EVENT(xfs_alloc_size_done);\nDEFINE_ALLOC_EVENT(xfs_alloc_size_error);\nDEFINE_ALLOC_EVENT(xfs_alloc_size_busy);\nDEFINE_ALLOC_EVENT(xfs_alloc_small_freelist);\nDEFINE_ALLOC_EVENT(xfs_alloc_small_notenough);\nDEFINE_ALLOC_EVENT(xfs_alloc_small_done);\nDEFINE_ALLOC_EVENT(xfs_alloc_small_error);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_badargs);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_skip_deadlock);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_nofix);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_noagbp);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_loopfailed);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_allfailed);\n\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_this_ag);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_start_ag);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_first_ag);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_exact_bno);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_near_bno);\nDEFINE_ALLOC_EVENT(xfs_alloc_vextent_finish);\n\nTRACE_EVENT(xfs_alloc_cur_check,\n\tTP_PROTO(struct xfs_mount *mp, xfs_btnum_t btnum, xfs_agblock_t bno,\n\t\t xfs_extlen_t len, xfs_extlen_t diff, bool new),\n\tTP_ARGS(mp, btnum, bno, len, diff, new),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(xfs_agblock_t, bno)\n\t\t__field(xfs_extlen_t, len)\n\t\t__field(xfs_extlen_t, diff)\n\t\t__field(bool, new)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->btnum = btnum;\n\t\t__entry->bno = bno;\n\t\t__entry->len = len;\n\t\t__entry->diff = diff;\n\t\t__entry->new = new;\n\t),\n\tTP_printk(\"dev %d:%d btree %s agbno 0x%x fsbcount 0x%x diff 0x%x new %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->bno, __entry->len, __entry->diff, __entry->new)\n)\n\nDECLARE_EVENT_CLASS(xfs_da_class,\n\tTP_PROTO(struct xfs_da_args *args),\n\tTP_ARGS(args),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__dynamic_array(char, name, args->namelen)\n\t\t__field(int, namelen)\n\t\t__field(xfs_dahash_t, hashval)\n\t\t__field(xfs_ino_t, inumber)\n\t\t__field(uint32_t, op_flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(args->dp)->i_sb->s_dev;\n\t\t__entry->ino = args->dp->i_ino;\n\t\tif (args->namelen)\n\t\t\tmemcpy(__get_str(name), args->name, args->namelen);\n\t\t__entry->namelen = args->namelen;\n\t\t__entry->hashval = args->hashval;\n\t\t__entry->inumber = args->inumber;\n\t\t__entry->op_flags = args->op_flags;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx name %.*s namelen %d hashval 0x%x \"\n\t\t  \"inumber 0x%llx op_flags %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->namelen,\n\t\t  __entry->namelen ? __get_str(name) : NULL,\n\t\t  __entry->namelen,\n\t\t  __entry->hashval,\n\t\t  __entry->inumber,\n\t\t  __print_flags(__entry->op_flags, \"|\", XFS_DA_OP_FLAGS))\n)\n\n#define DEFINE_DIR2_EVENT(name) \\\nDEFINE_EVENT(xfs_da_class, name, \\\n\tTP_PROTO(struct xfs_da_args *args), \\\n\tTP_ARGS(args))\nDEFINE_DIR2_EVENT(xfs_dir2_sf_addname);\nDEFINE_DIR2_EVENT(xfs_dir2_sf_create);\nDEFINE_DIR2_EVENT(xfs_dir2_sf_lookup);\nDEFINE_DIR2_EVENT(xfs_dir2_sf_replace);\nDEFINE_DIR2_EVENT(xfs_dir2_sf_removename);\nDEFINE_DIR2_EVENT(xfs_dir2_sf_toino4);\nDEFINE_DIR2_EVENT(xfs_dir2_sf_toino8);\nDEFINE_DIR2_EVENT(xfs_dir2_sf_to_block);\nDEFINE_DIR2_EVENT(xfs_dir2_block_addname);\nDEFINE_DIR2_EVENT(xfs_dir2_block_lookup);\nDEFINE_DIR2_EVENT(xfs_dir2_block_replace);\nDEFINE_DIR2_EVENT(xfs_dir2_block_removename);\nDEFINE_DIR2_EVENT(xfs_dir2_block_to_sf);\nDEFINE_DIR2_EVENT(xfs_dir2_block_to_leaf);\nDEFINE_DIR2_EVENT(xfs_dir2_leaf_addname);\nDEFINE_DIR2_EVENT(xfs_dir2_leaf_lookup);\nDEFINE_DIR2_EVENT(xfs_dir2_leaf_replace);\nDEFINE_DIR2_EVENT(xfs_dir2_leaf_removename);\nDEFINE_DIR2_EVENT(xfs_dir2_leaf_to_block);\nDEFINE_DIR2_EVENT(xfs_dir2_leaf_to_node);\nDEFINE_DIR2_EVENT(xfs_dir2_node_addname);\nDEFINE_DIR2_EVENT(xfs_dir2_node_lookup);\nDEFINE_DIR2_EVENT(xfs_dir2_node_replace);\nDEFINE_DIR2_EVENT(xfs_dir2_node_removename);\nDEFINE_DIR2_EVENT(xfs_dir2_node_to_leaf);\n\nDECLARE_EVENT_CLASS(xfs_attr_class,\n\tTP_PROTO(struct xfs_da_args *args),\n\tTP_ARGS(args),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__dynamic_array(char, name, args->namelen)\n\t\t__field(int, namelen)\n\t\t__field(int, valuelen)\n\t\t__field(xfs_dahash_t, hashval)\n\t\t__field(unsigned int, attr_filter)\n\t\t__field(unsigned int, attr_flags)\n\t\t__field(uint32_t, op_flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(args->dp)->i_sb->s_dev;\n\t\t__entry->ino = args->dp->i_ino;\n\t\tif (args->namelen)\n\t\t\tmemcpy(__get_str(name), args->name, args->namelen);\n\t\t__entry->namelen = args->namelen;\n\t\t__entry->valuelen = args->valuelen;\n\t\t__entry->hashval = args->hashval;\n\t\t__entry->attr_filter = args->attr_filter;\n\t\t__entry->attr_flags = args->attr_flags;\n\t\t__entry->op_flags = args->op_flags;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx name %.*s namelen %d valuelen %d \"\n\t\t  \"hashval 0x%x filter %s flags %s op_flags %s\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->namelen,\n\t\t  __entry->namelen ? __get_str(name) : NULL,\n\t\t  __entry->namelen,\n\t\t  __entry->valuelen,\n\t\t  __entry->hashval,\n\t\t  __print_flags(__entry->attr_filter, \"|\",\n\t\t\t\tXFS_ATTR_FILTER_FLAGS),\n\t\t   __print_flags(__entry->attr_flags, \"|\",\n\t\t\t\t{ XATTR_CREATE,\t\t\"CREATE\" },\n\t\t\t\t{ XATTR_REPLACE,\t\"REPLACE\" }),\n\t\t  __print_flags(__entry->op_flags, \"|\", XFS_DA_OP_FLAGS))\n)\n\n#define DEFINE_ATTR_EVENT(name) \\\nDEFINE_EVENT(xfs_attr_class, name, \\\n\tTP_PROTO(struct xfs_da_args *args), \\\n\tTP_ARGS(args))\nDEFINE_ATTR_EVENT(xfs_attr_sf_add);\nDEFINE_ATTR_EVENT(xfs_attr_sf_addname);\nDEFINE_ATTR_EVENT(xfs_attr_sf_create);\nDEFINE_ATTR_EVENT(xfs_attr_sf_lookup);\nDEFINE_ATTR_EVENT(xfs_attr_sf_remove);\nDEFINE_ATTR_EVENT(xfs_attr_sf_to_leaf);\n\nDEFINE_ATTR_EVENT(xfs_attr_leaf_add);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_add_old);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_add_new);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_add_work);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_create);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_compact);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_get);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_lookup);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_replace);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_remove);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_removename);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_split);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_split_before);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_split_after);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_clearflag);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_setflag);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_flipflags);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_to_sf);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_to_node);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_rebalance);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_unbalance);\nDEFINE_ATTR_EVENT(xfs_attr_leaf_toosmall);\n\nDEFINE_ATTR_EVENT(xfs_attr_node_addname);\nDEFINE_ATTR_EVENT(xfs_attr_node_get);\nDEFINE_ATTR_EVENT(xfs_attr_node_replace);\nDEFINE_ATTR_EVENT(xfs_attr_node_removename);\n\nDEFINE_ATTR_EVENT(xfs_attr_fillstate);\nDEFINE_ATTR_EVENT(xfs_attr_refillstate);\n\nDEFINE_ATTR_EVENT(xfs_attr_rmtval_get);\nDEFINE_ATTR_EVENT(xfs_attr_rmtval_set);\n\n#define DEFINE_DA_EVENT(name) \\\nDEFINE_EVENT(xfs_da_class, name, \\\n\tTP_PROTO(struct xfs_da_args *args), \\\n\tTP_ARGS(args))\nDEFINE_DA_EVENT(xfs_da_split);\nDEFINE_DA_EVENT(xfs_da_join);\nDEFINE_DA_EVENT(xfs_da_link_before);\nDEFINE_DA_EVENT(xfs_da_link_after);\nDEFINE_DA_EVENT(xfs_da_unlink_back);\nDEFINE_DA_EVENT(xfs_da_unlink_forward);\nDEFINE_DA_EVENT(xfs_da_root_split);\nDEFINE_DA_EVENT(xfs_da_root_join);\nDEFINE_DA_EVENT(xfs_da_node_add);\nDEFINE_DA_EVENT(xfs_da_node_create);\nDEFINE_DA_EVENT(xfs_da_node_split);\nDEFINE_DA_EVENT(xfs_da_node_remove);\nDEFINE_DA_EVENT(xfs_da_node_rebalance);\nDEFINE_DA_EVENT(xfs_da_node_unbalance);\nDEFINE_DA_EVENT(xfs_da_node_toosmall);\nDEFINE_DA_EVENT(xfs_da_swap_lastblock);\nDEFINE_DA_EVENT(xfs_da_grow_inode);\nDEFINE_DA_EVENT(xfs_da_shrink_inode);\nDEFINE_DA_EVENT(xfs_da_fixhashpath);\nDEFINE_DA_EVENT(xfs_da_path_shift);\n\nDECLARE_EVENT_CLASS(xfs_dir2_space_class,\n\tTP_PROTO(struct xfs_da_args *args, int idx),\n\tTP_ARGS(args, idx),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(uint32_t, op_flags)\n\t\t__field(int, idx)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(args->dp)->i_sb->s_dev;\n\t\t__entry->ino = args->dp->i_ino;\n\t\t__entry->op_flags = args->op_flags;\n\t\t__entry->idx = idx;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx op_flags %s index %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_flags(__entry->op_flags, \"|\", XFS_DA_OP_FLAGS),\n\t\t  __entry->idx)\n)\n\n#define DEFINE_DIR2_SPACE_EVENT(name) \\\nDEFINE_EVENT(xfs_dir2_space_class, name, \\\n\tTP_PROTO(struct xfs_da_args *args, int idx), \\\n\tTP_ARGS(args, idx))\nDEFINE_DIR2_SPACE_EVENT(xfs_dir2_leafn_add);\nDEFINE_DIR2_SPACE_EVENT(xfs_dir2_leafn_remove);\nDEFINE_DIR2_SPACE_EVENT(xfs_dir2_grow_inode);\nDEFINE_DIR2_SPACE_EVENT(xfs_dir2_shrink_inode);\n\nTRACE_EVENT(xfs_dir2_leafn_moveents,\n\tTP_PROTO(struct xfs_da_args *args, int src_idx, int dst_idx, int count),\n\tTP_ARGS(args, src_idx, dst_idx, count),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(uint32_t, op_flags)\n\t\t__field(int, src_idx)\n\t\t__field(int, dst_idx)\n\t\t__field(int, count)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(args->dp)->i_sb->s_dev;\n\t\t__entry->ino = args->dp->i_ino;\n\t\t__entry->op_flags = args->op_flags;\n\t\t__entry->src_idx = src_idx;\n\t\t__entry->dst_idx = dst_idx;\n\t\t__entry->count = count;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx op_flags %s \"\n\t\t  \"src_idx %d dst_idx %d count %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_flags(__entry->op_flags, \"|\", XFS_DA_OP_FLAGS),\n\t\t  __entry->src_idx,\n\t\t  __entry->dst_idx,\n\t\t  __entry->count)\n);\n\n#define XFS_SWAPEXT_INODES \\\n\t{ 0,\t\"target\" }, \\\n\t{ 1,\t\"temp\" }\n\nTRACE_DEFINE_ENUM(XFS_DINODE_FMT_DEV);\nTRACE_DEFINE_ENUM(XFS_DINODE_FMT_LOCAL);\nTRACE_DEFINE_ENUM(XFS_DINODE_FMT_EXTENTS);\nTRACE_DEFINE_ENUM(XFS_DINODE_FMT_BTREE);\nTRACE_DEFINE_ENUM(XFS_DINODE_FMT_UUID);\n\nDECLARE_EVENT_CLASS(xfs_swap_extent_class,\n\tTP_PROTO(struct xfs_inode *ip, int which),\n\tTP_ARGS(ip, which),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, which)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(int, format)\n\t\t__field(xfs_extnum_t, nex)\n\t\t__field(int, broot_size)\n\t\t__field(int, fork_off)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->which = which;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->format = ip->i_df.if_format;\n\t\t__entry->nex = ip->i_df.if_nextents;\n\t\t__entry->broot_size = ip->i_df.if_broot_bytes;\n\t\t__entry->fork_off = xfs_inode_fork_boff(ip);\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx (%s), %s format, num_extents %llu, \"\n\t\t  \"broot size %d, forkoff 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_symbolic(__entry->which, XFS_SWAPEXT_INODES),\n\t\t  __print_symbolic(__entry->format, XFS_INODE_FORMAT_STR),\n\t\t  __entry->nex,\n\t\t  __entry->broot_size,\n\t\t  __entry->fork_off)\n)\n\n#define DEFINE_SWAPEXT_EVENT(name) \\\nDEFINE_EVENT(xfs_swap_extent_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, int which), \\\n\tTP_ARGS(ip, which))\n\nDEFINE_SWAPEXT_EVENT(xfs_swap_extent_before);\nDEFINE_SWAPEXT_EVENT(xfs_swap_extent_after);\n\nTRACE_EVENT(xfs_log_recover,\n\tTP_PROTO(struct xlog *log, xfs_daddr_t headblk, xfs_daddr_t tailblk),\n\tTP_ARGS(log, headblk, tailblk),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_daddr_t, headblk)\n\t\t__field(xfs_daddr_t, tailblk)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = log->l_mp->m_super->s_dev;\n\t\t__entry->headblk = headblk;\n\t\t__entry->tailblk = tailblk;\n\t),\n\tTP_printk(\"dev %d:%d headblk 0x%llx tailblk 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->headblk,\n\t\t  __entry->tailblk)\n)\n\nTRACE_EVENT(xfs_log_recover_record,\n\tTP_PROTO(struct xlog *log, struct xlog_rec_header *rhead, int pass),\n\tTP_ARGS(log, rhead, pass),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_lsn_t, lsn)\n\t\t__field(int, len)\n\t\t__field(int, num_logops)\n\t\t__field(int, pass)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = log->l_mp->m_super->s_dev;\n\t\t__entry->lsn = be64_to_cpu(rhead->h_lsn);\n\t\t__entry->len = be32_to_cpu(rhead->h_len);\n\t\t__entry->num_logops = be32_to_cpu(rhead->h_num_logops);\n\t\t__entry->pass = pass;\n\t),\n\tTP_printk(\"dev %d:%d lsn 0x%llx len 0x%x num_logops 0x%x pass %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->lsn, __entry->len, __entry->num_logops,\n\t\t   __entry->pass)\n)\n\nDECLARE_EVENT_CLASS(xfs_log_recover_item_class,\n\tTP_PROTO(struct xlog *log, struct xlog_recover *trans,\n\t\tstruct xlog_recover_item *item, int pass),\n\tTP_ARGS(log, trans, item, pass),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned long, item)\n\t\t__field(xlog_tid_t, tid)\n\t\t__field(xfs_lsn_t, lsn)\n\t\t__field(int, type)\n\t\t__field(int, pass)\n\t\t__field(int, count)\n\t\t__field(int, total)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = log->l_mp->m_super->s_dev;\n\t\t__entry->item = (unsigned long)item;\n\t\t__entry->tid = trans->r_log_tid;\n\t\t__entry->lsn = trans->r_lsn;\n\t\t__entry->type = ITEM_TYPE(item);\n\t\t__entry->pass = pass;\n\t\t__entry->count = item->ri_cnt;\n\t\t__entry->total = item->ri_total;\n\t),\n\tTP_printk(\"dev %d:%d tid 0x%x lsn 0x%llx, pass %d, item %p, \"\n\t\t  \"item type %s item region count/total %d/%d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->tid,\n\t\t  __entry->lsn,\n\t\t  __entry->pass,\n\t\t  (void *)__entry->item,\n\t\t  __print_symbolic(__entry->type, XFS_LI_TYPE_DESC),\n\t\t  __entry->count,\n\t\t  __entry->total)\n)\n\n#define DEFINE_LOG_RECOVER_ITEM(name) \\\nDEFINE_EVENT(xfs_log_recover_item_class, name, \\\n\tTP_PROTO(struct xlog *log, struct xlog_recover *trans, \\\n\t\tstruct xlog_recover_item *item, int pass), \\\n\tTP_ARGS(log, trans, item, pass))\n\nDEFINE_LOG_RECOVER_ITEM(xfs_log_recover_item_add);\nDEFINE_LOG_RECOVER_ITEM(xfs_log_recover_item_add_cont);\nDEFINE_LOG_RECOVER_ITEM(xfs_log_recover_item_reorder_head);\nDEFINE_LOG_RECOVER_ITEM(xfs_log_recover_item_reorder_tail);\nDEFINE_LOG_RECOVER_ITEM(xfs_log_recover_item_recover);\n\nDECLARE_EVENT_CLASS(xfs_log_recover_buf_item_class,\n\tTP_PROTO(struct xlog *log, struct xfs_buf_log_format *buf_f),\n\tTP_ARGS(log, buf_f),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int64_t, blkno)\n\t\t__field(unsigned short, len)\n\t\t__field(unsigned short, flags)\n\t\t__field(unsigned short, size)\n\t\t__field(unsigned int, map_size)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = log->l_mp->m_super->s_dev;\n\t\t__entry->blkno = buf_f->blf_blkno;\n\t\t__entry->len = buf_f->blf_len;\n\t\t__entry->flags = buf_f->blf_flags;\n\t\t__entry->size = buf_f->blf_size;\n\t\t__entry->map_size = buf_f->blf_map_size;\n\t),\n\tTP_printk(\"dev %d:%d daddr 0x%llx, bbcount 0x%x, flags 0x%x, size %d, \"\n\t\t\t\"map_size %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->blkno,\n\t\t  __entry->len,\n\t\t  __entry->flags,\n\t\t  __entry->size,\n\t\t  __entry->map_size)\n)\n\n#define DEFINE_LOG_RECOVER_BUF_ITEM(name) \\\nDEFINE_EVENT(xfs_log_recover_buf_item_class, name, \\\n\tTP_PROTO(struct xlog *log, struct xfs_buf_log_format *buf_f), \\\n\tTP_ARGS(log, buf_f))\n\nDEFINE_LOG_RECOVER_BUF_ITEM(xfs_log_recover_buf_not_cancel);\nDEFINE_LOG_RECOVER_BUF_ITEM(xfs_log_recover_buf_cancel);\nDEFINE_LOG_RECOVER_BUF_ITEM(xfs_log_recover_buf_cancel_add);\nDEFINE_LOG_RECOVER_BUF_ITEM(xfs_log_recover_buf_cancel_ref_inc);\nDEFINE_LOG_RECOVER_BUF_ITEM(xfs_log_recover_buf_recover);\nDEFINE_LOG_RECOVER_BUF_ITEM(xfs_log_recover_buf_skip);\nDEFINE_LOG_RECOVER_BUF_ITEM(xfs_log_recover_buf_inode_buf);\nDEFINE_LOG_RECOVER_BUF_ITEM(xfs_log_recover_buf_reg_buf);\nDEFINE_LOG_RECOVER_BUF_ITEM(xfs_log_recover_buf_dquot_buf);\n\nDECLARE_EVENT_CLASS(xfs_log_recover_ino_item_class,\n\tTP_PROTO(struct xlog *log, struct xfs_inode_log_format *in_f),\n\tTP_ARGS(log, in_f),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(unsigned short, size)\n\t\t__field(int, fields)\n\t\t__field(unsigned short, asize)\n\t\t__field(unsigned short, dsize)\n\t\t__field(int64_t, blkno)\n\t\t__field(int, len)\n\t\t__field(int, boffset)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = log->l_mp->m_super->s_dev;\n\t\t__entry->ino = in_f->ilf_ino;\n\t\t__entry->size = in_f->ilf_size;\n\t\t__entry->fields = in_f->ilf_fields;\n\t\t__entry->asize = in_f->ilf_asize;\n\t\t__entry->dsize = in_f->ilf_dsize;\n\t\t__entry->blkno = in_f->ilf_blkno;\n\t\t__entry->len = in_f->ilf_len;\n\t\t__entry->boffset = in_f->ilf_boffset;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx, size %u, fields 0x%x, asize %d, \"\n\t\t\t\"dsize %d, daddr 0x%llx, bbcount 0x%x, boffset %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->size,\n\t\t  __entry->fields,\n\t\t  __entry->asize,\n\t\t  __entry->dsize,\n\t\t  __entry->blkno,\n\t\t  __entry->len,\n\t\t  __entry->boffset)\n)\n#define DEFINE_LOG_RECOVER_INO_ITEM(name) \\\nDEFINE_EVENT(xfs_log_recover_ino_item_class, name, \\\n\tTP_PROTO(struct xlog *log, struct xfs_inode_log_format *in_f), \\\n\tTP_ARGS(log, in_f))\n\nDEFINE_LOG_RECOVER_INO_ITEM(xfs_log_recover_inode_recover);\nDEFINE_LOG_RECOVER_INO_ITEM(xfs_log_recover_inode_cancel);\nDEFINE_LOG_RECOVER_INO_ITEM(xfs_log_recover_inode_skip);\n\nDECLARE_EVENT_CLASS(xfs_log_recover_icreate_item_class,\n\tTP_PROTO(struct xlog *log, struct xfs_icreate_log *in_f),\n\tTP_ARGS(log, in_f),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(unsigned int, count)\n\t\t__field(unsigned int, isize)\n\t\t__field(xfs_agblock_t, length)\n\t\t__field(unsigned int, gen)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = log->l_mp->m_super->s_dev;\n\t\t__entry->agno = be32_to_cpu(in_f->icl_ag);\n\t\t__entry->agbno = be32_to_cpu(in_f->icl_agbno);\n\t\t__entry->count = be32_to_cpu(in_f->icl_count);\n\t\t__entry->isize = be32_to_cpu(in_f->icl_isize);\n\t\t__entry->length = be32_to_cpu(in_f->icl_length);\n\t\t__entry->gen = be32_to_cpu(in_f->icl_gen);\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x ireccount %u isize %u gen 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->length,\n\t\t  __entry->count,\n\t\t  __entry->isize,\n\t\t  __entry->gen)\n)\n#define DEFINE_LOG_RECOVER_ICREATE_ITEM(name) \\\nDEFINE_EVENT(xfs_log_recover_icreate_item_class, name, \\\n\tTP_PROTO(struct xlog *log, struct xfs_icreate_log *in_f), \\\n\tTP_ARGS(log, in_f))\n\nDEFINE_LOG_RECOVER_ICREATE_ITEM(xfs_log_recover_icreate_cancel);\nDEFINE_LOG_RECOVER_ICREATE_ITEM(xfs_log_recover_icreate_recover);\n\nDECLARE_EVENT_CLASS(xfs_discard_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agblock_t agbno, xfs_extlen_t len),\n\tTP_ARGS(mp, agno, agbno, len),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len)\n)\n\n#define DEFINE_DISCARD_EVENT(name) \\\nDEFINE_EVENT(xfs_discard_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t xfs_agblock_t agbno, xfs_extlen_t len), \\\n\tTP_ARGS(mp, agno, agbno, len))\nDEFINE_DISCARD_EVENT(xfs_discard_extent);\nDEFINE_DISCARD_EVENT(xfs_discard_toosmall);\nDEFINE_DISCARD_EVENT(xfs_discard_exclude);\nDEFINE_DISCARD_EVENT(xfs_discard_busy);\n\n \nTRACE_DEFINE_ENUM(XFS_BTNUM_BNOi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_CNTi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_BMAPi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_INOi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_FINOi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_RMAPi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_REFCi);\n\nDECLARE_EVENT_CLASS(xfs_btree_cur_class,\n\tTP_PROTO(struct xfs_btree_cur *cur, int level, struct xfs_buf *bp),\n\tTP_ARGS(cur, level, bp),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(int, level)\n\t\t__field(int, nlevels)\n\t\t__field(int, ptr)\n\t\t__field(xfs_daddr_t, daddr)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = cur->bc_mp->m_super->s_dev;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->level = level;\n\t\t__entry->nlevels = cur->bc_nlevels;\n\t\t__entry->ptr = cur->bc_levels[level].ptr;\n\t\t__entry->daddr = bp ? xfs_buf_daddr(bp) : -1;\n\t),\n\tTP_printk(\"dev %d:%d btree %s level %d/%d ptr %d daddr 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->level,\n\t\t  __entry->nlevels,\n\t\t  __entry->ptr,\n\t\t  (unsigned long long)__entry->daddr)\n)\n\n#define DEFINE_BTREE_CUR_EVENT(name) \\\nDEFINE_EVENT(xfs_btree_cur_class, name, \\\n\tTP_PROTO(struct xfs_btree_cur *cur, int level, struct xfs_buf *bp), \\\n\tTP_ARGS(cur, level, bp))\nDEFINE_BTREE_CUR_EVENT(xfs_btree_updkeys);\nDEFINE_BTREE_CUR_EVENT(xfs_btree_overlapped_query_range);\n\n \nstruct xfs_defer_pending;\n\nDECLARE_EVENT_CLASS(xfs_defer_class,\n\tTP_PROTO(struct xfs_trans *tp, unsigned long caller_ip),\n\tTP_ARGS(tp, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(struct xfs_trans *, tp)\n\t\t__field(char, committed)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = tp->t_mountp->m_super->s_dev;\n\t\t__entry->tp = tp;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d tp %p caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->tp,\n\t\t  (char *)__entry->caller_ip)\n)\n#define DEFINE_DEFER_EVENT(name) \\\nDEFINE_EVENT(xfs_defer_class, name, \\\n\tTP_PROTO(struct xfs_trans *tp, unsigned long caller_ip), \\\n\tTP_ARGS(tp, caller_ip))\n\nDECLARE_EVENT_CLASS(xfs_defer_error_class,\n\tTP_PROTO(struct xfs_trans *tp, int error),\n\tTP_ARGS(tp, error),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(struct xfs_trans *, tp)\n\t\t__field(char, committed)\n\t\t__field(int, error)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = tp->t_mountp->m_super->s_dev;\n\t\t__entry->tp = tp;\n\t\t__entry->error = error;\n\t),\n\tTP_printk(\"dev %d:%d tp %p err %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->tp,\n\t\t  __entry->error)\n)\n#define DEFINE_DEFER_ERROR_EVENT(name) \\\nDEFINE_EVENT(xfs_defer_error_class, name, \\\n\tTP_PROTO(struct xfs_trans *tp, int error), \\\n\tTP_ARGS(tp, error))\n\nDECLARE_EVENT_CLASS(xfs_defer_pending_class,\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_defer_pending *dfp),\n\tTP_ARGS(mp, dfp),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, type)\n\t\t__field(void *, intent)\n\t\t__field(char, committed)\n\t\t__field(int, nr)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp ? mp->m_super->s_dev : 0;\n\t\t__entry->type = dfp->dfp_type;\n\t\t__entry->intent = dfp->dfp_intent;\n\t\t__entry->committed = dfp->dfp_done != NULL;\n\t\t__entry->nr = dfp->dfp_count;\n\t),\n\tTP_printk(\"dev %d:%d optype %d intent %p committed %d nr %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->type,\n\t\t  __entry->intent,\n\t\t  __entry->committed,\n\t\t  __entry->nr)\n)\n#define DEFINE_DEFER_PENDING_EVENT(name) \\\nDEFINE_EVENT(xfs_defer_pending_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_defer_pending *dfp), \\\n\tTP_ARGS(mp, dfp))\n\nDECLARE_EVENT_CLASS(xfs_phys_extent_deferred_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t int type, xfs_agblock_t agbno, xfs_extlen_t len),\n\tTP_ARGS(mp, agno, type, agbno, len),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(int, type)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->type = type;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t),\n\tTP_printk(\"dev %d:%d op %d agno 0x%x agbno 0x%x fsbcount 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->type,\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len)\n);\n#define DEFINE_PHYS_EXTENT_DEFERRED_EVENT(name) \\\nDEFINE_EVENT(xfs_phys_extent_deferred_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t int type, \\\n\t\t xfs_agblock_t bno, \\\n\t\t xfs_extlen_t len), \\\n\tTP_ARGS(mp, agno, type, bno, len))\n\nDECLARE_EVENT_CLASS(xfs_map_extent_deferred_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t int op,\n\t\t xfs_agblock_t agbno,\n\t\t xfs_ino_t ino,\n\t\t int whichfork,\n\t\t xfs_fileoff_t offset,\n\t\t xfs_filblks_t len,\n\t\t xfs_exntst_t state),\n\tTP_ARGS(mp, agno, op, agbno, ino, whichfork, offset, len, state),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(int, whichfork)\n\t\t__field(xfs_fileoff_t, l_loff)\n\t\t__field(xfs_filblks_t, l_len)\n\t\t__field(xfs_exntst_t, l_state)\n\t\t__field(int, op)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->ino = ino;\n\t\t__entry->agbno = agbno;\n\t\t__entry->whichfork = whichfork;\n\t\t__entry->l_loff = offset;\n\t\t__entry->l_len = len;\n\t\t__entry->l_state = state;\n\t\t__entry->op = op;\n\t),\n\tTP_printk(\"dev %d:%d op %d agno 0x%x agbno 0x%x owner 0x%llx %s fileoff 0x%llx fsbcount 0x%llx state %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->op,\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->ino,\n\t\t  __print_symbolic(__entry->whichfork, XFS_WHICHFORK_STRINGS),\n\t\t  __entry->l_loff,\n\t\t  __entry->l_len,\n\t\t  __entry->l_state)\n);\n#define DEFINE_MAP_EXTENT_DEFERRED_EVENT(name) \\\nDEFINE_EVENT(xfs_map_extent_deferred_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t int op, \\\n\t\t xfs_agblock_t agbno, \\\n\t\t xfs_ino_t ino, \\\n\t\t int whichfork, \\\n\t\t xfs_fileoff_t offset, \\\n\t\t xfs_filblks_t len, \\\n\t\t xfs_exntst_t state), \\\n\tTP_ARGS(mp, agno, op, agbno, ino, whichfork, offset, len, state))\n\nDEFINE_DEFER_EVENT(xfs_defer_cancel);\nDEFINE_DEFER_EVENT(xfs_defer_trans_roll);\nDEFINE_DEFER_EVENT(xfs_defer_trans_abort);\nDEFINE_DEFER_EVENT(xfs_defer_finish);\nDEFINE_DEFER_EVENT(xfs_defer_finish_done);\n\nDEFINE_DEFER_ERROR_EVENT(xfs_defer_trans_roll_error);\nDEFINE_DEFER_ERROR_EVENT(xfs_defer_finish_error);\n\nDEFINE_DEFER_PENDING_EVENT(xfs_defer_create_intent);\nDEFINE_DEFER_PENDING_EVENT(xfs_defer_cancel_list);\nDEFINE_DEFER_PENDING_EVENT(xfs_defer_pending_finish);\nDEFINE_DEFER_PENDING_EVENT(xfs_defer_pending_abort);\nDEFINE_DEFER_PENDING_EVENT(xfs_defer_relog_intent);\n\n#define DEFINE_BMAP_FREE_DEFERRED_EVENT DEFINE_PHYS_EXTENT_DEFERRED_EVENT\nDEFINE_BMAP_FREE_DEFERRED_EVENT(xfs_bmap_free_defer);\nDEFINE_BMAP_FREE_DEFERRED_EVENT(xfs_bmap_free_deferred);\nDEFINE_BMAP_FREE_DEFERRED_EVENT(xfs_agfl_free_defer);\nDEFINE_BMAP_FREE_DEFERRED_EVENT(xfs_agfl_free_deferred);\n\nDECLARE_EVENT_CLASS(xfs_defer_pending_item_class,\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_defer_pending *dfp,\n\t\t void *item),\n\tTP_ARGS(mp, dfp, item),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, type)\n\t\t__field(void *, intent)\n\t\t__field(void *, item)\n\t\t__field(char, committed)\n\t\t__field(int, nr)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp ? mp->m_super->s_dev : 0;\n\t\t__entry->type = dfp->dfp_type;\n\t\t__entry->intent = dfp->dfp_intent;\n\t\t__entry->item = item;\n\t\t__entry->committed = dfp->dfp_done != NULL;\n\t\t__entry->nr = dfp->dfp_count;\n\t),\n\tTP_printk(\"dev %d:%d optype %d intent %p item %p committed %d nr %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->type,\n\t\t  __entry->intent,\n\t\t  __entry->item,\n\t\t  __entry->committed,\n\t\t  __entry->nr)\n)\n#define DEFINE_DEFER_PENDING_ITEM_EVENT(name) \\\nDEFINE_EVENT(xfs_defer_pending_item_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_defer_pending *dfp, \\\n\t\t void *item), \\\n\tTP_ARGS(mp, dfp, item))\n\nDEFINE_DEFER_PENDING_ITEM_EVENT(xfs_defer_add_item);\nDEFINE_DEFER_PENDING_ITEM_EVENT(xfs_defer_cancel_item);\nDEFINE_DEFER_PENDING_ITEM_EVENT(xfs_defer_finish_item);\n\n \nDECLARE_EVENT_CLASS(xfs_rmap_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agblock_t agbno, xfs_extlen_t len, bool unwritten,\n\t\t const struct xfs_owner_info *oinfo),\n\tTP_ARGS(mp, agno, agbno, len, unwritten, oinfo),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t\t__field(uint64_t, owner)\n\t\t__field(uint64_t, offset)\n\t\t__field(unsigned long, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t\t__entry->owner = oinfo->oi_owner;\n\t\t__entry->offset = oinfo->oi_offset;\n\t\t__entry->flags = oinfo->oi_flags;\n\t\tif (unwritten)\n\t\t\t__entry->flags |= XFS_RMAP_UNWRITTEN;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x owner 0x%llx fileoff 0x%llx flags 0x%lx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len,\n\t\t  __entry->owner,\n\t\t  __entry->offset,\n\t\t  __entry->flags)\n);\n#define DEFINE_RMAP_EVENT(name) \\\nDEFINE_EVENT(xfs_rmap_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t xfs_agblock_t agbno, xfs_extlen_t len, bool unwritten, \\\n\t\t const struct xfs_owner_info *oinfo), \\\n\tTP_ARGS(mp, agno, agbno, len, unwritten, oinfo))\n\n \nDECLARE_EVENT_CLASS(xfs_ag_error_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, int error,\n\t\t unsigned long caller_ip),\n\tTP_ARGS(mp, agno, error, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(int, error)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->error = error;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x error %d caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->error,\n\t\t  (char *)__entry->caller_ip)\n);\n\n#define DEFINE_AG_ERROR_EVENT(name) \\\nDEFINE_EVENT(xfs_ag_error_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, int error, \\\n\t\t unsigned long caller_ip), \\\n\tTP_ARGS(mp, agno, error, caller_ip))\n\nDEFINE_RMAP_EVENT(xfs_rmap_unmap);\nDEFINE_RMAP_EVENT(xfs_rmap_unmap_done);\nDEFINE_AG_ERROR_EVENT(xfs_rmap_unmap_error);\nDEFINE_RMAP_EVENT(xfs_rmap_map);\nDEFINE_RMAP_EVENT(xfs_rmap_map_done);\nDEFINE_AG_ERROR_EVENT(xfs_rmap_map_error);\nDEFINE_RMAP_EVENT(xfs_rmap_convert);\nDEFINE_RMAP_EVENT(xfs_rmap_convert_done);\nDEFINE_AG_ERROR_EVENT(xfs_rmap_convert_error);\nDEFINE_AG_ERROR_EVENT(xfs_rmap_convert_state);\n\nDECLARE_EVENT_CLASS(xfs_rmapbt_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agblock_t agbno, xfs_extlen_t len,\n\t\t uint64_t owner, uint64_t offset, unsigned int flags),\n\tTP_ARGS(mp, agno, agbno, len, owner, offset, flags),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t\t__field(uint64_t, owner)\n\t\t__field(uint64_t, offset)\n\t\t__field(unsigned int, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t\t__entry->owner = owner;\n\t\t__entry->offset = offset;\n\t\t__entry->flags = flags;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x owner 0x%llx fileoff 0x%llx flags 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len,\n\t\t  __entry->owner,\n\t\t  __entry->offset,\n\t\t  __entry->flags)\n);\n#define DEFINE_RMAPBT_EVENT(name) \\\nDEFINE_EVENT(xfs_rmapbt_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t xfs_agblock_t agbno, xfs_extlen_t len, \\\n\t\t uint64_t owner, uint64_t offset, unsigned int flags), \\\n\tTP_ARGS(mp, agno, agbno, len, owner, offset, flags))\n\n#define DEFINE_RMAP_DEFERRED_EVENT DEFINE_MAP_EXTENT_DEFERRED_EVENT\nDEFINE_RMAP_DEFERRED_EVENT(xfs_rmap_defer);\nDEFINE_RMAP_DEFERRED_EVENT(xfs_rmap_deferred);\n\nDEFINE_BUSY_EVENT(xfs_rmapbt_alloc_block);\nDEFINE_BUSY_EVENT(xfs_rmapbt_free_block);\nDEFINE_RMAPBT_EVENT(xfs_rmap_update);\nDEFINE_RMAPBT_EVENT(xfs_rmap_insert);\nDEFINE_RMAPBT_EVENT(xfs_rmap_delete);\nDEFINE_AG_ERROR_EVENT(xfs_rmap_insert_error);\nDEFINE_AG_ERROR_EVENT(xfs_rmap_delete_error);\nDEFINE_AG_ERROR_EVENT(xfs_rmap_update_error);\n\nDEFINE_RMAPBT_EVENT(xfs_rmap_find_left_neighbor_candidate);\nDEFINE_RMAPBT_EVENT(xfs_rmap_find_left_neighbor_query);\nDEFINE_RMAPBT_EVENT(xfs_rmap_lookup_le_range_candidate);\nDEFINE_RMAPBT_EVENT(xfs_rmap_lookup_le_range);\nDEFINE_RMAPBT_EVENT(xfs_rmap_lookup_le_range_result);\nDEFINE_RMAPBT_EVENT(xfs_rmap_find_right_neighbor_result);\nDEFINE_RMAPBT_EVENT(xfs_rmap_find_left_neighbor_result);\n\n \n#define DEFINE_BMAP_DEFERRED_EVENT\tDEFINE_RMAP_DEFERRED_EVENT\nDEFINE_BMAP_DEFERRED_EVENT(xfs_bmap_defer);\nDEFINE_BMAP_DEFERRED_EVENT(xfs_bmap_deferred);\n\n \nDECLARE_EVENT_CLASS(xfs_ag_resv_class,\n\tTP_PROTO(struct xfs_perag *pag, enum xfs_ag_resv_type resv,\n\t\t xfs_extlen_t len),\n\tTP_ARGS(pag, resv, len),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(int, resv)\n\t\t__field(xfs_extlen_t, freeblks)\n\t\t__field(xfs_extlen_t, flcount)\n\t\t__field(xfs_extlen_t, reserved)\n\t\t__field(xfs_extlen_t, asked)\n\t\t__field(xfs_extlen_t, len)\n\t),\n\tTP_fast_assign(\n\t\tstruct xfs_ag_resv\t*r = xfs_perag_resv(pag, resv);\n\n\t\t__entry->dev = pag->pag_mount->m_super->s_dev;\n\t\t__entry->agno = pag->pag_agno;\n\t\t__entry->resv = resv;\n\t\t__entry->freeblks = pag->pagf_freeblks;\n\t\t__entry->flcount = pag->pagf_flcount;\n\t\t__entry->reserved = r ? r->ar_reserved : 0;\n\t\t__entry->asked = r ? r->ar_asked : 0;\n\t\t__entry->len = len;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x resv %d freeblks %u flcount %u \"\n\t\t  \"resv %u ask %u len %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->resv,\n\t\t  __entry->freeblks,\n\t\t  __entry->flcount,\n\t\t  __entry->reserved,\n\t\t  __entry->asked,\n\t\t  __entry->len)\n)\n#define DEFINE_AG_RESV_EVENT(name) \\\nDEFINE_EVENT(xfs_ag_resv_class, name, \\\n\tTP_PROTO(struct xfs_perag *pag, enum xfs_ag_resv_type type, \\\n\t\t xfs_extlen_t len), \\\n\tTP_ARGS(pag, type, len))\n\n \nDEFINE_AG_RESV_EVENT(xfs_ag_resv_init);\nDEFINE_AG_RESV_EVENT(xfs_ag_resv_free);\nDEFINE_AG_RESV_EVENT(xfs_ag_resv_alloc_extent);\nDEFINE_AG_RESV_EVENT(xfs_ag_resv_free_extent);\nDEFINE_AG_RESV_EVENT(xfs_ag_resv_critical);\nDEFINE_AG_RESV_EVENT(xfs_ag_resv_needed);\n\nDEFINE_AG_ERROR_EVENT(xfs_ag_resv_free_error);\nDEFINE_AG_ERROR_EVENT(xfs_ag_resv_init_error);\n\n \n\n \n#define DEFINE_AG_EXTENT_EVENT(name) DEFINE_DISCARD_EVENT(name)\n\n \nTRACE_DEFINE_ENUM(XFS_LOOKUP_EQi);\nTRACE_DEFINE_ENUM(XFS_LOOKUP_LEi);\nTRACE_DEFINE_ENUM(XFS_LOOKUP_GEi);\nDECLARE_EVENT_CLASS(xfs_ag_btree_lookup_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agblock_t agbno, xfs_lookup_t dir),\n\tTP_ARGS(mp, agno, agbno, dir),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_lookup_t, dir)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->dir = dir;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x cmp %s(%d)\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __print_symbolic(__entry->dir, XFS_AG_BTREE_CMP_FORMAT_STR),\n\t\t  __entry->dir)\n)\n\n#define DEFINE_AG_BTREE_LOOKUP_EVENT(name) \\\nDEFINE_EVENT(xfs_ag_btree_lookup_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t xfs_agblock_t agbno, xfs_lookup_t dir), \\\n\tTP_ARGS(mp, agno, agbno, dir))\n\n \nDECLARE_EVENT_CLASS(xfs_refcount_extent_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t struct xfs_refcount_irec *irec),\n\tTP_ARGS(mp, agno, irec),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(enum xfs_refc_domain, domain)\n\t\t__field(xfs_agblock_t, startblock)\n\t\t__field(xfs_extlen_t, blockcount)\n\t\t__field(xfs_nlink_t, refcount)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->domain = irec->rc_domain;\n\t\t__entry->startblock = irec->rc_startblock;\n\t\t__entry->blockcount = irec->rc_blockcount;\n\t\t__entry->refcount = irec->rc_refcount;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x dom %s agbno 0x%x fsbcount 0x%x refcount %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __print_symbolic(__entry->domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->startblock,\n\t\t  __entry->blockcount,\n\t\t  __entry->refcount)\n)\n\n#define DEFINE_REFCOUNT_EXTENT_EVENT(name) \\\nDEFINE_EVENT(xfs_refcount_extent_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t struct xfs_refcount_irec *irec), \\\n\tTP_ARGS(mp, agno, irec))\n\n \nDECLARE_EVENT_CLASS(xfs_refcount_extent_at_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t struct xfs_refcount_irec *irec, xfs_agblock_t agbno),\n\tTP_ARGS(mp, agno, irec, agbno),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(enum xfs_refc_domain, domain)\n\t\t__field(xfs_agblock_t, startblock)\n\t\t__field(xfs_extlen_t, blockcount)\n\t\t__field(xfs_nlink_t, refcount)\n\t\t__field(xfs_agblock_t, agbno)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->domain = irec->rc_domain;\n\t\t__entry->startblock = irec->rc_startblock;\n\t\t__entry->blockcount = irec->rc_blockcount;\n\t\t__entry->refcount = irec->rc_refcount;\n\t\t__entry->agbno = agbno;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x dom %s agbno 0x%x fsbcount 0x%x refcount %u @ agbno 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __print_symbolic(__entry->domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->startblock,\n\t\t  __entry->blockcount,\n\t\t  __entry->refcount,\n\t\t  __entry->agbno)\n)\n\n#define DEFINE_REFCOUNT_EXTENT_AT_EVENT(name) \\\nDEFINE_EVENT(xfs_refcount_extent_at_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t struct xfs_refcount_irec *irec, xfs_agblock_t agbno), \\\n\tTP_ARGS(mp, agno, irec, agbno))\n\n \nDECLARE_EVENT_CLASS(xfs_refcount_double_extent_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t struct xfs_refcount_irec *i1, struct xfs_refcount_irec *i2),\n\tTP_ARGS(mp, agno, i1, i2),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(enum xfs_refc_domain, i1_domain)\n\t\t__field(xfs_agblock_t, i1_startblock)\n\t\t__field(xfs_extlen_t, i1_blockcount)\n\t\t__field(xfs_nlink_t, i1_refcount)\n\t\t__field(enum xfs_refc_domain, i2_domain)\n\t\t__field(xfs_agblock_t, i2_startblock)\n\t\t__field(xfs_extlen_t, i2_blockcount)\n\t\t__field(xfs_nlink_t, i2_refcount)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->i1_domain = i1->rc_domain;\n\t\t__entry->i1_startblock = i1->rc_startblock;\n\t\t__entry->i1_blockcount = i1->rc_blockcount;\n\t\t__entry->i1_refcount = i1->rc_refcount;\n\t\t__entry->i2_domain = i2->rc_domain;\n\t\t__entry->i2_startblock = i2->rc_startblock;\n\t\t__entry->i2_blockcount = i2->rc_blockcount;\n\t\t__entry->i2_refcount = i2->rc_refcount;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x dom %s agbno 0x%x fsbcount 0x%x refcount %u -- \"\n\t\t  \"dom %s agbno 0x%x fsbcount 0x%x refcount %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __print_symbolic(__entry->i1_domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->i1_startblock,\n\t\t  __entry->i1_blockcount,\n\t\t  __entry->i1_refcount,\n\t\t  __print_symbolic(__entry->i2_domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->i2_startblock,\n\t\t  __entry->i2_blockcount,\n\t\t  __entry->i2_refcount)\n)\n\n#define DEFINE_REFCOUNT_DOUBLE_EXTENT_EVENT(name) \\\nDEFINE_EVENT(xfs_refcount_double_extent_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t struct xfs_refcount_irec *i1, struct xfs_refcount_irec *i2), \\\n\tTP_ARGS(mp, agno, i1, i2))\n\n \nDECLARE_EVENT_CLASS(xfs_refcount_double_extent_at_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t struct xfs_refcount_irec *i1, struct xfs_refcount_irec *i2,\n\t\t xfs_agblock_t agbno),\n\tTP_ARGS(mp, agno, i1, i2, agbno),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(enum xfs_refc_domain, i1_domain)\n\t\t__field(xfs_agblock_t, i1_startblock)\n\t\t__field(xfs_extlen_t, i1_blockcount)\n\t\t__field(xfs_nlink_t, i1_refcount)\n\t\t__field(enum xfs_refc_domain, i2_domain)\n\t\t__field(xfs_agblock_t, i2_startblock)\n\t\t__field(xfs_extlen_t, i2_blockcount)\n\t\t__field(xfs_nlink_t, i2_refcount)\n\t\t__field(xfs_agblock_t, agbno)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->i1_domain = i1->rc_domain;\n\t\t__entry->i1_startblock = i1->rc_startblock;\n\t\t__entry->i1_blockcount = i1->rc_blockcount;\n\t\t__entry->i1_refcount = i1->rc_refcount;\n\t\t__entry->i2_domain = i2->rc_domain;\n\t\t__entry->i2_startblock = i2->rc_startblock;\n\t\t__entry->i2_blockcount = i2->rc_blockcount;\n\t\t__entry->i2_refcount = i2->rc_refcount;\n\t\t__entry->agbno = agbno;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x dom %s agbno 0x%x fsbcount 0x%x refcount %u -- \"\n\t\t  \"dom %s agbno 0x%x fsbcount 0x%x refcount %u @ agbno 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __print_symbolic(__entry->i1_domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->i1_startblock,\n\t\t  __entry->i1_blockcount,\n\t\t  __entry->i1_refcount,\n\t\t  __print_symbolic(__entry->i2_domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->i2_startblock,\n\t\t  __entry->i2_blockcount,\n\t\t  __entry->i2_refcount,\n\t\t  __entry->agbno)\n)\n\n#define DEFINE_REFCOUNT_DOUBLE_EXTENT_AT_EVENT(name) \\\nDEFINE_EVENT(xfs_refcount_double_extent_at_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t struct xfs_refcount_irec *i1, struct xfs_refcount_irec *i2, \\\n\t\t xfs_agblock_t agbno), \\\n\tTP_ARGS(mp, agno, i1, i2, agbno))\n\n \nDECLARE_EVENT_CLASS(xfs_refcount_triple_extent_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t struct xfs_refcount_irec *i1, struct xfs_refcount_irec *i2,\n\t\t struct xfs_refcount_irec *i3),\n\tTP_ARGS(mp, agno, i1, i2, i3),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(enum xfs_refc_domain, i1_domain)\n\t\t__field(xfs_agblock_t, i1_startblock)\n\t\t__field(xfs_extlen_t, i1_blockcount)\n\t\t__field(xfs_nlink_t, i1_refcount)\n\t\t__field(enum xfs_refc_domain, i2_domain)\n\t\t__field(xfs_agblock_t, i2_startblock)\n\t\t__field(xfs_extlen_t, i2_blockcount)\n\t\t__field(xfs_nlink_t, i2_refcount)\n\t\t__field(enum xfs_refc_domain, i3_domain)\n\t\t__field(xfs_agblock_t, i3_startblock)\n\t\t__field(xfs_extlen_t, i3_blockcount)\n\t\t__field(xfs_nlink_t, i3_refcount)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->i1_domain = i1->rc_domain;\n\t\t__entry->i1_startblock = i1->rc_startblock;\n\t\t__entry->i1_blockcount = i1->rc_blockcount;\n\t\t__entry->i1_refcount = i1->rc_refcount;\n\t\t__entry->i2_domain = i2->rc_domain;\n\t\t__entry->i2_startblock = i2->rc_startblock;\n\t\t__entry->i2_blockcount = i2->rc_blockcount;\n\t\t__entry->i2_refcount = i2->rc_refcount;\n\t\t__entry->i3_domain = i3->rc_domain;\n\t\t__entry->i3_startblock = i3->rc_startblock;\n\t\t__entry->i3_blockcount = i3->rc_blockcount;\n\t\t__entry->i3_refcount = i3->rc_refcount;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x dom %s agbno 0x%x fsbcount 0x%x refcount %u -- \"\n\t\t  \"dom %s agbno 0x%x fsbcount 0x%x refcount %u -- \"\n\t\t  \"dom %s agbno 0x%x fsbcount 0x%x refcount %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __print_symbolic(__entry->i1_domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->i1_startblock,\n\t\t  __entry->i1_blockcount,\n\t\t  __entry->i1_refcount,\n\t\t  __print_symbolic(__entry->i2_domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->i2_startblock,\n\t\t  __entry->i2_blockcount,\n\t\t  __entry->i2_refcount,\n\t\t  __print_symbolic(__entry->i3_domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->i3_startblock,\n\t\t  __entry->i3_blockcount,\n\t\t  __entry->i3_refcount)\n);\n\n#define DEFINE_REFCOUNT_TRIPLE_EXTENT_EVENT(name) \\\nDEFINE_EVENT(xfs_refcount_triple_extent_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t struct xfs_refcount_irec *i1, struct xfs_refcount_irec *i2, \\\n\t\t struct xfs_refcount_irec *i3), \\\n\tTP_ARGS(mp, agno, i1, i2, i3))\n\n \nDEFINE_BUSY_EVENT(xfs_refcountbt_alloc_block);\nDEFINE_BUSY_EVENT(xfs_refcountbt_free_block);\nDEFINE_AG_BTREE_LOOKUP_EVENT(xfs_refcount_lookup);\nDEFINE_REFCOUNT_EXTENT_EVENT(xfs_refcount_get);\nDEFINE_REFCOUNT_EXTENT_EVENT(xfs_refcount_update);\nDEFINE_REFCOUNT_EXTENT_EVENT(xfs_refcount_insert);\nDEFINE_REFCOUNT_EXTENT_EVENT(xfs_refcount_delete);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_insert_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_delete_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_update_error);\n\n \nDEFINE_AG_EXTENT_EVENT(xfs_refcount_increase);\nDEFINE_AG_EXTENT_EVENT(xfs_refcount_decrease);\nDEFINE_AG_EXTENT_EVENT(xfs_refcount_cow_increase);\nDEFINE_AG_EXTENT_EVENT(xfs_refcount_cow_decrease);\nDEFINE_REFCOUNT_TRIPLE_EXTENT_EVENT(xfs_refcount_merge_center_extents);\nDEFINE_REFCOUNT_EXTENT_EVENT(xfs_refcount_modify_extent);\nDEFINE_REFCOUNT_EXTENT_EVENT(xfs_refcount_recover_extent);\nDEFINE_REFCOUNT_EXTENT_AT_EVENT(xfs_refcount_split_extent);\nDEFINE_REFCOUNT_DOUBLE_EXTENT_EVENT(xfs_refcount_merge_left_extent);\nDEFINE_REFCOUNT_DOUBLE_EXTENT_EVENT(xfs_refcount_merge_right_extent);\nDEFINE_REFCOUNT_DOUBLE_EXTENT_AT_EVENT(xfs_refcount_find_left_extent);\nDEFINE_REFCOUNT_DOUBLE_EXTENT_AT_EVENT(xfs_refcount_find_right_extent);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_adjust_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_adjust_cow_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_merge_center_extents_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_modify_extent_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_split_extent_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_merge_left_extent_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_merge_right_extent_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_find_left_extent_error);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_find_right_extent_error);\n\n \nDEFINE_AG_EXTENT_EVENT(xfs_refcount_find_shared);\nDEFINE_AG_EXTENT_EVENT(xfs_refcount_find_shared_result);\nDEFINE_AG_ERROR_EVENT(xfs_refcount_find_shared_error);\n#define DEFINE_REFCOUNT_DEFERRED_EVENT DEFINE_PHYS_EXTENT_DEFERRED_EVENT\nDEFINE_REFCOUNT_DEFERRED_EVENT(xfs_refcount_defer);\nDEFINE_REFCOUNT_DEFERRED_EVENT(xfs_refcount_deferred);\n\nTRACE_EVENT(xfs_refcount_finish_one_leftover,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t int type, xfs_agblock_t agbno, xfs_extlen_t len),\n\tTP_ARGS(mp, agno, type, agbno, len),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(int, type)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->type = type;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t),\n\tTP_printk(\"dev %d:%d type %d agno 0x%x agbno 0x%x fsbcount 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->type,\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len)\n);\n\n \nDECLARE_EVENT_CLASS(xfs_inode_error_class,\n\tTP_PROTO(struct xfs_inode *ip, int error, unsigned long caller_ip),\n\tTP_ARGS(ip, error, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(int, error)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->error = error;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx error %d caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->error,\n\t\t  (char *)__entry->caller_ip)\n);\n\n#define DEFINE_INODE_ERROR_EVENT(name) \\\nDEFINE_EVENT(xfs_inode_error_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, int error, \\\n\t\t unsigned long caller_ip), \\\n\tTP_ARGS(ip, error, caller_ip))\n\n \n\n \nDECLARE_EVENT_CLASS(xfs_double_io_class,\n\tTP_PROTO(struct xfs_inode *src, xfs_off_t soffset, xfs_off_t len,\n\t\t struct xfs_inode *dest, xfs_off_t doffset),\n\tTP_ARGS(src, soffset, len, dest, doffset),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, src_ino)\n\t\t__field(loff_t, src_isize)\n\t\t__field(loff_t, src_disize)\n\t\t__field(loff_t, src_offset)\n\t\t__field(long long, len)\n\t\t__field(xfs_ino_t, dest_ino)\n\t\t__field(loff_t, dest_isize)\n\t\t__field(loff_t, dest_disize)\n\t\t__field(loff_t, dest_offset)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(src)->i_sb->s_dev;\n\t\t__entry->src_ino = src->i_ino;\n\t\t__entry->src_isize = VFS_I(src)->i_size;\n\t\t__entry->src_disize = src->i_disk_size;\n\t\t__entry->src_offset = soffset;\n\t\t__entry->len = len;\n\t\t__entry->dest_ino = dest->i_ino;\n\t\t__entry->dest_isize = VFS_I(dest)->i_size;\n\t\t__entry->dest_disize = dest->i_disk_size;\n\t\t__entry->dest_offset = doffset;\n\t),\n\tTP_printk(\"dev %d:%d bytecount 0x%llx \"\n\t\t  \"ino 0x%llx isize 0x%llx disize 0x%llx pos 0x%llx -> \"\n\t\t  \"ino 0x%llx isize 0x%llx disize 0x%llx pos 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->len,\n\t\t  __entry->src_ino,\n\t\t  __entry->src_isize,\n\t\t  __entry->src_disize,\n\t\t  __entry->src_offset,\n\t\t  __entry->dest_ino,\n\t\t  __entry->dest_isize,\n\t\t  __entry->dest_disize,\n\t\t  __entry->dest_offset)\n)\n\n#define DEFINE_DOUBLE_IO_EVENT(name)\t\\\nDEFINE_EVENT(xfs_double_io_class, name,\t\\\n\tTP_PROTO(struct xfs_inode *src, xfs_off_t soffset, xfs_off_t len, \\\n\t\t struct xfs_inode *dest, xfs_off_t doffset), \\\n\tTP_ARGS(src, soffset, len, dest, doffset))\n\n \nDECLARE_EVENT_CLASS(xfs_inode_irec_class,\n\tTP_PROTO(struct xfs_inode *ip, struct xfs_bmbt_irec *irec),\n\tTP_ARGS(ip, irec),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(xfs_fileoff_t, lblk)\n\t\t__field(xfs_extlen_t, len)\n\t\t__field(xfs_fsblock_t, pblk)\n\t\t__field(int, state)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->lblk = irec->br_startoff;\n\t\t__entry->len = irec->br_blockcount;\n\t\t__entry->pblk = irec->br_startblock;\n\t\t__entry->state = irec->br_state;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx fileoff 0x%llx fsbcount 0x%x startblock 0x%llx st %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->lblk,\n\t\t  __entry->len,\n\t\t  __entry->pblk,\n\t\t  __entry->state)\n);\n#define DEFINE_INODE_IREC_EVENT(name) \\\nDEFINE_EVENT(xfs_inode_irec_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, struct xfs_bmbt_irec *irec), \\\n\tTP_ARGS(ip, irec))\n\n \nDECLARE_EVENT_CLASS(xfs_wb_invalid_class,\n\tTP_PROTO(struct xfs_inode *ip, const struct iomap *iomap, unsigned int wpcseq, int whichfork),\n\tTP_ARGS(ip, iomap, wpcseq, whichfork),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(u64, addr)\n\t\t__field(loff_t, pos)\n\t\t__field(u64, len)\n\t\t__field(u16, type)\n\t\t__field(u16, flags)\n\t\t__field(u32, wpcseq)\n\t\t__field(u32, forkseq)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->addr = iomap->addr;\n\t\t__entry->pos = iomap->offset;\n\t\t__entry->len = iomap->length;\n\t\t__entry->type = iomap->type;\n\t\t__entry->flags = iomap->flags;\n\t\t__entry->wpcseq = wpcseq;\n\t\t__entry->forkseq = READ_ONCE(xfs_ifork_ptr(ip, whichfork)->if_seq);\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx pos 0x%llx addr 0x%llx bytecount 0x%llx type 0x%x flags 0x%x wpcseq 0x%x forkseq 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->pos,\n\t\t  __entry->addr,\n\t\t  __entry->len,\n\t\t  __entry->type,\n\t\t  __entry->flags,\n\t\t  __entry->wpcseq,\n\t\t  __entry->forkseq)\n);\n#define DEFINE_WB_INVALID_EVENT(name) \\\nDEFINE_EVENT(xfs_wb_invalid_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, const struct iomap *iomap, unsigned int wpcseq, int whichfork), \\\n\tTP_ARGS(ip, iomap, wpcseq, whichfork))\nDEFINE_WB_INVALID_EVENT(xfs_wb_cow_iomap_invalid);\nDEFINE_WB_INVALID_EVENT(xfs_wb_data_iomap_invalid);\n\nDECLARE_EVENT_CLASS(xfs_iomap_invalid_class,\n\tTP_PROTO(struct xfs_inode *ip, const struct iomap *iomap),\n\tTP_ARGS(ip, iomap),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(u64, addr)\n\t\t__field(loff_t, pos)\n\t\t__field(u64, len)\n\t\t__field(u64, validity_cookie)\n\t\t__field(u64, inodeseq)\n\t\t__field(u16, type)\n\t\t__field(u16, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->addr = iomap->addr;\n\t\t__entry->pos = iomap->offset;\n\t\t__entry->len = iomap->length;\n\t\t__entry->validity_cookie = iomap->validity_cookie;\n\t\t__entry->type = iomap->type;\n\t\t__entry->flags = iomap->flags;\n\t\t__entry->inodeseq = xfs_iomap_inode_sequence(ip, iomap->flags);\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx pos 0x%llx addr 0x%llx bytecount 0x%llx type 0x%x flags 0x%x validity_cookie 0x%llx inodeseq 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->pos,\n\t\t  __entry->addr,\n\t\t  __entry->len,\n\t\t  __entry->type,\n\t\t  __entry->flags,\n\t\t  __entry->validity_cookie,\n\t\t  __entry->inodeseq)\n);\n#define DEFINE_IOMAP_INVALID_EVENT(name) \\\nDEFINE_EVENT(xfs_iomap_invalid_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, const struct iomap *iomap), \\\n\tTP_ARGS(ip, iomap))\nDEFINE_IOMAP_INVALID_EVENT(xfs_iomap_invalid);\n\n \n\n \nDEFINE_INODE_EVENT(xfs_reflink_set_inode_flag);\nDEFINE_INODE_EVENT(xfs_reflink_unset_inode_flag);\nDEFINE_ITRUNC_EVENT(xfs_reflink_update_inode_size);\nTRACE_EVENT(xfs_reflink_remap_blocks,\n\tTP_PROTO(struct xfs_inode *src, xfs_fileoff_t soffset,\n\t\t xfs_filblks_t len, struct xfs_inode *dest,\n\t\t xfs_fileoff_t doffset),\n\tTP_ARGS(src, soffset, len, dest, doffset),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, src_ino)\n\t\t__field(xfs_fileoff_t, src_lblk)\n\t\t__field(xfs_filblks_t, len)\n\t\t__field(xfs_ino_t, dest_ino)\n\t\t__field(xfs_fileoff_t, dest_lblk)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(src)->i_sb->s_dev;\n\t\t__entry->src_ino = src->i_ino;\n\t\t__entry->src_lblk = soffset;\n\t\t__entry->len = len;\n\t\t__entry->dest_ino = dest->i_ino;\n\t\t__entry->dest_lblk = doffset;\n\t),\n\tTP_printk(\"dev %d:%d fsbcount 0x%llx \"\n\t\t  \"ino 0x%llx fileoff 0x%llx -> ino 0x%llx fileoff 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->len,\n\t\t  __entry->src_ino,\n\t\t  __entry->src_lblk,\n\t\t  __entry->dest_ino,\n\t\t  __entry->dest_lblk)\n);\nDEFINE_DOUBLE_IO_EVENT(xfs_reflink_remap_range);\nDEFINE_INODE_ERROR_EVENT(xfs_reflink_remap_range_error);\nDEFINE_INODE_ERROR_EVENT(xfs_reflink_set_inode_flag_error);\nDEFINE_INODE_ERROR_EVENT(xfs_reflink_update_inode_size_error);\nDEFINE_INODE_ERROR_EVENT(xfs_reflink_remap_blocks_error);\nDEFINE_INODE_ERROR_EVENT(xfs_reflink_remap_extent_error);\nDEFINE_INODE_IREC_EVENT(xfs_reflink_remap_extent_src);\nDEFINE_INODE_IREC_EVENT(xfs_reflink_remap_extent_dest);\n\n \nDEFINE_DOUBLE_IO_EVENT(xfs_reflink_compare_extents);\nDEFINE_INODE_ERROR_EVENT(xfs_reflink_compare_extents_error);\n\n \nTRACE_EVENT(xfs_ioctl_clone,\n\tTP_PROTO(struct inode *src, struct inode *dest),\n\tTP_ARGS(src, dest),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned long, src_ino)\n\t\t__field(loff_t, src_isize)\n\t\t__field(unsigned long, dest_ino)\n\t\t__field(loff_t, dest_isize)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = src->i_sb->s_dev;\n\t\t__entry->src_ino = src->i_ino;\n\t\t__entry->src_isize = i_size_read(src);\n\t\t__entry->dest_ino = dest->i_ino;\n\t\t__entry->dest_isize = i_size_read(dest);\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%lx isize 0x%llx -> ino 0x%lx isize 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->src_ino,\n\t\t  __entry->src_isize,\n\t\t  __entry->dest_ino,\n\t\t  __entry->dest_isize)\n);\n\n \nDEFINE_SIMPLE_IO_EVENT(xfs_reflink_unshare);\nDEFINE_INODE_ERROR_EVENT(xfs_reflink_unshare_error);\n\n \nDEFINE_INODE_IREC_EVENT(xfs_reflink_trim_around_shared);\nDEFINE_INODE_IREC_EVENT(xfs_reflink_cow_found);\nDEFINE_INODE_IREC_EVENT(xfs_reflink_cow_enospc);\nDEFINE_INODE_IREC_EVENT(xfs_reflink_convert_cow);\n\nDEFINE_SIMPLE_IO_EVENT(xfs_reflink_cancel_cow_range);\nDEFINE_SIMPLE_IO_EVENT(xfs_reflink_end_cow);\nDEFINE_INODE_IREC_EVENT(xfs_reflink_cow_remap_from);\nDEFINE_INODE_IREC_EVENT(xfs_reflink_cow_remap_to);\n\nDEFINE_INODE_ERROR_EVENT(xfs_reflink_cancel_cow_range_error);\nDEFINE_INODE_ERROR_EVENT(xfs_reflink_end_cow_error);\n\n\nDEFINE_INODE_IREC_EVENT(xfs_reflink_cancel_cow);\n\n \nDEFINE_INODE_IREC_EVENT(xfs_swap_extent_rmap_remap);\nDEFINE_INODE_IREC_EVENT(xfs_swap_extent_rmap_remap_piece);\nDEFINE_INODE_ERROR_EVENT(xfs_swap_extent_rmap_error);\n\n \nDECLARE_EVENT_CLASS(xfs_fsmap_class,\n\tTP_PROTO(struct xfs_mount *mp, u32 keydev, xfs_agnumber_t agno,\n\t\t const struct xfs_rmap_irec *rmap),\n\tTP_ARGS(mp, keydev, agno, rmap),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(dev_t, keydev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_fsblock_t, bno)\n\t\t__field(xfs_filblks_t, len)\n\t\t__field(uint64_t, owner)\n\t\t__field(uint64_t, offset)\n\t\t__field(unsigned int, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->keydev = new_decode_dev(keydev);\n\t\t__entry->agno = agno;\n\t\t__entry->bno = rmap->rm_startblock;\n\t\t__entry->len = rmap->rm_blockcount;\n\t\t__entry->owner = rmap->rm_owner;\n\t\t__entry->offset = rmap->rm_offset;\n\t\t__entry->flags = rmap->rm_flags;\n\t),\n\tTP_printk(\"dev %d:%d keydev %d:%d agno 0x%x startblock 0x%llx fsbcount 0x%llx owner 0x%llx fileoff 0x%llx flags 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  MAJOR(__entry->keydev), MINOR(__entry->keydev),\n\t\t  __entry->agno,\n\t\t  __entry->bno,\n\t\t  __entry->len,\n\t\t  __entry->owner,\n\t\t  __entry->offset,\n\t\t  __entry->flags)\n)\n#define DEFINE_FSMAP_EVENT(name) \\\nDEFINE_EVENT(xfs_fsmap_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, u32 keydev, xfs_agnumber_t agno, \\\n\t\t const struct xfs_rmap_irec *rmap), \\\n\tTP_ARGS(mp, keydev, agno, rmap))\nDEFINE_FSMAP_EVENT(xfs_fsmap_low_key);\nDEFINE_FSMAP_EVENT(xfs_fsmap_high_key);\nDEFINE_FSMAP_EVENT(xfs_fsmap_mapping);\n\nDECLARE_EVENT_CLASS(xfs_fsmap_linear_class,\n\tTP_PROTO(struct xfs_mount *mp, u32 keydev, uint64_t bno),\n\tTP_ARGS(mp, keydev, bno),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(dev_t, keydev)\n\t\t__field(xfs_fsblock_t, bno)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->keydev = new_decode_dev(keydev);\n\t\t__entry->bno = bno;\n\t),\n\tTP_printk(\"dev %d:%d keydev %d:%d bno 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  MAJOR(__entry->keydev), MINOR(__entry->keydev),\n\t\t  __entry->bno)\n)\n#define DEFINE_FSMAP_LINEAR_EVENT(name) \\\nDEFINE_EVENT(xfs_fsmap_linear_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, u32 keydev, uint64_t bno), \\\n\tTP_ARGS(mp, keydev, bno))\nDEFINE_FSMAP_LINEAR_EVENT(xfs_fsmap_low_key_linear);\nDEFINE_FSMAP_LINEAR_EVENT(xfs_fsmap_high_key_linear);\n\nDECLARE_EVENT_CLASS(xfs_getfsmap_class,\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_fsmap *fsmap),\n\tTP_ARGS(mp, fsmap),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(dev_t, keydev)\n\t\t__field(xfs_daddr_t, block)\n\t\t__field(xfs_daddr_t, len)\n\t\t__field(uint64_t, owner)\n\t\t__field(uint64_t, offset)\n\t\t__field(uint64_t, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->keydev = new_decode_dev(fsmap->fmr_device);\n\t\t__entry->block = fsmap->fmr_physical;\n\t\t__entry->len = fsmap->fmr_length;\n\t\t__entry->owner = fsmap->fmr_owner;\n\t\t__entry->offset = fsmap->fmr_offset;\n\t\t__entry->flags = fsmap->fmr_flags;\n\t),\n\tTP_printk(\"dev %d:%d keydev %d:%d daddr 0x%llx bbcount 0x%llx owner 0x%llx fileoff_daddr 0x%llx flags 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  MAJOR(__entry->keydev), MINOR(__entry->keydev),\n\t\t  __entry->block,\n\t\t  __entry->len,\n\t\t  __entry->owner,\n\t\t  __entry->offset,\n\t\t  __entry->flags)\n)\n#define DEFINE_GETFSMAP_EVENT(name) \\\nDEFINE_EVENT(xfs_getfsmap_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_fsmap *fsmap), \\\n\tTP_ARGS(mp, fsmap))\nDEFINE_GETFSMAP_EVENT(xfs_getfsmap_low_key);\nDEFINE_GETFSMAP_EVENT(xfs_getfsmap_high_key);\nDEFINE_GETFSMAP_EVENT(xfs_getfsmap_mapping);\n\nDECLARE_EVENT_CLASS(xfs_trans_resv_class,\n\tTP_PROTO(struct xfs_mount *mp, unsigned int type,\n\t\t struct xfs_trans_res *res),\n\tTP_ARGS(mp, type, res),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, type)\n\t\t__field(uint, logres)\n\t\t__field(int, logcount)\n\t\t__field(int, logflags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->type = type;\n\t\t__entry->logres = res->tr_logres;\n\t\t__entry->logcount = res->tr_logcount;\n\t\t__entry->logflags = res->tr_logflags;\n\t),\n\tTP_printk(\"dev %d:%d type %d logres %u logcount %d flags 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->type,\n\t\t  __entry->logres,\n\t\t  __entry->logcount,\n\t\t  __entry->logflags)\n)\n\n#define DEFINE_TRANS_RESV_EVENT(name) \\\nDEFINE_EVENT(xfs_trans_resv_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, unsigned int type, \\\n\t\t struct xfs_trans_res *res), \\\n\tTP_ARGS(mp, type, res))\nDEFINE_TRANS_RESV_EVENT(xfs_trans_resv_calc);\nDEFINE_TRANS_RESV_EVENT(xfs_trans_resv_calc_minlogsize);\n\nTRACE_EVENT(xfs_log_get_max_trans_res,\n\tTP_PROTO(struct xfs_mount *mp, const struct xfs_trans_res *res),\n\tTP_ARGS(mp, res),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(uint, logres)\n\t\t__field(int, logcount)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->logres = res->tr_logres;\n\t\t__entry->logcount = res->tr_logcount;\n\t),\n\tTP_printk(\"dev %d:%d logres %u logcount %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->logres,\n\t\t  __entry->logcount)\n);\n\nDECLARE_EVENT_CLASS(xfs_trans_class,\n\tTP_PROTO(struct xfs_trans *tp, unsigned long caller_ip),\n\tTP_ARGS(tp, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(uint32_t, tid)\n\t\t__field(uint32_t, flags)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = tp->t_mountp->m_super->s_dev;\n\t\t__entry->tid = 0;\n\t\tif (tp->t_ticket)\n\t\t\t__entry->tid = tp->t_ticket->t_tid;\n\t\t__entry->flags = tp->t_flags;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d trans %x flags 0x%x caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->tid,\n\t\t  __entry->flags,\n\t\t  (char *)__entry->caller_ip)\n)\n\n#define DEFINE_TRANS_EVENT(name) \\\nDEFINE_EVENT(xfs_trans_class, name, \\\n\tTP_PROTO(struct xfs_trans *tp, unsigned long caller_ip), \\\n\tTP_ARGS(tp, caller_ip))\nDEFINE_TRANS_EVENT(xfs_trans_alloc);\nDEFINE_TRANS_EVENT(xfs_trans_cancel);\nDEFINE_TRANS_EVENT(xfs_trans_commit);\nDEFINE_TRANS_EVENT(xfs_trans_dup);\nDEFINE_TRANS_EVENT(xfs_trans_free);\nDEFINE_TRANS_EVENT(xfs_trans_roll);\nDEFINE_TRANS_EVENT(xfs_trans_add_item);\nDEFINE_TRANS_EVENT(xfs_trans_commit_items);\nDEFINE_TRANS_EVENT(xfs_trans_free_items);\n\nTRACE_EVENT(xfs_iunlink_update_bucket,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, unsigned int bucket,\n\t\t xfs_agino_t old_ptr, xfs_agino_t new_ptr),\n\tTP_ARGS(mp, agno, bucket, old_ptr, new_ptr),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(unsigned int, bucket)\n\t\t__field(xfs_agino_t, old_ptr)\n\t\t__field(xfs_agino_t, new_ptr)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->bucket = bucket;\n\t\t__entry->old_ptr = old_ptr;\n\t\t__entry->new_ptr = new_ptr;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x bucket %u old 0x%x new 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->bucket,\n\t\t  __entry->old_ptr,\n\t\t  __entry->new_ptr)\n);\n\nTRACE_EVENT(xfs_iunlink_update_dinode,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, xfs_agino_t agino,\n\t\t xfs_agino_t old_ptr, xfs_agino_t new_ptr),\n\tTP_ARGS(mp, agno, agino, old_ptr, new_ptr),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, agino)\n\t\t__field(xfs_agino_t, old_ptr)\n\t\t__field(xfs_agino_t, new_ptr)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agino = agino;\n\t\t__entry->old_ptr = old_ptr;\n\t\t__entry->new_ptr = new_ptr;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agino 0x%x old 0x%x new 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agino,\n\t\t  __entry->old_ptr,\n\t\t  __entry->new_ptr)\n);\n\nTRACE_EVENT(xfs_iunlink_reload_next,\n\tTP_PROTO(struct xfs_inode *ip),\n\tTP_ARGS(ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, agino)\n\t\t__field(xfs_agino_t, prev_agino)\n\t\t__field(xfs_agino_t, next_agino)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = ip->i_mount->m_super->s_dev;\n\t\t__entry->agno = XFS_INO_TO_AGNO(ip->i_mount, ip->i_ino);\n\t\t__entry->agino = XFS_INO_TO_AGINO(ip->i_mount, ip->i_ino);\n\t\t__entry->prev_agino = ip->i_prev_unlinked;\n\t\t__entry->next_agino = ip->i_next_unlinked;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agino 0x%x prev_unlinked 0x%x next_unlinked 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agino,\n\t\t  __entry->prev_agino,\n\t\t  __entry->next_agino)\n);\n\nTRACE_EVENT(xfs_inode_reload_unlinked_bucket,\n\tTP_PROTO(struct xfs_inode *ip),\n\tTP_ARGS(ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, agino)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = ip->i_mount->m_super->s_dev;\n\t\t__entry->agno = XFS_INO_TO_AGNO(ip->i_mount, ip->i_ino);\n\t\t__entry->agino = XFS_INO_TO_AGINO(ip->i_mount, ip->i_ino);\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agino 0x%x bucket %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agino,\n\t\t  __entry->agino % XFS_AGI_UNLINKED_BUCKETS)\n);\n\nDECLARE_EVENT_CLASS(xfs_ag_inode_class,\n\tTP_PROTO(struct xfs_inode *ip),\n\tTP_ARGS(ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, agino)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->agno = XFS_INO_TO_AGNO(ip->i_mount, ip->i_ino);\n\t\t__entry->agino = XFS_INO_TO_AGINO(ip->i_mount, ip->i_ino);\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agino 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno, __entry->agino)\n)\n\n#define DEFINE_AGINODE_EVENT(name) \\\nDEFINE_EVENT(xfs_ag_inode_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip), \\\n\tTP_ARGS(ip))\nDEFINE_AGINODE_EVENT(xfs_iunlink);\nDEFINE_AGINODE_EVENT(xfs_iunlink_remove);\n\nDECLARE_EVENT_CLASS(xfs_fs_corrupt_class,\n\tTP_PROTO(struct xfs_mount *mp, unsigned int flags),\n\tTP_ARGS(mp, flags),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->flags = flags;\n\t),\n\tTP_printk(\"dev %d:%d flags 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->flags)\n);\n#define DEFINE_FS_CORRUPT_EVENT(name)\t\\\nDEFINE_EVENT(xfs_fs_corrupt_class, name,\t\\\n\tTP_PROTO(struct xfs_mount *mp, unsigned int flags), \\\n\tTP_ARGS(mp, flags))\nDEFINE_FS_CORRUPT_EVENT(xfs_fs_mark_sick);\nDEFINE_FS_CORRUPT_EVENT(xfs_fs_mark_healthy);\nDEFINE_FS_CORRUPT_EVENT(xfs_fs_unfixed_corruption);\nDEFINE_FS_CORRUPT_EVENT(xfs_rt_mark_sick);\nDEFINE_FS_CORRUPT_EVENT(xfs_rt_mark_healthy);\nDEFINE_FS_CORRUPT_EVENT(xfs_rt_unfixed_corruption);\n\nDECLARE_EVENT_CLASS(xfs_ag_corrupt_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, unsigned int flags),\n\tTP_ARGS(mp, agno, flags),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(unsigned int, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->flags = flags;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x flags 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno, __entry->flags)\n);\n#define DEFINE_AG_CORRUPT_EVENT(name)\t\\\nDEFINE_EVENT(xfs_ag_corrupt_class, name,\t\\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t unsigned int flags), \\\n\tTP_ARGS(mp, agno, flags))\nDEFINE_AG_CORRUPT_EVENT(xfs_ag_mark_sick);\nDEFINE_AG_CORRUPT_EVENT(xfs_ag_mark_healthy);\nDEFINE_AG_CORRUPT_EVENT(xfs_ag_unfixed_corruption);\n\nDECLARE_EVENT_CLASS(xfs_inode_corrupt_class,\n\tTP_PROTO(struct xfs_inode *ip, unsigned int flags),\n\tTP_ARGS(ip, flags),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(unsigned int, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = ip->i_mount->m_super->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->flags = flags;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx flags 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino, __entry->flags)\n);\n#define DEFINE_INODE_CORRUPT_EVENT(name)\t\\\nDEFINE_EVENT(xfs_inode_corrupt_class, name,\t\\\n\tTP_PROTO(struct xfs_inode *ip, unsigned int flags), \\\n\tTP_ARGS(ip, flags))\nDEFINE_INODE_CORRUPT_EVENT(xfs_inode_mark_sick);\nDEFINE_INODE_CORRUPT_EVENT(xfs_inode_mark_healthy);\n\nTRACE_EVENT(xfs_iwalk_ag,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agino_t startino),\n\tTP_ARGS(mp, agno, startino),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, startino)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->startino = startino;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x startino 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->agno,\n\t\t  __entry->startino)\n)\n\nTRACE_EVENT(xfs_iwalk_ag_rec,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t struct xfs_inobt_rec_incore *irec),\n\tTP_ARGS(mp, agno, irec),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, startino)\n\t\t__field(uint64_t, freemask)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->startino = irec->ir_startino;\n\t\t__entry->freemask = irec->ir_free;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x startino 0x%x freemask 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev), __entry->agno,\n\t\t  __entry->startino, __entry->freemask)\n)\n\nTRACE_EVENT(xfs_pwork_init,\n\tTP_PROTO(struct xfs_mount *mp, unsigned int nr_threads, pid_t pid),\n\tTP_ARGS(mp, nr_threads, pid),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, nr_threads)\n\t\t__field(pid_t, pid)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->nr_threads = nr_threads;\n\t\t__entry->pid = pid;\n\t),\n\tTP_printk(\"dev %d:%d nr_threads %u pid %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->nr_threads, __entry->pid)\n)\n\nDECLARE_EVENT_CLASS(xfs_kmem_class,\n\tTP_PROTO(ssize_t size, int flags, unsigned long caller_ip),\n\tTP_ARGS(size, flags, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(ssize_t, size)\n\t\t__field(int, flags)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->size = size;\n\t\t__entry->flags = flags;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"size %zd flags 0x%x caller %pS\",\n\t\t  __entry->size,\n\t\t  __entry->flags,\n\t\t  (char *)__entry->caller_ip)\n)\n\n#define DEFINE_KMEM_EVENT(name) \\\nDEFINE_EVENT(xfs_kmem_class, name, \\\n\tTP_PROTO(ssize_t size, int flags, unsigned long caller_ip), \\\n\tTP_ARGS(size, flags, caller_ip))\nDEFINE_KMEM_EVENT(kmem_alloc);\n\nTRACE_EVENT(xfs_check_new_dalign,\n\tTP_PROTO(struct xfs_mount *mp, int new_dalign, xfs_ino_t calc_rootino),\n\tTP_ARGS(mp, new_dalign, calc_rootino),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, new_dalign)\n\t\t__field(xfs_ino_t, sb_rootino)\n\t\t__field(xfs_ino_t, calc_rootino)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->new_dalign = new_dalign;\n\t\t__entry->sb_rootino = mp->m_sb.sb_rootino;\n\t\t__entry->calc_rootino = calc_rootino;\n\t),\n\tTP_printk(\"dev %d:%d new_dalign %d sb_rootino 0x%llx calc_rootino 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->new_dalign, __entry->sb_rootino,\n\t\t  __entry->calc_rootino)\n)\n\nTRACE_EVENT(xfs_btree_commit_afakeroot,\n\tTP_PROTO(struct xfs_btree_cur *cur),\n\tTP_ARGS(cur),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(unsigned int, levels)\n\t\t__field(unsigned int, blocks)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = cur->bc_mp->m_super->s_dev;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->agno = cur->bc_ag.pag->pag_agno;\n\t\t__entry->agbno = cur->bc_ag.afake->af_root;\n\t\t__entry->levels = cur->bc_ag.afake->af_levels;\n\t\t__entry->blocks = cur->bc_ag.afake->af_blocks;\n\t),\n\tTP_printk(\"dev %d:%d btree %s agno 0x%x levels %u blocks %u root %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->agno,\n\t\t  __entry->levels,\n\t\t  __entry->blocks,\n\t\t  __entry->agbno)\n)\n\nTRACE_EVENT(xfs_btree_commit_ifakeroot,\n\tTP_PROTO(struct xfs_btree_cur *cur),\n\tTP_ARGS(cur),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, agino)\n\t\t__field(unsigned int, levels)\n\t\t__field(unsigned int, blocks)\n\t\t__field(int, whichfork)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = cur->bc_mp->m_super->s_dev;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->agno = XFS_INO_TO_AGNO(cur->bc_mp,\n\t\t\t\t\tcur->bc_ino.ip->i_ino);\n\t\t__entry->agino = XFS_INO_TO_AGINO(cur->bc_mp,\n\t\t\t\t\tcur->bc_ino.ip->i_ino);\n\t\t__entry->levels = cur->bc_ino.ifake->if_levels;\n\t\t__entry->blocks = cur->bc_ino.ifake->if_blocks;\n\t\t__entry->whichfork = cur->bc_ino.whichfork;\n\t),\n\tTP_printk(\"dev %d:%d btree %s agno 0x%x agino 0x%x whichfork %s levels %u blocks %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->agno,\n\t\t  __entry->agino,\n\t\t  __print_symbolic(__entry->whichfork, XFS_WHICHFORK_STRINGS),\n\t\t  __entry->levels,\n\t\t  __entry->blocks)\n)\n\nTRACE_EVENT(xfs_btree_bload_level_geometry,\n\tTP_PROTO(struct xfs_btree_cur *cur, unsigned int level,\n\t\t uint64_t nr_this_level, unsigned int nr_per_block,\n\t\t unsigned int desired_npb, uint64_t blocks,\n\t\t uint64_t blocks_with_extra),\n\tTP_ARGS(cur, level, nr_this_level, nr_per_block, desired_npb, blocks,\n\t\tblocks_with_extra),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(unsigned int, level)\n\t\t__field(unsigned int, nlevels)\n\t\t__field(uint64_t, nr_this_level)\n\t\t__field(unsigned int, nr_per_block)\n\t\t__field(unsigned int, desired_npb)\n\t\t__field(unsigned long long, blocks)\n\t\t__field(unsigned long long, blocks_with_extra)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = cur->bc_mp->m_super->s_dev;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->level = level;\n\t\t__entry->nlevels = cur->bc_nlevels;\n\t\t__entry->nr_this_level = nr_this_level;\n\t\t__entry->nr_per_block = nr_per_block;\n\t\t__entry->desired_npb = desired_npb;\n\t\t__entry->blocks = blocks;\n\t\t__entry->blocks_with_extra = blocks_with_extra;\n\t),\n\tTP_printk(\"dev %d:%d btree %s level %u/%u nr_this_level %llu nr_per_block %u desired_npb %u blocks %llu blocks_with_extra %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->level,\n\t\t  __entry->nlevels,\n\t\t  __entry->nr_this_level,\n\t\t  __entry->nr_per_block,\n\t\t  __entry->desired_npb,\n\t\t  __entry->blocks,\n\t\t  __entry->blocks_with_extra)\n)\n\nTRACE_EVENT(xfs_btree_bload_block,\n\tTP_PROTO(struct xfs_btree_cur *cur, unsigned int level,\n\t\t uint64_t block_idx, uint64_t nr_blocks,\n\t\t union xfs_btree_ptr *ptr, unsigned int nr_records),\n\tTP_ARGS(cur, level, block_idx, nr_blocks, ptr, nr_records),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(unsigned int, level)\n\t\t__field(unsigned long long, block_idx)\n\t\t__field(unsigned long long, nr_blocks)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(unsigned int, nr_records)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = cur->bc_mp->m_super->s_dev;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->level = level;\n\t\t__entry->block_idx = block_idx;\n\t\t__entry->nr_blocks = nr_blocks;\n\t\tif (cur->bc_flags & XFS_BTREE_LONG_PTRS) {\n\t\t\txfs_fsblock_t\tfsb = be64_to_cpu(ptr->l);\n\n\t\t\t__entry->agno = XFS_FSB_TO_AGNO(cur->bc_mp, fsb);\n\t\t\t__entry->agbno = XFS_FSB_TO_AGBNO(cur->bc_mp, fsb);\n\t\t} else {\n\t\t\t__entry->agno = cur->bc_ag.pag->pag_agno;\n\t\t\t__entry->agbno = be32_to_cpu(ptr->s);\n\t\t}\n\t\t__entry->nr_records = nr_records;\n\t),\n\tTP_printk(\"dev %d:%d btree %s level %u block %llu/%llu agno 0x%x agbno 0x%x recs %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->level,\n\t\t  __entry->block_idx,\n\t\t  __entry->nr_blocks,\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->nr_records)\n)\n\nDECLARE_EVENT_CLASS(xfs_timestamp_range_class,\n\tTP_PROTO(struct xfs_mount *mp, time64_t min, time64_t max),\n\tTP_ARGS(mp, min, max),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(long long, min)\n\t\t__field(long long, max)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->min = min;\n\t\t__entry->max = max;\n\t),\n\tTP_printk(\"dev %d:%d min %lld max %lld\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->min,\n\t\t  __entry->max)\n)\n\n#define DEFINE_TIMESTAMP_RANGE_EVENT(name) \\\nDEFINE_EVENT(xfs_timestamp_range_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, long long min, long long max), \\\n\tTP_ARGS(mp, min, max))\nDEFINE_TIMESTAMP_RANGE_EVENT(xfs_inode_timestamp_range);\nDEFINE_TIMESTAMP_RANGE_EVENT(xfs_quota_expiry_range);\n\nDECLARE_EVENT_CLASS(xfs_icwalk_class,\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_icwalk *icw,\n\t\t unsigned long caller_ip),\n\tTP_ARGS(mp, icw, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(__u32, flags)\n\t\t__field(uint32_t, uid)\n\t\t__field(uint32_t, gid)\n\t\t__field(prid_t, prid)\n\t\t__field(__u64, min_file_size)\n\t\t__field(long, scan_limit)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->flags = icw ? icw->icw_flags : 0;\n\t\t__entry->uid = icw ? from_kuid(mp->m_super->s_user_ns,\n\t\t\t\t\t\ticw->icw_uid) : 0;\n\t\t__entry->gid = icw ? from_kgid(mp->m_super->s_user_ns,\n\t\t\t\t\t\ticw->icw_gid) : 0;\n\t\t__entry->prid = icw ? icw->icw_prid : 0;\n\t\t__entry->min_file_size = icw ? icw->icw_min_file_size : 0;\n\t\t__entry->scan_limit = icw ? icw->icw_scan_limit : 0;\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d flags 0x%x uid %u gid %u prid %u minsize %llu scan_limit %ld caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->flags,\n\t\t  __entry->uid,\n\t\t  __entry->gid,\n\t\t  __entry->prid,\n\t\t  __entry->min_file_size,\n\t\t  __entry->scan_limit,\n\t\t  (char *)__entry->caller_ip)\n);\n#define DEFINE_ICWALK_EVENT(name)\t\\\nDEFINE_EVENT(xfs_icwalk_class, name,\t\\\n\tTP_PROTO(struct xfs_mount *mp, struct xfs_icwalk *icw, \\\n\t\t unsigned long caller_ip), \\\n\tTP_ARGS(mp, icw, caller_ip))\nDEFINE_ICWALK_EVENT(xfs_ioc_free_eofblocks);\nDEFINE_ICWALK_EVENT(xfs_blockgc_free_space);\n\nTRACE_DEFINE_ENUM(XLOG_STATE_ACTIVE);\nTRACE_DEFINE_ENUM(XLOG_STATE_WANT_SYNC);\nTRACE_DEFINE_ENUM(XLOG_STATE_SYNCING);\nTRACE_DEFINE_ENUM(XLOG_STATE_DONE_SYNC);\nTRACE_DEFINE_ENUM(XLOG_STATE_CALLBACK);\nTRACE_DEFINE_ENUM(XLOG_STATE_DIRTY);\n\nDECLARE_EVENT_CLASS(xlog_iclog_class,\n\tTP_PROTO(struct xlog_in_core *iclog, unsigned long caller_ip),\n\tTP_ARGS(iclog, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(uint32_t, state)\n\t\t__field(int32_t, refcount)\n\t\t__field(uint32_t, offset)\n\t\t__field(uint32_t, flags)\n\t\t__field(unsigned long long, lsn)\n\t\t__field(unsigned long, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = iclog->ic_log->l_mp->m_super->s_dev;\n\t\t__entry->state = iclog->ic_state;\n\t\t__entry->refcount = atomic_read(&iclog->ic_refcnt);\n\t\t__entry->offset = iclog->ic_offset;\n\t\t__entry->flags = iclog->ic_flags;\n\t\t__entry->lsn = be64_to_cpu(iclog->ic_header.h_lsn);\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d state %s refcnt %d offset %u lsn 0x%llx flags %s caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->state, XLOG_STATE_STRINGS),\n\t\t  __entry->refcount,\n\t\t  __entry->offset,\n\t\t  __entry->lsn,\n\t\t  __print_flags(__entry->flags, \"|\", XLOG_ICL_STRINGS),\n\t\t  (char *)__entry->caller_ip)\n\n);\n\n#define DEFINE_ICLOG_EVENT(name)\t\\\nDEFINE_EVENT(xlog_iclog_class, name,\t\\\n\tTP_PROTO(struct xlog_in_core *iclog, unsigned long caller_ip), \\\n\tTP_ARGS(iclog, caller_ip))\n\nDEFINE_ICLOG_EVENT(xlog_iclog_activate);\nDEFINE_ICLOG_EVENT(xlog_iclog_clean);\nDEFINE_ICLOG_EVENT(xlog_iclog_callback);\nDEFINE_ICLOG_EVENT(xlog_iclog_callbacks_start);\nDEFINE_ICLOG_EVENT(xlog_iclog_callbacks_done);\nDEFINE_ICLOG_EVENT(xlog_iclog_force);\nDEFINE_ICLOG_EVENT(xlog_iclog_force_lsn);\nDEFINE_ICLOG_EVENT(xlog_iclog_get_space);\nDEFINE_ICLOG_EVENT(xlog_iclog_release);\nDEFINE_ICLOG_EVENT(xlog_iclog_switch);\nDEFINE_ICLOG_EVENT(xlog_iclog_sync);\nDEFINE_ICLOG_EVENT(xlog_iclog_syncing);\nDEFINE_ICLOG_EVENT(xlog_iclog_sync_done);\nDEFINE_ICLOG_EVENT(xlog_iclog_want_sync);\nDEFINE_ICLOG_EVENT(xlog_iclog_wait_on);\nDEFINE_ICLOG_EVENT(xlog_iclog_write);\n\nTRACE_DEFINE_ENUM(XFS_DAS_UNINIT);\nTRACE_DEFINE_ENUM(XFS_DAS_SF_ADD);\nTRACE_DEFINE_ENUM(XFS_DAS_SF_REMOVE);\nTRACE_DEFINE_ENUM(XFS_DAS_LEAF_ADD);\nTRACE_DEFINE_ENUM(XFS_DAS_LEAF_REMOVE);\nTRACE_DEFINE_ENUM(XFS_DAS_NODE_ADD);\nTRACE_DEFINE_ENUM(XFS_DAS_NODE_REMOVE);\nTRACE_DEFINE_ENUM(XFS_DAS_LEAF_SET_RMT);\nTRACE_DEFINE_ENUM(XFS_DAS_LEAF_ALLOC_RMT);\nTRACE_DEFINE_ENUM(XFS_DAS_LEAF_REPLACE);\nTRACE_DEFINE_ENUM(XFS_DAS_LEAF_REMOVE_OLD);\nTRACE_DEFINE_ENUM(XFS_DAS_LEAF_REMOVE_RMT);\nTRACE_DEFINE_ENUM(XFS_DAS_LEAF_REMOVE_ATTR);\nTRACE_DEFINE_ENUM(XFS_DAS_NODE_SET_RMT);\nTRACE_DEFINE_ENUM(XFS_DAS_NODE_ALLOC_RMT);\nTRACE_DEFINE_ENUM(XFS_DAS_NODE_REPLACE);\nTRACE_DEFINE_ENUM(XFS_DAS_NODE_REMOVE_OLD);\nTRACE_DEFINE_ENUM(XFS_DAS_NODE_REMOVE_RMT);\nTRACE_DEFINE_ENUM(XFS_DAS_NODE_REMOVE_ATTR);\nTRACE_DEFINE_ENUM(XFS_DAS_DONE);\n\nDECLARE_EVENT_CLASS(xfs_das_state_class,\n\tTP_PROTO(int das, struct xfs_inode *ip),\n\tTP_ARGS(das, ip),\n\tTP_STRUCT__entry(\n\t\t__field(int, das)\n\t\t__field(xfs_ino_t, ino)\n\t),\n\tTP_fast_assign(\n\t\t__entry->das = das;\n\t\t__entry->ino = ip->i_ino;\n\t),\n\tTP_printk(\"state change %s ino 0x%llx\",\n\t\t  __print_symbolic(__entry->das, XFS_DAS_STRINGS),\n\t\t  __entry->ino)\n)\n\n#define DEFINE_DAS_STATE_EVENT(name) \\\nDEFINE_EVENT(xfs_das_state_class, name, \\\n\tTP_PROTO(int das, struct xfs_inode *ip), \\\n\tTP_ARGS(das, ip))\nDEFINE_DAS_STATE_EVENT(xfs_attr_sf_addname_return);\nDEFINE_DAS_STATE_EVENT(xfs_attr_set_iter_return);\nDEFINE_DAS_STATE_EVENT(xfs_attr_leaf_addname_return);\nDEFINE_DAS_STATE_EVENT(xfs_attr_node_addname_return);\nDEFINE_DAS_STATE_EVENT(xfs_attr_remove_iter_return);\nDEFINE_DAS_STATE_EVENT(xfs_attr_rmtval_alloc);\nDEFINE_DAS_STATE_EVENT(xfs_attr_rmtval_remove_return);\nDEFINE_DAS_STATE_EVENT(xfs_attr_defer_add);\nDEFINE_DAS_STATE_EVENT(xfs_attr_defer_replace);\nDEFINE_DAS_STATE_EVENT(xfs_attr_defer_remove);\n\n\nTRACE_EVENT(xfs_force_shutdown,\n\tTP_PROTO(struct xfs_mount *mp, int ptag, int flags, const char *fname,\n\t\t int line_num),\n\tTP_ARGS(mp, ptag, flags, fname, line_num),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, ptag)\n\t\t__field(int, flags)\n\t\t__string(fname, fname)\n\t\t__field(int, line_num)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->ptag = ptag;\n\t\t__entry->flags = flags;\n\t\t__assign_str(fname, fname);\n\t\t__entry->line_num = line_num;\n\t),\n\tTP_printk(\"dev %d:%d tag %s flags %s file %s line_num %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t__print_flags(__entry->ptag, \"|\", XFS_PTAG_STRINGS),\n\t\t__print_flags(__entry->flags, \"|\", XFS_SHUTDOWN_STRINGS),\n\t\t__get_str(fname),\n\t\t__entry->line_num)\n);\n\n#ifdef CONFIG_XFS_DRAIN_INTENTS\nDECLARE_EVENT_CLASS(xfs_perag_intents_class,\n\tTP_PROTO(struct xfs_perag *pag, void *caller_ip),\n\tTP_ARGS(pag, caller_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(long, nr_intents)\n\t\t__field(void *, caller_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = pag->pag_mount->m_super->s_dev;\n\t\t__entry->agno = pag->pag_agno;\n\t\t__entry->nr_intents = atomic_read(&pag->pag_intents_drain.dr_count);\n\t\t__entry->caller_ip = caller_ip;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x intents %ld caller %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->nr_intents,\n\t\t  __entry->caller_ip)\n);\n\n#define DEFINE_PERAG_INTENTS_EVENT(name)\t\\\nDEFINE_EVENT(xfs_perag_intents_class, name,\t\t\t\t\t\\\n\tTP_PROTO(struct xfs_perag *pag, void *caller_ip), \\\n\tTP_ARGS(pag, caller_ip))\nDEFINE_PERAG_INTENTS_EVENT(xfs_perag_intent_hold);\nDEFINE_PERAG_INTENTS_EVENT(xfs_perag_intent_rele);\nDEFINE_PERAG_INTENTS_EVENT(xfs_perag_wait_intents);\n\n#endif  \n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE xfs_trace\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}