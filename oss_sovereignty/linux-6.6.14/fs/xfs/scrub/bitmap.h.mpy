{
  "module_name": "bitmap.h",
  "hash_id": "96ce8194a0af9748e587e9847dea89b173c5411c95ecfc5ecc70ccbb1fd1bb02",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/scrub/bitmap.h",
  "human_readable_source": "\n \n#ifndef __XFS_SCRUB_BITMAP_H__\n#define __XFS_SCRUB_BITMAP_H__\n\nstruct xbitmap {\n\tstruct rb_root_cached\txb_root;\n};\n\nvoid xbitmap_init(struct xbitmap *bitmap);\nvoid xbitmap_destroy(struct xbitmap *bitmap);\n\nint xbitmap_clear(struct xbitmap *bitmap, uint64_t start, uint64_t len);\nint xbitmap_set(struct xbitmap *bitmap, uint64_t start, uint64_t len);\nint xbitmap_disunion(struct xbitmap *bitmap, struct xbitmap *sub);\nuint64_t xbitmap_hweight(struct xbitmap *bitmap);\n\n \ntypedef int (*xbitmap_walk_fn)(uint64_t start, uint64_t len, void *priv);\nint xbitmap_walk(struct xbitmap *bitmap, xbitmap_walk_fn fn,\n\t\tvoid *priv);\n\nbool xbitmap_empty(struct xbitmap *bitmap);\nbool xbitmap_test(struct xbitmap *bitmap, uint64_t start, uint64_t *len);\n\n \n\nstruct xagb_bitmap {\n\tstruct xbitmap\tagbitmap;\n};\n\nstatic inline void xagb_bitmap_init(struct xagb_bitmap *bitmap)\n{\n\txbitmap_init(&bitmap->agbitmap);\n}\n\nstatic inline void xagb_bitmap_destroy(struct xagb_bitmap *bitmap)\n{\n\txbitmap_destroy(&bitmap->agbitmap);\n}\n\nstatic inline int xagb_bitmap_clear(struct xagb_bitmap *bitmap,\n\t\txfs_agblock_t start, xfs_extlen_t len)\n{\n\treturn xbitmap_clear(&bitmap->agbitmap, start, len);\n}\nstatic inline int xagb_bitmap_set(struct xagb_bitmap *bitmap,\n\t\txfs_agblock_t start, xfs_extlen_t len)\n{\n\treturn xbitmap_set(&bitmap->agbitmap, start, len);\n}\n\nstatic inline bool\nxagb_bitmap_test(\n\tstruct xagb_bitmap\t*bitmap,\n\txfs_agblock_t\t\tstart,\n\txfs_extlen_t\t\t*len)\n{\n\tuint64_t\t\tbiglen = *len;\n\tbool\t\t\tret;\n\n\tret = xbitmap_test(&bitmap->agbitmap, start, &biglen);\n\n\tif (start + biglen >= UINT_MAX) {\n\t\tASSERT(0);\n\t\tbiglen = UINT_MAX - start;\n\t}\n\n\t*len = biglen;\n\treturn ret;\n}\n\nstatic inline int xagb_bitmap_disunion(struct xagb_bitmap *bitmap,\n\t\tstruct xagb_bitmap *sub)\n{\n\treturn xbitmap_disunion(&bitmap->agbitmap, &sub->agbitmap);\n}\n\nstatic inline uint32_t xagb_bitmap_hweight(struct xagb_bitmap *bitmap)\n{\n\treturn xbitmap_hweight(&bitmap->agbitmap);\n}\nstatic inline bool xagb_bitmap_empty(struct xagb_bitmap *bitmap)\n{\n\treturn xbitmap_empty(&bitmap->agbitmap);\n}\n\nstatic inline int xagb_bitmap_walk(struct xagb_bitmap *bitmap,\n\t\txbitmap_walk_fn fn, void *priv)\n{\n\treturn xbitmap_walk(&bitmap->agbitmap, fn, priv);\n}\n\nint xagb_bitmap_set_btblocks(struct xagb_bitmap *bitmap,\n\t\tstruct xfs_btree_cur *cur);\nint xagb_bitmap_set_btcur_path(struct xagb_bitmap *bitmap,\n\t\tstruct xfs_btree_cur *cur);\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}