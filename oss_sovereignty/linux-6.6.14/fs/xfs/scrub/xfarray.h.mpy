{
  "module_name": "xfarray.h",
  "hash_id": "60f01bf1caa5cd22cfccc0adffad008419f037cb9fde31b39a6d3f8fe2b8b044",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/scrub/xfarray.h",
  "human_readable_source": " \n \n#ifndef __XFS_SCRUB_XFARRAY_H__\n#define __XFS_SCRUB_XFARRAY_H__\n\n \ntypedef uint64_t\t\txfarray_idx_t;\n#define XFARRAY_CURSOR_INIT\t((__force xfarray_idx_t)0)\n\n \n#define foreach_xfarray_idx(array, idx) \\\n\tfor ((idx) = XFARRAY_CURSOR_INIT; \\\n\t     (idx) < xfarray_length(array); \\\n\t     (idx)++)\n\nstruct xfarray {\n\t \n\tstruct xfile\t*xfile;\n\n\t \n\txfarray_idx_t\tnr;\n\n\t \n\txfarray_idx_t\tmax_nr;\n\n\t \n\tuint64_t\tunset_slots;\n\n\t \n\tsize_t\t\tobj_size;\n\n\t \n\tint\t\tobj_size_log;\n};\n\nint xfarray_create(const char *descr, unsigned long long required_capacity,\n\t\tsize_t obj_size, struct xfarray **arrayp);\nvoid xfarray_destroy(struct xfarray *array);\nint xfarray_load(struct xfarray *array, xfarray_idx_t idx, void *ptr);\nint xfarray_unset(struct xfarray *array, xfarray_idx_t idx);\nint xfarray_store(struct xfarray *array, xfarray_idx_t idx, const void *ptr);\nint xfarray_store_anywhere(struct xfarray *array, const void *ptr);\nbool xfarray_element_is_null(struct xfarray *array, const void *ptr);\n\n \nstatic inline int xfarray_append(struct xfarray *array, const void *ptr)\n{\n\treturn xfarray_store(array, array->nr, ptr);\n}\n\nuint64_t xfarray_length(struct xfarray *array);\nint xfarray_load_next(struct xfarray *array, xfarray_idx_t *idx, void *rec);\n\n \n\ntypedef cmp_func_t xfarray_cmp_fn;\n\n \n#define XFARRAY_ISORT_SHIFT\t\t(4)\n#define XFARRAY_ISORT_NR\t\t(1U << XFARRAY_ISORT_SHIFT)\n\n \n#define XFARRAY_QSORT_PIVOT_NR\t\t(9)\n\nstruct xfarray_sortinfo {\n\tstruct xfarray\t\t*array;\n\n\t \n\txfarray_cmp_fn\t\tcmp_fn;\n\n\t \n\tuint8_t\t\t\tmax_stack_depth;\n\n\t \n\tint8_t\t\t\tstack_depth;\n\n\t \n\tuint8_t\t\t\tmax_stack_used;\n\n\t \n\tunsigned int\t\tflags;\n\n\t \n\tstruct xfile_page\txfpage;\n\tvoid\t\t\t*page_kaddr;\n\n#ifdef DEBUG\n\t \n\tuint64_t\t\tloads;\n\tuint64_t\t\tstores;\n\tuint64_t\t\tcompares;\n\tuint64_t\t\theapsorts;\n#endif\n\t \n};\n\n \n#define XFARRAY_SORT_KILLABLE\t(1U << 0)\n\nint xfarray_sort(struct xfarray *array, xfarray_cmp_fn cmp_fn,\n\t\tunsigned int flags);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}