{
  "module_name": "trace.h",
  "hash_id": "b580d2149c01ccb6c7767c54371237166db56c7d9c9d5a14faf8ea955fd8ce8a",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/scrub/trace.h",
  "human_readable_source": "\n \n#undef TRACE_SYSTEM\n#define TRACE_SYSTEM xfs_scrub\n\n#if !defined(_TRACE_XFS_SCRUB_TRACE_H) || defined(TRACE_HEADER_MULTI_READ)\n#define _TRACE_XFS_SCRUB_TRACE_H\n\n#include <linux/tracepoint.h>\n#include \"xfs_bit.h\"\n\nstruct xfile;\nstruct xfarray;\nstruct xfarray_sortinfo;\n\n \nTRACE_DEFINE_ENUM(XFS_BTNUM_BNOi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_CNTi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_BMAPi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_INOi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_FINOi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_RMAPi);\nTRACE_DEFINE_ENUM(XFS_BTNUM_REFCi);\n\nTRACE_DEFINE_ENUM(XFS_REFC_DOMAIN_SHARED);\nTRACE_DEFINE_ENUM(XFS_REFC_DOMAIN_COW);\n\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_PROBE);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_SB);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_AGF);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_AGFL);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_AGI);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_BNOBT);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_CNTBT);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_INOBT);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_FINOBT);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_RMAPBT);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_REFCNTBT);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_INODE);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_BMBTD);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_BMBTA);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_BMBTC);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_DIR);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_XATTR);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_SYMLINK);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_PARENT);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_RTBITMAP);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_RTSUM);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_UQUOTA);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_GQUOTA);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_PQUOTA);\nTRACE_DEFINE_ENUM(XFS_SCRUB_TYPE_FSCOUNTERS);\n\n#define XFS_SCRUB_TYPE_STRINGS \\\n\t{ XFS_SCRUB_TYPE_PROBE,\t\t\"probe\" }, \\\n\t{ XFS_SCRUB_TYPE_SB,\t\t\"sb\" }, \\\n\t{ XFS_SCRUB_TYPE_AGF,\t\t\"agf\" }, \\\n\t{ XFS_SCRUB_TYPE_AGFL,\t\t\"agfl\" }, \\\n\t{ XFS_SCRUB_TYPE_AGI,\t\t\"agi\" }, \\\n\t{ XFS_SCRUB_TYPE_BNOBT,\t\t\"bnobt\" }, \\\n\t{ XFS_SCRUB_TYPE_CNTBT,\t\t\"cntbt\" }, \\\n\t{ XFS_SCRUB_TYPE_INOBT,\t\t\"inobt\" }, \\\n\t{ XFS_SCRUB_TYPE_FINOBT,\t\"finobt\" }, \\\n\t{ XFS_SCRUB_TYPE_RMAPBT,\t\"rmapbt\" }, \\\n\t{ XFS_SCRUB_TYPE_REFCNTBT,\t\"refcountbt\" }, \\\n\t{ XFS_SCRUB_TYPE_INODE,\t\t\"inode\" }, \\\n\t{ XFS_SCRUB_TYPE_BMBTD,\t\t\"bmapbtd\" }, \\\n\t{ XFS_SCRUB_TYPE_BMBTA,\t\t\"bmapbta\" }, \\\n\t{ XFS_SCRUB_TYPE_BMBTC,\t\t\"bmapbtc\" }, \\\n\t{ XFS_SCRUB_TYPE_DIR,\t\t\"directory\" }, \\\n\t{ XFS_SCRUB_TYPE_XATTR,\t\t\"xattr\" }, \\\n\t{ XFS_SCRUB_TYPE_SYMLINK,\t\"symlink\" }, \\\n\t{ XFS_SCRUB_TYPE_PARENT,\t\"parent\" }, \\\n\t{ XFS_SCRUB_TYPE_RTBITMAP,\t\"rtbitmap\" }, \\\n\t{ XFS_SCRUB_TYPE_RTSUM,\t\t\"rtsummary\" }, \\\n\t{ XFS_SCRUB_TYPE_UQUOTA,\t\"usrquota\" }, \\\n\t{ XFS_SCRUB_TYPE_GQUOTA,\t\"grpquota\" }, \\\n\t{ XFS_SCRUB_TYPE_PQUOTA,\t\"prjquota\" }, \\\n\t{ XFS_SCRUB_TYPE_FSCOUNTERS,\t\"fscounters\" }\n\n#define XFS_SCRUB_FLAG_STRINGS \\\n\t{ XFS_SCRUB_IFLAG_REPAIR,\t\t\"repair\" }, \\\n\t{ XFS_SCRUB_OFLAG_CORRUPT,\t\t\"corrupt\" }, \\\n\t{ XFS_SCRUB_OFLAG_PREEN,\t\t\"preen\" }, \\\n\t{ XFS_SCRUB_OFLAG_XFAIL,\t\t\"xfail\" }, \\\n\t{ XFS_SCRUB_OFLAG_XCORRUPT,\t\t\"xcorrupt\" }, \\\n\t{ XFS_SCRUB_OFLAG_INCOMPLETE,\t\t\"incomplete\" }, \\\n\t{ XFS_SCRUB_OFLAG_WARNING,\t\t\"warning\" }, \\\n\t{ XFS_SCRUB_OFLAG_NO_REPAIR_NEEDED,\t\"norepair\" }, \\\n\t{ XFS_SCRUB_IFLAG_FORCE_REBUILD,\t\"rebuild\" }\n\n#define XFS_SCRUB_STATE_STRINGS \\\n\t{ XCHK_TRY_HARDER,\t\t\t\"try_harder\" }, \\\n\t{ XCHK_HAVE_FREEZE_PROT,\t\t\"nofreeze\" }, \\\n\t{ XCHK_FSGATES_DRAIN,\t\t\t\"fsgates_drain\" }, \\\n\t{ XCHK_NEED_DRAIN,\t\t\t\"need_drain\" }, \\\n\t{ XREP_ALREADY_FIXED,\t\t\t\"already_fixed\" }\n\nDECLARE_EVENT_CLASS(xchk_class,\n\tTP_PROTO(struct xfs_inode *ip, struct xfs_scrub_metadata *sm,\n\t\t int error),\n\tTP_ARGS(ip, sm, error),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(unsigned int, type)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_ino_t, inum)\n\t\t__field(unsigned int, gen)\n\t\t__field(unsigned int, flags)\n\t\t__field(int, error)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = ip->i_mount->m_super->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->type = sm->sm_type;\n\t\t__entry->agno = sm->sm_agno;\n\t\t__entry->inum = sm->sm_ino;\n\t\t__entry->gen = sm->sm_gen;\n\t\t__entry->flags = sm->sm_flags;\n\t\t__entry->error = error;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx type %s agno 0x%x inum 0x%llx gen 0x%x flags (%s) error %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __entry->agno,\n\t\t  __entry->inum,\n\t\t  __entry->gen,\n\t\t  __print_flags(__entry->flags, \"|\", XFS_SCRUB_FLAG_STRINGS),\n\t\t  __entry->error)\n)\n#define DEFINE_SCRUB_EVENT(name) \\\nDEFINE_EVENT(xchk_class, name, \\\n\tTP_PROTO(struct xfs_inode *ip, struct xfs_scrub_metadata *sm, \\\n\t\t int error), \\\n\tTP_ARGS(ip, sm, error))\n\nDEFINE_SCRUB_EVENT(xchk_start);\nDEFINE_SCRUB_EVENT(xchk_done);\nDEFINE_SCRUB_EVENT(xchk_deadlock_retry);\nDEFINE_SCRUB_EVENT(xrep_attempt);\nDEFINE_SCRUB_EVENT(xrep_done);\n\nDECLARE_EVENT_CLASS(xchk_fsgate_class,\n\tTP_PROTO(struct xfs_scrub *sc, unsigned int fsgate_flags),\n\tTP_ARGS(sc, fsgate_flags),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, type)\n\t\t__field(unsigned int, fsgate_flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->fsgate_flags = fsgate_flags;\n\t),\n\tTP_printk(\"dev %d:%d type %s fsgates '%s'\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __print_flags(__entry->fsgate_flags, \"|\", XFS_SCRUB_STATE_STRINGS))\n)\n\n#define DEFINE_SCRUB_FSHOOK_EVENT(name) \\\nDEFINE_EVENT(xchk_fsgate_class, name, \\\n\tTP_PROTO(struct xfs_scrub *sc, unsigned int fsgates_flags), \\\n\tTP_ARGS(sc, fsgates_flags))\n\nDEFINE_SCRUB_FSHOOK_EVENT(xchk_fsgates_enable);\nDEFINE_SCRUB_FSHOOK_EVENT(xchk_fsgates_disable);\n\nTRACE_EVENT(xchk_op_error,\n\tTP_PROTO(struct xfs_scrub *sc, xfs_agnumber_t agno,\n\t\t xfs_agblock_t bno, int error, void *ret_ip),\n\tTP_ARGS(sc, agno, bno, error, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, type)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, bno)\n\t\t__field(int, error)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->agno = agno;\n\t\t__entry->bno = bno;\n\t\t__entry->error = error;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d type %s agno 0x%x agbno 0x%x error %d ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __entry->agno,\n\t\t  __entry->bno,\n\t\t  __entry->error,\n\t\t  __entry->ret_ip)\n);\n\nTRACE_EVENT(xchk_file_op_error,\n\tTP_PROTO(struct xfs_scrub *sc, int whichfork,\n\t\t xfs_fileoff_t offset, int error, void *ret_ip),\n\tTP_ARGS(sc, whichfork, offset, error, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(int, whichfork)\n\t\t__field(unsigned int, type)\n\t\t__field(xfs_fileoff_t, offset)\n\t\t__field(int, error)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sc->ip->i_mount->m_super->s_dev;\n\t\t__entry->ino = sc->ip->i_ino;\n\t\t__entry->whichfork = whichfork;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->offset = offset;\n\t\t__entry->error = error;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx fork %s type %s fileoff 0x%llx error %d ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_symbolic(__entry->whichfork, XFS_WHICHFORK_STRINGS),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __entry->offset,\n\t\t  __entry->error,\n\t\t  __entry->ret_ip)\n);\n\nDECLARE_EVENT_CLASS(xchk_block_error_class,\n\tTP_PROTO(struct xfs_scrub *sc, xfs_daddr_t daddr, void *ret_ip),\n\tTP_ARGS(sc, daddr, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, type)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->agno = xfs_daddr_to_agno(sc->mp, daddr);\n\t\t__entry->agbno = xfs_daddr_to_agbno(sc->mp, daddr);\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d type %s agno 0x%x agbno 0x%x ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->ret_ip)\n)\n\n#define DEFINE_SCRUB_BLOCK_ERROR_EVENT(name) \\\nDEFINE_EVENT(xchk_block_error_class, name, \\\n\tTP_PROTO(struct xfs_scrub *sc, xfs_daddr_t daddr, \\\n\t\t void *ret_ip), \\\n\tTP_ARGS(sc, daddr, ret_ip))\n\nDEFINE_SCRUB_BLOCK_ERROR_EVENT(xchk_fs_error);\nDEFINE_SCRUB_BLOCK_ERROR_EVENT(xchk_block_error);\nDEFINE_SCRUB_BLOCK_ERROR_EVENT(xchk_block_preen);\n\nDECLARE_EVENT_CLASS(xchk_ino_error_class,\n\tTP_PROTO(struct xfs_scrub *sc, xfs_ino_t ino, void *ret_ip),\n\tTP_ARGS(sc, ino, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(unsigned int, type)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->ino = ino;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx type %s ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __entry->ret_ip)\n)\n\n#define DEFINE_SCRUB_INO_ERROR_EVENT(name) \\\nDEFINE_EVENT(xchk_ino_error_class, name, \\\n\tTP_PROTO(struct xfs_scrub *sc, xfs_ino_t ino, \\\n\t\t void *ret_ip), \\\n\tTP_ARGS(sc, ino, ret_ip))\n\nDEFINE_SCRUB_INO_ERROR_EVENT(xchk_ino_error);\nDEFINE_SCRUB_INO_ERROR_EVENT(xchk_ino_preen);\nDEFINE_SCRUB_INO_ERROR_EVENT(xchk_ino_warning);\n\nDECLARE_EVENT_CLASS(xchk_fblock_error_class,\n\tTP_PROTO(struct xfs_scrub *sc, int whichfork,\n\t\t xfs_fileoff_t offset, void *ret_ip),\n\tTP_ARGS(sc, whichfork, offset, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(int, whichfork)\n\t\t__field(unsigned int, type)\n\t\t__field(xfs_fileoff_t, offset)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sc->ip->i_mount->m_super->s_dev;\n\t\t__entry->ino = sc->ip->i_ino;\n\t\t__entry->whichfork = whichfork;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->offset = offset;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx fork %s type %s fileoff 0x%llx ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_symbolic(__entry->whichfork, XFS_WHICHFORK_STRINGS),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __entry->offset,\n\t\t  __entry->ret_ip)\n);\n\n#define DEFINE_SCRUB_FBLOCK_ERROR_EVENT(name) \\\nDEFINE_EVENT(xchk_fblock_error_class, name, \\\n\tTP_PROTO(struct xfs_scrub *sc, int whichfork, \\\n\t\t xfs_fileoff_t offset, void *ret_ip), \\\n\tTP_ARGS(sc, whichfork, offset, ret_ip))\n\nDEFINE_SCRUB_FBLOCK_ERROR_EVENT(xchk_fblock_error);\nDEFINE_SCRUB_FBLOCK_ERROR_EVENT(xchk_fblock_warning);\n\nTRACE_EVENT(xchk_incomplete,\n\tTP_PROTO(struct xfs_scrub *sc, void *ret_ip),\n\tTP_ARGS(sc, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, type)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d type %s ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __entry->ret_ip)\n);\n\nTRACE_EVENT(xchk_btree_op_error,\n\tTP_PROTO(struct xfs_scrub *sc, struct xfs_btree_cur *cur,\n\t\t int level, int error, void *ret_ip),\n\tTP_ARGS(sc, cur, level, error, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, type)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(int, level)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, bno)\n\t\t__field(int, ptr)\n\t\t__field(int, error)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\txfs_fsblock_t fsbno = xchk_btree_cur_fsbno(cur, level);\n\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->level = level;\n\t\t__entry->agno = XFS_FSB_TO_AGNO(cur->bc_mp, fsbno);\n\t\t__entry->bno = XFS_FSB_TO_AGBNO(cur->bc_mp, fsbno);\n\t\t__entry->ptr = cur->bc_levels[level].ptr;\n\t\t__entry->error = error;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d type %s btree %s level %d ptr %d agno 0x%x agbno 0x%x error %d ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->level,\n\t\t  __entry->ptr,\n\t\t  __entry->agno,\n\t\t  __entry->bno,\n\t\t  __entry->error,\n\t\t  __entry->ret_ip)\n);\n\nTRACE_EVENT(xchk_ifork_btree_op_error,\n\tTP_PROTO(struct xfs_scrub *sc, struct xfs_btree_cur *cur,\n\t\t int level, int error, void *ret_ip),\n\tTP_ARGS(sc, cur, level, error, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(int, whichfork)\n\t\t__field(unsigned int, type)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(int, level)\n\t\t__field(int, ptr)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, bno)\n\t\t__field(int, error)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\txfs_fsblock_t fsbno = xchk_btree_cur_fsbno(cur, level);\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->ino = sc->ip->i_ino;\n\t\t__entry->whichfork = cur->bc_ino.whichfork;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->level = level;\n\t\t__entry->ptr = cur->bc_levels[level].ptr;\n\t\t__entry->agno = XFS_FSB_TO_AGNO(cur->bc_mp, fsbno);\n\t\t__entry->bno = XFS_FSB_TO_AGBNO(cur->bc_mp, fsbno);\n\t\t__entry->error = error;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx fork %s type %s btree %s level %d ptr %d agno 0x%x agbno 0x%x error %d ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_symbolic(__entry->whichfork, XFS_WHICHFORK_STRINGS),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->level,\n\t\t  __entry->ptr,\n\t\t  __entry->agno,\n\t\t  __entry->bno,\n\t\t  __entry->error,\n\t\t  __entry->ret_ip)\n);\n\nTRACE_EVENT(xchk_btree_error,\n\tTP_PROTO(struct xfs_scrub *sc, struct xfs_btree_cur *cur,\n\t\t int level, void *ret_ip),\n\tTP_ARGS(sc, cur, level, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, type)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(int, level)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, bno)\n\t\t__field(int, ptr)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\txfs_fsblock_t fsbno = xchk_btree_cur_fsbno(cur, level);\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->level = level;\n\t\t__entry->agno = XFS_FSB_TO_AGNO(cur->bc_mp, fsbno);\n\t\t__entry->bno = XFS_FSB_TO_AGBNO(cur->bc_mp, fsbno);\n\t\t__entry->ptr = cur->bc_levels[level].ptr;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d type %s btree %s level %d ptr %d agno 0x%x agbno 0x%x ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->level,\n\t\t  __entry->ptr,\n\t\t  __entry->agno,\n\t\t  __entry->bno,\n\t\t  __entry->ret_ip)\n);\n\nTRACE_EVENT(xchk_ifork_btree_error,\n\tTP_PROTO(struct xfs_scrub *sc, struct xfs_btree_cur *cur,\n\t\t int level, void *ret_ip),\n\tTP_ARGS(sc, cur, level, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(int, whichfork)\n\t\t__field(unsigned int, type)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(int, level)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, bno)\n\t\t__field(int, ptr)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\txfs_fsblock_t fsbno = xchk_btree_cur_fsbno(cur, level);\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->ino = sc->ip->i_ino;\n\t\t__entry->whichfork = cur->bc_ino.whichfork;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->level = level;\n\t\t__entry->agno = XFS_FSB_TO_AGNO(cur->bc_mp, fsbno);\n\t\t__entry->bno = XFS_FSB_TO_AGBNO(cur->bc_mp, fsbno);\n\t\t__entry->ptr = cur->bc_levels[level].ptr;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx fork %s type %s btree %s level %d ptr %d agno 0x%x agbno 0x%x ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __print_symbolic(__entry->whichfork, XFS_WHICHFORK_STRINGS),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->level,\n\t\t  __entry->ptr,\n\t\t  __entry->agno,\n\t\t  __entry->bno,\n\t\t  __entry->ret_ip)\n);\n\nDECLARE_EVENT_CLASS(xchk_sbtree_class,\n\tTP_PROTO(struct xfs_scrub *sc, struct xfs_btree_cur *cur,\n\t\t int level),\n\tTP_ARGS(sc, cur, level),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, type)\n\t\t__field(xfs_btnum_t, btnum)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, bno)\n\t\t__field(int, level)\n\t\t__field(int, nlevels)\n\t\t__field(int, ptr)\n\t),\n\tTP_fast_assign(\n\t\txfs_fsblock_t fsbno = xchk_btree_cur_fsbno(cur, level);\n\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->btnum = cur->bc_btnum;\n\t\t__entry->agno = XFS_FSB_TO_AGNO(cur->bc_mp, fsbno);\n\t\t__entry->bno = XFS_FSB_TO_AGBNO(cur->bc_mp, fsbno);\n\t\t__entry->level = level;\n\t\t__entry->nlevels = cur->bc_nlevels;\n\t\t__entry->ptr = cur->bc_levels[level].ptr;\n\t),\n\tTP_printk(\"dev %d:%d type %s btree %s agno 0x%x agbno 0x%x level %d nlevels %d ptr %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __print_symbolic(__entry->btnum, XFS_BTNUM_STRINGS),\n\t\t  __entry->agno,\n\t\t  __entry->bno,\n\t\t  __entry->level,\n\t\t  __entry->nlevels,\n\t\t  __entry->ptr)\n)\n#define DEFINE_SCRUB_SBTREE_EVENT(name) \\\nDEFINE_EVENT(xchk_sbtree_class, name, \\\n\tTP_PROTO(struct xfs_scrub *sc, struct xfs_btree_cur *cur, \\\n\t\t int level), \\\n\tTP_ARGS(sc, cur, level))\n\nDEFINE_SCRUB_SBTREE_EVENT(xchk_btree_rec);\nDEFINE_SCRUB_SBTREE_EVENT(xchk_btree_key);\n\nTRACE_EVENT(xchk_xref_error,\n\tTP_PROTO(struct xfs_scrub *sc, int error, void *ret_ip),\n\tTP_ARGS(sc, error, ret_ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int, type)\n\t\t__field(int, error)\n\t\t__field(void *, ret_ip)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->error = error;\n\t\t__entry->ret_ip = ret_ip;\n\t),\n\tTP_printk(\"dev %d:%d type %s xref error %d ret_ip %pS\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __entry->error,\n\t\t  __entry->ret_ip)\n);\n\nTRACE_EVENT(xchk_iallocbt_check_cluster,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agino_t startino, xfs_daddr_t map_daddr,\n\t\t unsigned short map_len, unsigned int chunk_ino,\n\t\t unsigned int nr_inodes, uint16_t cluster_mask,\n\t\t uint16_t holemask, unsigned int cluster_ino),\n\tTP_ARGS(mp, agno, startino, map_daddr, map_len, chunk_ino, nr_inodes,\n\t\tcluster_mask, holemask, cluster_ino),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, startino)\n\t\t__field(xfs_daddr_t, map_daddr)\n\t\t__field(unsigned short, map_len)\n\t\t__field(unsigned int, chunk_ino)\n\t\t__field(unsigned int, nr_inodes)\n\t\t__field(unsigned int, cluster_ino)\n\t\t__field(uint16_t, cluster_mask)\n\t\t__field(uint16_t, holemask)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->startino = startino;\n\t\t__entry->map_daddr = map_daddr;\n\t\t__entry->map_len = map_len;\n\t\t__entry->chunk_ino = chunk_ino;\n\t\t__entry->nr_inodes = nr_inodes;\n\t\t__entry->cluster_mask = cluster_mask;\n\t\t__entry->holemask = holemask;\n\t\t__entry->cluster_ino = cluster_ino;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x startino 0x%x daddr 0x%llx bbcount 0x%x chunkino 0x%x nr_inodes %u cluster_mask 0x%x holemask 0x%x cluster_ino 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->startino,\n\t\t  __entry->map_daddr,\n\t\t  __entry->map_len,\n\t\t  __entry->chunk_ino,\n\t\t  __entry->nr_inodes,\n\t\t  __entry->cluster_mask,\n\t\t  __entry->holemask,\n\t\t  __entry->cluster_ino)\n)\n\nTRACE_EVENT(xchk_inode_is_allocated,\n\tTP_PROTO(struct xfs_inode *ip),\n\tTP_ARGS(ip),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_ino_t, ino)\n\t\t__field(unsigned long, iflags)\n\t\t__field(umode_t, mode)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = VFS_I(ip)->i_sb->s_dev;\n\t\t__entry->ino = ip->i_ino;\n\t\t__entry->iflags = ip->i_flags;\n\t\t__entry->mode = VFS_I(ip)->i_mode;\n\t),\n\tTP_printk(\"dev %d:%d ino 0x%llx iflags 0x%lx mode 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->ino,\n\t\t  __entry->iflags,\n\t\t  __entry->mode)\n);\n\nTRACE_EVENT(xchk_fscounters_calc,\n\tTP_PROTO(struct xfs_mount *mp, uint64_t icount, uint64_t ifree,\n\t\t uint64_t fdblocks, uint64_t delalloc),\n\tTP_ARGS(mp, icount, ifree, fdblocks, delalloc),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(int64_t, icount_sb)\n\t\t__field(uint64_t, icount_calculated)\n\t\t__field(int64_t, ifree_sb)\n\t\t__field(uint64_t, ifree_calculated)\n\t\t__field(int64_t, fdblocks_sb)\n\t\t__field(uint64_t, fdblocks_calculated)\n\t\t__field(uint64_t, delalloc)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->icount_sb = mp->m_sb.sb_icount;\n\t\t__entry->icount_calculated = icount;\n\t\t__entry->ifree_sb = mp->m_sb.sb_ifree;\n\t\t__entry->ifree_calculated = ifree;\n\t\t__entry->fdblocks_sb = mp->m_sb.sb_fdblocks;\n\t\t__entry->fdblocks_calculated = fdblocks;\n\t\t__entry->delalloc = delalloc;\n\t),\n\tTP_printk(\"dev %d:%d icount %lld:%llu ifree %lld::%llu fdblocks %lld::%llu delalloc %llu\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->icount_sb,\n\t\t  __entry->icount_calculated,\n\t\t  __entry->ifree_sb,\n\t\t  __entry->ifree_calculated,\n\t\t  __entry->fdblocks_sb,\n\t\t  __entry->fdblocks_calculated,\n\t\t  __entry->delalloc)\n)\n\nTRACE_EVENT(xchk_fscounters_within_range,\n\tTP_PROTO(struct xfs_mount *mp, uint64_t expected, int64_t curr_value,\n\t\t int64_t old_value),\n\tTP_ARGS(mp, expected, curr_value, old_value),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(uint64_t, expected)\n\t\t__field(int64_t, curr_value)\n\t\t__field(int64_t, old_value)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->expected = expected;\n\t\t__entry->curr_value = curr_value;\n\t\t__entry->old_value = old_value;\n\t),\n\tTP_printk(\"dev %d:%d expected %llu curr_value %lld old_value %lld\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->expected,\n\t\t  __entry->curr_value,\n\t\t  __entry->old_value)\n)\n\nDECLARE_EVENT_CLASS(xchk_fsfreeze_class,\n\tTP_PROTO(struct xfs_scrub *sc, int error),\n\tTP_ARGS(sc, error),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned int, type)\n\t\t__field(int, error)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = sc->mp->m_super->s_dev;\n\t\t__entry->type = sc->sm->sm_type;\n\t\t__entry->error = error;\n\t),\n\tTP_printk(\"dev %d:%d type %s error %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __print_symbolic(__entry->type, XFS_SCRUB_TYPE_STRINGS),\n\t\t  __entry->error)\n);\n#define DEFINE_XCHK_FSFREEZE_EVENT(name) \\\nDEFINE_EVENT(xchk_fsfreeze_class, name, \\\n\tTP_PROTO(struct xfs_scrub *sc, int error), \\\n\tTP_ARGS(sc, error))\nDEFINE_XCHK_FSFREEZE_EVENT(xchk_fsfreeze);\nDEFINE_XCHK_FSFREEZE_EVENT(xchk_fsthaw);\n\nTRACE_EVENT(xchk_refcount_incorrect,\n\tTP_PROTO(struct xfs_perag *pag, const struct xfs_refcount_irec *irec,\n\t\t xfs_nlink_t seen),\n\tTP_ARGS(pag, irec, seen),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(enum xfs_refc_domain, domain)\n\t\t__field(xfs_agblock_t, startblock)\n\t\t__field(xfs_extlen_t, blockcount)\n\t\t__field(xfs_nlink_t, refcount)\n\t\t__field(xfs_nlink_t, seen)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = pag->pag_mount->m_super->s_dev;\n\t\t__entry->agno = pag->pag_agno;\n\t\t__entry->domain = irec->rc_domain;\n\t\t__entry->startblock = irec->rc_startblock;\n\t\t__entry->blockcount = irec->rc_blockcount;\n\t\t__entry->refcount = irec->rc_refcount;\n\t\t__entry->seen = seen;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x dom %s agbno 0x%x fsbcount 0x%x refcount %u seen %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __print_symbolic(__entry->domain, XFS_REFC_DOMAIN_STRINGS),\n\t\t  __entry->startblock,\n\t\t  __entry->blockcount,\n\t\t  __entry->refcount,\n\t\t  __entry->seen)\n)\n\nTRACE_EVENT(xfile_create,\n\tTP_PROTO(struct xfile *xf),\n\tTP_ARGS(xf),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(unsigned long, ino)\n\t\t__array(char, pathname, 256)\n\t),\n\tTP_fast_assign(\n\t\tchar\t\tpathname[257];\n\t\tchar\t\t*path;\n\n\t\t__entry->ino = file_inode(xf->file)->i_ino;\n\t\tmemset(pathname, 0, sizeof(pathname));\n\t\tpath = file_path(xf->file, pathname, sizeof(pathname) - 1);\n\t\tif (IS_ERR(path))\n\t\t\tpath = \"(unknown)\";\n\t\tstrncpy(__entry->pathname, path, sizeof(__entry->pathname));\n\t),\n\tTP_printk(\"xfino 0x%lx path '%s'\",\n\t\t  __entry->ino,\n\t\t  __entry->pathname)\n);\n\nTRACE_EVENT(xfile_destroy,\n\tTP_PROTO(struct xfile *xf),\n\tTP_ARGS(xf),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long long, bytes)\n\t\t__field(loff_t, size)\n\t),\n\tTP_fast_assign(\n\t\tstruct xfile_stat\tstatbuf;\n\t\tint\t\t\tret;\n\n\t\tret = xfile_stat(xf, &statbuf);\n\t\tif (!ret) {\n\t\t\t__entry->bytes = statbuf.bytes;\n\t\t\t__entry->size = statbuf.size;\n\t\t} else {\n\t\t\t__entry->bytes = -1;\n\t\t\t__entry->size = -1;\n\t\t}\n\t\t__entry->ino = file_inode(xf->file)->i_ino;\n\t),\n\tTP_printk(\"xfino 0x%lx mem_bytes 0x%llx isize 0x%llx\",\n\t\t  __entry->ino,\n\t\t  __entry->bytes,\n\t\t  __entry->size)\n);\n\nDECLARE_EVENT_CLASS(xfile_class,\n\tTP_PROTO(struct xfile *xf, loff_t pos, unsigned long long bytecount),\n\tTP_ARGS(xf, pos, bytecount),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long long, bytes_used)\n\t\t__field(loff_t, pos)\n\t\t__field(loff_t, size)\n\t\t__field(unsigned long long, bytecount)\n\t),\n\tTP_fast_assign(\n\t\tstruct xfile_stat\tstatbuf;\n\t\tint\t\t\tret;\n\n\t\tret = xfile_stat(xf, &statbuf);\n\t\tif (!ret) {\n\t\t\t__entry->bytes_used = statbuf.bytes;\n\t\t\t__entry->size = statbuf.size;\n\t\t} else {\n\t\t\t__entry->bytes_used = -1;\n\t\t\t__entry->size = -1;\n\t\t}\n\t\t__entry->ino = file_inode(xf->file)->i_ino;\n\t\t__entry->pos = pos;\n\t\t__entry->bytecount = bytecount;\n\t),\n\tTP_printk(\"xfino 0x%lx mem_bytes 0x%llx pos 0x%llx bytecount 0x%llx isize 0x%llx\",\n\t\t  __entry->ino,\n\t\t  __entry->bytes_used,\n\t\t  __entry->pos,\n\t\t  __entry->bytecount,\n\t\t  __entry->size)\n);\n#define DEFINE_XFILE_EVENT(name) \\\nDEFINE_EVENT(xfile_class, name, \\\n\tTP_PROTO(struct xfile *xf, loff_t pos, unsigned long long bytecount), \\\n\tTP_ARGS(xf, pos, bytecount))\nDEFINE_XFILE_EVENT(xfile_pread);\nDEFINE_XFILE_EVENT(xfile_pwrite);\nDEFINE_XFILE_EVENT(xfile_seek_data);\nDEFINE_XFILE_EVENT(xfile_get_page);\nDEFINE_XFILE_EVENT(xfile_put_page);\n\nTRACE_EVENT(xfarray_create,\n\tTP_PROTO(struct xfarray *xfa, unsigned long long required_capacity),\n\tTP_ARGS(xfa, required_capacity),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(uint64_t, max_nr)\n\t\t__field(size_t, obj_size)\n\t\t__field(int, obj_size_log)\n\t\t__field(unsigned long long, required_capacity)\n\t),\n\tTP_fast_assign(\n\t\t__entry->max_nr = xfa->max_nr;\n\t\t__entry->obj_size = xfa->obj_size;\n\t\t__entry->obj_size_log = xfa->obj_size_log;\n\t\t__entry->ino = file_inode(xfa->xfile->file)->i_ino;\n\t\t__entry->required_capacity = required_capacity;\n\t),\n\tTP_printk(\"xfino 0x%lx max_nr %llu reqd_nr %llu objsz %zu objszlog %d\",\n\t\t  __entry->ino,\n\t\t  __entry->max_nr,\n\t\t  __entry->required_capacity,\n\t\t  __entry->obj_size,\n\t\t  __entry->obj_size_log)\n);\n\nTRACE_EVENT(xfarray_isort,\n\tTP_PROTO(struct xfarray_sortinfo *si, uint64_t lo, uint64_t hi),\n\tTP_ARGS(si, lo, hi),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long long, lo)\n\t\t__field(unsigned long long, hi)\n\t),\n\tTP_fast_assign(\n\t\t__entry->ino = file_inode(si->array->xfile->file)->i_ino;\n\t\t__entry->lo = lo;\n\t\t__entry->hi = hi;\n\t),\n\tTP_printk(\"xfino 0x%lx lo %llu hi %llu elts %llu\",\n\t\t  __entry->ino,\n\t\t  __entry->lo,\n\t\t  __entry->hi,\n\t\t  __entry->hi - __entry->lo)\n);\n\nTRACE_EVENT(xfarray_pagesort,\n\tTP_PROTO(struct xfarray_sortinfo *si, uint64_t lo, uint64_t hi),\n\tTP_ARGS(si, lo, hi),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long long, lo)\n\t\t__field(unsigned long long, hi)\n\t),\n\tTP_fast_assign(\n\t\t__entry->ino = file_inode(si->array->xfile->file)->i_ino;\n\t\t__entry->lo = lo;\n\t\t__entry->hi = hi;\n\t),\n\tTP_printk(\"xfino 0x%lx lo %llu hi %llu elts %llu\",\n\t\t  __entry->ino,\n\t\t  __entry->lo,\n\t\t  __entry->hi,\n\t\t  __entry->hi - __entry->lo)\n);\n\nTRACE_EVENT(xfarray_qsort,\n\tTP_PROTO(struct xfarray_sortinfo *si, uint64_t lo, uint64_t hi),\n\tTP_ARGS(si, lo, hi),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long long, lo)\n\t\t__field(unsigned long long, hi)\n\t\t__field(int, stack_depth)\n\t\t__field(int, max_stack_depth)\n\t),\n\tTP_fast_assign(\n\t\t__entry->ino = file_inode(si->array->xfile->file)->i_ino;\n\t\t__entry->lo = lo;\n\t\t__entry->hi = hi;\n\t\t__entry->stack_depth = si->stack_depth;\n\t\t__entry->max_stack_depth = si->max_stack_depth;\n\t),\n\tTP_printk(\"xfino 0x%lx lo %llu hi %llu elts %llu stack %d/%d\",\n\t\t  __entry->ino,\n\t\t  __entry->lo,\n\t\t  __entry->hi,\n\t\t  __entry->hi - __entry->lo,\n\t\t  __entry->stack_depth,\n\t\t  __entry->max_stack_depth)\n);\n\nTRACE_EVENT(xfarray_sort,\n\tTP_PROTO(struct xfarray_sortinfo *si, size_t bytes),\n\tTP_ARGS(si, bytes),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n\t\t__field(unsigned long long, nr)\n\t\t__field(size_t, obj_size)\n\t\t__field(size_t, bytes)\n\t\t__field(unsigned int, max_stack_depth)\n\t),\n\tTP_fast_assign(\n\t\t__entry->nr = si->array->nr;\n\t\t__entry->obj_size = si->array->obj_size;\n\t\t__entry->ino = file_inode(si->array->xfile->file)->i_ino;\n\t\t__entry->bytes = bytes;\n\t\t__entry->max_stack_depth = si->max_stack_depth;\n\t),\n\tTP_printk(\"xfino 0x%lx nr %llu objsz %zu stack %u bytes %zu\",\n\t\t  __entry->ino,\n\t\t  __entry->nr,\n\t\t  __entry->obj_size,\n\t\t  __entry->max_stack_depth,\n\t\t  __entry->bytes)\n);\n\nTRACE_EVENT(xfarray_sort_stats,\n\tTP_PROTO(struct xfarray_sortinfo *si, int error),\n\tTP_ARGS(si, error),\n\tTP_STRUCT__entry(\n\t\t__field(unsigned long, ino)\n#ifdef DEBUG\n\t\t__field(unsigned long long, loads)\n\t\t__field(unsigned long long, stores)\n\t\t__field(unsigned long long, compares)\n\t\t__field(unsigned long long, heapsorts)\n#endif\n\t\t__field(unsigned int, max_stack_depth)\n\t\t__field(unsigned int, max_stack_used)\n\t\t__field(int, error)\n\t),\n\tTP_fast_assign(\n\t\t__entry->ino = file_inode(si->array->xfile->file)->i_ino;\n#ifdef DEBUG\n\t\t__entry->loads = si->loads;\n\t\t__entry->stores = si->stores;\n\t\t__entry->compares = si->compares;\n\t\t__entry->heapsorts = si->heapsorts;\n#endif\n\t\t__entry->max_stack_depth = si->max_stack_depth;\n\t\t__entry->max_stack_used = si->max_stack_used;\n\t\t__entry->error = error;\n\t),\n\tTP_printk(\n#ifdef DEBUG\n\t\t  \"xfino 0x%lx loads %llu stores %llu compares %llu heapsorts %llu stack_depth %u/%u error %d\",\n#else\n\t\t  \"xfino 0x%lx stack_depth %u/%u error %d\",\n#endif\n\t\t  __entry->ino,\n#ifdef DEBUG\n\t\t  __entry->loads,\n\t\t  __entry->stores,\n\t\t  __entry->compares,\n\t\t  __entry->heapsorts,\n#endif\n\t\t  __entry->max_stack_used,\n\t\t  __entry->max_stack_depth,\n\t\t  __entry->error)\n);\n\n#ifdef CONFIG_XFS_RT\nTRACE_EVENT(xchk_rtsum_record_free,\n\tTP_PROTO(struct xfs_mount *mp, xfs_rtblock_t start,\n\t\t uint64_t len, unsigned int log, loff_t pos, xfs_suminfo_t v),\n\tTP_ARGS(mp, start, len, log, pos, v),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(dev_t, rtdev)\n\t\t__field(xfs_rtblock_t, start)\n\t\t__field(unsigned long long, len)\n\t\t__field(unsigned int, log)\n\t\t__field(loff_t, pos)\n\t\t__field(xfs_suminfo_t, v)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->rtdev = mp->m_rtdev_targp->bt_dev;\n\t\t__entry->start = start;\n\t\t__entry->len = len;\n\t\t__entry->log = log;\n\t\t__entry->pos = pos;\n\t\t__entry->v = v;\n\t),\n\tTP_printk(\"dev %d:%d rtdev %d:%d rtx 0x%llx rtxcount 0x%llx log %u rsumpos 0x%llx sumcount %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  MAJOR(__entry->rtdev), MINOR(__entry->rtdev),\n\t\t  __entry->start,\n\t\t  __entry->len,\n\t\t  __entry->log,\n\t\t  __entry->pos,\n\t\t  __entry->v)\n);\n#endif  \n\n \n#if IS_ENABLED(CONFIG_XFS_ONLINE_REPAIR)\n\nDECLARE_EVENT_CLASS(xrep_extent_class,\n\tTP_PROTO(struct xfs_perag *pag, xfs_agblock_t agbno, xfs_extlen_t len),\n\tTP_ARGS(pag, agbno, len),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = pag->pag_mount->m_super->s_dev;\n\t\t__entry->agno = pag->pag_agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len)\n);\n#define DEFINE_REPAIR_EXTENT_EVENT(name) \\\nDEFINE_EVENT(xrep_extent_class, name, \\\n\tTP_PROTO(struct xfs_perag *pag, xfs_agblock_t agbno, xfs_extlen_t len), \\\n\tTP_ARGS(pag, agbno, len))\nDEFINE_REPAIR_EXTENT_EVENT(xreap_dispose_unmap_extent);\nDEFINE_REPAIR_EXTENT_EVENT(xreap_dispose_free_extent);\nDEFINE_REPAIR_EXTENT_EVENT(xreap_agextent_binval);\nDEFINE_REPAIR_EXTENT_EVENT(xrep_agfl_insert);\n\nDECLARE_EVENT_CLASS(xrep_reap_find_class,\n\tTP_PROTO(struct xfs_perag *pag, xfs_agblock_t agbno, xfs_extlen_t len,\n\t\tbool crosslinked),\n\tTP_ARGS(pag, agbno, len, crosslinked),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t\t__field(bool, crosslinked)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = pag->pag_mount->m_super->s_dev;\n\t\t__entry->agno = pag->pag_agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t\t__entry->crosslinked = crosslinked;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x crosslinked %d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len,\n\t\t  __entry->crosslinked ? 1 : 0)\n);\n#define DEFINE_REPAIR_REAP_FIND_EVENT(name) \\\nDEFINE_EVENT(xrep_reap_find_class, name, \\\n\tTP_PROTO(struct xfs_perag *pag, xfs_agblock_t agbno, xfs_extlen_t len, \\\n\t\t bool crosslinked), \\\n\tTP_ARGS(pag, agbno, len, crosslinked))\nDEFINE_REPAIR_REAP_FIND_EVENT(xreap_agextent_select);\n\nDECLARE_EVENT_CLASS(xrep_rmap_class,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agblock_t agbno, xfs_extlen_t len,\n\t\t uint64_t owner, uint64_t offset, unsigned int flags),\n\tTP_ARGS(mp, agno, agbno, len, owner, offset, flags),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(xfs_extlen_t, len)\n\t\t__field(uint64_t, owner)\n\t\t__field(uint64_t, offset)\n\t\t__field(unsigned int, flags)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->len = len;\n\t\t__entry->owner = owner;\n\t\t__entry->offset = offset;\n\t\t__entry->flags = flags;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x owner 0x%llx fileoff 0x%llx flags 0x%x\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->len,\n\t\t  __entry->owner,\n\t\t  __entry->offset,\n\t\t  __entry->flags)\n);\n#define DEFINE_REPAIR_RMAP_EVENT(name) \\\nDEFINE_EVENT(xrep_rmap_class, name, \\\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, \\\n\t\t xfs_agblock_t agbno, xfs_extlen_t len, \\\n\t\t uint64_t owner, uint64_t offset, unsigned int flags), \\\n\tTP_ARGS(mp, agno, agbno, len, owner, offset, flags))\nDEFINE_REPAIR_RMAP_EVENT(xrep_alloc_extent_fn);\nDEFINE_REPAIR_RMAP_EVENT(xrep_ialloc_extent_fn);\nDEFINE_REPAIR_RMAP_EVENT(xrep_rmap_extent_fn);\nDEFINE_REPAIR_RMAP_EVENT(xrep_bmap_extent_fn);\n\nTRACE_EVENT(xrep_refcount_extent_fn,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t struct xfs_refcount_irec *irec),\n\tTP_ARGS(mp, agno, irec),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, startblock)\n\t\t__field(xfs_extlen_t, blockcount)\n\t\t__field(xfs_nlink_t, refcount)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->startblock = irec->rc_startblock;\n\t\t__entry->blockcount = irec->rc_blockcount;\n\t\t__entry->refcount = irec->rc_refcount;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x fsbcount 0x%x refcount %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->startblock,\n\t\t  __entry->blockcount,\n\t\t  __entry->refcount)\n)\n\nTRACE_EVENT(xrep_findroot_block,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno, xfs_agblock_t agbno,\n\t\t uint32_t magic, uint16_t level),\n\tTP_ARGS(mp, agno, agbno, magic, level),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, agbno)\n\t\t__field(uint32_t, magic)\n\t\t__field(uint16_t, level)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->agbno = agbno;\n\t\t__entry->magic = magic;\n\t\t__entry->level = level;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x agbno 0x%x magic 0x%x level %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->agbno,\n\t\t  __entry->magic,\n\t\t  __entry->level)\n)\nTRACE_EVENT(xrep_calc_ag_resblks,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agino_t icount, xfs_agblock_t aglen, xfs_agblock_t freelen,\n\t\t xfs_agblock_t usedlen),\n\tTP_ARGS(mp, agno, icount, aglen, freelen, usedlen),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, icount)\n\t\t__field(xfs_agblock_t, aglen)\n\t\t__field(xfs_agblock_t, freelen)\n\t\t__field(xfs_agblock_t, usedlen)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->icount = icount;\n\t\t__entry->aglen = aglen;\n\t\t__entry->freelen = freelen;\n\t\t__entry->usedlen = usedlen;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x icount %u aglen %u freelen %u usedlen %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->icount,\n\t\t  __entry->aglen,\n\t\t  __entry->freelen,\n\t\t  __entry->usedlen)\n)\nTRACE_EVENT(xrep_calc_ag_resblks_btsize,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agblock_t bnobt_sz, xfs_agblock_t inobt_sz,\n\t\t xfs_agblock_t rmapbt_sz, xfs_agblock_t refcbt_sz),\n\tTP_ARGS(mp, agno, bnobt_sz, inobt_sz, rmapbt_sz, refcbt_sz),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agblock_t, bnobt_sz)\n\t\t__field(xfs_agblock_t, inobt_sz)\n\t\t__field(xfs_agblock_t, rmapbt_sz)\n\t\t__field(xfs_agblock_t, refcbt_sz)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->bnobt_sz = bnobt_sz;\n\t\t__entry->inobt_sz = inobt_sz;\n\t\t__entry->rmapbt_sz = rmapbt_sz;\n\t\t__entry->refcbt_sz = refcbt_sz;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x bnobt %u inobt %u rmapbt %u refcountbt %u\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->bnobt_sz,\n\t\t  __entry->inobt_sz,\n\t\t  __entry->rmapbt_sz,\n\t\t  __entry->refcbt_sz)\n)\nTRACE_EVENT(xrep_reset_counters,\n\tTP_PROTO(struct xfs_mount *mp),\n\tTP_ARGS(mp),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t),\n\tTP_printk(\"dev %d:%d\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev))\n)\n\nTRACE_EVENT(xrep_ialloc_insert,\n\tTP_PROTO(struct xfs_mount *mp, xfs_agnumber_t agno,\n\t\t xfs_agino_t startino, uint16_t holemask, uint8_t count,\n\t\t uint8_t freecount, uint64_t freemask),\n\tTP_ARGS(mp, agno, startino, holemask, count, freecount, freemask),\n\tTP_STRUCT__entry(\n\t\t__field(dev_t, dev)\n\t\t__field(xfs_agnumber_t, agno)\n\t\t__field(xfs_agino_t, startino)\n\t\t__field(uint16_t, holemask)\n\t\t__field(uint8_t, count)\n\t\t__field(uint8_t, freecount)\n\t\t__field(uint64_t, freemask)\n\t),\n\tTP_fast_assign(\n\t\t__entry->dev = mp->m_super->s_dev;\n\t\t__entry->agno = agno;\n\t\t__entry->startino = startino;\n\t\t__entry->holemask = holemask;\n\t\t__entry->count = count;\n\t\t__entry->freecount = freecount;\n\t\t__entry->freemask = freemask;\n\t),\n\tTP_printk(\"dev %d:%d agno 0x%x startino 0x%x holemask 0x%x count %u freecount %u freemask 0x%llx\",\n\t\t  MAJOR(__entry->dev), MINOR(__entry->dev),\n\t\t  __entry->agno,\n\t\t  __entry->startino,\n\t\t  __entry->holemask,\n\t\t  __entry->count,\n\t\t  __entry->freecount,\n\t\t  __entry->freemask)\n)\n\n#endif  \n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#define TRACE_INCLUDE_PATH .\n#define TRACE_INCLUDE_FILE scrub/trace\n#include <trace/define_trace.h>\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}