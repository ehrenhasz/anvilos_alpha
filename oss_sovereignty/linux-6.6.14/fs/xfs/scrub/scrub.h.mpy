{
  "module_name": "scrub.h",
  "hash_id": "1c818097390d71414aeda80194b1ca8f8ac68adcf92c2fbdea6a31abe1cf4c69",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/scrub/scrub.h",
  "human_readable_source": "\n \n#ifndef __XFS_SCRUB_SCRUB_H__\n#define __XFS_SCRUB_SCRUB_H__\n\nstruct xfs_scrub;\n\n \n#define XCHK_GFP_FLAGS\t((__force gfp_t)(GFP_KERNEL | __GFP_NOWARN | \\\n\t\t\t\t\t __GFP_RETRY_MAYFAIL))\n\n \nenum xchk_type {\n\tST_NONE = 1,\t \n\tST_PERAG,\t \n\tST_FS,\t\t \n\tST_INODE,\t \n};\n\nstruct xchk_meta_ops {\n\t \n\tint\t\t(*setup)(struct xfs_scrub *sc);\n\n\t \n\tint\t\t(*scrub)(struct xfs_scrub *);\n\n\t \n\tint\t\t(*repair)(struct xfs_scrub *);\n\n\t \n\tbool\t\t(*has)(struct xfs_mount *);\n\n\t \n\tenum xchk_type\ttype;\n};\n\n \nstruct xchk_ag {\n\tstruct xfs_perag\t*pag;\n\n\t \n\tstruct xfs_buf\t\t*agf_bp;\n\tstruct xfs_buf\t\t*agi_bp;\n\n\t \n\tstruct xfs_btree_cur\t*bno_cur;\n\tstruct xfs_btree_cur\t*cnt_cur;\n\tstruct xfs_btree_cur\t*ino_cur;\n\tstruct xfs_btree_cur\t*fino_cur;\n\tstruct xfs_btree_cur\t*rmap_cur;\n\tstruct xfs_btree_cur\t*refc_cur;\n};\n\nstruct xfs_scrub {\n\t \n\tstruct xfs_mount\t\t*mp;\n\tstruct xfs_scrub_metadata\t*sm;\n\tconst struct xchk_meta_ops\t*ops;\n\tstruct xfs_trans\t\t*tp;\n\n\t \n\tstruct file\t\t\t*file;\n\n\t \n\tstruct xfs_inode\t\t*ip;\n\n\t \n\tvoid\t\t\t\t*buf;\n\n\t \n\tvoid\t\t\t\t(*buf_cleanup)(void *buf);\n\n\t \n\tstruct xfile\t\t\t*xfile;\n\n\t \n\tuint\t\t\t\tilock_flags;\n\n\t \n\tunsigned int\t\t\tflags;\n\n\t \n\tunsigned int\t\t\tsick_mask;\n\n\t \n\tstruct xchk_ag\t\t\tsa;\n};\n\n \n#define XCHK_TRY_HARDER\t\t(1U << 0)   \n#define XCHK_HAVE_FREEZE_PROT\t(1U << 1)   \n#define XCHK_FSGATES_DRAIN\t(1U << 2)   \n#define XCHK_NEED_DRAIN\t\t(1U << 3)   \n#define XREP_ALREADY_FIXED\t(1U << 31)  \n\n \n#define XCHK_FSGATES_ALL\t(XCHK_FSGATES_DRAIN)\n\n \nint xchk_tester(struct xfs_scrub *sc);\nint xchk_superblock(struct xfs_scrub *sc);\nint xchk_agf(struct xfs_scrub *sc);\nint xchk_agfl(struct xfs_scrub *sc);\nint xchk_agi(struct xfs_scrub *sc);\nint xchk_bnobt(struct xfs_scrub *sc);\nint xchk_cntbt(struct xfs_scrub *sc);\nint xchk_inobt(struct xfs_scrub *sc);\nint xchk_finobt(struct xfs_scrub *sc);\nint xchk_rmapbt(struct xfs_scrub *sc);\nint xchk_refcountbt(struct xfs_scrub *sc);\nint xchk_inode(struct xfs_scrub *sc);\nint xchk_bmap_data(struct xfs_scrub *sc);\nint xchk_bmap_attr(struct xfs_scrub *sc);\nint xchk_bmap_cow(struct xfs_scrub *sc);\nint xchk_directory(struct xfs_scrub *sc);\nint xchk_xattr(struct xfs_scrub *sc);\nint xchk_symlink(struct xfs_scrub *sc);\nint xchk_parent(struct xfs_scrub *sc);\n#ifdef CONFIG_XFS_RT\nint xchk_rtbitmap(struct xfs_scrub *sc);\nint xchk_rtsummary(struct xfs_scrub *sc);\n#else\nstatic inline int\nxchk_rtbitmap(struct xfs_scrub *sc)\n{\n\treturn -ENOENT;\n}\nstatic inline int\nxchk_rtsummary(struct xfs_scrub *sc)\n{\n\treturn -ENOENT;\n}\n#endif\n#ifdef CONFIG_XFS_QUOTA\nint xchk_quota(struct xfs_scrub *sc);\n#else\nstatic inline int\nxchk_quota(struct xfs_scrub *sc)\n{\n\treturn -ENOENT;\n}\n#endif\nint xchk_fscounters(struct xfs_scrub *sc);\n\n \nvoid xchk_xref_is_used_space(struct xfs_scrub *sc, xfs_agblock_t agbno,\n\t\txfs_extlen_t len);\nvoid xchk_xref_is_not_inode_chunk(struct xfs_scrub *sc, xfs_agblock_t agbno,\n\t\txfs_extlen_t len);\nvoid xchk_xref_is_inode_chunk(struct xfs_scrub *sc, xfs_agblock_t agbno,\n\t\txfs_extlen_t len);\nvoid xchk_xref_is_only_owned_by(struct xfs_scrub *sc, xfs_agblock_t agbno,\n\t\txfs_extlen_t len, const struct xfs_owner_info *oinfo);\nvoid xchk_xref_is_not_owned_by(struct xfs_scrub *sc, xfs_agblock_t agbno,\n\t\txfs_extlen_t len, const struct xfs_owner_info *oinfo);\nvoid xchk_xref_has_no_owner(struct xfs_scrub *sc, xfs_agblock_t agbno,\n\t\txfs_extlen_t len);\nvoid xchk_xref_is_cow_staging(struct xfs_scrub *sc, xfs_agblock_t bno,\n\t\txfs_extlen_t len);\nvoid xchk_xref_is_not_shared(struct xfs_scrub *sc, xfs_agblock_t bno,\n\t\txfs_extlen_t len);\nvoid xchk_xref_is_not_cow_staging(struct xfs_scrub *sc, xfs_agblock_t bno,\n\t\txfs_extlen_t len);\n#ifdef CONFIG_XFS_RT\nvoid xchk_xref_is_used_rt_space(struct xfs_scrub *sc, xfs_rtblock_t rtbno,\n\t\txfs_extlen_t len);\n#else\n# define xchk_xref_is_used_rt_space(sc, rtbno, len) do { } while (0)\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}