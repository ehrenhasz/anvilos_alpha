{
  "module_name": "xfs_da_btree.h",
  "hash_id": "5ca1a9d075f00d3b83d3bb8aa48ee55bb7b513bdf99604118a53b058b7651f85",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/libxfs/xfs_da_btree.h",
  "human_readable_source": " \n \n#ifndef __XFS_DA_BTREE_H__\n#define\t__XFS_DA_BTREE_H__\n\nstruct xfs_inode;\nstruct xfs_trans;\n\n \nstruct xfs_da_geometry {\n\tunsigned int\tblksize;\t \n\tunsigned int\tfsbcount;\t \n\tuint8_t\t\tfsblog;\t\t \n\tuint8_t\t\tblklog;\t\t \n\tunsigned int\tnode_hdr_size;\t \n\tunsigned int\tnode_ents;\t \n\tunsigned int\tmagicpct;\t \n\txfs_dablk_t\tdatablk;\t \n\tunsigned int\tleaf_hdr_size;\t \n\tunsigned int\tleaf_max_ents;\t \n\txfs_dablk_t\tleafblk;\t \n\tunsigned int\tfree_hdr_size;\t \n\tunsigned int\tfree_max_bests;\t \n\txfs_dablk_t\tfreeblk;\t \n\txfs_extnum_t\tmax_extents;\t \n\n\txfs_dir2_data_aoff_t data_first_offset;\n\tsize_t\t\tdata_entry_offset;\n};\n\n \n\n \nenum xfs_dacmp {\n\tXFS_CMP_DIFFERENT,\t \n\tXFS_CMP_EXACT,\t\t \n\tXFS_CMP_CASE\t\t \n};\n\n \ntypedef struct xfs_da_args {\n\tstruct xfs_da_geometry *geo;\t \n\tconst uint8_t\t\t*name;\t\t \n\tint\t\tnamelen;\t \n\tuint8_t\t\tfiletype;\t \n\tvoid\t\t*value;\t\t \n\tint\t\tvaluelen;\t \n\tunsigned int\tattr_filter;\t \n\tunsigned int\tattr_flags;\t \n\txfs_dahash_t\thashval;\t \n\txfs_ino_t\tinumber;\t \n\tstruct xfs_inode *dp;\t\t \n\tstruct xfs_trans *trans;\t \n\txfs_extlen_t\ttotal;\t\t \n\tint\t\twhichfork;\t \n\txfs_dablk_t\tblkno;\t\t \n\tint\t\tindex;\t\t \n\txfs_dablk_t\trmtblkno;\t \n\tint\t\trmtblkcnt;\t \n\tint\t\trmtvaluelen;\t \n\txfs_dablk_t\tblkno2;\t\t \n\tint\t\tindex2;\t\t \n\txfs_dablk_t\trmtblkno2;\t \n\tint\t\trmtblkcnt2;\t \n\tint\t\trmtvaluelen2;\t \n\tuint32_t\top_flags;\t \n\tenum xfs_dacmp\tcmpresult;\t \n} xfs_da_args_t;\n\n \n#define XFS_DA_OP_JUSTCHECK\t(1u << 0)  \n#define XFS_DA_OP_REPLACE\t(1u << 1)  \n#define XFS_DA_OP_ADDNAME\t(1u << 2)  \n#define XFS_DA_OP_OKNOENT\t(1u << 3)  \n#define XFS_DA_OP_CILOOKUP\t(1u << 4)  \n#define XFS_DA_OP_NOTIME\t(1u << 5)  \n#define XFS_DA_OP_REMOVE\t(1u << 6)  \n#define XFS_DA_OP_RECOVERY\t(1u << 7)  \n#define XFS_DA_OP_LOGGED\t(1u << 8)  \n\n#define XFS_DA_OP_FLAGS \\\n\t{ XFS_DA_OP_JUSTCHECK,\t\"JUSTCHECK\" }, \\\n\t{ XFS_DA_OP_REPLACE,\t\"REPLACE\" }, \\\n\t{ XFS_DA_OP_ADDNAME,\t\"ADDNAME\" }, \\\n\t{ XFS_DA_OP_OKNOENT,\t\"OKNOENT\" }, \\\n\t{ XFS_DA_OP_CILOOKUP,\t\"CILOOKUP\" }, \\\n\t{ XFS_DA_OP_NOTIME,\t\"NOTIME\" }, \\\n\t{ XFS_DA_OP_REMOVE,\t\"REMOVE\" }, \\\n\t{ XFS_DA_OP_RECOVERY,\t\"RECOVERY\" }, \\\n\t{ XFS_DA_OP_LOGGED,\t\"LOGGED\" }\n\n \ntypedef struct xfs_da_state_blk {\n\tstruct xfs_buf\t*bp;\t\t \n\txfs_dablk_t\tblkno;\t\t \n\txfs_daddr_t\tdisk_blkno;\t \n\tint\t\tindex;\t\t \n\txfs_dahash_t\thashval;\t \n\tint\t\tmagic;\t\t \n} xfs_da_state_blk_t;\n\ntypedef struct xfs_da_state_path {\n\tint\t\t\tactive;\t\t \n\txfs_da_state_blk_t\tblk[XFS_DA_NODE_MAXDEPTH];\n} xfs_da_state_path_t;\n\ntypedef struct xfs_da_state {\n\txfs_da_args_t\t\t*args;\t\t \n\tstruct xfs_mount\t*mp;\t\t \n\txfs_da_state_path_t\tpath;\t\t \n\txfs_da_state_path_t\taltpath;\t \n\tunsigned char\t\tinleaf;\t\t \n\tunsigned char\t\textravalid;\t \n\tunsigned char\t\textraafter;\t \n\txfs_da_state_blk_t\textrablk;\t \n\t\t\t\t\t\t \n} xfs_da_state_t;\n\n \nstruct xfs_da3_icnode_hdr {\n\tuint32_t\t\tforw;\n\tuint32_t\t\tback;\n\tuint16_t\t\tmagic;\n\tuint16_t\t\tcount;\n\tuint16_t\t\tlevel;\n\n\t \n\tstruct xfs_da_node_entry *btree;\n};\n\n \n#define XFS_DA_LOGOFF(BASE, ADDR)\t((char *)(ADDR) - (char *)(BASE))\n#define XFS_DA_LOGRANGE(BASE, ADDR, SIZE)\t\\\n\t\t(uint)(XFS_DA_LOGOFF(BASE, ADDR)), \\\n\t\t(uint)(XFS_DA_LOGOFF(BASE, ADDR)+(SIZE)-1)\n\n \n\n \nint\txfs_da3_node_create(struct xfs_da_args *args, xfs_dablk_t blkno,\n\t\t\t    int level, struct xfs_buf **bpp, int whichfork);\nint\txfs_da3_split(xfs_da_state_t *state);\n\n \nint\txfs_da3_join(xfs_da_state_t *state);\nvoid\txfs_da3_fixhashpath(struct xfs_da_state *state,\n\t\t\t    struct xfs_da_state_path *path_to_to_fix);\n\n \nint\txfs_da3_node_lookup_int(xfs_da_state_t *state, int *result);\nint\txfs_da3_path_shift(xfs_da_state_t *state, xfs_da_state_path_t *path,\n\t\t\t\t\t int forward, int release, int *result);\n \nint\txfs_da3_blk_link(xfs_da_state_t *state, xfs_da_state_blk_t *old_blk,\n\t\t\t\t       xfs_da_state_blk_t *new_blk);\nint\txfs_da3_node_read(struct xfs_trans *tp, struct xfs_inode *dp,\n\t\t\txfs_dablk_t bno, struct xfs_buf **bpp, int whichfork);\nint\txfs_da3_node_read_mapped(struct xfs_trans *tp, struct xfs_inode *dp,\n\t\t\txfs_daddr_t mappedbno, struct xfs_buf **bpp,\n\t\t\tint whichfork);\n\n \n\n#define XFS_DABUF_MAP_HOLE_OK\t(1u << 0)\n\nint\txfs_da_grow_inode(xfs_da_args_t *args, xfs_dablk_t *new_blkno);\nint\txfs_da_grow_inode_int(struct xfs_da_args *args, xfs_fileoff_t *bno,\n\t\t\t      int count);\nint\txfs_da_get_buf(struct xfs_trans *trans, struct xfs_inode *dp,\n\t\txfs_dablk_t bno, struct xfs_buf **bp, int whichfork);\nint\txfs_da_read_buf(struct xfs_trans *trans, struct xfs_inode *dp,\n\t\txfs_dablk_t bno, unsigned int flags, struct xfs_buf **bpp,\n\t\tint whichfork, const struct xfs_buf_ops *ops);\nint\txfs_da_reada_buf(struct xfs_inode *dp, xfs_dablk_t bno,\n\t\tunsigned int flags, int whichfork,\n\t\tconst struct xfs_buf_ops *ops);\nint\txfs_da_shrink_inode(xfs_da_args_t *args, xfs_dablk_t dead_blkno,\n\t\t\t\t\t  struct xfs_buf *dead_buf);\n\nuint xfs_da_hashname(const uint8_t *name_string, int name_length);\nenum xfs_dacmp xfs_da_compname(struct xfs_da_args *args,\n\t\t\t\tconst unsigned char *name, int len);\n\n\nstruct xfs_da_state *xfs_da_state_alloc(struct xfs_da_args *args);\nvoid xfs_da_state_free(xfs_da_state_t *state);\nvoid xfs_da_state_reset(struct xfs_da_state *state, struct xfs_da_args *args);\n\nvoid\txfs_da3_node_hdr_from_disk(struct xfs_mount *mp,\n\t\tstruct xfs_da3_icnode_hdr *to, struct xfs_da_intnode *from);\nvoid\txfs_da3_node_hdr_to_disk(struct xfs_mount *mp,\n\t\tstruct xfs_da_intnode *to, struct xfs_da3_icnode_hdr *from);\n\nextern struct kmem_cache\t*xfs_da_state_cache;\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}