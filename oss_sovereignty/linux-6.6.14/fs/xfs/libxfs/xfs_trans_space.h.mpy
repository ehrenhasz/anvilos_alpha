{
  "module_name": "xfs_trans_space.h",
  "hash_id": "1affe454f6480537f76513483b5188217ddcc3986b815a4b8f94c77537fc4b8b",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/libxfs/xfs_trans_space.h",
  "human_readable_source": "\n \n#ifndef __XFS_TRANS_SPACE_H__\n#define __XFS_TRANS_SPACE_H__\n\n \n\n \n#define XFS_MAX_CONTIG_RMAPS_PER_BLOCK(mp)    \\\n\t\t(((mp)->m_rmap_mxr[0]) - ((mp)->m_rmap_mnr[0]))\n\n \n#define XFS_RMAPADD_SPACE_RES(mp) ((mp)->m_rmap_maxlevels)\n\n \n#define XFS_OLD_REFLINK_RMAP_MAXLEVELS\t\t9\n\n \n#define XFS_NRMAPADD_SPACE_RES(mp, b)\\\n\t(((b + XFS_MAX_CONTIG_RMAPS_PER_BLOCK(mp) - 1) / \\\n\t  XFS_MAX_CONTIG_RMAPS_PER_BLOCK(mp)) * \\\n\t  XFS_RMAPADD_SPACE_RES(mp))\n\n#define XFS_MAX_CONTIG_EXTENTS_PER_BLOCK(mp)    \\\n\t\t(((mp)->m_alloc_mxr[0]) - ((mp)->m_alloc_mnr[0]))\n#define\tXFS_EXTENTADD_SPACE_RES(mp,w)\t(XFS_BM_MAXLEVELS(mp,w) - 1)\n#define XFS_NEXTENTADD_SPACE_RES(mp,b,w)\\\n\t(((b + XFS_MAX_CONTIG_EXTENTS_PER_BLOCK(mp) - 1) / \\\n\t  XFS_MAX_CONTIG_EXTENTS_PER_BLOCK(mp)) * \\\n\t  XFS_EXTENTADD_SPACE_RES(mp,w))\n\n \n#define XFS_SWAP_RMAP_SPACE_RES(mp,b,w)\\\n\t(XFS_NEXTENTADD_SPACE_RES((mp), (b), (w)) + \\\n\t XFS_NRMAPADD_SPACE_RES((mp), (b)))\n\n#define\tXFS_DAENTER_1B(mp,w)\t\\\n\t((w) == XFS_DATA_FORK ? (mp)->m_dir_geo->fsbcount : 1)\n#define\tXFS_DAENTER_DBS(mp,w)\t\\\n\t(XFS_DA_NODE_MAXDEPTH + (((w) == XFS_DATA_FORK) ? 2 : 0))\n#define\tXFS_DAENTER_BLOCKS(mp,w)\t\\\n\t(XFS_DAENTER_1B(mp,w) * XFS_DAENTER_DBS(mp,w))\n#define\tXFS_DAENTER_BMAP1B(mp,w)\t\\\n\tXFS_NEXTENTADD_SPACE_RES(mp, XFS_DAENTER_1B(mp, w), w)\n#define\tXFS_DAENTER_BMAPS(mp,w)\t\t\\\n\t(XFS_DAENTER_DBS(mp,w) * XFS_DAENTER_BMAP1B(mp,w))\n#define\tXFS_DAENTER_SPACE_RES(mp,w)\t\\\n\t(XFS_DAENTER_BLOCKS(mp,w) + XFS_DAENTER_BMAPS(mp,w))\n#define\tXFS_DAREMOVE_SPACE_RES(mp,w)\tXFS_DAENTER_BMAPS(mp,w)\n#define\tXFS_DIRENTER_MAX_SPLIT(mp,nl)\t1\n#define\tXFS_DIRENTER_SPACE_RES(mp,nl)\t\\\n\t(XFS_DAENTER_SPACE_RES(mp, XFS_DATA_FORK) * \\\n\t XFS_DIRENTER_MAX_SPLIT(mp,nl))\n#define\tXFS_DIRREMOVE_SPACE_RES(mp)\t\\\n\tXFS_DAREMOVE_SPACE_RES(mp, XFS_DATA_FORK)\n#define\tXFS_IALLOC_SPACE_RES(mp)\t\\\n\t(M_IGEO(mp)->ialloc_blks + \\\n\t ((xfs_has_finobt(mp) ? 2 : 1) * M_IGEO(mp)->inobt_maxlevels))\n\n \n#define\tXFS_ADDAFORK_SPACE_RES(mp)\t\\\n\t((mp)->m_dir_geo->fsbcount + XFS_DAENTER_BMAP1B(mp, XFS_DATA_FORK))\n#define\tXFS_ATTRRM_SPACE_RES(mp)\t\\\n\tXFS_DAREMOVE_SPACE_RES(mp, XFS_ATTR_FORK)\n \n#define\tXFS_ATTRSET_SPACE_RES(mp, v)\t\\\n\t(XFS_DAENTER_SPACE_RES(mp, XFS_ATTR_FORK) + XFS_B_TO_FSB(mp, v))\n#define\tXFS_CREATE_SPACE_RES(mp,nl)\t\\\n\t(XFS_IALLOC_SPACE_RES(mp) + XFS_DIRENTER_SPACE_RES(mp,nl))\n#define\tXFS_DIOSTRAT_SPACE_RES(mp, v)\t\\\n\t(XFS_EXTENTADD_SPACE_RES(mp, XFS_DATA_FORK) + (v))\n#define\tXFS_GROWFS_SPACE_RES(mp)\t\\\n\t(2 * (mp)->m_alloc_maxlevels)\n#define\tXFS_GROWFSRT_SPACE_RES(mp,b)\t\\\n\t((b) + XFS_EXTENTADD_SPACE_RES(mp, XFS_DATA_FORK))\n#define\tXFS_LINK_SPACE_RES(mp,nl)\t\\\n\tXFS_DIRENTER_SPACE_RES(mp,nl)\n#define\tXFS_MKDIR_SPACE_RES(mp,nl)\t\\\n\t(XFS_IALLOC_SPACE_RES(mp) + XFS_DIRENTER_SPACE_RES(mp,nl))\n#define\tXFS_QM_DQALLOC_SPACE_RES(mp)\t\\\n\t(XFS_EXTENTADD_SPACE_RES(mp, XFS_DATA_FORK) + \\\n\t XFS_DQUOT_CLUSTER_SIZE_FSB)\n#define\tXFS_QM_QINOCREATE_SPACE_RES(mp)\t\\\n\tXFS_IALLOC_SPACE_RES(mp)\n#define\tXFS_REMOVE_SPACE_RES(mp)\t\\\n\tXFS_DIRREMOVE_SPACE_RES(mp)\n#define\tXFS_RENAME_SPACE_RES(mp,nl)\t\\\n\t(XFS_DIRREMOVE_SPACE_RES(mp) + XFS_DIRENTER_SPACE_RES(mp,nl))\n#define\tXFS_SYMLINK_SPACE_RES(mp,nl,b)\t\\\n\t(XFS_IALLOC_SPACE_RES(mp) + XFS_DIRENTER_SPACE_RES(mp,nl) + (b))\n#define XFS_IFREE_SPACE_RES(mp)\t\t\\\n\t(xfs_has_finobt(mp) ? M_IGEO(mp)->inobt_maxlevels : 0)\n\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}