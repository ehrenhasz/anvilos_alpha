{
  "module_name": "xfs_types.c",
  "hash_id": "40f6fef767e39e659fc3724fe916ae69ce37458cb98947b17f18d61aeacecffe",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/libxfs/xfs_types.c",
  "human_readable_source": "\n \n#include \"xfs.h\"\n#include \"xfs_fs.h\"\n#include \"xfs_format.h\"\n#include \"xfs_shared.h\"\n#include \"xfs_trans_resv.h\"\n#include \"xfs_bit.h\"\n#include \"xfs_mount.h\"\n#include \"xfs_ag.h\"\n\n\n \nstatic inline bool\nxfs_verify_agno_agbno(\n\tstruct xfs_mount\t*mp,\n\txfs_agnumber_t\t\tagno,\n\txfs_agblock_t\t\tagbno)\n{\n\txfs_agblock_t\t\teoag;\n\n\teoag = xfs_ag_block_count(mp, agno);\n\tif (agbno >= eoag)\n\t\treturn false;\n\tif (agbno <= XFS_AGFL_BLOCK(mp))\n\t\treturn false;\n\treturn true;\n}\n\n \ninline bool\nxfs_verify_fsbno(\n\tstruct xfs_mount\t*mp,\n\txfs_fsblock_t\t\tfsbno)\n{\n\txfs_agnumber_t\t\tagno = XFS_FSB_TO_AGNO(mp, fsbno);\n\n\tif (agno >= mp->m_sb.sb_agcount)\n\t\treturn false;\n\treturn xfs_verify_agno_agbno(mp, agno, XFS_FSB_TO_AGBNO(mp, fsbno));\n}\n\n \nbool\nxfs_verify_fsbext(\n\tstruct xfs_mount\t*mp,\n\txfs_fsblock_t\t\tfsbno,\n\txfs_fsblock_t\t\tlen)\n{\n\tif (fsbno + len <= fsbno)\n\t\treturn false;\n\n\tif (!xfs_verify_fsbno(mp, fsbno))\n\t\treturn false;\n\n\tif (!xfs_verify_fsbno(mp, fsbno + len - 1))\n\t\treturn false;\n\n\treturn  XFS_FSB_TO_AGNO(mp, fsbno) ==\n\t\tXFS_FSB_TO_AGNO(mp, fsbno + len - 1);\n}\n\n \nstatic inline bool\nxfs_verify_agno_agino(\n\tstruct xfs_mount\t*mp,\n\txfs_agnumber_t\t\tagno,\n\txfs_agino_t\t\tagino)\n{\n\txfs_agino_t\t\tfirst;\n\txfs_agino_t\t\tlast;\n\n\txfs_agino_range(mp, agno, &first, &last);\n\treturn agino >= first && agino <= last;\n}\n\n \ninline bool\nxfs_verify_ino(\n\tstruct xfs_mount\t*mp,\n\txfs_ino_t\t\tino)\n{\n\txfs_agnumber_t\t\tagno = XFS_INO_TO_AGNO(mp, ino);\n\txfs_agino_t\t\tagino = XFS_INO_TO_AGINO(mp, ino);\n\n\tif (agno >= mp->m_sb.sb_agcount)\n\t\treturn false;\n\tif (XFS_AGINO_TO_INO(mp, agno, agino) != ino)\n\t\treturn false;\n\treturn xfs_verify_agno_agino(mp, agno, agino);\n}\n\n \ninline bool\nxfs_internal_inum(\n\tstruct xfs_mount\t*mp,\n\txfs_ino_t\t\tino)\n{\n\treturn ino == mp->m_sb.sb_rbmino || ino == mp->m_sb.sb_rsumino ||\n\t\t(xfs_has_quota(mp) &&\n\t\t xfs_is_quota_inode(&mp->m_sb, ino));\n}\n\n \nbool\nxfs_verify_dir_ino(\n\tstruct xfs_mount\t*mp,\n\txfs_ino_t\t\tino)\n{\n\tif (xfs_internal_inum(mp, ino))\n\t\treturn false;\n\treturn xfs_verify_ino(mp, ino);\n}\n\n \ninline bool\nxfs_verify_rtbno(\n\tstruct xfs_mount\t*mp,\n\txfs_rtblock_t\t\trtbno)\n{\n\treturn rtbno < mp->m_sb.sb_rblocks;\n}\n\n \nbool\nxfs_verify_rtext(\n\tstruct xfs_mount\t*mp,\n\txfs_rtblock_t\t\trtbno,\n\txfs_rtblock_t\t\tlen)\n{\n\tif (rtbno + len <= rtbno)\n\t\treturn false;\n\n\tif (!xfs_verify_rtbno(mp, rtbno))\n\t\treturn false;\n\n\treturn xfs_verify_rtbno(mp, rtbno + len - 1);\n}\n\n \ninline void\nxfs_icount_range(\n\tstruct xfs_mount\t*mp,\n\tunsigned long long\t*min,\n\tunsigned long long\t*max)\n{\n\tunsigned long long\tnr_inos = 0;\n\tstruct xfs_perag\t*pag;\n\txfs_agnumber_t\t\tagno;\n\n\t \n\t*min = XFS_INODES_PER_CHUNK;\n\n\tfor_each_perag(mp, agno, pag)\n\t\tnr_inos += pag->agino_max - pag->agino_min + 1;\n\t*max = nr_inos;\n}\n\n \nbool\nxfs_verify_icount(\n\tstruct xfs_mount\t*mp,\n\tunsigned long long\ticount)\n{\n\tunsigned long long\tmin, max;\n\n\txfs_icount_range(mp, &min, &max);\n\treturn icount >= min && icount <= max;\n}\n\n \nbool\nxfs_verify_dablk(\n\tstruct xfs_mount\t*mp,\n\txfs_fileoff_t\t\tdabno)\n{\n\txfs_dablk_t\t\tmax_dablk = -1U;\n\n\treturn dabno <= max_dablk;\n}\n\n \nbool\nxfs_verify_fileoff(\n\tstruct xfs_mount\t*mp,\n\txfs_fileoff_t\t\toff)\n{\n\treturn off <= XFS_MAX_FILEOFF;\n}\n\n \nbool\nxfs_verify_fileext(\n\tstruct xfs_mount\t*mp,\n\txfs_fileoff_t\t\toff,\n\txfs_fileoff_t\t\tlen)\n{\n\tif (off + len <= off)\n\t\treturn false;\n\n\tif (!xfs_verify_fileoff(mp, off))\n\t\treturn false;\n\n\treturn xfs_verify_fileoff(mp, off + len - 1);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}