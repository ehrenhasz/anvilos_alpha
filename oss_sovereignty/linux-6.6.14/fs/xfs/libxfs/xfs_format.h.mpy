{
  "module_name": "xfs_format.h",
  "hash_id": "f3753b23cd601028c4a144d2c3e90a0623316d8f95e94555ccc43463bd5ccc13",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/libxfs/xfs_format.h",
  "human_readable_source": " \n \n#ifndef __XFS_FORMAT_H__\n#define __XFS_FORMAT_H__\n\n \n\nstruct xfs_mount;\nstruct xfs_trans;\nstruct xfs_inode;\nstruct xfs_buf;\nstruct xfs_ifork;\n\n \n#define\tXFS_SB_MAGIC\t\t0x58465342\t \n#define\tXFS_SB_VERSION_1\t1\t\t \n#define\tXFS_SB_VERSION_2\t2\t\t \n#define\tXFS_SB_VERSION_3\t3\t\t \n#define\tXFS_SB_VERSION_4\t4\t\t \n#define\tXFS_SB_VERSION_5\t5\t\t \n#define\tXFS_SB_VERSION_NUMBITS\t\t0x000f\n#define\tXFS_SB_VERSION_ALLFBITS\t\t0xfff0\n#define\tXFS_SB_VERSION_ATTRBIT\t\t0x0010\n#define\tXFS_SB_VERSION_NLINKBIT\t\t0x0020\n#define\tXFS_SB_VERSION_QUOTABIT\t\t0x0040\n#define\tXFS_SB_VERSION_ALIGNBIT\t\t0x0080\n#define\tXFS_SB_VERSION_DALIGNBIT\t0x0100\n#define\tXFS_SB_VERSION_SHAREDBIT\t0x0200\n#define XFS_SB_VERSION_LOGV2BIT\t\t0x0400\n#define XFS_SB_VERSION_SECTORBIT\t0x0800\n#define\tXFS_SB_VERSION_EXTFLGBIT\t0x1000\n#define\tXFS_SB_VERSION_DIRV2BIT\t\t0x2000\n#define\tXFS_SB_VERSION_BORGBIT\t\t0x4000\t \n#define\tXFS_SB_VERSION_MOREBITSBIT\t0x8000\n\n \n#define XFS_XATTR_SIZE_MAX (1 << 16)\n\n \n#define\tXFS_SB_VERSION_OKBITS\t\t\\\n\t((XFS_SB_VERSION_NUMBITS | XFS_SB_VERSION_ALLFBITS) & \\\n\t\t~XFS_SB_VERSION_SHAREDBIT)\n\n \n#define XFS_SB_VERSION2_RESERVED1BIT\t0x00000001\n#define XFS_SB_VERSION2_LAZYSBCOUNTBIT\t0x00000002\t \n#define XFS_SB_VERSION2_RESERVED4BIT\t0x00000004\n#define XFS_SB_VERSION2_ATTR2BIT\t0x00000008\t \n#define XFS_SB_VERSION2_PARENTBIT\t0x00000010\t \n#define XFS_SB_VERSION2_PROJID32BIT\t0x00000080\t \n#define XFS_SB_VERSION2_CRCBIT\t\t0x00000100\t \n#define XFS_SB_VERSION2_FTYPE\t\t0x00000200\t \n\n#define\tXFS_SB_VERSION2_OKBITS\t\t\\\n\t(XFS_SB_VERSION2_LAZYSBCOUNTBIT\t| \\\n\t XFS_SB_VERSION2_ATTR2BIT\t| \\\n\t XFS_SB_VERSION2_PROJID32BIT\t| \\\n\t XFS_SB_VERSION2_FTYPE)\n\n \n#define XFSLABEL_MAX\t\t\t12\n\n \ntypedef struct xfs_sb {\n\tuint32_t\tsb_magicnum;\t \n\tuint32_t\tsb_blocksize;\t \n\txfs_rfsblock_t\tsb_dblocks;\t \n\txfs_rfsblock_t\tsb_rblocks;\t \n\txfs_rtblock_t\tsb_rextents;\t \n\tuuid_t\t\tsb_uuid;\t \n\txfs_fsblock_t\tsb_logstart;\t \n\txfs_ino_t\tsb_rootino;\t \n\txfs_ino_t\tsb_rbmino;\t \n\txfs_ino_t\tsb_rsumino;\t \n\txfs_agblock_t\tsb_rextsize;\t \n\txfs_agblock_t\tsb_agblocks;\t \n\txfs_agnumber_t\tsb_agcount;\t \n\txfs_extlen_t\tsb_rbmblocks;\t \n\txfs_extlen_t\tsb_logblocks;\t \n\tuint16_t\tsb_versionnum;\t \n\tuint16_t\tsb_sectsize;\t \n\tuint16_t\tsb_inodesize;\t \n\tuint16_t\tsb_inopblock;\t \n\tchar\t\tsb_fname[XFSLABEL_MAX];  \n\tuint8_t\t\tsb_blocklog;\t \n\tuint8_t\t\tsb_sectlog;\t \n\tuint8_t\t\tsb_inodelog;\t \n\tuint8_t\t\tsb_inopblog;\t \n\tuint8_t\t\tsb_agblklog;\t \n\tuint8_t\t\tsb_rextslog;\t \n\tuint8_t\t\tsb_inprogress;\t \n\tuint8_t\t\tsb_imax_pct;\t \n\t\t\t\t\t \n\t \n\tuint64_t\tsb_icount;\t \n\tuint64_t\tsb_ifree;\t \n\tuint64_t\tsb_fdblocks;\t \n\tuint64_t\tsb_frextents;\t \n\t \n\txfs_ino_t\tsb_uquotino;\t \n\txfs_ino_t\tsb_gquotino;\t \n\tuint16_t\tsb_qflags;\t \n\tuint8_t\t\tsb_flags;\t \n\tuint8_t\t\tsb_shared_vn;\t \n\txfs_extlen_t\tsb_inoalignmt;\t \n\tuint32_t\tsb_unit;\t \n\tuint32_t\tsb_width;\t \n\tuint8_t\t\tsb_dirblklog;\t \n\tuint8_t\t\tsb_logsectlog;\t \n\tuint16_t\tsb_logsectsize;\t \n\tuint32_t\tsb_logsunit;\t \n\tuint32_t\tsb_features2;\t \n\n\t \n\tuint32_t\tsb_bad_features2;\n\n\t \n\n\t \n\tuint32_t\tsb_features_compat;\n\tuint32_t\tsb_features_ro_compat;\n\tuint32_t\tsb_features_incompat;\n\tuint32_t\tsb_features_log_incompat;\n\n\tuint32_t\tsb_crc;\t\t \n\txfs_extlen_t\tsb_spino_align;\t \n\n\txfs_ino_t\tsb_pquotino;\t \n\txfs_lsn_t\tsb_lsn;\t\t \n\tuuid_t\t\tsb_meta_uuid;\t \n\n\t \n} xfs_sb_t;\n\n#define XFS_SB_CRC_OFF\t\toffsetof(struct xfs_sb, sb_crc)\n\n \nstruct xfs_dsb {\n\t__be32\t\tsb_magicnum;\t \n\t__be32\t\tsb_blocksize;\t \n\t__be64\t\tsb_dblocks;\t \n\t__be64\t\tsb_rblocks;\t \n\t__be64\t\tsb_rextents;\t \n\tuuid_t\t\tsb_uuid;\t \n\t__be64\t\tsb_logstart;\t \n\t__be64\t\tsb_rootino;\t \n\t__be64\t\tsb_rbmino;\t \n\t__be64\t\tsb_rsumino;\t \n\t__be32\t\tsb_rextsize;\t \n\t__be32\t\tsb_agblocks;\t \n\t__be32\t\tsb_agcount;\t \n\t__be32\t\tsb_rbmblocks;\t \n\t__be32\t\tsb_logblocks;\t \n\t__be16\t\tsb_versionnum;\t \n\t__be16\t\tsb_sectsize;\t \n\t__be16\t\tsb_inodesize;\t \n\t__be16\t\tsb_inopblock;\t \n\tchar\t\tsb_fname[XFSLABEL_MAX];  \n\t__u8\t\tsb_blocklog;\t \n\t__u8\t\tsb_sectlog;\t \n\t__u8\t\tsb_inodelog;\t \n\t__u8\t\tsb_inopblog;\t \n\t__u8\t\tsb_agblklog;\t \n\t__u8\t\tsb_rextslog;\t \n\t__u8\t\tsb_inprogress;\t \n\t__u8\t\tsb_imax_pct;\t \n\t\t\t\t\t \n\t \n\t__be64\t\tsb_icount;\t \n\t__be64\t\tsb_ifree;\t \n\t__be64\t\tsb_fdblocks;\t \n\t__be64\t\tsb_frextents;\t \n\t \n\t__be64\t\tsb_uquotino;\t \n\t__be64\t\tsb_gquotino;\t \n\t__be16\t\tsb_qflags;\t \n\t__u8\t\tsb_flags;\t \n\t__u8\t\tsb_shared_vn;\t \n\t__be32\t\tsb_inoalignmt;\t \n\t__be32\t\tsb_unit;\t \n\t__be32\t\tsb_width;\t \n\t__u8\t\tsb_dirblklog;\t \n\t__u8\t\tsb_logsectlog;\t \n\t__be16\t\tsb_logsectsize;\t \n\t__be32\t\tsb_logsunit;\t \n\t__be32\t\tsb_features2;\t \n\t \n\t__be32\t\tsb_bad_features2;\n\n\t \n\n\t \n\t__be32\t\tsb_features_compat;\n\t__be32\t\tsb_features_ro_compat;\n\t__be32\t\tsb_features_incompat;\n\t__be32\t\tsb_features_log_incompat;\n\n\t__le32\t\tsb_crc;\t\t \n\t__be32\t\tsb_spino_align;\t \n\n\t__be64\t\tsb_pquotino;\t \n\t__be64\t\tsb_lsn;\t\t \n\tuuid_t\t\tsb_meta_uuid;\t \n\n\t \n};\n\n \n#define XFS_SBF_NOFLAGS\t\t0x00\t \n#define XFS_SBF_READONLY\t0x01\t \n\n \n#define XFS_SB_MAX_SHARED_VN\t0\n\n#define\tXFS_SB_VERSION_NUM(sbp)\t((sbp)->sb_versionnum & XFS_SB_VERSION_NUMBITS)\n\nstatic inline bool xfs_sb_is_v5(struct xfs_sb *sbp)\n{\n\treturn XFS_SB_VERSION_NUM(sbp) == XFS_SB_VERSION_5;\n}\n\n \nstatic inline bool xfs_sb_has_mismatched_features2(struct xfs_sb *sbp)\n{\n\treturn sbp->sb_bad_features2 != sbp->sb_features2;\n}\n\nstatic inline bool xfs_sb_version_hasmorebits(struct xfs_sb *sbp)\n{\n\treturn xfs_sb_is_v5(sbp) ||\n\t       (sbp->sb_versionnum & XFS_SB_VERSION_MOREBITSBIT);\n}\n\nstatic inline void xfs_sb_version_addattr(struct xfs_sb *sbp)\n{\n\tsbp->sb_versionnum |= XFS_SB_VERSION_ATTRBIT;\n}\n\nstatic inline void xfs_sb_version_addquota(struct xfs_sb *sbp)\n{\n\tsbp->sb_versionnum |= XFS_SB_VERSION_QUOTABIT;\n}\n\nstatic inline void xfs_sb_version_addattr2(struct xfs_sb *sbp)\n{\n\tsbp->sb_versionnum |= XFS_SB_VERSION_MOREBITSBIT;\n\tsbp->sb_features2 |= XFS_SB_VERSION2_ATTR2BIT;\n}\n\nstatic inline void xfs_sb_version_addprojid32(struct xfs_sb *sbp)\n{\n\tsbp->sb_versionnum |= XFS_SB_VERSION_MOREBITSBIT;\n\tsbp->sb_features2 |= XFS_SB_VERSION2_PROJID32BIT;\n}\n\n \n#define XFS_SB_FEAT_COMPAT_ALL 0\n#define XFS_SB_FEAT_COMPAT_UNKNOWN\t~XFS_SB_FEAT_COMPAT_ALL\nstatic inline bool\nxfs_sb_has_compat_feature(\n\tstruct xfs_sb\t*sbp,\n\tuint32_t\tfeature)\n{\n\treturn (sbp->sb_features_compat & feature) != 0;\n}\n\n#define XFS_SB_FEAT_RO_COMPAT_FINOBT   (1 << 0)\t\t \n#define XFS_SB_FEAT_RO_COMPAT_RMAPBT   (1 << 1)\t\t \n#define XFS_SB_FEAT_RO_COMPAT_REFLINK  (1 << 2)\t\t \n#define XFS_SB_FEAT_RO_COMPAT_INOBTCNT (1 << 3)\t\t \n#define XFS_SB_FEAT_RO_COMPAT_ALL \\\n\t\t(XFS_SB_FEAT_RO_COMPAT_FINOBT | \\\n\t\t XFS_SB_FEAT_RO_COMPAT_RMAPBT | \\\n\t\t XFS_SB_FEAT_RO_COMPAT_REFLINK| \\\n\t\t XFS_SB_FEAT_RO_COMPAT_INOBTCNT)\n#define XFS_SB_FEAT_RO_COMPAT_UNKNOWN\t~XFS_SB_FEAT_RO_COMPAT_ALL\nstatic inline bool\nxfs_sb_has_ro_compat_feature(\n\tstruct xfs_sb\t*sbp,\n\tuint32_t\tfeature)\n{\n\treturn (sbp->sb_features_ro_compat & feature) != 0;\n}\n\n#define XFS_SB_FEAT_INCOMPAT_FTYPE\t(1 << 0)\t \n#define XFS_SB_FEAT_INCOMPAT_SPINODES\t(1 << 1)\t \n#define XFS_SB_FEAT_INCOMPAT_META_UUID\t(1 << 2)\t \n#define XFS_SB_FEAT_INCOMPAT_BIGTIME\t(1 << 3)\t \n#define XFS_SB_FEAT_INCOMPAT_NEEDSREPAIR (1 << 4)\t \n#define XFS_SB_FEAT_INCOMPAT_NREXT64\t(1 << 5)\t \n#define XFS_SB_FEAT_INCOMPAT_ALL \\\n\t\t(XFS_SB_FEAT_INCOMPAT_FTYPE|\t\\\n\t\t XFS_SB_FEAT_INCOMPAT_SPINODES|\t\\\n\t\t XFS_SB_FEAT_INCOMPAT_META_UUID| \\\n\t\t XFS_SB_FEAT_INCOMPAT_BIGTIME| \\\n\t\t XFS_SB_FEAT_INCOMPAT_NEEDSREPAIR| \\\n\t\t XFS_SB_FEAT_INCOMPAT_NREXT64)\n\n#define XFS_SB_FEAT_INCOMPAT_UNKNOWN\t~XFS_SB_FEAT_INCOMPAT_ALL\nstatic inline bool\nxfs_sb_has_incompat_feature(\n\tstruct xfs_sb\t*sbp,\n\tuint32_t\tfeature)\n{\n\treturn (sbp->sb_features_incompat & feature) != 0;\n}\n\n#define XFS_SB_FEAT_INCOMPAT_LOG_XATTRS   (1 << 0)\t \n#define XFS_SB_FEAT_INCOMPAT_LOG_ALL \\\n\t(XFS_SB_FEAT_INCOMPAT_LOG_XATTRS)\n#define XFS_SB_FEAT_INCOMPAT_LOG_UNKNOWN\t~XFS_SB_FEAT_INCOMPAT_LOG_ALL\nstatic inline bool\nxfs_sb_has_incompat_log_feature(\n\tstruct xfs_sb\t*sbp,\n\tuint32_t\tfeature)\n{\n\treturn (sbp->sb_features_log_incompat & feature) != 0;\n}\n\nstatic inline void\nxfs_sb_remove_incompat_log_features(\n\tstruct xfs_sb\t*sbp)\n{\n\tsbp->sb_features_log_incompat &= ~XFS_SB_FEAT_INCOMPAT_LOG_ALL;\n}\n\nstatic inline void\nxfs_sb_add_incompat_log_features(\n\tstruct xfs_sb\t*sbp,\n\tunsigned int\tfeatures)\n{\n\tsbp->sb_features_log_incompat |= features;\n}\n\nstatic inline bool xfs_sb_version_haslogxattrs(struct xfs_sb *sbp)\n{\n\treturn xfs_sb_is_v5(sbp) && (sbp->sb_features_log_incompat &\n\t\t XFS_SB_FEAT_INCOMPAT_LOG_XATTRS);\n}\n\nstatic inline bool\nxfs_is_quota_inode(struct xfs_sb *sbp, xfs_ino_t ino)\n{\n\treturn (ino == sbp->sb_uquotino ||\n\t\tino == sbp->sb_gquotino ||\n\t\tino == sbp->sb_pquotino);\n}\n\n#define XFS_SB_DADDR\t\t((xfs_daddr_t)0)  \n#define\tXFS_SB_BLOCK(mp)\tXFS_HDR_BLOCK(mp, XFS_SB_DADDR)\n\n#define\tXFS_HDR_BLOCK(mp,d)\t((xfs_agblock_t)XFS_BB_TO_FSBT(mp,d))\n#define\tXFS_DADDR_TO_FSB(mp,d)\tXFS_AGB_TO_FSB(mp, \\\n\t\t\txfs_daddr_to_agno(mp,d), xfs_daddr_to_agbno(mp,d))\n#define\tXFS_FSB_TO_DADDR(mp,fsbno)\tXFS_AGB_TO_DADDR(mp, \\\n\t\t\tXFS_FSB_TO_AGNO(mp,fsbno), XFS_FSB_TO_AGBNO(mp,fsbno))\n\n \n#define XFS_FSS_TO_BB(mp,sec)\t((sec) << (mp)->m_sectbb_log)\n\n \n#define\tXFS_FSB_TO_BB(mp,fsbno)\t((fsbno) << (mp)->m_blkbb_log)\n#define\tXFS_BB_TO_FSB(mp,bb)\t\\\n\t(((bb) + (XFS_FSB_TO_BB(mp,1) - 1)) >> (mp)->m_blkbb_log)\n#define\tXFS_BB_TO_FSBT(mp,bb)\t((bb) >> (mp)->m_blkbb_log)\n\n \n#define XFS_FSB_TO_B(mp,fsbno)\t((xfs_fsize_t)(fsbno) << (mp)->m_sb.sb_blocklog)\n#define XFS_B_TO_FSB(mp,b)\t\\\n\t((((uint64_t)(b)) + (mp)->m_blockmask) >> (mp)->m_sb.sb_blocklog)\n#define XFS_B_TO_FSBT(mp,b)\t(((uint64_t)(b)) >> (mp)->m_sb.sb_blocklog)\n\n \n#define\tXFS_AGF_MAGIC\t0x58414746\t \n#define\tXFS_AGI_MAGIC\t0x58414749\t \n#define\tXFS_AGFL_MAGIC\t0x5841464c\t \n#define\tXFS_AGF_VERSION\t1\n#define\tXFS_AGI_VERSION\t1\n\n#define\tXFS_AGF_GOOD_VERSION(v)\t((v) == XFS_AGF_VERSION)\n#define\tXFS_AGI_GOOD_VERSION(v)\t((v) == XFS_AGI_VERSION)\n\n \n#define\tXFS_BTNUM_AGF\t((int)XFS_BTNUM_RMAPi + 1)\n\n \n\ntypedef struct xfs_agf {\n\t \n\t__be32\t\tagf_magicnum;\t \n\t__be32\t\tagf_versionnum;\t \n\t__be32\t\tagf_seqno;\t \n\t__be32\t\tagf_length;\t \n\t \n\t__be32\t\tagf_roots[XFS_BTNUM_AGF];\t \n\t__be32\t\tagf_levels[XFS_BTNUM_AGF];\t \n\n\t__be32\t\tagf_flfirst;\t \n\t__be32\t\tagf_fllast;\t \n\t__be32\t\tagf_flcount;\t \n\t__be32\t\tagf_freeblks;\t \n\n\t__be32\t\tagf_longest;\t \n\t__be32\t\tagf_btreeblks;\t \n\tuuid_t\t\tagf_uuid;\t \n\n\t__be32\t\tagf_rmap_blocks;\t \n\t__be32\t\tagf_refcount_blocks;\t \n\n\t__be32\t\tagf_refcount_root;\t \n\t__be32\t\tagf_refcount_level;\t \n\n\t \n\t__be64\t\tagf_spare64[14];\n\n\t \n\t__be64\t\tagf_lsn;\t \n\t__be32\t\tagf_crc;\t \n\t__be32\t\tagf_spare2;\n\n\t \n} xfs_agf_t;\n\n#define XFS_AGF_CRC_OFF\t\toffsetof(struct xfs_agf, agf_crc)\n\n#define\tXFS_AGF_MAGICNUM\t(1u << 0)\n#define\tXFS_AGF_VERSIONNUM\t(1u << 1)\n#define\tXFS_AGF_SEQNO\t\t(1u << 2)\n#define\tXFS_AGF_LENGTH\t\t(1u << 3)\n#define\tXFS_AGF_ROOTS\t\t(1u << 4)\n#define\tXFS_AGF_LEVELS\t\t(1u << 5)\n#define\tXFS_AGF_FLFIRST\t\t(1u << 6)\n#define\tXFS_AGF_FLLAST\t\t(1u << 7)\n#define\tXFS_AGF_FLCOUNT\t\t(1u << 8)\n#define\tXFS_AGF_FREEBLKS\t(1u << 9)\n#define\tXFS_AGF_LONGEST\t\t(1u << 10)\n#define\tXFS_AGF_BTREEBLKS\t(1u << 11)\n#define\tXFS_AGF_UUID\t\t(1u << 12)\n#define\tXFS_AGF_RMAP_BLOCKS\t(1u << 13)\n#define\tXFS_AGF_REFCOUNT_BLOCKS\t(1u << 14)\n#define\tXFS_AGF_REFCOUNT_ROOT\t(1u << 15)\n#define\tXFS_AGF_REFCOUNT_LEVEL\t(1u << 16)\n#define\tXFS_AGF_SPARE64\t\t(1u << 17)\n#define\tXFS_AGF_NUM_BITS\t18\n#define\tXFS_AGF_ALL_BITS\t((1u << XFS_AGF_NUM_BITS) - 1)\n\n#define XFS_AGF_FLAGS \\\n\t{ XFS_AGF_MAGICNUM,\t\"MAGICNUM\" }, \\\n\t{ XFS_AGF_VERSIONNUM,\t\"VERSIONNUM\" }, \\\n\t{ XFS_AGF_SEQNO,\t\"SEQNO\" }, \\\n\t{ XFS_AGF_LENGTH,\t\"LENGTH\" }, \\\n\t{ XFS_AGF_ROOTS,\t\"ROOTS\" }, \\\n\t{ XFS_AGF_LEVELS,\t\"LEVELS\" }, \\\n\t{ XFS_AGF_FLFIRST,\t\"FLFIRST\" }, \\\n\t{ XFS_AGF_FLLAST,\t\"FLLAST\" }, \\\n\t{ XFS_AGF_FLCOUNT,\t\"FLCOUNT\" }, \\\n\t{ XFS_AGF_FREEBLKS,\t\"FREEBLKS\" }, \\\n\t{ XFS_AGF_LONGEST,\t\"LONGEST\" }, \\\n\t{ XFS_AGF_BTREEBLKS,\t\"BTREEBLKS\" }, \\\n\t{ XFS_AGF_UUID,\t\t\"UUID\" }, \\\n\t{ XFS_AGF_RMAP_BLOCKS,\t\"RMAP_BLOCKS\" }, \\\n\t{ XFS_AGF_REFCOUNT_BLOCKS,\t\"REFCOUNT_BLOCKS\" }, \\\n\t{ XFS_AGF_REFCOUNT_ROOT,\t\"REFCOUNT_ROOT\" }, \\\n\t{ XFS_AGF_REFCOUNT_LEVEL,\t\"REFCOUNT_LEVEL\" }, \\\n\t{ XFS_AGF_SPARE64,\t\"SPARE64\" }\n\n \n#define XFS_AGF_DADDR(mp)\t((xfs_daddr_t)(1 << (mp)->m_sectbb_log))\n#define\tXFS_AGF_BLOCK(mp)\tXFS_HDR_BLOCK(mp, XFS_AGF_DADDR(mp))\n\n \n#define\tXFS_AGI_UNLINKED_BUCKETS\t64\n\ntypedef struct xfs_agi {\n\t \n\t__be32\t\tagi_magicnum;\t \n\t__be32\t\tagi_versionnum;\t \n\t__be32\t\tagi_seqno;\t \n\t__be32\t\tagi_length;\t \n\t \n\t__be32\t\tagi_count;\t \n\t__be32\t\tagi_root;\t \n\t__be32\t\tagi_level;\t \n\t__be32\t\tagi_freecount;\t \n\n\t__be32\t\tagi_newino;\t \n\t__be32\t\tagi_dirino;\t \n\t \n\t__be32\t\tagi_unlinked[XFS_AGI_UNLINKED_BUCKETS];\n\t \n\tuuid_t\t\tagi_uuid;\t \n\t__be32\t\tagi_crc;\t \n\t__be32\t\tagi_pad32;\n\t__be64\t\tagi_lsn;\t \n\n\t__be32\t\tagi_free_root;  \n\t__be32\t\tagi_free_level; \n\n\t__be32\t\tagi_iblocks;\t \n\t__be32\t\tagi_fblocks;\t \n\n\t \n} xfs_agi_t;\n\n#define XFS_AGI_CRC_OFF\t\toffsetof(struct xfs_agi, agi_crc)\n\n#define\tXFS_AGI_MAGICNUM\t(1u << 0)\n#define\tXFS_AGI_VERSIONNUM\t(1u << 1)\n#define\tXFS_AGI_SEQNO\t\t(1u << 2)\n#define\tXFS_AGI_LENGTH\t\t(1u << 3)\n#define\tXFS_AGI_COUNT\t\t(1u << 4)\n#define\tXFS_AGI_ROOT\t\t(1u << 5)\n#define\tXFS_AGI_LEVEL\t\t(1u << 6)\n#define\tXFS_AGI_FREECOUNT\t(1u << 7)\n#define\tXFS_AGI_NEWINO\t\t(1u << 8)\n#define\tXFS_AGI_DIRINO\t\t(1u << 9)\n#define\tXFS_AGI_UNLINKED\t(1u << 10)\n#define\tXFS_AGI_NUM_BITS_R1\t11\t \n#define\tXFS_AGI_ALL_BITS_R1\t((1u << XFS_AGI_NUM_BITS_R1) - 1)\n#define\tXFS_AGI_FREE_ROOT\t(1u << 11)\n#define\tXFS_AGI_FREE_LEVEL\t(1u << 12)\n#define\tXFS_AGI_IBLOCKS\t\t(1u << 13)  \n#define\tXFS_AGI_NUM_BITS_R2\t14\n\n \n#define XFS_AGI_DADDR(mp)\t((xfs_daddr_t)(2 << (mp)->m_sectbb_log))\n#define\tXFS_AGI_BLOCK(mp)\tXFS_HDR_BLOCK(mp, XFS_AGI_DADDR(mp))\n\n \n#define XFS_AGFL_DADDR(mp)\t((xfs_daddr_t)(3 << (mp)->m_sectbb_log))\n#define\tXFS_AGFL_BLOCK(mp)\tXFS_HDR_BLOCK(mp, XFS_AGFL_DADDR(mp))\n#define\tXFS_BUF_TO_AGFL(bp)\t((struct xfs_agfl *)((bp)->b_addr))\n\nstruct xfs_agfl {\n\t__be32\t\tagfl_magicnum;\n\t__be32\t\tagfl_seqno;\n\tuuid_t\t\tagfl_uuid;\n\t__be64\t\tagfl_lsn;\n\t__be32\t\tagfl_crc;\n} __attribute__((packed));\n\n#define XFS_AGFL_CRC_OFF\toffsetof(struct xfs_agfl, agfl_crc)\n\n#define XFS_AGB_TO_FSB(mp,agno,agbno)\t\\\n\t(((xfs_fsblock_t)(agno) << (mp)->m_sb.sb_agblklog) | (agbno))\n#define\tXFS_FSB_TO_AGNO(mp,fsbno)\t\\\n\t((xfs_agnumber_t)((fsbno) >> (mp)->m_sb.sb_agblklog))\n#define\tXFS_FSB_TO_AGBNO(mp,fsbno)\t\\\n\t((xfs_agblock_t)((fsbno) & xfs_mask32lo((mp)->m_sb.sb_agblklog)))\n#define\tXFS_AGB_TO_DADDR(mp,agno,agbno)\t\\\n\t((xfs_daddr_t)XFS_FSB_TO_BB(mp, \\\n\t\t(xfs_fsblock_t)(agno) * (mp)->m_sb.sb_agblocks + (agbno)))\n#define\tXFS_AG_DADDR(mp,agno,d)\t\t(XFS_AGB_TO_DADDR(mp, agno, 0) + (d))\n\n \n#define\tXFS_AG_CHECK_DADDR(mp,d,len)\t\\\n\t((len) == 1 ? \\\n\t    ASSERT((d) == XFS_SB_DADDR || \\\n\t\t   xfs_daddr_to_agbno(mp, d) != XFS_SB_DADDR) : \\\n\t    ASSERT(xfs_daddr_to_agno(mp, d) == \\\n\t\t   xfs_daddr_to_agno(mp, (d) + (len) - 1)))\n\n \ntypedef __be64 xfs_timestamp_t;\n\n \nstruct xfs_legacy_timestamp {\n\t__be32\t\tt_sec;\t\t \n\t__be32\t\tt_nsec;\t\t \n};\n\n \n#define XFS_LEGACY_TIME_MIN\t((int64_t)S32_MIN)\n\n \n#define XFS_LEGACY_TIME_MAX\t((int64_t)S32_MAX)\n\n \n#define XFS_BIGTIME_TIME_MIN\t((int64_t)0)\n\n \n#define XFS_BIGTIME_TIME_MAX\t((int64_t)((-1ULL / NSEC_PER_SEC) & ~0x3ULL))\n\n \n#define XFS_BIGTIME_EPOCH_OFFSET\t(-(int64_t)S32_MIN)\n\n \nstatic inline uint64_t xfs_unix_to_bigtime(time64_t unix_seconds)\n{\n\treturn (uint64_t)unix_seconds + XFS_BIGTIME_EPOCH_OFFSET;\n}\n\n \nstatic inline time64_t xfs_bigtime_to_unix(uint64_t ondisk_seconds)\n{\n\treturn (time64_t)ondisk_seconds - XFS_BIGTIME_EPOCH_OFFSET;\n}\n\n \n#define\tXFS_DINODE_MAGIC\t\t0x494e\t \nstruct xfs_dinode {\n\t__be16\t\tdi_magic;\t \n\t__be16\t\tdi_mode;\t \n\t__u8\t\tdi_version;\t \n\t__u8\t\tdi_format;\t \n\t__be16\t\tdi_onlink;\t \n\t__be32\t\tdi_uid;\t\t \n\t__be32\t\tdi_gid;\t\t \n\t__be32\t\tdi_nlink;\t \n\t__be16\t\tdi_projid_lo;\t \n\t__be16\t\tdi_projid_hi;\t \n\tunion {\n\t\t \n\t\t__be64\tdi_big_nextents;\n\n\t\t \n\t\t__be64\tdi_v3_pad;\n\n\t\t \n\t\tstruct {\n\t\t\t__u8\tdi_v2_pad[6];\n\t\t\t__be16\tdi_flushiter;\n\t\t};\n\t};\n\txfs_timestamp_t\tdi_atime;\t \n\txfs_timestamp_t\tdi_mtime;\t \n\txfs_timestamp_t\tdi_ctime;\t \n\t__be64\t\tdi_size;\t \n\t__be64\t\tdi_nblocks;\t \n\t__be32\t\tdi_extsize;\t \n\tunion {\n\t\t \n\t\tstruct {\n\t\t\t__be32\tdi_nextents;\n\t\t\t__be16\tdi_anextents;\n\t\t} __packed;\n\n\t\t \n\t\tstruct {\n\t\t\t__be32\tdi_big_anextents;\n\t\t\t__be16\tdi_nrext64_pad;\n\t\t} __packed;\n\t} __packed;\n\t__u8\t\tdi_forkoff;\t \n\t__s8\t\tdi_aformat;\t \n\t__be32\t\tdi_dmevmask;\t \n\t__be16\t\tdi_dmstate;\t \n\t__be16\t\tdi_flags;\t \n\t__be32\t\tdi_gen;\t\t \n\n\t \n\t__be32\t\tdi_next_unlinked; \n\n\t \n\t__le32\t\tdi_crc;\t\t \n\t__be64\t\tdi_changecount;\t \n\t__be64\t\tdi_lsn;\t\t \n\t__be64\t\tdi_flags2;\t \n\t__be32\t\tdi_cowextsize;\t \n\t__u8\t\tdi_pad2[12];\t \n\n\t \n\txfs_timestamp_t\tdi_crtime;\t \n\t__be64\t\tdi_ino;\t\t \n\tuuid_t\t\tdi_uuid;\t \n\n\t \n};\n\n#define XFS_DINODE_CRC_OFF\toffsetof(struct xfs_dinode, di_crc)\n\n#define DI_MAX_FLUSH 0xffff\n\n \nstatic inline uint xfs_dinode_size(int version)\n{\n\tif (version == 3)\n\t\treturn sizeof(struct xfs_dinode);\n\treturn offsetof(struct xfs_dinode, di_crc);\n}\n\n \n#define\tXFS_MAXLINK\t\t((1U << 31) - 1U)\n\n \nenum xfs_dinode_fmt {\n\tXFS_DINODE_FMT_DEV,\t\t \n\tXFS_DINODE_FMT_LOCAL,\t\t \n\tXFS_DINODE_FMT_EXTENTS,\t\t \n\tXFS_DINODE_FMT_BTREE,\t\t \n\tXFS_DINODE_FMT_UUID\t\t \n};\n\n#define XFS_INODE_FORMAT_STR \\\n\t{ XFS_DINODE_FMT_DEV,\t\t\"dev\" }, \\\n\t{ XFS_DINODE_FMT_LOCAL,\t\t\"local\" }, \\\n\t{ XFS_DINODE_FMT_EXTENTS,\t\"extent\" }, \\\n\t{ XFS_DINODE_FMT_BTREE,\t\t\"btree\" }, \\\n\t{ XFS_DINODE_FMT_UUID,\t\t\"uuid\" }\n\n \n#define XFS_MAX_EXTCNT_DATA_FORK_LARGE\t((xfs_extnum_t)((1ULL << 48) - 1))\n#define XFS_MAX_EXTCNT_ATTR_FORK_LARGE\t((xfs_extnum_t)((1ULL << 32) - 1))\n#define XFS_MAX_EXTCNT_DATA_FORK_SMALL\t((xfs_extnum_t)((1ULL << 31) - 1))\n#define XFS_MAX_EXTCNT_ATTR_FORK_SMALL\t((xfs_extnum_t)((1ULL << 15) - 1))\n\n \n#define XFS_MAX_EXTCNT_UPGRADE_NR\t\\\n\tmin(XFS_MAX_EXTCNT_ATTR_FORK_LARGE - XFS_MAX_EXTCNT_ATTR_FORK_SMALL,\t\\\n\t    XFS_MAX_EXTCNT_DATA_FORK_LARGE - XFS_MAX_EXTCNT_DATA_FORK_SMALL)\n\n \n#define\tXFS_DINODE_MIN_LOG\t8\n#define\tXFS_DINODE_MAX_LOG\t11\n#define\tXFS_DINODE_MIN_SIZE\t(1 << XFS_DINODE_MIN_LOG)\n#define\tXFS_DINODE_MAX_SIZE\t(1 << XFS_DINODE_MAX_LOG)\n\n \n#define XFS_DINODE_SIZE(mp) \\\n\t(xfs_has_v3inodes(mp) ? \\\n\t\tsizeof(struct xfs_dinode) : \\\n\t\toffsetof(struct xfs_dinode, di_crc))\n#define XFS_LITINO(mp) \\\n\t((mp)->m_sb.sb_inodesize - XFS_DINODE_SIZE(mp))\n\n \n#define XFS_DFORK_BOFF(dip)\t\t((int)((dip)->di_forkoff << 3))\n\n#define XFS_DFORK_DSIZE(dip,mp) \\\n\t((dip)->di_forkoff ? XFS_DFORK_BOFF(dip) : XFS_LITINO(mp))\n#define XFS_DFORK_ASIZE(dip,mp) \\\n\t((dip)->di_forkoff ? XFS_LITINO(mp) - XFS_DFORK_BOFF(dip) : 0)\n#define XFS_DFORK_SIZE(dip,mp,w) \\\n\t((w) == XFS_DATA_FORK ? \\\n\t\tXFS_DFORK_DSIZE(dip, mp) : \\\n\t\tXFS_DFORK_ASIZE(dip, mp))\n\n#define XFS_DFORK_MAXEXT(dip, mp, w) \\\n\t(XFS_DFORK_SIZE(dip, mp, w) / sizeof(struct xfs_bmbt_rec))\n\n \n#define XFS_DFORK_DPTR(dip) \\\n\t((char *)dip + xfs_dinode_size(dip->di_version))\n#define XFS_DFORK_APTR(dip)\t\\\n\t(XFS_DFORK_DPTR(dip) + XFS_DFORK_BOFF(dip))\n#define XFS_DFORK_PTR(dip,w)\t\\\n\t((w) == XFS_DATA_FORK ? XFS_DFORK_DPTR(dip) : XFS_DFORK_APTR(dip))\n\n#define XFS_DFORK_FORMAT(dip,w) \\\n\t((w) == XFS_DATA_FORK ? \\\n\t\t(dip)->di_format : \\\n\t\t(dip)->di_aformat)\n\n \nstatic inline xfs_dev_t xfs_dinode_get_rdev(struct xfs_dinode *dip)\n{\n\treturn be32_to_cpu(*(__be32 *)XFS_DFORK_DPTR(dip));\n}\n\nstatic inline void xfs_dinode_put_rdev(struct xfs_dinode *dip, xfs_dev_t rdev)\n{\n\t*(__be32 *)XFS_DFORK_DPTR(dip) = cpu_to_be32(rdev);\n}\n\n \n#define XFS_DIFLAG_REALTIME_BIT  0\t \n#define XFS_DIFLAG_PREALLOC_BIT  1\t \n#define XFS_DIFLAG_NEWRTBM_BIT   2\t \n#define XFS_DIFLAG_IMMUTABLE_BIT 3\t \n#define XFS_DIFLAG_APPEND_BIT    4\t \n#define XFS_DIFLAG_SYNC_BIT      5\t \n#define XFS_DIFLAG_NOATIME_BIT   6\t \n#define XFS_DIFLAG_NODUMP_BIT    7\t \n#define XFS_DIFLAG_RTINHERIT_BIT 8\t \n#define XFS_DIFLAG_PROJINHERIT_BIT   9\t \n#define XFS_DIFLAG_NOSYMLINKS_BIT   10\t \n#define XFS_DIFLAG_EXTSIZE_BIT      11\t \n#define XFS_DIFLAG_EXTSZINHERIT_BIT 12\t \n#define XFS_DIFLAG_NODEFRAG_BIT     13\t \n#define XFS_DIFLAG_FILESTREAM_BIT   14   \n \n\n#define XFS_DIFLAG_REALTIME      (1 << XFS_DIFLAG_REALTIME_BIT)\n#define XFS_DIFLAG_PREALLOC      (1 << XFS_DIFLAG_PREALLOC_BIT)\n#define XFS_DIFLAG_NEWRTBM       (1 << XFS_DIFLAG_NEWRTBM_BIT)\n#define XFS_DIFLAG_IMMUTABLE     (1 << XFS_DIFLAG_IMMUTABLE_BIT)\n#define XFS_DIFLAG_APPEND        (1 << XFS_DIFLAG_APPEND_BIT)\n#define XFS_DIFLAG_SYNC          (1 << XFS_DIFLAG_SYNC_BIT)\n#define XFS_DIFLAG_NOATIME       (1 << XFS_DIFLAG_NOATIME_BIT)\n#define XFS_DIFLAG_NODUMP        (1 << XFS_DIFLAG_NODUMP_BIT)\n#define XFS_DIFLAG_RTINHERIT     (1 << XFS_DIFLAG_RTINHERIT_BIT)\n#define XFS_DIFLAG_PROJINHERIT   (1 << XFS_DIFLAG_PROJINHERIT_BIT)\n#define XFS_DIFLAG_NOSYMLINKS    (1 << XFS_DIFLAG_NOSYMLINKS_BIT)\n#define XFS_DIFLAG_EXTSIZE       (1 << XFS_DIFLAG_EXTSIZE_BIT)\n#define XFS_DIFLAG_EXTSZINHERIT  (1 << XFS_DIFLAG_EXTSZINHERIT_BIT)\n#define XFS_DIFLAG_NODEFRAG      (1 << XFS_DIFLAG_NODEFRAG_BIT)\n#define XFS_DIFLAG_FILESTREAM    (1 << XFS_DIFLAG_FILESTREAM_BIT)\n\n#define XFS_DIFLAG_ANY \\\n\t(XFS_DIFLAG_REALTIME | XFS_DIFLAG_PREALLOC | XFS_DIFLAG_NEWRTBM | \\\n\t XFS_DIFLAG_IMMUTABLE | XFS_DIFLAG_APPEND | XFS_DIFLAG_SYNC | \\\n\t XFS_DIFLAG_NOATIME | XFS_DIFLAG_NODUMP | XFS_DIFLAG_RTINHERIT | \\\n\t XFS_DIFLAG_PROJINHERIT | XFS_DIFLAG_NOSYMLINKS | XFS_DIFLAG_EXTSIZE | \\\n\t XFS_DIFLAG_EXTSZINHERIT | XFS_DIFLAG_NODEFRAG | XFS_DIFLAG_FILESTREAM)\n\n \n#define XFS_DIFLAG2_DAX_BIT\t0\t \n#define XFS_DIFLAG2_REFLINK_BIT\t1\t \n#define XFS_DIFLAG2_COWEXTSIZE_BIT   2   \n#define XFS_DIFLAG2_BIGTIME_BIT\t3\t \n#define XFS_DIFLAG2_NREXT64_BIT 4\t \n\n#define XFS_DIFLAG2_DAX\t\t(1 << XFS_DIFLAG2_DAX_BIT)\n#define XFS_DIFLAG2_REFLINK     (1 << XFS_DIFLAG2_REFLINK_BIT)\n#define XFS_DIFLAG2_COWEXTSIZE  (1 << XFS_DIFLAG2_COWEXTSIZE_BIT)\n#define XFS_DIFLAG2_BIGTIME\t(1 << XFS_DIFLAG2_BIGTIME_BIT)\n#define XFS_DIFLAG2_NREXT64\t(1 << XFS_DIFLAG2_NREXT64_BIT)\n\n#define XFS_DIFLAG2_ANY \\\n\t(XFS_DIFLAG2_DAX | XFS_DIFLAG2_REFLINK | XFS_DIFLAG2_COWEXTSIZE | \\\n\t XFS_DIFLAG2_BIGTIME | XFS_DIFLAG2_NREXT64)\n\nstatic inline bool xfs_dinode_has_bigtime(const struct xfs_dinode *dip)\n{\n\treturn dip->di_version >= 3 &&\n\t       (dip->di_flags2 & cpu_to_be64(XFS_DIFLAG2_BIGTIME));\n}\n\nstatic inline bool xfs_dinode_has_large_extent_counts(\n\tconst struct xfs_dinode *dip)\n{\n\treturn dip->di_version >= 3 &&\n\t       (dip->di_flags2 & cpu_to_be64(XFS_DIFLAG2_NREXT64));\n}\n\n \n#define\tXFS_INO_MASK(k)\t\t\t(uint32_t)((1ULL << (k)) - 1)\n#define\tXFS_INO_OFFSET_BITS(mp)\t\t(mp)->m_sb.sb_inopblog\n#define\tXFS_INO_AGBNO_BITS(mp)\t\t(mp)->m_sb.sb_agblklog\n#define\tXFS_INO_AGINO_BITS(mp)\t\t((mp)->m_ino_geo.agino_log)\n#define\tXFS_INO_AGNO_BITS(mp)\t\t(mp)->m_agno_log\n#define\tXFS_INO_BITS(mp)\t\t\\\n\tXFS_INO_AGNO_BITS(mp) + XFS_INO_AGINO_BITS(mp)\n#define\tXFS_INO_TO_AGNO(mp,i)\t\t\\\n\t((xfs_agnumber_t)((i) >> XFS_INO_AGINO_BITS(mp)))\n#define\tXFS_INO_TO_AGINO(mp,i)\t\t\\\n\t((xfs_agino_t)(i) & XFS_INO_MASK(XFS_INO_AGINO_BITS(mp)))\n#define\tXFS_INO_TO_AGBNO(mp,i)\t\t\\\n\t(((xfs_agblock_t)(i) >> XFS_INO_OFFSET_BITS(mp)) & \\\n\t\tXFS_INO_MASK(XFS_INO_AGBNO_BITS(mp)))\n#define\tXFS_INO_TO_OFFSET(mp,i)\t\t\\\n\t((int)(i) & XFS_INO_MASK(XFS_INO_OFFSET_BITS(mp)))\n#define\tXFS_INO_TO_FSB(mp,i)\t\t\\\n\tXFS_AGB_TO_FSB(mp, XFS_INO_TO_AGNO(mp,i), XFS_INO_TO_AGBNO(mp,i))\n#define\tXFS_AGINO_TO_INO(mp,a,i)\t\\\n\t(((xfs_ino_t)(a) << XFS_INO_AGINO_BITS(mp)) | (i))\n#define\tXFS_AGINO_TO_AGBNO(mp,i)\t((i) >> XFS_INO_OFFSET_BITS(mp))\n#define\tXFS_AGINO_TO_OFFSET(mp,i)\t\\\n\t((i) & XFS_INO_MASK(XFS_INO_OFFSET_BITS(mp)))\n#define\tXFS_OFFBNO_TO_AGINO(mp,b,o)\t\\\n\t((xfs_agino_t)(((b) << XFS_INO_OFFSET_BITS(mp)) | (o)))\n#define\tXFS_FSB_TO_INO(mp, b)\t((xfs_ino_t)((b) << XFS_INO_OFFSET_BITS(mp)))\n#define\tXFS_AGB_TO_AGINO(mp, b)\t((xfs_agino_t)((b) << XFS_INO_OFFSET_BITS(mp)))\n\n#define\tXFS_MAXINUMBER\t\t((xfs_ino_t)((1ULL << 56) - 1ULL))\n#define\tXFS_MAXINUMBER_32\t((xfs_ino_t)((1ULL << 32) - 1ULL))\n\n \n\n \n#define\tXFS_MAX_RTEXTSIZE\t(1024 * 1024 * 1024)\t \n#define\tXFS_DFL_RTEXTSIZE\t(64 * 1024)\t         \n#define\tXFS_MIN_RTEXTSIZE\t(4 * 1024)\t\t \n\n#define\tXFS_BLOCKSIZE(mp)\t((mp)->m_sb.sb_blocksize)\n#define\tXFS_BLOCKMASK(mp)\t((mp)->m_blockmask)\n#define\tXFS_BLOCKWSIZE(mp)\t((mp)->m_blockwsize)\n#define\tXFS_BLOCKWMASK(mp)\t((mp)->m_blockwmask)\n\n \n#define\tXFS_SUMOFFS(mp,ls,bb)\t((int)((ls) * (mp)->m_sb.sb_rbmblocks + (bb)))\n#define\tXFS_SUMOFFSTOBLOCK(mp,s)\t\\\n\t(((s) * (uint)sizeof(xfs_suminfo_t)) >> (mp)->m_sb.sb_blocklog)\n#define\tXFS_SUMPTR(mp,bp,so)\t\\\n\t((xfs_suminfo_t *)((bp)->b_addr + \\\n\t\t(((so) * (uint)sizeof(xfs_suminfo_t)) & XFS_BLOCKMASK(mp))))\n\n#define\tXFS_BITTOBLOCK(mp,bi)\t((bi) >> (mp)->m_blkbit_log)\n#define\tXFS_BLOCKTOBIT(mp,bb)\t((bb) << (mp)->m_blkbit_log)\n#define\tXFS_BITTOWORD(mp,bi)\t\\\n\t((int)(((bi) >> XFS_NBWORDLOG) & XFS_BLOCKWMASK(mp)))\n\n#define\tXFS_RTMIN(a,b)\t((a) < (b) ? (a) : (b))\n#define\tXFS_RTMAX(a,b)\t((a) > (b) ? (a) : (b))\n\n#define\tXFS_RTLOBIT(w)\txfs_lowbit32(w)\n#define\tXFS_RTHIBIT(w)\txfs_highbit32(w)\n\n#define\tXFS_RTBLOCKLOG(b)\txfs_highbit64(b)\n\n \n#define XFS_DQUOT_MAGIC\t\t0x4451\t\t \n#define XFS_DQUOT_VERSION\t(uint8_t)0x01\t \n\n#define XFS_DQTYPE_USER\t\t(1u << 0)\t \n#define XFS_DQTYPE_PROJ\t\t(1u << 1)\t \n#define XFS_DQTYPE_GROUP\t(1u << 2)\t \n#define XFS_DQTYPE_BIGTIME\t(1u << 7)\t \n\n \n#define XFS_DQTYPE_REC_MASK\t(XFS_DQTYPE_USER | \\\n\t\t\t\t XFS_DQTYPE_PROJ | \\\n\t\t\t\t XFS_DQTYPE_GROUP)\n\n#define XFS_DQTYPE_ANY\t\t(XFS_DQTYPE_REC_MASK | \\\n\t\t\t\t XFS_DQTYPE_BIGTIME)\n\n \n\n \n#define XFS_DQ_LEGACY_EXPIRY_MIN\t((int64_t)1)\n\n \n#define XFS_DQ_LEGACY_EXPIRY_MAX\t((int64_t)U32_MAX)\n\n \n#define XFS_DQ_BIGTIME_EXPIRY_MIN\t(XFS_DQ_LEGACY_EXPIRY_MIN)\n\n \n#define XFS_DQ_BIGTIME_EXPIRY_MAX\t((int64_t)4074815106U)\n\n \n#define XFS_DQ_BIGTIME_SHIFT\t(2)\n#define XFS_DQ_BIGTIME_SLACK\t((int64_t)(1ULL << XFS_DQ_BIGTIME_SHIFT) - 1)\n\n \nstatic inline uint32_t xfs_dq_unix_to_bigtime(time64_t unix_seconds)\n{\n\t \n\treturn ((uint64_t)unix_seconds + XFS_DQ_BIGTIME_SLACK) >>\n\t\t\tXFS_DQ_BIGTIME_SHIFT;\n}\n\n \nstatic inline time64_t xfs_dq_bigtime_to_unix(uint32_t ondisk_seconds)\n{\n\treturn (time64_t)ondisk_seconds << XFS_DQ_BIGTIME_SHIFT;\n}\n\n \n#define XFS_DQ_GRACE_MIN\t\t((int64_t)0)\n#define XFS_DQ_GRACE_MAX\t\t((int64_t)U32_MAX)\n\n \nstruct xfs_disk_dquot {\n\t__be16\t\td_magic;\t \n\t__u8\t\td_version;\t \n\t__u8\t\td_type;\t\t \n\t__be32\t\td_id;\t\t \n\t__be64\t\td_blk_hardlimit; \n\t__be64\t\td_blk_softlimit; \n\t__be64\t\td_ino_hardlimit; \n\t__be64\t\td_ino_softlimit; \n\t__be64\t\td_bcount;\t \n\t__be64\t\td_icount;\t \n\t__be32\t\td_itimer;\t \n\t__be32\t\td_btimer;\t \n\t__be16\t\td_iwarns;\t \n\t__be16\t\td_bwarns;\t \n\t__be32\t\td_pad0;\t\t \n\t__be64\t\td_rtb_hardlimit; \n\t__be64\t\td_rtb_softlimit; \n\t__be64\t\td_rtbcount;\t \n\t__be32\t\td_rtbtimer;\t \n\t__be16\t\td_rtbwarns;\t \n\t__be16\t\td_pad;\n};\n\n \nstruct xfs_dqblk {\n\tstruct xfs_disk_dquot\tdd_diskdq;  \n\tchar\t\t\tdd_fill[4]; \n\n\t \n\t__be32\t\t  dd_crc;\t \n\t__be64\t\t  dd_lsn;\t \n\tuuid_t\t\t  dd_uuid;\t \n};\n\n#define XFS_DQUOT_CRC_OFF\toffsetof(struct xfs_dqblk, dd_crc)\n\n \n#define XFS_DQUOT_CLUSTER_SIZE_FSB\t(xfs_filblks_t)1\n\n \n#define XFS_SYMLINK_MAGIC\t0x58534c4d\t \n\nstruct xfs_dsymlink_hdr {\n\t__be32\tsl_magic;\n\t__be32\tsl_offset;\n\t__be32\tsl_bytes;\n\t__be32\tsl_crc;\n\tuuid_t\tsl_uuid;\n\t__be64\tsl_owner;\n\t__be64\tsl_blkno;\n\t__be64\tsl_lsn;\n};\n\n#define XFS_SYMLINK_CRC_OFF\toffsetof(struct xfs_dsymlink_hdr, sl_crc)\n\n#define XFS_SYMLINK_MAXLEN\t1024\n \n#define XFS_SYMLINK_MAPS 3\n\n#define XFS_SYMLINK_BUF_SPACE(mp, bufsize)\t\\\n\t((bufsize) - (xfs_has_crc((mp)) ? \\\n\t\t\tsizeof(struct xfs_dsymlink_hdr) : 0))\n\n\n \n#define\tXFS_ABTB_MAGIC\t\t0x41425442\t \n#define\tXFS_ABTB_CRC_MAGIC\t0x41423342\t \n#define\tXFS_ABTC_MAGIC\t\t0x41425443\t \n#define\tXFS_ABTC_CRC_MAGIC\t0x41423343\t \n\n \ntypedef struct xfs_alloc_rec {\n\t__be32\t\tar_startblock;\t \n\t__be32\t\tar_blockcount;\t \n} xfs_alloc_rec_t, xfs_alloc_key_t;\n\ntypedef struct xfs_alloc_rec_incore {\n\txfs_agblock_t\tar_startblock;\t \n\txfs_extlen_t\tar_blockcount;\t \n} xfs_alloc_rec_incore_t;\n\n \ntypedef __be32 xfs_alloc_ptr_t;\n\n \n#define\tXFS_BNO_BLOCK(mp)\t((xfs_agblock_t)(XFS_AGFL_BLOCK(mp) + 1))\n#define\tXFS_CNT_BLOCK(mp)\t((xfs_agblock_t)(XFS_BNO_BLOCK(mp) + 1))\n\n\n \n#define\tXFS_IBT_MAGIC\t\t0x49414254\t \n#define\tXFS_IBT_CRC_MAGIC\t0x49414233\t \n#define\tXFS_FIBT_MAGIC\t\t0x46494254\t \n#define\tXFS_FIBT_CRC_MAGIC\t0x46494233\t \n\ntypedef uint64_t\txfs_inofree_t;\n#define\tXFS_INODES_PER_CHUNK\t\t(NBBY * sizeof(xfs_inofree_t))\n#define\tXFS_INODES_PER_CHUNK_LOG\t(XFS_NBBYLOG + 3)\n#define\tXFS_INOBT_ALL_FREE\t\t((xfs_inofree_t)-1)\n#define\tXFS_INOBT_MASK(i)\t\t((xfs_inofree_t)1 << (i))\n\n#define XFS_INOBT_HOLEMASK_FULL\t\t0\t \n#define XFS_INOBT_HOLEMASK_BITS\t\t(NBBY * sizeof(uint16_t))\n#define XFS_INODES_PER_HOLEMASK_BIT\t\\\n\t(XFS_INODES_PER_CHUNK / (NBBY * sizeof(uint16_t)))\n\nstatic inline xfs_inofree_t xfs_inobt_maskn(int i, int n)\n{\n\treturn ((n >= XFS_INODES_PER_CHUNK ? 0 : XFS_INOBT_MASK(n)) - 1) << i;\n}\n\n \ntypedef struct xfs_inobt_rec {\n\t__be32\t\tir_startino;\t \n\tunion {\n\t\tstruct {\n\t\t\t__be32\tir_freecount;\t \n\t\t} f;\n\t\tstruct {\n\t\t\t__be16\tir_holemask; \n\t\t\t__u8\tir_count;\t \n\t\t\t__u8\tir_freecount;\t \n\t\t} sp;\n\t} ir_u;\n\t__be64\t\tir_free;\t \n} xfs_inobt_rec_t;\n\ntypedef struct xfs_inobt_rec_incore {\n\txfs_agino_t\tir_startino;\t \n\tuint16_t\tir_holemask;\t \n\tuint8_t\t\tir_count;\t \n\tuint8_t\t\tir_freecount;\t \n\txfs_inofree_t\tir_free;\t \n} xfs_inobt_rec_incore_t;\n\nstatic inline bool xfs_inobt_issparse(uint16_t holemask)\n{\n\t \n\treturn holemask;\n}\n\n \ntypedef struct xfs_inobt_key {\n\t__be32\t\tir_startino;\t \n} xfs_inobt_key_t;\n\n \ntypedef __be32 xfs_inobt_ptr_t;\n\n \n#define\tXFS_IBT_BLOCK(mp)\t\t((xfs_agblock_t)(XFS_CNT_BLOCK(mp) + 1))\n#define\tXFS_FIBT_BLOCK(mp)\t\t((xfs_agblock_t)(XFS_IBT_BLOCK(mp) + 1))\n\n \n#define\tXFS_RMAP_CRC_MAGIC\t0x524d4233\t \n\n \n#define XFS_OWNER_INFO_ATTR_FORK\t(1 << 0)\n#define XFS_OWNER_INFO_BMBT_BLOCK\t(1 << 1)\nstruct xfs_owner_info {\n\tuint64_t\t\toi_owner;\n\txfs_fileoff_t\t\toi_offset;\n\tunsigned int\t\toi_flags;\n};\n\n \n#define XFS_RMAP_OWN_NULL\t(-1ULL)\t \n#define XFS_RMAP_OWN_UNKNOWN\t(-2ULL)\t \n#define XFS_RMAP_OWN_FS\t\t(-3ULL)\t \n#define XFS_RMAP_OWN_LOG\t(-4ULL)\t \n#define XFS_RMAP_OWN_AG\t\t(-5ULL)\t \n#define XFS_RMAP_OWN_INOBT\t(-6ULL)\t \n#define XFS_RMAP_OWN_INODES\t(-7ULL)\t \n#define XFS_RMAP_OWN_REFC\t(-8ULL)  \n#define XFS_RMAP_OWN_COW\t(-9ULL)  \n#define XFS_RMAP_OWN_MIN\t(-10ULL)  \n\n#define XFS_RMAP_NON_INODE_OWNER(owner)\t(!!((owner) & (1ULL << 63)))\n\n \nstruct xfs_rmap_rec {\n\t__be32\t\trm_startblock;\t \n\t__be32\t\trm_blockcount;\t \n\t__be64\t\trm_owner;\t \n\t__be64\t\trm_offset;\t \n};\n\n \n#define XFS_RMAP_OFF_ATTR_FORK\t((uint64_t)1ULL << 63)\n#define XFS_RMAP_OFF_BMBT_BLOCK\t((uint64_t)1ULL << 62)\n#define XFS_RMAP_OFF_UNWRITTEN\t((uint64_t)1ULL << 61)\n\n#define XFS_RMAP_LEN_MAX\t((uint32_t)~0U)\n#define XFS_RMAP_OFF_FLAGS\t(XFS_RMAP_OFF_ATTR_FORK | \\\n\t\t\t\t XFS_RMAP_OFF_BMBT_BLOCK | \\\n\t\t\t\t XFS_RMAP_OFF_UNWRITTEN)\n#define XFS_RMAP_OFF_MASK\t((uint64_t)0x3FFFFFFFFFFFFFULL)\n\n#define XFS_RMAP_OFF(off)\t\t((off) & XFS_RMAP_OFF_MASK)\n\n#define XFS_RMAP_IS_BMBT_BLOCK(off)\t(!!((off) & XFS_RMAP_OFF_BMBT_BLOCK))\n#define XFS_RMAP_IS_ATTR_FORK(off)\t(!!((off) & XFS_RMAP_OFF_ATTR_FORK))\n#define XFS_RMAP_IS_UNWRITTEN(len)\t(!!((off) & XFS_RMAP_OFF_UNWRITTEN))\n\n#define RMAPBT_STARTBLOCK_BITLEN\t32\n#define RMAPBT_BLOCKCOUNT_BITLEN\t32\n#define RMAPBT_OWNER_BITLEN\t\t64\n#define RMAPBT_ATTRFLAG_BITLEN\t\t1\n#define RMAPBT_BMBTFLAG_BITLEN\t\t1\n#define RMAPBT_EXNTFLAG_BITLEN\t\t1\n#define RMAPBT_UNUSED_OFFSET_BITLEN\t7\n#define RMAPBT_OFFSET_BITLEN\t\t54\n\n \nstruct xfs_rmap_key {\n\t__be32\t\trm_startblock;\t \n\t__be64\t\trm_owner;\t \n\t__be64\t\trm_offset;\t \n} __attribute__((packed));\n\n \ntypedef __be32 xfs_rmap_ptr_t;\n\n#define\tXFS_RMAP_BLOCK(mp) \\\n\t(xfs_has_finobt(((mp))) ? \\\n\t XFS_FIBT_BLOCK(mp) + 1 : \\\n\t XFS_IBT_BLOCK(mp) + 1)\n\n \n#define\tXFS_REFC_CRC_MAGIC\t0x52334643\t \n\nunsigned int xfs_refc_block(struct xfs_mount *mp);\n\n \n\n \n#define XFS_REFC_COWFLAG\t\t(1U << 31)\n#define REFCNTBT_COWFLAG_BITLEN\t\t1\n#define REFCNTBT_AGBLOCK_BITLEN\t\t31\n\nstruct xfs_refcount_rec {\n\t__be32\t\trc_startblock;\t \n\t__be32\t\trc_blockcount;\t \n\t__be32\t\trc_refcount;\t \n};\n\nstruct xfs_refcount_key {\n\t__be32\t\trc_startblock;\t \n};\n\n#define MAXREFCOUNT\t((xfs_nlink_t)~0U)\n#define MAXREFCEXTLEN\t((xfs_extlen_t)~0U)\n\n \ntypedef __be32 xfs_refcount_ptr_t;\n\n\n \n#define XFS_BMAP_MAGIC\t\t0x424d4150\t \n#define XFS_BMAP_CRC_MAGIC\t0x424d4133\t \n\n \ntypedef struct xfs_bmdr_block {\n\t__be16\t\tbb_level;\t \n\t__be16\t\tbb_numrecs;\t \n} xfs_bmdr_block_t;\n\n \n#define BMBT_EXNTFLAG_BITLEN\t1\n#define BMBT_STARTOFF_BITLEN\t54\n#define BMBT_STARTBLOCK_BITLEN\t52\n#define BMBT_BLOCKCOUNT_BITLEN\t21\n\n#define BMBT_STARTOFF_MASK\t((1ULL << BMBT_STARTOFF_BITLEN) - 1)\n#define BMBT_BLOCKCOUNT_MASK\t((1ULL << BMBT_BLOCKCOUNT_BITLEN) - 1)\n\n#define XFS_MAX_BMBT_EXTLEN\t((xfs_extlen_t)(BMBT_BLOCKCOUNT_MASK))\n\n \n#define XFS_MAX_FILEOFF\t\t(BMBT_STARTOFF_MASK + BMBT_BLOCKCOUNT_MASK)\n\ntypedef struct xfs_bmbt_rec {\n\t__be64\t\t\tl0, l1;\n} xfs_bmbt_rec_t;\n\ntypedef uint64_t\txfs_bmbt_rec_base_t;\t \ntypedef xfs_bmbt_rec_t xfs_bmdr_rec_t;\n\n \n#define STARTBLOCKVALBITS\t17\n#define STARTBLOCKMASKBITS\t(15 + 20)\n#define STARTBLOCKMASK\t\t\\\n\t(((((xfs_fsblock_t)1) << STARTBLOCKMASKBITS) - 1) << STARTBLOCKVALBITS)\n\nstatic inline int isnullstartblock(xfs_fsblock_t x)\n{\n\treturn ((x) & STARTBLOCKMASK) == STARTBLOCKMASK;\n}\n\nstatic inline xfs_fsblock_t nullstartblock(int k)\n{\n\tASSERT(k < (1 << STARTBLOCKVALBITS));\n\treturn STARTBLOCKMASK | (k);\n}\n\nstatic inline xfs_filblks_t startblockval(xfs_fsblock_t x)\n{\n\treturn (xfs_filblks_t)((x) & ~STARTBLOCKMASK);\n}\n\n \ntypedef struct xfs_bmbt_key {\n\t__be64\t\tbr_startoff;\t \n} xfs_bmbt_key_t, xfs_bmdr_key_t;\n\n \ntypedef __be64 xfs_bmbt_ptr_t, xfs_bmdr_ptr_t;\n\n\n \n \nstruct xfs_btree_block_shdr {\n\t__be32\t\tbb_leftsib;\n\t__be32\t\tbb_rightsib;\n\n\t__be64\t\tbb_blkno;\n\t__be64\t\tbb_lsn;\n\tuuid_t\t\tbb_uuid;\n\t__be32\t\tbb_owner;\n\t__le32\t\tbb_crc;\n};\n\n \nstruct xfs_btree_block_lhdr {\n\t__be64\t\tbb_leftsib;\n\t__be64\t\tbb_rightsib;\n\n\t__be64\t\tbb_blkno;\n\t__be64\t\tbb_lsn;\n\tuuid_t\t\tbb_uuid;\n\t__be64\t\tbb_owner;\n\t__le32\t\tbb_crc;\n\t__be32\t\tbb_pad;  \n};\n\nstruct xfs_btree_block {\n\t__be32\t\tbb_magic;\t \n\t__be16\t\tbb_level;\t \n\t__be16\t\tbb_numrecs;\t \n\tunion {\n\t\tstruct xfs_btree_block_shdr s;\n\t\tstruct xfs_btree_block_lhdr l;\n\t} bb_u;\t\t\t\t \n};\n\n \n#define XFS_BTREE_SBLOCK_LEN \\\n\t(offsetof(struct xfs_btree_block, bb_u) + \\\n\t offsetof(struct xfs_btree_block_shdr, bb_blkno))\n \n#define XFS_BTREE_LBLOCK_LEN \\\n\t(offsetof(struct xfs_btree_block, bb_u) + \\\n\t offsetof(struct xfs_btree_block_lhdr, bb_blkno))\n\n \n#define XFS_BTREE_SBLOCK_CRC_LEN \\\n\t(offsetof(struct xfs_btree_block, bb_u) + \\\n\t sizeof(struct xfs_btree_block_shdr))\n#define XFS_BTREE_LBLOCK_CRC_LEN \\\n\t(offsetof(struct xfs_btree_block, bb_u) + \\\n\t sizeof(struct xfs_btree_block_lhdr))\n\n#define XFS_BTREE_SBLOCK_CRC_OFF \\\n\toffsetof(struct xfs_btree_block, bb_u.s.bb_crc)\n#define XFS_BTREE_LBLOCK_CRC_OFF \\\n\toffsetof(struct xfs_btree_block, bb_u.l.bb_crc)\n\n \nstruct xfs_acl_entry {\n\t__be32\tae_tag;\n\t__be32\tae_id;\n\t__be16\tae_perm;\n\t__be16\tae_pad;\t\t \n};\n\nstruct xfs_acl {\n\t__be32\t\t\tacl_cnt;\n\tstruct xfs_acl_entry\tacl_entry[];\n};\n\n \n#define XFS_ACL_MAX_ENTRIES(mp)\t\\\n\t(xfs_has_crc(mp) \\\n\t\t?  (XFS_XATTR_SIZE_MAX - sizeof(struct xfs_acl)) / \\\n\t\t\t\t\t\tsizeof(struct xfs_acl_entry) \\\n\t\t: 25)\n\n#define XFS_ACL_SIZE(cnt) \\\n\t(sizeof(struct xfs_acl) + \\\n\t\tsizeof(struct xfs_acl_entry) * cnt)\n\n#define XFS_ACL_MAX_SIZE(mp) \\\n\tXFS_ACL_SIZE(XFS_ACL_MAX_ENTRIES((mp)))\n\n\n \n#define SGI_ACL_FILE\t\t\"SGI_ACL_FILE\"\n#define SGI_ACL_DEFAULT\t\t\"SGI_ACL_DEFAULT\"\n#define SGI_ACL_FILE_SIZE\t(sizeof(SGI_ACL_FILE)-1)\n#define SGI_ACL_DEFAULT_SIZE\t(sizeof(SGI_ACL_DEFAULT)-1)\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}