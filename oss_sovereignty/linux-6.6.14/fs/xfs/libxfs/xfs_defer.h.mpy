{
  "module_name": "xfs_defer.h",
  "hash_id": "c082e85c6de4b7114d15c381bf6fb27421e6e513bea58fae698eae62a11577f1",
  "original_prompt": "Ingested from linux-6.6.14/fs/xfs/libxfs/xfs_defer.h",
  "human_readable_source": " \n \n#ifndef __XFS_DEFER_H__\n#define\t__XFS_DEFER_H__\n\nstruct xfs_btree_cur;\nstruct xfs_defer_op_type;\nstruct xfs_defer_capture;\n\n \nenum xfs_defer_ops_type {\n\tXFS_DEFER_OPS_TYPE_BMAP,\n\tXFS_DEFER_OPS_TYPE_REFCOUNT,\n\tXFS_DEFER_OPS_TYPE_RMAP,\n\tXFS_DEFER_OPS_TYPE_FREE,\n\tXFS_DEFER_OPS_TYPE_AGFL_FREE,\n\tXFS_DEFER_OPS_TYPE_ATTR,\n\tXFS_DEFER_OPS_TYPE_MAX,\n};\n\n \nstruct xfs_defer_pending {\n\tstruct list_head\t\tdfp_list;\t \n\tstruct list_head\t\tdfp_work;\t \n\tstruct xfs_log_item\t\t*dfp_intent;\t \n\tstruct xfs_log_item\t\t*dfp_done;\t \n\tunsigned int\t\t\tdfp_count;\t \n\tenum xfs_defer_ops_type\t\tdfp_type;\n};\n\nvoid xfs_defer_add(struct xfs_trans *tp, enum xfs_defer_ops_type type,\n\t\tstruct list_head *h);\nint xfs_defer_finish_noroll(struct xfs_trans **tp);\nint xfs_defer_finish(struct xfs_trans **tp);\nvoid xfs_defer_cancel(struct xfs_trans *);\nvoid xfs_defer_move(struct xfs_trans *dtp, struct xfs_trans *stp);\n\n \nstruct xfs_defer_op_type {\n\tstruct xfs_log_item *(*create_intent)(struct xfs_trans *tp,\n\t\t\tstruct list_head *items, unsigned int count, bool sort);\n\tvoid (*abort_intent)(struct xfs_log_item *intent);\n\tstruct xfs_log_item *(*create_done)(struct xfs_trans *tp,\n\t\t\tstruct xfs_log_item *intent, unsigned int count);\n\tint (*finish_item)(struct xfs_trans *tp, struct xfs_log_item *done,\n\t\t\tstruct list_head *item, struct xfs_btree_cur **state);\n\tvoid (*finish_cleanup)(struct xfs_trans *tp,\n\t\t\tstruct xfs_btree_cur *state, int error);\n\tvoid (*cancel_item)(struct list_head *item);\n\tunsigned int\t\tmax_items;\n};\n\nextern const struct xfs_defer_op_type xfs_bmap_update_defer_type;\nextern const struct xfs_defer_op_type xfs_refcount_update_defer_type;\nextern const struct xfs_defer_op_type xfs_rmap_update_defer_type;\nextern const struct xfs_defer_op_type xfs_extent_free_defer_type;\nextern const struct xfs_defer_op_type xfs_agfl_free_defer_type;\nextern const struct xfs_defer_op_type xfs_attr_defer_type;\n\n\n \n#define XFS_DEFER_OPS_NR_INODES\t2\t \n#define XFS_DEFER_OPS_NR_BUFS\t2\t \n\n \nstruct xfs_defer_resources {\n\t \n\tstruct xfs_buf\t\t*dr_bp[XFS_DEFER_OPS_NR_BUFS];\n\n\t \n\tstruct xfs_inode\t*dr_ip[XFS_DEFER_OPS_NR_INODES];\n\n\t \n\tunsigned short\t\tdr_bufs;\n\n\t \n\tunsigned short\t\tdr_ordered;\n\n\t \n\tunsigned short\t\tdr_inos;\n};\n\n \nstruct xfs_defer_capture {\n\t \n\tstruct list_head\tdfc_list;\n\n\t \n\tstruct list_head\tdfc_dfops;\n\tunsigned int\t\tdfc_tpflags;\n\n\t \n\tunsigned int\t\tdfc_blkres;\n\tunsigned int\t\tdfc_rtxres;\n\n\t \n\tunsigned int\t\tdfc_logres;\n\n\tstruct xfs_defer_resources dfc_held;\n};\n\n \nint xfs_defer_ops_capture_and_commit(struct xfs_trans *tp,\n\t\tstruct list_head *capture_list);\nvoid xfs_defer_ops_continue(struct xfs_defer_capture *d, struct xfs_trans *tp,\n\t\tstruct xfs_defer_resources *dres);\nvoid xfs_defer_ops_capture_free(struct xfs_mount *mp,\n\t\tstruct xfs_defer_capture *d);\nvoid xfs_defer_resources_rele(struct xfs_defer_resources *dres);\n\nint __init xfs_defer_init_item_caches(void);\nvoid xfs_defer_destroy_item_caches(void);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}