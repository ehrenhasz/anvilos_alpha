{
  "module_name": "raid56.h",
  "hash_id": "268e8cfa0f79e74ebd5b491eadeae8b10dc97ae4a13e898649068d389f2381a0",
  "original_prompt": "Ingested from linux-6.6.14/fs/btrfs/raid56.h",
  "human_readable_source": " \n \n\n#ifndef BTRFS_RAID56_H\n#define BTRFS_RAID56_H\n\n#include <linux/workqueue.h>\n#include \"volumes.h\"\n\nenum btrfs_rbio_ops {\n\tBTRFS_RBIO_WRITE,\n\tBTRFS_RBIO_READ_REBUILD,\n\tBTRFS_RBIO_PARITY_SCRUB,\n};\n\nstruct btrfs_raid_bio {\n\tstruct btrfs_io_context *bioc;\n\n\t \n\tstruct list_head hash_list;\n\n\t \n\tstruct list_head stripe_cache;\n\n\t \n\tstruct work_struct work;\n\n\t \n\tstruct bio_list bio_list;\n\tspinlock_t bio_list_lock;\n\n\t \n\tstruct list_head plug_list;\n\n\t \n\tunsigned long flags;\n\n\t \n\tenum btrfs_rbio_ops operation;\n\n\t \n\tu16 nr_pages;\n\n\t \n\tu16 nr_sectors;\n\n\t \n\tu8 nr_data;\n\n\t \n\tu8 real_stripes;\n\n\t \n\tu8 stripe_npages;\n\n\t \n\tu8 stripe_nsectors;\n\n\t \n\tu8 scrubp;\n\n\t \n\tint bio_list_bytes;\n\n\trefcount_t refs;\n\n\tatomic_t stripes_pending;\n\n\twait_queue_head_t io_wait;\n\n\t \n\tunsigned long dbitmap;\n\n\t \n\tunsigned long finish_pbitmap;\n\n\t \n\n\t \n\tstruct page **stripe_pages;\n\n\t \n\tstruct sector_ptr *bio_sectors;\n\n\t \n\tstruct sector_ptr *stripe_sectors;\n\n\t \n\tvoid **finish_pointers;\n\n\t \n\tunsigned long *error_bitmap;\n\n\t \n\tu8 *csum_buf;\n\n\t \n\tunsigned long *csum_bitmap;\n};\n\n \nstruct raid56_bio_trace_info {\n\tu64 devid;\n\n\t \n\tu32 offset;\n\n\t \n\tu8 stripe_nr;\n};\n\nstatic inline int nr_data_stripes(const struct map_lookup *map)\n{\n\treturn map->num_stripes - btrfs_nr_parity_stripes(map->type);\n}\n\nstatic inline int nr_bioc_data_stripes(const struct btrfs_io_context *bioc)\n{\n\treturn bioc->num_stripes - btrfs_nr_parity_stripes(bioc->map_type);\n}\n\n#define RAID5_P_STRIPE ((u64)-2)\n#define RAID6_Q_STRIPE ((u64)-1)\n\n#define is_parity_stripe(x) (((x) == RAID5_P_STRIPE) ||\t\t\\\n\t\t\t     ((x) == RAID6_Q_STRIPE))\n\nstruct btrfs_device;\n\nvoid raid56_parity_recover(struct bio *bio, struct btrfs_io_context *bioc,\n\t\t\t   int mirror_num);\nvoid raid56_parity_write(struct bio *bio, struct btrfs_io_context *bioc);\n\nstruct btrfs_raid_bio *raid56_parity_alloc_scrub_rbio(struct bio *bio,\n\t\t\t\tstruct btrfs_io_context *bioc,\n\t\t\t\tstruct btrfs_device *scrub_dev,\n\t\t\t\tunsigned long *dbitmap, int stripe_nsectors);\nvoid raid56_parity_submit_scrub_rbio(struct btrfs_raid_bio *rbio);\n\nvoid raid56_parity_cache_data_pages(struct btrfs_raid_bio *rbio,\n\t\t\t\t    struct page **data_pages, u64 data_logical);\n\nint btrfs_alloc_stripe_hash_table(struct btrfs_fs_info *info);\nvoid btrfs_free_stripe_hash_table(struct btrfs_fs_info *info);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}