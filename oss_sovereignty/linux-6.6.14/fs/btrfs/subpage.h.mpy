{
  "module_name": "subpage.h",
  "hash_id": "ee43ead712facbee93104d21e0efc2f9ca3f4aa111ef317101304e57566a4399",
  "original_prompt": "Ingested from linux-6.6.14/fs/btrfs/subpage.h",
  "human_readable_source": " \n\n#ifndef BTRFS_SUBPAGE_H\n#define BTRFS_SUBPAGE_H\n\n#include <linux/spinlock.h>\n\n \nstruct btrfs_subpage_info {\n\t \n\tunsigned int bitmap_nr_bits;\n\n\t \n\tunsigned int total_nr_bits;\n\n\t \n\tunsigned int uptodate_offset;\n\tunsigned int dirty_offset;\n\tunsigned int writeback_offset;\n\tunsigned int ordered_offset;\n\tunsigned int checked_offset;\n};\n\n \nstruct btrfs_subpage {\n\t \n\tspinlock_t lock;\n\t \n\tatomic_t readers;\n\tunion {\n\t\t \n\t\tatomic_t eb_refs;\n\n\t\t \n\t\tatomic_t writers;\n\t};\n\tunsigned long bitmaps[];\n};\n\nenum btrfs_subpage_type {\n\tBTRFS_SUBPAGE_METADATA,\n\tBTRFS_SUBPAGE_DATA,\n};\n\nbool btrfs_is_subpage(const struct btrfs_fs_info *fs_info, struct page *page);\n\nvoid btrfs_init_subpage_info(struct btrfs_subpage_info *subpage_info, u32 sectorsize);\nint btrfs_attach_subpage(const struct btrfs_fs_info *fs_info,\n\t\t\t struct page *page, enum btrfs_subpage_type type);\nvoid btrfs_detach_subpage(const struct btrfs_fs_info *fs_info,\n\t\t\t  struct page *page);\n\n \nstruct btrfs_subpage *btrfs_alloc_subpage(const struct btrfs_fs_info *fs_info,\n\t\t\t\t\t  enum btrfs_subpage_type type);\nvoid btrfs_free_subpage(struct btrfs_subpage *subpage);\n\nvoid btrfs_page_inc_eb_refs(const struct btrfs_fs_info *fs_info,\n\t\t\t    struct page *page);\nvoid btrfs_page_dec_eb_refs(const struct btrfs_fs_info *fs_info,\n\t\t\t    struct page *page);\n\nvoid btrfs_subpage_start_reader(const struct btrfs_fs_info *fs_info,\n\t\tstruct page *page, u64 start, u32 len);\nvoid btrfs_subpage_end_reader(const struct btrfs_fs_info *fs_info,\n\t\tstruct page *page, u64 start, u32 len);\n\nvoid btrfs_subpage_start_writer(const struct btrfs_fs_info *fs_info,\n\t\tstruct page *page, u64 start, u32 len);\nbool btrfs_subpage_end_and_test_writer(const struct btrfs_fs_info *fs_info,\n\t\tstruct page *page, u64 start, u32 len);\nint btrfs_page_start_writer_lock(const struct btrfs_fs_info *fs_info,\n\t\tstruct page *page, u64 start, u32 len);\nvoid btrfs_page_end_writer_lock(const struct btrfs_fs_info *fs_info,\n\t\tstruct page *page, u64 start, u32 len);\n\n \n#define DECLARE_BTRFS_SUBPAGE_OPS(name)\t\t\t\t\t\\\nvoid btrfs_subpage_set_##name(const struct btrfs_fs_info *fs_info,\t\\\n\t\tstruct page *page, u64 start, u32 len);\t\t\t\\\nvoid btrfs_subpage_clear_##name(const struct btrfs_fs_info *fs_info,\t\\\n\t\tstruct page *page, u64 start, u32 len);\t\t\t\\\nbool btrfs_subpage_test_##name(const struct btrfs_fs_info *fs_info,\t\\\n\t\tstruct page *page, u64 start, u32 len);\t\t\t\\\nvoid btrfs_page_set_##name(const struct btrfs_fs_info *fs_info,\t\t\\\n\t\tstruct page *page, u64 start, u32 len);\t\t\t\\\nvoid btrfs_page_clear_##name(const struct btrfs_fs_info *fs_info,\t\\\n\t\tstruct page *page, u64 start, u32 len);\t\t\t\\\nbool btrfs_page_test_##name(const struct btrfs_fs_info *fs_info,\t\\\n\t\tstruct page *page, u64 start, u32 len);\t\t\t\\\nvoid btrfs_page_clamp_set_##name(const struct btrfs_fs_info *fs_info,\t\\\n\t\tstruct page *page, u64 start, u32 len);\t\t\t\\\nvoid btrfs_page_clamp_clear_##name(const struct btrfs_fs_info *fs_info,\t\\\n\t\tstruct page *page, u64 start, u32 len);\t\t\t\\\nbool btrfs_page_clamp_test_##name(const struct btrfs_fs_info *fs_info,\t\\\n\t\tstruct page *page, u64 start, u32 len);\n\nDECLARE_BTRFS_SUBPAGE_OPS(uptodate);\nDECLARE_BTRFS_SUBPAGE_OPS(dirty);\nDECLARE_BTRFS_SUBPAGE_OPS(writeback);\nDECLARE_BTRFS_SUBPAGE_OPS(ordered);\nDECLARE_BTRFS_SUBPAGE_OPS(checked);\n\nbool btrfs_subpage_clear_and_test_dirty(const struct btrfs_fs_info *fs_info,\n\t\tstruct page *page, u64 start, u32 len);\n\nvoid btrfs_page_assert_not_dirty(const struct btrfs_fs_info *fs_info,\n\t\t\t\t struct page *page);\nvoid btrfs_page_unlock_writer(struct btrfs_fs_info *fs_info, struct page *page,\n\t\t\t      u64 start, u32 len);\nvoid __cold btrfs_subpage_dump_bitmap(const struct btrfs_fs_info *fs_info,\n\t\t\t\t      struct page *page, u64 start, u32 len);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}