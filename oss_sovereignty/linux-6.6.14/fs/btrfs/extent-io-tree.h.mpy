{
  "module_name": "extent-io-tree.h",
  "hash_id": "e93feb4276eae2c18112233c2b69e92432b940f3e73e89432da745c437e5aa4d",
  "original_prompt": "Ingested from linux-6.6.14/fs/btrfs/extent-io-tree.h",
  "human_readable_source": " \n\n#ifndef BTRFS_EXTENT_IO_TREE_H\n#define BTRFS_EXTENT_IO_TREE_H\n\n#include \"misc.h\"\n\nstruct extent_changeset;\n\n \nenum {\n\tENUM_BIT(EXTENT_DIRTY),\n\tENUM_BIT(EXTENT_UPTODATE),\n\tENUM_BIT(EXTENT_LOCKED),\n\tENUM_BIT(EXTENT_NEW),\n\tENUM_BIT(EXTENT_DELALLOC),\n\tENUM_BIT(EXTENT_DEFRAG),\n\tENUM_BIT(EXTENT_BOUNDARY),\n\tENUM_BIT(EXTENT_NODATASUM),\n\tENUM_BIT(EXTENT_CLEAR_META_RESV),\n\tENUM_BIT(EXTENT_NEED_WAIT),\n\tENUM_BIT(EXTENT_NORESERVE),\n\tENUM_BIT(EXTENT_QGROUP_RESERVED),\n\tENUM_BIT(EXTENT_CLEAR_DATA_RESV),\n\t \n\tENUM_BIT(EXTENT_DELALLOC_NEW),\n\t \n\tENUM_BIT(EXTENT_ADD_INODE_BYTES),\n\t \n\tENUM_BIT(EXTENT_CLEAR_ALL_BITS),\n\n\t \n\tENUM_BIT(EXTENT_NOWAIT)\n};\n\n#define EXTENT_DO_ACCOUNTING    (EXTENT_CLEAR_META_RESV | \\\n\t\t\t\t EXTENT_CLEAR_DATA_RESV)\n#define EXTENT_CTLBITS\t\t(EXTENT_DO_ACCOUNTING | \\\n\t\t\t\t EXTENT_ADD_INODE_BYTES | \\\n\t\t\t\t EXTENT_CLEAR_ALL_BITS)\n\n \n#define CHUNK_ALLOCATED\t\t\t\tEXTENT_DIRTY\n#define CHUNK_TRIMMED\t\t\t\tEXTENT_DEFRAG\n#define CHUNK_STATE_MASK\t\t\t(CHUNK_ALLOCATED |\t\t\\\n\t\t\t\t\t\t CHUNK_TRIMMED)\n\nenum {\n\tIO_TREE_FS_PINNED_EXTENTS,\n\tIO_TREE_FS_EXCLUDED_EXTENTS,\n\tIO_TREE_BTREE_INODE_IO,\n\tIO_TREE_INODE_IO,\n\tIO_TREE_RELOC_BLOCKS,\n\tIO_TREE_TRANS_DIRTY_PAGES,\n\tIO_TREE_ROOT_DIRTY_LOG_PAGES,\n\tIO_TREE_INODE_FILE_EXTENT,\n\tIO_TREE_LOG_CSUM_RANGE,\n\tIO_TREE_SELFTEST,\n\tIO_TREE_DEVICE_ALLOC_STATE,\n};\n\nstruct extent_io_tree {\n\tstruct rb_root state;\n\tstruct btrfs_fs_info *fs_info;\n\t \n\tstruct btrfs_inode *inode;\n\n\t \n\tu8 owner;\n\n\tspinlock_t lock;\n};\n\nstruct extent_state {\n\tu64 start;\n\tu64 end;  \n\tstruct rb_node rb_node;\n\n\t \n\twait_queue_head_t wq;\n\trefcount_t refs;\n\tu32 state;\n\n#ifdef CONFIG_BTRFS_DEBUG\n\tstruct list_head leak_list;\n#endif\n};\n\nvoid extent_io_tree_init(struct btrfs_fs_info *fs_info,\n\t\t\t struct extent_io_tree *tree, unsigned int owner);\nvoid extent_io_tree_release(struct extent_io_tree *tree);\n\nint lock_extent(struct extent_io_tree *tree, u64 start, u64 end,\n\t\tstruct extent_state **cached);\n\nint try_lock_extent(struct extent_io_tree *tree, u64 start, u64 end,\n\t\t    struct extent_state **cached);\n\nint __init extent_state_init_cachep(void);\nvoid __cold extent_state_free_cachep(void);\n\nu64 count_range_bits(struct extent_io_tree *tree,\n\t\t     u64 *start, u64 search_end,\n\t\t     u64 max_bytes, u32 bits, int contig,\n\t\t     struct extent_state **cached_state);\n\nvoid free_extent_state(struct extent_state *state);\nint test_range_bit(struct extent_io_tree *tree, u64 start, u64 end,\n\t\t   u32 bits, int filled, struct extent_state *cached_state);\nint clear_record_extent_bits(struct extent_io_tree *tree, u64 start, u64 end,\n\t\t\t     u32 bits, struct extent_changeset *changeset);\nint __clear_extent_bit(struct extent_io_tree *tree, u64 start, u64 end,\n\t\t       u32 bits, struct extent_state **cached,\n\t\t       struct extent_changeset *changeset);\n\nstatic inline int clear_extent_bit(struct extent_io_tree *tree, u64 start,\n\t\t\t\t   u64 end, u32 bits,\n\t\t\t\t   struct extent_state **cached)\n{\n\treturn __clear_extent_bit(tree, start, end, bits, cached, NULL);\n}\n\nstatic inline int unlock_extent(struct extent_io_tree *tree, u64 start, u64 end,\n\t\t\t\tstruct extent_state **cached)\n{\n\treturn __clear_extent_bit(tree, start, end, EXTENT_LOCKED, cached, NULL);\n}\n\nstatic inline int clear_extent_bits(struct extent_io_tree *tree, u64 start,\n\t\t\t\t    u64 end, u32 bits)\n{\n\treturn clear_extent_bit(tree, start, end, bits, NULL);\n}\n\nint set_record_extent_bits(struct extent_io_tree *tree, u64 start, u64 end,\n\t\t\t   u32 bits, struct extent_changeset *changeset);\nint set_extent_bit(struct extent_io_tree *tree, u64 start, u64 end,\n\t\t   u32 bits, struct extent_state **cached_state);\n\nstatic inline int clear_extent_uptodate(struct extent_io_tree *tree, u64 start,\n\t\tu64 end, struct extent_state **cached_state)\n{\n\treturn __clear_extent_bit(tree, start, end, EXTENT_UPTODATE,\n\t\t\t\t  cached_state, NULL);\n}\n\nstatic inline int clear_extent_dirty(struct extent_io_tree *tree, u64 start,\n\t\t\t\t     u64 end, struct extent_state **cached)\n{\n\treturn clear_extent_bit(tree, start, end,\n\t\t\t\tEXTENT_DIRTY | EXTENT_DELALLOC |\n\t\t\t\tEXTENT_DO_ACCOUNTING, cached);\n}\n\nint convert_extent_bit(struct extent_io_tree *tree, u64 start, u64 end,\n\t\t       u32 bits, u32 clear_bits,\n\t\t       struct extent_state **cached_state);\n\nbool find_first_extent_bit(struct extent_io_tree *tree, u64 start,\n\t\t\t   u64 *start_ret, u64 *end_ret, u32 bits,\n\t\t\t   struct extent_state **cached_state);\nvoid find_first_clear_extent_bit(struct extent_io_tree *tree, u64 start,\n\t\t\t\t u64 *start_ret, u64 *end_ret, u32 bits);\nint find_contiguous_extent_bit(struct extent_io_tree *tree, u64 start,\n\t\t\t       u64 *start_ret, u64 *end_ret, u32 bits);\nbool btrfs_find_delalloc_range(struct extent_io_tree *tree, u64 *start,\n\t\t\t       u64 *end, u64 max_bytes,\n\t\t\t       struct extent_state **cached_state);\nvoid wait_extent_bit(struct extent_io_tree *tree, u64 start, u64 end, u32 bits,\n\t\t     struct extent_state **cached_state);\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}