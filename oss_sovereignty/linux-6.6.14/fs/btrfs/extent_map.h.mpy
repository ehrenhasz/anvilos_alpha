{
  "module_name": "extent_map.h",
  "hash_id": "a498146e8d1f912a46c3118e5c1b9dd8ebf621ef10c5b82d75ddd8fc04521b9e",
  "original_prompt": "Ingested from linux-6.6.14/fs/btrfs/extent_map.h",
  "human_readable_source": " \n\n#ifndef BTRFS_EXTENT_MAP_H\n#define BTRFS_EXTENT_MAP_H\n\n#include <linux/rbtree.h>\n#include <linux/refcount.h>\n\n#define EXTENT_MAP_LAST_BYTE ((u64)-4)\n#define EXTENT_MAP_HOLE ((u64)-3)\n#define EXTENT_MAP_INLINE ((u64)-2)\n \n#define EXTENT_MAP_DELALLOC ((u64)-1)\n\n \nenum {\n\t \n\tEXTENT_FLAG_PINNED,\n\tEXTENT_FLAG_COMPRESSED,\n\t \n\tEXTENT_FLAG_PREALLOC,\n\t \n\tEXTENT_FLAG_LOGGING,\n\t \n\tEXTENT_FLAG_FILLING,\n\t \n\tEXTENT_FLAG_FS_MAPPING,\n\t \n\tEXTENT_FLAG_MERGED,\n};\n\nstruct extent_map {\n\tstruct rb_node rb_node;\n\n\t \n\tu64 start;\n\tu64 len;\n\tu64 mod_start;\n\tu64 mod_len;\n\tu64 orig_start;\n\tu64 orig_block_len;\n\tu64 ram_bytes;\n\tu64 block_start;\n\tu64 block_len;\n\n\t \n\tu64 generation;\n\tunsigned long flags;\n\t \n\tstruct map_lookup *map_lookup;\n\trefcount_t refs;\n\tunsigned int compress_type;\n\tstruct list_head list;\n};\n\nstruct extent_map_tree {\n\tstruct rb_root_cached map;\n\tstruct list_head modified_extents;\n\trwlock_t lock;\n};\n\nstruct btrfs_inode;\n\nstatic inline int extent_map_in_tree(const struct extent_map *em)\n{\n\treturn !RB_EMPTY_NODE(&em->rb_node);\n}\n\nstatic inline u64 extent_map_end(struct extent_map *em)\n{\n\tif (em->start + em->len < em->start)\n\t\treturn (u64)-1;\n\treturn em->start + em->len;\n}\n\nstatic inline u64 extent_map_block_end(struct extent_map *em)\n{\n\tif (em->block_start + em->block_len < em->block_start)\n\t\treturn (u64)-1;\n\treturn em->block_start + em->block_len;\n}\n\nvoid extent_map_tree_init(struct extent_map_tree *tree);\nstruct extent_map *lookup_extent_mapping(struct extent_map_tree *tree,\n\t\t\t\t\t u64 start, u64 len);\nint add_extent_mapping(struct extent_map_tree *tree,\n\t\t       struct extent_map *em, int modified);\nvoid remove_extent_mapping(struct extent_map_tree *tree, struct extent_map *em);\nint split_extent_map(struct btrfs_inode *inode, u64 start, u64 len, u64 pre,\n\t\t     u64 new_logical);\n\nstruct extent_map *alloc_extent_map(void);\nvoid free_extent_map(struct extent_map *em);\nint __init extent_map_init(void);\nvoid __cold extent_map_exit(void);\nint unpin_extent_cache(struct extent_map_tree *tree, u64 start, u64 len, u64 gen);\nvoid clear_em_logging(struct extent_map_tree *tree, struct extent_map *em);\nstruct extent_map *search_extent_mapping(struct extent_map_tree *tree,\n\t\t\t\t\t u64 start, u64 len);\nint btrfs_add_extent_mapping(struct btrfs_fs_info *fs_info,\n\t\t\t     struct extent_map_tree *em_tree,\n\t\t\t     struct extent_map **em_in, u64 start, u64 len);\nvoid btrfs_drop_extent_map_range(struct btrfs_inode *inode,\n\t\t\t\t u64 start, u64 end,\n\t\t\t\t bool skip_pinned);\nint btrfs_replace_extent_map_range(struct btrfs_inode *inode,\n\t\t\t\t   struct extent_map *new_em,\n\t\t\t\t   bool modified);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}