{
  "module_name": "block-rsv.h",
  "hash_id": "c04d24d25b284e62031a50c5276d8e85acf1dc5beeea5b256e5d97029aecc321",
  "original_prompt": "Ingested from linux-6.6.14/fs/btrfs/block-rsv.h",
  "human_readable_source": " \n\n#ifndef BTRFS_BLOCK_RSV_H\n#define BTRFS_BLOCK_RSV_H\n\nstruct btrfs_trans_handle;\nstruct btrfs_root;\nenum btrfs_reserve_flush_enum;\n\n \nenum btrfs_rsv_type {\n\tBTRFS_BLOCK_RSV_GLOBAL,\n\tBTRFS_BLOCK_RSV_DELALLOC,\n\tBTRFS_BLOCK_RSV_TRANS,\n\tBTRFS_BLOCK_RSV_CHUNK,\n\tBTRFS_BLOCK_RSV_DELOPS,\n\tBTRFS_BLOCK_RSV_DELREFS,\n\tBTRFS_BLOCK_RSV_EMPTY,\n\tBTRFS_BLOCK_RSV_TEMP,\n};\n\nstruct btrfs_block_rsv {\n\tu64 size;\n\tu64 reserved;\n\tstruct btrfs_space_info *space_info;\n\tspinlock_t lock;\n\tbool full;\n\tbool failfast;\n\t \n\tenum btrfs_rsv_type type:8;\n\n\t \n\tu64 qgroup_rsv_size;\n\tu64 qgroup_rsv_reserved;\n};\n\nvoid btrfs_init_block_rsv(struct btrfs_block_rsv *rsv, enum btrfs_rsv_type type);\nvoid btrfs_init_root_block_rsv(struct btrfs_root *root);\nstruct btrfs_block_rsv *btrfs_alloc_block_rsv(struct btrfs_fs_info *fs_info,\n\t\t\t\t\t      enum btrfs_rsv_type type);\nvoid btrfs_init_metadata_block_rsv(struct btrfs_fs_info *fs_info,\n\t\t\t\t   struct btrfs_block_rsv *rsv,\n\t\t\t\t   enum btrfs_rsv_type type);\nvoid btrfs_free_block_rsv(struct btrfs_fs_info *fs_info,\n\t\t\t  struct btrfs_block_rsv *rsv);\nint btrfs_block_rsv_add(struct btrfs_fs_info *fs_info,\n\t\t\tstruct btrfs_block_rsv *block_rsv, u64 num_bytes,\n\t\t\tenum btrfs_reserve_flush_enum flush);\nint btrfs_block_rsv_check(struct btrfs_block_rsv *block_rsv, int min_percent);\nint btrfs_block_rsv_refill(struct btrfs_fs_info *fs_info,\n\t\t\t   struct btrfs_block_rsv *block_rsv, u64 num_bytes,\n\t\t\t   enum btrfs_reserve_flush_enum flush);\nint btrfs_block_rsv_migrate(struct btrfs_block_rsv *src_rsv,\n\t\t\t    struct btrfs_block_rsv *dst_rsv, u64 num_bytes,\n\t\t\t    bool update_size);\nint btrfs_block_rsv_use_bytes(struct btrfs_block_rsv *block_rsv, u64 num_bytes);\nvoid btrfs_block_rsv_add_bytes(struct btrfs_block_rsv *block_rsv,\n\t\t\t       u64 num_bytes, bool update_size);\nu64 btrfs_block_rsv_release(struct btrfs_fs_info *fs_info,\n\t\t\t      struct btrfs_block_rsv *block_rsv,\n\t\t\t      u64 num_bytes, u64 *qgroup_to_release);\nvoid btrfs_update_global_block_rsv(struct btrfs_fs_info *fs_info);\nvoid btrfs_init_global_block_rsv(struct btrfs_fs_info *fs_info);\nvoid btrfs_release_global_block_rsv(struct btrfs_fs_info *fs_info);\nstruct btrfs_block_rsv *btrfs_use_block_rsv(struct btrfs_trans_handle *trans,\n\t\t\t\t\t    struct btrfs_root *root,\n\t\t\t\t\t    u32 blocksize);\nint btrfs_check_trunc_cache_free_space(struct btrfs_fs_info *fs_info,\n\t\t\t\t       struct btrfs_block_rsv *rsv);\nstatic inline void btrfs_unuse_block_rsv(struct btrfs_fs_info *fs_info,\n\t\t\t\t\t struct btrfs_block_rsv *block_rsv,\n\t\t\t\t\t u32 blocksize)\n{\n\tbtrfs_block_rsv_add_bytes(block_rsv, blocksize, false);\n\tbtrfs_block_rsv_release(fs_info, block_rsv, 0, NULL);\n}\n\n \nstatic inline bool btrfs_block_rsv_full(const struct btrfs_block_rsv *rsv)\n{\n\treturn data_race(rsv->full);\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}