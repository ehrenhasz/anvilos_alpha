{
  "module_name": "minix.h",
  "hash_id": "0e69bb2179249fa5648dac0553b5afa21909b9790bf63c61c020a877ca9c3b14",
  "original_prompt": "Ingested from linux-6.6.14/fs/minix/minix.h",
  "human_readable_source": " \n#ifndef FS_MINIX_H\n#define FS_MINIX_H\n\n#include <linux/fs.h>\n#include <linux/pagemap.h>\n#include <linux/minix_fs.h>\n\n#define INODE_VERSION(inode)\tminix_sb(inode->i_sb)->s_version\n#define MINIX_V1\t\t0x0001\t\t \n#define MINIX_V2\t\t0x0002\t\t \n#define MINIX_V3\t\t0x0003\t\t \n\n \nstruct minix_inode_info {\n\tunion {\n\t\t__u16 i1_data[16];\n\t\t__u32 i2_data[16];\n\t} u;\n\tstruct inode vfs_inode;\n};\n\n \nstruct minix_sb_info {\n\tunsigned long s_ninodes;\n\tunsigned long s_nzones;\n\tunsigned long s_imap_blocks;\n\tunsigned long s_zmap_blocks;\n\tunsigned long s_firstdatazone;\n\tunsigned long s_log_zone_size;\n\tint s_dirsize;\n\tint s_namelen;\n\tstruct buffer_head ** s_imap;\n\tstruct buffer_head ** s_zmap;\n\tstruct buffer_head * s_sbh;\n\tstruct minix_super_block * s_ms;\n\tunsigned short s_mount_state;\n\tunsigned short s_version;\n};\n\nextern struct inode *minix_iget(struct super_block *, unsigned long);\nextern struct minix_inode * minix_V1_raw_inode(struct super_block *, ino_t, struct buffer_head **);\nextern struct minix2_inode * minix_V2_raw_inode(struct super_block *, ino_t, struct buffer_head **);\nextern struct inode * minix_new_inode(const struct inode *, umode_t);\nextern void minix_free_inode(struct inode * inode);\nextern unsigned long minix_count_free_inodes(struct super_block *sb);\nextern int minix_new_block(struct inode * inode);\nextern void minix_free_block(struct inode *inode, unsigned long block);\nextern unsigned long minix_count_free_blocks(struct super_block *sb);\nextern int minix_getattr(struct mnt_idmap *, const struct path *,\n\t\t\t struct kstat *, u32, unsigned int);\nextern int minix_prepare_chunk(struct page *page, loff_t pos, unsigned len);\n\nextern void V1_minix_truncate(struct inode *);\nextern void V2_minix_truncate(struct inode *);\nextern void minix_truncate(struct inode *);\nextern void minix_set_inode(struct inode *, dev_t);\nextern int V1_minix_get_block(struct inode *, long, struct buffer_head *, int);\nextern int V2_minix_get_block(struct inode *, long, struct buffer_head *, int);\nextern unsigned V1_minix_blocks(loff_t, struct super_block *);\nextern unsigned V2_minix_blocks(loff_t, struct super_block *);\n\nextern struct minix_dir_entry *minix_find_entry(struct dentry*, struct page**);\nextern int minix_add_link(struct dentry*, struct inode*);\nextern int minix_delete_entry(struct minix_dir_entry*, struct page*);\nextern int minix_make_empty(struct inode*, struct inode*);\nextern int minix_empty_dir(struct inode*);\nint minix_set_link(struct minix_dir_entry *de, struct page *page,\n\t\tstruct inode *inode);\nextern struct minix_dir_entry *minix_dotdot(struct inode*, struct page**);\nextern ino_t minix_inode_by_name(struct dentry*);\n\nextern const struct inode_operations minix_file_inode_operations;\nextern const struct inode_operations minix_dir_inode_operations;\nextern const struct file_operations minix_file_operations;\nextern const struct file_operations minix_dir_operations;\n\nstatic inline struct minix_sb_info *minix_sb(struct super_block *sb)\n{\n\treturn sb->s_fs_info;\n}\n\nstatic inline struct minix_inode_info *minix_i(struct inode *inode)\n{\n\treturn container_of(inode, struct minix_inode_info, vfs_inode);\n}\n\nstatic inline unsigned minix_blocks_needed(unsigned bits, unsigned blocksize)\n{\n\treturn DIV_ROUND_UP(bits, blocksize * 8);\n}\n\n#if defined(CONFIG_MINIX_FS_NATIVE_ENDIAN) && \\\n\tdefined(CONFIG_MINIX_FS_BIG_ENDIAN_16BIT_INDEXED)\n\n#error Minix file system byte order broken\n\n#elif defined(CONFIG_MINIX_FS_NATIVE_ENDIAN)\n\n \n\n#define minix_test_and_set_bit(nr, addr)\t\\\n\t__test_and_set_bit((nr), (unsigned long *)(addr))\n#define minix_set_bit(nr, addr)\t\t\\\n\t__set_bit((nr), (unsigned long *)(addr))\n#define minix_test_and_clear_bit(nr, addr) \\\n\t__test_and_clear_bit((nr), (unsigned long *)(addr))\n#define minix_test_bit(nr, addr)\t\t\\\n\ttest_bit((nr), (unsigned long *)(addr))\n#define minix_find_first_zero_bit(addr, size) \\\n\tfind_first_zero_bit((unsigned long *)(addr), (size))\n\n#elif defined(CONFIG_MINIX_FS_BIG_ENDIAN_16BIT_INDEXED)\n\n \n\nstatic inline int minix_find_first_zero_bit(const void *vaddr, unsigned size)\n{\n\tconst unsigned short *p = vaddr, *addr = vaddr;\n\tunsigned short num;\n\n\tif (!size)\n\t\treturn 0;\n\n\tsize >>= 4;\n\twhile (*p++ == 0xffff) {\n\t\tif (--size == 0)\n\t\t\treturn (p - addr) << 4;\n\t}\n\n\tnum = *--p;\n\treturn ((p - addr) << 4) + ffz(num);\n}\n\n#define minix_test_and_set_bit(nr, addr)\t\\\n\t__test_and_set_bit((nr) ^ 16, (unsigned long *)(addr))\n#define minix_set_bit(nr, addr)\t\\\n\t__set_bit((nr) ^ 16, (unsigned long *)(addr))\n#define minix_test_and_clear_bit(nr, addr)\t\\\n\t__test_and_clear_bit((nr) ^ 16, (unsigned long *)(addr))\n\nstatic inline int minix_test_bit(int nr, const void *vaddr)\n{\n\tconst unsigned short *p = vaddr;\n\treturn (p[nr >> 4] & (1U << (nr & 15))) != 0;\n}\n\n#else\n\n \n\n#define minix_test_and_set_bit\t__test_and_set_bit_le\n#define minix_set_bit\t\t__set_bit_le\n#define minix_test_and_clear_bit\t__test_and_clear_bit_le\n#define minix_test_bit\ttest_bit_le\n#define minix_find_first_zero_bit\tfind_first_zero_bit_le\n\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}