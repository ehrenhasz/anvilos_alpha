{
  "module_name": "itree_v2.c",
  "hash_id": "82cf8ab7cdea4f3b3f5b92eee0fa5774b9799f9c4991a98b53ad4c979648072f",
  "original_prompt": "Ingested from linux-6.6.14/fs/minix/itree_v2.c",
  "human_readable_source": "\n#include <linux/buffer_head.h>\n#include \"minix.h\"\n\nenum {DIRECT = 7, DEPTH = 4};\t \n\ntypedef u32 block_t;\t \n\nstatic inline unsigned long block_to_cpu(block_t n)\n{\n\treturn n;\n}\n\nstatic inline block_t cpu_to_block(unsigned long n)\n{\n\treturn n;\n}\n\nstatic inline block_t *i_data(struct inode *inode)\n{\n\treturn (block_t *)minix_i(inode)->u.i2_data;\n}\n\n#define DIRCOUNT 7\n#define INDIRCOUNT(sb) (1 << ((sb)->s_blocksize_bits - 2))\n\nstatic int block_to_path(struct inode * inode, long block, int offsets[DEPTH])\n{\n\tint n = 0;\n\tstruct super_block *sb = inode->i_sb;\n\n\tif (block < 0) {\n\t\tprintk(\"MINIX-fs: block_to_path: block %ld < 0 on dev %pg\\n\",\n\t\t\tblock, sb->s_bdev);\n\t\treturn 0;\n\t}\n\tif ((u64)block * (u64)sb->s_blocksize >= sb->s_maxbytes)\n\t\treturn 0;\n\n\tif (block < DIRCOUNT) {\n\t\toffsets[n++] = block;\n\t} else if ((block -= DIRCOUNT) < INDIRCOUNT(sb)) {\n\t\toffsets[n++] = DIRCOUNT;\n\t\toffsets[n++] = block;\n\t} else if ((block -= INDIRCOUNT(sb)) < INDIRCOUNT(sb) * INDIRCOUNT(sb)) {\n\t\toffsets[n++] = DIRCOUNT + 1;\n\t\toffsets[n++] = block / INDIRCOUNT(sb);\n\t\toffsets[n++] = block % INDIRCOUNT(sb);\n\t} else {\n\t\tblock -= INDIRCOUNT(sb) * INDIRCOUNT(sb);\n\t\toffsets[n++] = DIRCOUNT + 2;\n\t\toffsets[n++] = (block / INDIRCOUNT(sb)) / INDIRCOUNT(sb);\n\t\toffsets[n++] = (block / INDIRCOUNT(sb)) % INDIRCOUNT(sb);\n\t\toffsets[n++] = block % INDIRCOUNT(sb);\n\t}\n\treturn n;\n}\n\n#include \"itree_common.c\"\n\nint V2_minix_get_block(struct inode * inode, long block,\n\t\t\tstruct buffer_head *bh_result, int create)\n{\n\treturn get_block(inode, block, bh_result, create);\n}\n\nvoid V2_minix_truncate(struct inode * inode)\n{\n\ttruncate(inode);\n}\n\nunsigned V2_minix_blocks(loff_t size, struct super_block *sb)\n{\n\treturn nblocks(size, sb);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}