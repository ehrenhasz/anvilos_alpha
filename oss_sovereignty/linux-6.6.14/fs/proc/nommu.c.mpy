{
  "module_name": "nommu.c",
  "hash_id": "13d7ee620c41ca808af78440b8e89a47b7ed78ad975a2b628d28d82b1490383d",
  "original_prompt": "Ingested from linux-6.6.14/fs/proc/nommu.c",
  "human_readable_source": "\n \n\n#include <linux/init.h>\n#include <linux/module.h>\n#include <linux/errno.h>\n#include <linux/time.h>\n#include <linux/kernel.h>\n#include <linux/string.h>\n#include <linux/mman.h>\n#include <linux/proc_fs.h>\n#include <linux/mm.h>\n#include <linux/mmzone.h>\n#include <linux/pagemap.h>\n#include <linux/swap.h>\n#include <linux/smp.h>\n#include <linux/seq_file.h>\n#include <linux/hugetlb.h>\n#include <linux/vmalloc.h>\n#include <asm/tlb.h>\n#include <asm/div64.h>\n#include \"internal.h\"\n\n \nstatic int nommu_region_show(struct seq_file *m, struct vm_region *region)\n{\n\tunsigned long ino = 0;\n\tstruct file *file;\n\tdev_t dev = 0;\n\tint flags;\n\n\tflags = region->vm_flags;\n\tfile = region->vm_file;\n\n\tif (file) {\n\t\tstruct inode *inode = file_inode(region->vm_file);\n\t\tdev = inode->i_sb->s_dev;\n\t\tino = inode->i_ino;\n\t}\n\n\tseq_setwidth(m, 25 + sizeof(void *) * 6 - 1);\n\tseq_printf(m,\n\t\t   \"%08lx-%08lx %c%c%c%c %08llx %02x:%02x %lu \",\n\t\t   region->vm_start,\n\t\t   region->vm_end,\n\t\t   flags & VM_READ ? 'r' : '-',\n\t\t   flags & VM_WRITE ? 'w' : '-',\n\t\t   flags & VM_EXEC ? 'x' : '-',\n\t\t   flags & VM_MAYSHARE ? flags & VM_SHARED ? 'S' : 's' : 'p',\n\t\t   ((loff_t)region->vm_pgoff) << PAGE_SHIFT,\n\t\t   MAJOR(dev), MINOR(dev), ino);\n\n\tif (file) {\n\t\tseq_pad(m, ' ');\n\t\tseq_file_path(m, file, \"\");\n\t}\n\n\tseq_putc(m, '\\n');\n\treturn 0;\n}\n\n \nstatic int nommu_region_list_show(struct seq_file *m, void *_p)\n{\n\tstruct rb_node *p = _p;\n\n\treturn nommu_region_show(m, rb_entry(p, struct vm_region, vm_rb));\n}\n\nstatic void *nommu_region_list_start(struct seq_file *m, loff_t *_pos)\n{\n\tstruct rb_node *p;\n\tloff_t pos = *_pos;\n\n\tdown_read(&nommu_region_sem);\n\n\tfor (p = rb_first(&nommu_region_tree); p; p = rb_next(p))\n\t\tif (pos-- == 0)\n\t\t\treturn p;\n\treturn NULL;\n}\n\nstatic void nommu_region_list_stop(struct seq_file *m, void *v)\n{\n\tup_read(&nommu_region_sem);\n}\n\nstatic void *nommu_region_list_next(struct seq_file *m, void *v, loff_t *pos)\n{\n\t(*pos)++;\n\treturn rb_next((struct rb_node *) v);\n}\n\nstatic const struct seq_operations proc_nommu_region_list_seqop = {\n\t.start\t= nommu_region_list_start,\n\t.next\t= nommu_region_list_next,\n\t.stop\t= nommu_region_list_stop,\n\t.show\t= nommu_region_list_show\n};\n\nstatic int __init proc_nommu_init(void)\n{\n\tproc_create_seq(\"maps\", S_IRUGO, NULL, &proc_nommu_region_list_seqop);\n\treturn 0;\n}\n\nfs_initcall(proc_nommu_init);\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}