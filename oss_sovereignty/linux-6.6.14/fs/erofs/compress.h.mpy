{
  "module_name": "compress.h",
  "hash_id": "45761d3533a8d22f6c7bb6b7ba928de1039933c9b7866f9c35a4d0c79ec294e9",
  "original_prompt": "Ingested from linux-6.6.14/fs/erofs/compress.h",
  "human_readable_source": " \n \n#ifndef __EROFS_FS_COMPRESS_H\n#define __EROFS_FS_COMPRESS_H\n\n#include \"internal.h\"\n\nstruct z_erofs_decompress_req {\n\tstruct super_block *sb;\n\tstruct page **in, **out;\n\n\tunsigned short pageofs_in, pageofs_out;\n\tunsigned int inputsize, outputsize;\n\n\t \n\tunsigned int alg;\n\tbool inplace_io, partial_decoding, fillgaps;\n};\n\nstruct z_erofs_decompressor {\n\tint (*config)(struct super_block *sb, struct erofs_super_block *dsb,\n\t\t      void *data, int size);\n\tint (*decompress)(struct z_erofs_decompress_req *rq,\n\t\t\t  struct page **pagepool);\n\tchar *name;\n};\n\n \n#define Z_EROFS_SHORTLIVED_PAGE\t\t(-1UL << 2)\n#define Z_EROFS_PREALLOCATED_PAGE\t(-2UL << 2)\n\n \n\n \nstatic inline bool z_erofs_is_shortlived_page(struct page *page)\n{\n\tif (page->private != Z_EROFS_SHORTLIVED_PAGE)\n\t\treturn false;\n\n\tDBG_BUGON(page->mapping);\n\treturn true;\n}\n\nstatic inline bool z_erofs_put_shortlivedpage(struct page **pagepool,\n\t\t\t\t\t      struct page *page)\n{\n\tif (!z_erofs_is_shortlived_page(page))\n\t\treturn false;\n\n\t \n\tif (page_ref_count(page) > 1) {\n\t\tput_page(page);\n\t} else {\n\t\t \n\t\terofs_pagepool_add(pagepool, page);\n\t}\n\treturn true;\n}\n\n#define MNGD_MAPPING(sbi)\t((sbi)->managed_cache->i_mapping)\nstatic inline bool erofs_page_is_managed(const struct erofs_sb_info *sbi,\n\t\t\t\t\t struct page *page)\n{\n\treturn page->mapping == MNGD_MAPPING(sbi);\n}\n\nint z_erofs_fixup_insize(struct z_erofs_decompress_req *rq, const char *padbuf,\n\t\t\t unsigned int padbufsize);\nextern const struct z_erofs_decompressor erofs_decompressors[];\n\n \nint z_erofs_load_lzma_config(struct super_block *sb,\n\t\t\tstruct erofs_super_block *dsb, void *data, int size);\nint z_erofs_load_deflate_config(struct super_block *sb,\n\t\t\tstruct erofs_super_block *dsb, void *data, int size);\nint z_erofs_lzma_decompress(struct z_erofs_decompress_req *rq,\n\t\t\t    struct page **pagepool);\nint z_erofs_deflate_decompress(struct z_erofs_decompress_req *rq,\n\t\t\t       struct page **pagepool);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}