{
  "module_name": "iostat.h",
  "hash_id": "2a0e96a4b6aa3588ed49f01b5106e30e4a6f133d902b76f68fc6318ef926e014",
  "original_prompt": "Ingested from linux-6.6.14/fs/f2fs/iostat.h",
  "human_readable_source": " \n \n#ifndef __F2FS_IOSTAT_H__\n#define __F2FS_IOSTAT_H__\n\nstruct bio_post_read_ctx;\n\nenum iostat_lat_type {\n\tREAD_IO = 0,\n\tWRITE_SYNC_IO,\n\tWRITE_ASYNC_IO,\n\tMAX_IO_TYPE,\n};\n\n#ifdef CONFIG_F2FS_IOSTAT\n\n#define NUM_PREALLOC_IOSTAT_CTXS\t128\n#define DEFAULT_IOSTAT_PERIOD_MS\t3000\n#define MIN_IOSTAT_PERIOD_MS\t\t100\n \n#define MAX_IOSTAT_PERIOD_MS\t\t8640000\n\nstruct iostat_lat_info {\n\tunsigned long sum_lat[MAX_IO_TYPE][NR_PAGE_TYPE];\t \n\tunsigned long peak_lat[MAX_IO_TYPE][NR_PAGE_TYPE];\t \n\tunsigned int bio_cnt[MAX_IO_TYPE][NR_PAGE_TYPE];\t \n};\n\nextern int __maybe_unused iostat_info_seq_show(struct seq_file *seq,\n\t\t\tvoid *offset);\nextern void f2fs_reset_iostat(struct f2fs_sb_info *sbi);\nextern void f2fs_update_iostat(struct f2fs_sb_info *sbi, struct inode *inode,\n\t\t\tenum iostat_type type, unsigned long long io_bytes);\n\nstruct bio_iostat_ctx {\n\tstruct f2fs_sb_info *sbi;\n\tunsigned long submit_ts;\n\tenum page_type type;\n\tstruct bio_post_read_ctx *post_read_ctx;\n};\n\nstatic inline void iostat_update_submit_ctx(struct bio *bio,\n\t\t\tenum page_type type)\n{\n\tstruct bio_iostat_ctx *iostat_ctx = bio->bi_private;\n\n\tiostat_ctx->submit_ts = jiffies;\n\tiostat_ctx->type = type;\n}\n\nstatic inline struct bio_post_read_ctx *get_post_read_ctx(struct bio *bio)\n{\n\tstruct bio_iostat_ctx *iostat_ctx = bio->bi_private;\n\n\treturn iostat_ctx->post_read_ctx;\n}\n\nextern void iostat_update_and_unbind_ctx(struct bio *bio);\nextern void iostat_alloc_and_bind_ctx(struct f2fs_sb_info *sbi,\n\t\tstruct bio *bio, struct bio_post_read_ctx *ctx);\nextern int f2fs_init_iostat_processing(void);\nextern void f2fs_destroy_iostat_processing(void);\nextern int f2fs_init_iostat(struct f2fs_sb_info *sbi);\nextern void f2fs_destroy_iostat(struct f2fs_sb_info *sbi);\n#else\nstatic inline void f2fs_update_iostat(struct f2fs_sb_info *sbi, struct inode *inode,\n\t\tenum iostat_type type, unsigned long long io_bytes) {}\nstatic inline void iostat_update_and_unbind_ctx(struct bio *bio) {}\nstatic inline void iostat_alloc_and_bind_ctx(struct f2fs_sb_info *sbi,\n\t\tstruct bio *bio, struct bio_post_read_ctx *ctx) {}\nstatic inline void iostat_update_submit_ctx(struct bio *bio,\n\t\tenum page_type type) {}\nstatic inline struct bio_post_read_ctx *get_post_read_ctx(struct bio *bio)\n{\n\treturn bio->bi_private;\n}\nstatic inline int f2fs_init_iostat_processing(void) { return 0; }\nstatic inline void f2fs_destroy_iostat_processing(void) {}\nstatic inline int f2fs_init_iostat(struct f2fs_sb_info *sbi) { return 0; }\nstatic inline void f2fs_destroy_iostat(struct f2fs_sb_info *sbi) {}\n#endif\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}