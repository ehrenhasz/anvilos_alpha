{
  "module_name": "mp_usbd.h",
  "hash_id": "dce92fdf71434ca17227f3a637679681c6e61dfb7c8bd3b5560e8b17affd6d90",
  "original_prompt": "Ingested from sys_09_Anvil/source/shared/tinyusb/mp_usbd.h",
  "human_readable_source": " \n\n#ifndef MICROPY_INCLUDED_SHARED_TINYUSB_MP_USBD_H\n#define MICROPY_INCLUDED_SHARED_TINYUSB_MP_USBD_H\n\n#include \"py/mpconfig.h\"\n\n#if MICROPY_HW_ENABLE_USBDEV\n\n#include \"py/obj.h\"\n#include \"py/objarray.h\"\n#include \"py/runtime.h\"\n\n#ifndef NO_QSTR\n#include \"tusb.h\"\n#include \"device/dcd.h\"\n#endif\n\n\nvoid mp_usbd_task(void);\n\n\nvoid mp_usbd_schedule_task(void);\n\n\n\nextern void mp_usbd_port_get_serial_number(char *buf);\n\n\n\n\nvoid mp_usbd_hex_str(char *out_str, const uint8_t *bytes, size_t bytes_len);\n\n\n#define MP_USBD_BUILTIN_DESC_CFG_LEN (TUD_CONFIG_DESC_LEN +                     \\\n    (CFG_TUD_CDC ? (TUD_CDC_DESC_LEN) : 0) +  \\\n    (CFG_TUD_MSC ? (TUD_MSC_DESC_LEN) : 0)    \\\n    )\n\n\nextern const tusb_desc_device_t mp_usbd_builtin_desc_dev;\nextern const uint8_t mp_usbd_builtin_desc_cfg[MP_USBD_BUILTIN_DESC_CFG_LEN];\n\nvoid mp_usbd_task_callback(mp_sched_node_t *node);\n\n#if MICROPY_HW_ENABLE_USB_RUNTIME_DEVICE\nvoid mp_usbd_deinit(void);\nvoid mp_usbd_init(void);\n\nconst char *mp_usbd_runtime_string_cb(uint8_t index);\n\n\n#define MP_USBD_MAX_PEND_EXCS 2\n\ntypedef struct {\n    mp_obj_base_t base;\n\n    mp_obj_t desc_dev; \n    mp_obj_t desc_cfg; \n    mp_obj_t desc_strs; \n\n    \n    mp_obj_t open_itf_cb;\n    mp_obj_t reset_cb;\n    mp_obj_t control_xfer_cb;\n    mp_obj_t xfer_cb;\n\n    mp_obj_t builtin_driver; \n\n    bool active; \n    bool trigger; \n\n    \n    \n    mp_obj_t xfer_data[CFG_TUD_ENDPPOINT_MAX][2];\n\n    \n    \n    \n    \n    mp_obj_array_t *control_data;\n\n    \n    \n    mp_uint_t num_pend_excs;\n    mp_obj_t pend_excs[MP_USBD_MAX_PEND_EXCS];\n} mp_obj_usb_device_t;\n\n\n\n\nextern const mp_obj_type_t mp_type_usb_device_builtin_default;\nextern const mp_obj_type_t mp_type_usb_device_builtin_none;\n\n\ninline static bool mp_usb_device_builtin_enabled(const mp_obj_usb_device_t *usbd) {\n    return usbd->builtin_driver != MP_OBJ_FROM_PTR(&mp_type_usb_device_builtin_none);\n}\n\n#else \n\nstatic inline void mp_usbd_init(void) {\n    \n    extern bool tusb_init(void);\n    tusb_init();\n}\n\n#endif\n\n#endif \n\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}