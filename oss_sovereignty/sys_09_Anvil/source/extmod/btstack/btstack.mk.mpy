{
  "module_name": "btstack.mk",
  "hash_id": "40405262921d63c23449a09d692d02885b78f3288b7e2b8bbf5a6d798374481b",
  "original_prompt": "Ingested from sys_09_Anvil/source/extmod/btstack/btstack.mk",
  "human_readable_source": "# Makefile directives for BlueKitchen BTstack\n\nifeq ($(MICROPY_BLUETOOTH_BTSTACK),1)\n\nGIT_SUBMODULES += lib/btstack\n\nMICROPY_BLUETOOTH_BTSTACK_USB ?= 0\nMICROPY_BLUETOOTH_BTSTACK_H4 ?= 1\nMICROPY_BLUETOOTH_BTSTACK_CONFIG_FILE ?= '\"extmod/btstack/btstack_config_common.h\"'\n\nBTSTACK_EXTMOD_DIR = extmod/btstack\n\nSRC_EXTMOD_C += $(BTSTACK_EXTMOD_DIR)/modbluetooth_btstack.c\n\nINC += -I$(TOP)/$(BTSTACK_EXTMOD_DIR)\n\nCFLAGS_EXTMOD += -DMICROPY_BLUETOOTH_BTSTACK=1\nCFLAGS_EXTMOD += -DMICROPY_BLUETOOTH_BTSTACK_CONFIG_FILE=$(MICROPY_BLUETOOTH_BTSTACK_CONFIG_FILE)\nCFLAGS_EXTMOD += -DMICROPY_PY_BLUETOOTH_USE_SYNC_EVENTS=1\nCFLAGS_EXTMOD += -DMICROPY_PY_BLUETOOTH_ENABLE_PAIRING_BONDING=1\n\nBTSTACK_DIR = $(TOP)/lib/btstack\n\nifneq ($(wildcard $(BTSTACK_DIR)/src),)\n\ninclude $(BTSTACK_DIR)/src/Makefile.inc\ninclude $(BTSTACK_DIR)/src/ble/Makefile.inc\n\nINC += -I$(BTSTACK_DIR)/src\nINC += -I$(BTSTACK_DIR)/3rd-party/bluedroid/decoder/include\nINC += -I$(BTSTACK_DIR)/3rd-party/bluedroid/encoder/include\nINC += -I$(BTSTACK_DIR)/3rd-party/md5\nINC += -I$(BTSTACK_DIR)/3rd-party/yxml\n\nSRC_BTSTACK_C = \\\n\t$(addprefix lib/btstack/src/, $(SRC_FILES)) \\\n\t$(addprefix lib/btstack/src/ble/, $(filter-out %_tlv.c, $(SRC_BLE_FILES))) \\\n\tlib/btstack/platform/embedded/hci_dump_embedded_stdout.c \\\n\nifeq ($(MICROPY_BLUETOOTH_BTSTACK_USB),1)\nifeq ($(MICROPY_BLUETOOTH_BTSTACK_H4),1)\n\t$(error Cannot enable both MICROPY_BLUETOOTH_BTSTACK_USB and MICROPY_BLUETOOTH_BTSTACK_H4)\nendif\nendif\n\nifneq ($(MICROPY_BLUETOOTH_BTSTACK_USB),1)\nifneq ($(MICROPY_BLUETOOTH_BTSTACK_H4),1)\n\t$(error Must enable one of MICROPY_BLUETOOTH_BTSTACK_USB or MICROPY_BLUETOOTH_BTSTACK_H4)\nendif\nendif\n\nifeq ($(MICROPY_BLUETOOTH_BTSTACK_USB),1)\nSRC_BTSTACK_C += \\\n\tlib/btstack/platform/libusb/hci_transport_h2_libusb.c\n\nCFLAGS_EXTMOD += -DMICROPY_BLUETOOTH_BTSTACK_USB=1\n\nCFLAGS_THIRDPARTY += $(shell pkg-config libusb-1.0 --cflags)\nLDFLAGS_THIRDPARTY += $(shell pkg-config libusb-1.0 --libs)\nendif\n\nifeq ($(MICROPY_BLUETOOTH_BTSTACK_H4),1)\nSRC_BTSTACK_C += \\\n\tlib/btstack/src/hci_transport_h4.c \\\n\tlib/btstack/chipset/zephyr/btstack_chipset_zephyr.c\n\nSRC_BTSTACK_C += \\\n\textmod/btstack/btstack_hci_uart.c \\\n\nCFLAGS_EXTMOD += -DMICROPY_BLUETOOTH_BTSTACK_H4=1\nendif\n\nifeq ($(MICROPY_BLUETOOTH_BTSTACK_ENABLE_CLASSIC),1)\ninclude $(BTSTACK_DIR)/src/classic/Makefile.inc\nSRC_BTSTACK_C += \\\n\t$(addprefix lib/btstack/src/classic/, $(SRC_CLASSIC_FILES))\nendif\n\nSRC_THIRDPARTY_C += $(SRC_BTSTACK_C)\n\n# Suppress some warnings.\nBTSTACK_WARNING_CFLAGS = -Wno-old-style-definition -Wno-unused-variable -Wno-unused-parameter -Wno-implicit-fallthrough\nifneq ($(CC),clang)\nBTSTACK_WARNING_CFLAGS += -Wno-format\nendif\n$(BUILD)/lib/btstack/src/%.o: CFLAGS += $(BTSTACK_WARNING_CFLAGS)\n$(BUILD)/lib/btstack/platform/%.o: CFLAGS += $(BTSTACK_WARNING_CFLAGS)\n\nendif\nendif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}