{
  "module_name": "libmetal.mk",
  "hash_id": "3df1057afad282c16a6251b3812c5c1386086a37710e53168f410d8cbe9c9e31",
  "original_prompt": "Ingested from sys_09_Anvil/source/extmod/libmetal/libmetal.mk",
  "human_readable_source": "# Makefile directives for libmetal\n\n# libmetal is intended to run through a pre-processor (as part of its CMake-based build system).\n# This replicates the basic functionality of the pre-processor, including adding a \"micropython\"\n# platform that is almost identical to the built-in \"generic\" platform with a few small changes\n# provided by the files in extmod/libmetal.\n$(BUILD)/openamp: $(BUILD)\n\t$(MKDIR) -p $@\n\n$(BUILD)/openamp/metal: $(BUILD)/openamp\n\t$(MKDIR) -p $@\n\n$(BUILD)/openamp/metal/config.h: $(BUILD)/openamp/metal $(TOP)/$(LIBMETAL_DIR)/lib/config.h\n\t@$(ECHO) \"GEN $@\"\n\t@for file in $(TOP)/$(LIBMETAL_DIR)/lib/*.c $(TOP)/$(LIBMETAL_DIR)/lib/*.h; do $(SED) -e \"s/@PROJECT_SYSTEM@/micropython/g\" -e \"s/@PROJECT_PROCESSOR@/arm/g\" $$file > $(BUILD)/openamp/metal/$$(basename $$file); done\n\t$(MKDIR) -p $(BUILD)/openamp/metal/processor/arm\n\t@$(CP) $(TOP)/$(LIBMETAL_DIR)/lib/processor/arm/*.h $(BUILD)/openamp/metal/processor/arm\n\t$(MKDIR) -p $(BUILD)/openamp/metal/compiler/gcc\n\t@$(CP) $(TOP)/$(LIBMETAL_DIR)/lib/compiler/gcc/*.h $(BUILD)/openamp/metal/compiler/gcc\n\t$(MKDIR) -p $(BUILD)/openamp/metal/system/micropython\n\t@$(CP) $(TOP)/$(LIBMETAL_DIR)/lib/system/generic/*.c $(TOP)/$(LIBMETAL_DIR)/lib/system/generic/*.h $(BUILD)/openamp/metal/system/micropython\n\t@$(CP) $(TOP)/extmod/libmetal/metal/system/micropython/* $(BUILD)/openamp/metal/system/micropython\n\t@$(CP) $(TOP)/extmod/libmetal/metal/config.h $(BUILD)/openamp/metal/config.h\n\n# libmetal's source files.\nSRC_LIBMETAL_C := $(addprefix $(BUILD)/openamp/metal/,\\\n\tdevice.c \\\n\tdma.c \\\n\tinit.c \\\n\tio.c \\\n\tirq.c \\\n\tlog.c \\\n\tshmem.c \\\n\tsoftirq.c \\\n\tversion.c \\\n\tdevice.c \\\n\tsystem/micropython/condition.c \\\n\tsystem/micropython/device.c \\\n\tsystem/micropython/io.c \\\n\tsystem/micropython/irq.c \\\n\tsystem/micropython/shmem.c \\\n\tsystem/micropython/time.c \\\n\t)\n\n# These files are generated by the rule above (along with config.h), so we need to make the .c\n# files depend on that step -- can't use the .o files as the target because the .c files don't\n# exist yet.\n$(SRC_LIBMETAL_C): $(BUILD)/openamp/metal/config.h\n\n# Qstr processing will include the generated libmetal headers, so add them as a qstr requirement.\nQSTR_GLOBAL_REQUIREMENTS += $(BUILD)/openamp/metal/config.h\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}