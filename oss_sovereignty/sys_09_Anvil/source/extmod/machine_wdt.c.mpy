{
  "module_name": "machine_wdt.c",
  "hash_id": "d1d7ce3a374f61d2d31f2e1bc6e81907ea0e97943457eb3118ea256fc67c84ec",
  "original_prompt": "Ingested from sys_09_Anvil/source/extmod/machine_wdt.c",
  "human_readable_source": " \n\n#include \"py/runtime.h\"\n\n#if MICROPY_PY_MACHINE_WDT\n\n#include \"extmod/modmachine.h\"\n\n\nstatic machine_wdt_obj_t *mp_machine_wdt_make_new_instance(mp_int_t id, mp_int_t timeout_ms);\nstatic void mp_machine_wdt_feed(machine_wdt_obj_t *self);\n#if MICROPY_PY_MACHINE_WDT_TIMEOUT_MS\nstatic void mp_machine_wdt_timeout_ms_set(machine_wdt_obj_t *self_in, mp_int_t timeout_ms);\n#endif\n\n\n#include MICROPY_PY_MACHINE_WDT_INCLUDEFILE\n\nstatic mp_obj_t machine_wdt_make_new(const mp_obj_type_t *type, size_t n_args, size_t n_kw, const mp_obj_t *all_args) {\n    enum { ARG_id, ARG_timeout };\n    static const mp_arg_t allowed_args[] = {\n        { MP_QSTR_id, MP_ARG_INT, {.u_int = 0} },\n        { MP_QSTR_timeout, MP_ARG_INT, {.u_int = 5000} },\n    };\n\n    \n    mp_arg_val_t args[MP_ARRAY_SIZE(allowed_args)];\n    mp_arg_parse_all_kw_array(n_args, n_kw, all_args, MP_ARRAY_SIZE(allowed_args), allowed_args, args);\n\n    \n    machine_wdt_obj_t *self = mp_machine_wdt_make_new_instance(args[ARG_id].u_int, args[ARG_timeout].u_int);\n\n    return MP_OBJ_FROM_PTR(self);\n}\n\n\nstatic mp_obj_t machine_wdt_feed(mp_obj_t self_in) {\n    machine_wdt_obj_t *self = MP_OBJ_TO_PTR(self_in);\n    mp_machine_wdt_feed(self);\n    return mp_const_none;\n}\nstatic MP_DEFINE_CONST_FUN_OBJ_1(machine_wdt_feed_obj, machine_wdt_feed);\n\n#if MICROPY_PY_MACHINE_WDT_TIMEOUT_MS\n\nstatic mp_obj_t machine_wdt_timeout_ms(mp_obj_t self_in, mp_obj_t timeout_in) {\n    machine_wdt_obj_t *self = MP_OBJ_TO_PTR(self_in);\n    mp_int_t timeout_ms = mp_obj_get_int(timeout_in);\n    mp_machine_wdt_timeout_ms_set(self, timeout_ms);\n    return mp_const_none;\n}\nstatic MP_DEFINE_CONST_FUN_OBJ_2(machine_wdt_timeout_ms_obj, machine_wdt_timeout_ms);\n#endif\n\nstatic const mp_rom_map_elem_t machine_wdt_locals_dict_table[] = {\n    { MP_ROM_QSTR(MP_QSTR_feed), MP_ROM_PTR(&machine_wdt_feed_obj) },\n    #if MICROPY_PY_MACHINE_WDT_TIMEOUT_MS\n    { MP_ROM_QSTR(MP_QSTR_timeout_ms), MP_ROM_PTR(&machine_wdt_timeout_ms_obj) },\n    #endif\n};\nstatic MP_DEFINE_CONST_DICT(machine_wdt_locals_dict, machine_wdt_locals_dict_table);\n\nMP_DEFINE_CONST_OBJ_TYPE(\n    machine_wdt_type,\n    MP_QSTR_WDT,\n    MP_TYPE_FLAG_NONE,\n    make_new, machine_wdt_make_new,\n    locals_dict, &machine_wdt_locals_dict\n    );\n\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}