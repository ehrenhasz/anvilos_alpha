{
  "module_name": "esp_hosted_internal.h",
  "hash_id": "33754e43c512d07257e2e06eb9b625c5c62b888ab24e2ffe7dc2d5eca4ac3209",
  "original_prompt": "Ingested from sys_09_Anvil/source/drivers/esp-hosted/esp_hosted_internal.h",
  "human_readable_source": " \n\n#ifndef MICROPY_INCLUDED_DRIVERS_ESP_HOSTED_INTERNAL_H\n#define MICROPY_INCLUDED_DRIVERS_ESP_HOSTED_INTERNAL_H\n\n#define ESP_FRAME_MAX_SIZE          (1600)\n#define ESP_FRAME_MAX_PAYLOAD       (ESP_FRAME_MAX_SIZE - sizeof(esp_header_t))\n#define ESP_FRAME_FLAGS_FRAGMENT    (1 << 0)\n\n#define ESP_STATE_NUM_ITFS          (2)\n#define ESP_STATE_BUF_SIZE          (ESP_FRAME_MAX_SIZE * 2)\n#define ESP_STACK_CAPACITY          (32)\n#define ESP_SYNC_REQ_TIMEOUT        (5000)\n\n#define TLV_HEADER_TYPE_EP          (1)\n#define TLV_HEADER_TYPE_DATA        (2)\n#define TLV_HEADER_EP_RESP          \"ctrlResp\"\n#define TLV_HEADER_EP_EVENT         \"ctrlEvnt\"\n\ntypedef enum {\n    ESP_HOSTED_FLAGS_RESET          = (0 << 0),\n    ESP_HOSTED_FLAGS_INIT           = (1 << 0),\n    ESP_HOSTED_FLAGS_ACTIVE         = (1 << 1),\n    ESP_HOSTED_FLAGS_STATIC_IP      = (1 << 2),\n    ESP_HOSTED_FLAGS_AP_STARTED     = (1 << 3),\n    ESP_HOSTED_FLAGS_STA_CONNECTED  = (1 << 4),\n} esp_hosted_flags_t;\n\ntypedef enum {\n    ESP_PACKET_TYPE_EVENT,\n} esp_hosted_priv_packet_t;\n\ntypedef enum {\n    ESP_PRIV_EVENT_INIT,\n} esp_hosted_priv_event_t;\n\ntypedef struct esp_hosted_stack {\n    size_t capacity;\n    size_t top;\n    void *buff[ESP_STACK_CAPACITY];\n} esp_hosted_stack_t;\n\ntypedef struct esp_hosted_state {\n    uint8_t chip_id;\n    uint8_t spi_clk;\n    uint8_t chip_flags;\n    uint8_t flags;\n    uint16_t seq_num;\n    uint32_t last_hb_ms;\n    struct netif netif[ESP_STATE_NUM_ITFS];\n    struct dhcp dhcp_client;\n    dhcp_server_t dhcp_server;\n    esp_hosted_stack_t stack;\n    uint8_t buf[ESP_STATE_BUF_SIZE];\n} esp_hosted_state_t;\n\ntypedef struct __attribute__((packed)) {\n    uint8_t ep_type;\n    uint16_t ep_length;\n    uint8_t ep_value[8];\n    uint8_t data_type;\n    uint16_t data_length;\n    uint8_t data[];\n} tlv_header_t;\n\ntypedef struct __attribute__((packed)) {\n    uint8_t event_type;\n    uint8_t event_len;\n    uint8_t event_data[];\n} esp_event_t;\n\ntypedef struct __attribute__((packed)) {\n    uint8_t if_type    : 4;\n    uint8_t if_num     : 4;\n    uint8_t flags;\n    uint16_t len;\n    uint16_t offset;\n    uint16_t checksum;\n    uint16_t seq_num;\n    uint8_t reserved2;\n    union {\n        uint8_t hci_pkt_type;\n        uint8_t priv_pkt_type;\n    };\n    uint8_t payload[];\n} esp_header_t;\n\nuint16_t esp_hosted_checksum(esp_header_t *esp_header);\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}