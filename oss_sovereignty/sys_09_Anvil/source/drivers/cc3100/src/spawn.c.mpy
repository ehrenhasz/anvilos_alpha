{
  "module_name": "spawn.c",
  "hash_id": "df86fc7d7d49f5eaf49662ce1f246ee00ac1083e19eda96af6351d98afda41f5",
  "original_prompt": "Ingested from sys_09_Anvil/source/drivers/cc3100/src/spawn.c",
  "human_readable_source": " \n\n\n\n \n \n \n#include \"simplelink.h\"\n\n\n#if (defined (SL_PLATFORM_MULTI_THREADED)) && (!defined (SL_PLATFORM_EXTERNAL_SPAWN))\n\n#define _SL_MAX_INTERNAL_SPAWN_ENTRIES      10\n\ntypedef struct _SlInternalSpawnEntry_t\n{\n\t_SlSpawnEntryFunc_t \t\t        pEntry;\n\tvoid* \t\t\t\t\t\t        pValue;\n    struct _SlInternalSpawnEntry_t*     pNext;\n}_SlInternalSpawnEntry_t;\n\ntypedef struct\n{\n\t_SlInternalSpawnEntry_t     SpawnEntries[_SL_MAX_INTERNAL_SPAWN_ENTRIES];\n    _SlInternalSpawnEntry_t*    pFree;\n    _SlInternalSpawnEntry_t*    pWaitForExe;\n    _SlInternalSpawnEntry_t*    pLastInWaitList;\n    _SlSyncObj_t                SyncObj;\n    _SlLockObj_t                LockObj;\n}_SlInternalSpawnCB_t;\n\n_SlInternalSpawnCB_t g_SlInternalSpawnCB;\n\n\nvoid _SlInternalSpawnTaskEntry() \n{\n    _i16                         i;\n    _SlInternalSpawnEntry_t*    pEntry;\n    _u8                         LastEntry;\n\n     \n    sl_LockObjCreate(&g_SlInternalSpawnCB.LockObj,\"SlSpawnProtect\");\n    sl_LockObjLock(&g_SlInternalSpawnCB.LockObj,SL_OS_NO_WAIT);\n\n     \n    sl_SyncObjCreate(&g_SlInternalSpawnCB.SyncObj,\"SlSpawnSync\");\n    sl_SyncObjWait(&g_SlInternalSpawnCB.SyncObj,SL_OS_NO_WAIT);\n\n    g_SlInternalSpawnCB.pFree = &g_SlInternalSpawnCB.SpawnEntries[0];\n    g_SlInternalSpawnCB.pWaitForExe = NULL;\n    g_SlInternalSpawnCB.pLastInWaitList = NULL;\n\n     \n    for (i=0 ; i<_SL_MAX_INTERNAL_SPAWN_ENTRIES - 1 ; i++)\n    {\n        g_SlInternalSpawnCB.SpawnEntries[i].pNext = &g_SlInternalSpawnCB.SpawnEntries[i+1];\n        g_SlInternalSpawnCB.SpawnEntries[i].pEntry = NULL;\n    }\n    g_SlInternalSpawnCB.SpawnEntries[i].pNext = NULL;\n\n    _SlDrvObjUnLock(&g_SlInternalSpawnCB.LockObj);\n\n     \n\n    while (TRUE)\n    {\n        sl_SyncObjWait(&g_SlInternalSpawnCB.SyncObj,SL_OS_WAIT_FOREVER);\n         \n        LastEntry = FALSE;\n        do\n        {\n             \n            _SlDrvObjLockWaitForever(&g_SlInternalSpawnCB.LockObj);\n\n            pEntry = g_SlInternalSpawnCB.pWaitForExe;\n            if ( NULL == pEntry )\n            {\n               _SlDrvObjUnLock(&g_SlInternalSpawnCB.LockObj);\n               break;\n            }\n            g_SlInternalSpawnCB.pWaitForExe = pEntry->pNext;\n            if (pEntry == g_SlInternalSpawnCB.pLastInWaitList)\n            {\n                g_SlInternalSpawnCB.pLastInWaitList = NULL;\n                LastEntry = TRUE;\n            }\n\n            _SlDrvObjUnLock(&g_SlInternalSpawnCB.LockObj);\n\n             \n            if (NULL != pEntry)\n            {\n                pEntry->pEntry(pEntry->pValue);\n                 \n\n                _SlDrvObjLockWaitForever(&g_SlInternalSpawnCB.LockObj);\n                \n                pEntry->pNext = g_SlInternalSpawnCB.pFree;\n                g_SlInternalSpawnCB.pFree = pEntry;\n\n\n                if (NULL != g_SlInternalSpawnCB.pWaitForExe)\n                {\n                     \n                    LastEntry = FALSE;\n                }\n\n                _SlDrvObjUnLock(&g_SlInternalSpawnCB.LockObj);\n\n            }\n\n        }while (!LastEntry);\n    }\n}\n\n\n_i16 _SlInternalSpawn(_SlSpawnEntryFunc_t pEntry , void* pValue , _u32 flags)\n{\n    _i16                         Res = 0;\n    _SlInternalSpawnEntry_t*    pSpawnEntry;\n\n    if (NULL == pEntry)\n    {\n        Res = -1;\n    }\n    else\n    {\n        _SlDrvObjLockWaitForever(&g_SlInternalSpawnCB.LockObj);\n\n        pSpawnEntry = g_SlInternalSpawnCB.pFree;\n        g_SlInternalSpawnCB.pFree = pSpawnEntry->pNext;\n\n        pSpawnEntry->pEntry = pEntry;\n        pSpawnEntry->pValue = pValue;\n        pSpawnEntry->pNext = NULL;\n\n        if (NULL == g_SlInternalSpawnCB.pWaitForExe)\n        {\n            g_SlInternalSpawnCB.pWaitForExe = pSpawnEntry;\n            g_SlInternalSpawnCB.pLastInWaitList = pSpawnEntry;\n        }\n        else\n        {\n            g_SlInternalSpawnCB.pLastInWaitList->pNext = pSpawnEntry;\n            g_SlInternalSpawnCB.pLastInWaitList = pSpawnEntry;\n        }\n\n        _SlDrvObjUnLock(&g_SlInternalSpawnCB.LockObj);\n        \n         \n        _SlDrvSyncObjSignal(&g_SlInternalSpawnCB.SyncObj);\n    }\n\n    return Res;\n}\n\n\n\n\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}