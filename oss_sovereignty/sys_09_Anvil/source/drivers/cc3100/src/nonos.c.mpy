{
  "module_name": "nonos.c",
  "hash_id": "dbf32e570ada82988577513d1c24689941aab81b4db44f832c1224bdf54d4471",
  "original_prompt": "Ingested from sys_09_Anvil/source/drivers/cc3100/src/nonos.c",
  "human_readable_source": " \n\n\n\n \n \n \n#include \"simplelink.h\"\n#include \"protocol.h\"\n#include \"driver.h\"\n\n#ifndef SL_PLATFORM_MULTI_THREADED\n\n#include \"nonos.h\"\n\n#ifndef SL_TINY_EXT\n#define NONOS_MAX_SPAWN_ENTRIES     5\n#else\n#define NONOS_MAX_SPAWN_ENTRIES     1\n#endif\n\n\ntypedef struct\n{\n    _SlSpawnEntryFunc_t \t\tpEntry;\n    void* \t\t\t\t\t\tpValue;\n}_SlNonOsSpawnEntry_t;\n\ntypedef struct\n{\n    _SlNonOsSpawnEntry_t\tSpawnEntries[NONOS_MAX_SPAWN_ENTRIES];\n}_SlNonOsCB_t;\n\n_SlNonOsCB_t g__SlNonOsCB;\n\n\n_SlNonOsRetVal_t _SlNonOsSemSet(_SlNonOsSemObj_t* pSemObj , _SlNonOsSemObj_t Value)\n{\n    *pSemObj = Value;\n    return NONOS_RET_OK;\n}\n\n_SlNonOsRetVal_t _SlNonOsSemGet(_SlNonOsSemObj_t* pSyncObj, _SlNonOsSemObj_t WaitValue, _SlNonOsSemObj_t SetValue, _SlNonOsTime_t Timeout)\n{\n#ifdef _SlSyncWaitLoopCallback\n    _SlNonOsTime_t timeOutRequest = Timeout; \n#endif\n    while (Timeout>0)\n    {\n        if (WaitValue == *pSyncObj)\n        {\n            *pSyncObj = SetValue;\n            break;\n        }\n        if (Timeout != NONOS_WAIT_FOREVER)\n        {\t\t\n            Timeout--;\n        }\n        _SlNonOsMainLoopTask();\n#ifdef _SlSyncWaitLoopCallback\n        if( (__NON_OS_SYNC_OBJ_SIGNAL_VALUE == WaitValue) && (timeOutRequest != NONOS_NO_WAIT) )\n        {\n            if (WaitValue == *pSyncObj)\n            {\n                *pSyncObj = SetValue;\n                break;\n            }\n            _SlSyncWaitLoopCallback();\n        }\n#endif\n    }\n\n    if (0 == Timeout)\n    {\n        return NONOS_RET_ERR;\n    }\n    else\n    {\n        return NONOS_RET_OK;\n    }\n}\n\n\n_SlNonOsRetVal_t _SlNonOsSpawn(_SlSpawnEntryFunc_t pEntry , void* pValue , _u32 flags)\n{\n\t _i8 i = 0;\n    \n#ifndef SL_TINY_EXT \t\n\tfor (i=0 ; i<NONOS_MAX_SPAWN_ENTRIES ; i++)\n#endif     \n\t{\n\t\t_SlNonOsSpawnEntry_t* pE = &g__SlNonOsCB.SpawnEntries[i];\n\t\n\t\tif (NULL == pE->pEntry)\n\t\t{\n\t\t\tpE->pValue = pValue;\n\t\t\tpE->pEntry = pEntry;\n#ifndef SL_TINY_EXT \t                        \n\t\t\tbreak;\n#endif                        \n\t\t}\n\t}\n        \n        \n        return NONOS_RET_OK;\n}\n\n\n_SlNonOsRetVal_t _SlNonOsMainLoopTask(void)\n{\n\t_i8 i=0;\n\n\n#ifndef SL_TINY_EXT\n\tfor (i=0 ; i<NONOS_MAX_SPAWN_ENTRIES ; i++)\n#endif\n\t{\n\t\t_SlNonOsSpawnEntry_t* pE = &g__SlNonOsCB.SpawnEntries[i];\n\t\t_SlSpawnEntryFunc_t \t\tpF = pE->pEntry;\n\t\t\n\t\tif (NULL != pF)\n\t\t{\n            if(RxIrqCnt != (g_pCB)->RxDoneCnt)\n            {\n                pF(0);  \n            }\n            \n\t\t\tpE->pEntry = NULL;\n\t\t\tpE->pValue = NULL;\n\t\t}\n\t}\n        \n        return NONOS_RET_OK;\n}\n\n    \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}