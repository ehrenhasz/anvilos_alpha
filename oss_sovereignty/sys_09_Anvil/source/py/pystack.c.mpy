{
  "module_name": "pystack.c",
  "hash_id": "2f40e2f85ea7a2b689bc6df416ad4bfdda010383d0ae73cfdd0e92b6ef90b97d",
  "original_prompt": "Ingested from sys_09_Anvil/source/py/pystack.c",
  "human_readable_source": " \n\n#include <stdio.h>\n\n#include \"py/runtime.h\"\n\n#if MICROPY_ENABLE_PYSTACK\n\nvoid mp_pystack_init(void *start, void *end) {\n    MP_STATE_THREAD(pystack_start) = start;\n    MP_STATE_THREAD(pystack_end) = end;\n    MP_STATE_THREAD(pystack_cur) = start;\n}\n\nvoid *mp_pystack_alloc(size_t n_bytes) {\n    n_bytes = (n_bytes + (MICROPY_PYSTACK_ALIGN - 1)) & ~(MICROPY_PYSTACK_ALIGN - 1);\n    #if MP_PYSTACK_DEBUG\n    n_bytes += MICROPY_PYSTACK_ALIGN;\n    #endif\n    if (MP_STATE_THREAD(pystack_cur) + n_bytes > MP_STATE_THREAD(pystack_end)) {\n        \n        mp_raise_type_arg(&mp_type_RuntimeError, MP_OBJ_NEW_QSTR(MP_QSTR_pystack_space_exhausted));\n    }\n    void *ptr = MP_STATE_THREAD(pystack_cur);\n    MP_STATE_THREAD(pystack_cur) += n_bytes;\n    #if MP_PYSTACK_DEBUG\n    *(size_t *)(MP_STATE_THREAD(pystack_cur) - MICROPY_PYSTACK_ALIGN) = n_bytes;\n    #endif\n    return ptr;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}