{
  "module_name": "stream.h",
  "hash_id": "5133fd0ef3f1279372864862bc3b8c09bb149d87975351175a3a19061b640b98",
  "original_prompt": "Ingested from sys_09_Anvil/source/py/stream.h",
  "human_readable_source": " \n#ifndef MICROPY_INCLUDED_PY_STREAM_H\n#define MICROPY_INCLUDED_PY_STREAM_H\n\n#include \"py/obj.h\"\n#include \"py/mperrno.h\"\n\n#define MP_STREAM_ERROR ((mp_uint_t)-1)\n\n\n#define MP_STREAM_FLUSH (1)\n#define MP_STREAM_SEEK  (2)\n#define MP_STREAM_POLL  (3)\n#define MP_STREAM_CLOSE         (4)\n#define MP_STREAM_TIMEOUT       (5)  \n#define MP_STREAM_GET_OPTS      (6)  \n#define MP_STREAM_SET_OPTS      (7)  \n#define MP_STREAM_GET_DATA_OPTS (8)  \n#define MP_STREAM_SET_DATA_OPTS (9)  \n#define MP_STREAM_GET_FILENO    (10) \n#define MP_STREAM_GET_BUFFER_SIZE (11) \n\n\n#define MP_STREAM_POLL_RD       (0x0001)\n#define MP_STREAM_POLL_WR       (0x0004)\n#define MP_STREAM_POLL_ERR      (0x0008)\n#define MP_STREAM_POLL_HUP      (0x0010)\n#define MP_STREAM_POLL_NVAL     (0x0020)\n\n\nstruct mp_stream_seek_t {\n    \n    \n    \n    mp_off_t offset;\n    int whence;\n};\n\n\n#define MP_SEEK_SET (0)\n#define MP_SEEK_CUR (1)\n#define MP_SEEK_END (2)\n\n\ntypedef struct _mp_stream_p_t {\n    \n    \n    mp_uint_t (*read)(mp_obj_t obj, void *buf, mp_uint_t size, int *errcode);\n    mp_uint_t (*write)(mp_obj_t obj, const void *buf, mp_uint_t size, int *errcode);\n    mp_uint_t (*ioctl)(mp_obj_t obj, mp_uint_t request, uintptr_t arg, int *errcode);\n    mp_uint_t is_text : 1; \n} mp_stream_p_t;\n\nMP_DECLARE_CONST_FUN_OBJ_VAR_BETWEEN(mp_stream_read_obj);\nMP_DECLARE_CONST_FUN_OBJ_VAR_BETWEEN(mp_stream_read1_obj);\nMP_DECLARE_CONST_FUN_OBJ_VAR_BETWEEN(mp_stream_readinto_obj);\nMP_DECLARE_CONST_FUN_OBJ_VAR_BETWEEN(mp_stream_unbuffered_readline_obj);\nMP_DECLARE_CONST_FUN_OBJ_1(mp_stream_unbuffered_readlines_obj);\nMP_DECLARE_CONST_FUN_OBJ_VAR_BETWEEN(mp_stream_write_obj);\nMP_DECLARE_CONST_FUN_OBJ_2(mp_stream_write1_obj);\nMP_DECLARE_CONST_FUN_OBJ_1(mp_stream_close_obj);\nMP_DECLARE_CONST_FUN_OBJ_VAR_BETWEEN(mp_stream___exit___obj);\nMP_DECLARE_CONST_FUN_OBJ_VAR_BETWEEN(mp_stream_seek_obj);\nMP_DECLARE_CONST_FUN_OBJ_1(mp_stream_tell_obj);\nMP_DECLARE_CONST_FUN_OBJ_1(mp_stream_flush_obj);\nMP_DECLARE_CONST_FUN_OBJ_VAR_BETWEEN(mp_stream_ioctl_obj);\n\n\n#define MP_STREAM_OP_READ (1)\n#define MP_STREAM_OP_WRITE (2)\n#define MP_STREAM_OP_IOCTL (4)\n\n\nstatic inline const mp_stream_p_t *mp_get_stream(mp_const_obj_t self) {\n    return (const mp_stream_p_t *)MP_OBJ_TYPE_GET_SLOT(((const mp_obj_base_t *)MP_OBJ_TO_PTR(self))->type, protocol);\n}\n\nconst mp_stream_p_t *mp_get_stream_raise(mp_obj_t self_in, int flags);\nmp_obj_t mp_stream_close(mp_obj_t stream);\n\n\nmp_obj_t mp_stream_unbuffered_iter(mp_obj_t self);\n\nmp_obj_t mp_stream_write(mp_obj_t self_in, const void *buf, size_t len, byte flags);\n\n\n#define MP_STREAM_RW_READ  0\n#define MP_STREAM_RW_WRITE 2\n#define MP_STREAM_RW_ONCE  1\nmp_uint_t mp_stream_rw(mp_obj_t stream, void *buf, mp_uint_t size, int *errcode, byte flags);\n#define mp_stream_write_exactly(stream, buf, size, err) mp_stream_rw(stream, (byte *)buf, size, err, MP_STREAM_RW_WRITE)\n#define mp_stream_read_exactly(stream, buf, size, err) mp_stream_rw(stream, buf, size, err, MP_STREAM_RW_READ)\nmp_off_t mp_stream_seek(mp_obj_t stream, mp_off_t offset, int whence, int *errcode);\n\nvoid mp_stream_write_adaptor(void *self, const char *buf, size_t len);\n\n#if MICROPY_STREAMS_POSIX_API\n#include <sys/types.h>\n\n\nssize_t mp_stream_posix_write(void *stream, const void *buf, size_t len);\nssize_t mp_stream_posix_read(void *stream, void *buf, size_t len);\noff_t mp_stream_posix_lseek(void *stream, off_t offset, int whence);\nint mp_stream_posix_fsync(void *stream);\n#endif\n\n#if MICROPY_STREAMS_NON_BLOCK\n#define mp_is_nonblocking_error(errno) ((errno) == MP_EAGAIN || (errno) == MP_EWOULDBLOCK)\n#else\n#define mp_is_nonblocking_error(errno) (0)\n#endif\n\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}