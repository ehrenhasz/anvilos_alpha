{
  "module_name": "objattrtuple.c",
  "hash_id": "c3173c3f4b76ccd4b8a236578aca28142aa5d757d7ecff186993ce64e6d68d09",
  "original_prompt": "Ingested from sys_09_Anvil/source/py/objattrtuple.c",
  "human_readable_source": " \n\n#include \"py/objtuple.h\"\n\n#if MICROPY_PY_ATTRTUPLE || MICROPY_PY_COLLECTIONS\n\n\n#if !MICROPY_PY_COLLECTIONS\nstatic\n#endif\nvoid mp_obj_attrtuple_print_helper(const mp_print_t *print, const qstr *fields, mp_obj_tuple_t *o) {\n    mp_print_str(print, \"(\");\n    for (size_t i = 0; i < o->len; i++) {\n        if (i > 0) {\n            mp_print_str(print, \", \");\n        }\n        mp_printf(print, \"%q=\", fields[i]);\n        mp_obj_print_helper(print, o->items[i], PRINT_REPR);\n    }\n    mp_print_str(print, \")\");\n}\n\n#endif\n\n#if MICROPY_PY_ATTRTUPLE\n\nstatic void mp_obj_attrtuple_print(const mp_print_t *print, mp_obj_t o_in, mp_print_kind_t kind) {\n    (void)kind;\n    mp_obj_tuple_t *o = MP_OBJ_TO_PTR(o_in);\n    const qstr *fields = (const qstr *)MP_OBJ_TO_PTR(o->items[o->len]);\n    mp_obj_attrtuple_print_helper(print, fields, o);\n}\n\nstatic void mp_obj_attrtuple_attr(mp_obj_t self_in, qstr attr, mp_obj_t *dest) {\n    if (dest[0] == MP_OBJ_NULL) {\n        \n        mp_obj_tuple_t *self = MP_OBJ_TO_PTR(self_in);\n        size_t len = self->len;\n        const qstr *fields = (const qstr *)MP_OBJ_TO_PTR(self->items[len]);\n        for (size_t i = 0; i < len; i++) {\n            if (fields[i] == attr) {\n                dest[0] = self->items[i];\n                return;\n            }\n        }\n    }\n}\n\nmp_obj_t mp_obj_new_attrtuple(const qstr *fields, size_t n, const mp_obj_t *items) {\n    mp_obj_tuple_t *o = mp_obj_malloc_var(mp_obj_tuple_t, items, mp_obj_t, n + 1, &mp_type_attrtuple);\n    o->len = n;\n    for (size_t i = 0; i < n; i++) {\n        o->items[i] = items[i];\n    }\n    o->items[n] = MP_OBJ_FROM_PTR(fields);\n    return MP_OBJ_FROM_PTR(o);\n}\n\nMP_DEFINE_CONST_OBJ_TYPE(\n    mp_type_attrtuple,\n    MP_QSTR_tuple,\n    MP_TYPE_FLAG_ITER_IS_GETITER,\n    \n    print, mp_obj_attrtuple_print,\n    unary_op, mp_obj_tuple_unary_op,\n    binary_op, mp_obj_tuple_binary_op,\n    attr, mp_obj_attrtuple_attr,\n    subscr, mp_obj_tuple_subscr,\n    iter, mp_obj_tuple_getiter\n    );\n\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}