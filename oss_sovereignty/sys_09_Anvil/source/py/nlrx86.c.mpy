{
  "module_name": "nlrx86.c",
  "hash_id": "7d08fac72e3eb85fe265ca0082dce1bd583d85e21a171177cf9e416c13559752",
  "original_prompt": "Ingested from sys_09_Anvil/source/py/nlrx86.c",
  "human_readable_source": " \n\n#include \"py/mpstate.h\"\n\n#if MICROPY_NLR_X86\n\n#undef nlr_push\n\n\n\n\n#if MICROPY_NLR_OS_WINDOWS\nunsigned int nlr_push_tail(nlr_buf_t *nlr) asm (\"nlr_push_tail\");\n#else\n__attribute__((used)) unsigned int nlr_push_tail(nlr_buf_t *nlr);\n#endif\n\n#if !defined(__clang__) && defined(__GNUC__) && __GNUC__ >= 8\n\n#define USE_NAKED (1)\n#define UNDO_PRELUDE (0)\n#elif defined(__ZEPHYR__) || defined(__ANDROID__)\n\n#define USE_NAKED (0)\n#define UNDO_PRELUDE (0)\n#else\n#define USE_NAKED (0)\n#define UNDO_PRELUDE (1)\n#endif\n\n#if USE_NAKED\n__attribute__((naked))\n#endif\nunsigned int nlr_push(nlr_buf_t *nlr) {\n    (void)nlr;\n\n    __asm volatile (\n        #if UNDO_PRELUDE\n        \"pop    %ebp                \\n\" \n        #endif\n        \"mov    4(%esp), %edx       \\n\" \n        \"mov    (%esp), %eax        \\n\" \n        \"mov    %eax, 8(%edx)       \\n\" \n        \"mov    %ebp, 12(%edx)      \\n\" \n        \"mov    %esp, 16(%edx)      \\n\" \n        \"mov    %ebx, 20(%edx)      \\n\" \n        \"mov    %edi, 24(%edx)      \\n\" \n        \"mov    %esi, 28(%edx)      \\n\" \n        \"jmp    nlr_push_tail       \\n\" \n        );\n\n    #if !USE_NAKED\n    return 0; \n    #endif\n}\n\nNORETURN void nlr_jump(void *val) {\n    MP_NLR_JUMP_HEAD(val, top)\n\n    __asm volatile (\n        \"mov    %0, %%edx           \\n\" \n        \"mov    28(%%edx), %%esi    \\n\" \n        \"mov    24(%%edx), %%edi    \\n\" \n        \"mov    20(%%edx), %%ebx    \\n\" \n        \"mov    16(%%edx), %%esp    \\n\" \n        \"mov    12(%%edx), %%ebp    \\n\" \n        \"mov    8(%%edx), %%eax     \\n\" \n        \"mov    %%eax, (%%esp)      \\n\" \n        \"xor    %%eax, %%eax        \\n\" \n        \"inc    %%al                \\n\" \n        \"ret                        \\n\" \n        :                           \n        : \"r\" (top)                 \n        : \"memory\"                  \n        );\n\n    MP_UNREACHABLE\n}\n\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}