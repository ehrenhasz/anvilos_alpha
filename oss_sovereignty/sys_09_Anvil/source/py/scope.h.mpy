{
  "module_name": "scope.h",
  "hash_id": "5cbb8a7bc41cc51cf1e941ce229205c7549bb833bec602197e2d8e872ff4712b",
  "original_prompt": "Ingested from sys_09_Anvil/source/py/scope.h",
  "human_readable_source": " \n#ifndef MICROPY_INCLUDED_PY_SCOPE_H\n#define MICROPY_INCLUDED_PY_SCOPE_H\n\n#include \"py/parse.h\"\n#include \"py/emitglue.h\"\n\ntypedef enum {\n    ID_INFO_KIND_UNDECIDED,\n    ID_INFO_KIND_GLOBAL_IMPLICIT,\n    ID_INFO_KIND_GLOBAL_IMPLICIT_ASSIGNED,\n    ID_INFO_KIND_GLOBAL_EXPLICIT,\n    ID_INFO_KIND_LOCAL, \n    ID_INFO_KIND_CELL,  \n    ID_INFO_KIND_FREE,  \n} id_info_kind_t;\n\nenum {\n    ID_FLAG_IS_PARAM = 0x01,\n    ID_FLAG_IS_STAR_PARAM = 0x02,\n    ID_FLAG_IS_DBL_STAR_PARAM = 0x04,\n    ID_FLAG_VIPER_TYPE_POS = 4,\n};\n\ntypedef struct _id_info_t {\n    uint8_t kind;\n    uint8_t flags;\n    \n    \n    uint16_t local_num;\n    qstr qst;\n} id_info_t;\n\n#define SCOPE_IS_FUNC_LIKE(s) ((s) >= SCOPE_LAMBDA)\n#define SCOPE_IS_COMP_LIKE(s) (SCOPE_LIST_COMP <= (s) && (s) <= SCOPE_GEN_EXPR)\n\n\ntypedef enum {\n    SCOPE_MODULE,\n    SCOPE_CLASS,\n    SCOPE_LAMBDA,\n    SCOPE_LIST_COMP,\n    SCOPE_DICT_COMP,\n    SCOPE_SET_COMP,\n    SCOPE_GEN_EXPR,\n    SCOPE_FUNCTION,\n} scope_kind_t;\n\ntypedef struct _scope_t {\n    scope_kind_t kind;\n    struct _scope_t *parent;\n    struct _scope_t *next;\n    mp_parse_node_t pn;\n    mp_raw_code_t *raw_code;\n    #if MICROPY_DEBUG_PRINTERS\n    size_t raw_code_data_len; \n    #endif\n    uint16_t simple_name; \n    uint16_t scope_flags;  \n    uint16_t emit_options; \n    uint16_t num_pos_args;\n    uint16_t num_kwonly_args;\n    uint16_t num_def_pos_args;\n    uint16_t num_locals;\n    uint16_t stack_size;     \n    uint16_t exc_stack_size; \n    uint16_t id_info_alloc;\n    uint16_t id_info_len;\n    id_info_t *id_info;\n} scope_t;\n\nscope_t *scope_new(scope_kind_t kind, mp_parse_node_t pn, mp_uint_t emit_options);\nvoid scope_free(scope_t *scope);\nid_info_t *scope_find_or_add_id(scope_t *scope, qstr qstr, id_info_kind_t kind);\nid_info_t *scope_find(scope_t *scope, qstr qstr);\nid_info_t *scope_find_global(scope_t *scope, qstr qstr);\nvoid scope_check_to_close_over(scope_t *scope, id_info_t *id);\n\n#endif \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}