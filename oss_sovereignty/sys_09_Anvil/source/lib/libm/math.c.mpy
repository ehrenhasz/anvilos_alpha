{
  "module_name": "math.c",
  "hash_id": "016c8cfda7ecb21f7ef4e40448d543f82b41e5dedab9d6e78f0021ff7832a4b7",
  "original_prompt": "Ingested from sys_09_Anvil/source/lib/libm/math.c",
  "human_readable_source": " \n\n#include \"libm.h\"\n\ntypedef float float_t;\ntypedef union {\n    float f;\n    struct {\n        uint32_t m : 23;\n        uint32_t e : 8;\n        uint32_t s : 1;\n    };\n} float_s_t;\n\nint __signbitf(float f) {\n    float_s_t u = {.f = f};\n    return u.s;\n}\n\n#ifndef NDEBUG\nfloat copysignf(float x, float y) {\n    float_s_t fx={.f = x};\n    float_s_t fy={.f = y};\n\n    \n    fx.s = fy.s;\n\n    return fx.f;\n}\n#endif\n\nstatic const float _M_LN10 = 2.30258509299404f; \nfloat log10f(float x) { return logf(x) / (float)_M_LN10; }\n\nfloat tanhf(float x) {\n    int sign = 0;\n    if (x < 0) {\n        sign = 1;\n        x = -x;\n    }\n    x = expm1f(-2 * x);\n    x = x / (x + 2);\n    return sign ? x : -x;\n}\n\n \n \n\n \n \n\nint __fpclassifyf(float x)\n{\n\tunion {float f; uint32_t i;} u = {x};\n\tint e = u.i>>23 & 0xff;\n\tif (!e) return u.i<<1 ? FP_SUBNORMAL : FP_ZERO;\n\tif (e==0xff) return u.i<<9 ? FP_NAN : FP_INFINITE;\n\treturn FP_NORMAL;\n}\n\n \n \n\n \n \n\nfloat scalbnf(float x, int n)\n{\n\tunion {float f; uint32_t i;} u;\n\tfloat_t y = x;\n\n\tif (n > 127) {\n\t\ty *= 0x1p127f;\n\t\tn -= 127;\n\t\tif (n > 127) {\n\t\t\ty *= 0x1p127f;\n\t\t\tn -= 127;\n\t\t\tif (n > 127)\n\t\t\t\tn = 127;\n\t\t}\n\t} else if (n < -126) {\n\t\ty *= 0x1p-126f;\n\t\tn += 126;\n\t\tif (n < -126) {\n\t\t\ty *= 0x1p-126f;\n\t\t\tn += 126;\n\t\t\tif (n < -126)\n\t\t\t\tn = -126;\n\t\t}\n\t}\n\tu.i = (uint32_t)(0x7f+n)<<23;\n\tx = y * u.f;\n\treturn x;\n}\n\n \n \n\n \n \n\n \n \n \n\nstatic const float\nbp[]   = {1.0f, 1.5f,},\ndp_h[] = { 0.0f, 5.84960938e-01f,},  \ndp_l[] = { 0.0f, 1.56322085e-06f,},  \ntwo24  =  16777216.0f,   \nhuge   =  1.0e30f,\ntiny   =  1.0e-30f,\n \nL1 =  6.0000002384e-01f,  \nL2 =  4.2857143283e-01f,  \nL3 =  3.3333334327e-01f,  \nL4 =  2.7272811532e-01f,  \nL5 =  2.3066075146e-01f,  \nL6 =  2.0697501302e-01f,  \nP1 =  1.6666667163e-01f,  \nP2 = -2.7777778450e-03f,  \nP3 =  6.6137559770e-05f,  \nP4 = -1.6533901999e-06f,  \nP5 =  4.1381369442e-08f,  \nlg2     =  6.9314718246e-01f,  \nlg2_h   =  6.93145752e-01f,    \nlg2_l   =  1.42860654e-06f,    \novt     =  4.2995665694e-08f,  \ncp      =  9.6179670095e-01f,  \ncp_h    =  9.6191406250e-01f,  \ncp_l    = -1.1736857402e-04f,  \nivln2   =  1.4426950216e+00f,  \nivln2_h =  1.4426879883e+00f,  \nivln2_l =  7.0526075433e-06f;  \n\nfloat powf(float x, float y)\n{\n\tfloat z,ax,z_h,z_l,p_h,p_l;\n\tfloat y1,t1,t2,r,s,sn,t,u,v,w;\n\tint32_t i,j,k,yisint,n;\n\tint32_t hx,hy,ix,iy,is;\n\n\tGET_FLOAT_WORD(hx, x);\n\tGET_FLOAT_WORD(hy, y);\n\tix = hx & 0x7fffffff;\n\tiy = hy & 0x7fffffff;\n\n\t \n\tif (iy == 0)\n\t\treturn 1.0f;\n\t \n\tif (hx == 0x3f800000)\n\t\treturn 1.0f;\n\t \n\tif (ix > 0x7f800000 || iy > 0x7f800000)\n\t\treturn x + y;\n\n\t \n\tyisint  = 0;\n\tif (hx < 0) {\n\t\tif (iy >= 0x4b800000)\n\t\t\tyisint = 2;  \n\t\telse if (iy >= 0x3f800000) {\n\t\t\tk = (iy>>23) - 0x7f;          \n\t\t\tj = iy>>(23-k);\n\t\t\tif ((j<<(23-k)) == iy)\n\t\t\t\tyisint = 2 - (j & 1);\n\t\t}\n\t}\n\n\t \n\tif (iy == 0x7f800000) {   \n\t\tif (ix == 0x3f800000)       \n\t\t\treturn 1.0f;\n\t\telse if (ix > 0x3f800000)   \n\t\t\treturn hy >= 0 ? y : 0.0f;\n\t\telse if (ix != 0)           \n\t\t\treturn hy >= 0 ? 0.0f: -y;\n\t}\n\tif (iy == 0x3f800000)     \n\t\treturn hy >= 0 ? x : 1.0f/x;\n\tif (hy == 0x40000000)     \n\t\treturn x*x;\n\tif (hy == 0x3f000000) {   \n\t\tif (hx >= 0)      \n\t\t\treturn sqrtf(x);\n\t}\n\n\tax = fabsf(x);\n\t \n\tif (ix == 0x7f800000 || ix == 0 || ix == 0x3f800000) {  \n\t\tz = ax;\n\t\tif (hy < 0)   \n\t\t\tz = 1.0f/z;\n\t\tif (hx < 0) {\n\t\t\tif (((ix-0x3f800000)|yisint) == 0) {\n\t\t\t\tz = (z-z)/(z-z);  \n\t\t\t} else if (yisint == 1)\n\t\t\t\tz = -z;           \n\t\t}\n\t\treturn z;\n\t}\n\n\tsn = 1.0f;  \n\tif (hx < 0) {\n\t\tif (yisint == 0)  \n\t\t\treturn (x-x)/(x-x);\n\t\tif (yisint == 1)  \n\t\t\tsn = -1.0f;\n\t}\n\n\t \n\tif (iy > 0x4d000000) {  \n\t\t \n\t\tif (ix < 0x3f7ffff8)\n\t\t\treturn hy < 0 ? sn*huge*huge : sn*tiny*tiny;\n\t\tif (ix > 0x3f800007)\n\t\t\treturn hy > 0 ? sn*huge*huge : sn*tiny*tiny;\n\t\t \n\t\tt = ax - 1;      \n\t\tw = (t*t)*(0.5f - t*(0.333333333333f - t*0.25f));\n\t\tu = ivln2_h*t;   \n\t\tv = t*ivln2_l - w*ivln2;\n\t\tt1 = u + v;\n\t\tGET_FLOAT_WORD(is, t1);\n\t\tSET_FLOAT_WORD(t1, is & 0xfffff000);\n\t\tt2 = v - (t1-u);\n\t} else {\n\t\tfloat s2,s_h,s_l,t_h,t_l;\n\t\tn = 0;\n\t\t \n\t\tif (ix < 0x00800000) {\n\t\t\tax *= two24;\n\t\t\tn -= 24;\n\t\t\tGET_FLOAT_WORD(ix, ax);\n\t\t}\n\t\tn += ((ix)>>23) - 0x7f;\n\t\tj = ix & 0x007fffff;\n\t\t \n\t\tix = j | 0x3f800000;      \n\t\tif (j <= 0x1cc471)        \n\t\t\tk = 0;\n\t\telse if (j < 0x5db3d7)    \n\t\t\tk = 1;\n\t\telse {\n\t\t\tk = 0;\n\t\t\tn += 1;\n\t\t\tix -= 0x00800000;\n\t\t}\n\t\tSET_FLOAT_WORD(ax, ix);\n\n\t\t \n\t\tu = ax - bp[k];    \n\t\tv = 1.0f/(ax+bp[k]);\n\t\ts = u*v;\n\t\ts_h = s;\n\t\tGET_FLOAT_WORD(is, s_h);\n\t\tSET_FLOAT_WORD(s_h, is & 0xfffff000);\n\t\t \n\t\tis = ((ix>>1) & 0xfffff000) | 0x20000000;\n\t\tSET_FLOAT_WORD(t_h, is + 0x00400000 + (k<<21));\n\t\tt_l = ax - (t_h - bp[k]);\n\t\ts_l = v*((u - s_h*t_h) - s_h*t_l);\n\t\t \n\t\ts2 = s*s;\n\t\tr = s2*s2*(L1+s2*(L2+s2*(L3+s2*(L4+s2*(L5+s2*L6)))));\n\t\tr += s_l*(s_h+s);\n\t\ts2 = s_h*s_h;\n\t\tt_h = 3.0f + s2 + r;\n\t\tGET_FLOAT_WORD(is, t_h);\n\t\tSET_FLOAT_WORD(t_h, is & 0xfffff000);\n\t\tt_l = r - ((t_h - 3.0f) - s2);\n\t\t \n\t\tu = s_h*t_h;\n\t\tv = s_l*t_h + t_l*s;\n\t\t \n\t\tp_h = u + v;\n\t\tGET_FLOAT_WORD(is, p_h);\n\t\tSET_FLOAT_WORD(p_h, is & 0xfffff000);\n\t\tp_l = v - (p_h - u);\n\t\tz_h = cp_h*p_h;   \n\t\tz_l = cp_l*p_h + p_l*cp+dp_l[k];\n\t\t \n\t\tt = (float)n;\n\t\tt1 = (((z_h + z_l) + dp_h[k]) + t);\n\t\tGET_FLOAT_WORD(is, t1);\n\t\tSET_FLOAT_WORD(t1, is & 0xfffff000);\n\t\tt2 = z_l - (((t1 - t) - dp_h[k]) - z_h);\n\t}\n\n\t \n\tGET_FLOAT_WORD(is, y);\n\tSET_FLOAT_WORD(y1, is & 0xfffff000);\n\tp_l = (y-y1)*t1 + y*t2;\n\tp_h = y1*t1;\n\tz = p_l + p_h;\n\tGET_FLOAT_WORD(j, z);\n\tif (j > 0x43000000)           \n\t\treturn sn*huge*huge;   \n\telse if (j == 0x43000000) {   \n\t\tif (p_l + ovt > z - p_h)\n\t\t\treturn sn*huge*huge;   \n\t} else if ((j&0x7fffffff) > 0x43160000)    \n\t\treturn sn*tiny*tiny;   \n\telse if (j == 0xc3160000) {   \n\t\tif (p_l <= z-p_h)\n\t\t\treturn sn*tiny*tiny;   \n\t}\n\t \n\ti = j & 0x7fffffff;\n\tk = (i>>23) - 0x7f;\n\tn = 0;\n\tif (i > 0x3f000000) {    \n\t\tn = j + (0x00800000>>(k+1));\n\t\tk = ((n&0x7fffffff)>>23) - 0x7f;   \n\t\tSET_FLOAT_WORD(t, n & ~(0x007fffff>>k));\n\t\tn = ((n&0x007fffff)|0x00800000)>>(23-k);\n\t\tif (j < 0)\n\t\t\tn = -n;\n\t\tp_h -= t;\n\t}\n\tt = p_l + p_h;\n\tGET_FLOAT_WORD(is, t);\n\tSET_FLOAT_WORD(t, is & 0xffff8000);\n\tu = t*lg2_h;\n\tv = (p_l-(t-p_h))*lg2 + t*lg2_l;\n\tz = u + v;\n\tw = v - (z - u);\n\tt = z*z;\n\tt1 = z - t*(P1+t*(P2+t*(P3+t*(P4+t*P5))));\n\tr = (z*t1)/(t1-2.0f) - (w+z*w);\n\tz = 1.0f - (r - z);\n\tGET_FLOAT_WORD(j, z);\n\tj += n<<23;\n\tif ((j>>23) <= 0)   \n\t\tz = scalbnf(z, n);\n\telse\n\t\tSET_FLOAT_WORD(z, j);\n\treturn sn*z;\n}\n\n \n \n\n \n \n\n \n \n \n\nstatic const float\nhalf[2] = {0.5f,-0.5f},\nln2hi   = 6.9314575195e-1f,   \nln2lo   = 1.4286067653e-6f,   \ninvln2  = 1.4426950216e+0f,   \n \nexpf_P1 =  1.6666625440e-1f,  \nexpf_P2 = -2.7667332906e-3f;  \n\nfloat expf(float x)\n{\n\tfloat_t hi, lo, c, xx, y;\n\tint k, sign;\n\tuint32_t hx;\n\n\tGET_FLOAT_WORD(hx, x);\n\tsign = hx >> 31;    \n\thx &= 0x7fffffff;   \n\n\t \n\tif (hx >= 0x42aeac50) {   \n\t\tif (hx >= 0x42b17218 && !sign) {   \n\t\t\t \n\t\t\tx *= 0x1p127f;\n\t\t\treturn x;\n\t\t}\n\t\tif (sign) {\n\t\t\t \n\t\t\tFORCE_EVAL(-0x1p-149f/x);\n\t\t\tif (hx >= 0x42cff1b5)   \n\t\t\t\treturn 0;\n\t\t}\n\t}\n\n\t \n\tif (hx > 0x3eb17218) {   \n\t\tif (hx > 0x3f851592)   \n\t\t\tk = (int)(invln2*x + half[sign]);\n\t\telse\n\t\t\tk = 1 - sign - sign;\n\t\thi = x - k*ln2hi;   \n\t\tlo = k*ln2lo;\n\t\tx = hi - lo;\n\t} else if (hx > 0x39000000) {   \n\t\tk = 0;\n\t\thi = x;\n\t\tlo = 0;\n\t} else {\n\t\t \n\t\tFORCE_EVAL(0x1p127f + x);\n\t\treturn 1 + x;\n\t}\n\n\t \n\txx = x*x;\n\tc = x - xx*(expf_P1+xx*expf_P2);\n\ty = 1 + (x*c/(2-c) - lo + hi);\n\tif (k == 0)\n\t\treturn y;\n\treturn scalbnf(y, k);\n}\n\n \n \n\n \n \n\n \n \n \n\nstatic const float\no_threshold = 8.8721679688e+01f,  \nln2_hi      = 6.9313812256e-01f,  \nln2_lo      = 9.0580006145e-06f,  \n\n \nQ1 = -3.3333212137e-2f,  \nQ2 =  1.5807170421e-3f;  \n\nfloat expm1f(float x)\n{\n\tfloat_t y,hi,lo,c,t,e,hxs,hfx,r1,twopk;\n\tunion {float f; uint32_t i;} u = {x};\n\tuint32_t hx = u.i & 0x7fffffff;\n\tint k, sign = u.i >> 31;\n\n\t \n\tif (hx >= 0x4195b844) {   \n\t\tif (hx > 0x7f800000)   \n\t\t\treturn x;\n\t\tif (sign)\n\t\t\treturn -1;\n\t\tif (x > o_threshold) {\n\t\t\tx *= 0x1p127f;\n\t\t\treturn x;\n\t\t}\n\t}\n\n\t \n\tif (hx > 0x3eb17218) {            \n\t\tif (hx < 0x3F851592) {        \n\t\t\tif (!sign) {\n\t\t\t\thi = x - ln2_hi;\n\t\t\t\tlo = ln2_lo;\n\t\t\t\tk =  1;\n\t\t\t} else {\n\t\t\t\thi = x + ln2_hi;\n\t\t\t\tlo = -ln2_lo;\n\t\t\t\tk = -1;\n\t\t\t}\n\t\t} else {\n\t\t\tk  = (int)(invln2*x + (sign ? -0.5f : 0.5f));\n\t\t\tt  = k;\n\t\t\thi = x - t*ln2_hi;       \n\t\t\tlo = t*ln2_lo;\n\t\t}\n\t\tx = hi-lo;\n\t\tc = (hi-x)-lo;\n\t} else if (hx < 0x33000000) {   \n\t\tif (hx < 0x00800000)\n\t\t\tFORCE_EVAL(x*x);\n\t\treturn x;\n\t} else\n\t\tk = 0;\n\n\t \n\thfx = 0.5f*x;\n\thxs = x*hfx;\n\tr1 = 1.0f+hxs*(Q1+hxs*Q2);\n\tt  = 3.0f - r1*hfx;\n\te  = hxs*((r1-t)/(6.0f - x*t));\n\tif (k == 0)   \n\t\treturn x - (x*e-hxs);\n\te  = x*(e-c) - c;\n\te -= hxs;\n\t \n\tif (k == -1)\n\t\treturn 0.5f*(x-e) - 0.5f;\n\tif (k == 1) {\n\t\tif (x < -0.25f)\n\t\t\treturn -2.0f*(e-(x+0.5f));\n\t\treturn 1.0f + 2.0f*(x-e);\n\t}\n\tu.i = (0x7f+k)<<23;   \n\ttwopk = u.f;\n\tif (k < 0 || k > 56) {    \n\t\ty = x - e + 1.0f;\n\t\tif (k == 128)\n\t\t\ty = y*2.0f*0x1p127f;\n\t\telse\n\t\t\ty = y*twopk;\n\t\treturn y - 1.0f;\n\t}\n\tu.i = (0x7f-k)<<23;   \n\tif (k < 23)\n\t\ty = (x-e+(1-u.f))*twopk;\n\telse\n\t\ty = (x-(e+u.f)+1)*twopk;\n\treturn y;\n}\n\n \n \n\n \n \n\n \nstatic const int k = 235;\nstatic const float kln2 = 0x1.45c778p+7f;\n\n \nfloat __expo2f(float x)\n{\n\tfloat scale;\n\n\t \n\tSET_FLOAT_WORD(scale, (uint32_t)(0x7f + k/2) << 23);\n\t \n\treturn expf(x - kln2) * scale * scale;\n}\n\n \n \n\n \n \n\n \n \n \n\nstatic const float\n \nLg1 = 0xaaaaaa.0p-24,  \nLg2 = 0xccce13.0p-25,  \nLg3 = 0x91e9ee.0p-25,  \nLg4 = 0xf89e26.0p-26;  \n\nfloat logf(float x)\n{\n\tunion {float f; uint32_t i;} u = {x};\n\tfloat_t hfsq,f,s,z,R,w,t1,t2,dk;\n\tuint32_t ix;\n\tint k;\n\n\tix = u.i;\n\tk = 0;\n\tif (ix < 0x00800000 || ix>>31) {   \n\t\tif (ix<<1 == 0)\n\t\t\treturn -1/(x*x);   \n\t\tif (ix>>31)\n\t\t\treturn (x-x)/0.0f;  \n\t\t \n\t\tk -= 25;\n\t\tx *= 0x1p25f;\n\t\tu.f = x;\n\t\tix = u.i;\n\t} else if (ix >= 0x7f800000) {\n\t\treturn x;\n\t} else if (ix == 0x3f800000)\n\t\treturn 0;\n\n\t \n\tix += 0x3f800000 - 0x3f3504f3;\n\tk += (int)(ix>>23) - 0x7f;\n\tix = (ix&0x007fffff) + 0x3f3504f3;\n\tu.i = ix;\n\tx = u.f;\n\n\tf = x - 1.0f;\n\ts = f/(2.0f + f);\n\tz = s*s;\n\tw = z*z;\n\tt1= w*(Lg2+w*Lg4);\n\tt2= z*(Lg1+w*Lg3);\n\tR = t2 + t1;\n\thfsq = 0.5f*f*f;\n\tdk = k;\n\treturn s*(hfsq+R) + dk*ln2_lo - hfsq + f + dk*ln2_hi;\n}\n\n \n \n\n \n \n\nfloat coshf(float x)\n{\n\tunion {float f; uint32_t i;} u = {.f = x};\n\tuint32_t w;\n\tfloat t;\n\n\t \n\tu.i &= 0x7fffffff;\n\tx = u.f;\n\tw = u.i;\n\n\t \n\tif (w < 0x3f317217) {\n\t\tif (w < 0x3f800000 - (12<<23)) {\n\t\t\tFORCE_EVAL(x + 0x1p120f);\n\t\t\treturn 1;\n\t\t}\n\t\tt = expm1f(x);\n\t\treturn 1 + t*t/(2*(1+t));\n\t}\n\n\t \n\tif (w < 0x42b17217) {\n\t\tt = expf(x);\n\t\treturn 0.5f*(t + 1/t);\n\t}\n\n\t \n\tt = __expo2f(x);\n\treturn t;\n}\n\n \n \n\n \n \n\nfloat sinhf(float x)\n{\n\tunion {float f; uint32_t i;} u = {.f = x};\n\tuint32_t w;\n\tfloat t, h, absx;\n\n\th = 0.5;\n\tif (u.i >> 31)\n\t\th = -h;\n\t \n\tu.i &= 0x7fffffff;\n\tabsx = u.f;\n\tw = u.i;\n\n\t \n\tif (w < 0x42b17217) {\n\t\tt = expm1f(absx);\n\t\tif (w < 0x3f800000) {\n\t\t\tif (w < 0x3f800000 - (12<<23))\n\t\t\t\treturn x;\n\t\t\treturn h*(2*t - t*t/(t+1));\n\t\t}\n\t\treturn h*(t + t/(t+1));\n\t}\n\n\t \n\tt = 2*h*__expo2f(absx);\n\treturn t;\n}\n\n \n \n\n \n \n\nfloat ceilf(float x)\n{\n\tunion {float f; uint32_t i;} u = {x};\n\tint e = (int)(u.i >> 23 & 0xff) - 0x7f;\n\tuint32_t m;\n\n\tif (e >= 23)\n\t\treturn x;\n\tif (e >= 0) {\n\t\tm = 0x007fffff >> e;\n\t\tif ((u.i & m) == 0)\n\t\t\treturn x;\n\t\tFORCE_EVAL(x + 0x1p120f);\n\t\tif (u.i >> 31 == 0)\n\t\t\tu.i += m;\n\t\tu.i &= ~m;\n\t} else {\n\t\tFORCE_EVAL(x + 0x1p120f);\n\t\tif (u.i >> 31)\n\t\t\tu.f = -0.0;\n\t\telse if (u.i << 1)\n\t\t\tu.f = 1.0;\n\t}\n\treturn u.f;\n}\n\nfloat floorf(float x)\n{\n\tunion {float f; uint32_t i;} u = {x};\n\tint e = (int)(u.i >> 23 & 0xff) - 0x7f;\n\tuint32_t m;\n\n\tif (e >= 23)\n\t\treturn x;\n\tif (e >= 0) {\n\t\tm = 0x007fffff >> e;\n\t\tif ((u.i & m) == 0)\n\t\t\treturn x;\n\t\tFORCE_EVAL(x + 0x1p120f);\n\t\tif (u.i >> 31)\n\t\t\tu.i += m;\n\t\tu.i &= ~m;\n\t} else {\n\t\tFORCE_EVAL(x + 0x1p120f);\n\t\tif (u.i >> 31 == 0)\n\t\t\tu.i = 0;\n\t\telse if (u.i << 1)\n\t\t\tu.f = -1.0;\n\t}\n\treturn u.f;\n}\n\nfloat truncf(float x)\n{\n\tunion {float f; uint32_t i;} u = {x};\n\tint e = (int)(u.i >> 23 & 0xff) - 0x7f + 9;\n\tuint32_t m;\n\n\tif (e >= 23 + 9)\n\t\treturn x;\n\tif (e < 9)\n\t\te = 1;\n\tm = -1U >> e;\n\tif ((u.i & m) == 0)\n\t\treturn x;\n\tFORCE_EVAL(x + 0x1p120f);\n\tu.i &= ~m;\n\treturn u.f;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}