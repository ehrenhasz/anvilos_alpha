{
  "module_name": "kf_rem_pio2.c",
  "hash_id": "708d9e23781478c64577a69fa1a1ed1ed39a2ab0b5b48967e51db7f8bd1ab823",
  "original_prompt": "Ingested from sys_09_Anvil/source/lib/libm/kf_rem_pio2.c",
  "human_readable_source": " \n\n \n\n \n\n#include \"fdlibm.h\"\n\n \n\n#ifdef __STDC__\nstatic const int init_jk[] = {4,7,9};  \n#else\nstatic int init_jk[] = {4,7,9}; \n#endif\n\n#ifdef __STDC__\nstatic const float PIo2[] = {\n#else\nstatic float PIo2[] = {\n#endif\n  1.5703125000e+00f,  \n  4.5776367188e-04f,  \n  2.5987625122e-05f,  \n  7.5437128544e-08f,  \n  6.0026650317e-11f,  \n  7.3896444519e-13f,  \n  5.3845816694e-15f,  \n  5.6378512969e-18f,  \n  8.3009228831e-20f,  \n  3.2756352257e-22f,  \n  6.3331015649e-25f,  \n};\n\n#ifdef __STDC__\nstatic const float\t\t\t\n#else\nstatic float\t\t\t\n#endif\nzero   = 0.0f,\none    = 1.0f,\ntwo8   =  2.5600000000e+02f,  \ntwon8  =  3.9062500000e-03f;  \n\n#ifdef __STDC__\n\tint __kernel_rem_pio2f(float *x, float *y, int e0, int nx, int prec, const __uint8_t *ipio2) \n#else\n\tint __kernel_rem_pio2f(x,y,e0,nx,prec,ipio2) \t\n\tfloat x[], y[]; int e0,nx,prec; __uint8_t ipio2[];\n#endif\n{\n\t__int32_t jz,jx,jv,jp,jk,carry,n,iq[20],i,j,k,m,q0,ih;\n\tfloat z,fw,f[20],fq[20],q[20];\n\n     \n\tjk = init_jk[prec];\n\tjp = jk;\n\n     \n\tjx =  nx-1;\n\tjv = (e0-3)/8; if(jv<0) jv=0;\n\tq0 =  e0-8*(jv+1);\n\n     \n\tj = jv-jx; m = jx+jk;\n\tfor(i=0;i<=m;i++,j++) f[i] = (j<0)? zero : (float) ipio2[j];\n\n     \n\tfor (i=0;i<=jk;i++) {\n\t    for(j=0,fw=0.0;j<=jx;j++) fw += x[j]*f[jx+i-j];\n\t    q[i] = fw;\n\t}\n\n\tjz = jk;\nrecompute:\n     \n\tfor(i=0,j=jz,z=q[jz];j>0;i++,j--) {\n\t    fw    =  (float)((__int32_t)(twon8* z));\n\t    iq[i] =  (__int32_t)(z-two8*fw);\n\t    z     =  q[j-1]+fw;\n\t}\n\n     \n\tz  = scalbnf(z,(int)q0);\t \n\tz -= (float)8.0*floorf(z*(float)0.125);\t \n\tn  = (__int32_t) z;\n\tz -= (float)n;\n\tih = 0;\n\tif(q0>0) {\t \n\t    i  = (iq[jz-1]>>(8-q0)); n += i;\n\t    iq[jz-1] -= i<<(8-q0);\n\t    ih = iq[jz-1]>>(7-q0);\n\t} \n\telse if(q0==0) ih = iq[jz-1]>>8;\n\telse if(z>=(float)0.5) ih=2;\n\n\tif(ih>0) {\t \n\t    n += 1; carry = 0;\n\t    for(i=0;i<jz ;i++) {\t \n\t\tj = iq[i];\n\t\tif(carry==0) {\n\t\t    if(j!=0) {\n\t\t\tcarry = 1; iq[i] = 0x100- j;\n\t\t    }\n\t\t} else  iq[i] = 0xff - j;\n\t    }\n\t    if(q0>0) {\t\t \n\t        switch(q0) {\n\t        case 1:\n\t    \t   iq[jz-1] &= 0x7f; break;\n\t    \tcase 2:\n\t    \t   iq[jz-1] &= 0x3f; break;\n\t        }\n\t    }\n\t    if(ih==2) {\n\t\tz = one - z;\n\t\tif(carry!=0) z -= scalbnf(one,(int)q0);\n\t    }\n\t}\n\n     \n\tif(z==zero) {\n\t    j = 0;\n\t    for (i=jz-1;i>=jk;i--) j |= iq[i];\n\t    if(j==0) {  \n\t\tfor(k=1;iq[jk-k]==0;k++);    \n\n\t\tfor(i=jz+1;i<=jz+k;i++) {    \n\t\t    f[jx+i] = (float) ipio2[jv+i];\n\t\t    for(j=0,fw=0.0;j<=jx;j++) fw += x[j]*f[jx+i-j];\n\t\t    q[i] = fw;\n\t\t}\n\t\tjz += k;\n\t\tgoto recompute;\n\t    }\n\t}\n\n     \n\tif(z==(float)0.0) {\n\t    jz -= 1; q0 -= 8;\n\t    while(iq[jz]==0) { jz--; q0-=8;}\n\t} else {  \n\t    z = scalbnf(z,-(int)q0);\n\t    if(z>=two8) { \n\t\tfw = (float)((__int32_t)(twon8*z));\n\t\tiq[jz] = (__int32_t)(z-two8*fw);\n\t\tjz += 1; q0 += 8;\n\t\tiq[jz] = (__int32_t) fw;\n\t    } else iq[jz] = (__int32_t) z ;\n\t}\n\n     \n\tfw = scalbnf(one,(int)q0);\n\tfor(i=jz;i>=0;i--) {\n\t    q[i] = fw*(float)iq[i]; fw*=twon8;\n\t}\n\n     \n\tfor(i=jz;i>=0;i--) {\n\t    for(fw=0.0,k=0;k<=jp&&k<=jz-i;k++) fw += PIo2[k]*q[i+k];\n\t    fq[jz-i] = fw;\n\t}\n\n     \n\tswitch(prec) {\n\t    case 0:\n\t\tfw = 0.0;\n\t\tfor (i=jz;i>=0;i--) fw += fq[i];\n\t\ty[0] = (ih==0)? fw: -fw; \n\t\tbreak;\n\t    case 1:\n\t    case 2:\n\t\tfw = 0.0;\n\t\tfor (i=jz;i>=0;i--) fw += fq[i]; \n\t\ty[0] = (ih==0)? fw: -fw; \n\t\tfw = fq[0]-fw;\n\t\tfor (i=1;i<=jz;i++) fw += fq[i];\n\t\ty[1] = (ih==0)? fw: -fw; \n\t\tbreak;\n\t    case 3:\t \n\t\tfor (i=jz;i>0;i--) {\n\t\t    fw      = fq[i-1]+fq[i]; \n\t\t    fq[i]  += fq[i-1]-fw;\n\t\t    fq[i-1] = fw;\n\t\t}\n\t\tfor (i=jz;i>1;i--) {\n\t\t    fw      = fq[i-1]+fq[i]; \n\t\t    fq[i]  += fq[i-1]-fw;\n\t\t    fq[i-1] = fw;\n\t\t}\n\t\tfor (fw=0.0,i=jz;i>=2;i--) fw += fq[i]; \n\t\tif(ih==0) {\n\t\t    y[0] =  fq[0]; y[1] =  fq[1]; y[2] =  fw;\n\t\t} else {\n\t\t    y[0] = -fq[0]; y[1] = -fq[1]; y[2] = -fw;\n\t\t}\n\t}\n\treturn n&7;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}