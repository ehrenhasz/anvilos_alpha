{
  "module_name": "tgamma.c",
  "hash_id": "55d034f6ec383ee0cdce7a308af0f2d58626672187040242a208c04ebc754965",
  "original_prompt": "Ingested from sys_09_Anvil/source/lib/libm_dbl/tgamma.c",
  "human_readable_source": " \n#include \"libm.h\"\n\nstatic const double pi = 3.141592653589793238462643383279502884;\n\n \nstatic double sinpi(double x)\n{\n\tint n;\n\n\t \n\t \n\tx = x * 0.5;\n\tx = 2 * (x - floor(x));\n\n\t \n\tn = 4 * x;\n\tn = (n+1)/2;\n\tx -= n * 0.5;\n\n\tx *= pi;\n\tswitch (n) {\n\tdefault:  \n\tcase 0:\n\t\treturn __sin(x, 0, 0);\n\tcase 1:\n\t\treturn __cos(x, 0);\n\tcase 2:\n\t\treturn __sin(-x, 0, 0);\n\tcase 3:\n\t\treturn -__cos(x, 0);\n\t}\n}\n\n#define N 12\n\nstatic const double gmhalf = 5.524680040776729583740234375;\nstatic const double Snum[N+1] = {\n\t23531376880.410759688572007674451636754734846804940,\n\t42919803642.649098768957899047001988850926355848959,\n\t35711959237.355668049440185451547166705960488635843,\n\t17921034426.037209699919755754458931112671403265390,\n\t6039542586.3520280050642916443072979210699388420708,\n\t1439720407.3117216736632230727949123939715485786772,\n\t248874557.86205415651146038641322942321632125127801,\n\t31426415.585400194380614231628318205362874684987640,\n\t2876370.6289353724412254090516208496135991145378768,\n\t186056.26539522349504029498971604569928220784236328,\n\t8071.6720023658162106380029022722506138218516325024,\n\t210.82427775157934587250973392071336271166969580291,\n\t2.5066282746310002701649081771338373386264310793408,\n};\nstatic const double Sden[N+1] = {\n\t0, 39916800, 120543840, 150917976, 105258076, 45995730, 13339535,\n\t2637558, 357423, 32670, 1925, 66, 1,\n};\n \nstatic const double fact[] = {\n\t1, 1, 2, 6, 24, 120, 720, 5040.0, 40320.0, 362880.0, 3628800.0, 39916800.0,\n\t479001600.0, 6227020800.0, 87178291200.0, 1307674368000.0, 20922789888000.0,\n\t355687428096000.0, 6402373705728000.0, 121645100408832000.0,\n\t2432902008176640000.0, 51090942171709440000.0, 1124000727777607680000.0,\n};\n\n \nstatic double S(double x)\n{\n\tdouble_t num = 0, den = 0;\n\tint i;\n\n\t \n\tif (x < 8)\n\t\tfor (i = N; i >= 0; i--) {\n\t\t\tnum = num * x + Snum[i];\n\t\t\tden = den * x + Sden[i];\n\t\t}\n\telse\n\t\tfor (i = 0; i <= N; i++) {\n\t\t\tnum = num / x + Snum[i];\n\t\t\tden = den / x + Sden[i];\n\t\t}\n\treturn num/den;\n}\n\ndouble tgamma(double x)\n{\n\tunion {double f; uint64_t i;} u = {x};\n\tdouble absx, y;\n\tdouble_t dy, z, r;\n\tuint32_t ix = u.i>>32 & 0x7fffffff;\n\tint sign = u.i>>63;\n\n\t \n\tif (ix >= 0x7ff00000)\n\t\t \n\t\treturn x + INFINITY;\n\tif (ix < (0x3ff-54)<<20)\n\t\t \n\t\treturn 1/x;\n\n\t \n\t \n\tif (x == floor(x)) {\n\t\tif (sign)\n\t\t\treturn 0/0.0;\n\t\tif (x <= sizeof fact/sizeof *fact)\n\t\t\treturn fact[(int)x - 1];\n\t}\n\n\t \n\t \n\tif (ix >= 0x40670000) {  \n\t\tif (sign) {\n\t\t\tFORCE_EVAL((float)(0x1p-126/x));\n\t\t\tif (floor(x) * 0.5 == floor(x * 0.5))\n\t\t\t\treturn 0;\n\t\t\treturn -0.0;\n\t\t}\n\t\tx *= 0x1p1023;\n\t\treturn x;\n\t}\n\n\tabsx = sign ? -x : x;\n\n\t \n\ty = absx + gmhalf;\n\tif (absx > gmhalf) {\n\t\tdy = y - absx;\n\t\tdy -= gmhalf;\n\t} else {\n\t\tdy = y - gmhalf;\n\t\tdy -= absx;\n\t}\n\n\tz = absx - 0.5;\n\tr = S(absx) * exp(-y);\n\tif (x < 0) {\n\t\t \n\t\t \n\t\tr = -pi / (sinpi(absx) * absx * r);\n\t\tdy = -dy;\n\t\tz = -z;\n\t}\n\tr += dy * (gmhalf+0.5) * r / y;\n\tz = pow(y, 0.5*z);\n\ty = r * z * z;\n\treturn y;\n}\n\n#if 1\ndouble __lgamma_r(double x, int *sign)\n{\n\tdouble r, absx;\n\n\t*sign = 1;\n\n\t \n\tif (!isfinite(x))\n\t\t \n\t\treturn x*x;\n\n\t \n\tif (x == floor(x) && x <= 2) {\n\t\t \n\t\t \n\t\tif (x <= 0)\n\t\t\treturn 1/0.0;\n\t\treturn 0;\n\t}\n\n\tabsx = fabs(x);\n\n\t \n\tif (absx < 0x1p-54) {\n\t\t*sign = 1 - 2*!!signbit(x);\n\t\treturn -log(absx);\n\t}\n\n\t \n\tif (absx < 128) {\n\t\tx = tgamma(x);\n\t\t*sign = 1 - 2*!!signbit(x);\n\t\treturn log(fabs(x));\n\t}\n\n\t \n\t \n\tr = (absx-0.5)*(log(absx+gmhalf)-1) + (log(S(absx)) - (gmhalf+0.5));\n\tif (x < 0) {\n\t\t \n\t\tx = sinpi(absx);\n\t\t*sign = 2*!!signbit(x) - 1;\n\t\tr = log(pi/(fabs(x)*absx)) - r;\n\t}\n\treturn r;\n}\n\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}