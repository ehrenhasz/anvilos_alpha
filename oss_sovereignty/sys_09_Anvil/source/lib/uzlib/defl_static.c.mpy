{
  "module_name": "defl_static.c",
  "hash_id": "7e504f686f34920d4df46099519c37b4acbc28c95e7f507add985107416b3268",
  "original_prompt": "Ingested from sys_09_Anvil/source/lib/uzlib/defl_static.c",
  "human_readable_source": " \n\n#include <stdlib.h>\n#include <stdint.h>\n#include <string.h>\n#include <assert.h>\n\n \n\nstatic void outbits(uzlib_lz77_state_t *state, unsigned long bits, int nbits)\n{\n    assert(state->noutbits + nbits <= 32);\n    state->outbits |= bits << state->noutbits;\n    state->noutbits += nbits;\n    while (state->noutbits >= 8) {\n        state->dest_write_cb(state->dest_write_data, state->outbits & 0xFF);\n        state->outbits >>= 8;\n        state->noutbits -= 8;\n    }\n}\n\nstatic const unsigned char mirrornibbles[16] = {\n    0x0, 0x8, 0x4, 0xc, 0x2, 0xa, 0x6, 0xe,\n    0x1, 0x9, 0x5, 0xd, 0x3, 0xb, 0x7, 0xf,\n};\n\nstatic unsigned int mirrorbyte(unsigned int b) {\n    return mirrornibbles[b & 0xf] << 4 | mirrornibbles[b >> 4];\n}\n\nstatic int int_log2(int x) {\n    int r = 0;\n    while (x >>= 1) {\n        ++r;\n    }\n    return r;\n}\n\nstatic void uzlib_literal(uzlib_lz77_state_t *state, unsigned char c)\n{\n    if (c <= 143) {\n         \n        outbits(state, mirrorbyte(0x30 + c), 8);\n    } else {\n         \n        outbits(state, 1 + 2 * mirrorbyte(0x90 - 144 + c), 9);\n    }\n}\n\nstatic void uzlib_match(uzlib_lz77_state_t *state, int distance, int len)\n{\n    assert(distance >= 1 && distance <= 32768);\n    distance -= 1;\n\n    while (len > 0) {\n        int thislen;\n\n         \n        thislen = (len > 260 ? 258 : len <= 258 ? len : len - 3);\n        len -= thislen;\n\n        assert(thislen >= 3 && thislen <= 258);\n\n        thislen -= 3;\n        int lcode = 28;\n        int x = int_log2(thislen);\n        int y;\n        if (thislen < 255) {\n            if (x) {\n                --x;\n            }\n            y = (thislen >> (x ? x - 1 : 0)) & 3;\n            lcode = x * 4 + y;\n        }\n\n         \n        if (lcode <= 22) {\n            outbits(state, mirrorbyte((lcode + 1) * 2), 7);\n        } else {\n            outbits(state, mirrorbyte(lcode + 169), 8);\n        }\n\n         \n        if (thislen < 255 && x > 1) {\n            int extrabits = x - 1;\n            int lmin = (thislen >> extrabits) << extrabits;\n            outbits(state, thislen - lmin, extrabits);\n        }\n\n        x = int_log2(distance);\n        y = (distance >> (x ? x - 1 : 0)) & 1;\n\n         \n        outbits(state, mirrorbyte((x * 2 + y) * 8), 5);\n\n         \n        if (x > 1) {\n            int dextrabits = x - 1;\n            int dmin = (distance >> dextrabits) << dextrabits;\n            outbits(state, distance - dmin, dextrabits);\n        }\n    }\n}\n\nvoid uzlib_start_block(uzlib_lz77_state_t *state)\n{\n    \n    \n    outbits(state, 3, 3);\n}\n\nvoid uzlib_finish_block(uzlib_lz77_state_t *state)\n{\n    \n    \n    outbits(state, 0, 14);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}