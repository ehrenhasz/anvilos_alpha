{
  "module_name": "find-mount-point.c",
  "hash_id": "0d9a4dcd94ba92ade96084143c14b348aefe15d7e3b1bee62fd996cf9478ad24",
  "original_prompt": "Ingested from coreutils-9.4/src/find-mount-point.c",
  "human_readable_source": " \nextern char *\nfind_mount_point (char const *file, struct stat const *file_stat)\n{\n  struct saved_cwd cwd;\n  struct stat last_stat;\n  char *mp = nullptr;\t\t \n\n  if (save_cwd (&cwd) != 0)\n    {\n      error (0, errno, _(\"cannot get current directory\"));\n      return nullptr;\n    }\n\n  if (S_ISDIR (file_stat->st_mode))\n     \n    {\n      last_stat = *file_stat;\n      if (chdir (file) < 0)\n        {\n          error (0, errno, _(\"cannot change to directory %s\"), quoteaf (file));\n          return nullptr;\n        }\n    }\n  else\n     \n    {\n      char *xdir = dir_name (file);\n      char *dir;\n      ASSIGN_STRDUPA (dir, xdir);\n      free (xdir);\n\n      if (chdir (dir) < 0)\n        {\n          error (0, errno, _(\"cannot change to directory %s\"), quoteaf (dir));\n          return nullptr;\n        }\n\n      if (stat (\".\", &last_stat) < 0)\n        {\n          error (0, errno, _(\"cannot stat current directory (now %s)\"),\n                 quoteaf (dir));\n          goto done;\n        }\n    }\n\n   \n  while (true)\n    {\n      struct stat st;\n      if (stat (\"..\", &st) < 0)\n        {\n          error (0, errno, _(\"cannot stat %s\"), quoteaf (\"..\"));\n          goto done;\n        }\n      if (st.st_dev != last_stat.st_dev || st.st_ino == last_stat.st_ino)\n         \n        break;\n      if (chdir (\"..\") < 0)\n        {\n          error (0, errno, _(\"cannot change to directory %s\"), quoteaf (\"..\"));\n          goto done;\n        }\n      last_stat = st;\n    }\n\n   \n  mp = xgetcwd ();\n\ndone:\n   \n  {\n    int save_errno = errno;\n    if (restore_cwd (&cwd) != 0)\n      error (EXIT_FAILURE, errno,\n             _(\"failed to return to initial working directory\"));\n    free_cwd (&cwd);\n    errno = save_errno;\n  }\n\n  return mp;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}