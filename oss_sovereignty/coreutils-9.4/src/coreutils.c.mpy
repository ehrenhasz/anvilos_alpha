{
  "module_name": "coreutils.c",
  "hash_id": "76b84a6eee3375f31df58e4330ca3ba8a59d620630ee6a009775cd196e705ea6",
  "original_prompt": "Ingested from coreutils-9.4/src/coreutils.c",
  "human_readable_source": " \n\n#include <config.h>\n#include <getopt.h>\n#include <stdio.h>\n#if HAVE_PRCTL\n# include <sys/prctl.h>\n#endif\n\n#include \"system.h\"\n#include \"quote.h\"\n\n#ifdef SINGLE_BINARY\n \n# define SINGLE_BINARY_PROGRAM(prog_name_str, main_name) \\\n  int single_binary_main_##main_name (int, char **);\n# include \"coreutils.h\"\n# undef SINGLE_BINARY_PROGRAM\n#endif\n\n \n#define PROGRAM_NAME \"coreutils\"\n\n#define AUTHORS \\\n  proper_name (\"Alex Deymo\")\n\nstatic struct option const long_options[] =\n{\n  {GETOPT_HELP_OPTION_DECL},\n  {GETOPT_VERSION_OPTION_DECL},\n  {nullptr, 0, nullptr, 0}\n};\n\n\nvoid\nusage (int status)\n{\n  if (status != EXIT_SUCCESS)\n    emit_try_help ();\n  else\n    {\n      printf (_(\"\\\nUsage: %s --coreutils-prog=PROGRAM_NAME [PARAMETERS]... \\n\"),\n              program_name);\n      fputs (_(\"\\\nExecute the PROGRAM_NAME built-in program with the given PARAMETERS.\\n\\\n\\n\"), stdout);\n      fputs (HELP_OPTION_DESCRIPTION, stdout);\n      fputs (VERSION_OPTION_DESCRIPTION, stdout);\n\n#ifdef SINGLE_BINARY\n/* XXX: Ideally we'd like to present \"install\" here, not \"ginstall\".  */\n      char const *prog_name_list =\n# define SINGLE_BINARY_PROGRAM(prog_name_str, main_name) \" \" prog_name_str\n# include \"coreutils.h\"\n# undef SINGLE_BINARY_PROGRAM\n      ;\n      printf (\"\\n\\\nBuilt-in programs:\\n\\\n%s\\n\", prog_name_list);\n#endif\n\n      printf (_(\"\\\n\\n\\\nUse: '%s --coreutils-prog=PROGRAM_NAME --help' for individual program help.\\n\"),\n              program_name);\n      emit_ancillary_info (PROGRAM_NAME);\n    }\n  exit (status);\n}\n\nstatic void\nlaunch_program (char const *prog_name, int prog_argc, char **prog_argv)\n{\n  int (*prog_main) (int, char **) = nullptr;\n\n   \n  if (!prog_argc || !prog_argv || !prog_argv[0] || !prog_name)\n    return;\n\n#ifdef SINGLE_BINARY\n  if (false);\n   \n# define SINGLE_BINARY_PROGRAM(prog_name_str, main_name) \\\n  else if (STREQ (prog_name_str, prog_name)) \\\n    prog_main = single_binary_main_##main_name;\n# include \"coreutils.h\"\n# undef SINGLE_BINARY_PROGRAM\n#endif\n\n  if (! prog_main)\n    return;\n\n#if HAVE_PRCTL && defined PR_SET_NAME\n   \n  prctl (PR_SET_NAME, prog_argv[0]);\n#endif\n#if HAVE_PRCTL && defined PR_SET_MM_ARG_START\n   \n  prctl (PR_SET_MM, PR_SET_MM_ARG_START, prog_argv[0], 0, 0);\n#endif\n\n  exit (prog_main (prog_argc, prog_argv));\n}\n\nint\nmain (int argc, char **argv)\n{\n  char *prog_name = last_component (argv[0]);\n  int optc;\n\n   \n  char ginstall[] = \"ginstall\";\n  if (STREQ (prog_name, \"install\"))\n    prog_name = ginstall;\n\n   \n  launch_program (prog_name, argc, argv);\n\n   \n\n  if (argc >= 2)\n    {\n      size_t nskip = 0;\n      char *arg_name = nullptr;\n\n       \n      if (STRPREFIX (argv[1], \"--coreutils-prog=\"))\n        {\n          nskip = 1;\n          arg_name = prog_name = argv[1] + strlen (\"--coreutils-prog=\");\n        }\n      else if (STRPREFIX (argv[1], \"--coreutils-prog-shebang=\"))\n        {\n          nskip = 2;\n          prog_name = argv[1] + strlen (\"--coreutils-prog-shebang=\");\n          if (argc >= 3)\n            arg_name = last_component (argv[2]);\n          else\n            arg_name = prog_name;\n        }\n\n      if (nskip)\n        {\n          argv[nskip] = arg_name;  \n          launch_program (prog_name, argc - nskip, argv + nskip);\n          error (EXIT_FAILURE, 0, _(\"unknown program %s\"),\n                 quote (prog_name));\n        }\n    }\n\n   \n  initialize_main (&argc, &argv);\n  set_program_name (argv[0]);\n  setlocale (LC_ALL, \"\");\n  bindtextdomain (PACKAGE, LOCALEDIR);\n  textdomain (PACKAGE);\n  atexit (close_stdout);\n\n  if ((optc = getopt_long (argc, argv, \"\", long_options, nullptr)) != -1)\n    switch (optc)\n      {\n      case_GETOPT_HELP_CHAR;\n\n      case_GETOPT_VERSION_CHAR (PROGRAM_NAME, AUTHORS);\n      }\n\n   \n  if (optind == 1 && prog_name && !STREQ (prog_name, \"coreutils\"))\n    error (0, 0, _(\"unknown program %s\"),\n           quote (prog_name));\n\n  usage (EXIT_FAILURE);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}