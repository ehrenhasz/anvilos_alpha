{
  "module_name": "tty.c",
  "hash_id": "f1e73407370abb631a2f8feb9c2bce67d6e8956366552a3e6ca846bc88c45780",
  "original_prompt": "Ingested from coreutils-9.4/src/tty.c",
  "human_readable_source": " \n\n#include <config.h>\n#include <stdio.h>\n#include <getopt.h>\n#include <sys/types.h>\n\n#include \"system.h\"\n#include \"quote.h\"\n\n \nenum\n  {\n    TTY_STDIN_NOTTY = 1,\n    TTY_FAILURE = 2,\n    TTY_WRITE_ERROR = 3\n  };\n\n \n#define PROGRAM_NAME \"tty\"\n\n#define AUTHORS proper_name (\"David MacKenzie\")\n\n \nstatic bool silent;\n\nstatic struct option const longopts[] =\n{\n  {\"silent\", no_argument, nullptr, 's'},\n  {\"quiet\", no_argument, nullptr, 's'},\n  {GETOPT_HELP_OPTION_DECL},\n  {GETOPT_VERSION_OPTION_DECL},\n  {nullptr, 0, nullptr, 0}\n};\n\nvoid\nusage (int status)\n{\n  if (status != EXIT_SUCCESS)\n    emit_try_help ();\n  else\n    {\n      printf (_(\"Usage: %s [OPTION]...\\n\"), program_name);\n      fputs (_(\"\\\nPrint the file name of the terminal connected to standard input.\\n\\\n\\n\\\n  -s, --silent, --quiet   print nothing, only return an exit status\\n\\\n\"), stdout);\n      fputs (HELP_OPTION_DESCRIPTION, stdout);\n      fputs (VERSION_OPTION_DESCRIPTION, stdout);\n      emit_ancillary_info (PROGRAM_NAME);\n    }\n  exit (status);\n}\n\nint\nmain (int argc, char **argv)\n{\n  int optc;\n\n  initialize_main (&argc, &argv);\n  set_program_name (argv[0]);\n  setlocale (LC_ALL, \"\");\n  bindtextdomain (PACKAGE, LOCALEDIR);\n  textdomain (PACKAGE);\n\n  initialize_exit_failure (TTY_WRITE_ERROR);\n  atexit (close_stdout);\n\n  silent = false;\n\n  while ((optc = getopt_long (argc, argv, \"s\", longopts, nullptr)) != -1)\n    {\n      switch (optc)\n        {\n        case 's':\n          silent = true;\n          break;\n\n        case_GETOPT_HELP_CHAR;\n\n        case_GETOPT_VERSION_CHAR (PROGRAM_NAME, AUTHORS);\n\n        default:\n          usage (TTY_FAILURE);\n        }\n    }\n\n  if (optind < argc)\n    {\n      error (0, 0, _(\"extra operand %s\"), quote (argv[optind]));\n      usage (TTY_FAILURE);\n    }\n\n  errno = ENOENT;\n\n  if (silent)\n    return isatty (STDIN_FILENO) ? EXIT_SUCCESS : TTY_STDIN_NOTTY;\n\n  int status = EXIT_SUCCESS;\n  char const *tty = ttyname (STDIN_FILENO);\n\n  if (! tty)\n    {\n      tty = _(\"not a tty\");\n      status = TTY_STDIN_NOTTY;\n    }\n\n  puts (tty);\n  return status;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}