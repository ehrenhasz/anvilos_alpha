{
  "module_name": "printenv.c",
  "hash_id": "06d31f2c3c5cc65d9631f74b15e2c65b9b9f1fc227cba6c6f26078b1c72f58c8",
  "original_prompt": "Ingested from coreutils-9.4/src/printenv.c",
  "human_readable_source": " \n\n#include <config.h>\n#include <stdio.h>\n#include <sys/types.h>\n#include <getopt.h>\n\n#include \"system.h\"\n\n \nenum { PRINTENV_FAILURE = 2 };\n\n \n#define PROGRAM_NAME \"printenv\"\n\n#define AUTHORS \\\n  proper_name (\"David MacKenzie\"), \\\n  proper_name (\"Richard Mlynarik\")\n\nstatic struct option const longopts[] =\n{\n  {\"null\", no_argument, nullptr, '0'},\n  {GETOPT_HELP_OPTION_DECL},\n  {GETOPT_VERSION_OPTION_DECL},\n  {nullptr, 0, nullptr, 0}\n};\n\nvoid\nusage (int status)\n{\n  if (status != EXIT_SUCCESS)\n    emit_try_help ();\n  else\n    {\n      printf (_(\"\\\nUsage: %s [OPTION]... [VARIABLE]...\\n\\\nPrint the values of the specified environment VARIABLE(s).\\n\\\nIf no VARIABLE is specified, print name and value pairs for them all.\\n\\\n\\n\\\n\"),\n              program_name);\n      fputs (_(\"\\\n  -0, --null     end each output line with NUL, not newline\\n\\\n\"), stdout);\n      fputs (HELP_OPTION_DESCRIPTION, stdout);\n      fputs (VERSION_OPTION_DESCRIPTION, stdout);\n      printf (USAGE_BUILTIN_WARNING, PROGRAM_NAME);\n      emit_ancillary_info (PROGRAM_NAME);\n    }\n  exit (status);\n}\n\nint\nmain (int argc, char **argv)\n{\n  char **env;\n  char *ep, *ap;\n  int i;\n  bool ok;\n  int optc;\n  bool opt_nul_terminate_output = false;\n\n  initialize_main (&argc, &argv);\n  set_program_name (argv[0]);\n  setlocale (LC_ALL, \"\");\n  bindtextdomain (PACKAGE, LOCALEDIR);\n  textdomain (PACKAGE);\n\n  initialize_exit_failure (PRINTENV_FAILURE);\n  atexit (close_stdout);\n\n  while ((optc = getopt_long (argc, argv, \"+iu:0\", longopts, nullptr)) != -1)\n    {\n      switch (optc)\n        {\n        case '0':\n          opt_nul_terminate_output = true;\n          break;\n        case_GETOPT_HELP_CHAR;\n        case_GETOPT_VERSION_CHAR (PROGRAM_NAME, AUTHORS);\n        default:\n          usage (PRINTENV_FAILURE);\n        }\n    }\n\n  if (optind >= argc)\n    {\n      for (env = environ; *env != nullptr; ++env)\n        printf (\"%s%c\", *env, opt_nul_terminate_output ? '\\0' : '\\n');\n      ok = true;\n    }\n  else\n    {\n      int matches = 0;\n\n      for (i = optind; i < argc; ++i)\n        {\n          bool matched = false;\n\n          /* 'printenv a=b' is silent, even if 'a=b=c' is in environ.  */\n          if (strchr (argv[i], '='))\n            continue;\n\n          for (env = environ; *env; ++env)\n            {\n              ep = *env;\n              ap = argv[i];\n              while (*ep != '\\0' && *ap != '\\0' && *ep++ == *ap++)\n                {\n                  if (*ep == '=' && *ap == '\\0')\n                    {\n                      printf (\"%s%c\", ep + 1,\n                              opt_nul_terminate_output ? '\\0' : '\\n');\n                      matched = true;\n                      break;\n                    }\n                }\n            }\n\n          matches += matched;\n        }\n\n      ok = (matches == argc - optind);\n    }\n\n  return ok ? EXIT_SUCCESS : EXIT_FAILURE;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}