{
  "module_name": "dirname.c",
  "hash_id": "c701493e5f704640da7fe327c89ebb9d3ebd9ef8197f8d43c473a2e98953490e",
  "original_prompt": "Ingested from coreutils-9.4/src/dirname.c",
  "human_readable_source": " \n\n#include <config.h>\n#include <getopt.h>\n#include <stdio.h>\n#include <sys/types.h>\n\n#include \"system.h\"\n\n \n#define PROGRAM_NAME \"dirname\"\n\n#define AUTHORS \\\n  proper_name (\"David MacKenzie\"), \\\n  proper_name (\"Jim Meyering\")\n\nstatic struct option const longopts[] =\n{\n  {\"zero\", no_argument, nullptr, 'z'},\n  {GETOPT_HELP_OPTION_DECL},\n  {GETOPT_VERSION_OPTION_DECL},\n  {nullptr, 0, nullptr, 0}\n};\n\nvoid\nusage (int status)\n{\n  if (status != EXIT_SUCCESS)\n    emit_try_help ();\n  else\n    {\n      printf (_(\"\\\nUsage: %s [OPTION] NAME...\\n\\\n\"),\n              program_name);\n      fputs (_(\"\\\nOutput each NAME with its last non-slash component and trailing slashes\\n\\\nremoved; if NAME contains no /'s, output '.' (meaning the current directory).\\n\\\n\\n\\\n\"), stdout);\n      fputs (_(\"\\\n  -z, --zero     end each output line with NUL, not newline\\n\\\n\"), stdout);\n      fputs (HELP_OPTION_DESCRIPTION, stdout);\n      fputs (VERSION_OPTION_DESCRIPTION, stdout);\n      printf (_(\"\\\n\\n\\\nExamples:\\n\\\n  %s /usr/bin/          -> \\\"/usr\\\"\\n\\\n  %s dir1/str dir2/str  -> \\\"dir1\\\" followed by \\\"dir2\\\"\\n\\\n  %s stdio.h            -> \\\".\\\"\\n\\\n\"),\n              program_name, program_name, program_name);\n      emit_ancillary_info (PROGRAM_NAME);\n    }\n  exit (status);\n}\n\nint\nmain (int argc, char **argv)\n{\n  static char const dot = '.';\n  bool use_nuls = false;\n  char const *result;\n  size_t len;\n\n  initialize_main (&argc, &argv);\n  set_program_name (argv[0]);\n  setlocale (LC_ALL, \"\");\n  bindtextdomain (PACKAGE, LOCALEDIR);\n  textdomain (PACKAGE);\n\n  atexit (close_stdout);\n\n  while (true)\n    {\n      int c = getopt_long (argc, argv, \"z\", longopts, nullptr);\n\n      if (c == -1)\n        break;\n\n      switch (c)\n        {\n        case 'z':\n          use_nuls = true;\n          break;\n\n        case_GETOPT_HELP_CHAR;\n        case_GETOPT_VERSION_CHAR (PROGRAM_NAME, AUTHORS);\n\n        default:\n          usage (EXIT_FAILURE);\n        }\n    }\n\n  if (argc < optind + 1)\n    {\n      error (0, 0, _(\"missing operand\"));\n      usage (EXIT_FAILURE);\n    }\n\n  for (; optind < argc; optind++)\n    {\n      result = argv[optind];\n      len = dir_len (result);\n\n      if (! len)\n        {\n          result = &dot;\n          len = 1;\n        }\n\n      fwrite (result, 1, len, stdout);\n      putchar (use_nuls ? '\\0' :'\\n');\n    }\n\n  return EXIT_SUCCESS;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}