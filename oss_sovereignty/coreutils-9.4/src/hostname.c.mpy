{
  "module_name": "hostname.c",
  "hash_id": "ef9f67474de14067a627006e127c7a672f5f2f6c6cc8d3f29455ac995b4d6970",
  "original_prompt": "Ingested from coreutils-9.4/src/hostname.c",
  "human_readable_source": " \n\n#include <config.h>\n#include <stdio.h>\n#include <sys/types.h>\n\n#include \"system.h\"\n#include \"long-options.h\"\n#include \"quote.h\"\n#include \"xgethostname.h\"\n\n \n#define PROGRAM_NAME \"hostname\"\n\n#define AUTHORS proper_name (\"Jim Meyering\")\n\n#ifndef HAVE_SETHOSTNAME\n# if defined HAVE_SYSINFO && defined HAVE_SYS_SYSTEMINFO_H\n#  include <sys/systeminfo.h>\n# endif\n\nstatic int\nsethostname (char const *name, size_t namelen)\n{\n# if defined HAVE_SYSINFO && defined HAVE_SYS_SYSTEMINFO_H\n   \n  return (sysinfo (SI_SET_HOSTNAME, name, namelen) < 0 ? -1 : 0);\n# else\n  errno = ENOTSUP;\n  return -1;\n# endif\n}\n#endif\n\nvoid\nusage (int status)\n{\n  if (status != EXIT_SUCCESS)\n    emit_try_help ();\n  else\n    {\n      printf (_(\"\\\nUsage: %s [NAME]\\n\\\n  or:  %s OPTION\\n\\\nPrint or set the hostname of the current system.\\n\\\n\\n\\\n\"),\n             program_name, program_name);\n      fputs (HELP_OPTION_DESCRIPTION, stdout);\n      fputs (VERSION_OPTION_DESCRIPTION, stdout);\n      emit_ancillary_info (PROGRAM_NAME);\n    }\n  exit (status);\n}\n\nint\nmain (int argc, char **argv)\n{\n  char *hostname;\n\n  initialize_main (&argc, &argv);\n  set_program_name (argv[0]);\n  setlocale (LC_ALL, \"\");\n  bindtextdomain (PACKAGE, LOCALEDIR);\n  textdomain (PACKAGE);\n\n  atexit (close_stdout);\n\n  parse_gnu_standard_options_only (argc, argv, PROGRAM_NAME, PACKAGE_NAME,\n                                   Version, true, usage, AUTHORS,\n                                   (char const *) nullptr);\n\n  if (optind + 1 < argc)\n     {\n       error (0, 0, _(\"extra operand %s\"), quote (argv[optind + 1]));\n       usage (EXIT_FAILURE);\n     }\n\n  if (optind + 1 == argc)\n    {\n      /* Set hostname to operand.  */\n      char const *name = argv[optind];\n      if (sethostname (name, strlen (name)) != 0)\n        error (EXIT_FAILURE, errno, _(\"cannot set name to %s\"),\n               quote (name));\n    }\n  else\n    {\n      hostname = xgethostname ();\n      if (hostname == nullptr)\n        error (EXIT_FAILURE, errno, _(\"cannot determine hostname\"));\n      puts (hostname);\n    }\n\n  main_exit (EXIT_SUCCESS);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}