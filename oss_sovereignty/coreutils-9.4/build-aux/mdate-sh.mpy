{
  "module_name": "mdate-sh",
  "hash_id": "b69b8348397c6c8e348c6b44f02acb15e519530cec1b18de008e640c1375c412",
  "original_prompt": "Ingested from coreutils-9.4/build-aux/mdate-sh",
  "human_readable_source": "#!/bin/sh\n# Get modification time of a file or directory and pretty-print it.\n\nscriptversion=2018-03-07.03; # UTC\n\n# Copyright (C) 1995-2023 Free Software Foundation, Inc.\n# written by Ulrich Drepper <drepper@gnu.ai.mit.edu>, June 1995\n#\n# This program is free software; you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation; either version 2, or (at your option)\n# any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n# As a special exception to the GNU General Public License, if you\n# distribute this file as part of a program that contains a\n# configuration script generated by Autoconf, you may include it under\n# the same distribution terms that you use for the rest of that program.\n\n# This file is maintained in Automake, please report\n# bugs to <bug-automake@gnu.org> or send patches to\n# <automake-patches@gnu.org>.\n\nif test -n \"${ZSH_VERSION+set}\" && (emulate sh) >/dev/null 2>&1; then\n  emulate sh\n  NULLCMD=:\n  # Pre-4.2 versions of Zsh do word splitting on ${1+\"$@\"}, which\n  # is contrary to our usage.  Disable this feature.\n  alias -g '${1+\"$@\"}'='\"$@\"'\n  setopt NO_GLOB_SUBST\nfi\n\ncase $1 in\n  '')\n     echo \"$0: No file.  Try '$0 --help' for more information.\" 1>&2\n     exit 1;\n     ;;\n  -h | --h*)\n    cat <<\\EOF\nUsage: mdate-sh [--help] [--version] FILE\n\nPretty-print the modification day of FILE, in the format:\n1 January 1970\n\nReport bugs to <bug-automake@gnu.org>.\nEOF\n    exit $?\n    ;;\n  -v | --v*)\n    echo \"mdate-sh $scriptversion\"\n    exit $?\n    ;;\nesac\n\nerror ()\n{\n  echo \"$0: $1\" >&2\n  exit 1\n}\n\n\n# Prevent date giving response in another language.\nLANG=C\nexport LANG\nLC_ALL=C\nexport LC_ALL\nLC_TIME=C\nexport LC_TIME\n\n# Use UTC to get reproducible result.\nTZ=UTC0\nexport TZ\n\n# GNU ls changes its time format in response to the TIME_STYLE\n# variable.  Since we cannot assume 'unset' works, revert this\n# variable to its documented default.\nif test \"${TIME_STYLE+set}\" = set; then\n  TIME_STYLE=posix-long-iso\n  export TIME_STYLE\nfi\n\nsave_arg1=$1\n\n# Find out how to get the extended ls output of a file or directory.\nif ls -L /dev/null 1>/dev/null 2>&1; then\n  ls_command='ls -L -l -d'\nelse\n  ls_command='ls -l -d'\nfi\n# Avoid user/group names that might have spaces, when possible.\nif ls -n /dev/null 1>/dev/null 2>&1; then\n  ls_command=\"$ls_command -n\"\nfi\n\n# A 'ls -l' line looks as follows on OS/2.\n#  drwxrwx---        0 Aug 11  2001 foo\n# This differs from Unix, which adds ownership information.\n#  drwxrwx---   2 root  root      4096 Aug 11  2001 foo\n#\n# To find the date, we split the line on spaces and iterate on words\n# until we find a month.  This cannot work with files whose owner is a\n# user named \"Jan\", or \"Feb\", etc.  However, it's unlikely that '/'\n# will be owned by a user whose name is a month.  So we first look at\n# the extended ls output of the root directory to decide how many\n# words should be skipped to get the date.\n\n# On HPUX /bin/sh, \"set\" interprets \"-rw-r--r--\" as options, so the \"x\" below.\nset x`$ls_command /`\n\n# Find which argument is the month.\nmonth=\ncommand=\nuntil test $month\ndo\n  test $# -gt 0 || error \"failed parsing '$ls_command /' output\"\n  shift\n  # Add another shift to the command.\n  command=\"$command shift;\"\n  case $1 in\n    Jan) month=January; nummonth=1;;\n    Feb) month=February; nummonth=2;;\n    Mar) month=March; nummonth=3;;\n    Apr) month=April; nummonth=4;;\n    May) month=May; nummonth=5;;\n    Jun) month=June; nummonth=6;;\n    Jul) month=July; nummonth=7;;\n    Aug) month=August; nummonth=8;;\n    Sep) month=September; nummonth=9;;\n    Oct) month=October; nummonth=10;;\n    Nov) month=November; nummonth=11;;\n    Dec) month=December; nummonth=12;;\n  esac\ndone\n\ntest -n \"$month\" || error \"failed parsing '$ls_command /' output\"\n\n# Get the extended ls output of the file or directory.\nset dummy x`eval \"$ls_command \\\"\\\\\\$save_arg1\\\"\"`\n\n# Remove all preceding arguments\neval $command\n\n# Because of the dummy argument above, month is in $2.\n#\n# On a POSIX system, we should have\n#\n# $# = 5\n# $1 = file size\n# $2 = month\n# $3 = day\n# $4 = year or time\n# $5 = filename\n#\n# On Darwin 7.7.0 and 7.6.0, we have\n#\n# $# = 4\n# $1 = day\n# $2 = month\n# $3 = year or time\n# $4 = filename\n\n# Get the month.\ncase $2 in\n  Jan) month=January; nummonth=1;;\n  Feb) month=February; nummonth=2;;\n  Mar) month=March; nummonth=3;;\n  Apr) month=April; nummonth=4;;\n  May) month=May; nummonth=5;;\n  Jun) month=June; nummonth=6;;\n  Jul) month=July; nummonth=7;;\n  Aug) month=August; nummonth=8;;\n  Sep) month=September; nummonth=9;;\n  Oct) month=October; nummonth=10;;\n  Nov) month=November; nummonth=11;;\n  Dec) month=December; nummonth=12;;\nesac\n\ncase $3 in\n  ???*) day=$1;;\n  *) day=$3; shift;;\nesac\n\n# Here we have to deal with the problem that the ls output gives either\n# the time of day or the year.\ncase $3 in\n  *:*) set `date`; eval year=\\$$#\n       case $2 in\n\t Jan) nummonthtod=1;;\n\t Feb) nummonthtod=2;;\n\t Mar) nummonthtod=3;;\n\t Apr) nummonthtod=4;;\n\t May) nummonthtod=5;;\n\t Jun) nummonthtod=6;;\n\t Jul) nummonthtod=7;;\n\t Aug) nummonthtod=8;;\n\t Sep) nummonthtod=9;;\n\t Oct) nummonthtod=10;;\n\t Nov) nummonthtod=11;;\n\t Dec) nummonthtod=12;;\n       esac\n       # For the first six month of the year the time notation can also\n       # be used for files modified in the last year.\n       if (expr $nummonth \\> $nummonthtod) > /dev/null;\n       then\n\t year=`expr $year - 1`\n       fi;;\n  *) year=$3;;\nesac\n\n# The result.\necho $day $month $year\n\n# Local Variables:\n# mode: shell-script\n# sh-indentation: 2\n# eval: (add-hook 'before-save-hook 'time-stamp)\n# time-stamp-start: \"scriptversion=\"\n# time-stamp-format: \"%:y-%02m-%02d.%02H\"\n# time-stamp-time-zone: \"UTC0\"\n# time-stamp-end: \"; # UTC\"\n# End:\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}