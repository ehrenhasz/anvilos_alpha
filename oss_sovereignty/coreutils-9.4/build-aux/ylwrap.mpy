{
  "module_name": "ylwrap",
  "hash_id": "3f064d6a73ee59ba5c0e611a3223adc36d64cca41f7e97dfb048589780f5cb02",
  "original_prompt": "Ingested from coreutils-9.4/build-aux/ylwrap",
  "human_readable_source": "#! /bin/sh\n# ylwrap - wrapper for lex/yacc invocations.\n\nscriptversion=2018-03-07.03; # UTC\n\n# Copyright (C) 1996-2021 Free Software Foundation, Inc.\n#\n# Written by Tom Tromey <tromey@cygnus.com>.\n#\n# This program is free software; you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation; either version 2, or (at your option)\n# any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n# As a special exception to the GNU General Public License, if you\n# distribute this file as part of a program that contains a\n# configuration script generated by Autoconf, you may include it under\n# the same distribution terms that you use for the rest of that program.\n\n# This file is maintained in Automake, please report\n# bugs to <bug-automake@gnu.org> or send patches to\n# <automake-patches@gnu.org>.\n\nget_dirname ()\n{\n  case $1 in\n    */*|*\\\\*) printf '%s\\n' \"$1\" | sed -e 's|\\([\\\\/]\\)[^\\\\/]*$|\\1|';;\n    # Otherwise,  we want the empty string (not \".\").\n  esac\n}\n\n# guard FILE\n# ----------\n# The CPP macro used to guard inclusion of FILE.\nguard ()\n{\n  printf '%s\\n' \"$1\"                                                    \\\n    | sed                                                               \\\n        -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'   \\\n        -e 's/[^ABCDEFGHIJKLMNOPQRSTUVWXYZ]/_/g'                        \\\n        -e 's/__*/_/g'\n}\n\n# quote_for_sed [STRING]\n# ----------------------\n# Return STRING (or stdin) quoted to be used as a sed pattern.\nquote_for_sed ()\n{\n  case $# in\n    0) cat;;\n    1) printf '%s\\n' \"$1\";;\n  esac \\\n    | sed -e 's|[][\\\\.*]|\\\\&|g'\n}\n\ncase \"$1\" in\n  '')\n    echo \"$0: No files given.  Try '$0 --help' for more information.\" 1>&2\n    exit 1\n    ;;\n  --basedir)\n    basedir=$2\n    shift 2\n    ;;\n  -h|--h*)\n    cat <<\\EOF\nUsage: ylwrap [--help|--version] INPUT [OUTPUT DESIRED]... -- PROGRAM [ARGS]...\n\nWrapper for lex/yacc invocations, renaming files as desired.\n\n  INPUT is the input file\n  OUTPUT is one file PROG generates\n  DESIRED is the file we actually want instead of OUTPUT\n  PROGRAM is program to run\n  ARGS are passed to PROG\n\nAny number of OUTPUT,DESIRED pairs may be used.\n\nReport bugs to <bug-automake@gnu.org>.\nEOF\n    exit $?\n    ;;\n  -v|--v*)\n    echo \"ylwrap $scriptversion\"\n    exit $?\n    ;;\nesac\n\n\n# The input.\ninput=$1\nshift\n# We'll later need for a correct munging of \"#line\" directives.\ninput_sub_rx=`get_dirname \"$input\" | quote_for_sed`\ncase $input in\n  [\\\\/]* | ?:[\\\\/]*)\n    # Absolute path; do nothing.\n    ;;\n  *)\n    # Relative path.  Make it absolute.\n    input=`pwd`/$input\n    ;;\nesac\ninput_rx=`get_dirname \"$input\" | quote_for_sed`\n\n# Since DOS filename conventions don't allow two dots,\n# the DOS version of Bison writes out y_tab.c instead of y.tab.c\n# and y_tab.h instead of y.tab.h. Test to see if this is the case.\ny_tab_nodot=false\nif test -f y_tab.c || test -f y_tab.h; then\n  y_tab_nodot=true\nfi\n\n# The parser itself, the first file, is the destination of the .y.c\n# rule in the Makefile.\nparser=$1\n\n# A sed program to s/FROM/TO/g for all the FROM/TO so that, for\n# instance, we rename #include \"y.tab.h\" into #include \"parse.h\"\n# during the conversion from y.tab.c to parse.c.\nsed_fix_filenames=\n\n# Also rename header guards, as Bison 2.7 for instance uses its header\n# guard in its implementation file.\nsed_fix_header_guards=\n\nwhile test $# -ne 0; do\n  if test x\"$1\" = x\"--\"; then\n    shift\n    break\n  fi\n  from=$1\n  # Handle y_tab.c and y_tab.h output by DOS\n  if $y_tab_nodot; then\n    case $from in\n      \"y.tab.c\") from=y_tab.c;;\n      \"y.tab.h\") from=y_tab.h;;\n    esac\n  fi\n  shift\n  to=$1\n  shift\n  sed_fix_filenames=\"${sed_fix_filenames}s|\"`quote_for_sed \"$from\"`\"|$to|g;\"\n  sed_fix_header_guards=\"${sed_fix_header_guards}s|\"`guard \"$from\"`\"|\"`guard \"$to\"`\"|g;\"\ndone\n\n# The program to run.\nprog=$1\nshift\n# Make any relative path in $prog absolute.\ncase $prog in\n  [\\\\/]* | ?:[\\\\/]*) ;;\n  *[\\\\/]*) prog=`pwd`/$prog ;;\nesac\n\ndirname=ylwrap$$\ndo_exit=\"cd '`pwd`' && rm -rf $dirname > /dev/null 2>&1;\"' (exit $ret); exit $ret'\ntrap \"ret=129; $do_exit\" 1\ntrap \"ret=130; $do_exit\" 2\ntrap \"ret=141; $do_exit\" 13\ntrap \"ret=143; $do_exit\" 15\nmkdir $dirname || exit 1\n\ncd $dirname\n\ncase $# in\n  0) \"$prog\" \"$input\" ;;\n  *) \"$prog\" \"$@\" \"$input\" ;;\nesac\nret=$?\n\nif test $ret -eq 0; then\n  for from in *\n  do\n    to=`printf '%s\\n' \"$from\" | sed \"$sed_fix_filenames\"`\n    if test -f \"$from\"; then\n      # If $2 is an absolute path name, then just use that,\n      # otherwise prepend '../'.\n      case $to in\n        [\\\\/]* | ?:[\\\\/]*) target=$to;;\n        *) target=../$to;;\n      esac\n\n      # Do not overwrite unchanged header files to avoid useless\n      # recompilations.  Always update the parser itself: it is the\n      # destination of the .y.c rule in the Makefile.  Divert the\n      # output of all other files to a temporary file so we can\n      # compare them to existing versions.\n      if test $from != $parser; then\n        realtarget=$target\n        target=tmp-`printf '%s\\n' \"$target\" | sed 's|.*[\\\\/]||g'`\n      fi\n\n      # Munge \"#line\" or \"#\" directives.  Don't let the resulting\n      # debug information point at an absolute srcdir.  Use the real\n      # output file name, not yy.lex.c for instance.  Adjust the\n      # include guards too.\n      sed -e \"/^#/!b\"                           \\\n          -e \"s|$input_rx|$input_sub_rx|\"       \\\n          -e \"$sed_fix_filenames\"               \\\n          -e \"$sed_fix_header_guards\"           \\\n        \"$from\" >\"$target\" || ret=$?\n\n      # Check whether files must be updated.\n      if test \"$from\" != \"$parser\"; then\n        if test -f \"$realtarget\" && cmp -s \"$realtarget\" \"$target\"; then\n          echo \"$to is unchanged\"\n          rm -f \"$target\"\n        else\n          echo \"updating $to\"\n          mv -f \"$target\" \"$realtarget\"\n        fi\n      fi\n    else\n      # A missing file is only an error for the parser.  This is a\n      # blatant hack to let us support using \"yacc -d\".  If -d is not\n      # specified, don't fail when the header file is \"missing\".\n      if test \"$from\" = \"$parser\"; then\n        ret=1\n      fi\n    fi\n  done\nfi\n\n# Remove the directory.\ncd ..\nrm -rf $dirname\n\nexit $ret\n\n# Local Variables:\n# mode: shell-script\n# sh-indentation: 2\n# eval: (add-hook 'before-save-hook 'time-stamp)\n# time-stamp-start: \"scriptversion=\"\n# time-stamp-format: \"%:y-%02m-%02d.%02H\"\n# time-stamp-time-zone: \"UTC0\"\n# time-stamp-end: \"; # UTC\"\n# End:\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}