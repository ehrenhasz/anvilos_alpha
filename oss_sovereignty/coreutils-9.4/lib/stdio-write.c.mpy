{
  "module_name": "stdio-write.c",
  "hash_id": "2e203a249112c171c02fb00be1d5bd9baa735160401a41c9556bf445ed25be88",
  "original_prompt": "Ingested from coreutils-9.4/lib/stdio-write.c",
  "human_readable_source": " \n#include <stdio.h>\n\n \n#if GNULIB_NONBLOCKING || GNULIB_SIGPIPE\n\n \n\n# if defined _WIN32 && ! defined __CYGWIN__\n\n#  include <errno.h>\n#  include <signal.h>\n#  include <io.h>\n\n#  define WIN32_LEAN_AND_MEAN   \n#  include <windows.h>\n\n#  if GNULIB_MSVC_NOTHROW\n#   include \"msvc-nothrow.h\"\n#  else\n#   include <io.h>\n#  endif\n\n \n#  undef GetNamedPipeHandleState\n#  define GetNamedPipeHandleState GetNamedPipeHandleStateA\n\n#  if GNULIB_NONBLOCKING\n#   define CLEAR_ERRNO \\\n      errno = 0;\n#   define HANDLE_ENOSPC \\\n          if (errno == ENOSPC && ferror (stream))                             \\\n            {                                                                 \\\n              int fd = fileno (stream);                                       \\\n              if (fd >= 0)                                                    \\\n                {                                                             \\\n                  HANDLE h = (HANDLE) _get_osfhandle (fd);                    \\\n                  if (GetFileType (h) == FILE_TYPE_PIPE)                      \\\n                    {                                                         \\\n                                                  \\\n                      DWORD state;                                            \\\n                      if (GetNamedPipeHandleState (h, &state, NULL, NULL,     \\\n                                                   NULL, NULL, 0)             \\\n                          && (state & PIPE_NOWAIT) != 0)                      \\\n                                     \\\n                        errno = EAGAIN;                                       \\\n                    }                                                         \\\n                }                                                             \\\n            }                                                                 \\\n          else\n#  else\n#   define CLEAR_ERRNO\n#   define HANDLE_ENOSPC\n#  endif\n\n#  if GNULIB_SIGPIPE\n#   define CLEAR_LastError \\\n      SetLastError (0);\n#   define HANDLE_ERROR_NO_DATA \\\n          if (GetLastError () == ERROR_NO_DATA && ferror (stream))            \\\n            {                                                                 \\\n              int fd = fileno (stream);                                       \\\n              if (fd >= 0                                                     \\\n                  && GetFileType ((HANDLE) _get_osfhandle (fd))               \\\n                     == FILE_TYPE_PIPE)                                       \\\n                {                                                             \\\n                                            \\\n                  raise (SIGPIPE);                                            \\\n                                                        \\\n                  errno = EPIPE;                                              \\\n                }                                                             \\\n            }                                                                 \\\n          else\n#  else\n#   define CLEAR_LastError\n#   define HANDLE_ERROR_NO_DATA\n#  endif\n\n#  define CALL_WITH_SIGPIPE_EMULATION(RETTYPE, EXPRESSION, FAILED) \\\n  if (ferror (stream))                                                        \\\n    return (EXPRESSION);                                                      \\\n  else                                                                        \\\n    {                                                                         \\\n      RETTYPE ret;                                                            \\\n      CLEAR_ERRNO                                                             \\\n      CLEAR_LastError                                                         \\\n      ret = (EXPRESSION);                                                     \\\n      if (FAILED)                                                             \\\n        {                                                                     \\\n          HANDLE_ENOSPC                                                       \\\n          HANDLE_ERROR_NO_DATA                                                \\\n          ;                                                                   \\\n        }                                                                     \\\n      return ret;                                                             \\\n    }\n\n#  if !REPLACE_PRINTF_POSIX  \nint\nprintf (const char *format, ...)\n{\n  int retval;\n  va_list args;\n\n  va_start (args, format);\n  retval = vfprintf (stdout, format, args);\n  va_end (args);\n\n  return retval;\n}\n#  endif\n\n#  if !REPLACE_FPRINTF_POSIX  \nint\nfprintf (FILE *stream, const char *format, ...)\n{\n  int retval;\n  va_list args;\n\n  va_start (args, format);\n  retval = vfprintf (stream, format, args);\n  va_end (args);\n\n  return retval;\n}\n#  endif\n\n#  if !REPLACE_VPRINTF_POSIX  \nint\nvprintf (const char *format, va_list args)\n{\n  return vfprintf (stdout, format, args);\n}\n#  endif\n\n#  if !REPLACE_VFPRINTF_POSIX  \nint\nvfprintf (FILE *stream, const char *format, va_list args)\n#undef vfprintf\n{\n  CALL_WITH_SIGPIPE_EMULATION (int, vfprintf (stream, format, args), ret == EOF)\n}\n#  endif\n\nint\nputchar (int c)\n{\n  return fputc (c, stdout);\n}\n\nint\nfputc (int c, FILE *stream)\n#undef fputc\n{\n  CALL_WITH_SIGPIPE_EMULATION (int, fputc (c, stream), ret == EOF)\n}\n\nint\nfputs (const char *string, FILE *stream)\n#undef fputs\n{\n  CALL_WITH_SIGPIPE_EMULATION (int, fputs (string, stream), ret == EOF)\n}\n\nint\nputs (const char *string)\n#undef puts\n{\n  FILE *stream = stdout;\n  CALL_WITH_SIGPIPE_EMULATION (int, puts (string), ret == EOF)\n}\n\nsize_t\nfwrite (const void *ptr, size_t s, size_t n, FILE *stream)\n#undef fwrite\n{\n  CALL_WITH_SIGPIPE_EMULATION (size_t, fwrite (ptr, s, n, stream), ret < n)\n}\n\n# endif\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}