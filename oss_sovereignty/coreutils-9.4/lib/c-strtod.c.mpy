{
  "module_name": "c-strtod.c",
  "hash_id": "b552f01b5425a1cc1ee9b28ebde2b546f9cd2fe95c076f3a41c46f6e448b0ca6",
  "original_prompt": "Ingested from coreutils-9.4/lib/c-strtod.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include \"c-strtod.h\"\n\n#include <errno.h>\n#include <locale.h>\n#include <stdlib.h>\n#include <string.h>\n\n#if LONG\n# define C_STRTOD c_strtold\n# define DOUBLE long double\n# define STRTOD_L strtold_l\n# define HAVE_GOOD_STRTOD_L (HAVE_STRTOLD_L && !GNULIB_defined_strtold_function)\n# define STRTOD strtold\n#else\n# define C_STRTOD c_strtod\n# define DOUBLE double\n# define STRTOD_L strtod_l\n# define HAVE_GOOD_STRTOD_L (HAVE_STRTOD_L && !GNULIB_defined_strtod_function)\n# define STRTOD strtod\n#endif\n\n#if defined LC_ALL_MASK \\\n    && ((LONG ? HAVE_GOOD_STRTOLD_L : HAVE_GOOD_STRTOD_L) \\\n        || HAVE_WORKING_USELOCALE)\n\n \nstatic volatile locale_t c_locale_cache;\n\n \nstatic locale_t\nc_locale (void)\n{\n  if (!c_locale_cache)\n    c_locale_cache = newlocale (LC_ALL_MASK, \"C\", (locale_t) 0);\n  return c_locale_cache;\n}\n\n#endif\n\nDOUBLE\nC_STRTOD (char const *nptr, char **endptr)\n{\n  DOUBLE r;\n\n#if defined LC_ALL_MASK \\\n    && ((LONG ? HAVE_GOOD_STRTOLD_L : HAVE_GOOD_STRTOD_L) \\\n        || HAVE_WORKING_USELOCALE)\n\n  locale_t locale = c_locale ();\n  if (!locale)\n    {\n      if (endptr)\n        *endptr = (char *) nptr;\n      return 0;  \n    }\n\n# if (LONG ? HAVE_GOOD_STRTOLD_L : HAVE_GOOD_STRTOD_L)\n\n  r = STRTOD_L (nptr, endptr, locale);\n\n# else  \n\n  locale_t old_locale = uselocale (locale);\n  if (old_locale == (locale_t)0)\n    {\n      if (endptr)\n        *endptr = (char *) nptr;\n      return 0;  \n    }\n\n  r = STRTOD (nptr, endptr);\n\n  int saved_errno = errno;\n  if (uselocale (old_locale) == (locale_t)0)\n     \n    abort ();\n  errno = saved_errno;\n\n# endif\n\n#else\n\n  char *saved_locale = setlocale (LC_NUMERIC, NULL);\n\n  if (saved_locale)\n    {\n      saved_locale = strdup (saved_locale);\n      if (saved_locale == NULL)\n        {\n          if (endptr)\n            *endptr = (char *) nptr;\n          return 0;  \n        }\n      setlocale (LC_NUMERIC, \"C\");\n    }\n\n  r = STRTOD (nptr, endptr);\n\n  if (saved_locale)\n    {\n      int saved_errno = errno;\n\n      setlocale (LC_NUMERIC, saved_locale);\n      free (saved_locale);\n      errno = saved_errno;\n    }\n\n#endif\n\n  return r;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}