{
  "module_name": "uname.c",
  "hash_id": "7c11bfda3b426bfd2f9dd554afb03418d9a89232ce27cee6da6ca9ecb41f9b65",
  "original_prompt": "Ingested from coreutils-9.4/lib/uname.c",
  "human_readable_source": " \n#include <sys/utsname.h>\n\n \n#if defined _WIN32 && ! defined __CYGWIN__\n\n# include <stdio.h>\n# include <stdlib.h>\n# include <string.h>\n# include <unistd.h>\n# include <windows.h>\n\n \n# ifndef VER_PLATFORM_WIN32_CE\n#  define VER_PLATFORM_WIN32_CE 3\n# endif\n\n \n# ifndef PROCESSOR_ARCHITECTURE_AMD64\n#  define PROCESSOR_ARCHITECTURE_AMD64 9\n# endif\n# ifndef PROCESSOR_ARCHITECTURE_IA32_ON_WIN64\n#  define PROCESSOR_ARCHITECTURE_IA32_ON_WIN64 10\n# endif\n\n \n# ifndef PROCESSOR_AMD_X8664\n#  define PROCESSOR_AMD_X8664 8664\n# endif\n\n \n# undef OSVERSIONINFO\n# define OSVERSIONINFO OSVERSIONINFOA\n# undef GetVersionEx\n# define GetVersionEx GetVersionExA\n\nint\nuname (struct utsname *buf)\n{\n  OSVERSIONINFO version;\n  OSVERSIONINFOEX versionex;\n  BOOL have_versionex;  \n  const char *super_version;\n\n   \n  versionex.dwOSVersionInfoSize = sizeof (OSVERSIONINFOEX);\n  have_versionex = GetVersionEx ((OSVERSIONINFO *) &versionex);\n  if (have_versionex)\n    {\n       \n      memcpy (&version, &versionex, sizeof (OSVERSIONINFO));\n    }\n  else\n    {\n      version.dwOSVersionInfoSize = sizeof (OSVERSIONINFO);\n      if (!GetVersionEx (&version))\n        abort ();\n    }\n\n   \n  if (gethostname (buf->nodename, sizeof (buf->nodename)) < 0)\n    strcpy (buf->nodename, \"localhost\");\n\n   \n  if (version.dwPlatformId == VER_PLATFORM_WIN32_NT)\n    {\n       \n      super_version = \"NT\";\n    }\n  else if (version.dwPlatformId == VER_PLATFORM_WIN32_CE)\n    {\n       \n      super_version = \"CE\";\n    }\n  else if (version.dwPlatformId == VER_PLATFORM_WIN32_WINDOWS)\n    {\n       \n      switch (version.dwMinorVersion)\n        {\n        case 0:\n          super_version = \"95\";\n          break;\n        case 10:\n          super_version = \"98\";\n          break;\n        case 90:\n          super_version = \"ME\";\n          break;\n        default:\n          super_version = \"\";\n          break;\n        }\n    }\n  else\n    super_version = \"\";\n\n   \n# ifdef __MINGW32__\n   \n  sprintf (buf->sysname, \"MINGW32_%s-%u.%u\", super_version,\n           (unsigned int) version.dwMajorVersion,\n           (unsigned int) version.dwMinorVersion);\n# else\n  sprintf (buf->sysname, \"Windows%s\", super_version);\n# endif\n\n   \n   \n  if (version.dwPlatformId == VER_PLATFORM_WIN32_NT)\n    {\n       \n      struct windows_version\n        {\n          int major;\n          int minor;\n          unsigned int server_offset;\n          const char *name;\n        };\n\n       \n      #define VERSION1(major, minor, name) \\\n        { major, minor, 0, name }\n      #define VERSION2(major, minor, workstation, server) \\\n        { major, minor, sizeof workstation, workstation \"\\0\" server }\n      static const struct windows_version versions[] =\n        {\n          VERSION2 (3, -1, \"Windows NT Workstation\", \"Windows NT Server\"),\n          VERSION2 (4, -1, \"Windows NT Workstation\", \"Windows NT Server\"),\n          VERSION1 (5, 0, \"Windows 2000\"),\n          VERSION1 (5, 1, \"Windows XP\"),\n          VERSION1 (5, 2, \"Windows Server 2003\"),\n          VERSION2 (6, 0, \"Windows Vista\", \"Windows Server 2008\"),\n          VERSION2 (6, 1, \"Windows 7\", \"Windows Server 2008 R2\"),\n          VERSION2 (-1, -1, \"Windows\", \"Windows Server\")\n        };\n      const char *base;\n      const struct windows_version *v = versions;\n\n       \n      while ((v->major != version.dwMajorVersion && v->major != -1)\n             || (v->minor != version.dwMinorVersion && v->minor != -1))\n        v++;\n\n      if (have_versionex && versionex.wProductType != VER_NT_WORKSTATION)\n        base = v->name + v->server_offset;\n      else\n        base = v->name;\n      if (v->major == -1 || v->minor == -1)\n        sprintf (buf->release, \"%s %u.%u\",\n                 base,\n                 (unsigned int) version.dwMajorVersion,\n                 (unsigned int) version.dwMinorVersion);\n      else\n        strcpy (buf->release, base);\n    }\n  else if (version.dwPlatformId == VER_PLATFORM_WIN32_CE)\n    {\n       \n      sprintf (buf->release, \"Windows CE %u.%u\",\n               (unsigned int) version.dwMajorVersion,\n               (unsigned int) version.dwMinorVersion);\n    }\n  else\n    {\n       \n      sprintf (buf->release, \"Windows %s\", super_version);\n    }\n  strcpy (buf->version, version.szCSDVersion);\n\n   \n  {\n    SYSTEM_INFO info;\n\n    GetSystemInfo (&info);\n     \n    if (version.dwPlatformId == VER_PLATFORM_WIN32_NT\n        || version.dwPlatformId == VER_PLATFORM_WIN32_CE)\n      {\n         \n        switch (info.wProcessorArchitecture)\n          {\n          case PROCESSOR_ARCHITECTURE_AMD64:\n            strcpy (buf->machine, \"x86_64\");\n            break;\n          case PROCESSOR_ARCHITECTURE_IA64:\n            strcpy (buf->machine, \"ia64\");\n            break;\n          case PROCESSOR_ARCHITECTURE_INTEL:\n            strcpy (buf->machine, \"i386\");\n            if (info.wProcessorLevel >= 3)\n              buf->machine[1] =\n                '0' + (info.wProcessorLevel <= 6 ? info.wProcessorLevel : 6);\n            break;\n          case PROCESSOR_ARCHITECTURE_IA32_ON_WIN64:\n            strcpy (buf->machine, \"i686\");\n            break;\n          case PROCESSOR_ARCHITECTURE_MIPS:\n            strcpy (buf->machine, \"mips\");\n            break;\n          case PROCESSOR_ARCHITECTURE_ALPHA:\n          case PROCESSOR_ARCHITECTURE_ALPHA64:\n            strcpy (buf->machine, \"alpha\");\n            break;\n          case PROCESSOR_ARCHITECTURE_PPC:\n            strcpy (buf->machine, \"powerpc\");\n            break;\n          case PROCESSOR_ARCHITECTURE_SHX:\n            strcpy (buf->machine, \"sh\");\n            break;\n          case PROCESSOR_ARCHITECTURE_ARM:\n            strcpy (buf->machine, \"arm\");\n            break;\n          default:\n            strcpy (buf->machine, \"unknown\");\n            break;\n          }\n      }\n    else\n      {\n         \n        switch (info.dwProcessorType)\n          {\n          case PROCESSOR_AMD_X8664:\n            strcpy (buf->machine, \"x86_64\");\n            break;\n          case PROCESSOR_INTEL_IA64:\n            strcpy (buf->machine, \"ia64\");\n            break;\n          default:\n            if (info.dwProcessorType % 100 == 86)\n              sprintf (buf->machine, \"i%u\",\n                       (unsigned int) info.dwProcessorType);\n            else\n              strcpy (buf->machine, \"unknown\");\n            break;\n          }\n      }\n  }\n\n  return 0;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}