{
  "module_name": "sig2str.c",
  "hash_id": "cc7154573100abcd4144a34b4a0e788b522047c47c6efbaec72f15926615e039",
  "original_prompt": "Ingested from coreutils-9.4/lib/sig2str.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include <limits.h>\n#include <signal.h>\n#include <stdlib.h>\n#include <stdio.h>\n#include <string.h>\n\n#include \"sig2str.h\"\n\n#ifndef SIGRTMIN\n# define SIGRTMIN 0\n# undef SIGRTMAX\n#endif\n#ifndef SIGRTMAX\n# define SIGRTMAX (SIGRTMIN - 1)\n#endif\n\n#define NUMNAME(name) { SIG##name, #name }\n\n \nstatic struct numname { int num; char const name[8]; } numname_table[] =\n  {\n     \n#ifdef SIGHUP\n    NUMNAME (HUP),\n#endif\n#ifdef SIGINT\n    NUMNAME (INT),\n#endif\n#ifdef SIGQUIT\n    NUMNAME (QUIT),\n#endif\n#ifdef SIGILL\n    NUMNAME (ILL),\n#endif\n#ifdef SIGTRAP\n    NUMNAME (TRAP),\n#endif\n#ifdef SIGABRT\n    NUMNAME (ABRT),\n#endif\n#ifdef SIGFPE\n    NUMNAME (FPE),\n#endif\n#ifdef SIGKILL\n    NUMNAME (KILL),\n#endif\n#ifdef SIGSEGV\n    NUMNAME (SEGV),\n#endif\n     \n#ifdef SIGBUS\n    NUMNAME (BUS),\n#endif\n#ifdef SIGPIPE\n    NUMNAME (PIPE),\n#endif\n#ifdef SIGALRM\n    NUMNAME (ALRM),\n#endif\n#ifdef SIGTERM\n    NUMNAME (TERM),\n#endif\n#ifdef SIGUSR1\n    NUMNAME (USR1),\n#endif\n#ifdef SIGUSR2\n    NUMNAME (USR2),\n#endif\n#ifdef SIGCHLD\n    NUMNAME (CHLD),\n#endif\n#ifdef SIGURG\n    NUMNAME (URG),\n#endif\n#ifdef SIGSTOP\n    NUMNAME (STOP),\n#endif\n#ifdef SIGTSTP\n    NUMNAME (TSTP),\n#endif\n#ifdef SIGCONT\n    NUMNAME (CONT),\n#endif\n#ifdef SIGTTIN\n    NUMNAME (TTIN),\n#endif\n#ifdef SIGTTOU\n    NUMNAME (TTOU),\n#endif\n\n     \n#ifdef SIGSYS\n    NUMNAME (SYS),\n#endif\n#ifdef SIGPOLL\n    NUMNAME (POLL),\n#endif\n#ifdef SIGVTALRM\n    NUMNAME (VTALRM),\n#endif\n#ifdef SIGPROF\n    NUMNAME (PROF),\n#endif\n#ifdef SIGXCPU\n    NUMNAME (XCPU),\n#endif\n#ifdef SIGXFSZ\n    NUMNAME (XFSZ),\n#endif\n\n     \n#ifdef SIGIOT\n    NUMNAME (IOT),       \n#endif\n#ifdef SIGEMT\n    NUMNAME (EMT),\n#endif\n\n     \n#ifdef SIGPHONE\n    NUMNAME (PHONE),\n#endif\n#ifdef SIGWIND\n    NUMNAME (WIND),\n#endif\n\n     \n#ifdef SIGCLD\n    NUMNAME (CLD),\n#endif\n#ifdef SIGPWR\n    NUMNAME (PWR),\n#endif\n\n     \n#ifdef SIGCANCEL\n    NUMNAME (CANCEL),\n#endif\n#ifdef SIGLWP\n    NUMNAME (LWP),\n#endif\n#ifdef SIGWAITING\n    NUMNAME (WAITING),\n#endif\n#ifdef SIGFREEZE\n    NUMNAME (FREEZE),\n#endif\n#ifdef SIGTHAW\n    NUMNAME (THAW),\n#endif\n#ifdef SIGLOST\n    NUMNAME (LOST),\n#endif\n#ifdef SIGWINCH\n    NUMNAME (WINCH),\n#endif\n\n     \n#ifdef SIGINFO\n    NUMNAME (INFO),\n#endif\n#ifdef SIGIO\n    NUMNAME (IO),\n#endif\n#ifdef SIGSTKFLT\n    NUMNAME (STKFLT),\n#endif\n\n     \n#ifdef SIGCPUFAIL\n    NUMNAME (CPUFAIL),\n#endif\n\n     \n#ifdef SIGDANGER\n    NUMNAME (DANGER),\n#endif\n#ifdef SIGGRANT\n    NUMNAME (GRANT),\n#endif\n#ifdef SIGMIGRATE\n    NUMNAME (MIGRATE),\n#endif\n#ifdef SIGMSG\n    NUMNAME (MSG),\n#endif\n#ifdef SIGPRE\n    NUMNAME (PRE),\n#endif\n#ifdef SIGRETRACT\n    NUMNAME (RETRACT),\n#endif\n#ifdef SIGSAK\n    NUMNAME (SAK),\n#endif\n#ifdef SIGSOUND\n    NUMNAME (SOUND),\n#endif\n\n     \n#ifdef SIGALRM1\n    NUMNAME (ALRM1),     \n#endif\n#ifdef SIGKAP\n    NUMNAME (KAP),       \n#endif\n#ifdef SIGVIRT\n    NUMNAME (VIRT),      \n#endif\n#ifdef SIGWINDOW\n    NUMNAME (WINDOW),    \n#endif\n\n     \n#ifdef SIGTHR\n    NUMNAME (THR),\n#endif\n\n     \n#ifdef SIGKILLTHR\n    NUMNAME (KILLTHR),\n#endif\n\n     \n#ifdef SIGDIL\n    NUMNAME (DIL),\n#endif\n\n     \n#ifdef SIGBREAK\n    NUMNAME (BREAK),\n#endif\n\n     \n    { 0, \"EXIT\" }\n  };\n\n#define NUMNAME_ENTRIES (sizeof numname_table / sizeof numname_table[0])\n\n \n#define ISDIGIT(c) ((unsigned int) (c) - '0' <= 9)\n\n \n\nstatic int\nstr2signum (char const *signame)\n{\n  if (ISDIGIT (*signame))\n    {\n      char *endp;\n      long int n = strtol (signame, &endp, 10);\n      if (! *endp && n <= SIGNUM_BOUND)\n        return n;\n    }\n  else\n    {\n      unsigned int i;\n      for (i = 0; i < NUMNAME_ENTRIES; i++)\n        if (strcmp (numname_table[i].name, signame) == 0)\n          return numname_table[i].num;\n\n      {\n        char *endp;\n        int rtmin = SIGRTMIN;\n        int rtmax = SIGRTMAX;\n\n        if (0 < rtmin && strncmp (signame, \"RTMIN\", 5) == 0)\n          {\n            long int n = strtol (signame + 5, &endp, 10);\n            if (! *endp && 0 <= n && n <= rtmax - rtmin)\n              return rtmin + n;\n          }\n        else if (0 < rtmax && strncmp (signame, \"RTMAX\", 5) == 0)\n          {\n            long int n = strtol (signame + 5, &endp, 10);\n            if (! *endp && rtmin - rtmax <= n && n <= 0)\n              return rtmax + n;\n          }\n      }\n    }\n\n  return -1;\n}\n\n \n\nint\nstr2sig (char const *signame, int *signum)\n{\n  *signum = str2signum (signame);\n  return *signum < 0 ? -1 : 0;\n}\n\n \n\nint\nsig2str (int signum, char *signame)\n{\n  unsigned int i;\n  for (i = 0; i < NUMNAME_ENTRIES; i++)\n    if (numname_table[i].num == signum)\n      {\n        strcpy (signame, numname_table[i].name);\n        return 0;\n      }\n\n  {\n    int rtmin = SIGRTMIN;\n    int rtmax = SIGRTMAX;\n    int base, delta;\n\n    if (! (rtmin <= signum && signum <= rtmax))\n      return -1;\n\n    if (signum <= rtmin + (rtmax - rtmin) / 2)\n      {\n        strcpy (signame, \"RTMIN\");\n        base = rtmin;\n      }\n    else\n      {\n        strcpy (signame, \"RTMAX\");\n        base = rtmax;\n      }\n\n    delta = signum - base;\n    if (delta != 0)\n      sprintf (signame + 5, \"%+d\", delta);\n    return 0;\n  }\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}