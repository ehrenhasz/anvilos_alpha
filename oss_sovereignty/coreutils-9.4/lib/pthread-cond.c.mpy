{
  "module_name": "pthread-cond.c",
  "hash_id": "76b4db30c9483bd85f3d0a5d2a2cfa8ae1544cf64ae594d919e317cd402dc92a",
  "original_prompt": "Ingested from coreutils-9.4/lib/pthread-cond.c",
  "human_readable_source": " \n\n#include <config.h>\n\n \n#include <pthread.h>\n\n#if (defined _WIN32 && ! defined __CYGWIN__) && USE_WINDOWS_THREADS\n# include \"windows-thread.h\"\n#else\n# include <errno.h>\n# include <limits.h>\n# include <sys/time.h>\n# include <time.h>\n#endif\n\n#if ((defined _WIN32 && ! defined __CYGWIN__) && USE_WINDOWS_THREADS) || !HAVE_PTHREAD_H\n\nint\npthread_condattr_init (pthread_condattr_t *attr)\n{\n  *attr = 0;\n  return 0;\n}\n\nint\npthread_condattr_destroy (_GL_UNUSED pthread_condattr_t *attr)\n{\n  return 0;\n}\n\n#endif\n\n#if (defined _WIN32 && ! defined __CYGWIN__) && USE_WINDOWS_THREADS\n \n\nint\npthread_cond_init (pthread_cond_t *cond,\n                   _GL_UNUSED const pthread_condattr_t *attr)\n{\n  return glwthread_cond_init (cond);\n}\n\nint\npthread_cond_wait (pthread_cond_t *cond, pthread_mutex_t *mutex)\n{\n  return glwthread_cond_wait (cond, mutex,\n                              (int (*) (void *)) pthread_mutex_lock,\n                              (int (*) (void *)) pthread_mutex_unlock);\n}\n\nint\npthread_cond_timedwait (pthread_cond_t *cond, pthread_mutex_t *mutex,\n                        const struct timespec *abstime)\n{\n  return glwthread_cond_timedwait (cond, mutex,\n                                   (int (*) (void *)) pthread_mutex_lock,\n                                   (int (*) (void *)) pthread_mutex_unlock,\n                                   abstime);\n}\n\nint\npthread_cond_signal (pthread_cond_t *cond)\n{\n  return glwthread_cond_signal (cond);\n}\n\nint\npthread_cond_broadcast (pthread_cond_t *cond)\n{\n  return glwthread_cond_broadcast (cond);\n}\n\nint\npthread_cond_destroy (pthread_cond_t *cond)\n{\n  return glwthread_cond_destroy (cond);\n}\n\n#elif HAVE_PTHREAD_H\n \n\n#else\n \n\nint\npthread_cond_init (_GL_UNUSED pthread_cond_t *cond,\n                   _GL_UNUSED const pthread_condattr_t *attr)\n{\n   \n  return 0;\n}\n\nint\npthread_cond_wait (_GL_UNUSED pthread_cond_t *cond,\n                   _GL_UNUSED pthread_mutex_t *mutex)\n{\n   \n  for (;;)\n    {\n      struct timespec duration =\n        {\n          .tv_sec = 86400,\n          .tv_nsec = 0\n        };\n      nanosleep (&duration, NULL);\n    }\n}\n\nint\npthread_cond_timedwait (_GL_UNUSED pthread_cond_t *cond,\n                        _GL_UNUSED pthread_mutex_t *mutex,\n                        const struct timespec *abstime)\n{\n   \n  for (;;)\n    {\n      struct timeval currtime;\n      unsigned long remaining;\n\n      gettimeofday (&currtime, NULL);\n\n      if (currtime.tv_sec > abstime->tv_sec)\n        remaining = 0;\n      else\n        {\n          unsigned long seconds = abstime->tv_sec - currtime.tv_sec;\n          remaining = seconds * 1000000000;\n          if (remaining / 1000000000 != seconds)  \n            remaining = ULONG_MAX;\n          else\n            {\n              long nanoseconds =\n                abstime->tv_nsec - currtime.tv_usec * 1000;\n              if (nanoseconds >= 0)\n                {\n                  remaining += nanoseconds;\n                  if (remaining < nanoseconds)  \n                    remaining = ULONG_MAX;\n                }\n              else\n                {\n                  if (remaining >= - nanoseconds)\n                    remaining -= (- nanoseconds);\n                  else\n                    remaining = 0;\n                }\n            }\n        }\n      if (remaining == 0)\n        return ETIMEDOUT;\n\n       \n      struct timespec duration = { .tv_sec  = remaining / 1000000000,\n                                   .tv_nsec = remaining % 1000000000 };\n      nanosleep (&duration, NULL);\n    }\n}\n\nint\npthread_cond_signal (_GL_UNUSED pthread_cond_t *cond)\n{\n   \n  return 0;\n}\n\nint\npthread_cond_broadcast (_GL_UNUSED pthread_cond_t *cond)\n{\n   \n  return 0;\n}\n\nint\npthread_cond_destroy (_GL_UNUSED pthread_cond_t *cond)\n{\n   \n  return 0;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}