{
  "module_name": "strsignal.c",
  "hash_id": "b3015da309b3c95b797872a804b76dbec4af5e036a7ed3e44fd11f325d5a9a00",
  "original_prompt": "Ingested from coreutils-9.4/lib/strsignal.c",
  "human_readable_source": " \n#include <string.h>\n\n#include <signal.h>\n#include <stdio.h>\n#include <stdlib.h>\n\n#ifdef _LIBC\n# include <libintl.h>\n#else  \n# include \"gettext.h\"\n# define _(msgid) gettext (msgid)\n# define N_(msgid) gettext_noop (msgid)\n#endif  \n\n#ifdef _LIBC\n# include <bits/libc-lock.h>\n#else  \n# include \"glthread/lock.h\"\n# include \"glthread/tls.h\"\n# define __libc_once_define(CLASS, NAME) gl_once_define (CLASS, NAME)\n# define __libc_once(NAME, INIT) gl_once ((NAME), (INIT))\n# define __libc_key_t gl_tls_key_t\n# define __libc_getspecific(NAME) gl_tls_get ((NAME))\n# define __libc_setspecific(NAME, POINTER) gl_tls_set ((NAME), (POINTER))\n# define __snprintf snprintf\n#endif  \n\n#ifdef _LIBC\n\n \nextern const char *const _sys_siglist[];\nextern const char *const _sys_siglist_internal[] attribute_hidden;\n\n#else  \n\n \n# if HAVE_UNISTD_H\n#  include <unistd.h>\n# endif\n\n# define INTUSE(x) (x)\n\n# if HAVE_DECL_SYS_SIGLIST\n#  undef _sys_siglist\n#  define _sys_siglist sys_siglist\n# else  \n#  ifndef NSIG\n#   define NSIG 32\n#  endif  \n#  if !HAVE_DECL__SYS_SIGLIST\nstatic const char *_sys_siglist[NSIG];\n#  endif\n# endif  \n\n#endif  \n\nstatic __libc_key_t key;\n\n \n#define BUFFERSIZ       100\nstatic char local_buf[BUFFERSIZ];\nstatic char *static_buf;\n\n \nstatic void init (void);\nstatic void free_key_mem (void *mem);\nstatic char *getbuffer (void);\n\n\n \nchar *\nstrsignal (int signum)\n{\n  const char *desc;\n  __libc_once_define (static, once);\n\n   \n  __libc_once (once, init);\n\n  if (\n#ifdef SIGRTMIN\n      (signum >= SIGRTMIN && signum <= SIGRTMAX) ||\n#endif\n      signum < 0 || signum >= NSIG\n      || (desc = INTUSE(_sys_siglist)[signum]) == NULL)\n    {\n      char *buffer = getbuffer ();\n      int len;\n#ifdef SIGRTMIN\n      if (signum >= SIGRTMIN && signum <= SIGRTMAX)\n        len = __snprintf (buffer, BUFFERSIZ - 1, _(\"Real-time signal %d\"),\n                          signum - (int) SIGRTMIN);\n      else\n#endif\n        len = __snprintf (buffer, BUFFERSIZ - 1, _(\"Unknown signal %d\"),\n                          signum);\n      if (len >= BUFFERSIZ)\n        buffer = NULL;\n      else\n        buffer[len] = '\\0';\n\n      return buffer;\n    }\n\n  return (char *) _(desc);\n}\n\n\n \nstatic void\ninit (void)\n{\n#ifdef _LIBC\n  if (__libc_key_create (&key, free_key_mem))\n     \n    static_buf = local_buf;\n#else  \n  gl_tls_key_init (key, free_key_mem);\n\n# if !HAVE_DECL_SYS_SIGLIST\n  memset (_sys_siglist, 0, NSIG * sizeof *_sys_siglist);\n\n   \n#  define init_sig(sig, abbrev, desc) \\\n  if (sig >= 0 && sig < NSIG) \\\n    _sys_siglist[sig] = desc;\n\n#  include \"siglist.h\"\n\n#  undef init_sig\n\n# endif  \n#endif  \n}\n\n\n \nstatic void\nfree_key_mem (void *mem)\n{\n  free (mem);\n  __libc_setspecific (key, NULL);\n}\n\n\n \nstatic char *\ngetbuffer (void)\n{\n  char *result;\n\n  if (static_buf != NULL)\n    result = static_buf;\n  else\n    {\n       \n      result = __libc_getspecific (key);\n      if (result == NULL)\n        {\n           \n          result = malloc (BUFFERSIZ);\n          if (result == NULL)\n             \n            result = local_buf;\n          else\n            __libc_setspecific (key, result);\n        }\n    }\n\n  return result;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}