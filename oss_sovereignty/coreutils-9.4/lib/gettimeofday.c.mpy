{
  "module_name": "gettimeofday.c",
  "hash_id": "5e2af09721115c699b53ec021465fb96fc843a07e76971e278fc91dcf55d57eb",
  "original_prompt": "Ingested from coreutils-9.4/lib/gettimeofday.c",
  "human_readable_source": " \n\n#include <config.h>\n\n \n#include <sys/time.h>\n\n#include <time.h>\n\n#if defined _WIN32 && ! defined __CYGWIN__\n# define WINDOWS_NATIVE\n# include <windows.h>\n#endif\n\n#ifdef WINDOWS_NATIVE\n\n \n# undef LoadLibrary\n# define LoadLibrary LoadLibraryA\n\n# if !(_WIN32_WINNT >= _WIN32_WINNT_WIN8)\n\n \n#  define GetProcAddress \\\n    (void *) GetProcAddress\n\n \ntypedef void (WINAPI * GetSystemTimePreciseAsFileTimeFuncType) (FILETIME *lpTime);\nstatic GetSystemTimePreciseAsFileTimeFuncType GetSystemTimePreciseAsFileTimeFunc = NULL;\nstatic BOOL initialized = FALSE;\n\nstatic void\ninitialize (void)\n{\n  HMODULE kernel32 = LoadLibrary (\"kernel32.dll\");\n  if (kernel32 != NULL)\n    {\n      GetSystemTimePreciseAsFileTimeFunc =\n        (GetSystemTimePreciseAsFileTimeFuncType) GetProcAddress (kernel32, \"GetSystemTimePreciseAsFileTime\");\n    }\n  initialized = TRUE;\n}\n\n# else\n\n#  define GetSystemTimePreciseAsFileTimeFunc GetSystemTimePreciseAsFileTime\n\n# endif\n\n#endif\n\n \n\nint\ngettimeofday (struct timeval *restrict tv, void *restrict tz)\n{\n#undef gettimeofday\n#ifdef WINDOWS_NATIVE\n\n   \n   \n  ULONGLONG since_1970 =\n    since_1601 - (ULONGLONG) 134774 * (ULONGLONG) 86400 * (ULONGLONG) 10000000;\n  ULONGLONG microseconds_since_1970 = since_1970 / (ULONGLONG) 10;\n  *tv = (struct timeval) {\n    .tv_sec  = microseconds_since_1970 / (ULONGLONG) 1000000,\n    .tv_usec = microseconds_since_1970 % (ULONGLONG) 1000000\n  };\n\n  return 0;\n\n#else\n\n# if HAVE_GETTIMEOFDAY\n\n#  if defined timeval  \n#   undef timeval\n  struct timeval otv;\n  int result = gettimeofday (&otv, (struct timezone *) tz);\n  if (result == 0)\n    *tv = otv;\n#  else\n  int result = gettimeofday (tv, (struct timezone *) tz);\n#  endif\n\n  return result;\n\n# else\n\n#  if !defined OK_TO_USE_1S_CLOCK\n#   error \"Only 1-second nominal clock resolution found.  Is that intended?\" \\\n          \"If so, compile with the -DOK_TO_USE_1S_CLOCK option.\"\n#  endif\n  *tv = (struct timeval) { .tv_sec = time (NULL), .tv_usec = 0 };\n\n  return 0;\n\n# endif\n#endif\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}