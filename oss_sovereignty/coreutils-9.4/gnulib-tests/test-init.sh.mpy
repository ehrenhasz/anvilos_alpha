{
  "module_name": "test-init.sh",
  "hash_id": "2d4fcb6bcaf22a137c4878398b274e305baeec93aaab582acd76add5a49b9535",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-init.sh",
  "human_readable_source": "#!/bin/sh\n# Unit tests for init.sh\n# Copyright (C) 2011-2023 Free Software Foundation, Inc.\n# This file is part of the GNUlib Library.\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this program.  If not, see <https://www.gnu.org/licenses/>.  */\n\n: \"${srcdir=.}\"\n. \"$srcdir/init.sh\"; path_prepend_ .\n\nfail=0\n\ntest_compare()\n{\n  touch empty || fail=1\n  echo xyz > in || fail=1\n\n  compare /dev/null /dev/null >out 2>err || fail=1\n  test -s out && fail_ \"out not empty: $(cat out)\"\n  # \"err\" should be empty, too, but has \"set -x\" output when VERBOSE=yes\n  case $- in *x*) ;; *) test -s err && fail_ \"err not empty: $(cat err)\";; esac\n\n  compare /dev/null empty >out 2>err || fail=1\n  test -s out && fail_ \"out not empty: $(cat out)\"\n  case $- in *x*) ;; *) test -s err && fail_ \"err not empty: $(cat err)\";; esac\n\n  compare in in >out 2>err || fail=1\n  test -s out && fail_ \"out not empty: $(cat out)\"\n  case $- in *x*) ;; *) test -s err && fail_ \"err not empty: $(cat err)\";; esac\n\n  compare /dev/null in >out 2>err && fail=1\n  cat <<\\EOF > exp\ndiff -u /dev/null in\n--- /dev/null\t1970-01-01\n+++ in\t1970-01-01\n+xyz\nEOF\n  compare exp out || fail=1\n  case $- in *x*) ;; *) test -s err && fail_ \"err not empty: $(cat err)\";; esac\n\n  compare empty in >out 2>err && fail=1\n  # Compare against expected output only if compare is using diff -u.\n  if grep @ out >/dev/null; then\n    # Remove the TAB-date suffix on each --- and +++ line,\n    # for both the expected and the actual output files.\n    # Also remove the @@ line, since Solaris 5.10 and GNU diff formats differ:\n    # -@@ -0,0 +1 @@\n    # +@@ -1,0 +1,1 @@\n    # Also, remove space after leading '+', since AIX 7.1 diff outputs a space.\n    sed 's/\t.*//;/^@@/d;s/^+ /+/' out > k && mv k out\n    cat <<\\EOF > exp\n--- empty\n+++ in\n+xyz\nEOF\n    compare exp out || fail=1\n  fi\n  case $- in *x*) ;; *) test -s err && fail_ \"err not empty: $(cat err)\";; esac\n}\n\ntest_compare\n\nExit $fail\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}