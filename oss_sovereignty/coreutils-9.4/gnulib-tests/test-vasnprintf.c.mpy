{
  "module_name": "test-vasnprintf.c",
  "hash_id": "4911000d37eaf3aa79b470824b0f295aefceb7b10fa2710823c86f6ee9e67004",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-vasnprintf.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include \"vasnprintf.h\"\n\n#include <stdarg.h>\n#include <stdlib.h>\n#include <string.h>\n\n#include \"macros.h\"\n\nstatic void\ntest_function (char * (*my_asnprintf) (char *, size_t *, const char *, ...))\n{\n  char buf[8];\n  int size;\n\n  for (size = 0; size <= 8; size++)\n    {\n      size_t length = size;\n      char *result = my_asnprintf (NULL, &length, \"%d\", 12345);\n      ASSERT (result != NULL);\n      ASSERT (strcmp (result, \"12345\") == 0);\n      ASSERT (length == 5);\n      free (result);\n    }\n\n  for (size = 0; size <= 8; size++)\n    {\n      size_t length;\n      char *result;\n\n      memcpy (buf, \"DEADBEEF\", 8);\n      length = size;\n      result = my_asnprintf (buf, &length, \"%d\", 12345);\n      ASSERT (result != NULL);\n      ASSERT (strcmp (result, \"12345\") == 0);\n      ASSERT (length == 5);\n      if (size < 5 + 1)\n        ASSERT (result != buf);\n      ASSERT (memcmp (buf + size, &\"DEADBEEF\"[size], 8 - size) == 0);\n      if (result != buf)\n        free (result);\n    }\n\n   \n  for (size = 0; size <= 8; size++)\n    {\n      size_t length;\n      char *result;\n\n      memcpy (buf, \"DEADBEEF\", 8);\n      length = size;\n      result = my_asnprintf (buf, &length, \"%2.0f\", 1.6314159265358979e+125);\n      ASSERT (result != NULL);\n       \n      ASSERT (strlen (result) == 126);\n      ASSERT (memcmp (result, \"163141592653589790\", 18) == 0);\n      ASSERT (length == 126);\n      if (size < 126 + 1)\n        ASSERT (result != buf);\n      ASSERT (memcmp (buf + size, &\"DEADBEEF\"[size], 8 - size) == 0);\n      if (result != buf)\n        free (result);\n    }\n}\n\nstatic char *\nmy_asnprintf (char *resultbuf, size_t *lengthp, const char *format, ...)\n{\n  va_list args;\n  char *ret;\n\n  va_start (args, format);\n  ret = vasnprintf (resultbuf, lengthp, format, args);\n  va_end (args);\n  return ret;\n}\n\nstatic void\ntest_vasnprintf ()\n{\n  test_function (my_asnprintf);\n}\n\nstatic void\ntest_asnprintf ()\n{\n  test_function (asnprintf);\n}\n\nint\nmain (int argc, char *argv[])\n{\n  test_vasnprintf ();\n  test_asnprintf ();\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}