{
  "module_name": "test-gettime-res.c",
  "hash_id": "366c38d67636cc472c43b2d9102f8d460f09c20ce152c21c18729cffa6fb601d",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-gettime-res.c",
  "human_readable_source": "/*\n * Copyright 2022-2023 Free Software Foundation, Inc.\n * Written by Paul Eggert.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https:\n\n#include <config.h>\n\n#include <timespec.h>\n\n#include <stdio.h>\n\nint\nmain (void)\n{\n  long int res = gettime_res ();\n  printf (\"gettime_res returned %ld ns\\n\", res);\n\n  if (res <= 0)\n    {\n      fprintf (stderr, \"gettime_res value %ld not positive\\n\", res);\n      return 1;\n    }\n\n  if (res < TIMESPEC_HZ)\n    {\n      if (TIMESPEC_HZ % res != 0)\n        {\n          fprintf (stderr,\n                   (\"gettime_res value %ld ns is smaller than %d\"\n                    \" but does not divide it\\n\"),\n                   res, TIMESPEC_HZ);\n          return 1;\n        }\n    }\n  else\n    {\n      if (res % TIMESPEC_HZ != 0)\n        {\n          fprintf (stderr,\n                   (\"gettime_res value %ld ns is larger than %d\"\n                    \" but is not a multiple of it\\n\"),\n                   res, TIMESPEC_HZ);\n          return 1;\n        }\n    }\n\n  int saw_res = 0;\n\n  for (int i = 0; i < 100000; i++)\n    {\n      struct timespec t = current_timespec ();\n      if (res < TIMESPEC_HZ\n          ? t.tv_nsec % res != 0\n          : t.tv_nsec != 0 || t.tv_sec % (res / TIMESPEC_HZ) != 0)\n        {\n          fprintf (stderr,\n                   (\"current_timespec returned %lld.%09ld which is not\"\n                    \" a multiple of the resolution, %ld ns\\n\"),\n                   (long long) t.tv_sec, t.tv_nsec, res);\n          return 1;\n        }\n      if (res < TIMESPEC_HZ\n          ? (t.tv_nsec / res % 2 != 0\n             || t.tv_nsec / res % 5 != 0)\n          : (t.tv_sec / (res / TIMESPEC_HZ) % 2 != 0\n             || t.tv_sec / (res / TIMESPEC_HZ) % 5 != 0))\n        saw_res = 1;\n    }\n\n  if (saw_res == 0)\n    fprintf (stderr,\n             (\"warning: all timestamps had coarser\"\n              \" resolution than %ld ns\\n\"),\n             res);\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}