{
  "module_name": "test-remove.c",
  "hash_id": "7b2888dadf6fd3a19bb90e703b7163c714bb1fd92a46758e8a320b6b8f4718a4",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-remove.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include <stdio.h>\n\n#include \"signature.h\"\nSIGNATURE_CHECK (remove, int, (char const *));\n\n#include <fcntl.h>\n#include <errno.h>\n#include <stdlib.h>\n#include <string.h>\n#include <sys/stat.h>\n#include <unistd.h>\n\n#include \"ignore-value.h\"\n#include \"macros.h\"\n\n#define BASE \"test-remove.t\"\n\nint\nmain (void)\n{\n   \n  ignore_value (system (\"rm -rf \" BASE \"*\"));\n\n   \n  ASSERT (mkdir (BASE \"dir\", 0700) == 0);\n  ASSERT (close (creat (BASE \"dir/file\", 0600)) == 0);\n\n   \n  errno = 0;\n  ASSERT (remove (\"\") == -1);\n  ASSERT (errno == ENOENT);\n  errno = 0;\n  ASSERT (remove (\"nosuch\") == -1);\n  ASSERT (errno == ENOENT);\n  errno = 0;\n  ASSERT (remove (\"nosuch/\") == -1);\n  ASSERT (errno == ENOENT);\n  errno = 0;\n  ASSERT (remove (\".\") == -1);\n  ASSERT (errno == EINVAL || errno == EBUSY);\n   \n  ASSERT (remove (\"..\") == -1);\n  ASSERT (remove (\"/\") == -1);\n  ASSERT (remove (\"///\") == -1);\n  errno = 0;\n  ASSERT (remove (BASE \"dir/file/\") == -1);\n  ASSERT (errno == ENOTDIR);\n\n   \n  errno = 0;\n  ASSERT (remove (BASE \"dir\") == -1);\n  ASSERT (errno == EEXIST || errno == ENOTEMPTY);\n\n   \n  ASSERT (remove (BASE \"dir/file\") == 0);\n\n   \n  errno = 0;\n  ASSERT (remove (BASE \"dir/.//\") == -1);\n  ASSERT (errno == EINVAL || errno == EBUSY || errno == EEXIST);\n  ASSERT (remove (BASE \"dir\") == 0);\n\n   \n  if (symlink (BASE \"dir\", BASE \"link\") != 0)\n    {\n      fputs (\"skipping test: symlinks not supported on this file system\\n\",\n             stderr);\n      return 77;\n    }\n  ASSERT (mkdir (BASE \"dir\", 0700) == 0);\n  errno = 0;\n  if (remove (BASE \"link/\") == 0)\n    {\n      struct stat st;\n      errno = 0;\n      ASSERT (stat (BASE \"link\", &st) == -1);\n      ASSERT (errno == ENOENT);\n    }\n  else\n    ASSERT (remove (BASE \"dir\") == 0);\n  {\n    struct stat st;\n    ASSERT (lstat (BASE \"link\", &st) == 0);\n    ASSERT (S_ISLNK (st.st_mode));\n  }\n  ASSERT (remove (BASE \"link\") == 0);\n   \n  ASSERT (symlink (BASE \"loop\", BASE \"loop\") == 0);\n  errno = 0;\n  ASSERT (remove (BASE \"loop/\") == -1);\n  ASSERT (errno == ELOOP || errno == ENOTDIR);\n  ASSERT (remove (BASE \"loop\") == 0);\n  ASSERT (close (creat (BASE \"file\", 0600)) == 0);\n  ASSERT (symlink (BASE \"file\", BASE \"link\") == 0);\n  errno = 0;\n  ASSERT (remove (BASE \"link/\") == -1);\n  ASSERT (errno == ENOTDIR);\n  ASSERT (remove (BASE \"link\") == 0);\n  ASSERT (remove (BASE \"file\") == 0);\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}