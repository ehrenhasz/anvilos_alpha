{
  "module_name": "test-getndelim2.c",
  "hash_id": "53528625558014680764ee7d53ba6cbf09e154385784c2c9f80c78898f038578",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-getndelim2.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include \"getndelim2.h\"\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n#include \"macros.h\"\n\nint\nmain (void)\n{\n  FILE *f;\n  char *line = NULL;\n  size_t len = 0;\n  ssize_t result;\n\n   \n  f = fopen (\"test-getndelim2.txt\", \"wb+\");\n  if (!f || fwrite (\"a\\nbc\\nd\\0f\", 1, 8, f) != 8)\n    {\n      fputs (\"Failed to create sample file.\\n\", stderr);\n      remove (\"test-getndelim2.txt\");\n      return 1;\n    }\n  rewind (f);\n\n   \n\n   \n  result = getndelim2 (&line, &len, 0, GETNLINE_NO_LIMIT, '\\n', '\\n', f);\n  ASSERT (result == 2);\n  ASSERT (strcmp (line, \"a\\n\") == 0);\n  ASSERT (2 < len);\n\n   \n  free (line);\n  line = malloc (1);\n  len = 0;\n  result = getndelim2 (&line, &len, 0, GETNLINE_NO_LIMIT, EOF, '\\n', f);\n  ASSERT (result == 3);\n  ASSERT (strcmp (line, \"bc\\n\") == 0);\n  ASSERT (3 < len);\n\n   \n  result = getndelim2 (&line, &len, 0, GETNLINE_NO_LIMIT, '\\n', EOF, f);\n  ASSERT (result == 3);\n  ASSERT (memcmp (line, \"d\\0f\", 4) == 0);\n  ASSERT (3 < len);\n\n  result = getndelim2 (&line, &len, 0, GETNLINE_NO_LIMIT, '\\n', EOF, f);\n  ASSERT (result == -1);\n\n   \n\n   \n  free (line);\n  rewind (f);\n  line = malloc (8);\n  memset (line, 'e', 8);\n  len = 8;\n  result = getndelim2 (&line, &len, 6, 10, 'd', 'd', f);\n  ASSERT (result == 3);\n  ASSERT (10 == len);\n  ASSERT (strcmp (line, \"eeeeeea\\nb\") == 0);\n\n   \n  result = getndelim2 (&line, &len, len, 1, EOF, EOF, f);\n  ASSERT (result == -1);\n  ASSERT (10 == len);\n  ASSERT (strcmp (line, \"eeeeeea\\nb\") == 0);\n\n   \n  result = getndelim2 (&line, &len, 0, GETNLINE_NO_LIMIT, EOF, EOF, f);\n  ASSERT (result == 2);\n  ASSERT (10 == len);\n  ASSERT (memcmp (line, \"\\0f\\0eeea\\nb\", 10) == 0);\n\n  result = getndelim2 (&line, &len, 0, GETNLINE_NO_LIMIT, '\\n', '\\r', f);\n  ASSERT (result == -1);\n\n   \n  rewind (f);\n  {\n    int i;\n    for (i = 0; i < 16; i++)\n      fprintf (f, \"%500x%c\", i + 0u, i % 2 ? '\\n' : '\\r');\n  }\n  rewind (f);\n  {\n    char buffer[502];\n\n    result = getndelim2 (&line, &len, 0, GETNLINE_NO_LIMIT, '\\n', '\\r', f);\n    ASSERT (result == 501);\n    ASSERT (501 < len);\n    memset (buffer, ' ', 499);\n    buffer[499] = '0';\n    buffer[500] = '\\r';\n    buffer[501] = '\\0';\n    ASSERT (strcmp (buffer, line) == 0);\n\n    result = getndelim2 (&line, &len, 0, GETNLINE_NO_LIMIT, '\\n', '\\r', f);\n    ASSERT (result == 501);\n    ASSERT (501 < len);\n    buffer[499] = '1';\n    buffer[500] = '\\n';\n    ASSERT (strcmp (buffer, line) == 0);\n\n    result = getndelim2 (&line, &len, 0, GETNLINE_NO_LIMIT, 'g', 'f', f);\n    ASSERT (result == 501 * 14 - 1);\n    ASSERT (501 * 14 <= len);\n    buffer[499] = 'f';\n    buffer[500] = '\\0';\n    ASSERT (strcmp (buffer, line + 501 * 13) == 0);\n\n    result = getndelim2 (&line, &len, 501 * 14 - 1, GETNLINE_NO_LIMIT,\n                         EOF, EOF, f);\n    ASSERT (result == 1);\n    buffer[500] = '\\n';\n    ASSERT (strcmp (buffer, line + 501 * 13) == 0);\n\n    result = getndelim2 (&line, &len, 501 * 14 - 1, GETNLINE_NO_LIMIT,\n                         EOF, EOF, f);\n    buffer[500] = '\\0';\n    ASSERT (strcmp (buffer, line + 501 * 13) == 0);\n    ASSERT (result == -1);\n  }\n\n  fclose (f);\n  remove (\"test-getndelim2.txt\");\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}