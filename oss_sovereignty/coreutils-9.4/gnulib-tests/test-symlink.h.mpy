{
  "module_name": "test-symlink.h",
  "hash_id": "0049432d8338873945bcad0b2a2b42012078d917bc2053367f5d6be946f44340",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-symlink.h",
  "human_readable_source": " \n\n \n\nstatic int\ntest_symlink (int (*func) (char const *, char const *), bool print)\n{\n  if (func (\"nowhere\", BASE \"link1\"))\n    {\n      if (print)\n        fputs (\"skipping test: symlinks not supported on this file system\\n\",\n               stderr);\n      return 77;\n    }\n\n   \n  {\n    int status;\n    errno = 0;\n    status = func (\"\", BASE \"link2\");\n    if (status == -1)\n      ASSERT (errno == ENOENT || errno == EINVAL);\n    else\n      {\n        ASSERT (status == 0);\n        ASSERT (unlink (BASE \"link2\") == 0);\n      }\n  }\n\n   \n  errno = 0;\n  ASSERT (func (\"nowhere\", \"\") == -1);\n  ASSERT (errno == ENOENT);\n  errno = 0;\n  ASSERT (func (\"nowhere\", \".\") == -1);\n  ASSERT (errno == EEXIST || errno == EINVAL);\n  errno = 0;\n  ASSERT (func (\"somewhere\", BASE \"link1\") == -1);\n  ASSERT (errno == EEXIST);\n  errno = 0;\n  ASSERT (func (\"nowhere\", BASE \"link2/\") == -1);\n  ASSERT (errno == ENOTDIR || errno == ENOENT);\n  ASSERT (mkdir (BASE \"dir\", 0700) == 0);\n  errno = 0;\n  ASSERT (func (\"nowhere\", BASE \"dir\") == -1);\n  ASSERT (errno == EEXIST);\n  errno = 0;\n  ASSERT (func (\"nowhere\", BASE \"dir/\") == -1);\n  ASSERT (errno == EEXIST || errno == EINVAL\n          || errno == ENOENT  );\n  ASSERT (close (creat (BASE \"file\", 0600)) == 0);\n  errno = 0;\n  ASSERT (func (\"nowhere\", BASE \"file\") == -1);\n  ASSERT (errno == EEXIST);\n  errno = 0;\n  ASSERT (func (\"nowhere\", BASE \"file/\") == -1);\n  ASSERT (errno == EEXIST || errno == ENOTDIR || errno == ENOENT);\n\n   \n  ASSERT (unlink (BASE \"link1\") == 0);\n  ASSERT (func (BASE \"link2\", BASE \"link1\") == 0);\n  errno = 0;\n  ASSERT (func (BASE \"nowhere\", BASE \"link1/\") == -1);\n  ASSERT (errno == EEXIST || errno == ENOTDIR || errno == ENOENT);\n  errno = 0;\n  ASSERT (unlink (BASE \"link2\") == -1);\n  ASSERT (errno == ENOENT);\n\n   \n  ASSERT (rmdir (BASE \"dir\") == 0);\n  ASSERT (unlink (BASE \"file\") == 0);\n  ASSERT (unlink (BASE \"link1\") == 0);\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}