{
  "module_name": "test-scratch-buffer.c",
  "hash_id": "d8ebe463f9d820ba1f105d8d6a6f9a1b32842fb5573771b3c6f38bf47800b46b",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-scratch-buffer.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include <scratch_buffer.h>\n\n#include <string.h>\n#include \"macros.h\"\n\nstatic int\nbyte_at (unsigned long long int i)\n{\n  return ((i % 13) + ((i * i) % 251)) & 0xff;\n}\n\nint\nmain ()\n{\n   \n  {\n    size_t sizes[] = { 100, 1000, 10000, 100000 };\n    size_t s;\n    for (s = 0; s < SIZEOF (sizes); s++)\n      {\n        size_t size = sizes[s];\n        struct scratch_buffer buf;\n        bool ok;\n        size_t i;\n\n        scratch_buffer_init (&buf);\n\n        ok = scratch_buffer_set_array_size (&buf, size, 1);\n        ASSERT (ok);\n\n        for (i = 0; i < size; i++)\n          ((unsigned char *) buf.data)[i] = byte_at (i);\n\n        memset (buf.data, 'x', buf.length);\n        memset (buf.data, 'y', size);\n\n        scratch_buffer_free (&buf);\n      }\n  }\n\n   \n  {\n    size_t sizes[] = { 100, 1000, 10000, 100000 };\n    size_t s;\n    for (s = 0; s < SIZEOF (sizes); s++)\n      {\n        size_t size = sizes[s];\n        struct scratch_buffer buf;\n        bool ok;\n        size_t i;\n\n        scratch_buffer_init (&buf);\n\n        while (buf.length < size)\n          {\n            ok = scratch_buffer_grow (&buf);\n            ASSERT (ok);\n          }\n\n        for (i = 0; i < size; i++)\n          ((unsigned char *) buf.data)[i] = byte_at (i);\n\n        memset (buf.data, 'x', buf.length);\n        memset (buf.data, 'y', size);\n\n        scratch_buffer_free (&buf);\n      }\n  }\n\n   \n  {\n    size_t sizes[] = { 100, 1000, 10000, 100000 };\n    struct scratch_buffer buf;\n    size_t s;\n    size_t size;\n    bool ok;\n    size_t i;\n\n    scratch_buffer_init (&buf);\n\n    s = 0;\n    size = sizes[s];\n    ok = scratch_buffer_set_array_size (&buf, size, 1);\n    ASSERT (ok);\n\n    for (i = 0; i < size; i++)\n      ((unsigned char *) buf.data)[i] = byte_at (i);\n\n    for (; s < SIZEOF (sizes); s++)\n      {\n        size_t oldsize = size;\n        size = sizes[s];\n\n        while (buf.length < size)\n          {\n            ok = scratch_buffer_grow_preserve (&buf);\n            ASSERT (ok);\n          }\n\n        for (i = 0; i < oldsize; i++)\n          ASSERT(((unsigned char *) buf.data)[i] == byte_at (i));\n        for (i = oldsize; i < size; i++)\n          ((unsigned char *) buf.data)[i] = byte_at (i);\n      }\n\n    scratch_buffer_free (&buf);\n  }\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}