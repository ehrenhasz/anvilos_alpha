{
  "module_name": "test-c32tolower.c",
  "hash_id": "17f64c41201f6cda3a991b06ebcb83dda62755497b1086adc2a760bb1130395d",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-c32tolower.c",
  "human_readable_source": " \n#define MBCHAR_BUF_SIZE 6\nstruct multibyte\n{\n  size_t nbytes;              \n  char buf[MBCHAR_BUF_SIZE];  \n};\n\n \nstatic struct multibyte\nfor_character (const char *s, size_t n)\n{\n  mbstate_t state;\n  char32_t wc;\n  size_t ret;\n  struct multibyte result;\n\n  memset (&state, '\\0', sizeof (mbstate_t));\n  wc = (char32_t) 0xBADFACE;\n  ret = mbrtoc32 (&wc, s, n, &state);\n  ASSERT (ret == n);\n\n  wc = c32tolower (wc);\n  ASSERT (wc != WEOF);\n\n  memset (&state, '\\0', sizeof (mbstate_t));\n  ret = c32rtomb (result.buf, wc, &state);\n  ASSERT (ret != 0);\n  if (ret == (size_t)(-1))\n     \n    result.nbytes = 0;\n  else\n    {\n      ASSERT (ret <= MBCHAR_BUF_SIZE);\n      result.nbytes = ret;\n    }\n  return result;\n}\n\nint\nmain (int argc, char *argv[])\n{\n  wint_t wc;\n  struct multibyte mb;\n  char buf[4];\n\n   \n  if (setlocale (LC_ALL, \"\") == NULL)\n    return 1;\n\n   \n  wc = c32tolower (WEOF);\n  ASSERT (wc == WEOF);\n\n   \n#if defined __NetBSD__\n   \n          buf[0] = (unsigned char) c;\n          mb = for_character (buf, 1);\n          switch (c)\n            {\n            case 'A': case 'B': case 'C': case 'D': case 'E':\n            case 'F': case 'G': case 'H': case 'I': case 'J':\n            case 'K': case 'L': case 'M': case 'N': case 'O':\n            case 'P': case 'Q': case 'R': case 'S': case 'T':\n            case 'U': case 'V': case 'W': case 'X': case 'Y':\n            case 'Z':\n              ASSERT (mb.nbytes == 1);\n              ASSERT ((unsigned char) mb.buf[0] == (unsigned char) c - 'A' + 'a');\n              break;\n            default:\n              ASSERT (mb.nbytes == 1);\n              ASSERT ((unsigned char) mb.buf[0] == c);\n              break;\n            }\n          break;\n        }\n  }\n\n  if (argc > 1)\n    switch (argv[1][0])\n      {\n      case '0':\n         \n        return 0;\n\n      case '1':\n         \n        {\n           \n          mb = for_character (\"\\262\", 1);\n          ASSERT (mb.nbytes == 1);\n          ASSERT (memcmp (mb.buf, \"\\262\", 1) == 0);\n           \n          mb = for_character (\"\\265\", 1);\n          ASSERT (mb.nbytes == 1);\n          ASSERT (memcmp (mb.buf, \"\\265\", 1) == 0);\n           \n          mb = for_character (\"\\311\", 1);\n          ASSERT (mb.nbytes == 1);\n          ASSERT (memcmp (mb.buf, \"\\351\", 1) == 0);\n           \n          mb = for_character (\"\\337\", 1);\n          ASSERT (mb.nbytes == 1);\n          ASSERT (memcmp (mb.buf, \"\\337\", 1) == 0);\n           \n          mb = for_character (\"\\351\", 1);\n          ASSERT (mb.nbytes == 1);\n          ASSERT (memcmp (mb.buf, \"\\351\", 1) == 0);\n           \n          mb = for_character (\"\\377\", 1);\n          ASSERT (mb.nbytes == 1);\n          ASSERT (memcmp (mb.buf, \"\\377\", 1) == 0);\n        }\n        return 0;\n\n      case '2':\n         \n        {\n        #if !((defined __APPLE__ && defined __MACH__) || defined __DragonFly__)\n           \n          mb = for_character (\"\\217\\252\\261\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\217\\253\\261\", 3) == 0);\n        #endif\n           \n          mb = for_character (\"\\217\\251\\316\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\217\\251\\316\", 3) == 0);\n           \n          mb = for_character (\"\\217\\253\\261\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\217\\253\\261\", 3) == 0);\n           \n          mb = for_character (\"\\217\\253\\363\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\217\\253\\363\", 3) == 0);\n        #if !((defined __APPLE__ && defined __MACH__) || defined __DragonFly__)\n           \n          mb = for_character (\"\\217\\251\\250\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\217\\251\\310\", 3) == 0);\n        #endif\n           \n          mb = for_character (\"\\217\\251\\310\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\217\\251\\310\", 3) == 0);\n        #if !defined __DragonFly__\n           \n          mb = for_character (\"\\247\\273\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\247\\353\", 2) == 0);\n        #endif\n           \n          mb = for_character (\"\\247\\353\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\247\\353\", 2) == 0);\n           \n          mb = for_character (\"\\244\\323\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\244\\323\", 2) == 0);\n        #if !defined __DragonFly__\n           \n          mb = for_character (\"\\243\\307\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\243\\347\", 2) == 0);\n        #endif\n           \n          mb = for_character (\"\\243\\347\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\243\\347\", 2) == 0);\n        }\n        return 0;\n\n      case '3':\n         \n        {\n           \n          mb = for_character (\"\\302\\262\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\302\\262\", 2) == 0);\n           \n          mb = for_character (\"\\302\\265\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\302\\265\", 2) == 0);\n        #if !(defined _WIN32 && !defined __CYGWIN__)\n           \n          mb = for_character (\"\\303\\211\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\303\\251\", 2) == 0);\n        #endif\n           \n          mb = for_character (\"\\303\\237\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\303\\237\", 2) == 0);\n           \n          mb = for_character (\"\\303\\251\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\303\\251\", 2) == 0);\n           \n          mb = for_character (\"\\303\\277\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\303\\277\", 2) == 0);\n           \n          mb = for_character (\"\\305\\201\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\305\\202\", 2) == 0);\n           \n          mb = for_character (\"\\305\\202\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\305\\202\", 2) == 0);\n           \n          mb = for_character (\"\\320\\251\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\321\\211\", 2) == 0);\n           \n          mb = for_character (\"\\321\\211\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\321\\211\", 2) == 0);\n           \n          mb = for_character (\"\\327\\225\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\327\\225\", 2) == 0);\n           \n          mb = for_character (\"\\343\\201\\263\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\343\\201\\263\", 3) == 0);\n           \n          mb = for_character (\"\\343\\205\\242\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\343\\205\\242\", 3) == 0);\n           \n          mb = for_character (\"\\357\\274\\247\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\357\\275\\207\", 3) == 0);\n           \n          mb = for_character (\"\\357\\275\\207\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\357\\275\\207\", 3) == 0);\n           \n          mb = for_character (\"\\357\\277\\233\", 3);\n          ASSERT (mb.nbytes == 3);\n          ASSERT (memcmp (mb.buf, \"\\357\\277\\233\", 3) == 0);\n        #if !(defined __DragonFly__ || defined __sun)\n           \n          mb = for_character (\"\\360\\220\\220\\231\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\360\\220\\221\\201\", 4) == 0);\n        #endif\n           \n          mb = for_character (\"\\360\\220\\221\\201\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\360\\220\\221\\201\", 4) == 0);\n           \n          mb = for_character (\"\\363\\240\\201\\201\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\363\\240\\201\\201\", 4) == 0);\n           \n          mb = for_character (\"\\363\\240\\201\\241\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\363\\240\\201\\241\", 4) == 0);\n        }\n        return 0;\n\n      case '4':\n         \n        #if (defined __GLIBC__ && __GLIBC__ == 2 && __GLIBC_MINOR__ >= 13 && __GLIBC_MINOR__ <= 15) || (GL_CHAR32_T_IS_UNICODE && (defined __NetBSD__ || defined __sun))\n        fputs (\"Skipping test: The GB18030 converter in this system's iconv is broken.\\n\", stderr);\n        return 77;\n        #endif\n        {\n           \n          mb = for_character (\"\\201\\060\\205\\065\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\201\\060\\205\\065\", 4) == 0);\n           \n          mb = for_character (\"\\201\\060\\205\\070\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\201\\060\\205\\070\", 4) == 0);\n        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)\n           \n          mb = for_character (\"\\201\\060\\207\\067\", 4);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\250\\246\", 2) == 0);\n        #endif\n           \n          mb = for_character (\"\\201\\060\\211\\070\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\201\\060\\211\\070\", 4) == 0);\n           \n          mb = for_character (\"\\250\\246\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\250\\246\", 2) == 0);\n           \n          mb = for_character (\"\\201\\060\\213\\067\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\201\\060\\213\\067\", 4) == 0);\n        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)\n           \n          mb = for_character (\"\\201\\060\\221\\071\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\201\\060\\222\\060\", 4) == 0);\n        #endif\n           \n          mb = for_character (\"\\201\\060\\222\\060\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\201\\060\\222\\060\", 4) == 0);\n        #if !(defined __FreeBSD__ || defined __DragonFly__)\n           \n          mb = for_character (\"\\247\\273\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\247\\353\", 2) == 0);\n        #endif\n           \n          mb = for_character (\"\\247\\353\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\247\\353\", 2) == 0);\n           \n          mb = for_character (\"\\201\\060\\371\\067\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\201\\060\\371\\067\", 4) == 0);\n           \n          mb = for_character (\"\\244\\323\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\244\\323\", 2) == 0);\n           \n          mb = for_character (\"\\201\\071\\256\\062\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\201\\071\\256\\062\", 4) == 0);\n        #if !defined __DragonFly__\n           \n          mb = for_character (\"\\243\\307\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\243\\347\", 2) == 0);\n        #endif\n           \n          mb = for_character (\"\\243\\347\", 2);\n          ASSERT (mb.nbytes == 2);\n          ASSERT (memcmp (mb.buf, \"\\243\\347\", 2) == 0);\n           \n          mb = for_character (\"\\204\\061\\241\\071\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\204\\061\\241\\071\", 4) == 0);\n        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __NetBSD__ || defined __sun)\n           \n          mb = for_character (\"\\220\\060\\351\\071\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\220\\060\\355\\071\", 4) == 0);\n        #endif\n           \n          mb = for_character (\"\\220\\060\\355\\071\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\220\\060\\355\\071\", 4) == 0);\n           \n          mb = for_character (\"\\323\\066\\234\\063\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\323\\066\\234\\063\", 4) == 0);\n           \n          mb = for_character (\"\\323\\066\\237\\065\", 4);\n          ASSERT (mb.nbytes == 4);\n          ASSERT (memcmp (mb.buf, \"\\323\\066\\237\\065\", 4) == 0);\n        }\n        return 0;\n\n      }\n\n  return 1;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}