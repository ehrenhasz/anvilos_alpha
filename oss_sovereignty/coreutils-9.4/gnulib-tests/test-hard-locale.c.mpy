{
  "module_name": "test-hard-locale.c",
  "hash_id": "3435b85d3c61f4edd3436da96ef1eabf1f8234412ccc70f44e1dfe39caf5f05a",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-hard-locale.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include \"hard-locale.h\"\n\n#include <locale.h>\n#include <stdio.h>\n#include <string.h>\n\n \nstatic bool all_trivial;\n\nstatic int\ntest_one (const char *name, int failure_bitmask)\n{\n  if (setlocale (LC_ALL, name) != NULL)\n    {\n      bool expected;\n\n       \n#if defined MUSL_LIBC || defined __OpenBSD__ || defined __HAIKU__ || defined __ANDROID__\n      expected = true;\n#else\n      expected = !all_trivial;\n#endif\n      if (hard_locale (LC_CTYPE) != expected)\n        {\n          if (expected)\n            fprintf (stderr, \"Unexpected: The category LC_CTYPE of the locale '%s' is not equivalent to C or POSIX.\\n\",\n                     name);\n          else\n            fprintf (stderr, \"Unexpected: The category LC_CTYPE of the locale '%s' is equivalent to C or POSIX.\\n\",\n                     name);\n          return failure_bitmask;\n        }\n\n       \n#if defined __NetBSD__\n      expected = false;\n#elif defined MUSL_LIBC\n      expected = strcmp (name, \"C.UTF-8\") != 0;\n#elif (defined __OpenBSD__ && HAVE_DUPLOCALE) || defined __HAIKU__ || defined __ANDROID__  \n      expected = true;\n#else\n      expected = !all_trivial;\n#endif\n      if (hard_locale (LC_COLLATE) != expected)\n        {\n          if (expected)\n            fprintf (stderr, \"Unexpected: The category LC_COLLATE of the locale '%s' is not equivalent to C or POSIX.\\n\",\n                     name);\n          else\n            fprintf (stderr, \"Unexpected: The category LC_COLLATE of the locale '%s' is equivalent to C or POSIX.\\n\",\n                     name);\n          return failure_bitmask;\n        }\n    }\n  return 0;\n}\n\nint\nmain ()\n{\n  int fail = 0;\n\n   \n#if ! defined __ANDROID__\n  if (hard_locale (LC_CTYPE) || hard_locale (LC_COLLATE))\n    {\n      fprintf (stderr, \"The initial locale should not be hard!\\n\");\n      fail |= 1;\n    }\n#endif\n\n  all_trivial = (setlocale (LC_ALL, \"foobar\") != NULL);\n\n  fail |= test_one (\"de\", 2);\n  fail |= test_one (\"de_DE\", 4);\n  fail |= test_one (\"de_DE.ISO8859-1\", 8);\n  fail |= test_one (\"de_DE.iso88591\", 8);\n  fail |= test_one (\"de_DE.UTF-8\", 16);\n  fail |= test_one (\"de_DE.utf8\", 16);\n  fail |= test_one (\"german\", 32);\n  fail |= test_one (\"C.UTF-8\", 64);\n\n  return fail;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}