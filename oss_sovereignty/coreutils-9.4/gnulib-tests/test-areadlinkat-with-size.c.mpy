{
  "module_name": "test-areadlinkat-with-size.c",
  "hash_id": "c44d097d6a80a5652ee68edeaaaa8e026ee46591d75d894927242821ada0ece8",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-areadlinkat-with-size.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include \"areadlink.h\"\n\n#include <fcntl.h>\n#include <errno.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <sys/stat.h>\n#include <unistd.h>\n\n#include \"ignore-value.h\"\n#include \"macros.h\"\n\n#define BASE \"test-areadlinkat-with-size.t\"\n\n#include \"test-areadlink.h\"\n\nstatic int dfd = AT_FDCWD;\n\n \nstatic char *\ndo_areadlinkat_with_size (char const *name, size_t size)\n{\n  return areadlinkat_with_size (dfd, name, size);\n}\n\nint\nmain (void)\n{\n  int result;\n\n   \n  ignore_value (system (\"rm -rf \" BASE \"*\"));\n\n   \n  result = test_areadlink (do_areadlinkat_with_size, false);\n  dfd = open (\".\", O_RDONLY);\n  ASSERT (0 <= dfd);\n  ASSERT (test_areadlink (do_areadlinkat_with_size, false) == result);\n\n   \n  if (result == 77)\n    fputs (\"skipping test: symlinks not supported on this file system\\n\",\n           stderr);\n  else\n    {\n      char *buf;\n      ASSERT (symlink (\"nowhere\", BASE \"link\") == 0);\n      ASSERT (mkdir (BASE \"dir\", 0700) == 0);\n      ASSERT (chdir (BASE \"dir\") == 0);\n      buf = areadlinkat_with_size (dfd, BASE \"link\", strlen (BASE \"link\"));\n      ASSERT (buf);\n      ASSERT (strcmp (buf, \"nowhere\") == 0);\n      free (buf);\n      errno = 0;\n      ASSERT (areadlinkat_with_size (-1, BASE \"link\", 1) == NULL);\n      ASSERT (errno == EBADF);\n      errno = 0;\n      ASSERT (areadlinkat_with_size (AT_FDCWD, BASE \"link\", 1) == NULL);\n      ASSERT (errno == ENOENT);\n      ASSERT (chdir (\"..\") == 0);\n      ASSERT (rmdir (BASE \"dir\") == 0);\n      ASSERT (unlink (BASE \"link\") == 0);\n    }\n\n  ASSERT (close (dfd) == 0);\n  return result;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}