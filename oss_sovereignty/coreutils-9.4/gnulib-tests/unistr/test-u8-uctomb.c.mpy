{
  "module_name": "test-u8-uctomb.c",
  "hash_id": "728f2bb3139c36283346aa34f5c79f39c2a7e39d9000eb62fbd3844600c5c6c5",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/unistr/test-u8-uctomb.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include \"unistr.h\"\n\n#include \"macros.h\"\n\n#define MAGIC 0xBA\n\nint\nmain ()\n{\n   \n  {\n    ucs4_t uc;\n\n    for (uc = 0; uc < 0x80; uc++)\n      {\n        uint8_t buf[5] = { MAGIC, MAGIC, MAGIC, MAGIC, MAGIC };\n        int ret;\n\n        ret = u8_uctomb (buf, uc, 0);\n        ASSERT (ret == -2);\n        ASSERT (buf[0] == MAGIC);\n\n        ret = u8_uctomb (buf, uc, 1);\n        ASSERT (ret == 1);\n        ASSERT (buf[0] == uc);\n        ASSERT (buf[1] == MAGIC);\n      }\n  }\n\n   \n  {\n    ucs4_t uc = 0x00D7;\n    uint8_t buf[5] = { MAGIC, MAGIC, MAGIC, MAGIC, MAGIC };\n    int ret;\n\n    ret = u8_uctomb (buf, uc, 0);\n    ASSERT (ret == -2);\n    ASSERT (buf[0] == MAGIC);\n\n    ret = u8_uctomb (buf, uc, 1);\n    ASSERT (ret == -2);\n    ASSERT (buf[0] == MAGIC);\n\n    ret = u8_uctomb (buf, uc, 2);\n    ASSERT (ret == 2);\n    ASSERT (buf[0] == 0xC3);\n    ASSERT (buf[1] == 0x97);\n    ASSERT (buf[2] == MAGIC);\n  }\n\n   \n  {\n    ucs4_t uc = 0x20AC;\n    uint8_t buf[5] = { MAGIC, MAGIC, MAGIC, MAGIC, MAGIC };\n    int ret;\n\n    ret = u8_uctomb (buf, uc, 0);\n    ASSERT (ret == -2);\n    ASSERT (buf[0] == MAGIC);\n\n    ret = u8_uctomb (buf, uc, 1);\n    ASSERT (ret == -2);\n    ASSERT (buf[0] == MAGIC);\n\n    ret = u8_uctomb (buf, uc, 2);\n    ASSERT (ret == -2);\n    ASSERT (buf[0] == MAGIC);\n    ASSERT (buf[1] == MAGIC);\n\n    ret = u8_uctomb (buf, uc, 3);\n    ASSERT (ret == 3);\n    ASSERT (buf[0] == 0xE2);\n    ASSERT (buf[1] == 0x82);\n    ASSERT (buf[2] == 0xAC);\n    ASSERT (buf[3] == MAGIC);\n  }\n\n   \n  {\n    ucs4_t uc = 0x10FFFD;\n    uint8_t buf[5] = { MAGIC, MAGIC, MAGIC, MAGIC, MAGIC };\n    int ret;\n\n    ret = u8_uctomb (buf, uc, 0);\n    ASSERT (ret == -2);\n    ASSERT (buf[0] == MAGIC);\n\n    ret = u8_uctomb (buf, uc, 1);\n    ASSERT (ret == -2);\n    ASSERT (buf[0] == MAGIC);\n\n    ret = u8_uctomb (buf, uc, 2);\n    ASSERT (ret == -2);\n    ASSERT (buf[0] == MAGIC);\n    ASSERT (buf[1] == MAGIC);\n\n    ret = u8_uctomb (buf, uc, 3);\n    ASSERT (ret == -2);\n    ASSERT (buf[0] == MAGIC);\n    ASSERT (buf[1] == MAGIC);\n    ASSERT (buf[2] == MAGIC);\n\n    ret = u8_uctomb (buf, uc, 4);\n    ASSERT (ret == 4);\n    ASSERT (buf[0] == 0xF4);\n    ASSERT (buf[1] == 0x8F);\n    ASSERT (buf[2] == 0xBF);\n    ASSERT (buf[3] == 0xBD);\n    ASSERT (buf[4] == MAGIC);\n  }\n\n   \n  {\n    ucs4_t invalid[] = { 0x110000, 0xD800, 0xDBFF, 0xDC00, 0xDFFF };\n    uint8_t buf[5] = { MAGIC, MAGIC, MAGIC, MAGIC, MAGIC };\n    size_t i;\n\n    for (i = 0; i < SIZEOF (invalid); i++)\n      {\n        ucs4_t uc = invalid[i];\n        int n;\n\n        for (n = 0; n <= 4; n++)\n          {\n            int ret = u8_uctomb (buf, uc, n);\n            ASSERT (ret == -1);\n            ASSERT (buf[0] == MAGIC);\n            ASSERT (buf[1] == MAGIC);\n            ASSERT (buf[2] == MAGIC);\n            ASSERT (buf[3] == MAGIC);\n            ASSERT (buf[4] == MAGIC);\n          }\n      }\n  }\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}