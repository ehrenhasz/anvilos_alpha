{
  "module_name": "test-posixtm.c",
  "hash_id": "bc5a96b29784eed29cafe7dfac3582d653b047b55113987df3896c8e1a04576c",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-posixtm.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include \"posixtm.h\"\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <stdint.h>\n#include <time.h>\n\n#include \"intprops.h\"\n#include \"macros.h\"\n\nstruct posixtm_test\n{\n  char const *in;\n  unsigned int syntax_bits;\n  bool valid;\n  int_least64_t t_expected;\n};\n\n \nenum { LY = PDS_CENTURY | PDS_SECONDS };\n\nstatic struct posixtm_test const T[] =\n  {\n     \n    { \"12131415.16\",     LY, 1,            0},  \n    { \"12131415\",        LY, 1,            0},  \n\n#if !((defined __APPLE__ && defined __MACH__) || defined __sun \\\n      || (defined _WIN32 && !defined __CYGWIN__))\n     \n    { \"000001010000.00\", LY, 1,\n                      - INT64_C (62167219200)}, \n    { \"000012312359.59\", LY, 1,\n                      - INT64_C (62135596801)}, \n#endif\n#if !(defined _WIN32 && !defined __CYGWIN__)\n    { \"000101010000.00\", LY, 1,\n                      - INT64_C (62135596800)}, \n    { \"190112132045.51\", LY, 1,\n                       - INT64_C (2147483649)}, \n    { \"190112132045.52\", LY, 1,\n                       - INT64_C (2147483648)}, \n    { \"190112132045.53\", LY, 1,  -2147483647},  \n    { \"190112132046.52\", LY, 1,  -2147483588},  \n    { \"190112132145.52\", LY, 1,  -2147480048},  \n    { \"190112142045.52\", LY, 1,  -2147397248},  \n    { \"190201132045.52\", LY, 1,  -2144805248},  \n    { \"196912312359.59\", LY, 1,           -1},  \n#endif\n    { \"197001010000.00\", LY, 1,            0},  \n    { \"197001010000.01\", LY, 1,            1},  \n    { \"197001010001.00\", LY, 1,           60},  \n    { \"197001010000.60\", LY, 1,           60},  \n    { \"197001010100.00\", LY, 1,         3600},  \n    { \"197001020000.00\", LY, 1,        86400},  \n    { \"197002010000.00\", LY, 1,      2678400},  \n    { \"197101010000.00\", LY, 1,     31536000},  \n    { \"197001000000.00\", LY, 0,            0},  \n    { \"197000010000.00\", LY, 0,            0},  \n    { \"197001010060.00\", LY, 0,            0},  \n    { \"197001012400.00\", LY, 0,            0},  \n    { \"197001320000.00\", LY, 0,            0},  \n    { \"197013010000.00\", LY, 0,            0},  \n    { \"203801190314.06\", LY, 1,   2147483646},  \n    { \"203801190314.07\", LY, 1,   2147483647},  \n    { \"203801190314.08\", LY, 1,\n                       INT64_C (  2147483648)}, \n#if !(defined _WIN32 && !defined __CYGWIN__)\n    { \"999912312359.59\", LY, 1,\n                       INT64_C (253402300799)}, \n#endif\n    { \"1112131415\",      LY, 1,   1323785700},  \n    { \"1112131415.16\",   LY, 1,   1323785716},  \n    { \"201112131415.16\", LY, 1,   1323785716},  \n#if !(defined _WIN32 && !defined __CYGWIN__)\n    { \"191112131415.16\", LY, 1,  -1831974284},  \n#endif\n    { \"203712131415.16\", LY, 1,   2144326516},  \n    { \"3712131415.16\",   LY, 1,   2144326516},  \n    { \"6812131415.16\",   LY, 1,\n                       INT64_C (  3122633716)}, \n#if !(defined _WIN32 && !defined __CYGWIN__)\n    { \"6912131415.16\",   LY, 1,     -1590284},  \n#endif\n    { \"7012131415.16\",   LY, 1,     29945716},  \n    { \"1213141599\",      PDS_TRAILING_YEAR,\n                             1,    945094500},  \n    { \"1213141500\",      PDS_TRAILING_YEAR,\n                             1,    976716900},  \n    { NULL,               0, 0,            0}\n  };\n\nint\nmain (void)\n{\n  unsigned int i;\n  int fail = 0;\n  char curr_year_str[30];\n  struct tm *tm;\n  time_t t_now;\n  int err;\n  size_t n_bytes;\n\n   \n  err = setenv (\"TZ\", \"UTC0\", 1);\n  ASSERT (err == 0);\n\n  t_now = time (NULL);\n  ASSERT (t_now != (time_t) -1);\n  tm = localtime (&t_now);\n  ASSERT (tm);\n  n_bytes = strftime (curr_year_str, sizeof curr_year_str, \"%Y\", tm);\n  ASSERT (0 < n_bytes);\n\n  for (i = 0; T[i].in; i++)\n    {\n      time_t t_out;\n      time_t t_exp;\n      bool ok;\n\n       \n      if (T[i].t_expected < 0 && ! TYPE_SIGNED (time_t))\n        {\n          printf (\"skipping %s: result is negative, \"\n                  \"but your time_t is unsigned\\n\", T[i].in);\n          continue;\n        }\n\n      if (! (TYPE_MINIMUM (time_t) <= T[i].t_expected\n             && T[i].t_expected <= TYPE_MAXIMUM (time_t)))\n        {\n          printf (\"skipping %s: result is out of range of your time_t\\n\",\n                  T[i].in);\n          continue;\n        }\n\n      t_exp = T[i].t_expected;\n\n       \n      if (8 <= strlen (T[i].in)\n          && (T[i].in[8] == '.' || T[i].in[8] == '\\0'))\n        {\n          char tmp_buf[20];\n          stpcpy (stpcpy (tmp_buf, curr_year_str), T[i].in);\n          ASSERT (posixtime (&t_exp, tmp_buf, T[i].syntax_bits));\n        }\n\n      ok = posixtime (&t_out, T[i].in, T[i].syntax_bits);\n      if (ok != !!T[i].valid)\n        {\n          printf (\"%s return value mismatch: got %d, expected %d\\n\",\n                  T[i].in, !!ok, T[i].valid);\n          fail = 1;\n          continue;\n        }\n\n      if (!ok)\n        continue;\n\n      if (t_out != t_exp)\n        {\n          printf (\"%s mismatch (-: actual; +:expected)\\n-%12ld\\n+%12ld\\n\",\n                  T[i].in, (long) t_out, (long) t_exp);\n          fail = 1;\n        }\n    }\n\n  return fail;\n}\n\n \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}