{
  "module_name": "test-nl_langinfo-mt.c",
  "hash_id": "7eb06f804f90856c47e7c4a6f216271f07e573717d04a700d2f0d039b80b113a",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-nl_langinfo-mt.c",
  "human_readable_source": " \n\n#include <config.h>\n\n \n#if 4 < __GNUC__ + (3 <= __GNUC_MINOR__)\n# pragma GCC diagnostic ignored \"-Wreturn-type\"\n#endif\n\n#if USE_ISOC_THREADS || USE_POSIX_THREADS || USE_ISOC_AND_POSIX_THREADS || USE_WINDOWS_THREADS\n\n \n#include <langinfo.h>\n\n#include <locale.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <time.h>\n\n#include \"glthread/thread.h\"\n\n\n \n\n#if defined _WIN32 && !defined __CYGWIN__\n# define ENGLISH \"English_United States\"\n# define FRENCH  \"French_France\"\n# define GERMAN  \"German_Germany\"\n# define ENCODING \".1252\"\n#else\n# define ENGLISH \"en_US\"\n# define FRENCH  \"fr_FR\"\n# define GERMAN  \"de_DE\"\n# if defined __sgi\n#  define ENCODING \".ISO8859-15\"\n# elif defined __hpux\n#  define ENCODING \".utf8\"\n# else\n#  define ENCODING \".UTF-8\"\n# endif\n#endif\n\nstatic const char LOCALE1[] = ENGLISH ENCODING;\nstatic const char LOCALE2[] = FRENCH ENCODING;\nstatic const char LOCALE3[] = GERMAN ENCODING;\n\nstatic char *expected1;\n\nstatic void *\nthread1_func (void *arg)\n{\n  for (;;)\n    {\n      const char *value = nl_langinfo (CODESET);\n      if (strcmp (expected1, value) != 0)\n        {\n          fprintf (stderr, \"thread1 disturbed by threadN!\\n\"); fflush (stderr);\n          abort ();\n        }\n    }\n\n   \n}\n\nstatic char *expected2;\n\nstatic void *\nthread2_func (void *arg)\n{\n  for (;;)\n    {\n      const char *value = nl_langinfo (PM_STR);\n      if (strcmp (expected2, value) != 0)\n        {\n          fprintf (stderr, \"thread2 disturbed by threadN!\\n\"); fflush (stderr);\n          abort ();\n        }\n    }\n\n   \n}\n\nstatic char *expected3;\n\nstatic void *\nthread3_func (void *arg)\n{\n  for (;;)\n    {\n      const char *value = nl_langinfo (DAY_2);\n      if (strcmp (expected3, value) != 0)\n        {\n          fprintf (stderr, \"thread3 disturbed by threadN!\\n\"); fflush (stderr);\n          abort ();\n        }\n    }\n\n   \n}\n\nstatic char *expected4;\n\nstatic void *\nthread4_func (void *arg)\n{\n  for (;;)\n    {\n      const char *value = nl_langinfo (ALTMON_2);\n      if (strcmp (expected4, value) != 0)\n        {\n          fprintf (stderr, \"thread4 disturbed by threadN!\\n\"); fflush (stderr);\n          abort ();\n        }\n    }\n\n   \n}\n\nstatic char *expected5;\n\nstatic void *\nthread5_func (void *arg)\n{\n  for (;;)\n    {\n      const char *value = nl_langinfo (CRNCYSTR);\n      if (strcmp (expected5, value) != 0)\n        {\n          fprintf (stderr, \"thread5 disturbed by threadN!\\n\"); fflush (stderr);\n          abort ();\n        }\n    }\n\n   \n}\n\nstatic char *expected6;\n\nstatic void *\nthread6_func (void *arg)\n{\n  for (;;)\n    {\n      const char *value = nl_langinfo (RADIXCHAR);\n      if (strcmp (expected6, value) != 0)\n        {\n          fprintf (stderr, \"thread6 disturbed by threadN!\\n\"); fflush (stderr);\n          abort ();\n        }\n    }\n\n   \n}\n\nstatic void *\nthreadN_func (void *arg)\n{\n  for (;;)\n    {\n      nl_langinfo (CODESET);         \n      nl_langinfo (AM_STR);           \n      nl_langinfo (PM_STR);           \n      nl_langinfo (DAY_2);            \n      nl_langinfo (DAY_5);            \n      nl_langinfo (ALTMON_2);         \n      nl_langinfo (ALTMON_9);         \n      nl_langinfo (CRNCYSTR);     \n      nl_langinfo (RADIXCHAR);     \n      nl_langinfo (THOUSEP);       \n    }\n\n   \n}\n\nint\nmain (int argc, char *argv[])\n{\n  if (setlocale (LC_ALL, LOCALE1) == NULL)\n    {\n      fprintf (stderr, \"Skipping test: LOCALE1 not recognized\\n\");\n      return 77;\n    }\n  if (setlocale (LC_MONETARY, LOCALE2) == NULL)\n    {\n      fprintf (stderr, \"Skipping test: LOCALE2 not recognized\\n\");\n      return 77;\n    }\n  if (setlocale (LC_NUMERIC, LOCALE3) == NULL)\n    {\n      fprintf (stderr, \"Skipping test: LOCALE3 not recognized\\n\");\n      return 77;\n    }\n\n  expected1 = strdup (nl_langinfo (CODESET));\n  expected2 = strdup (nl_langinfo (PM_STR));\n  expected3 = strdup (nl_langinfo (DAY_2));\n  expected4 = strdup (nl_langinfo (ALTMON_2));\n  expected5 = strdup (nl_langinfo (CRNCYSTR));\n  expected6 = strdup (nl_langinfo (RADIXCHAR));\n\n   \n  gl_thread_create (thread1_func, NULL);\n  gl_thread_create (thread2_func, NULL);\n  gl_thread_create (thread3_func, NULL);\n  gl_thread_create (thread4_func, NULL);\n  gl_thread_create (thread5_func, NULL);\n  gl_thread_create (thread6_func, NULL);\n   \n  gl_thread_create (threadN_func, NULL);\n\n   \n  {\n    struct timespec duration;\n    duration.tv_sec = (argc > 1 ? atoi (argv[1]) : 2);\n    duration.tv_nsec = 0;\n\n    nanosleep (&duration, NULL);\n  }\n\n  return 0;\n}\n\n#else\n\n \n\n#include <stdio.h>\n\nint\nmain ()\n{\n  fputs (\"Skipping test: multithreading not enabled\\n\", stderr);\n  return 77;\n}\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}