{
  "module_name": "test-getrusage.c",
  "hash_id": "ed20a6f18c8b94d3e7529ef8a1f688f2a79aab704ec15020080dc9205e05bdbd",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-getrusage.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include <sys/resource.h>\n\n#include \"signature.h\"\nSIGNATURE_CHECK (getrusage, int, (int, struct rusage *));\n\n#include <sys/time.h>\n\n#include \"macros.h\"\n\nvolatile unsigned int counter;\n\nint\nmain (void)\n{\n  struct rusage before;\n  struct rusage after;\n  int ret;\n\n  ret = getrusage (RUSAGE_SELF, &before);\n  ASSERT (ret == 0);\n\n   \n  {\n    struct timeval t0;\n    ASSERT (gettimeofday (&t0, NULL) == 0);\n\n    for (;;)\n      {\n        struct timeval t;\n        int i;\n\n        for (i = 0; i < 1000000; i++)\n          counter++;\n\n        ASSERT (gettimeofday (&t, NULL) == 0);\n        if (t.tv_sec - t0.tv_sec > 1\n            || (t.tv_sec - t0.tv_sec == 1 && t.tv_usec >= t0.tv_usec))\n          break;\n      }\n  }\n\n  ret = getrusage (RUSAGE_SELF, &after);\n  ASSERT (ret == 0);\n\n  ASSERT (after.ru_utime.tv_sec >= before.ru_utime.tv_sec);\n  ASSERT (after.ru_stime.tv_sec >= before.ru_stime.tv_sec);\n  {\n     \n    unsigned int spent_utime =\n      (after.ru_utime.tv_sec > before.ru_utime.tv_sec\n       ? (after.ru_utime.tv_sec - before.ru_utime.tv_sec - 1) * 1000000U\n         + after.ru_utime.tv_usec + (1000000U - before.ru_utime.tv_usec)\n       : after.ru_utime.tv_usec - before.ru_utime.tv_usec);\n    unsigned int spent_stime =\n      (after.ru_stime.tv_sec > before.ru_stime.tv_sec\n       ? (after.ru_stime.tv_sec - before.ru_stime.tv_sec - 1) * 1000000U\n         + after.ru_stime.tv_usec + (1000000U - before.ru_stime.tv_usec)\n       : after.ru_stime.tv_usec - before.ru_stime.tv_usec);\n\n    ASSERT (spent_utime + spent_stime <= 2 * 1000000U);\n     \n    ASSERT (spent_utime + spent_stime > 10000U);\n  }\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}