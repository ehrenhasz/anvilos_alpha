{
  "module_name": "test-unicodeio.c",
  "hash_id": "0cd326bd93e9f02ea7e4cba57882dbb0c1352a1d6dadc73ba5be0d44f6413c18",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-unicodeio.c",
  "human_readable_source": " \n\n#include <config.h>\n\n \n#include \"unicodeio.h\"\n\n#include <locale.h>\n#include <string.h>\n\n#include \"localcharset.h\"\n#include \"macros.h\"\n\n#define TEST_CODE 0x2022\n#define TEST_CODE_AS_UTF8 \"\\xe2\\x80\\xa2\"\n#define TEST_CODE_AS_GB18030 \"\\x81\\x36\\xa6\\x31\"\n\nstatic char result[64];\n\nstatic long\nsuccess_callback (const char *buf, size_t buflen, void *callback_arg)\n{\n  memcpy (result, buf, buflen);\n  result[buflen] = '\\0';\n  return 42;\n}\n\nstatic long\nfailure_callback (unsigned int code, const char *msg, void *callback_arg)\n{\n  ASSERT (code == TEST_CODE);\n  strcpy (result, \".\");\n  return 55;\n}\n\nint\nmain (int argc, char *argv[])\n{\n   \n  if (setlocale (LC_ALL, \"\") == NULL)\n    return 1;\n\n  switch (unicode_to_mb (TEST_CODE, success_callback, failure_callback, NULL))\n    {\n    case 42:\n      if (argc > 1)\n        switch (argv[1][0])\n          {\n          case '1':\n             \n            {\n              const char *charset = locale_charset ();\n              if (strcmp (charset, \"CP874\") == 0\n                  || strcmp (charset, \"CP1250\") == 0\n                  || strcmp (charset, \"CP1251\") == 0\n                  || strcmp (charset, \"CP1252\") == 0\n                  || strcmp (charset, \"CP1253\") == 0\n                  || strcmp (charset, \"CP1254\") == 0\n                  || strcmp (charset, \"CP1255\") == 0\n                  || strcmp (charset, \"CP1256\") == 0\n                  || strcmp (charset, \"CP1257\") == 0\n                  || strcmp (charset, \"CP1258\") == 0)\n                ASSERT (strcmp (result, \"\\x95\") == 0);\n              else\n                ASSERT (strcmp (result, TEST_CODE_AS_UTF8) == 0);\n            }\n            break;\n          case '2':\n            ASSERT (strcmp (result, TEST_CODE_AS_UTF8) == 0);\n            break;\n          case '3':\n            ASSERT (strcmp (result, TEST_CODE_AS_GB18030) == 0);\n            break;\n          }\n      break;\n    case 55:\n      ASSERT (strcmp (result, \".\") == 0);\n      break;\n    default:\n      ASSERT (0);\n    }\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}