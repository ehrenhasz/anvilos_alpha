{
  "module_name": "test-freopen-safer.c",
  "hash_id": "ce8836ca5856920d795c15294988480a117e315a4b2ba2536efb973abfae8d2a",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-freopen-safer.c",
  "human_readable_source": " \n\n#include <config.h>\n\n \n#include \"stdio--.h\"\n\n \n#include <unistd.h>\n\n \n\n#define BACKUP_STDERR_FILENO 10\n#define ASSERT_STREAM myerr\n#include \"macros.h\"\n\nstatic FILE *myerr;\n\nint\nmain (void)\n{\n  FILE *fp;\n\n   \n  if (dup2 (STDERR_FILENO, BACKUP_STDERR_FILENO) != BACKUP_STDERR_FILENO\n      || (myerr = fdopen (BACKUP_STDERR_FILENO, \"w\")) == NULL)\n    return 2;\n\n  {\n    FILE *tmp;\n    ASSERT (tmp = fopen (\"/dev/null\", \"r\"));\n    ASSERT (STDERR_FILENO < fileno (tmp));\n    ASSERT (fp = fopen (\"/dev/null\", \"w\"));\n    ASSERT (fileno (tmp) < fileno (fp));\n    ASSERT (fclose (tmp) == 0);\n  }\n\n   \n  ASSERT (freopen (\"/dev/null\", \"r+\", fp) == fp);\n  ASSERT (STDERR_FILENO < fileno (fp));\n\n  ASSERT (freopen (\"/dev/null\", \"r\", stdin) == stdin);\n  ASSERT (STDIN_FILENO == fileno (stdin));\n\n  ASSERT (freopen (\"/dev/null\", \"w\", stdout) == stdout);\n  ASSERT (STDOUT_FILENO == fileno (stdout));\n\n  ASSERT (freopen (\"/dev/null\", \"w\", stderr) == stderr);\n  ASSERT (STDERR_FILENO == fileno (stderr));\n\n   \n  ASSERT (close (STDIN_FILENO) == 0);\n\n  ASSERT (freopen (\"/dev/null\", \"w\", stdout) == stdout);\n  ASSERT (STDOUT_FILENO == fileno (stdout));\n\n  ASSERT (freopen (\"/dev/null\", \"w\", stderr) == stderr);\n  ASSERT (STDERR_FILENO == fileno (stderr));\n\n  ASSERT (freopen (\"/dev/null\", \"a\", fp) == fp);\n  ASSERT (STDERR_FILENO < fileno (fp));\n\n   \n  ASSERT (close (STDOUT_FILENO) == 0);\n\n  ASSERT (freopen (\"/dev/null\", \"w\", stderr) == stderr);\n  ASSERT (STDERR_FILENO == fileno (stderr));\n\n  ASSERT (freopen (\"/dev/null\", \"a+\", fp) == fp);\n  ASSERT (STDERR_FILENO < fileno (fp));\n\n   \n  ASSERT (close (STDERR_FILENO) == 0);\n\n  ASSERT (freopen (\"/dev/null\", \"w+\", fp) == fp);\n  ASSERT (STDERR_FILENO < fileno (fp));\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}