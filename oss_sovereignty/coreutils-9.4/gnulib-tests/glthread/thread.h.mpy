{
  "module_name": "thread.h",
  "hash_id": "12f6a703249142dab3a2b4cc3422b0e9cde42f1caa20a2b98dbdde1fd2f3bdaf",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/glthread/thread.h",
  "human_readable_source": " \n\n \n\n\n#ifndef _GLTHREAD_THREAD_H\n#define _GLTHREAD_THREAD_H\n\n \n#if !_GL_CONFIG_H_INCLUDED\n #error \"Please include config.h first.\"\n#endif\n\n#include <errno.h>\n#include <stdlib.h>\n\n#if !defined c11_threads_in_use\n# if HAVE_THREADS_H && USE_POSIX_THREADS_FROM_LIBC\n#  define c11_threads_in_use() 1\n# elif HAVE_THREADS_H && USE_POSIX_THREADS_WEAK\n#  include <threads.h>\n#  pragma weak thrd_exit\n#  define c11_threads_in_use() (thrd_exit != NULL)\n# else\n#  define c11_threads_in_use() 0\n# endif\n#endif\n\n \n\n#if USE_ISOC_THREADS\n\n \n\n# include <threads.h>\n\n# ifdef __cplusplus\nextern \"C\" {\n# endif\n\n \n\ntypedef struct thrd_with_exitvalue *gl_thread_t;\nextern int glthread_create (gl_thread_t *threadp,\n                            void *(*func) (void *), void *arg);\n# define glthread_sigmask(HOW, SET, OSET) \\\n    pthread_sigmask (HOW, SET, OSET)\nextern int glthread_join (gl_thread_t thread, void **return_value_ptr);\nextern gl_thread_t gl_thread_self (void);\n# define gl_thread_self_pointer() \\\n    (void *) gl_thread_self ()\nextern _Noreturn void gl_thread_exit (void *return_value);\n# define glthread_atfork(PREPARE_FUNC, PARENT_FUNC, CHILD_FUNC) 0\n\n# ifdef __cplusplus\n}\n# endif\n\n#endif\n\n \n\n#if USE_POSIX_THREADS || USE_ISOC_AND_POSIX_THREADS\n\n \n\n# include <pthread.h>\n\n \n# include <stdint.h>\n\n \n# if defined __sgi\n#  include <unistd.h>\n# endif\n\n# if USE_POSIX_THREADS_WEAK\n \n#  include <signal.h>\n# endif\n\n# ifdef __cplusplus\nextern \"C\" {\n# endif\n\n# if PTHREAD_IN_USE_DETECTION_HARD\n\n \n#  define pthread_in_use() \\\n     glthread_in_use ()\nextern int glthread_in_use (void);\n\n# endif\n\n# if USE_POSIX_THREADS_WEAK\n\n \n\n \n\n \n\n#  ifndef pthread_sigmask  \n#   pragma weak pthread_sigmask\n#  endif\n\n#  pragma weak pthread_join\n#  ifndef pthread_self\n#   pragma weak pthread_self\n#  endif\n#  pragma weak pthread_exit\n#  if HAVE_PTHREAD_ATFORK\n#   pragma weak pthread_atfork\n#  endif\n\n#  if !PTHREAD_IN_USE_DETECTION_HARD\n#   pragma weak pthread_mutexattr_gettype\n#   define pthread_in_use() \\\n      (pthread_mutexattr_gettype != NULL || c11_threads_in_use ())\n#  endif\n\n# else\n\n#  if !PTHREAD_IN_USE_DETECTION_HARD\n#   define pthread_in_use() 1\n#  endif\n\n# endif\n\n \n\n \ntypedef pthread_t gl_thread_t;\n# define glthread_create(THREADP, FUNC, ARG) \\\n    (pthread_in_use () ? pthread_create (THREADP, NULL, FUNC, ARG) : ENOSYS)\n# define glthread_sigmask(HOW, SET, OSET) \\\n    (pthread_in_use () ? pthread_sigmask (HOW, SET, OSET) : 0)\n# define glthread_join(THREAD, RETVALP) \\\n    (pthread_in_use () ? pthread_join (THREAD, RETVALP) : 0)\n# ifdef PTW32_VERSION\n    \n#  define gl_thread_self() \\\n     (pthread_in_use () ? pthread_self () : gl_null_thread)\n#  define gl_thread_self_pointer() \\\n     (pthread_in_use () ? pthread_self ().p : NULL)\nextern const gl_thread_t gl_null_thread;\n# elif defined __MVS__\n    \n#  define gl_thread_self() \\\n     (pthread_in_use () ? pthread_self () : gl_null_thread)\n#  define gl_thread_self_pointer() \\\n     (pthread_in_use () ? *((void **) pthread_self ().__) : NULL)\nextern const gl_thread_t gl_null_thread;\n# else\n#  define gl_thread_self() \\\n     (pthread_in_use () ? pthread_self () : (pthread_t) 0)\n#  define gl_thread_self_pointer() \\\n     (pthread_in_use () ? (void *) (intptr_t) (pthread_t) pthread_self () : NULL)\n# endif\n# define gl_thread_exit(RETVAL) \\\n    (void) (pthread_in_use () ? (pthread_exit (RETVAL), 0) : 0)\n\n# if HAVE_PTHREAD_ATFORK\n#  define glthread_atfork(PREPARE_FUNC, PARENT_FUNC, CHILD_FUNC) \\\n     (pthread_in_use () ? pthread_atfork (PREPARE_FUNC, PARENT_FUNC, CHILD_FUNC) : 0)\n# else\n#  define glthread_atfork(PREPARE_FUNC, PARENT_FUNC, CHILD_FUNC) 0\n# endif\n\n# ifdef __cplusplus\n}\n# endif\n\n#endif\n\n \n\n#if USE_WINDOWS_THREADS\n\n# define WIN32_LEAN_AND_MEAN   \n# include <windows.h>\n\n# include \"windows-thread.h\"\n\n# ifdef __cplusplus\nextern \"C\" {\n# endif\n\n \n\ntypedef glwthread_thread_t gl_thread_t;\n# define glthread_create(THREADP, FUNC, ARG) \\\n    glwthread_thread_create (THREADP, 0, FUNC, ARG)\n# define glthread_sigmask(HOW, SET, OSET) \\\n      0\n# define glthread_join(THREAD, RETVALP) \\\n    glwthread_thread_join (THREAD, RETVALP)\n# define gl_thread_self() \\\n    glwthread_thread_self ()\n# define gl_thread_self_pointer() \\\n    gl_thread_self ()\n# define gl_thread_exit(RETVAL) \\\n    glwthread_thread_exit (RETVAL)\n# define glthread_atfork(PREPARE_FUNC, PARENT_FUNC, CHILD_FUNC) 0\n\n# ifdef __cplusplus\n}\n# endif\n\n#endif\n\n \n\n#if !(USE_ISOC_THREADS || USE_POSIX_THREADS || USE_ISOC_AND_POSIX_THREADS || USE_WINDOWS_THREADS)\n\n \n\ntypedef int gl_thread_t;\n# define glthread_create(THREADP, FUNC, ARG) ENOSYS\n# define glthread_sigmask(HOW, SET, OSET) 0\n# define glthread_join(THREAD, RETVALP) 0\n# define gl_thread_self() 0\n# define gl_thread_self_pointer() \\\n    ((void *) gl_thread_self ())\n# define gl_thread_exit(RETVAL) (void)0\n# define glthread_atfork(PREPARE_FUNC, PARENT_FUNC, CHILD_FUNC) 0\n\n#endif\n\n \n\n \n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nextern gl_thread_t gl_thread_create (void *(*func) (void *arg), void *arg);\n#define gl_thread_sigmask(HOW, SET, OSET)     \\\n   do                                         \\\n     {                                        \\\n       if (glthread_sigmask (HOW, SET, OSET)) \\\n         abort ();                            \\\n     }                                        \\\n   while (0)\n#define gl_thread_join(THREAD, RETVAL)     \\\n   do                                      \\\n     {                                     \\\n       if (glthread_join (THREAD, RETVAL)) \\\n         abort ();                         \\\n     }                                     \\\n   while (0)\n#define gl_thread_atfork(PREPARE, PARENT, CHILD)     \\\n   do                                                \\\n     {                                               \\\n       if (glthread_atfork (PREPARE, PARENT, CHILD)) \\\n         abort ();                                   \\\n     }                                               \\\n   while (0)\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}