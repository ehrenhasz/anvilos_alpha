{
  "module_name": "test-nl_langinfo2.c",
  "hash_id": "e3205d3eafe57f24f4000cd5c364a1995e4eb15917dc3e2e1344c297110fb4c6",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-nl_langinfo2.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include <langinfo.h>\n\n#include <locale.h>\n#include <stdlib.h>\n#include <string.h>\n\n#include \"c-strcase.h\"\n#include \"c-strcasestr.h\"\n#include \"macros.h\"\n\nint\nmain (int argc, char *argv[])\n{\n#if HAVE_WORKING_USELOCALE\n   \n  int pass;\n  bool skipped_all = true;\n\n   \n   \n  const char *c_CODESET = nl_langinfo (CODESET);\n   \n  const char *c_RADIXCHAR = nl_langinfo (RADIXCHAR);\n   \n  const char *c_T_FMT_AMPM = nl_langinfo (T_FMT_AMPM);\n  const char *c_AM_STR = nl_langinfo (AM_STR);\n  const char *c_PM_STR = nl_langinfo (PM_STR);\n   \n  const char *c_CRNCYSTR = nl_langinfo (CRNCYSTR);\n   \n  const char *c_YESEXPR = nl_langinfo (YESEXPR);\n\n   \n  (void) c_CODESET;\n  ASSERT (strcmp (c_RADIXCHAR, \".\") == 0);\n  ASSERT (strlen (c_T_FMT_AMPM) > 0);\n  ASSERT (strlen (c_AM_STR) > 0);\n  ASSERT (strlen (c_PM_STR) > 0);\n  ASSERT (strlen (c_CRNCYSTR) <= 1);  \n  ASSERT (c_strcasestr (c_YESEXPR, \"y\"  ) != NULL);\n\n  for (pass = 1; pass <= 2; pass++)\n    {\n       \n      const char *fr_locale_name =\n        getenv (pass == 1 ? \"LOCALE_FR\" : \"LOCALE_FR_UTF8\");\n      if (strcmp (fr_locale_name, \"none\") != 0)\n        {\n           \n          locale_t fr_locale = newlocale (LC_ALL_MASK, fr_locale_name, NULL);\n          if (fr_locale != NULL)\n            {\n              uselocale (fr_locale);\n\n               \n\n               \n              const char *fr_CODESET = nl_langinfo (CODESET);\n              if (pass == 1)\n                ASSERT (strstr (fr_CODESET, \"8859\") != NULL);\n              else if (pass == 2)\n                ASSERT (c_strcasecmp (fr_CODESET, \"UTF-8\") == 0\n                        || c_strcasecmp (fr_CODESET, \"UTF8\") == 0);\n\n               \n              #if !defined MUSL_LIBC\n\n               \n              const char *fr_RADIXCHAR = nl_langinfo (RADIXCHAR);\n              ASSERT (strcmp (fr_RADIXCHAR, \",\") == 0);\n\n               \n               \n              #if !((defined __APPLE__ && defined __MACH__) || defined __sun)\n              const char *fr_T_FMT_AMPM = nl_langinfo (T_FMT_AMPM);\n              const char *fr_AM_STR = nl_langinfo (AM_STR);\n              const char *fr_PM_STR = nl_langinfo (PM_STR);\n              ASSERT (strlen (fr_T_FMT_AMPM) == 0\n                      || strcmp (fr_T_FMT_AMPM, \"%I:%M:%S\") == 0);\n              ASSERT (strlen (fr_AM_STR) == 0);\n              ASSERT (strlen (fr_PM_STR) == 0);\n              #endif\n\n               \n               \n              #if !(defined __APPLE__ && defined __MACH__)\n              const char *fr_CRNCYSTR = nl_langinfo (CRNCYSTR);\n              if (pass == 2)\n                ASSERT (strlen (fr_CRNCYSTR) >= 1\n                        && strcmp (fr_CRNCYSTR + 1, \"\u20ac\") == 0);\n              #endif\n\n              #endif\n\n               \n               \n              #if !defined MUSL_LIBC\n              const char *fr_YESEXPR = nl_langinfo (YESEXPR);\n              ASSERT (c_strcasestr (fr_YESEXPR, \"o\"  ) != NULL);\n              #endif\n\n              skipped_all = false;\n            }\n        }\n    }\n\n  if (skipped_all)\n    {\n      fputs (\"Skipping test: French locale is not installed\\n\", stderr);\n      return 77;\n    }\n\n  return 0;\n#else\n  fputs (\"Skipping test: uselocale() not available\\n\", stderr);\n  return 77;\n#endif\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}