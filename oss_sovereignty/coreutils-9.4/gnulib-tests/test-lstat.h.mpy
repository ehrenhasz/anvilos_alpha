{
  "module_name": "test-lstat.h",
  "hash_id": "30143b304104f316f4ab9928e9fd7fb79532d945f736d99ff217c6dc0031ccb8",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-lstat.h",
  "human_readable_source": " \n\n \n\nstatic int\ntest_lstat_func (int (*func) (char const *, struct stat *), bool print)\n{\n  struct stat st1;\n  struct stat st2;\n\n   \n  ASSERT (func (\".\", &st1) == 0);\n  ASSERT (func (\"./\", &st2) == 0);\n#if !(defined _WIN32 && !defined __CYGWIN__ && !_GL_WINDOWS_STAT_INODES)\n  ASSERT (SAME_INODE (st1, st2));\n#endif\n  ASSERT (S_ISDIR (st1.st_mode));\n  ASSERT (S_ISDIR (st2.st_mode));\n  ASSERT (func (\"/\", &st1) == 0);\n  ASSERT (func (\"///\", &st2) == 0);\n#if !(defined _WIN32 && !defined __CYGWIN__ && !_GL_WINDOWS_STAT_INODES)\n  ASSERT (SAME_INODE (st1, st2));\n#endif\n  ASSERT (S_ISDIR (st1.st_mode));\n  ASSERT (S_ISDIR (st2.st_mode));\n  ASSERT (func (\"..\", &st1) == 0);\n  ASSERT (S_ISDIR (st1.st_mode));\n\n   \n  errno = 0;\n  ASSERT (func (\"\", &st1) == -1);\n  ASSERT (errno == ENOENT);\n  errno = 0;\n  ASSERT (func (\"nosuch\", &st1) == -1);\n  ASSERT (errno == ENOENT);\n  errno = 0;\n  ASSERT (func (\"nosuch/\", &st1) == -1);\n  ASSERT (errno == ENOENT);\n\n  ASSERT (close (creat (BASE \"file\", 0600)) == 0);\n  ASSERT (func (BASE \"file\", &st1) == 0);\n  ASSERT (S_ISREG (st1.st_mode));\n  errno = 0;\n  ASSERT (func (BASE \"file/\", &st1) == -1);\n  ASSERT (errno == ENOTDIR);\n\n   \n  if (symlink (\".\", BASE \"link1\") != 0)\n    {\n      ASSERT (unlink (BASE \"file\") == 0);\n      if (print)\n        fputs (\"skipping test: symlinks not supported on this file system\\n\",\n               stderr);\n      return 77;\n    }\n  ASSERT (symlink (BASE \"file\", BASE \"link2\") == 0);\n  ASSERT (symlink (BASE \"nosuch\", BASE \"link3\") == 0);\n  ASSERT (symlink (BASE \"link4\", BASE \"link4\") == 0);\n\n  ASSERT (func (BASE \"link1\", &st1) == 0);\n  ASSERT (S_ISLNK (st1.st_mode));\n  ASSERT (func (BASE \"link1/\", &st1) == 0);\n  ASSERT (stat (BASE \"link1\", &st2) == 0);\n  ASSERT (S_ISDIR (st1.st_mode));\n  ASSERT (S_ISDIR (st2.st_mode));\n#if !(defined _WIN32 && !defined __CYGWIN__ && !_GL_WINDOWS_STAT_INODES)\n  ASSERT (SAME_INODE (st1, st2));\n#endif\n\n  ASSERT (func (BASE \"link2\", &st1) == 0);\n  ASSERT (S_ISLNK (st1.st_mode));\n  errno = 0;\n  ASSERT (func (BASE \"link2/\", &st1) == -1);\n  ASSERT (errno == ENOTDIR);\n\n  ASSERT (func (BASE \"link3\", &st1) == 0);\n  ASSERT (S_ISLNK (st1.st_mode));\n  errno = 0;\n  ASSERT (func (BASE \"link3/\", &st1) == -1);\n  ASSERT (errno == ENOENT);\n\n  ASSERT (func (BASE \"link4\", &st1) == 0);\n  ASSERT (S_ISLNK (st1.st_mode));\n  errno = 0;\n  ASSERT (func (BASE \"link4/\", &st1) == -1);\n  ASSERT (errno == ELOOP);\n\n   \n  ASSERT (unlink (BASE \"file\") == 0);\n  ASSERT (unlink (BASE \"link1\") == 0);\n  ASSERT (unlink (BASE \"link2\") == 0);\n  ASSERT (unlink (BASE \"link3\") == 0);\n  ASSERT (unlink (BASE \"link4\") == 0);\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}