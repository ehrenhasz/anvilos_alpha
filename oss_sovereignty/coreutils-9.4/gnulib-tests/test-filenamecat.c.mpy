{
  "module_name": "test-filenamecat.c",
  "hash_id": "955d00c92a50bdfc4d9fd673d74ef34d6a622b18d0f1fd69e0a7e9e0476ef7c2",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-filenamecat.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include \"filenamecat.h\"\n\n#include \"idx.h\"\n\n#include <stddef.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n\nint\nmain (_GL_UNUSED int argc, char *argv[])\n{\n  static char const *const tests[][3] =\n    {\n      {\"a\", \"b\",   \"a/b\"},\n      {\"a/\", \"b\",  \"a/b\"},\n      {\"a/\", \"/b\", \"a/b\"},\n      {\"a\", \"/b\",  \"a/b\"},\n\n      {\"/\", \"b\",  \"/b\"},\n      {\"/\", \"/b\", \"/./b\"},  \n      {\"/\", \"/\",  \"/./\"},   \n      {\"a\", \"/\",  \"a/\"},    \n      {\"/a\", \"/\", \"/a/\"},   \n      {\"a\", \"//b\",  \"a//b\"},\n      {\"\", \"a\", \"a\"},   \n    };\n  unsigned int i;\n  bool fail = false;\n\n  for (i = 0; i < sizeof tests / sizeof tests[0]; i++)\n    {\n      char *base_in_result;\n      char const *const *t = tests[i];\n      char *res = file_name_concat (t[0], t[1], &base_in_result);\n      idx_t prefixlen = base_in_result - res;\n      size_t t0len = strlen (t[0]);\n      size_t reslen = strlen (res);\n      if (strcmp (res, t[2]) != 0)\n        {\n          fprintf (stderr, \"test #%u: got %s, expected %s\\n\", i, res, t[2]);\n          fail = true;\n        }\n      if (strcmp (t[1], base_in_result) != 0)\n        {\n          fprintf (stderr, \"test #%u: base %s != base_in_result %s\\n\",\n                   i, t[1], base_in_result);\n          fail = true;\n        }\n      if (! (0 <= prefixlen && prefixlen <= reslen))\n        {\n          fprintf (stderr, \"test #%u: base_in_result is not in result\\n\", i);\n          fail = true;\n        }\n      if (reslen < t0len || memcmp (res, t[0], t0len) != 0)\n        {\n          fprintf (stderr, \"test #%u: %s is not a prefix of %s\\n\",\n                   i, t[0], res);\n          fail = true;\n        }\n      free (res);\n    }\n  exit (fail ? EXIT_FAILURE : EXIT_SUCCESS);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}