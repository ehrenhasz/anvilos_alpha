{
  "module_name": "test-sigaction.c",
  "hash_id": "b2f9a30271e740a66e154cf4e2af7f62e39efc5173c7a93cbaba95e49e68fff6",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-sigaction.c",
  "human_readable_source": " \n\n#include <config.h>\n\n#include <signal.h>\n\n#include \"signature.h\"\nSIGNATURE_CHECK (sigaction, int, (int, struct sigaction const *,\n                                  struct sigaction *));\n\n#include <stddef.h>\n\n#include \"macros.h\"\n\n#ifndef SA_NOCLDSTOP\n# define SA_NOCLDSTOP 0\n#endif\n#ifndef SA_ONSTACK\n# define SA_ONSTACK 0\n#endif\n#ifndef SA_RESETHAND\n# define SA_RESETHAND 0\n#endif\n#ifndef SA_RESTART\n# define SA_RESTART 0\n#endif\n#ifndef SA_SIGINFO\n# define SA_SIGINFO 0\n#endif\n#ifndef SA_NOCLDWAIT\n# define SA_NOCLDWAIT 0\n#endif\n\n \n#define MASK_SA_FLAGS (SA_NOCLDSTOP | SA_ONSTACK | SA_RESETHAND | SA_RESTART \\\n                       | SA_SIGINFO | SA_NOCLDWAIT | SA_NODEFER)\n\n \n\nstatic void\nhandler (int sig)\n{\n  static int entry_count;\n  struct sigaction sa;\n  ASSERT (sig == SIGABRT);\n  ASSERT (sigaction (SIGABRT, NULL, &sa) == 0);\n  ASSERT ((sa.sa_flags & SA_SIGINFO) == 0);\n  switch (entry_count++)\n    {\n    case 0:\n      ASSERT ((sa.sa_flags & SA_RESETHAND) == 0);\n      ASSERT (sa.sa_handler == handler);\n      break;\n    case 1:\n       \n#if !(defined __GLIBC__ || defined __UCLIBC__)\n      ASSERT (sa.sa_handler == SIG_DFL);\n#endif\n      break;\n    default:\n      ASSERT (0);\n    }\n}\n\nint\nmain (void)\n{\n  struct sigaction sa;\n  struct sigaction old_sa;\n  sa.sa_handler = handler;\n\n  sa.sa_flags = 0;\n  ASSERT (sigemptyset (&sa.sa_mask) == 0);\n  ASSERT (sigaction (SIGABRT, &sa, NULL) == 0);\n  ASSERT (raise (SIGABRT) == 0);\n\n  sa.sa_flags = SA_RESETHAND | SA_NODEFER;\n  ASSERT (sigaction (SIGABRT, &sa, &old_sa) == 0);\n  ASSERT ((old_sa.sa_flags & MASK_SA_FLAGS) == 0);\n  ASSERT (old_sa.sa_handler == handler);\n  ASSERT (raise (SIGABRT) == 0);\n\n  sa.sa_handler = SIG_DFL;\n  ASSERT (sigaction (SIGABRT, &sa, &old_sa) == 0);\n  ASSERT ((old_sa.sa_flags & SA_SIGINFO) == 0);\n#if !(defined __GLIBC__ || defined __UCLIBC__)  \n  ASSERT (old_sa.sa_handler == SIG_DFL);\n#endif\n\n  sa.sa_handler = SIG_IGN;\n  ASSERT (sigaction (SIGABRT, &sa, NULL) == 0);\n  ASSERT (raise (SIGABRT) == 0);\n  ASSERT (sigaction (SIGABRT, NULL, &old_sa) == 0);\n  ASSERT (old_sa.sa_handler == SIG_IGN);\n  ASSERT (raise (SIGABRT) == 0);\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}