{
  "module_name": "test-rmdir.h",
  "hash_id": "ecced58c2f6277d65278f48a21a2fe91a23563182b8dd93d8558639329cfc71a",
  "original_prompt": "Ingested from coreutils-9.4/gnulib-tests/test-rmdir.h",
  "human_readable_source": " \n\n \n\nstatic int\ntest_rmdir_func (int (*func) (char const *name), bool print)\n{\n   \n  ASSERT (mkdir (BASE \"dir\", 0700) == 0);\n  ASSERT (close (creat (BASE \"dir/file\", 0600)) == 0);\n\n   \n  errno = 0;\n  ASSERT (func (\"\") == -1);\n  ASSERT (errno == ENOENT);\n  errno = 0;\n  ASSERT (func (BASE \"nosuch\") == -1);\n  ASSERT (errno == ENOENT);\n  errno = 0;\n  ASSERT (func (BASE \"nosuch/\") == -1);\n  ASSERT (errno == ENOENT);\n  errno = 0;\n  ASSERT (func (\".\") == -1);\n  ASSERT (errno == EINVAL || errno == EBUSY);\n   \n  ASSERT (func (\"..\") == -1);\n  ASSERT (func (\"/\") == -1);\n  ASSERT (func (\"///\") == -1);\n  errno = 0;\n  ASSERT (func (BASE \"dir/file/\") == -1);\n  ASSERT (errno == ENOTDIR);\n\n   \n  errno = 0;\n  ASSERT (func (BASE \"dir\") == -1);\n  ASSERT (errno == EEXIST || errno == ENOTEMPTY);\n\n   \n  errno = 0;\n  ASSERT (func (BASE \"dir/file\") == -1);\n  ASSERT (errno == ENOTDIR);\n\n   \n  ASSERT (unlink (BASE \"dir/file\") == 0);\n  errno = 0;\n  ASSERT (func (BASE \"dir/.//\") == -1);\n  ASSERT (errno == EINVAL || errno == EBUSY || errno == EEXIST\n          || errno == ENOTEMPTY);\n  ASSERT (func (BASE \"dir\") == 0);\n\n   \n  if (symlink (BASE \"dir\", BASE \"link\") != 0)\n    {\n      if (print)\n        fputs (\"skipping test: symlinks not supported on this file system\\n\",\n               stderr);\n      return 77;\n    }\n  ASSERT (mkdir (BASE \"dir\", 0700) == 0);\n  errno = 0;\n  if (func (BASE \"link/\") == 0)\n    {\n      struct stat st;\n      errno = 0;\n      ASSERT (stat (BASE \"link\", &st) == -1);\n      ASSERT (errno == ENOENT);\n    }\n  else\n    {\n      ASSERT (errno == ENOTDIR);\n      ASSERT (func (BASE \"dir\") == 0);\n    }\n  ASSERT (unlink (BASE \"link\") == 0);\n\n  return 0;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}