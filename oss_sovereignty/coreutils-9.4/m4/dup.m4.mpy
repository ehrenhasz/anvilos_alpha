{
  "module_name": "dup.m4",
  "hash_id": "de46d8e3bcb6ff83322cba1217ceab17d7a06a7eb427b5eb331dc9207f873a8f",
  "original_prompt": "Ingested from coreutils-9.4/m4/dup.m4",
  "human_readable_source": "# dup.m4 serial 8\ndnl Copyright (C) 2011-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_DUP],\n[\n  AC_REQUIRE([gl_UNISTD_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  m4_ifdef([gl_MSVC_INVAL], [\n    AC_REQUIRE([gl_MSVC_INVAL])\n    if test $HAVE_MSVC_INVALID_PARAMETER_HANDLER = 1; then\n      REPLACE_DUP=1\n    fi\n  ])\n  dnl Replace dup() for supporting the gnulib-defined fchdir() function,\n  dnl to keep fchdir's bookkeeping up-to-date.\n  m4_ifdef([gl_FUNC_FCHDIR], [\n    gl_TEST_FCHDIR\n    if test $HAVE_FCHDIR = 0; then\n      REPLACE_DUP=1\n    fi\n  ])\n  AC_CACHE_CHECK([whether dup works], [gl_cv_func_dup_works],\n    [AC_RUN_IFELSE(\n      [AC_LANG_PROGRAM([[#include <unistd.h>\n                         #include <fcntl.h>\n                         #include <errno.h>\n                       ]GL_MDA_DEFINES],\n         [[/* On OS/2 kLIBC, dup does not work on a directory fd.  */\n           int fd = open (\".\", O_RDONLY);\n           return fd < 0 ? 1 : dup (fd) < 0 ? 2 : 0;\n         ]])\n      ],\n      [gl_cv_func_dup_works=yes],\n      [gl_cv_func_dup_works=no],\n      [case \"$host_os\" in\n                            # Guess no on native Windows.\n         mingw* | windows*) gl_cv_func_dup_works=\"guessing no\" ;;\n         *)                 gl_cv_func_dup_works=\"guessing yes\" ;;\n       esac\n      ])\n    ])\n  case \"$gl_cv_func_dup_works\" in\n    *yes) ;;\n    *)\n      REPLACE_DUP=1\n      ;;\n  esac\n])\n\n# Prerequisites of lib/dup.c.\nAC_DEFUN([gl_PREREQ_DUP], [:])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}