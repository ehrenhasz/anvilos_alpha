{
  "module_name": "intlmacosx.m4",
  "hash_id": "9fe8b8727c2b28810add0b8b624a481b3241db9e96ad74d0ff0a6d1a8e1947bd",
  "original_prompt": "Ingested from coreutils-9.4/m4/intlmacosx.m4",
  "human_readable_source": "# intlmacosx.m4 serial 8 (gettext-0.20.2)\ndnl Copyright (C) 2004-2014, 2016, 2019-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\ndnl\ndnl This file can be used in projects which are not available under\ndnl the GNU General Public License or the GNU Lesser General Public\ndnl License but which still want to provide support for the GNU gettext\ndnl functionality.\ndnl Please note that the actual code of the GNU gettext library is covered\ndnl by the GNU Lesser General Public License, and the rest of the GNU\ndnl gettext package is covered by the GNU General Public License.\ndnl They are *not* in the public domain.\n\ndnl Checks for special options needed on Mac OS X.\ndnl Defines INTL_MACOSX_LIBS.\nAC_DEFUN([gt_INTL_MACOSX],\n[\n  dnl Check for API introduced in Mac OS X 10.4.\n  AC_CACHE_CHECK([for CFPreferencesCopyAppValue],\n    [gt_cv_func_CFPreferencesCopyAppValue],\n    [gt_save_LIBS=\"$LIBS\"\n     LIBS=\"$LIBS -Wl,-framework -Wl,CoreFoundation\"\n     AC_LINK_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <CoreFoundation/CFPreferences.h>]],\n          [[CFPreferencesCopyAppValue(NULL, NULL)]])],\n       [gt_cv_func_CFPreferencesCopyAppValue=yes],\n       [gt_cv_func_CFPreferencesCopyAppValue=no])\n     LIBS=\"$gt_save_LIBS\"])\n  if test $gt_cv_func_CFPreferencesCopyAppValue = yes; then\n    AC_DEFINE([HAVE_CFPREFERENCESCOPYAPPVALUE], [1],\n      [Define to 1 if you have the Mac OS X function CFPreferencesCopyAppValue in the CoreFoundation framework.])\n  fi\n  dnl Don't check for the API introduced in Mac OS X 10.5, CFLocaleCopyCurrent,\n  dnl because in macOS 10.13.4 it has the following behaviour:\n  dnl When two or more languages are specified in the\n  dnl \"System Preferences > Language & Region > Preferred Languages\" panel,\n  dnl it returns en_CC where CC is the territory (even when English is not among\n  dnl the preferred languages!).  What we want instead is what\n  dnl CFLocaleCopyCurrent returned in earlier macOS releases and what\n  dnl CFPreferencesCopyAppValue still returns, namely ll_CC where ll is the\n  dnl first among the preferred languages and CC is the territory.\n  AC_CACHE_CHECK([for CFLocaleCopyPreferredLanguages], [gt_cv_func_CFLocaleCopyPreferredLanguages],\n    [gt_save_LIBS=\"$LIBS\"\n     LIBS=\"$LIBS -Wl,-framework -Wl,CoreFoundation\"\n     AC_LINK_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <CoreFoundation/CFLocale.h>]],\n          [[CFLocaleCopyPreferredLanguages();]])],\n       [gt_cv_func_CFLocaleCopyPreferredLanguages=yes],\n       [gt_cv_func_CFLocaleCopyPreferredLanguages=no])\n     LIBS=\"$gt_save_LIBS\"])\n  if test $gt_cv_func_CFLocaleCopyPreferredLanguages = yes; then\n    AC_DEFINE([HAVE_CFLOCALECOPYPREFERREDLANGUAGES], [1],\n      [Define to 1 if you have the Mac OS X function CFLocaleCopyPreferredLanguages in the CoreFoundation framework.])\n  fi\n  INTL_MACOSX_LIBS=\n  if test $gt_cv_func_CFPreferencesCopyAppValue = yes \\\n     || test $gt_cv_func_CFLocaleCopyPreferredLanguages = yes; then\n    INTL_MACOSX_LIBS=\"-Wl,-framework -Wl,CoreFoundation\"\n  fi\n  AC_SUBST([INTL_MACOSX_LIBS])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}