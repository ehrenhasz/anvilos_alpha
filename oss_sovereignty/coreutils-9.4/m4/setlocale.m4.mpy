{
  "module_name": "setlocale.m4",
  "hash_id": "633db92da944e6007e943ccff3d770962e236909a47e9a0b4265bf9a095fa3ed",
  "original_prompt": "Ingested from coreutils-9.4/m4/setlocale.m4",
  "human_readable_source": "# setlocale.m4 serial 10\ndnl Copyright (C) 2011-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_SETLOCALE],\n[\n  AC_REQUIRE([gl_LOCALE_H_DEFAULTS])\n  AC_REQUIRE([gl_FUNC_SETLOCALE_NULL])\n  AC_REQUIRE([AC_CANONICAL_HOST])\n\n  dnl Test whether we need to improve on the general working of setlocale.\n  NEED_SETLOCALE_IMPROVED=0\n  case \"$host_os\" in\n    dnl On native Windows systems, setlocale(category,NULL) does not look at\n    dnl the environment variables LC_ALL, category, and LANG.\n    mingw* | windows*) NEED_SETLOCALE_IMPROVED=1 ;;\n    dnl On Cygwin 1.5.x, setlocale always succeeds but setlocale(LC_CTYPE,NULL)\n    dnl is then still \"C\".\n    cygwin*)\n      case `uname -r` in\n        1.5.*) NEED_SETLOCALE_IMPROVED=1 ;;\n      esac\n      ;;\n    dnl On Android 4.3, setlocale(category,\"C\") always fails.\n    *)\n      AC_CACHE_CHECK([whether setlocale supports the C locale],\n        [gl_cv_func_setlocale_works],\n        [AC_RUN_IFELSE(\n           [AC_LANG_SOURCE([[\n#include <locale.h>\nint main ()\n{\n  return setlocale (LC_ALL, \"C\") == NULL;\n}]])],\n           [gl_cv_func_setlocale_works=yes],\n           [gl_cv_func_setlocale_works=no],\n           [case \"$host_os\" in\n                               # Guess no on Android.\n              linux*-android*) gl_cv_func_setlocale_works=\"guessing no\";;\n                               # Guess yes otherwise.\n              *)               gl_cv_func_setlocale_works=\"guessing yes\";;\n            esac\n           ])\n        ])\n      case \"$gl_cv_func_setlocale_works\" in\n        *yes) ;;\n        *) NEED_SETLOCALE_IMPROVED=1 ;;\n      esac\n      ;;\n  esac\n  AC_DEFINE_UNQUOTED([NEED_SETLOCALE_IMPROVED], [$NEED_SETLOCALE_IMPROVED],\n    [Define to 1 to enable general improvements of setlocale.])\n\n  dnl Test whether we need a multithread-safe setlocale(category,NULL).\n  NEED_SETLOCALE_MTSAFE=0\n  if test $SETLOCALE_NULL_ALL_MTSAFE = 0 || test $SETLOCALE_NULL_ONE_MTSAFE = 0; then\n    NEED_SETLOCALE_MTSAFE=1\n  fi\n  AC_DEFINE_UNQUOTED([NEED_SETLOCALE_MTSAFE], [$NEED_SETLOCALE_MTSAFE],\n    [Define to 1 to enable a multithread-safety fix of setlocale.])\n\n  if test $NEED_SETLOCALE_IMPROVED = 1 || test $NEED_SETLOCALE_MTSAFE = 1; then\n    REPLACE_SETLOCALE=1\n  fi\n\n  if test $NEED_SETLOCALE_MTSAFE = 1; then\n    SETLOCALE_LIB=\"$SETLOCALE_NULL_LIB\"\n  else\n    SETLOCALE_LIB=\n  fi\n  dnl SETLOCALE_LIB is expected to be '-pthread' or '-lpthread' on AIX with gcc\n  dnl or xlc, and empty otherwise.\n  AC_SUBST([SETLOCALE_LIB])\n  dnl For backward compatibility.\n  LIB_SETLOCALE=\"$SETLOCALE_LIB\"\n  AC_SUBST([LIB_SETLOCALE])\n])\n\n# Prerequisites of lib/setlocale.c.\nAC_DEFUN([gl_PREREQ_SETLOCALE],\n[\n  dnl No need to check for CFLocaleCopyPreferredLanguages and\n  dnl CFPreferencesCopyAppValue because lib/setlocale.c is not used on Mac OS X.\n  dnl (The Mac OS X specific code is only used in libintl.)\n  :\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}