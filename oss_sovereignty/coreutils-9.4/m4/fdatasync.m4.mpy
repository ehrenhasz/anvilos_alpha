{
  "module_name": "fdatasync.m4",
  "hash_id": "c9e434fc9564e19d690c10c11319ab70ad0a3a1b18179998be09aae87b3250b7",
  "original_prompt": "Ingested from coreutils-9.4/m4/fdatasync.m4",
  "human_readable_source": "# fdatasync.m4 serial 9\ndnl Copyright (C) 2008-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_FDATASYNC],\n[\n  AC_REQUIRE([gl_UNISTD_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST])\n\n  dnl Using AC_CHECK_FUNCS_ONCE would break our subsequent AC_SEARCH_LIBS\n  AC_CHECK_DECLS_ONCE([fdatasync])\n  FDATASYNC_LIB=\n  AC_SUBST([FDATASYNC_LIB])\n\n  if test $ac_cv_have_decl_fdatasync = no; then\n    HAVE_DECL_FDATASYNC=0\n    dnl Mac OS X 10.7 has fdatasync but does not declare it.\n    dnl Likewise Android with API level < 9.\n    gl_CHECK_FUNCS_ANDROID([fdatasync], [[#include <unistd.h>]])\n    if test $ac_cv_func_fdatasync = no; then\n      HAVE_FDATASYNC=0\n      case \"$gl_cv_onwards_func_fdatasync\" in\n        future*) REPLACE_FDATASYNC=1 ;;\n      esac\n    fi\n  else\n    case \"$host_os\" in\n      solaris*)\n        dnl Solaris <= 2.6 has fdatasync() in libposix4.\n        dnl Solaris 7..9 has it in librt.\n        dnl Solaris 10 sometimes has it in librt <https://bugs.gnu.org/21059>.\n        gl_saved_libs=$LIBS\n        AC_SEARCH_LIBS([fdatasync], [rt posix4],\n          [test \"$ac_cv_search_fdatasync\" = \"none required\" ||\n           FDATASYNC_LIB=$ac_cv_search_fdatasync])\n        LIBS=$gl_saved_libs\n        ;;\n      *)\n        dnl Android 4.3 does not have fdatasync but declares it, and future\n        dnl Android versions have it.\n        gl_CHECK_FUNCS_ANDROID([fdatasync], [[#include <unistd.h>]])\n        if test $ac_cv_func_fdatasync = no; then\n          HAVE_FDATASYNC=0\n          case \"$gl_cv_onwards_func_fdatasync\" in\n            future*) REPLACE_FDATASYNC=1 ;;\n          esac\n        fi\n        ;;\n    esac\n  fi\n\n  dnl For backward compatibility.\n  LIB_FDATASYNC=\"$FDATASYNC_LIB\"\n  AC_SUBST([LIB_FDATASYNC])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}