{
  "module_name": "symlinkat.m4",
  "hash_id": "0f49a17425056da91764d121a04cb33e9c82a1ef74708c21f6bf157c3d41932f",
  "original_prompt": "Ingested from coreutils-9.4/m4/symlinkat.m4",
  "human_readable_source": "# serial 13\n# See if we need to provide symlinkat replacement.\n\ndnl Copyright (C) 2009-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\n# Written by Eric Blake.\n\nAC_DEFUN([gl_FUNC_SYMLINKAT],\n[\n  AC_REQUIRE([gl_UNISTD_H_DEFAULTS])\n  AC_REQUIRE([gl_FUNC_OPENAT])\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  gl_CHECK_FUNCS_ANDROID([symlinkat], [[#include <unistd.h>]])\n  if test $ac_cv_func_symlinkat = no; then\n    HAVE_SYMLINKAT=0\n    case \"$gl_cv_onwards_func_symlinkat\" in\n      future*) REPLACE_SYMLINKAT=1 ;;\n    esac\n  else\n    AC_CACHE_CHECK([whether symlinkat handles trailing slash correctly],\n      [gl_cv_func_symlinkat_works],\n      [AC_RUN_IFELSE(\n         [AC_LANG_PROGRAM(\n           [[#include <fcntl.h>\n             #include <unistd.h>\n           ]],\n           [[int result = 0;\n             if (!symlinkat (\"a\", AT_FDCWD, \"conftest.link/\"))\n               result |= 1;\n             if (symlinkat (\"conftest.f\", AT_FDCWD, \"conftest.lnk2\"))\n               result |= 2;\n             else if (!symlinkat (\"a\", AT_FDCWD, \"conftest.lnk2/\"))\n               result |= 4;\n             return result;\n           ]])],\n         [gl_cv_func_symlinkat_works=yes],\n         [gl_cv_func_symlinkat_works=no],\n         [case \"$host_os\" in\n                             # Guess yes on Linux systems.\n            linux-* | linux) gl_cv_func_symlinkat_works=\"guessing yes\" ;;\n                             # Guess yes on systems that emulate the Linux system calls.\n            midipix*)        gl_cv_func_symlinkat_works=\"guessing yes\" ;;\n                             # Guess yes on glibc systems.\n            *-gnu* | gnu*)   gl_cv_func_symlinkat_works=\"guessing yes\" ;;\n                             # If we don't know, obey --enable-cross-guesses.\n            *)               gl_cv_func_symlinkat_works=\"$gl_cross_guess_normal\" ;;\n          esac\n         ])\n      rm -f conftest.f conftest.link conftest.lnk2])\n    case \"$gl_cv_func_symlinkat_works\" in\n      *yes) ;;\n      *)\n        REPLACE_SYMLINKAT=1\n        ;;\n    esac\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}