{
  "module_name": "symlink.m4",
  "hash_id": "22e77c941b961e7801922c638d5acd529346f5df25f71cc4d86904f7268b4bfc",
  "original_prompt": "Ingested from coreutils-9.4/m4/symlink.m4",
  "human_readable_source": "# serial 10\n# See if we need to provide symlink replacement.\n\ndnl Copyright (C) 2009-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\n# Written by Eric Blake.\n\nAC_DEFUN([gl_FUNC_SYMLINK],\n[\n  AC_REQUIRE([gl_UNISTD_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_CHECK_FUNCS_ONCE([symlink])\n  dnl The best we can do on mingw is provide a dummy that always fails, so\n  dnl that compilation can proceed with fewer ifdefs.  On FreeBSD 7.2, AIX 7.1,\n  dnl and Solaris 9, we want to fix a bug with trailing slash handling.\n  if test $ac_cv_func_symlink = no; then\n    HAVE_SYMLINK=0\n  else\n    AC_CACHE_CHECK([whether symlink handles trailing slash correctly],\n      [gl_cv_func_symlink_works],\n      [AC_RUN_IFELSE(\n         [AC_LANG_PROGRAM(\n           [[#include <unistd.h>\n           ]],\n           [[int result = 0;\n             if (!symlink (\"a\", \"conftest.link/\"))\n               result |= 1;\n             if (symlink (\"conftest.f\", \"conftest.lnk2\"))\n               result |= 2;\n             else if (!symlink (\"a\", \"conftest.lnk2/\"))\n               result |= 4;\n             return result;\n           ]])],\n         [gl_cv_func_symlink_works=yes], [gl_cv_func_symlink_works=no],\n         [case \"$host_os\" in\n                             # Guess yes on Linux systems.\n            linux-* | linux) gl_cv_func_symlink_works=\"guessing yes\" ;;\n                             # Guess yes on systems that emulate the Linux system calls.\n            midipix*)        gl_cv_func_symlink_works=\"guessing yes\" ;;\n                             # Guess yes on glibc systems.\n            *-gnu* | gnu*)   gl_cv_func_symlink_works=\"guessing yes\" ;;\n                             # If we don't know, obey --enable-cross-guesses.\n            *)               gl_cv_func_symlink_works=\"$gl_cross_guess_normal\" ;;\n          esac\n         ])\n      rm -f conftest.f conftest.link conftest.lnk2])\n    case \"$gl_cv_func_symlink_works\" in\n      *yes) ;;\n      *)\n        REPLACE_SYMLINK=1\n        ;;\n    esac\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}