{
  "module_name": "utime.m4",
  "hash_id": "46a615c00f2ba89a114382055efe79b0fd2d6c7916c223bb5eb502bc5e825144",
  "original_prompt": "Ingested from coreutils-9.4/m4/utime.m4",
  "human_readable_source": "# utime.m4 serial 5\ndnl Copyright (C) 2017-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_UTIME],\n[\n  AC_REQUIRE([gl_UTIME_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_CHECK_FUNCS_ONCE([lstat])\n  case \"$host_os\" in\n    mingw* | windows*)\n      dnl On this platform, the original utime() or _utime() produces\n      dnl timestamps that are affected by the time zone.\n      dnl Use the function name 'rpl_utime' always, in order to avoid a\n      dnl possible conflict with the function name 'utime' from oldnames.lib\n      dnl (MSVC) or liboldnames.a (mingw).\n      REPLACE_UTIME=1\n      ;;\n    *)\n      AC_CHECK_FUNCS([utime])\n      if test $ac_cv_func_utime = no; then\n        HAVE_UTIME=0\n      else\n        dnl On macOS 10.13, utime(\"link-to-file/\", NULL) mistakenly succeeds.\n        AC_CACHE_CHECK([whether utime handles trailing slashes on files],\n          [gl_cv_func_utime_file_slash],\n          [touch conftest.tmp\n           # Assume that if we have lstat, we can also check symlinks.\n           if test $ac_cv_func_lstat = yes; then\n             ln -s conftest.tmp conftest.lnk\n           fi\n           AC_RUN_IFELSE(\n             [AC_LANG_PROGRAM(\n               [[#include <stddef.h>\n                 #include <utime.h>\n               ]],\n               [[int result = 0;\n                 if (!utime (\"conftest.tmp/\", NULL))\n                   result |= 1;\n                 #if HAVE_LSTAT\n                 if (!utime (\"conftest.lnk/\", NULL))\n                   result |= 2;\n                 #endif\n                 return result;\n               ]])],\n             [gl_cv_func_utime_file_slash=yes],\n             [gl_cv_func_utime_file_slash=no],\n             [case \"$host_os\" in\n                                 # Guess yes on Linux systems.\n                linux-* | linux) gl_cv_func_utime_file_slash=\"guessing yes\" ;;\n                                 # Guess yes on glibc systems.\n                *-gnu* | gnu*)   gl_cv_func_utime_file_slash=\"guessing yes\" ;;\n                                 # Guess no on macOS.\n                darwin*)         gl_cv_func_utime_file_slash=\"guessing no\" ;;\n                                 # If we don't know, obey --enable-cross-guesses.\n                *)               gl_cv_func_utime_file_slash=\"$gl_cross_guess_normal\" ;;\n              esac\n             ])\n           rm -f conftest.tmp conftest.lnk\n          ])\n        case $gl_cv_func_stat_file_slash in\n          *no)\n            REPLACE_UTIME=1\n            AC_DEFINE([REPLACE_FUNC_UTIME_FILE], [1],\n              [Define to 1 if utime needs help when passed a file name with a trailing slash])\n            ;;\n        esac\n      fi\n      ;;\n  esac\n])\n\n# Prerequisites of lib/utime.c.\nAC_DEFUN([gl_PREREQ_UTIME], [:])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}