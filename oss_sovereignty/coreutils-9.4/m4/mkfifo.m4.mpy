{
  "module_name": "mkfifo.m4",
  "hash_id": "7d99f282a9bfe46cc9892a367972a6a8d927bacf17e69959ebfedd4f09d010bb",
  "original_prompt": "Ingested from coreutils-9.4/m4/mkfifo.m4",
  "human_readable_source": "# serial 9\n# See if we need to provide mkfifo replacement.\n\ndnl Copyright (C) 2009-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\n# Written by Eric Blake.\n\nAC_DEFUN([gl_FUNC_MKFIFO],\n[\n  AC_REQUIRE([gl_SYS_STAT_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n\n  dnl We can't use AC_CHECK_FUNC here, because mkfifo() is defined as a\n  dnl static inline function when compiling for Android 4.4 or older.\n  AC_CACHE_CHECK([for mkfifo], [gl_cv_func_mkfifo],\n    [AC_LINK_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <sys/stat.h>]],\n          [[return mkfifo(\"/\",0);]])\n       ],\n       [gl_cv_func_mkfifo=yes],\n       [gl_cv_func_mkfifo=no])\n    ])\n  if test $gl_cv_func_mkfifo = no; then\n    HAVE_MKFIFO=0\n  else\n    AC_DEFINE([HAVE_MKFIFO], [1],\n      [Define to 1 if you have a 'mkfifo' function.])\n    dnl Check for Solaris 9 and FreeBSD bug with trailing slash.\n    AC_CHECK_FUNCS_ONCE([lstat])\n    AC_CACHE_CHECK([whether mkfifo rejects trailing slashes],\n      [gl_cv_func_mkfifo_works],\n      [# Assume that if we have lstat, we can also check symlinks.\n       if test $ac_cv_func_lstat = yes; then\n         ln -s conftest.tmp conftest.lnk\n       fi\n       AC_RUN_IFELSE(\n         [AC_LANG_PROGRAM(\n           [[#include <sys/stat.h>\n           ]],\n           [[int result = 0;\n             if (!mkfifo (\"conftest.tmp/\", 0600))\n               result |= 1;\n#if HAVE_LSTAT\n             if (!mkfifo (\"conftest.lnk/\", 0600))\n               result |= 2;\n#endif\n             return result;\n           ]])],\n         [gl_cv_func_mkfifo_works=yes], [gl_cv_func_mkfifo_works=no],\n         [case \"$host_os\" in\n                             # Guess yes on Linux systems.\n            linux-* | linux) gl_cv_func_mkfifo_works=\"guessing yes\" ;;\n                             # Guess yes on glibc systems.\n            *-gnu* | gnu*)   gl_cv_func_mkfifo_works=\"guessing yes\" ;;\n                             # If we don't know, obey --enable-cross-guesses.\n            *)               gl_cv_func_mkfifo_works=\"$gl_cross_guess_normal\" ;;\n          esac\n         ])\n       rm -f conftest.tmp conftest.lnk])\n    case \"$gl_cv_func_mkfifo_works\" in\n      *yes) ;;\n      *)\n        AC_DEFINE([MKFIFO_TRAILING_SLASH_BUG], [1], [Define to 1 if mkfifo\n          does not reject trailing slash])\n        REPLACE_MKFIFO=1\n        ;;\n    esac\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}