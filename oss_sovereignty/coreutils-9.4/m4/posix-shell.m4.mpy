{
  "module_name": "posix-shell.m4",
  "hash_id": "cd72c57674f721bcd82d1493e38712323e78d36a5af5445addbd6618307a955c",
  "original_prompt": "Ingested from coreutils-9.4/m4/posix-shell.m4",
  "human_readable_source": "# Find a POSIX-conforming shell.\n\n# Copyright (C) 2007-2023 Free Software Foundation, Inc.\n\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\n# Written by Paul Eggert.\n\n# If a POSIX-conforming shell can be found, set POSIX_SHELL and\n# PREFERABLY_POSIX_SHELL to it.  If not, set POSIX_SHELL to the\n# empty string and PREFERABLY_POSIX_SHELL to '/bin/sh'.\n\nAC_DEFUN([gl_POSIX_SHELL],\n[\n  AC_CACHE_CHECK([for a shell that conforms to POSIX], [gl_cv_posix_shell],\n    [gl_test_posix_shell_script='\n       func_return () {\n         (exit [$]1)\n       }\n       func_success () {\n         func_return 0\n       }\n       func_failure () {\n         func_return 1\n       }\n       func_ret_success () {\n         return 0\n       }\n       func_ret_failure () {\n         return 1\n       }\n       subshell_umask_sanity () {\n         (umask 22; (umask 0); test $(umask) -eq 22)\n       }\n       test \"[$](echo foo)\" = foo &&\n       func_success &&\n       ! func_failure &&\n       func_ret_success &&\n       ! func_ret_failure &&\n       (set x && func_ret_success y && test x = \"[$]1\") &&\n       subshell_umask_sanity\n     '\n     for gl_cv_posix_shell in \\\n         \"$CONFIG_SHELL\" \"$SHELL\" /bin/sh /bin/bash /bin/ksh /bin/sh5 no; do\n       case $gl_cv_posix_shell in\n         /*)\n           \"$gl_cv_posix_shell\" -c \"$gl_test_posix_shell_script\" 2>/dev/null \\\n             && break;;\n       esac\n     done])\n\n  if test \"$gl_cv_posix_shell\" != no; then\n    POSIX_SHELL=$gl_cv_posix_shell\n    PREFERABLY_POSIX_SHELL=$POSIX_SHELL\n  else\n    POSIX_SHELL=\n    PREFERABLY_POSIX_SHELL=/bin/sh\n  fi\n  AC_SUBST([POSIX_SHELL])\n  AC_SUBST([PREFERABLY_POSIX_SHELL])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}