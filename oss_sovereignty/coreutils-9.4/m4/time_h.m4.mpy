{
  "module_name": "time_h.m4",
  "hash_id": "7f5cdf8fedb3f25803724e820531b872f6593ad945a997be86d2f01c21abbe06",
  "original_prompt": "Ingested from coreutils-9.4/m4/time_h.m4",
  "human_readable_source": "# Configure a more-standard replacement for <time.h>.\n\n# Copyright (C) 2000-2001, 2003-2007, 2009-2023 Free Software Foundation, Inc.\n\n# serial 24\n\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\n# Written by Paul Eggert and Jim Meyering.\n\nAC_DEFUN_ONCE([gl_TIME_H],\n[\n  dnl Ensure to expand the default settings once only, before all statements\n  dnl that occur in other macros.\n  AC_REQUIRE([gl_TIME_H_DEFAULTS])\n\n  gl_NEXT_HEADERS([time.h])\n  AC_REQUIRE([gl_CHECK_TYPE_STRUCT_TIMESPEC])\n\n  dnl Check for declarations of anything we want to poison if the\n  dnl corresponding gnulib module is not in use.\n  gl_WARN_ON_USE_PREPARE([[\n#include <time.h>\n    ]], [\n      asctime asctime_r ctime ctime_r gmtime_r localtime localtime_r mktime\n      nanosleep strftime strptime time timegm timespec_get timespec_getres tzset\n    ])\n\n  AC_REQUIRE([AC_C_RESTRICT])\n\n  AC_CACHE_CHECK([for TIME_UTC in <time.h>],\n    [gl_cv_time_h_has_TIME_UTC],\n    [AC_COMPILE_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <time.h>\n          ]],\n          [[static int x = TIME_UTC; x++;]])],\n       [gl_cv_time_h_has_TIME_UTC=yes],\n       [gl_cv_time_h_has_TIME_UTC=no])])\n  if test $gl_cv_time_h_has_TIME_UTC = yes; then\n    TIME_H_DEFINES_TIME_UTC=1\n  else\n    TIME_H_DEFINES_TIME_UTC=0\n  fi\n  AC_SUBST([TIME_H_DEFINES_TIME_UTC])\n])\n\ndnl Check whether 'struct timespec' is declared\ndnl in time.h, sys/time.h, pthread.h, or unistd.h.\n\nAC_DEFUN([gl_CHECK_TYPE_STRUCT_TIMESPEC],\n[\n  AC_CHECK_HEADERS_ONCE([sys/time.h])\n  AC_CACHE_CHECK([for struct timespec in <time.h>],\n    [gl_cv_sys_struct_timespec_in_time_h],\n    [AC_COMPILE_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <time.h>\n          ]],\n          [[static struct timespec x; x.tv_sec = x.tv_nsec;]])],\n       [gl_cv_sys_struct_timespec_in_time_h=yes],\n       [gl_cv_sys_struct_timespec_in_time_h=no])])\n\n  TIME_H_DEFINES_STRUCT_TIMESPEC=0\n  SYS_TIME_H_DEFINES_STRUCT_TIMESPEC=0\n  PTHREAD_H_DEFINES_STRUCT_TIMESPEC=0\n  UNISTD_H_DEFINES_STRUCT_TIMESPEC=0\n  if test $gl_cv_sys_struct_timespec_in_time_h = yes; then\n    TIME_H_DEFINES_STRUCT_TIMESPEC=1\n  else\n    AC_CACHE_CHECK([for struct timespec in <sys/time.h>],\n      [gl_cv_sys_struct_timespec_in_sys_time_h],\n      [AC_COMPILE_IFELSE(\n         [AC_LANG_PROGRAM(\n            [[#include <sys/time.h>\n            ]],\n            [[static struct timespec x; x.tv_sec = x.tv_nsec;]])],\n         [gl_cv_sys_struct_timespec_in_sys_time_h=yes],\n         [gl_cv_sys_struct_timespec_in_sys_time_h=no])])\n    if test $gl_cv_sys_struct_timespec_in_sys_time_h = yes; then\n      SYS_TIME_H_DEFINES_STRUCT_TIMESPEC=1\n    else\n      AC_CACHE_CHECK([for struct timespec in <pthread.h>],\n        [gl_cv_sys_struct_timespec_in_pthread_h],\n        [AC_COMPILE_IFELSE(\n           [AC_LANG_PROGRAM(\n              [[#include <pthread.h>\n              ]],\n              [[static struct timespec x; x.tv_sec = x.tv_nsec;]])],\n           [gl_cv_sys_struct_timespec_in_pthread_h=yes],\n           [gl_cv_sys_struct_timespec_in_pthread_h=no])])\n      if test $gl_cv_sys_struct_timespec_in_pthread_h = yes; then\n        PTHREAD_H_DEFINES_STRUCT_TIMESPEC=1\n      else\n        AC_CACHE_CHECK([for struct timespec in <unistd.h>],\n          [gl_cv_sys_struct_timespec_in_unistd_h],\n          [AC_COMPILE_IFELSE(\n             [AC_LANG_PROGRAM(\n                [[#include <unistd.h>\n                ]],\n                [[static struct timespec x; x.tv_sec = x.tv_nsec;]])],\n             [gl_cv_sys_struct_timespec_in_unistd_h=yes],\n             [gl_cv_sys_struct_timespec_in_unistd_h=no])])\n        if test $gl_cv_sys_struct_timespec_in_unistd_h = yes; then\n          UNISTD_H_DEFINES_STRUCT_TIMESPEC=1\n        fi\n      fi\n    fi\n  fi\n  AC_SUBST([TIME_H_DEFINES_STRUCT_TIMESPEC])\n  AC_SUBST([SYS_TIME_H_DEFINES_STRUCT_TIMESPEC])\n  AC_SUBST([PTHREAD_H_DEFINES_STRUCT_TIMESPEC])\n  AC_SUBST([UNISTD_H_DEFINES_STRUCT_TIMESPEC])\n])\n\n# gl_TIME_MODULE_INDICATOR([modulename])\n# sets the shell variable that indicates the presence of the given module\n# to a C preprocessor expression that will evaluate to 1.\n# This macro invocation must not occur in macros that are AC_REQUIREd.\nAC_DEFUN([gl_TIME_MODULE_INDICATOR],\n[\n  dnl Ensure to expand the default settings once only.\n  gl_TIME_H_REQUIRE_DEFAULTS\n  gl_MODULE_INDICATOR_SET_VARIABLE([$1])\n  dnl Define it also as a C macro, for the benefit of the unit tests.\n  gl_MODULE_INDICATOR_FOR_TESTS([$1])\n])\n\n# Initializes the default values for AC_SUBSTed shell variables.\n# This macro must not be AC_REQUIREd.  It must only be invoked, and only\n# outside of macros or in macros that are not AC_REQUIREd.\nAC_DEFUN([gl_TIME_H_REQUIRE_DEFAULTS],\n[\n  m4_defun(GL_MODULE_INDICATOR_PREFIX[_TIME_H_MODULE_INDICATOR_DEFAULTS], [\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_CTIME])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_MKTIME])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_LOCALTIME])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_NANOSLEEP])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_STRFTIME])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_STRPTIME])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_TIME])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_TIMEGM])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_TIMESPEC_GET])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_TIMESPEC_GETRES])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_TIME_R])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_TIME_RZ])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_TZSET])\n    dnl Support Microsoft deprecated alias function names by default.\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_MDA_TZSET], [1])\n  ])\n  m4_require(GL_MODULE_INDICATOR_PREFIX[_TIME_H_MODULE_INDICATOR_DEFAULTS])\n  AC_REQUIRE([gl_TIME_H_DEFAULTS])\n])\n\nAC_DEFUN([gl_TIME_H_DEFAULTS],\n[\n  dnl Assume proper GNU behavior unless another module says otherwise.\n  HAVE_DECL_LOCALTIME_R=1;               AC_SUBST([HAVE_DECL_LOCALTIME_R])\n  HAVE_NANOSLEEP=1;                      AC_SUBST([HAVE_NANOSLEEP])\n  HAVE_STRPTIME=1;                       AC_SUBST([HAVE_STRPTIME])\n  HAVE_TIMEGM=1;                         AC_SUBST([HAVE_TIMEGM])\n  HAVE_TIMESPEC_GET=1;                   AC_SUBST([HAVE_TIMESPEC_GET])\n  HAVE_TIMESPEC_GETRES=1;                AC_SUBST([HAVE_TIMESPEC_GETRES])\n  dnl Even GNU libc does not have timezone_t yet.\n  HAVE_TIMEZONE_T=0;                     AC_SUBST([HAVE_TIMEZONE_T])\n  REPLACE_CTIME=0;                       AC_SUBST([REPLACE_CTIME])\n  REPLACE_GMTIME=0;                      AC_SUBST([REPLACE_GMTIME])\n  REPLACE_LOCALTIME=0;                   AC_SUBST([REPLACE_LOCALTIME])\n  REPLACE_LOCALTIME_R=0;                 AC_SUBST([REPLACE_LOCALTIME_R])\n  REPLACE_MKTIME=0;                      AC_SUBST([REPLACE_MKTIME])\n  REPLACE_NANOSLEEP=0;                   AC_SUBST([REPLACE_NANOSLEEP])\n  REPLACE_STRFTIME=0;                    AC_SUBST([REPLACE_STRFTIME])\n  REPLACE_TIME=0;                        AC_SUBST([REPLACE_TIME])\n  REPLACE_TIMEGM=0;                      AC_SUBST([REPLACE_TIMEGM])\n  REPLACE_TIMESPEC_GET=0;                AC_SUBST([REPLACE_TIMESPEC_GET])\n  REPLACE_TZSET=0;                       AC_SUBST([REPLACE_TZSET])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}