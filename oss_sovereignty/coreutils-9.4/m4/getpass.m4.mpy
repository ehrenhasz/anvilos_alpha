{
  "module_name": "getpass.m4",
  "hash_id": "606fa400e257b10d8b1afaa272339b4a394d5c09a62f0ca8d3241d277f098997",
  "original_prompt": "Ingested from coreutils-9.4/m4/getpass.m4",
  "human_readable_source": "# getpass.m4 serial 20\ndnl Copyright (C) 2002-2003, 2005-2006, 2009-2023 Free Software Foundation,\ndnl Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\n# Provide a getpass() function if the system doesn't have it.\nAC_DEFUN_ONCE([gl_FUNC_GETPASS],\n[\n  AC_REQUIRE([gl_UNISTD_H_DEFAULTS])\n\n  dnl Persuade Solaris <unistd.h> and <stdlib.h> to declare getpass().\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n\n  dnl Persuade Android <unistd.h> to not define getpass() as an inline function.\n  AC_DEFINE([NO_INLINE_GETPASS], [1], [Define to 1 on Android.])\n\n  AC_CHECK_FUNCS_ONCE([getpass])\n  if test $ac_cv_func_getpass = no; then\n    HAVE_GETPASS=0\n  fi\n])\n\n# Provide the GNU getpass() implementation. It supports passwords of\n# arbitrary length (not just 8 bytes as on HP-UX).\nAC_DEFUN([gl_FUNC_GETPASS_GNU],\n[\n  AC_REQUIRE([gl_UNISTD_H_DEFAULTS])\n  AC_REQUIRE([gl_FUNC_GETPASS])\n\n  if test $ac_cv_func_getpass = yes; then\n    AC_CACHE_CHECK([for getpass without length limitations],\n      [gl_cv_func_getpass_good],\n      [AC_EGREP_CPP([Lucky GNU user],\n         [\n#include <features.h>\n#ifdef __GNU_LIBRARY__\n #if (__GLIBC__ >= 2) && !defined __UCLIBC__\n  Lucky GNU user\n #endif\n#endif\n         ],\n         [gl_cv_func_getpass_good=yes],\n         [gl_cv_func_getpass_good=no])\n      ])\n    if test $gl_cv_func_getpass_good != yes; then\n      REPLACE_GETPASS_FOR_GETPASS_GNU=1\n    fi\n  fi\n])\n\n# Prerequisites of lib/getpass.c.\nAC_DEFUN([gl_PREREQ_GETPASS], [\n  AC_CHECK_HEADERS_ONCE([stdio_ext.h termios.h])\n  gl_CHECK_FUNCS_ANDROID([__fsetlocking], [[#include <stdio_ext.h>]])\n  AC_CHECK_DECLS([__fsetlocking],,,\n    [[#include <stdio.h>\n      #if HAVE_STDIO_EXT_H\n       #include <stdio_ext.h>\n      #endif]])\n  AC_CHECK_DECLS_ONCE([fflush_unlocked])\n  AC_CHECK_DECLS_ONCE([flockfile])\n  AC_CHECK_DECLS_ONCE([fputs_unlocked])\n  AC_CHECK_DECLS_ONCE([funlockfile])\n  AC_CHECK_DECLS_ONCE([putc_unlocked])\n  gl_HAVE_TCGETATTR\n\n  dnl We can't use AC_CHECK_FUNC here, because tcsetattr() is defined as a\n  dnl static inline function when compiling for Android 4.4 or older.\n  AC_CACHE_CHECK([for tcsetattr], [gl_cv_func_tcsetattr],\n    [AC_LINK_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <termios.h>\n            struct termios x;\n          ]],\n          [[return tcsetattr(0,0,&x);]])\n       ],\n       [gl_cv_func_tcsetattr=yes],\n       [gl_cv_func_tcsetattr=no])\n    ])\n  if test $gl_cv_func_tcsetattr = yes; then\n    HAVE_TCSETATTR=1\n  else\n    HAVE_TCSETATTR=0\n  fi\n  AC_DEFINE_UNQUOTED([HAVE_TCSETATTR], [$HAVE_TCSETATTR],\n    [Define to 1 if the system has the 'tcsetattr' function.])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}