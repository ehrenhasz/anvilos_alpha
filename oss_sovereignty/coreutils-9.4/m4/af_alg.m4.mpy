{
  "module_name": "af_alg.m4",
  "hash_id": "440fcb1e16cadebbd3cbd63152c66b1cfff7c0011579f5f367bd8f769a060e37",
  "original_prompt": "Ingested from coreutils-9.4/m4/af_alg.m4",
  "human_readable_source": "# af_alg.m4 serial 6\ndnl Copyright 2018-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl From Matteo Croce.\n\nAC_DEFUN_ONCE([gl_AF_ALG],\n[\n  AC_REQUIRE([gl_SYS_SOCKET_H])\n  AC_REQUIRE([AC_C_INLINE])\n\n  dnl Check whether linux/if_alg.h has needed features.\n  AC_CACHE_CHECK([whether linux/if_alg.h has struct sockaddr_alg.],\n    [gl_cv_header_linux_if_alg_salg],\n    [AC_COMPILE_IFELSE(\n       [AC_LANG_PROGRAM([[#include <sys/socket.h>\n                          #include <linux/if_alg.h>\n                          struct sockaddr_alg salg = {\n                            .salg_family = AF_ALG,\n                            .salg_type = \"hash\",\n                            .salg_name = \"sha1\",\n                          };]])],\n       [gl_cv_header_linux_if_alg_salg=yes],\n       [gl_cv_header_linux_if_alg_salg=no])])\n  if test \"$gl_cv_header_linux_if_alg_salg\" = yes; then\n    AC_DEFINE([HAVE_LINUX_IF_ALG_H], [1],\n      [Define to 1 if you have 'struct sockaddr_alg' defined.])\n  fi\n\n  dnl The default is to not use AF_ALG if available,\n  dnl as it's system dependent as to whether the kernel\n  dnl routines are faster than libcrypto for example.\n  use_af_alg=no\n  AC_ARG_WITH([linux-crypto],\n    [AS_HELP_STRING([[--with-linux-crypto]],\n       [use Linux kernel cryptographic API (if available) for the hash functions\n        MD5, SHA-1, SHA-224, SHA-256, SHA-384, SHA-512 on files])],\n    [use_af_alg=$withval],\n    [use_af_alg=no])\n  dnl We cannot use it if it is not available.\n  if test \"$gl_cv_header_linux_if_alg_salg\" != yes; then\n    if test \"$use_af_alg\" != no; then\n      AC_MSG_WARN([Linux kernel cryptographic API not found])\n    fi\n    use_af_alg=no\n  fi\n\n  if test \"$use_af_alg\" != no; then\n    USE_AF_ALG=1\n  else\n    USE_AF_ALG=0\n  fi\n  AC_DEFINE_UNQUOTED([USE_LINUX_CRYPTO_API], [$USE_AF_ALG],\n    [Define to 1 if you want to use the Linux kernel cryptographic API.])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}