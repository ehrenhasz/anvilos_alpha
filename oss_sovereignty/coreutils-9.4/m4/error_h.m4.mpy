{
  "module_name": "error_h.m4",
  "hash_id": "c74ff6c2aa55b5715da44e873a73aafd549e070550817e9fae51aea9ae76a662",
  "original_prompt": "Ingested from coreutils-9.4/m4/error_h.m4",
  "human_readable_source": "# error_h.m4 serial 4\ndnl Copyright (C) 1996-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl From Bruno Haible.\ndnl Provide a working \"error.h\".\n\nAC_DEFUN_ONCE([gl_ERROR_H],\n[\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n\n  gl_CHECK_NEXT_HEADERS([error.h])\n  if test $ac_cv_header_error_h = yes; then\n    HAVE_ERROR_H=1\n  else\n    HAVE_ERROR_H=0\n  fi\n  AC_SUBST([HAVE_ERROR_H])\n\n  REPLACE_ERROR=0\n\n  gl_CHECK_FUNCS_ANDROID([error], [[#include <error.h>]])\n  if test $ac_cv_func_error = yes; then\n    HAVE_ERROR=1\n  else\n    HAVE_ERROR=0\n    case \"$gl_cv_onwards_func_error\" in\n      future*) REPLACE_ERROR=1 ;;\n    esac\n  fi\n\n  dnl We don't use AC_FUNC_ERROR_AT_LINE any more, because it is no longer\n  dnl maintained in Autoconf and because it invokes AC_LIBOBJ.\n  dnl We need to notice a missing declaration, like gl_CHECK_FUNCS_ANDROID does.\n  AC_CHECK_DECL([error_at_line], , , [[#include <error.h>]])\n  if test $ac_cv_have_decl_error_at_line = yes; then\n    AC_CACHE_CHECK([for error_at_line], [ac_cv_lib_error_at_line],\n      [AC_LINK_IFELSE(\n         [AC_LANG_PROGRAM(\n            [[#include <error.h>]],\n            [[error_at_line (0, 0, \"\", 0, \"an error occurred\");]])],\n         [ac_cv_lib_error_at_line=yes],\n         [ac_cv_lib_error_at_line=no])])\n  else\n    ac_cv_lib_error_at_line=no\n  fi\n  if test $ac_cv_lib_error_at_line = yes; then\n    HAVE_ERROR_AT_LINE=1\n  else\n    HAVE_ERROR_AT_LINE=0\n  fi\n  REPLACE_ERROR_AT_LINE=0\n\n  if test $ac_cv_func_error = yes && test $ac_cv_lib_error_at_line = yes; then\n    dnl On Android 11, when error_print_progname is set, the output of the\n    dnl error() function contains an extra space.\n    AC_CACHE_CHECK([for working error function],\n      [gl_cv_func_working_error],\n      [if test $cross_compiling != yes; then\n         AC_LINK_IFELSE(\n           [AC_LANG_PROGRAM([[\n              #include <error.h>\n              static void print_no_progname (void) {}\n            ]], [[\n              error_print_progname = print_no_progname;\n              error (0, 0, \"foo\");\n            ]])\n           ],\n           [rm -f conftest.out\n            if test -s conftest$ac_exeext \\\n               && ./conftest$ac_exeext 2> conftest.out; then\n              if grep ' ' conftest.out >/dev/null; then\n                gl_cv_func_working_error=no\n              else\n                gl_cv_func_working_error=yes\n              fi\n            else\n              gl_cv_func_working_error=no\n            fi\n            rm -f conftest.out\n           ],\n           [gl_cv_func_working_error=no])\n       else\n         AC_COMPILE_IFELSE(\n           [AC_LANG_PROGRAM([[\n              #include <error.h>\n            ]], [[\n              error (0, 0, \"foo\");\n            ]])\n           ],\n           [case \"$host_os\" in\n                               # Guess yes on glibc systems.\n              *-gnu* | gnu*)   gl_cv_func_working_error=\"guessing yes\" ;;\n                               # Guess no on Android.\n              linux*-android*) gl_cv_func_working_error=\"guessing no\" ;;\n                               # If we don't know, obey --enable-cross-guesses.\n              *)               gl_cv_func_working_error=\"$gl_cross_guess_normal\" ;;\n            esac\n           ],\n           [gl_cv_func_working_error=no])\n       fi\n      ])\n    case \"$gl_cv_func_working_error\" in\n      *no)\n        REPLACE_ERROR=1\n        REPLACE_ERROR_AT_LINE=1\n        ;;\n    esac\n  fi\n\n  if test $HAVE_ERROR = 0 || test $REPLACE_ERROR = 1 \\\n     || test $HAVE_ERROR_AT_LINE = 0 || test $REPLACE_ERROR_AT_LINE = 1; then\n    COMPILE_ERROR_C=1\n  else\n    COMPILE_ERROR_C=0\n  fi\n\n  AC_SUBST([HAVE_ERROR])\n  AC_SUBST([HAVE_ERROR_AT_LINE])\n  AC_SUBST([REPLACE_ERROR])\n  AC_SUBST([REPLACE_ERROR_AT_LINE])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}