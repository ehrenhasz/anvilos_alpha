{
  "module_name": "fstatat.m4",
  "hash_id": "4f2fb87983ecd7af6ec9cf04884074774a507e09c1151cc0455ca0e24f62af1a",
  "original_prompt": "Ingested from coreutils-9.4/m4/fstatat.m4",
  "human_readable_source": "# fstatat.m4 serial 4\ndnl Copyright (C) 2004-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\n# Written by Jim Meyering.\n\n# If we have the fstatat function, and it has the bug (in AIX 7.1)\n# that it does not fill in st_size correctly, use the replacement function.\nAC_DEFUN([gl_FUNC_FSTATAT],\n[\n  AC_REQUIRE([gl_SYS_STAT_H_DEFAULTS])\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n  AC_REQUIRE([gl_FUNC_LSTAT_FOLLOWS_SLASHED_SYMLINK])\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_CHECK_FUNCS_ONCE([fstatat])\n\n  if test $ac_cv_func_fstatat = no; then\n    HAVE_FSTATAT=0\n  else\n    dnl Test for an AIX 7.1 bug; see\n    dnl <https://lists.gnu.org/r/bug-tar/2011-09/msg00015.html>.\n    AC_CACHE_CHECK([whether fstatat (..., 0) works],\n      [gl_cv_func_fstatat_zero_flag],\n      [AC_RUN_IFELSE(\n         [AC_LANG_SOURCE(\n            [[\n              #include <fcntl.h>\n              #include <sys/stat.h>\n              int\n              main (void)\n              {\n                struct stat a;\n                return fstatat (AT_FDCWD, \".\", &a, 0) != 0;\n              }\n            ]])],\n         [gl_cv_func_fstatat_zero_flag=yes],\n         [gl_cv_func_fstatat_zero_flag=no],\n         [case \"$host_os\" in\n            aix*) gl_cv_func_fstatat_zero_flag=\"guessing no\";;\n            *)    gl_cv_func_fstatat_zero_flag=\"guessing yes\";;\n          esac\n         ])\n      ])\n\n    case $gl_cv_func_fstatat_zero_flag+$gl_cv_func_lstat_dereferences_slashed_symlink in\n    *yes+*yes) ;;\n    *) REPLACE_FSTATAT=1 ;;\n    esac\n\n    case $host_os in\n      solaris*)\n        REPLACE_FSTATAT=1 ;;\n    esac\n\n    case $REPLACE_FSTATAT,$gl_cv_func_fstatat_zero_flag in\n      1,*yes)\n         AC_DEFINE([HAVE_WORKING_FSTATAT_ZERO_FLAG], [1],\n           [Define to 1 if fstatat (..., 0) works.\n            For example, it does not work in AIX 7.1.])\n         ;;\n    esac\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}