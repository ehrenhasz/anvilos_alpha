{
  "module_name": "manywarnings.m4",
  "hash_id": "a8dbbe05acda8f73d6ff4e3dec0a724992a447b77c01470c59fb95ecbbd88524",
  "original_prompt": "Ingested from coreutils-9.4/m4/manywarnings.m4",
  "human_readable_source": "# manywarnings.m4 serial 24\ndnl Copyright (C) 2008-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl From Simon Josefsson\n\nAC_PREREQ([2.64])\n\n# gl_MANYWARN_COMPLEMENT(OUTVAR, LISTVAR, REMOVEVAR)\n# --------------------------------------------------\n# Copy LISTVAR to OUTVAR except for the entries in REMOVEVAR.\n# Elements separated by whitespace.  In set logic terms, the function\n# does OUTVAR = LISTVAR \\ REMOVEVAR.\nAC_DEFUN([gl_MANYWARN_COMPLEMENT],\n[\n  gl_warn_set=\n  set x $2; shift\n  for gl_warn_item\n  do\n    case \" $3 \" in\n      *\" $gl_warn_item \"*)\n        ;;\n      *)\n        AS_VAR_APPEND([gl_warn_set], [\" $gl_warn_item\"])\n        ;;\n    esac\n  done\n  $1=$gl_warn_set\n])\n\n# gl_MANYWARN_ALL_GCC(VARIABLE)\n# -----------------------------\n# Add all documented GCC warning parameters to variable VARIABLE.\n# Note that you need to test them using gl_WARN_ADD if you want to\n# make sure your gcc understands it.\n#\n# The effects of this macro depend on the current language (_AC_LANG).\nAC_DEFUN([gl_MANYWARN_ALL_GCC],\n[_AC_LANG_DISPATCH([$0], _AC_LANG, $@)])\n\n# Specialization for _AC_LANG = C.\nAC_DEFUN([gl_MANYWARN_ALL_GCC(C)],\n[\n  AC_LANG_PUSH([C])\n\n  dnl First, check for some issues that only occur when combining multiple\n  dnl gcc warning categories.\n  AC_REQUIRE([AC_PROG_CC])\n  AS_IF([test -n \"$GCC\"], [\n    AC_CACHE_CHECK([whether -Wno-missing-field-initializers is needed],\n      [gl_cv_cc_nomfi_needed],\n      [gl_cv_cc_nomfi_needed=no\n       gl_save_CFLAGS=\"$CFLAGS\"\n       CFLAGS=\"$CFLAGS -Wextra -Werror\"\n       AC_COMPILE_IFELSE(\n         [AC_LANG_PROGRAM(\n            [[struct file_data { int desc, name; };\n              struct cmp { struct file_data file[1]; };\n              void f (struct cmp *r)\n              {\n                typedef struct { int a; int b; } s_t;\n                s_t s1 = { 0, };\n                struct cmp cmp = { .file[0].desc = r->file[0].desc + s1.a };\n                *r = cmp;\n              }\n            ]],\n            [[]])],\n         [],\n         [CFLAGS=\"$CFLAGS -Wno-missing-field-initializers\"\n          AC_COMPILE_IFELSE([],\n            [gl_cv_cc_nomfi_needed=yes])])\n       CFLAGS=\"$gl_save_CFLAGS\"\n    ])\n\n    dnl Next, check if -Werror -Wuninitialized is useful with the\n    dnl user's choice of $CFLAGS; some versions of gcc warn that it\n    dnl has no effect if -O is not also used\n    AC_CACHE_CHECK([whether -Wuninitialized is supported],\n      [gl_cv_cc_uninitialized_supported],\n      [gl_save_CFLAGS=\"$CFLAGS\"\n       CFLAGS=\"$CFLAGS -Werror -Wuninitialized\"\n       AC_COMPILE_IFELSE(\n         [AC_LANG_PROGRAM([[]], [[]])],\n         [gl_cv_cc_uninitialized_supported=yes],\n         [gl_cv_cc_uninitialized_supported=no])\n       CFLAGS=\"$gl_save_CFLAGS\"\n      ])\n  ])\n\n  # List all gcc warning categories.\n  # To compare this list to your installed GCC's, run this Bash command:\n  #\n  # comm -3 \\\n  #  <((sed -n 's/^  *\\(-[^ 0-9][^ ]*\\).*/\\1/p' manywarnings.m4; \\\n  #     awk '/^[^#]/ {print $1}' ../build-aux/gcc-warning.spec) | sort) \\\n  #  <(LC_ALL=C gcc --help=warnings | sed -n 's/^  \\(-[^ ]*\\) .*/\\1/p' | sort)\n\n  $1=\n  for gl_manywarn_item in -fanalyzer -fstrict-flex-arrays \\\n    -Wall \\\n    -Warith-conversion \\\n    -Wbad-function-cast \\\n    -Wcast-align=strict \\\n    -Wdate-time \\\n    -Wdisabled-optimization \\\n    -Wdouble-promotion \\\n    -Wduplicated-branches \\\n    -Wduplicated-cond \\\n    -Wextra \\\n    -Wformat-signedness \\\n    -Winit-self \\\n    -Winline \\\n    -Winvalid-pch \\\n    -Wlogical-op \\\n    -Wmissing-declarations \\\n    -Wmissing-include-dirs \\\n    -Wmissing-prototypes \\\n    -Wnested-externs \\\n    -Wnull-dereference \\\n    -Wold-style-definition \\\n    -Wopenmp-simd \\\n    -Woverlength-strings \\\n    -Wpacked \\\n    -Wpointer-arith \\\n    -Wshadow \\\n    -Wstack-protector \\\n    -Wstrict-flex-arrays \\\n    -Wstrict-overflow \\\n    -Wstrict-prototypes \\\n    -Wsuggest-attribute=cold \\\n    -Wsuggest-attribute=const \\\n    -Wsuggest-attribute=format \\\n    -Wsuggest-attribute=malloc \\\n    -Wsuggest-attribute=noreturn \\\n    -Wsuggest-attribute=pure \\\n    -Wsuggest-final-methods \\\n    -Wsuggest-final-types \\\n    -Wsync-nand \\\n    -Wsystem-headers \\\n    -Wtrampolines \\\n    -Wuninitialized \\\n    -Wunknown-pragmas \\\n    -Wunsafe-loop-optimizations \\\n    -Wunused-macros \\\n    -Wvariadic-macros \\\n    -Wvector-operation-performance \\\n    -Wvla \\\n    -Wwrite-strings \\\n    \\\n    ; do\n    AS_VAR_APPEND([$1], [\" $gl_manywarn_item\"])\n  done\n\n  # gcc --help=warnings outputs an unusual form for these options; list\n  # them here so that the above 'comm' command doesn't report a false match.\n  AS_VAR_APPEND([$1], [' -Warray-bounds=2'])\n  AS_VAR_APPEND([$1], [' -Wattribute-alias=2'])\n  AS_VAR_APPEND([$1], [' -Wbidi-chars=any,ucn'])\n  AS_VAR_APPEND([$1], [' -Wformat-overflow=2'])\n  AS_VAR_APPEND([$1], [' -Wformat=2'])\n  AS_VAR_APPEND([$1], [' -Wformat-truncation=2'])\n  AS_VAR_APPEND([$1], [' -Wimplicit-fallthrough=5'])\n  AS_VAR_APPEND([$1], [' -Wshift-overflow=2'])\n  AS_VAR_APPEND([$1], [' -Wuse-after-free=3'])\n  AS_VAR_APPEND([$1], [' -Wunused-const-variable=2'])\n  AS_VAR_APPEND([$1], [' -Wvla-larger-than=4031'])\n\n  # These are needed for older GCC versions.\n  if test -n \"$GCC\" && gl_gcc_version=`($CC --version) 2>/dev/null`; then\n    case $gl_gcc_version in\n      'gcc (GCC) '[[0-3]].* | \\\n      'gcc (GCC) '4.[[0-7]].*)\n        AS_VAR_APPEND([$1], [' -fdiagnostics-show-option'])\n        AS_VAR_APPEND([$1], [' -funit-at-a-time'])\n          ;;\n    esac\n    case $gl_gcc_version in\n      'gcc (GCC) '[[0-9]].*)\n        AS_VAR_APPEND([$1], [' -fno-common'])\n          ;;\n    esac\n  fi\n\n  # Disable specific options as needed.\n  if test \"$gl_cv_cc_nomfi_needed\" = yes; then\n    AS_VAR_APPEND([$1], [' -Wno-missing-field-initializers'])\n  fi\n\n  if test \"$gl_cv_cc_uninitialized_supported\" = no; then\n    AS_VAR_APPEND([$1], [' -Wno-uninitialized'])\n  fi\n\n  # This warning have too many false alarms in GCC 11.2.1.\n  # https://gcc.gnu.org/bugzilla/show_bug.cgi?id=101713\n  AS_VAR_APPEND([$1], [' -Wno-analyzer-malloc-leak'])\n\n  AC_LANG_POP([C])\n])\n\n# Specialization for _AC_LANG = C++.\nAC_DEFUN([gl_MANYWARN_ALL_GCC(C++)],\n[\n  gl_MANYWARN_ALL_GCC_CXX_IMPL([$1])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}