{
  "module_name": "mkdir.m4",
  "hash_id": "639b4e2b47f3ce9d8c7a9b53d38a4e41e58eb56366f21cd061b35835c1fc3342",
  "original_prompt": "Ingested from coreutils-9.4/m4/mkdir.m4",
  "human_readable_source": "# serial 19\n\n# Copyright (C) 2001, 2003-2004, 2006, 2008-2023 Free Software Foundation, Inc.\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\n# On some systems, mkdir (\"foo/\", 0700) fails because of the trailing slash.\n# On others, mkdir (\"foo/./\", 0700) mistakenly succeeds.\n# On such systems, arrange to use a wrapper function.\nAC_DEFUN([gl_FUNC_MKDIR],\n[dnl\n  AC_REQUIRE([gl_SYS_STAT_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_CHECK_HEADERS_ONCE([unistd.h])\n  AC_CACHE_CHECK([whether mkdir handles trailing slash],\n    [gl_cv_func_mkdir_trailing_slash_works],\n    [rm -rf conftest.dir\n     AC_RUN_IFELSE(\n       [AC_LANG_PROGRAM([[\n          #include <sys/types.h>\n          #include <sys/stat.h>\n          ]GL_MDA_DEFINES],\n          [[return mkdir (\"conftest.dir/\", 0700);]])],\n       [gl_cv_func_mkdir_trailing_slash_works=yes],\n       [gl_cv_func_mkdir_trailing_slash_works=no],\n       [case \"$host_os\" in\n                             # Guess yes on Linux systems.\n          linux-* | linux)   gl_cv_func_mkdir_trailing_slash_works=\"guessing yes\" ;;\n                             # Guess yes on systems that emulate the Linux system calls.\n          midipix*)          gl_cv_func_mkdir_trailing_slash_works=\"guessing yes\" ;;\n                             # Guess yes on glibc systems.\n          *-gnu* | gnu*)     gl_cv_func_mkdir_trailing_slash_works=\"guessing yes\" ;;\n                             # Guess yes on MSVC, no on mingw.\n          windows*-gnu*)     gl_cv_func_mkdir_trailing_slash_works=\"guessing no\" ;;\n          windows*-msvc*)    gl_cv_func_mkdir_trailing_slash_works=\"guessing yes\" ;;\n          mingw* | windows*) AC_EGREP_CPP([Known], [\n#ifdef _MSC_VER\n Known\n#endif\n                               ],\n                               [gl_cv_func_mkdir_trailing_slash_works=\"guessing yes\"],\n                               [gl_cv_func_mkdir_trailing_slash_works=\"guessing no\"])\n                             ;;\n                             # If we don't know, obey --enable-cross-guesses.\n          *)                 gl_cv_func_mkdir_trailing_slash_works=\"$gl_cross_guess_normal\" ;;\n        esac\n       ])\n     rm -rf conftest.dir\n    ])\n  case \"$gl_cv_func_mkdir_trailing_slash_works\" in\n    *yes) ;;\n    *)\n      REPLACE_MKDIR=1\n      ;;\n  esac\n\n  AC_CACHE_CHECK([whether mkdir handles trailing dot],\n    [gl_cv_func_mkdir_trailing_dot_works],\n    [rm -rf conftest.dir\n     AC_RUN_IFELSE(\n       [AC_LANG_PROGRAM([[\n          #include <sys/types.h>\n          #include <sys/stat.h>\n          ]GL_MDA_DEFINES],\n          [[return !mkdir (\"conftest.dir/./\", 0700);]])],\n       [gl_cv_func_mkdir_trailing_dot_works=yes],\n       [gl_cv_func_mkdir_trailing_dot_works=no],\n       [case \"$host_os\" in\n                             # Guess yes on glibc systems.\n          *-gnu* | gnu*)     gl_cv_func_mkdir_trailing_dot_works=\"guessing yes\" ;;\n                             # Guess yes on musl systems.\n          *-musl*)           gl_cv_func_mkdir_trailing_dot_works=\"guessing yes\" ;;\n                             # Guess yes on systems that emulate the Linux system calls.\n          midipix*)          gl_cv_func_mkdir_trailing_dot_works=\"guessing yes\" ;;\n                             # Guess no on native Windows.\n          mingw* | windows*) gl_cv_func_mkdir_trailing_dot_works=\"guessing no\" ;;\n                             # If we don't know, obey --enable-cross-guesses.\n          *)                 gl_cv_func_mkdir_trailing_dot_works=\"$gl_cross_guess_normal\" ;;\n        esac\n       ])\n     rm -rf conftest.dir\n    ]\n  )\n  case \"$gl_cv_func_mkdir_trailing_dot_works\" in\n    *yes) ;;\n    *)\n      REPLACE_MKDIR=1\n      AC_DEFINE([FUNC_MKDIR_DOT_BUG], [1], [Define to 1 if mkdir mistakenly\n        creates a directory given with a trailing dot component.])\n      ;;\n  esac\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}