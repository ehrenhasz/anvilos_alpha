{
  "module_name": "open-slash.m4",
  "hash_id": "37f802c2c55d616378e3c8e874af555cfa179746840ac5cddcbb507ffe02ee36",
  "original_prompt": "Ingested from coreutils-9.4/m4/open-slash.m4",
  "human_readable_source": "# open-slash.m4 serial 2\ndnl Copyright (C) 2007-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl Tests whether open() and creat() recognize a trailing slash.\ndnl Sets gl_cv_func_open_slash.\nAC_DEFUN([gl_OPEN_TRAILING_SLASH_BUG],\n[\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  dnl open(\"foo/\") should not create a file when the file name has a\n  dnl trailing slash.  FreeBSD only has the problem on symlinks.\n  AC_CHECK_FUNCS_ONCE([lstat])\n  AC_CACHE_CHECK([whether open recognizes a trailing slash],\n    [gl_cv_func_open_slash],\n    [# Assume that if we have lstat, we can also check symlinks.\n     if test $ac_cv_func_lstat = yes; then\n       touch conftest.tmp\n       ln -s conftest.tmp conftest.lnk\n     fi\n     AC_RUN_IFELSE(\n       [AC_LANG_SOURCE([[\n#include <fcntl.h>\n#if HAVE_UNISTD_H\n# include <unistd.h>\n#endif\n]GL_MDA_DEFINES[\nint main ()\n{\n  int result = 0;\n#if HAVE_LSTAT\n  if (open (\"conftest.lnk/\", O_RDONLY) != -1)\n    result |= 1;\n#endif\n  if (open (\"conftest.sl/\", O_CREAT, 0600) >= 0)\n    result |= 2;\n  return result;\n}]])],\n       [gl_cv_func_open_slash=yes],\n       [gl_cv_func_open_slash=no],\n       [\nchangequote(,)dnl\n        case \"$host_os\" in\n          freebsd* | aix* | hpux* | solaris2.[0-9] | solaris2.[0-9].*)\n            gl_cv_func_open_slash=\"guessing no\" ;;\n          *)\n            gl_cv_func_open_slash=\"guessing yes\" ;;\n        esac\nchangequote([,])dnl\n       ])\n     rm -f conftest.sl conftest.tmp conftest.lnk\n    ])\n  case \"$gl_cv_func_open_slash\" in\n    *no)\n      AC_DEFINE([OPEN_TRAILING_SLASH_BUG], [1],\n        [Define to 1 if open() fails to recognize a trailing slash.])\n      ;;\n  esac\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}