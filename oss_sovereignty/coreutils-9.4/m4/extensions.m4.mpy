{
  "module_name": "extensions.m4",
  "hash_id": "4f3fb16c001a1621bd75d081fc5b34e4d9a940e890898e224526251590f5607b",
  "original_prompt": "Ingested from coreutils-9.4/m4/extensions.m4",
  "human_readable_source": "# serial 23  -*- Autoconf -*-\n# Enable extensions on systems that normally disable them.\n\n# Copyright (C) 2003, 2006-2023 Free Software Foundation, Inc.\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\ndnl Define to empty for the benefit of Autoconf 2.69 and earlier, so that\ndnl AC_USE_SYSTEM_EXTENSIONS (below) can be used unchanged from Autoconf 2.70+.\nm4_ifndef([AC_CHECK_INCLUDES_DEFAULT],\n  [AC_DEFUN([AC_CHECK_INCLUDES_DEFAULT], [])])\n\n# This definition of AC_USE_SYSTEM_EXTENSIONS is stolen from git\n# Autoconf.  Perhaps we can remove this once we can assume Autoconf\n# is recent-enough everywhere, but since Autoconf mutates rapidly\n# enough in this area it's likely we'll need to redefine\n# AC_USE_SYSTEM_EXTENSIONS for quite some time.\n\n# If autoconf reports a warning\n#     warning: AC_COMPILE_IFELSE was called before AC_USE_SYSTEM_EXTENSIONS\n# or  warning: AC_RUN_IFELSE was called before AC_USE_SYSTEM_EXTENSIONS\n# the fix is\n#   1) to ensure that AC_USE_SYSTEM_EXTENSIONS is never directly invoked\n#      but always AC_REQUIREd,\n#   2) to ensure that for each occurrence of\n#        AC_REQUIRE([AC_USE_SYSTEM_EXTENSIONS])\n#      or\n#        AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n#      the corresponding gnulib module description has 'extensions' among\n#      its dependencies. This will ensure that the gl_USE_SYSTEM_EXTENSIONS\n#      invocation occurs in gl_EARLY, not in gl_INIT.\n\nm4_version_prereq([2.72], [], [\n\n# AC_USE_SYSTEM_EXTENSIONS\n# ------------------------\n# Enable extensions on systems that normally disable them,\n# typically due to standards-conformance issues.\n# We unconditionally define as many of the known feature-enabling\n# as possible, reserving conditional behavior for macros that are\n# known to cause problems on some platforms (such as __EXTENSIONS__).\nAC_DEFUN_ONCE([AC_USE_SYSTEM_EXTENSIONS],\n[AC_BEFORE([$0], [AC_PREPROC_IFELSE])dnl\nAC_BEFORE([$0], [AC_COMPILE_IFELSE])dnl\nAC_BEFORE([$0], [AC_LINK_IFELSE])dnl\nAC_BEFORE([$0], [AC_RUN_IFELSE])dnl\nAC_BEFORE([$0], [AC_CHECK_INCLUDES_DEFAULT])dnl\ndnl #undef in AH_VERBATIM gets replaced with #define by AC_DEFINE.\ndnl Use a different key than __EXTENSIONS__, as that name broke existing\ndnl configure.ac when using autoheader 2.62.\ndnl The macros below are in alphabetical order ignoring leading _ or __\ndnl prefixes.\nAH_VERBATIM([USE_SYSTEM_EXTENSIONS],\n[/* Enable extensions on AIX 3, Interix.  */\n#ifndef _ALL_SOURCE\n# undef _ALL_SOURCE\n#endif\n/* Enable general extensions on macOS.  */\n#ifndef _DARWIN_C_SOURCE\n# undef _DARWIN_C_SOURCE\n#endif\n/* Enable general extensions on Solaris.  */\n#ifndef __EXTENSIONS__\n# undef __EXTENSIONS__\n#endif\n/* Enable GNU extensions on systems that have them.  */\n#ifndef _GNU_SOURCE\n# undef _GNU_SOURCE\n#endif\n/* Enable X/Open compliant socket functions that do not require linking\n   with -lxnet on HP-UX 11.11.  */\n#ifndef _HPUX_ALT_XOPEN_SOCKET_API\n# undef _HPUX_ALT_XOPEN_SOCKET_API\n#endif\n/* Identify the host operating system as Minix.\n   This macro does not affect the system headers' behavior.\n   A future release of Autoconf may stop defining this macro.  */\n#ifndef _MINIX\n# undef _MINIX\n#endif\n/* Enable general extensions on NetBSD.\n   Enable NetBSD compatibility extensions on Minix.  */\n#ifndef _NETBSD_SOURCE\n# undef _NETBSD_SOURCE\n#endif\n/* Enable OpenBSD compatibility extensions on NetBSD.\n   Oddly enough, this does nothing on OpenBSD.  */\n#ifndef _OPENBSD_SOURCE\n# undef _OPENBSD_SOURCE\n#endif\n/* Define to 1 if needed for POSIX-compatible behavior.  */\n#ifndef _POSIX_SOURCE\n# undef _POSIX_SOURCE\n#endif\n/* Define to 2 if needed for POSIX-compatible behavior.  */\n#ifndef _POSIX_1_SOURCE\n# undef _POSIX_1_SOURCE\n#endif\n/* Enable POSIX-compatible threading on Solaris.  */\n#ifndef _POSIX_PTHREAD_SEMANTICS\n# undef _POSIX_PTHREAD_SEMANTICS\n#endif\n/* Enable extensions specified by ISO/IEC TS 18661-5:2014.  */\n#ifndef __STDC_WANT_IEC_60559_ATTRIBS_EXT__\n# undef __STDC_WANT_IEC_60559_ATTRIBS_EXT__\n#endif\n/* Enable extensions specified by ISO/IEC TS 18661-1:2014.  */\n#ifndef __STDC_WANT_IEC_60559_BFP_EXT__\n# undef __STDC_WANT_IEC_60559_BFP_EXT__\n#endif\n/* Enable extensions specified by ISO/IEC TS 18661-2:2015.  */\n#ifndef __STDC_WANT_IEC_60559_DFP_EXT__\n# undef __STDC_WANT_IEC_60559_DFP_EXT__\n#endif\n/* Enable extensions specified by C23 Annex F.  */\n#ifndef __STDC_WANT_IEC_60559_EXT__\n# undef __STDC_WANT_IEC_60559_EXT__\n#endif\n/* Enable extensions specified by ISO/IEC TS 18661-4:2015.  */\n#ifndef __STDC_WANT_IEC_60559_FUNCS_EXT__\n# undef __STDC_WANT_IEC_60559_FUNCS_EXT__\n#endif\n/* Enable extensions specified by C23 Annex H and ISO/IEC TS 18661-3:2015.  */\n#ifndef __STDC_WANT_IEC_60559_TYPES_EXT__\n# undef __STDC_WANT_IEC_60559_TYPES_EXT__\n#endif\n/* Enable extensions specified by ISO/IEC TR 24731-2:2010.  */\n#ifndef __STDC_WANT_LIB_EXT2__\n# undef __STDC_WANT_LIB_EXT2__\n#endif\n/* Enable extensions specified by ISO/IEC 24747:2009.  */\n#ifndef __STDC_WANT_MATH_SPEC_FUNCS__\n# undef __STDC_WANT_MATH_SPEC_FUNCS__\n#endif\n/* Enable extensions on HP NonStop.  */\n#ifndef _TANDEM_SOURCE\n# undef _TANDEM_SOURCE\n#endif\n/* Enable X/Open extensions.  Define to 500 only if necessary\n   to make mbstate_t available.  */\n#ifndef _XOPEN_SOURCE\n# undef _XOPEN_SOURCE\n#endif\n])dnl\n\n  AC_REQUIRE([AC_CHECK_INCLUDES_DEFAULT])dnl\n  _AC_CHECK_HEADER_ONCE([wchar.h])\n  _AC_CHECK_HEADER_ONCE([minix/config.h])\n\ndnl Defining __EXTENSIONS__ may break the system headers on some systems.\ndnl (FIXME: Which ones?)\n  AC_CACHE_CHECK([whether it is safe to define __EXTENSIONS__],\n    [ac_cv_safe_to_define___extensions__],\n    [AC_COMPILE_IFELSE(\n       [AC_LANG_PROGRAM([[\n#         define __EXTENSIONS__ 1\n          ]AC_INCLUDES_DEFAULT])],\n       [ac_cv_safe_to_define___extensions__=yes],\n       [ac_cv_safe_to_define___extensions__=no])])\n\ndnl HP-UX 11.11 defines mbstate_t only if _XOPEN_SOURCE is defined to\ndnl 500, regardless of whether compiling with -Ae or -D_HPUX_SOURCE=1.\ndnl But defining _XOPEN_SOURCE may turn *off* extensions on platforms\ndnl not covered by turn-on-extensions macros (notably Dragonfly, Free,\ndnl and OpenBSD, which don't have any equivalent of _NETBSD_SOURCE) so\ndnl it should only be defined when necessary.\n  AC_CACHE_CHECK([whether _XOPEN_SOURCE should be defined],\n    [ac_cv_should_define__xopen_source],\n    [ac_cv_should_define__xopen_source=no\n    AS_IF([test $ac_cv_header_wchar_h = yes],\n      [AC_COMPILE_IFELSE(\n        [AC_LANG_PROGRAM([[\n          #include <wchar.h>\n          mbstate_t x;]])],\n        [],\n        [AC_COMPILE_IFELSE(\n          [AC_LANG_PROGRAM([[\n            #define _XOPEN_SOURCE 500\n            #include <wchar.h>\n            mbstate_t x;]])],\n          [ac_cv_should_define__xopen_source=yes])])])])\n\n  AC_DEFINE([_ALL_SOURCE])\n  AC_DEFINE([_DARWIN_C_SOURCE])\n  AC_DEFINE([_GNU_SOURCE])\n  AC_DEFINE([_HPUX_ALT_XOPEN_SOCKET_API])\n  AC_DEFINE([_NETBSD_SOURCE])\n  AC_DEFINE([_OPENBSD_SOURCE])\n  AC_DEFINE([_POSIX_PTHREAD_SEMANTICS])\n  AC_DEFINE([__STDC_WANT_IEC_60559_ATTRIBS_EXT__])\n  AC_DEFINE([__STDC_WANT_IEC_60559_BFP_EXT__])\n  AC_DEFINE([__STDC_WANT_IEC_60559_DFP_EXT__])\n  AC_DEFINE([__STDC_WANT_IEC_60559_EXT__])\n  AC_DEFINE([__STDC_WANT_IEC_60559_FUNCS_EXT__])\n  AC_DEFINE([__STDC_WANT_IEC_60559_TYPES_EXT__])\n  AC_DEFINE([__STDC_WANT_LIB_EXT2__])\n  AC_DEFINE([__STDC_WANT_MATH_SPEC_FUNCS__])\n  AC_DEFINE([_TANDEM_SOURCE])\n  AS_IF([test $ac_cv_header_minix_config_h = yes],\n    [MINIX=yes\n    AC_DEFINE([_MINIX])\n    AC_DEFINE([_POSIX_SOURCE])\n    AC_DEFINE([_POSIX_1_SOURCE], [2])],\n    [MINIX=])\n  AS_IF([test $ac_cv_safe_to_define___extensions__ = yes],\n    [AC_DEFINE([__EXTENSIONS__])])\n  AS_IF([test $ac_cv_should_define__xopen_source = yes],\n    [AC_DEFINE([_XOPEN_SOURCE], [500])])\n])# AC_USE_SYSTEM_EXTENSIONS\n])\n\n# gl_USE_SYSTEM_EXTENSIONS\n# ------------------------\n# Enable extensions on systems that normally disable them,\n# typically due to standards-conformance issues.\nAC_DEFUN_ONCE([gl_USE_SYSTEM_EXTENSIONS],\n[\n  AC_REQUIRE([AC_USE_SYSTEM_EXTENSIONS])\n\n  dnl On OpenBSD 6.8 with GCC, the include files contain a couple of\n  dnl definitions that are only activated with an explicit -D_ISOC11_SOURCE.\n  dnl That's because this version of GCC (4.2.1) supports the option\n  dnl '-std=gnu99' but not the option '-std=gnu11'.\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  case \"$host_os\" in\n    openbsd*)\n      AC_DEFINE([_ISOC11_SOURCE], [1],\n        [Define to enable the declarations of ISO C 11 types and functions.])\n      ;;\n  esac\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}