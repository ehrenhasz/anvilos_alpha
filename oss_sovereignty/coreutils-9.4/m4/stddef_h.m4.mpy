{
  "module_name": "stddef_h.m4",
  "hash_id": "f374c210cdc48439e8e47a7f7ad4607ac1bdce5f42887c9078dd919ef1d78c25",
  "original_prompt": "Ingested from coreutils-9.4/m4/stddef_h.m4",
  "human_readable_source": "# stddef_h.m4 serial 14\ndnl Copyright (C) 2009-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl A placeholder for <stddef.h>, for platforms that have issues.\n\nAC_DEFUN_ONCE([gl_STDDEF_H],\n[\n  AC_REQUIRE([gl_STDDEF_H_DEFAULTS])\n  AC_REQUIRE([gt_TYPE_WCHAR_T])\n\n  dnl Persuade OpenBSD <stddef.h> to declare max_align_t.\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n\n  GL_GENERATE_STDDEF_H=false\n\n  dnl Test whether the type max_align_t exists and whether its alignment\n  dnl \"is as great as is supported by the implementation in all contexts\".\n  AC_CACHE_CHECK([for good max_align_t],\n    [gl_cv_type_max_align_t],\n    [AC_COMPILE_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[/* On FreeBSD 12.0/x86, max_align_t defined by <stddef.h> has\n               the correct alignment with the default (wrong) definition of\n               _Alignof, but a wrong alignment as soon as we activate an\n               ISO C compliant _Alignof definition.  */\n            #if ((defined __GNUC__ && 4 <= __GNUC__) || defined __clang__) && !defined __cplusplus\n             #define _Alignof(type) __builtin_offsetof (struct { char __a; type __b; }, __b)\n            #endif\n            #include <stddef.h>\n            unsigned int s = sizeof (max_align_t);\n            #if defined __GNUC__ || defined __clang__ || defined __IBM__ALIGNOF__\n            int check1[2 * (__alignof__ (double) <= __alignof__ (max_align_t)) - 1];\n            int check2[2 * (__alignof__ (long double) <= __alignof__ (max_align_t)) - 1];\n            #endif\n            typedef struct { char a; max_align_t b; } max_helper;\n            typedef struct { char a; long b; } long_helper;\n            typedef struct { char a; double b; } double_helper;\n            typedef struct { char a; long double b; } long_double_helper;\n            int check3[2 * (offsetof (long_helper, b) <= offsetof (max_helper, b)) - 1];\n            int check4[2 * (offsetof (double_helper, b) <= offsetof (max_helper, b)) - 1];\n            int check5[2 * (offsetof (long_double_helper, b) <= offsetof (max_helper, b)) - 1];\n          ]])],\n       [gl_cv_type_max_align_t=yes],\n       [gl_cv_type_max_align_t=no])\n    ])\n  if test $gl_cv_type_max_align_t = no; then\n    HAVE_MAX_ALIGN_T=0\n    GL_GENERATE_STDDEF_H=true\n  fi\n\n  if test $gt_cv_c_wchar_t = no; then\n    HAVE_WCHAR_T=0\n    GL_GENERATE_STDDEF_H=true\n  fi\n\n  AC_CACHE_CHECK([whether NULL can be used in arbitrary expressions],\n    [gl_cv_decl_null_works],\n    [AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <stddef.h>\n      int test[2 * (sizeof NULL == sizeof (void *)) -1];\n]])],\n      [gl_cv_decl_null_works=yes],\n      [gl_cv_decl_null_works=no])])\n  if test $gl_cv_decl_null_works = no; then\n    REPLACE_NULL=1\n    GL_GENERATE_STDDEF_H=true\n  fi\n\n  AC_CACHE_CHECK([for unreachable],\n    [gl_cv_func_unreachable],\n    [AC_LINK_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <stddef.h>\n          ]],\n          [[unreachable ();\n          ]])],\n       [gl_cv_func_unreachable=yes],\n       [gl_cv_func_unreachable=no])\n    ])\n  if test $gl_cv_func_unreachable = no; then\n    GL_GENERATE_STDDEF_H=true\n  fi\n\n  if $GL_GENERATE_STDDEF_H; then\n    gl_NEXT_HEADERS([stddef.h])\n  fi\n])\n\n# gl_STDDEF_MODULE_INDICATOR([modulename])\n# sets the shell variable that indicates the presence of the given module\n# to a C preprocessor expression that will evaluate to 1.\n# This macro invocation must not occur in macros that are AC_REQUIREd.\nAC_DEFUN([gl_STDDEF_MODULE_INDICATOR],\n[\n  dnl Ensure to expand the default settings once only.\n  gl_STDDEF_H_REQUIRE_DEFAULTS\n  gl_MODULE_INDICATOR_SET_VARIABLE([$1])\n])\n\n# Initializes the default values for AC_SUBSTed shell variables.\n# This macro must not be AC_REQUIREd.  It must only be invoked, and only\n# outside of macros or in macros that are not AC_REQUIREd.\nAC_DEFUN([gl_STDDEF_H_REQUIRE_DEFAULTS],\n[\n  m4_defun(GL_MODULE_INDICATOR_PREFIX[_STDDEF_H_MODULE_INDICATOR_DEFAULTS], [\n  ])\n  m4_require(GL_MODULE_INDICATOR_PREFIX[_STDDEF_H_MODULE_INDICATOR_DEFAULTS])\n  AC_REQUIRE([gl_STDDEF_H_DEFAULTS])\n])\n\nAC_DEFUN([gl_STDDEF_H_DEFAULTS],\n[\n  dnl Assume proper GNU behavior unless another module says otherwise.\n  REPLACE_NULL=0;                AC_SUBST([REPLACE_NULL])\n  HAVE_MAX_ALIGN_T=1;            AC_SUBST([HAVE_MAX_ALIGN_T])\n  HAVE_WCHAR_T=1;                AC_SUBST([HAVE_WCHAR_T])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}