{
  "module_name": "dirent_h.m4",
  "hash_id": "347527ba25348bb3d26bc74c077e10892db9d19ce1688a083f4dabae7843583b",
  "original_prompt": "Ingested from coreutils-9.4/m4/dirent_h.m4",
  "human_readable_source": "# dirent_h.m4 serial 21\ndnl Copyright (C) 2008-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl Written by Bruno Haible.\n\nAC_DEFUN_ONCE([gl_DIRENT_H],\n[\n  dnl Ensure to expand the default settings once only, before all statements\n  dnl that occur in other macros.\n  AC_REQUIRE([gl_DIRENT_H_DEFAULTS])\n\n  dnl <dirent.h> is always overridden, because of GNULIB_POSIXCHECK.\n  gl_CHECK_NEXT_HEADERS([dirent.h])\n  if test $ac_cv_header_dirent_h = yes; then\n    HAVE_DIRENT_H=1\n  else\n    HAVE_DIRENT_H=0\n  fi\n  AC_SUBST([HAVE_DIRENT_H])\n\n  gl_DIRENT_DIR\n\n  dnl Check for declarations of anything we want to poison if the\n  dnl corresponding gnulib module is not in use.\n  gl_WARN_ON_USE_PREPARE([[#include <dirent.h>\n    ]], [alphasort closedir dirfd fdopendir opendir readdir rewinddir scandir])\n])\n\ndnl Determine whether <dirent.h> needs to override the DIR type.\nAC_DEFUN_ONCE([gl_DIRENT_DIR],\n[\n  dnl Set DIR_HAS_FD_MEMBER if dirfd() works, i.e. not always returns -1,\n  dnl or has the __KLIBC__ workaround as in lib/dirfd.c.\n  dnl We could use the findings from gl_FUNC_DIRFD and gl_PREREQ_DIRFD, but\n  dnl it's simpler since we know the affected platforms.\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  case \"$host_os\" in\n    mingw* | windows*) DIR_HAS_FD_MEMBER=0 ;;\n    *)                 DIR_HAS_FD_MEMBER=1 ;;\n  esac\n  AC_SUBST([DIR_HAS_FD_MEMBER])\n])\n\n# gl_DIRENT_MODULE_INDICATOR([modulename])\n# sets the shell variable that indicates the presence of the given module\n# to a C preprocessor expression that will evaluate to 1.\n# This macro invocation must not occur in macros that are AC_REQUIREd.\nAC_DEFUN([gl_DIRENT_MODULE_INDICATOR],\n[\n  dnl Ensure to expand the default settings once only.\n  gl_DIRENT_H_REQUIRE_DEFAULTS\n  gl_MODULE_INDICATOR_SET_VARIABLE([$1])\n  dnl Define it also as a C macro, for the benefit of the unit tests.\n  gl_MODULE_INDICATOR_FOR_TESTS([$1])\n])\n\n# Initializes the default values for AC_SUBSTed shell variables.\n# This macro must not be AC_REQUIREd.  It must only be invoked, and only\n# outside of macros or in macros that are not AC_REQUIREd.\nAC_DEFUN([gl_DIRENT_H_REQUIRE_DEFAULTS],\n[\n  m4_defun(GL_MODULE_INDICATOR_PREFIX[_DIRENT_H_MODULE_INDICATOR_DEFAULTS], [\n    gl_UNISTD_H_REQUIRE_DEFAULTS dnl for REPLACE_FCHDIR\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_OPENDIR])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_READDIR])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_REWINDDIR])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_CLOSEDIR])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_DIRFD])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FDOPENDIR])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_SCANDIR])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_ALPHASORT])\n  ])\n  m4_require(GL_MODULE_INDICATOR_PREFIX[_DIRENT_H_MODULE_INDICATOR_DEFAULTS])\n  AC_REQUIRE([gl_DIRENT_H_DEFAULTS])\n])\n\nAC_DEFUN([gl_DIRENT_H_DEFAULTS],\n[\n  dnl Assume proper GNU behavior unless another module says otherwise.\n  HAVE_OPENDIR=1;       AC_SUBST([HAVE_OPENDIR])\n  HAVE_READDIR=1;       AC_SUBST([HAVE_READDIR])\n  HAVE_REWINDDIR=1;     AC_SUBST([HAVE_REWINDDIR])\n  HAVE_CLOSEDIR=1;      AC_SUBST([HAVE_CLOSEDIR])\n  HAVE_DECL_DIRFD=1;    AC_SUBST([HAVE_DECL_DIRFD])\n  HAVE_DECL_FDOPENDIR=1;AC_SUBST([HAVE_DECL_FDOPENDIR])\n  HAVE_FDOPENDIR=1;     AC_SUBST([HAVE_FDOPENDIR])\n  HAVE_SCANDIR=1;       AC_SUBST([HAVE_SCANDIR])\n  HAVE_ALPHASORT=1;     AC_SUBST([HAVE_ALPHASORT])\n  REPLACE_OPENDIR=0;    AC_SUBST([REPLACE_OPENDIR])\n  REPLACE_READDIR=0;    AC_SUBST([REPLACE_READDIR])\n  REPLACE_REWINDDIR=0;  AC_SUBST([REPLACE_REWINDDIR])\n  REPLACE_CLOSEDIR=0;   AC_SUBST([REPLACE_CLOSEDIR])\n  REPLACE_DIRFD=0;      AC_SUBST([REPLACE_DIRFD])\n  REPLACE_FDOPENDIR=0;  AC_SUBST([REPLACE_FDOPENDIR])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}