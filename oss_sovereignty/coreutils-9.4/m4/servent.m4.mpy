{
  "module_name": "servent.m4",
  "hash_id": "0b85f748f53a3803e85132deb67b6d2d656c99b04e8cda1a6463541118bc5110",
  "original_prompt": "Ingested from coreutils-9.4/m4/servent.m4",
  "human_readable_source": "# servent.m4 serial 4\ndnl Copyright (C) 2008, 2010-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_SERVENT],\n[\n  dnl Where are getservent(), setservent(), endservent(), getservbyname(),\n  dnl getservbyport() defined?\n  dnl Where are getprotoent(), setprotoent(), endprotoent(), getprotobyname(),\n  dnl getprotobynumber() defined?\n  dnl - On Solaris < 11.4, they are in libsocket. Ignore libxnet.\n  dnl - On Haiku, they are in libnetwork.\n  dnl - On BeOS, they are in libnet.\n  dnl - On native Windows, they are in ws2_32.dll.\n  dnl - Otherwise they are in libc.\n  AC_REQUIRE([gl_SYS_SOCKET_H])dnl for HAVE_SYS_SOCKET_H, HAVE_WINSOCK2_H\n  SERVENT_LIB=\n  gl_saved_libs=\"$LIBS\"\n  AC_SEARCH_LIBS([getservbyname], [socket network net],\n    [if test \"$ac_cv_search_getservbyname\" != \"none required\"; then\n       SERVENT_LIB=\"$ac_cv_search_getservbyname\"\n     fi])\n  LIBS=\"$gl_saved_libs\"\n  if test -z \"$SERVENT_LIB\"; then\n    AC_CHECK_FUNCS([getservbyname], , [\n      AC_CACHE_CHECK([for getservbyname in winsock2.h and -lws2_32],\n        [gl_cv_w32_getservbyname],\n        [gl_cv_w32_getservbyname=no\n         gl_save_LIBS=\"$LIBS\"\n         LIBS=\"$LIBS -lws2_32\"\n         AC_LINK_IFELSE(\n           [AC_LANG_PROGRAM(\n              [[\n#ifdef HAVE_WINSOCK2_H\n#include <winsock2.h>\n#endif\n#include <stddef.h>\n              ]],\n              [[getservbyname(NULL,NULL);]])],\n           [gl_cv_w32_getservbyname=yes])\n         LIBS=\"$gl_save_LIBS\"\n        ])\n      if test \"$gl_cv_w32_getservbyname\" = \"yes\"; then\n        SERVENT_LIB=\"-lws2_32\"\n      fi\n    ])\n  fi\n  AC_SUBST([SERVENT_LIB])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}