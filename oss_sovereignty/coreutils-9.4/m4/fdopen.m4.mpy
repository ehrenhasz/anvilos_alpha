{
  "module_name": "fdopen.m4",
  "hash_id": "8215258f3b106011fc80bc698391bd70214ff63a4c93857a82b6807fb6bf5fda",
  "original_prompt": "Ingested from coreutils-9.4/m4/fdopen.m4",
  "human_readable_source": "# fdopen.m4 serial 6\ndnl Copyright (C) 2011-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_FDOPEN],\n[\n  AC_REQUIRE([gl_STDIO_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  m4_ifdef([gl_MSVC_INVAL], [\n    AC_REQUIRE([gl_MSVC_INVAL])\n    if test $HAVE_MSVC_INVALID_PARAMETER_HANDLER = 1; then\n      REPLACE_FDOPEN=1\n    fi\n  ])\n  if test $REPLACE_FDOPEN = 0; then\n    dnl Test whether fdopen() sets errno when it fails due to a bad fd argument.\n    AC_CACHE_CHECK([whether fdopen sets errno], [gl_cv_func_fdopen_works],\n      [\n        AC_RUN_IFELSE(\n          [AC_LANG_SOURCE([[\n#include <stdio.h>\n#include <errno.h>\n]GL_MDA_DEFINES[\nint\nmain (void)\n{\n  FILE *fp;\n  errno = 0;\n  fp = fdopen (-1, \"r\");\n  if (fp == NULL && errno == 0)\n    return 1;\n  return 0;\n}]])],\n          [gl_cv_func_fdopen_works=yes],\n          [gl_cv_func_fdopen_works=no],\n          [case \"$host_os\" in\n             mingw* | windows*) gl_cv_func_fdopen_works=\"guessing no\" ;;\n             *)                 gl_cv_func_fdopen_works=\"guessing yes\" ;;\n           esac\n          ])\n      ])\n    case \"$gl_cv_func_fdopen_works\" in\n      *no) REPLACE_FDOPEN=1 ;;\n    esac\n  fi\n])\n\ndnl Prerequisites of lib/fdopen.c.\nAC_DEFUN([gl_PREREQ_FDOPEN], [])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}