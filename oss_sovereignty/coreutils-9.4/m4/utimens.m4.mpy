{
  "module_name": "utimens.m4",
  "hash_id": "ad9b1ea92b2bc7c4ef29eb707cd37a404129645352c0dd64aa52c6091a790e37",
  "original_prompt": "Ingested from coreutils-9.4/m4/utimens.m4",
  "human_readable_source": "dnl Copyright (C) 2003-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl serial 15\n\nAC_DEFUN([gl_UTIMENS],\n[\n  dnl Prerequisites of lib/utimens.c.\n  AC_REQUIRE([gl_FUNC_UTIMES])\n  AC_REQUIRE([gl_CHECK_TYPE_STRUCT_TIMESPEC])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  gl_CHECK_FUNCS_ANDROID([futimes], [[#include <sys/time.h>]])\n  gl_CHECK_FUNCS_ANDROID([futimesat], [[#include <sys/time.h>]])\n  gl_CHECK_FUNCS_ANDROID([lutimes], [[#include <sys/time.h>]])\n  gl_CHECK_FUNCS_ANDROID([futimens], [[#include <sys/stat.h>]])\n  gl_CHECK_FUNCS_ANDROID([utimensat], [[#include <sys/stat.h>]])\n\n  if test $ac_cv_func_futimens = no && test $ac_cv_func_futimesat = yes; then\n    dnl FreeBSD 8.0-rc2 mishandles futimesat(fd,NULL,time).  It is not\n    dnl standardized, but Solaris implemented it first and uses it as\n    dnl its only means to set fd time.\n    AC_CACHE_CHECK([whether futimesat handles NULL file],\n      [gl_cv_func_futimesat_works],\n      [touch conftest.file\n       AC_RUN_IFELSE([AC_LANG_PROGRAM([[\n#include <stddef.h>\n#include <sys/times.h>\n#include <fcntl.h>\n]GL_MDA_DEFINES],\n        [[int fd = open (\"conftest.file\", O_RDWR);\n          if (fd < 0) return 1;\n          if (futimesat (fd, NULL, NULL)) return 2;\n        ]])],\n        [gl_cv_func_futimesat_works=yes],\n        [gl_cv_func_futimesat_works=no],\n        [case \"$host_os\" in\n                            # Guess yes on Linux systems.\n           linux-* | linux) gl_cv_func_futimesat_works=\"guessing yes\" ;;\n                            # Guess yes on glibc systems.\n           *-gnu*)          gl_cv_func_futimesat_works=\"guessing yes\" ;;\n                            # If we don't know, obey --enable-cross-guesses.\n           *)               gl_cv_func_futimesat_works=\"$gl_cross_guess_normal\" ;;\n         esac\n        ])\n      rm -f conftest.file])\n    case \"$gl_cv_func_futimesat_works\" in\n      *yes) ;;\n      *)\n        AC_DEFINE([FUTIMESAT_NULL_BUG], [1],\n          [Define to 1 if futimesat mishandles a NULL file name.])\n        ;;\n    esac\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}