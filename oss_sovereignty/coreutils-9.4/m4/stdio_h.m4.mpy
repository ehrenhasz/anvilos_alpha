{
  "module_name": "stdio_h.m4",
  "hash_id": "3605b3d7fd3dded3f7043318d734b1e2146cde1c87722480ca695f609f2ead24",
  "original_prompt": "Ingested from coreutils-9.4/m4/stdio_h.m4",
  "human_readable_source": "# stdio_h.m4 serial 63\ndnl Copyright (C) 2007-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_STDIO_H_EARLY],\n[\n  dnl Defining __USE_MINGW_ANSI_STDIO to 1 must be done early, because\n  dnl the results of several configure tests depend on it: The tests\n  dnl   - checking whether snprintf returns a byte count as in C99...\n  dnl   - checking whether snprintf truncates the result as in C99...\n  dnl   - checking whether printf supports the 'F' directive...\n  dnl   - checking whether printf supports the grouping flag...\n  dnl   - checking whether printf supports the zero flag correctly...\n  dnl   - checking whether printf supports infinite 'double' arguments...\n  dnl   - checking whether printf supports large precisions...\n  dnl report 'yes' if __USE_MINGW_ANSI_STDIO is 1 but 'no' if\n  dnl __USE_MINGW_ANSI_STDIO is not set.\n  AH_VERBATIM([MINGW_ANSI_STDIO],\n[/* Use GNU style printf and scanf.  */\n#ifndef __USE_MINGW_ANSI_STDIO\n# undef __USE_MINGW_ANSI_STDIO\n#endif\n])\n  AC_DEFINE([__USE_MINGW_ANSI_STDIO])\n])\n\nAC_DEFUN_ONCE([gl_STDIO_H],\n[\n  AC_REQUIRE([gl_STDIO_H_DEFAULTS])\n  gl_NEXT_HEADERS([stdio.h])\n\n  dnl Determine whether __USE_MINGW_ANSI_STDIO makes printf and\n  dnl inttypes.h behave like gnu instead of system; we must give our\n  dnl printf wrapper the right attribute to match.\n  AC_CACHE_CHECK([which flavor of printf attribute matches inttypes macros],\n    [gl_cv_func_printf_attribute_flavor],\n    [AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n       #define __STDC_FORMAT_MACROS 1\n       #include <stdio.h>\n       #include <inttypes.h>\n       /* For non-mingw systems, compilation will trivially succeed.\n          For mingw, compilation will succeed for older mingw (system\n          printf, \"I64d\") and fail for newer mingw (gnu printf, \"lld\"). */\n       #if (defined _WIN32 && ! defined __CYGWIN__) && \\\n         (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 4))\n       extern char PRIdMAX_probe[sizeof PRIdMAX == sizeof \"I64d\" ? 1 : -1];\n       #endif\n      ]])], [gl_cv_func_printf_attribute_flavor=system],\n      [gl_cv_func_printf_attribute_flavor=gnu])])\n  if test \"$gl_cv_func_printf_attribute_flavor\" = gnu; then\n    AC_DEFINE([GNULIB_PRINTF_ATTRIBUTE_FLAVOR_GNU], [1],\n      [Define to 1 if printf and friends should be labeled with\n       attribute \"__gnu_printf__\" instead of \"__printf__\"])\n  fi\n\n  dnl For defining _PRINTF_NAN_LEN_MAX.\n  gl_MUSL_LIBC\n\n  dnl This ifdef is an optimization, to avoid performing a configure check whose\n  dnl result is not used. But it does not make the test of\n  dnl GNULIB_STDIO_H_NONBLOCKING or GNULIB_NONBLOCKING redundant.\n  m4_ifdef([gl_NONBLOCKING_IO], [\n    gl_NONBLOCKING_IO\n    if test $gl_cv_have_nonblocking != yes; then\n      REPLACE_STDIO_READ_FUNCS=1\n    fi\n  ])\n\n  dnl This ifdef is an optimization, to avoid performing a configure check whose\n  dnl result is not used. But it does not make the test of\n  dnl GNULIB_STDIO_H_SIGPIPE or GNULIB_SIGPIPE redundant.\n  m4_ifdef([gl_SIGNAL_SIGPIPE], [\n    gl_SIGNAL_SIGPIPE\n    if test $gl_cv_header_signal_h_SIGPIPE != yes; then\n      REPLACE_STDIO_WRITE_FUNCS=1\n    fi\n  ])\n  dnl This ifdef is an optimization, to avoid performing a configure check whose\n  dnl result is not used. But it does not make the test of\n  dnl GNULIB_STDIO_H_NONBLOCKING or GNULIB_NONBLOCKING redundant.\n  m4_ifdef([gl_NONBLOCKING_IO], [\n    gl_NONBLOCKING_IO\n    if test $gl_cv_have_nonblocking != yes; then\n      REPLACE_STDIO_WRITE_FUNCS=1\n    fi\n  ])\n\n  dnl Check for declarations of anything we want to poison if the\n  dnl corresponding gnulib module is not in use, and which is not\n  dnl guaranteed by both C89 and C11.\n  gl_WARN_ON_USE_PREPARE([[#include <stdio.h>\n    ]], [dprintf fpurge fseeko ftello getdelim getline gets pclose popen\n    renameat snprintf tmpfile vdprintf vsnprintf])\n\n  AC_REQUIRE([AC_C_RESTRICT])\n\n  AC_CHECK_DECLS_ONCE([fcloseall])\n  if test $ac_cv_have_decl_fcloseall = no; then\n    HAVE_DECL_FCLOSEALL=0\n  fi\n\n  AC_CHECK_DECLS_ONCE([getw])\n  if test $ac_cv_have_decl_getw = no; then\n    HAVE_DECL_GETW=0\n  fi\n\n  AC_CHECK_DECLS_ONCE([putw])\n  if test $ac_cv_have_decl_putw = no; then\n    HAVE_DECL_PUTW=0\n  fi\n])\n\n# gl_STDIO_MODULE_INDICATOR([modulename])\n# sets the shell variable that indicates the presence of the given module\n# to a C preprocessor expression that will evaluate to 1.\n# This macro invocation must not occur in macros that are AC_REQUIREd.\nAC_DEFUN([gl_STDIO_MODULE_INDICATOR],\n[\n  dnl Ensure to expand the default settings once only.\n  gl_STDIO_H_REQUIRE_DEFAULTS\n  gl_MODULE_INDICATOR_SET_VARIABLE([$1])\n  dnl Define it also as a C macro, for the benefit of the unit tests.\n  gl_MODULE_INDICATOR_FOR_TESTS([$1])\n])\n\n# Initializes the default values for AC_SUBSTed shell variables.\n# This macro must not be AC_REQUIREd.  It must only be invoked, and only\n# outside of macros or in macros that are not AC_REQUIREd.\nAC_DEFUN([gl_STDIO_H_REQUIRE_DEFAULTS],\n[\n  m4_defun(GL_MODULE_INDICATOR_PREFIX[_STDIO_H_MODULE_INDICATOR_DEFAULTS], [\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_DPRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FCLOSE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FDOPEN])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FFLUSH])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FGETC])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FGETS])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FOPEN])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FOPEN_GNU])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FPRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FPRINTF_POSIX])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FPURGE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FPUTC])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FPUTS])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FREAD])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FREOPEN])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FSCANF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FSEEK])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FSEEKO])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FTELL])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FTELLO])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_FWRITE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_GETC])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_GETCHAR])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_GETDELIM])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_GETLINE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_OBSTACK_PRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_OBSTACK_PRINTF_POSIX])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_PCLOSE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_PERROR])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_POPEN])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_PRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_PRINTF_POSIX])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_PUTC])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_PUTCHAR])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_PUTS])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_REMOVE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_RENAME])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_RENAMEAT])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_SCANF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_SNPRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_SPRINTF_POSIX])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_STDIO_H_NONBLOCKING])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_STDIO_H_SIGPIPE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_TMPFILE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VASPRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VFSCANF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VSCANF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VDPRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VFPRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VFPRINTF_POSIX])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VPRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VPRINTF_POSIX])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VSNPRINTF])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_VSPRINTF_POSIX])\n    dnl Support Microsoft deprecated alias function names by default.\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_MDA_FCLOSEALL], [1])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_MDA_FDOPEN], [1])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_MDA_FILENO], [1])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_MDA_GETW], [1])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_MDA_PUTW], [1])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_MDA_TEMPNAM], [1])\n  ])\n  m4_require(GL_MODULE_INDICATOR_PREFIX[_STDIO_H_MODULE_INDICATOR_DEFAULTS])\n  AC_REQUIRE([gl_STDIO_H_DEFAULTS])\n])\n\nAC_DEFUN([gl_STDIO_H_DEFAULTS],\n[\n  dnl Assume proper GNU behavior unless another module says otherwise.\n  HAVE_DECL_FCLOSEALL=1;         AC_SUBST([HAVE_DECL_FCLOSEALL])\n  HAVE_DECL_FPURGE=1;            AC_SUBST([HAVE_DECL_FPURGE])\n  HAVE_DECL_FSEEKO=1;            AC_SUBST([HAVE_DECL_FSEEKO])\n  HAVE_DECL_FTELLO=1;            AC_SUBST([HAVE_DECL_FTELLO])\n  HAVE_DECL_GETDELIM=1;          AC_SUBST([HAVE_DECL_GETDELIM])\n  HAVE_DECL_GETLINE=1;           AC_SUBST([HAVE_DECL_GETLINE])\n  HAVE_DECL_GETW=1;              AC_SUBST([HAVE_DECL_GETW])\n  HAVE_DECL_OBSTACK_PRINTF=1;    AC_SUBST([HAVE_DECL_OBSTACK_PRINTF])\n  HAVE_DECL_PUTW=1;              AC_SUBST([HAVE_DECL_PUTW])\n  HAVE_DECL_SNPRINTF=1;          AC_SUBST([HAVE_DECL_SNPRINTF])\n  HAVE_DECL_VSNPRINTF=1;         AC_SUBST([HAVE_DECL_VSNPRINTF])\n  HAVE_DPRINTF=1;                AC_SUBST([HAVE_DPRINTF])\n  HAVE_FSEEKO=1;                 AC_SUBST([HAVE_FSEEKO])\n  HAVE_FTELLO=1;                 AC_SUBST([HAVE_FTELLO])\n  HAVE_PCLOSE=1;                 AC_SUBST([HAVE_PCLOSE])\n  HAVE_POPEN=1;                  AC_SUBST([HAVE_POPEN])\n  HAVE_RENAMEAT=1;               AC_SUBST([HAVE_RENAMEAT])\n  HAVE_VASPRINTF=1;              AC_SUBST([HAVE_VASPRINTF])\n  HAVE_VDPRINTF=1;               AC_SUBST([HAVE_VDPRINTF])\n  REPLACE_DPRINTF=0;             AC_SUBST([REPLACE_DPRINTF])\n  REPLACE_FCLOSE=0;              AC_SUBST([REPLACE_FCLOSE])\n  REPLACE_FDOPEN=0;              AC_SUBST([REPLACE_FDOPEN])\n  REPLACE_FFLUSH=0;              AC_SUBST([REPLACE_FFLUSH])\n  REPLACE_FOPEN=0;               AC_SUBST([REPLACE_FOPEN])\n  REPLACE_FOPEN_FOR_FOPEN_GNU=0; AC_SUBST([REPLACE_FOPEN_FOR_FOPEN_GNU])\n  REPLACE_FPRINTF=0;             AC_SUBST([REPLACE_FPRINTF])\n  REPLACE_FPURGE=0;              AC_SUBST([REPLACE_FPURGE])\n  REPLACE_FREOPEN=0;             AC_SUBST([REPLACE_FREOPEN])\n  REPLACE_FSEEK=0;               AC_SUBST([REPLACE_FSEEK])\n  REPLACE_FSEEKO=0;              AC_SUBST([REPLACE_FSEEKO])\n  REPLACE_FTELL=0;               AC_SUBST([REPLACE_FTELL])\n  REPLACE_FTELLO=0;              AC_SUBST([REPLACE_FTELLO])\n  REPLACE_GETDELIM=0;            AC_SUBST([REPLACE_GETDELIM])\n  REPLACE_GETLINE=0;             AC_SUBST([REPLACE_GETLINE])\n  REPLACE_OBSTACK_PRINTF=0;      AC_SUBST([REPLACE_OBSTACK_PRINTF])\n  REPLACE_PERROR=0;              AC_SUBST([REPLACE_PERROR])\n  REPLACE_POPEN=0;               AC_SUBST([REPLACE_POPEN])\n  REPLACE_PRINTF=0;              AC_SUBST([REPLACE_PRINTF])\n  REPLACE_REMOVE=0;              AC_SUBST([REPLACE_REMOVE])\n  REPLACE_RENAME=0;              AC_SUBST([REPLACE_RENAME])\n  REPLACE_RENAMEAT=0;            AC_SUBST([REPLACE_RENAMEAT])\n  REPLACE_SNPRINTF=0;            AC_SUBST([REPLACE_SNPRINTF])\n  REPLACE_SPRINTF=0;             AC_SUBST([REPLACE_SPRINTF])\n  REPLACE_STDIO_READ_FUNCS=0;    AC_SUBST([REPLACE_STDIO_READ_FUNCS])\n  REPLACE_STDIO_WRITE_FUNCS=0;   AC_SUBST([REPLACE_STDIO_WRITE_FUNCS])\n  REPLACE_TMPFILE=0;             AC_SUBST([REPLACE_TMPFILE])\n  REPLACE_VASPRINTF=0;           AC_SUBST([REPLACE_VASPRINTF])\n  REPLACE_VDPRINTF=0;            AC_SUBST([REPLACE_VDPRINTF])\n  REPLACE_VFPRINTF=0;            AC_SUBST([REPLACE_VFPRINTF])\n  REPLACE_VPRINTF=0;             AC_SUBST([REPLACE_VPRINTF])\n  REPLACE_VSNPRINTF=0;           AC_SUBST([REPLACE_VSNPRINTF])\n  REPLACE_VSPRINTF=0;            AC_SUBST([REPLACE_VSPRINTF])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}