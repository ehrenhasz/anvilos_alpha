{
  "module_name": "multiarch.m4",
  "hash_id": "45e0985f28380921974a7c03c21fbda0fea2d5eda3ab8ab95ade3c48a5444b2c",
  "original_prompt": "Ingested from coreutils-9.4/m4/multiarch.m4",
  "human_readable_source": "# multiarch.m4 serial 9\ndnl Copyright (C) 2008-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\n# Determine whether the compiler is or may be producing universal binaries.\n#\n# On Mac OS X 10.5 and later systems, the user can create libraries and\n# executables that work on multiple system types--known as \"fat\" or\n# \"universal\" binaries--by specifying multiple '-arch' options to the\n# compiler but only a single '-arch' option to the preprocessor.  Like\n# this:\n#\n#     ./configure CC=\"gcc -arch i386 -arch x86_64 -arch ppc -arch ppc64\" \\\n#                 CXX=\"g++ -arch i386 -arch x86_64 -arch ppc -arch ppc64\" \\\n#                 CPP=\"gcc -E\" CXXCPP=\"g++ -E\"\n#\n# Detect this situation and set APPLE_UNIVERSAL_BUILD accordingly.\n\nAC_DEFUN_ONCE([gl_MULTIARCH],\n[\n  dnl Code similar to autoconf-2.63 AC_C_BIGENDIAN.\n  AC_CACHE_CHECK([whether the compiler produces multi-arch binaries],\n    [gl_cv_c_multiarch],\n    [gl_cv_c_multiarch=no\n     AC_COMPILE_IFELSE(\n       [AC_LANG_SOURCE(\n         [[#ifndef __APPLE_CC__\n            not a universal capable compiler\n           #endif\n           typedef int dummy;\n         ]])],\n       [\n        dnl Check for potential -arch flags.  It is not universal unless\n        dnl there are at least two -arch flags with different values.\n        arch=\n        prev=\n        for word in ${CC} ${CFLAGS} ${CPPFLAGS} ${LDFLAGS}; do\n          if test -n \"$prev\"; then\n            case $word in\n              i?86 | x86_64 | ppc | ppc64 | arm | arm64)\n                if test -z \"$arch\" || test \"$arch\" = \"$word\"; then\n                  arch=\"$word\"\n                else\n                  gl_cv_c_multiarch=yes\n                fi\n                ;;\n            esac\n            prev=\n          else\n            if test \"x$word\" = \"x-arch\"; then\n              prev=arch\n            fi\n          fi\n        done\n       ])\n    ])\n  if test $gl_cv_c_multiarch = yes; then\n    APPLE_UNIVERSAL_BUILD=1\n  else\n    APPLE_UNIVERSAL_BUILD=0\n  fi\n  AC_SUBST([APPLE_UNIVERSAL_BUILD])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}