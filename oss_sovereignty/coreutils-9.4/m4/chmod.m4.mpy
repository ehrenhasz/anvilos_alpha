{
  "module_name": "chmod.m4",
  "hash_id": "ec074591d0d9006a230048a1f349aa39bfa2185623bb50ee3330669e6bf372dc",
  "original_prompt": "Ingested from coreutils-9.4/m4/chmod.m4",
  "human_readable_source": "# chmod.m4 serial 3\ndnl Copyright (C) 2004-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl From Bruno Haible.\n\nAC_DEFUN([gl_FUNC_CHMOD],\n[\n  AC_REQUIRE([gl_SYS_STAT_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_CACHE_CHECK([whether chmod works],\n    [gl_cv_func_chmod_works],\n    [AC_RUN_IFELSE(\n       [AC_LANG_PROGRAM(\n          [\n            AC_INCLUDES_DEFAULT[\n            #if defined _WIN32 && !defined __CYGWIN__\n             #include <io.h>\n            #endif\n            #include <errno.h>\n            #include <fcntl.h>\n            #ifndef S_IRUSR\n             #define S_IRUSR 0400\n            #endif\n            #ifndef S_IWUSR\n             #define S_IWUSR 0200\n            #endif\n            #ifndef S_IRWXU\n             #define S_IRWXU 0700\n            #endif\n            #ifndef S_IRWXG\n             #define S_IRWXG 0070\n            #endif\n            #ifndef S_IRWXO\n             #define S_IRWXO 0007\n            #endif\n          ]GL_MDA_DEFINES],\n          [[\n            int permissive = S_IRWXU | S_IRWXG | S_IRWXO;\n            int desired = S_IRUSR | S_IWUSR;\n            int result = 0;\n            #define file \"conftest.chmod\"\n            if (open (file, O_CREAT | O_WRONLY | O_TRUNC, permissive) < 0)\n              return 1;\n            /* Test whether chmod rejects a trailing slash on a non-directory,\n               with error ENOTDIR.\n               This test fails on AIX 7.2, IRIX 6.5 (no error) and\n               native Windows (error EINVAL).  */\n            errno = 0;\n            if (chmod (file \"/\", desired) == 0)\n              result |= 2;\n            else if (errno != ENOTDIR)\n              result |= 4;\n            return result;\n          ]])],\n       [gl_cv_func_chmod_works=yes],\n       [gl_cv_func_chmod_works=no],\n       [case \"$host_os\" in\n          # Guess no on AIX, IRIX, native Windows.\n          aix* | irix* | mingw* | windows*)\n            gl_cv_func_chmod_works=\"guessing no\" ;;\n          # Guess yes on glibc, musl libc, macOS, FreeBSD, NetBSD, OpenBSD, Solaris, Haiku, Cygwin.\n          *-gnu* | gnu* | *-musl* | darwin* | freebsd* | midnightbsd* | netbsd* | openbsd* | solaris* | haiku* | cygwin*)\n            gl_cv_func_chmod_works=\"guessing yes\" ;;\n          # Guess yes on systems that emulate the Linux system calls.\n          midipix*)\n            gl_cv_func_chmod_works=\"guessing yes\" ;;\n          # If we don't know, obey --enable-cross-guesses.\n          *)\n            gl_cv_func_chmod_works=\"$gl_cross_guess_normal\" ;;\n        esac\n       ])\n     rm -f conftest.chmod\n    ])\n  case \"$gl_cv_func_chmod_works\" in\n    *yes) ;;\n    *) REPLACE_CHMOD=1 ;;\n  esac\n])\n\n# Prerequisites of lib/chmod.c.\nAC_DEFUN([gl_PREREQ_CHMOD],\n[\n  :\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}