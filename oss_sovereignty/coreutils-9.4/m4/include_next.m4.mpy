{
  "module_name": "include_next.m4",
  "hash_id": "33792a63fadd7f25d594d05a5e6932d8d58bc12a782b4ad51314bbae5e6104e9",
  "original_prompt": "Ingested from coreutils-9.4/m4/include_next.m4",
  "human_readable_source": "# include_next.m4 serial 26\ndnl Copyright (C) 2006-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl From Paul Eggert and Derek Price.\n\ndnl Sets INCLUDE_NEXT, INCLUDE_NEXT_AS_FIRST_DIRECTIVE, PRAGMA_SYSTEM_HEADER,\ndnl and PRAGMA_COLUMNS.\ndnl\ndnl INCLUDE_NEXT expands to 'include_next' if the compiler supports it, or to\ndnl 'include' otherwise.\ndnl\ndnl INCLUDE_NEXT_AS_FIRST_DIRECTIVE expands to 'include_next' if the compiler\ndnl supports it in the special case that it is the first include directive in\ndnl the given file, or to 'include' otherwise.\ndnl\ndnl PRAGMA_SYSTEM_HEADER can be used in files that contain #include_next,\ndnl so as to avoid GCC warnings when the gcc option -pedantic is used.\ndnl '#pragma GCC system_header' has the same effect as if the file was found\ndnl through the include search path specified with '-isystem' options (as\ndnl opposed to the search path specified with '-I' options). Namely, gcc\ndnl does not warn about some things, and on some systems (Solaris and Interix)\ndnl __STDC__ evaluates to 0 instead of to 1. The latter is an undesired side\ndnl effect; we are therefore careful to use 'defined __STDC__' or '1' instead\ndnl of plain '__STDC__'.\ndnl\ndnl PRAGMA_COLUMNS can be used in files that override system header files, so\ndnl as to avoid compilation errors on HP NonStop systems when the gnulib file\ndnl is included by a system header file that does a \"#pragma COLUMNS 80\" (which\ndnl has the effect of truncating the lines of that file and all files that it\ndnl includes to 80 columns) and the gnulib file has lines longer than 80\ndnl columns.\n\nAC_DEFUN([gl_INCLUDE_NEXT],\n[\n  AC_LANG_PREPROC_REQUIRE()\n  AC_CACHE_CHECK([whether the preprocessor supports include_next],\n    [gl_cv_have_include_next],\n    [rm -rf conftestd1a conftestd1b conftestd2\n     mkdir conftestd1a conftestd1b conftestd2\n     dnl IBM C 9.0, 10.1 (original versions, prior to the 2009-01 updates) on\n     dnl AIX 6.1 support include_next when used as first preprocessor directive\n     dnl in a file, but not when preceded by another include directive. Check\n     dnl for this bug by including <stdio.h>.\n     dnl Additionally, with this same compiler, include_next is a no-op when\n     dnl used in a header file that was included by specifying its absolute\n     dnl file name. Despite these two bugs, include_next is used in the\n     dnl compiler's <math.h>. By virtue of the second bug, we need to use\n     dnl include_next as well in this case.\n     cat <<EOF > conftestd1a/conftest.h\n#define DEFINED_IN_CONFTESTD1\n#include_next <conftest.h>\n#ifdef DEFINED_IN_CONFTESTD2\nint foo;\n#else\n#error \"include_next doesn't work\"\n#endif\nEOF\n     cat <<EOF > conftestd1b/conftest.h\n#define DEFINED_IN_CONFTESTD1\n#include <stdio.h>\n#include_next <conftest.h>\n#ifdef DEFINED_IN_CONFTESTD2\nint foo;\n#else\n#error \"include_next doesn't work\"\n#endif\nEOF\n     cat <<EOF > conftestd2/conftest.h\n#ifndef DEFINED_IN_CONFTESTD1\n#error \"include_next test doesn't work\"\n#endif\n#define DEFINED_IN_CONFTESTD2\nEOF\n     gl_save_CPPFLAGS=\"$CPPFLAGS\"\n     CPPFLAGS=\"$gl_save_CPPFLAGS -Iconftestd1b -Iconftestd2\"\ndnl We intentionally avoid using AC_LANG_SOURCE here.\n     AC_COMPILE_IFELSE([AC_LANG_DEFINES_PROVIDED[#include <conftest.h>]],\n       [gl_cv_have_include_next=yes],\n       [CPPFLAGS=\"$gl_save_CPPFLAGS -Iconftestd1a -Iconftestd2\"\n        AC_COMPILE_IFELSE([AC_LANG_DEFINES_PROVIDED[#include <conftest.h>]],\n          [gl_cv_have_include_next=buggy],\n          [gl_cv_have_include_next=no])\n       ])\n     CPPFLAGS=\"$gl_save_CPPFLAGS\"\n     rm -rf conftestd1a conftestd1b conftestd2\n    ])\n  PRAGMA_SYSTEM_HEADER=\n  if test $gl_cv_have_include_next = yes; then\n    INCLUDE_NEXT=include_next\n    INCLUDE_NEXT_AS_FIRST_DIRECTIVE=include_next\n    if test -n \"$GCC\"; then\n      PRAGMA_SYSTEM_HEADER='#pragma GCC system_header'\n    fi\n  else\n    if test $gl_cv_have_include_next = buggy; then\n      INCLUDE_NEXT=include\n      INCLUDE_NEXT_AS_FIRST_DIRECTIVE=include_next\n    else\n      INCLUDE_NEXT=include\n      INCLUDE_NEXT_AS_FIRST_DIRECTIVE=include\n    fi\n  fi\n  AC_SUBST([INCLUDE_NEXT])\n  AC_SUBST([INCLUDE_NEXT_AS_FIRST_DIRECTIVE])\n  AC_SUBST([PRAGMA_SYSTEM_HEADER])\n\n  dnl HP NonStop systems, which define __TANDEM, limit the line length\n  dnl after including some system header files.\n  AC_CACHE_CHECK([whether source code line length is unlimited],\n    [gl_cv_source_line_length_unlimited],\n    [AC_EGREP_CPP([choke me],\n       [\n#ifdef __TANDEM\nchoke me\n#endif\n       ],\n       [gl_cv_source_line_length_unlimited=no],\n       [gl_cv_source_line_length_unlimited=yes])\n    ])\n  if test $gl_cv_source_line_length_unlimited = no; then\n    PRAGMA_COLUMNS=\"#pragma COLUMNS 10000\"\n  else\n    PRAGMA_COLUMNS=\n  fi\n  AC_SUBST([PRAGMA_COLUMNS])\n])\n\n# gl_CHECK_NEXT_HEADERS(HEADER1 HEADER2 ...)\n# ------------------------------------------\n# For each arg foo.h, if #include_next works, define NEXT_FOO_H to be\n# '<foo.h>'; otherwise define it to be\n# '\"///usr/include/foo.h\"', or whatever other absolute file name is suitable.\n# Also, if #include_next works as first preprocessing directive in a file,\n# define NEXT_AS_FIRST_DIRECTIVE_FOO_H to be '<foo.h>'; otherwise define it to\n# be\n# '\"///usr/include/foo.h\"', or whatever other absolute file name is suitable.\n# That way, a header file with the following line:\n#       #@INCLUDE_NEXT@ @NEXT_FOO_H@\n# or\n#       #@INCLUDE_NEXT_AS_FIRST_DIRECTIVE@ @NEXT_AS_FIRST_DIRECTIVE_FOO_H@\n# behaves (after sed substitution) as if it contained\n#       #include_next <foo.h>\n# even if the compiler does not support include_next.\n# The three \"///\" are to pacify Sun C 5.8, which otherwise would say\n# \"warning: #include of /usr/include/... may be non-portable\".\n# Use '\"\"', not '<>', so that the /// cannot be confused with a C99 comment.\n# Note: This macro assumes that the header file is not empty after\n# preprocessing, i.e. it does not only define preprocessor macros but also\n# provides some type/enum definitions or function/variable declarations.\n#\n# This macro also checks whether each header exists, by invoking\n# AC_CHECK_HEADERS_ONCE or AC_CHECK_HEADERS on each argument.\nAC_DEFUN([gl_CHECK_NEXT_HEADERS],\n[\n  gl_NEXT_HEADERS_INTERNAL([$1], [check])\n])\n\n# gl_NEXT_HEADERS(HEADER1 HEADER2 ...)\n# ------------------------------------\n# Like gl_CHECK_NEXT_HEADERS, except do not check whether the headers exist.\n# This is suitable for headers like <stddef.h> that are standardized by C89\n# and therefore can be assumed to exist.\nAC_DEFUN([gl_NEXT_HEADERS],\n[\n  gl_NEXT_HEADERS_INTERNAL([$1], [assume])\n])\n\n# The guts of gl_CHECK_NEXT_HEADERS and gl_NEXT_HEADERS.\nAC_DEFUN([gl_NEXT_HEADERS_INTERNAL],\n[\n  AC_REQUIRE([gl_INCLUDE_NEXT])\n  AC_REQUIRE([AC_CANONICAL_HOST])\n\n  m4_if([$2], [check],\n    [AC_CHECK_HEADERS_ONCE([$1])\n    ])\n\n  m4_foreach_w([gl_HEADER_NAME], [$1],\n    [AS_VAR_PUSHDEF([gl_next_header],\n                    [gl_cv_next_]m4_defn([gl_HEADER_NAME]))\n     if test $gl_cv_have_include_next = yes; then\n       AS_VAR_SET([gl_next_header], ['<'gl_HEADER_NAME'>'])\n     else\n       AC_CACHE_CHECK(\n         [absolute name of <]m4_defn([gl_HEADER_NAME])[>],\n         [gl_next_header],\n         [m4_if([$2], [check],\n            [AS_VAR_PUSHDEF([gl_header_exists],\n                            [ac_cv_header_]m4_defn([gl_HEADER_NAME]))\n             if test AS_VAR_GET([gl_header_exists]) = yes; then\n             AS_VAR_POPDEF([gl_header_exists])\n            ])\n          gl_ABSOLUTE_HEADER_ONE(gl_HEADER_NAME)\n          AS_VAR_COPY([gl_header], [gl_cv_absolute_]AS_TR_SH(gl_HEADER_NAME))\n          AS_VAR_SET([gl_next_header], ['\"'$gl_header'\"'])\n          m4_if([$2], [check],\n            [else\n               AS_VAR_SET([gl_next_header], ['<'gl_HEADER_NAME'>'])\n             fi\n            ])\n         ])\n     fi\n     AC_SUBST(\n       AS_TR_CPP([NEXT_]m4_defn([gl_HEADER_NAME])),\n       [AS_VAR_GET([gl_next_header])])\n     if test $gl_cv_have_include_next = yes || test $gl_cv_have_include_next = buggy; then\n       # INCLUDE_NEXT_AS_FIRST_DIRECTIVE='include_next'\n       gl_next_as_first_directive='<'gl_HEADER_NAME'>'\n     else\n       # INCLUDE_NEXT_AS_FIRST_DIRECTIVE='include'\n       gl_next_as_first_directive=AS_VAR_GET([gl_next_header])\n     fi\n     AC_SUBST(\n       AS_TR_CPP([NEXT_AS_FIRST_DIRECTIVE_]m4_defn([gl_HEADER_NAME])),\n       [$gl_next_as_first_directive])\n     AS_VAR_POPDEF([gl_next_header])])\n])\n\n# Autoconf 2.68 added warnings for our use of AC_COMPILE_IFELSE;\n# this fallback is safe for all earlier autoconf versions.\nm4_define_default([AC_LANG_DEFINES_PROVIDED])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}