{
  "module_name": "stdarg.m4",
  "hash_id": "0567bf4fd8b173a95624c7058e3ad234018fed7a05994978e3d8df08e5bea779",
  "original_prompt": "Ingested from coreutils-9.4/m4/stdarg.m4",
  "human_readable_source": "# stdarg.m4 serial 8\ndnl Copyright (C) 2006, 2008-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl From Bruno Haible.\ndnl Provide a working va_copy in combination with <stdarg.h>.\n\nAC_DEFUN([gl_STDARG_H],\n[\n  GL_GENERATE_STDARG_H=false\n  NEXT_STDARG_H='<stdarg.h>'\n  AC_CACHE_CHECK([for va_copy],\n    [gl_cv_func_va_copy],\n    [AC_COMPILE_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <stdarg.h>]],\n          [[\n#ifndef va_copy\nvoid (*func) (va_list, va_list) = va_copy;\n#endif\n          ]])],\n       [gl_cv_func_va_copy=yes],\n       [gl_cv_func_va_copy=no])\n    ])\n  if test $gl_cv_func_va_copy = no; then\n    dnl Provide a substitute.\n    dnl Usually a simple definition in <config.h> is enough. Not so on AIX 5\n    dnl with some versions of the /usr/vac/bin/cc compiler. It has an <stdarg.h>\n    dnl which does '#undef va_copy', leading to a missing va_copy symbol. For\n    dnl this platform, we use an <stdarg.h> substitute. But we cannot use this\n    dnl approach on other platforms, because <stdarg.h> often defines only\n    dnl preprocessor macros and gl_ABSOLUTE_HEADER, gl_CHECK_NEXT_HEADERS do\n    dnl not work in this situation.\n    AC_EGREP_CPP([vaccine],\n      [#if defined _AIX && !defined __GNUC__\n        AIX vaccine\n       #endif\n      ], [gl_aixcc=yes], [gl_aixcc=no])\n    if test $gl_aixcc = yes; then\n      dnl Provide a substitute <stdarg.h> file.\n      GL_GENERATE_STDARG_H=true\n      gl_NEXT_HEADERS([stdarg.h])\n      dnl Fallback for the case when <stdarg.h> contains only macro definitions.\n      if test \"$gl_cv_next_stdarg_h\" = '\"\"'; then\n        gl_cv_next_stdarg_h='\"///usr/include/stdarg.h\"'\n        NEXT_STDARG_H=\"$gl_cv_next_stdarg_h\"\n      fi\n    else\n      dnl Provide a substitute in <config.h>, either __va_copy or as a simple\n      dnl assignment.\n      gl_CACHE_VAL_SILENT([gl_cv_func___va_copy], [\n        AC_COMPILE_IFELSE(\n          [AC_LANG_PROGRAM(\n             [[#include <stdarg.h>]],\n             [[\n#ifndef __va_copy\nerror, bail out\n#endif\n             ]])],\n          [gl_cv_func___va_copy=yes],\n          [gl_cv_func___va_copy=no])])\n      if test $gl_cv_func___va_copy = yes; then\n        AC_DEFINE([va_copy], [__va_copy],\n          [Define as a macro for copying va_list variables.])\n      else\n        AH_VERBATIM([gl_VA_COPY], [/* A replacement for va_copy, if needed.  */\n#define gl_va_copy(a,b) ((a) = (b))])\n        AC_DEFINE([va_copy], [gl_va_copy],\n          [Define as a macro for copying va_list variables.])\n      fi\n    fi\n  fi\n  AC_SUBST([NEXT_STDARG_H])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}