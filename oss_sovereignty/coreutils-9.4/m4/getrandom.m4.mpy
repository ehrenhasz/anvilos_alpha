{
  "module_name": "getrandom.m4",
  "hash_id": "8666ba3662a5d2a56eb686ac860637949231eea126691bc9b44ac34f4d807494",
  "original_prompt": "Ingested from coreutils-9.4/m4/getrandom.m4",
  "human_readable_source": "# getrandom.m4 serial 12\ndnl Copyright 2020-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl Written by Paul Eggert.\n\nAC_DEFUN([gl_FUNC_GETRANDOM],\n[\n  AC_REQUIRE([gl_SYS_RANDOM_H_DEFAULTS])\n  gl_CHECK_FUNCS_ANDROID([getrandom],\n    [[/* Additional includes are needed before <sys/random.h> on uClibc\n         and Mac OS X.  */\n      #include <sys/types.h>\n      #include <stdlib.h>\n      #include <sys/random.h>\n    ]])\n  if test \"$ac_cv_func_getrandom\" != yes; then\n    HAVE_GETRANDOM=0\n    case \"$gl_cv_onwards_func_getrandom\" in\n      future*) REPLACE_GETRANDOM=1 ;;\n    esac\n  else\n    dnl On Solaris 11.4 the return type is 'int', not 'ssize_t'.\n    AC_CACHE_CHECK([whether getrandom is compatible with its GNU+BSD signature],\n      [gl_cv_func_getrandom_ok],\n      [AC_COMPILE_IFELSE(\n         [AC_LANG_PROGRAM(\n            [[/* Additional includes are needed before <sys/random.h> on uClibc\n                 and Mac OS X.  */\n              #include <sys/types.h>\n              #include <stdlib.h>\n              #include <sys/random.h>\n              ssize_t getrandom (void *, size_t, unsigned int);\n            ]],\n            [[]])\n         ],\n         [gl_cv_func_getrandom_ok=yes],\n         [gl_cv_func_getrandom_ok=no])\n      ])\n    if test $gl_cv_func_getrandom_ok = no; then\n      REPLACE_GETRANDOM=1\n    fi\n  fi\n\n  case \"$host_os\" in\n    mingw* | windows*)\n      AC_CHECK_HEADERS([bcrypt.h], [], [],\n        [[#include <windows.h>\n        ]])\n      AC_CACHE_CHECK([whether the bcrypt library is guaranteed to be present],\n        [gl_cv_lib_assume_bcrypt],\n        [AC_COMPILE_IFELSE(\n           [AC_LANG_PROGRAM(\n              [[#include <windows.h>]],\n              [[#if !(_WIN32_WINNT >= _WIN32_WINNT_WIN7)\n                  cannot assume it\n                #endif\n              ]])\n           ],\n           [gl_cv_lib_assume_bcrypt=yes],\n           [gl_cv_lib_assume_bcrypt=no])\n        ])\n      if test $gl_cv_lib_assume_bcrypt = yes; then\n        AC_DEFINE([HAVE_LIB_BCRYPT], [1],\n          [Define to 1 if the bcrypt library is guaranteed to be present.])\n        GETRANDOM_LIB='-lbcrypt'\n      else\n        GETRANDOM_LIB='-ladvapi32'\n      fi\n      ;;\n    *)\n      GETRANDOM_LIB= ;;\n  esac\n  AC_SUBST([GETRANDOM_LIB])\n  dnl For backward compatibility.\n  LIB_GETRANDOM=\"$GETRANDOM_LIB\"\n  AC_SUBST([LIB_GETRANDOM])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}