{
  "module_name": "getprogname.m4",
  "hash_id": "d41866092c57c5b5a59d2473e05d9b983eba82fb6f509ab977878f3ffe878bc1",
  "original_prompt": "Ingested from coreutils-9.4/m4/getprogname.m4",
  "human_readable_source": "# getprogname.m4 - check for getprogname or replacements for it\n\n# Copyright (C) 2016-2023 Free Software Foundation, Inc.\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\n# serial 8\n\nAC_DEFUN([gl_FUNC_GETPROGNAME],\n[\n  AC_REQUIRE([gl_STDLIB_H_DEFAULTS])\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n  gl_CHECK_FUNCS_ANDROID([getprogname], [[#include <stdlib.h>]])\n  if test $ac_cv_func_getprogname = no; then\n    HAVE_GETPROGNAME=0\n    case \"$gl_cv_onwards_func_getprogname\" in\n      future*) REPLACE_GETPROGNAME=1 ;;\n    esac\n  fi\n  AC_CHECK_DECLS([program_invocation_name],\n    [],\n    [HAVE_DECL_PROGRAM_INVOCATION_NAME=0],\n    [[#include <errno.h>]])\n])\n\nAC_DEFUN([gl_PREREQ_GETPROGNAME],\n[\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n  AC_CHECK_FUNCS_ONCE([getexecname])\n  ac_found=0\n  AC_CHECK_DECLS([program_invocation_name], [ac_found=1], [],\n    [#include <errno.h>])\n  AC_CHECK_DECLS([program_invocation_short_name], [ac_found=1], [],\n    [#include <errno.h>])\n  AC_CHECK_DECLS([__argv], [ac_found=1], [], [#include <stdlib.h>])\n\n  # Incur the cost of this test only if none of the above worked.\n  if test $ac_found = 0; then\n    # On OpenBSD 5.1, using the global __progname variable appears to be\n    # the only way to implement getprogname.\n    AC_CACHE_CHECK([whether __progname is defined in default libraries],\n      [gl_cv_var___progname],\n      [\n        gl_cv_var___progname=\n        AC_LINK_IFELSE(\n          [AC_LANG_PROGRAM(\n            [[extern char *__progname;]],\n            [[return *__progname;]]\n          )],\n          [gl_cv_var___progname=yes]\n        )\n      ]\n    )\n    if test \"$gl_cv_var___progname\" = yes; then\n      AC_DEFINE([HAVE_VAR___PROGNAME], 1,\n        [Define if you have a global __progname variable])\n    fi\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}