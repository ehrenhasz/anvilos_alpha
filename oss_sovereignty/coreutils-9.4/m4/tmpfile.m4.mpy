{
  "module_name": "tmpfile.m4",
  "hash_id": "c0bc17af15091231f163dab049efd293d90bb3ca75adfc7f533c279606015789",
  "original_prompt": "Ingested from coreutils-9.4/m4/tmpfile.m4",
  "human_readable_source": "# tmpfile.m4 serial 4\n# Copyright (C) 2007, 2009-2023 Free Software Foundation, Inc.\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\n# Written by Ben Pfaff.\n\n# Check whether to use a replacement tmpfile() function.\n\n# The native Windows tmpfile function always tries to put the temporary\n# file in the root directory.  (This behaviour is even documented in\n# Microsoft's documentation!)  This often fails for ordinary users who\n# don't have the permissions to write in the root directory.\n#\n# We can't test for tmpfile even at runtime, since our test program\n# might be running with privileges that allow it to write to the root\n# directory, even though tmpfile wouldn't work in general.  Instead,\n# just test for a Windows platform (excluding Cygwin).\n\n# On Android 4.3, tmpfile() always returns NULL, even if TMPDIR is set\n# to a writable directory.\n\nAC_DEFUN([gl_FUNC_TMPFILE], [\n  AC_REQUIRE([gl_STDIO_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_CACHE_CHECK([whether tmpfile works],\n    [gl_cv_func_tmpfile_works],\n    [AC_EGREP_CPP([choke me], [\n#if defined _WIN32 && !defined __CYGWIN__\nchoke me\n#endif\n       ],\n       [gl_cv_func_tmpfile_works=no],\n       [AC_RUN_IFELSE(\n          [AC_LANG_SOURCE([[\n#include <stdio.h>\n#include <stdlib.h>\nint\nmain (void)\n{\n  return tmpfile () == NULL;\n}]])],\n          [gl_cv_func_tmpfile_works=yes],\n          [gl_cv_func_tmpfile_works=no],\n          [case \"$host_os\" in\n                              # Guess no on Android.\n             linux*-android*) gl_cv_func_tmpfile_works=\"guessing no\" ;;\n                              # Guess yes otherwise.\n             *)               gl_cv_func_tmpfile_works=\"guessing yes\" ;;\n           esac\n          ])\n       ])\n    ])\n  case \"$gl_cv_func_tmpfile_works\" in\n    *yes) ;;\n    *) REPLACE_TMPFILE=1 ;;\n  esac\n])\n\n# Prerequisites of lib/tmpfile.c.\nAC_DEFUN([gl_PREREQ_TMPFILE], [:])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}