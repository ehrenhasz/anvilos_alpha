{
  "module_name": "mkfifoat.m4",
  "hash_id": "dd8da99e3edc6ccc5da4f35670c182f33748c0e1f07ae31a8e967797dae6d26d",
  "original_prompt": "Ingested from coreutils-9.4/m4/mkfifoat.m4",
  "human_readable_source": "# serial 10\n# See if we need to provide mkfifoat/mknodat replacement.\n\ndnl Copyright (C) 2009-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\n# Written by Eric Blake.\n\nAC_DEFUN([gl_FUNC_MKFIFOAT],\n[\n  AC_REQUIRE([gl_SYS_STAT_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n\n  dnl Persuade glibc <sys/stat.h> to declare mkfifoat() and mknodat().\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n\n  AC_REQUIRE([gl_FUNC_OPENAT])\n\n  gl_CHECK_FUNCS_ANDROID_MACOS([mknodat], [[#include <sys/stat.h>]])\n  gl_CHECK_FUNCS_ANDROID_MACOS([mkfifoat], [[#include <sys/stat.h>]])\n  if test $ac_cv_func_mkfifoat = yes; then\n    dnl Check for AIX 7.2 bug with trailing slash.\n    AC_CACHE_CHECK([whether mkfifoat rejects trailing slashes],\n      [gl_cv_func_mkfifoat_works],\n      [rm -f conftest.tmp\n       AC_RUN_IFELSE(\n         [AC_LANG_PROGRAM(\n            [[#include <fcntl.h>\n              #include <sys/stat.h>\n            ]],\n            [[int result = 0;\n              if (!mkfifoat (AT_FDCWD, \"conftest.tmp/\", 0600))\n                result |= 1;\n              return result;\n            ]])\n         ],\n         [gl_cv_func_mkfifoat_works=yes],\n         [gl_cv_func_mkfifoat_works=no],\n         [case \"$host_os\" in\n                             # Guess yes on Linux systems.\n            linux-* | linux) gl_cv_func_mkfifoat_works=\"guessing yes\" ;;\n                             # Guess yes on glibc systems.\n            *-gnu* | gnu*)   gl_cv_func_mkfifoat_works=\"guessing yes\" ;;\n                             # Guess no on AIX systems.\n            aix*)            gl_cv_func_mkfifoat_works=\"guessing no\" ;;\n                             # If we don't know, obey --enable-cross-guesses.\n            *)               gl_cv_func_mkfifoat_works=\"$gl_cross_guess_normal\" ;;\n          esac\n         ])\n       rm -f conftest.tmp\n      ])\n    case \"$gl_cv_func_mkfifoat_works\" in\n      *yes) ;;\n      *)\n        REPLACE_MKFIFOAT=1\n        dnl mknodat() has the same bug as mkfifoat().\n        REPLACE_MKNODAT=1\n        ;;\n    esac\n  else\n    # No known system has mkfifoat but not mknodat\n    HAVE_MKFIFOAT=0\n    case \"$gl_cv_onwards_func_mkfifoat\" in\n      future*) REPLACE_MKFIFOAT=1 ;;\n    esac\n    HAVE_MKNODAT=0\n    case \"$gl_cv_onwards_func_mknodat\" in\n      future*) REPLACE_MKNODAT=1 ;;\n    esac\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}