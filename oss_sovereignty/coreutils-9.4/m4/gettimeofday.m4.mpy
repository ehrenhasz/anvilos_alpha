{
  "module_name": "gettimeofday.m4",
  "hash_id": "2a7e0596c4560c9e1bd19a5d670cf10c49e35ad5a11a2a4213e5e2bd5da5bbb6",
  "original_prompt": "Ingested from coreutils-9.4/m4/gettimeofday.m4",
  "human_readable_source": "# serial 30\n\n# Copyright (C) 2001-2003, 2005, 2007, 2009-2023 Free Software Foundation, Inc.\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\ndnl From Jim Meyering.\n\nAC_DEFUN([gl_FUNC_GETTIMEOFDAY],\n[\n  AC_REQUIRE([gl_SYS_TIME_H_DEFAULTS])\n  AC_REQUIRE([AC_C_RESTRICT])\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_REQUIRE([gl_SYS_TIME_H])\n  AC_CHECK_FUNCS_ONCE([gettimeofday])\n\n  gl_gettimeofday_timezone=void\n  if test $ac_cv_func_gettimeofday != yes; then\n    HAVE_GETTIMEOFDAY=0\n  else\n    AC_CACHE_CHECK([for gettimeofday with POSIX signature],\n      [gl_cv_func_gettimeofday_posix_signature],\n      [AC_COMPILE_IFELSE(\n         [AC_LANG_PROGRAM(\n            [[#include <sys/time.h>\n              struct timeval c;\n              int gettimeofday (struct timeval *restrict, void *restrict);\n            ]],\n            [[/* glibc uses struct timezone * rather than the POSIX void *\n                 if _GNU_SOURCE is defined.  However, since the only portable\n                 use of gettimeofday uses NULL as the second parameter, and\n                 since the glibc definition is actually more typesafe, it is\n                 not worth wrapping this to get a compliant signature.  */\n              int (*f) (struct timeval *restrict, void *restrict)\n                = gettimeofday;\n              int x = f (&c, 0);\n              return !(x | c.tv_sec | c.tv_usec);\n            ]])],\n          [gl_cv_func_gettimeofday_posix_signature=yes],\n          [AC_COMPILE_IFELSE(\n            [AC_LANG_PROGRAM(\n              [[#include <sys/time.h>\nint gettimeofday (struct timeval *restrict, struct timezone *restrict);\n              ]])],\n            [gl_cv_func_gettimeofday_posix_signature=almost],\n            [gl_cv_func_gettimeofday_posix_signature=no])])])\n    if test $gl_cv_func_gettimeofday_posix_signature = almost; then\n      gl_gettimeofday_timezone='struct timezone'\n    elif test $gl_cv_func_gettimeofday_posix_signature != yes; then\n      REPLACE_GETTIMEOFDAY=1\n    fi\n    dnl If we override 'struct timeval', we also have to override gettimeofday.\n    if test $REPLACE_STRUCT_TIMEVAL = 1; then\n      REPLACE_GETTIMEOFDAY=1\n    fi\n    dnl On mingw, the original gettimeofday has only a precision of 15.6\n    dnl milliseconds. So override it.\n    case \"$host_os\" in\n      mingw* | windows*) REPLACE_GETTIMEOFDAY=1 ;;\n    esac\n  fi\n  AC_DEFINE_UNQUOTED([GETTIMEOFDAY_TIMEZONE], [$gl_gettimeofday_timezone],\n    [Define this to 'void' or 'struct timezone' to match the system's\n     declaration of the second argument to gettimeofday.])\n])\n\n# Prerequisites of lib/gettimeofday.c.\nAC_DEFUN([gl_PREREQ_GETTIMEOFDAY], [:])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}