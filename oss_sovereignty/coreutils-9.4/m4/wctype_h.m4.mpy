{
  "module_name": "wctype_h.m4",
  "hash_id": "17402ad98d2724249547e8cc534b631e18639c25da218efd8a4d14377774e73c",
  "original_prompt": "Ingested from coreutils-9.4/m4/wctype_h.m4",
  "human_readable_source": "# wctype_h.m4 serial 32\n\ndnl A placeholder for ISO C99 <wctype.h>, for platforms that lack it.\n\ndnl Copyright (C) 2006-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl Written by Paul Eggert.\n\nAC_DEFUN_ONCE([gl_WCTYPE_H],\n[\n  AC_REQUIRE([gl_WCTYPE_H_DEFAULTS])\n  AC_REQUIRE([AC_PROG_CC])\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_CHECK_FUNCS_ONCE([iswcntrl])\n  if test $ac_cv_func_iswcntrl = yes; then\n    HAVE_ISWCNTRL=1\n  else\n    HAVE_ISWCNTRL=0\n  fi\n  AC_SUBST([HAVE_ISWCNTRL])\n\n  AC_REQUIRE([gt_TYPE_WINT_T])\n  if test $gt_cv_c_wint_t = yes; then\n    HAVE_WINT_T=1\n  else\n    HAVE_WINT_T=0\n  fi\n  AC_SUBST([HAVE_WINT_T])\n\n  AC_REQUIRE([gl_TYPE_WINT_T_PREREQ])\n\n  gl_CHECK_NEXT_HEADERS([wctype.h])\n  if test $ac_cv_header_wctype_h = yes; then\n    if test $ac_cv_func_iswcntrl = yes; then\n      dnl Linux libc5 has an iswprint function that returns 0 for all arguments.\n      dnl The other functions are likely broken in the same way.\n      AC_CACHE_CHECK([whether iswcntrl works], [gl_cv_func_iswcntrl_works],\n        [\n          AC_RUN_IFELSE(\n            [AC_LANG_SOURCE([[\n               #include <wchar.h>\n               #include <wctype.h>\n               int main () { return iswprint ('x') == 0; }\n            ]])],\n            [gl_cv_func_iswcntrl_works=yes], [gl_cv_func_iswcntrl_works=no],\n            [dnl Guess no on Linux libc5, yes otherwise.\n             AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <stdlib.h>\n                          #if __GNU_LIBRARY__ == 1\n                          Linux libc5 i18n is broken.\n                          #endif]], [[]])],\n              [gl_cv_func_iswcntrl_works=\"guessing yes\"],\n              [gl_cv_func_iswcntrl_works=\"guessing no\"])\n            ])\n        ])\n    fi\n    HAVE_WCTYPE_H=1\n  else\n    HAVE_WCTYPE_H=0\n  fi\n  AC_SUBST([HAVE_WCTYPE_H])\n\n  if test $GNULIBHEADERS_OVERRIDE_WINT_T = 1; then\n    REPLACE_ISWCNTRL=1\n  else\n    case \"$gl_cv_func_iswcntrl_works\" in\n      *yes) REPLACE_ISWCNTRL=0 ;;\n      *)    REPLACE_ISWCNTRL=1 ;;\n    esac\n  fi\n  AC_SUBST([REPLACE_ISWCNTRL])\n\n  if test $HAVE_ISWCNTRL = 0 || test $REPLACE_ISWCNTRL = 1; then\n    dnl Redefine all of iswcntrl, ..., iswxdigit in <wctype.h>.\n    :\n  fi\n\n  if test $REPLACE_ISWCNTRL = 1; then\n    REPLACE_TOWLOWER=1\n  else\n    AC_CHECK_FUNCS([towlower])\n    if test $ac_cv_func_towlower = yes; then\n      REPLACE_TOWLOWER=0\n    else\n      AC_CHECK_DECLS([towlower],,,\n        [[#include <wchar.h>\n          #if HAVE_WCTYPE_H\n          # include <wctype.h>\n          #endif\n        ]])\n      if test $ac_cv_have_decl_towlower = yes; then\n        dnl On Minix 3.1.8, the system's <wctype.h> declares towlower() and\n        dnl towupper() although it does not have the functions. Avoid a\n        dnl collision with gnulib's replacement.\n        REPLACE_TOWLOWER=1\n      else\n        REPLACE_TOWLOWER=0\n      fi\n    fi\n  fi\n  AC_SUBST([REPLACE_TOWLOWER])\n\n  if test $HAVE_ISWCNTRL = 0 || test $REPLACE_TOWLOWER = 1; then\n    dnl Redefine towlower, towupper in <wctype.h>.\n    :\n  fi\n\n  dnl We assume that the wctype() and iswctype() functions exist if and only\n  dnl if the type wctype_t is defined in <wchar.h> or in <wctype.h> if that\n  dnl exists.\n  dnl HP-UX 11.00 declares all these in <wchar.h> and lacks <wctype.h>.\n  AC_CACHE_CHECK([for wctype_t], [gl_cv_type_wctype_t],\n    [AC_COMPILE_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <wchar.h>\n            #if HAVE_WCTYPE_H\n            # include <wctype.h>\n            #endif\n            wctype_t a;\n          ]],\n          [[]])],\n       [gl_cv_type_wctype_t=yes],\n       [gl_cv_type_wctype_t=no])\n    ])\n  if test $gl_cv_type_wctype_t = no; then\n    HAVE_WCTYPE_T=0\n  fi\n\n  dnl We assume that the wctrans() and towctrans() functions exist if and only\n  dnl if the type wctrans_t is defined in <wctype.h>.\n  AC_CACHE_CHECK([for wctrans_t], [gl_cv_type_wctrans_t],\n    [AC_COMPILE_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <wchar.h>\n            #include <wctype.h>\n            wctrans_t a;\n          ]],\n          [[]])],\n       [gl_cv_type_wctrans_t=yes],\n       [gl_cv_type_wctrans_t=no])\n    ])\n  if test $gl_cv_type_wctrans_t = no; then\n    HAVE_WCTRANS_T=0\n  fi\n\n  dnl Check for declarations of anything we want to poison if the\n  dnl corresponding gnulib module is not in use.\n  gl_WARN_ON_USE_PREPARE([[\n#if !(defined __GLIBC__ && !defined __UCLIBC__)\n# include <wchar.h>\n#endif\n#include <wctype.h>\n    ]],\n    [wctype iswctype wctrans towctrans\n    ])\n])\n\n# gl_WCTYPE_MODULE_INDICATOR([modulename])\n# sets the shell variable that indicates the presence of the given module\n# to a C preprocessor expression that will evaluate to 1.\n# This macro invocation must not occur in macros that are AC_REQUIREd.\nAC_DEFUN([gl_WCTYPE_MODULE_INDICATOR],\n[\n  dnl Ensure to expand the default settings once only.\n  gl_WCTYPE_H_REQUIRE_DEFAULTS\n  gl_MODULE_INDICATOR_SET_VARIABLE([$1])\n  dnl Define it also as a C macro, for the benefit of the unit tests.\n  gl_MODULE_INDICATOR_FOR_TESTS([$1])\n])\n\n# Initializes the default values for AC_SUBSTed shell variables.\n# This macro must not be AC_REQUIREd.  It must only be invoked, and only\n# outside of macros or in macros that are not AC_REQUIREd.\nAC_DEFUN([gl_WCTYPE_H_REQUIRE_DEFAULTS],\n[\n  m4_defun(GL_MODULE_INDICATOR_PREFIX[_WCTYPE_H_MODULE_INDICATOR_DEFAULTS], [\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_ISWBLANK])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_ISWDIGIT])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_ISWXDIGIT])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_WCTYPE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_ISWCTYPE])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_WCTRANS])\n    gl_MODULE_INDICATOR_INIT_VARIABLE([GNULIB_TOWCTRANS])\n  ])\n  m4_require(GL_MODULE_INDICATOR_PREFIX[_WCTYPE_H_MODULE_INDICATOR_DEFAULTS])\n  AC_REQUIRE([gl_WCTYPE_H_DEFAULTS])\n])\n\nAC_DEFUN([gl_WCTYPE_H_DEFAULTS],\n[\n  dnl Assume proper GNU behavior unless another module says otherwise.\n  HAVE_ISWBLANK=1;      AC_SUBST([HAVE_ISWBLANK])\n  HAVE_WCTYPE_T=1;      AC_SUBST([HAVE_WCTYPE_T])\n  HAVE_WCTRANS_T=1;     AC_SUBST([HAVE_WCTRANS_T])\n  REPLACE_ISWBLANK=0;   AC_SUBST([REPLACE_ISWBLANK])\n  REPLACE_ISWDIGIT=0;   AC_SUBST([REPLACE_ISWDIGIT])\n  REPLACE_ISWXDIGIT=0;  AC_SUBST([REPLACE_ISWXDIGIT])\n  REPLACE_WCTRANS=0;    AC_SUBST([REPLACE_WCTRANS])\n  REPLACE_WCTYPE=0;     AC_SUBST([REPLACE_WCTYPE])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}