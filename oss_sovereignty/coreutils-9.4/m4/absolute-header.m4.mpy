{
  "module_name": "absolute-header.m4",
  "hash_id": "40e839226c3a78fca5621be8124700680cb300374f33edb0e9c611c0fbaa6c28",
  "original_prompt": "Ingested from coreutils-9.4/m4/absolute-header.m4",
  "human_readable_source": "# absolute-header.m4 serial 18\ndnl Copyright (C) 2006-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl From Derek Price.\n\n# gl_ABSOLUTE_HEADER(HEADER1 HEADER2 ...)\n# ---------------------------------------\n# Find the absolute name of a header file, testing first if the header exists.\n# If the header were sys/inttypes.h, this macro would define\n# ABSOLUTE_SYS_INTTYPES_H to the '\"\"' quoted absolute name of sys/inttypes.h\n# in config.h\n# (e.g. '#define ABSOLUTE_SYS_INTTYPES_H \"///usr/include/sys/inttypes.h\"').\n# The three \"///\" are to pacify Sun C 5.8, which otherwise would say\n# \"warning: #include of /usr/include/... may be non-portable\".\n# Use '\"\"', not '<>', so that the /// cannot be confused with a C99 comment.\n# Note: This macro assumes that the header file is not empty after\n# preprocessing, i.e. it does not only define preprocessor macros but also\n# provides some type/enum definitions or function/variable declarations.\nAC_DEFUN([gl_ABSOLUTE_HEADER],\n[AC_REQUIRE([AC_CANONICAL_HOST])\nAC_LANG_PREPROC_REQUIRE()dnl\nm4_foreach_w([gl_HEADER_NAME], [$1],\n  [AS_VAR_PUSHDEF([gl_absolute_header],\n                  [gl_cv_absolute_]m4_defn([gl_HEADER_NAME]))dnl\n  AC_CACHE_CHECK([absolute name of <]m4_defn([gl_HEADER_NAME])[>],\n    [gl_absolute_header],\n    [AS_VAR_PUSHDEF([ac_header_exists],\n                    [ac_cv_header_]m4_defn([gl_HEADER_NAME]))dnl\n    AC_CHECK_HEADERS_ONCE(m4_defn([gl_HEADER_NAME]))dnl\n    if test AS_VAR_GET([ac_header_exists]) = yes; then\n      gl_ABSOLUTE_HEADER_ONE(m4_defn([gl_HEADER_NAME]))\n    fi\n    AS_VAR_POPDEF([ac_header_exists])dnl\n    ])dnl\n  AC_DEFINE_UNQUOTED(AS_TR_CPP([ABSOLUTE_]m4_defn([gl_HEADER_NAME])),\n                     [\"AS_VAR_GET([gl_absolute_header])\"],\n                     [Define this to an absolute name of <]m4_defn([gl_HEADER_NAME])[>.])\n  AS_VAR_POPDEF([gl_absolute_header])dnl\n])dnl\n])# gl_ABSOLUTE_HEADER\n\n# gl_ABSOLUTE_HEADER_ONE(HEADER)\n# ------------------------------\n# Like gl_ABSOLUTE_HEADER, except that:\n#   - it assumes that the header exists,\n#   - it uses the current CPPFLAGS,\n#   - it does not cache the result,\n#   - it is silent.\nAC_DEFUN([gl_ABSOLUTE_HEADER_ONE],\n[\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_LANG_CONFTEST([AC_LANG_SOURCE([[#include <]]m4_dquote([$1])[[>]])])\n  dnl AIX \"xlc -E\" and \"cc -E\" omit #line directives for header files\n  dnl that contain only a #include of other header files and no\n  dnl non-comment tokens of their own. This leads to a failure to\n  dnl detect the absolute name of <dirent.h>, <signal.h>, <poll.h>\n  dnl and others. The workaround is to force preservation of comments\n  dnl through option -C. This ensures all necessary #line directives\n  dnl are present. GCC supports option -C as well.\n  case \"$host_os\" in\n    aix*) gl_absname_cpp=\"$ac_cpp -C\" ;;\n    *)    gl_absname_cpp=\"$ac_cpp\" ;;\n  esac\nchangequote(,)\n  case \"$host_os\" in\n    mingw* | windows*)\n      dnl For the sake of native Windows compilers (excluding gcc),\n      dnl treat backslash as a directory separator, like /.\n      dnl Actually, these compilers use a double-backslash as\n      dnl directory separator, inside the\n      dnl   # line \"filename\"\n      dnl directives.\n      gl_dirsep_regex='[/\\\\]'\n      ;;\n    *)\n      gl_dirsep_regex='\\/'\n      ;;\n  esac\n  dnl A sed expression that turns a string into a basic regular\n  dnl expression, for use within \"/.../\".\n  gl_make_literal_regex_sed='s,[]$^\\\\.*/[],\\\\&,g'\n  gl_header_literal_regex=`echo '$1' \\\n                           | sed -e \"$gl_make_literal_regex_sed\"`\n  gl_absolute_header_sed=\"/${gl_dirsep_regex}${gl_header_literal_regex}/\"'{\n      s/.*\"\\(.*'\"${gl_dirsep_regex}${gl_header_literal_regex}\"'\\)\".*/\\1/\n      s|^/[^/]|//&|\n      p\n      q\n    }'\nchangequote([,])\n  dnl eval is necessary to expand gl_absname_cpp.\n  dnl Ultrix and Pyramid sh refuse to redirect output of eval,\n  dnl so use subshell.\n  AS_VAR_SET([gl_cv_absolute_]AS_TR_SH([[$1]]),\n[`(eval \"$gl_absname_cpp conftest.$ac_ext\") 2>&AS_MESSAGE_LOG_FD |\n  sed -n \"$gl_absolute_header_sed\"`])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}