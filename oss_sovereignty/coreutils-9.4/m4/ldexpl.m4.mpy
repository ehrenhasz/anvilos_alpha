{
  "module_name": "ldexpl.m4",
  "hash_id": "c6483b5cd9f95711da6002510736cfe3f954409eee3fff9e966ff4dd3d20459d",
  "original_prompt": "Ingested from coreutils-9.4/m4/ldexpl.m4",
  "human_readable_source": "# ldexpl.m4 serial 18\ndnl Copyright (C) 2007-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_LDEXPL],\n[\n  AC_REQUIRE([gl_MATH_H_DEFAULTS])\n  AC_REQUIRE([gl_LONG_DOUBLE_VS_DOUBLE])\n  AC_REQUIRE([gl_FUNC_ISNANL]) dnl for ISNANL_LIBM\n\n  dnl Persuade glibc <math.h> to declare ldexpl().\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n\n  dnl Check whether it's declared.\n  dnl Mac OS X 10.3 has ldexpl() in libc but doesn't declare it in <math.h>.\n  AC_CHECK_DECL([ldexpl], , [HAVE_DECL_LDEXPL=0], [[#include <math.h>]])\n\n  LDEXPL_LIBM=\n  if test $HAVE_DECL_LDEXPL = 1; then\n    gl_CHECK_LDEXPL_NO_LIBM\n    if test $gl_cv_func_ldexpl_no_libm = no; then\n      AC_CACHE_CHECK([whether ldexpl() can be used with libm],\n        [gl_cv_func_ldexpl_in_libm],\n        [\n          save_LIBS=\"$LIBS\"\n          LIBS=\"$LIBS -lm\"\n          AC_LINK_IFELSE(\n            [AC_LANG_PROGRAM(\n               [[#include <math.h>\n                 long double x;]],\n               [[return ldexpl (x, -1) > 0;]])],\n            [gl_cv_func_ldexpl_in_libm=yes],\n            [gl_cv_func_ldexpl_in_libm=no])\n          LIBS=\"$save_LIBS\"\n        ])\n      if test $gl_cv_func_ldexpl_in_libm = yes; then\n        LDEXPL_LIBM=-lm\n      fi\n    fi\n    if test $gl_cv_func_ldexpl_no_libm = yes \\\n       || test $gl_cv_func_ldexpl_in_libm = yes; then\n      save_LIBS=\"$LIBS\"\n      LIBS=\"$LIBS $LDEXPL_LIBM\"\n      gl_FUNC_LDEXPL_WORKS\n      LIBS=\"$save_LIBS\"\n      case \"$gl_cv_func_ldexpl_works\" in\n        *yes) gl_func_ldexpl=yes ;;\n        *)    gl_func_ldexpl=no; REPLACE_LDEXPL=1 ;;\n      esac\n    else\n      gl_func_ldexpl=no\n    fi\n    if test $gl_func_ldexpl = yes; then\n      AC_DEFINE([HAVE_LDEXPL], [1],\n        [Define if the ldexpl() function is available.])\n    fi\n  fi\n  if test $HAVE_DECL_LDEXPL = 0 || test $gl_func_ldexpl = no; then\n    dnl Find libraries needed to link lib/ldexpl.c.\n    if test $HAVE_SAME_LONG_DOUBLE_AS_DOUBLE = 1; then\n      AC_REQUIRE([gl_FUNC_LDEXP])\n      LDEXPL_LIBM=\"$LDEXP_LIBM\"\n    else\n      LDEXPL_LIBM=\"$ISNANL_LIBM\"\n    fi\n  fi\n  AC_SUBST([LDEXPL_LIBM])\n])\n\ndnl Test whether ldexpl() can be used without linking with libm.\ndnl Set gl_cv_func_ldexpl_no_libm to 'yes' or 'no' accordingly.\nAC_DEFUN([gl_CHECK_LDEXPL_NO_LIBM],\n[\n  AC_CACHE_CHECK([whether ldexpl() can be used without linking with libm],\n    [gl_cv_func_ldexpl_no_libm],\n    [\n      AC_LINK_IFELSE(\n        [AC_LANG_PROGRAM(\n           [[#include <math.h>\n             long double x;]],\n           [[return ldexpl (x, -1) > 0;]])],\n        [gl_cv_func_ldexpl_no_libm=yes],\n        [gl_cv_func_ldexpl_no_libm=no])\n    ])\n])\n\ndnl Test whether ldexpl() works on finite numbers (this fails on AIX 5.1\ndnl and Mac OS X 10.4/PowerPC).\nAC_DEFUN([gl_FUNC_LDEXPL_WORKS],\n[\n  AC_REQUIRE([AC_PROG_CC])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_CACHE_CHECK([whether ldexpl works], [gl_cv_func_ldexpl_works],\n    [\n      AC_RUN_IFELSE(\n        [AC_LANG_SOURCE([[\n#include <math.h>\nextern\n#ifdef __cplusplus\n\"C\"\n#endif\nlong double ldexpl (long double, int);\nint main()\n{\n  int result = 0;\n  {\n    volatile long double x = 1.0;\n    volatile long double y = ldexpl (x, -1);\n    if (y != 0.5L)\n      result |= 1;\n  }\n  {\n    volatile long double x = 1.73205L;\n    volatile long double y = ldexpl (x, 0);\n    if (y != x)\n      result |= 2;\n  }\n  return result;\n}]])],\n        [gl_cv_func_ldexpl_works=yes],\n        [gl_cv_func_ldexpl_works=no],\n        [\nchangequote(,)dnl\n         case \"$host_os\" in\n           aix | aix[3-6]*)   gl_cv_func_ldexpl_works=\"guessing no\" ;;\n                              # Guess yes on native Windows.\n           mingw* | windows*) gl_cv_func_ldexpl_works=\"guessing yes\" ;;\n           *)                 gl_cv_func_ldexpl_works=\"guessing yes\" ;;\n         esac\nchangequote([,])dnl\n        ])\n    ])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}