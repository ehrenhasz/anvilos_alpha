{
  "module_name": "lib-ignore.m4",
  "hash_id": "44377b3cf062ef4da7514b04b8c8170e3b471a33cf602eec23e8c26a097114b8",
  "original_prompt": "Ingested from coreutils-9.4/m4/lib-ignore.m4",
  "human_readable_source": "# If possible, ignore libraries that are not depended on.\n\ndnl Copyright (C) 2006, 2009-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl Written by Paul Eggert.\n\n# gl_IGNORE_UNUSED_LIBRARIES\n# --------------------------\n# Determines the option to be passed to the C/C++/Fortran compiler, so that it\n# omits unused libraries.\n# Example (on Solaris):\n# $ cc foo.c -lnsl; ldd ./a.out\n#         libnsl.so.1 =>   /lib/libnsl.so.1\n#         libc.so.1 =>     /lib/libc.so.1\n#         libmp.so.2 =>    /lib/libmp.so.2\n#         libmd.so.1 =>    /lib/libmd.so.1\n#         libscf.so.1 =>   /lib/libscf.so.1\n#         libdoor.so.1 =>  /lib/libdoor.so.1\n#         libuutil.so.1 =>         /lib/libuutil.so.1\n#         libgen.so.1 =>   /lib/libgen.so.1\n#         libm.so.2 =>     /lib/libm.so.2\n# $ cc foo.c -lnsl -Wl,-z,ignore; ldd ./a.out\n#         libc.so.1 =>     /lib/libc.so.1\n#         libm.so.2 =>     /lib/libm.so.2\n#\n# Note that the option works only for the C compiler, not for the C++\n# compiler:\n# - Sun C likes '-Wl,-z,ignore'.\n#   '-Qoption ld -z,ignore' is not accepted.\n#   '-z ignore' is accepted but has no effect.\n# - Sun C++ and Sun Fortran like '-Qoption ld -z,ignore'.\n#   '-Wl,-z,ignore' is not accepted.\n#   '-z ignore' is accepted but has no effect.\n#\n# Sets and substitutes a variable that depends on the current language:\n# - IGNORE_UNUSED_LIBRARIES_CFLAGS    for C\n# - IGNORE_UNUSED_LIBRARIES_CXXFLAGS  for C++\n# - IGNORE_UNUSED_LIBRARIES_FFLAGS    for Fortran\n#\n# Note that the option works only for direct invocation of the compiler, not\n# through libtool: When libtool is used to create a shared library, it will\n# honor and translate '-Wl,-z,ignore' to '-Qoption ld -z -Qoption ld ignore'\n# if needed, but it will drop a '-Qoption ld -z,ignore' on the command line.\n#\nAC_DEFUN([gl_IGNORE_UNUSED_LIBRARIES],\n[\n  AC_CACHE_CHECK([for []_AC_LANG[] compiler flag to ignore unused libraries],\n    [gl_cv_prog_[]_AC_LANG_ABBREV[]_ignore_unused_libraries],\n    [gl_cv_prog_[]_AC_LANG_ABBREV[]_ignore_unused_libraries=none\n     gl_saved_ldflags=$LDFLAGS\n     gl_saved_libs=$LIBS\n     # Link with -lm to detect binutils 2.16 bug with --as-needed; see\n     # <https://lists.gnu.org/r/bug-gnulib/2006-06/msg00131.html>.\n     LIBS=\"$LIBS -lm\"\n     # Use long option sequences like '-z ignore' to test for the feature,\n     # to forestall problems with linkers that have -z, -i, -g, -n, etc. flags.\n     # GCC + binutils likes '-Wl,--as-needed'.\n     # GCC + Solaris ld likes '-Wl,-z,ignore'.\n     # Sun C likes '-Wl,-z,ignore'. '-z ignore' is accepted but has no effect.\n     # Don't try bare '--as-needed'; nothing likes it and the HP-UX 11.11\n     # native cc issues annoying warnings and then ignores it,\n     # which would cause us to incorrectly conclude that it worked.\n     for gl_flags in _gl_IGNORE_UNUSED_LIBRARIES_OPTIONS\n     do\n       LDFLAGS=\"$gl_flags $LDFLAGS\"\n       AC_LINK_IFELSE([AC_LANG_PROGRAM()],\n         [gl_cv_prog_[]_AC_LANG_ABBREV[]_ignore_unused_libraries=$gl_flags])\n       LDFLAGS=$gl_saved_ldflags\n       test \"$gl_cv_prog_[]_AC_LANG_ABBREV[]_ignore_unused_libraries\" != none &&\n         break\n     done\n     LIBS=$gl_saved_libs\n    ])\n  IGNORE_UNUSED_LIBRARIES_[]_AC_LANG_PREFIX[]FLAGS=\n  if test \"$gl_cv_prog_[]_AC_LANG_ABBREV[]_ignore_unused_libraries\" != none; then\n    IGNORE_UNUSED_LIBRARIES_[]_AC_LANG_PREFIX[]FLAGS=\"$gl_cv_prog_[]_AC_LANG_ABBREV[]_ignore_unused_libraries\"\n  fi\n  AC_SUBST([IGNORE_UNUSED_LIBRARIES_]_AC_LANG_PREFIX[FLAGS])\n])\n\n# _gl_IGNORE_UNUSED_LIBRARIES_OPTIONS\n# -----------------------------------\n# Expands to the language dependent options to be tried.\nAC_DEFUN([_gl_IGNORE_UNUSED_LIBRARIES_OPTIONS],\n[_AC_LANG_DISPATCH([$0], _AC_LANG, $@)])\n\n# _gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(C)\n# --------------------------------------\nm4_define([_gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(C)],\n[ '-Wl,--as-needed' \\\n  '-Wl,-z,ignore' \\\n  '-z ignore'\n])\n\n# _gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(C++)\n# ----------------------------------------\nm4_define([_gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(C++)],\n[ '-Wl,--as-needed' \\\n  '-Qoption ld -z,ignore' \\\n  '-Wl,-z,ignore' \\\n  '-z ignore'\n])\n\n# _gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(Fortran 77)\n# -----------------------------------------------\nm4_copy([_gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(C++)],\n        [_gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(Fortran 77)])\n\n# _gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(Fortran)\n# --------------------------------------------\nm4_copy([_gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(Fortran 77)],\n        [_gl_IGNORE_UNUSED_LIBRARIES_OPTIONS(Fortran)])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}