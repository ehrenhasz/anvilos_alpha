{
  "module_name": "selinux-selinux-h.m4",
  "hash_id": "a045ef710d359d208eab60662664b28b0f0e899514b3b05aaaa2086a3d07af06",
  "original_prompt": "Ingested from coreutils-9.4/m4/selinux-selinux-h.m4",
  "human_readable_source": "# serial 7   -*- Autoconf -*-\n# Copyright (C) 2006-2007, 2009-2023 Free Software Foundation, Inc.\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\n# From Jim Meyering\n# Provide <selinux/selinux.h>, if necessary.\n# If it is already present, provide wrapper functions to guard against\n# misbehavior from getfilecon, lgetfilecon, and fgetfilecon.\n\nAC_DEFUN([gl_HEADERS_SELINUX_SELINUX_H],\n[\n  AC_REQUIRE([gl_LIBSELINUX])\n  if test \"$with_selinux\" != no; then\n    AC_CHECK_HEADERS([selinux/selinux.h])\n\n    if test $ac_cv_header_selinux_selinux_h = yes; then\n      HAVE_SELINUX_SELINUX_H=1\n    else\n      HAVE_SELINUX_SELINUX_H=0\n    fi\n\n    if test \"$ac_cv_header_selinux_selinux_h\" = yes; then\n      # We do have <selinux/selinux.h>, so do compile getfilecon.c\n      # and arrange to use its wrappers.\n      gl_CHECK_NEXT_HEADERS([selinux/selinux.h])\n      AC_DEFINE([getfilecon], [rpl_getfilecon],\n                [Always use our getfilecon wrapper.])\n      AC_DEFINE([lgetfilecon], [rpl_lgetfilecon],\n                [Always use our lgetfilecon wrapper.])\n      AC_DEFINE([fgetfilecon], [rpl_fgetfilecon],\n                [Always use our fgetfilecon wrapper.])\n    fi\n\n    case \"$ac_cv_search_setfilecon:$ac_cv_header_selinux_selinux_h\" in\n      no:*) # already warned\n        ;;\n      *:no)\n        AC_MSG_WARN([libselinux was found but selinux/selinux.h is missing.])\n        AC_MSG_WARN([AC_PACKAGE_NAME will be compiled without SELinux support.])\n    esac\n  else\n    # Do as if <selinux/selinux.h> does not exist, even if\n    # AC_CHECK_HEADERS_ONCE has already determined that it exists.\n    HAVE_SELINUX_SELINUX_H=0\n  fi\n  AC_SUBST([HAVE_SELINUX_SELINUX_H])\n])\n\nAC_DEFUN([gl_LIBSELINUX],\n[\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_REQUIRE([AC_CANONICAL_BUILD])\n\n  AC_ARG_WITH([selinux],\n    AS_HELP_STRING([[--without-selinux]], [do not use SELinux, even on systems with SELinux]),\n    [], [with_selinux=maybe])\n\n  LIB_SELINUX=\n  if test \"$with_selinux\" != no; then\n    gl_save_LIBS=$LIBS\n    AC_SEARCH_LIBS([setfilecon], [selinux],\n                   [test \"$ac_cv_search_setfilecon\" = \"none required\" ||\n                    LIB_SELINUX=$ac_cv_search_setfilecon])\n    LIBS=$gl_save_LIBS\n  fi\n  AC_SUBST([LIB_SELINUX])\n\n  # Warn if SELinux is found but libselinux is absent;\n  if test \"$ac_cv_search_setfilecon\" = no; then\n    if test \"$host\" = \"$build\" && test -d /selinux; then\n      AC_MSG_WARN([This system supports SELinux but libselinux is missing.])\n      AC_MSG_WARN([AC_PACKAGE_NAME will be compiled without SELinux support.])\n    fi\n    with_selinux=no\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}