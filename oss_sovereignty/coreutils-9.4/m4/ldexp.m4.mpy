{
  "module_name": "ldexp.m4",
  "hash_id": "d03649082841fbd995c7e8918e65b284b2e8855e1e56f47339d978e7812a8e96",
  "original_prompt": "Ingested from coreutils-9.4/m4/ldexp.m4",
  "human_readable_source": "# ldexp.m4 serial 2\ndnl Copyright (C) 2010-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_LDEXP],\n[\n  AC_REQUIRE([gl_MATH_H_DEFAULTS])\n  AC_REQUIRE([gl_FUNC_ISNAND]) dnl for ISNAND_LIBM\n\n  AC_REQUIRE([gl_CHECK_LDEXP_NO_LIBM])\n  LDEXP_LIBM=\n  if test $gl_cv_func_ldexp_no_libm = no; then\n    AC_CACHE_CHECK([whether ldexp() can be used with libm],\n      [gl_cv_func_ldexp_in_libm],\n      [\n        save_LIBS=\"$LIBS\"\n        LIBS=\"$LIBS -lm\"\n        AC_LINK_IFELSE(\n          [AC_LANG_PROGRAM([[#ifndef __NO_MATH_INLINES\n                             # define __NO_MATH_INLINES 1 /* for glibc */\n                             #endif\n                             #include <math.h>\n                             double (*funcptr) (double, int) = ldexp;\n                             double x;]],\n                           [[return ldexp (x, -1) > 0;]])],\n          [gl_cv_func_ldexp_in_libm=yes],\n          [gl_cv_func_ldexp_in_libm=no])\n        LIBS=\"$save_LIBS\"\n      ])\n    if test $gl_cv_func_ldexp_in_libm = yes; then\n      LDEXP_LIBM=-lm\n    fi\n  fi\n\n  save_LIBS=\"$LIBS\"\n  LIBS=\"$LIBS $LDEXP_LIBM\"\n  gl_FUNC_LDEXP_WORKS\n  LIBS=\"$save_LIBS\"\n  case \"$gl_cv_func_ldexp_works\" in\n    *yes) ;;\n    *) REPLACE_LDEXP=1 ;;\n  esac\n\n  if test $REPLACE_LDEXP = 1; then\n    dnl Find libraries needed to link lib/ldexp.c.\n    LDEXP_LIBM=\"$ISNAND_LIBM\"\n  fi\n  AC_SUBST([LDEXP_LIBM])\n])\n\ndnl Test whether ldexp() can be used without linking with libm.\ndnl Set gl_cv_func_ldexp_no_libm to 'yes' or 'no' accordingly.\nAC_DEFUN([gl_CHECK_LDEXP_NO_LIBM],\n[\n  AC_CACHE_CHECK([whether ldexp() can be used without linking with libm],\n    [gl_cv_func_ldexp_no_libm],\n    [\n      AC_LINK_IFELSE(\n        [AC_LANG_PROGRAM([[#ifndef __NO_MATH_INLINES\n                           # define __NO_MATH_INLINES 1 /* for glibc */\n                           #endif\n                           #include <math.h>\n                           double (*funcptr) (double, int) = ldexp;\n                           double x;]],\n                         [[return ldexp (x, -1) > 0;]])],\n        [gl_cv_func_ldexp_no_libm=yes],\n        [gl_cv_func_ldexp_no_libm=no])\n    ])\n])\n\ndnl Test whether ldexp() works (this fails on OpenBSD 7.3/mips64).\nAC_DEFUN([gl_FUNC_LDEXP_WORKS],\n[\n  AC_REQUIRE([AC_PROG_CC])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_CACHE_CHECK([whether ldexp works], [gl_cv_func_ldexp_works],\n    [\n      AC_RUN_IFELSE(\n        [AC_LANG_SOURCE([[\n#include <math.h>\nint main()\n{\n  int result = 0;\n  {\n    volatile double x = 1.9269695883136991774e-308;\n    volatile double y = ldexp (x, 0);\n    if (y != x)\n      result |= 1;\n  }\n  return result;\n}]])],\n        [gl_cv_func_ldexp_works=yes],\n        [gl_cv_func_ldexp_works=no],\n        [case \"$host_os\" in\n           openbsd*)          gl_cv_func_ldexp_works=\"guessing no\" ;;\n                              # Guess yes on native Windows.\n           mingw* | windows*) gl_cv_func_ldexp_works=\"guessing yes\" ;;\n           *)                 gl_cv_func_ldexp_works=\"guessing yes\" ;;\n         esac\n        ])\n    ])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}