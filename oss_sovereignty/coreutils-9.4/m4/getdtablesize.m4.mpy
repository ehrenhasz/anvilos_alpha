{
  "module_name": "getdtablesize.m4",
  "hash_id": "fd9c5c6b4a00a4be14a71d394415163cfb068825fb0b1c19f753ee5edf9ef0a9",
  "original_prompt": "Ingested from coreutils-9.4/m4/getdtablesize.m4",
  "human_readable_source": "# getdtablesize.m4 serial 8\ndnl Copyright (C) 2008-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_GETDTABLESIZE],\n[\n  AC_REQUIRE([gl_UNISTD_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_CHECK_FUNCS_ONCE([getdtablesize])\n  AC_CHECK_DECLS_ONCE([getdtablesize])\n  if test $ac_cv_func_getdtablesize = yes &&\n     test $ac_cv_have_decl_getdtablesize = yes; then\n    AC_CACHE_CHECK([whether getdtablesize works],\n      [gl_cv_func_getdtablesize_works],\n      [dnl There are two concepts: the \"maximum possible file descriptor value + 1\"\n       dnl and the \"maximum number of open file descriptors in a process\".\n       dnl Per SUSv2 and POSIX, getdtablesize() should return the first one.\n       dnl On most platforms, the first and the second concept are the same.\n       dnl On OpenVMS, however, they are different and getdtablesize() returns\n       dnl the second one; thus the test below fails. But we don't care\n       dnl because there's no good way to write a replacement getdtablesize().\n       case \"$host_os\" in\n         vms*) gl_cv_func_getdtablesize_works=\"no (limitation)\" ;;\n         *)\n           dnl Cygwin 1.7.25 automatically increases the RLIMIT_NOFILE soft\n           dnl limit up to an unchangeable hard limit; all other platforms\n           dnl correctly require setrlimit before getdtablesize() can report\n           dnl a larger value.\n           AC_RUN_IFELSE([\n             AC_LANG_PROGRAM(\n               [[#include <unistd.h>]\n                GL_MDA_DEFINES\n               ],\n               [[int size = getdtablesize();\n                 if (dup2 (0, getdtablesize()) != -1)\n                   return 1;\n                 if (size != getdtablesize())\n                   return 2;\n               ]])],\n             [gl_cv_func_getdtablesize_works=yes],\n             [gl_cv_func_getdtablesize_works=no],\n             [case \"$host_os\" in\n                cygwin*) # on cygwin 1.5.25, getdtablesize() automatically grows\n                  gl_cv_func_getdtablesize_works=\"guessing no\" ;;\n                *) gl_cv_func_getdtablesize_works=\"guessing yes\" ;;\n              esac\n             ])\n           ;;\n       esac\n      ])\n    case \"$gl_cv_func_getdtablesize_works\" in\n      *yes | \"no (limitation)\") ;;\n      *) REPLACE_GETDTABLESIZE=1 ;;\n    esac\n  else\n    HAVE_GETDTABLESIZE=0\n  fi\n])\n\n# Prerequisites of lib/getdtablesize.c.\nAC_DEFUN([gl_PREREQ_GETDTABLESIZE], [:])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}