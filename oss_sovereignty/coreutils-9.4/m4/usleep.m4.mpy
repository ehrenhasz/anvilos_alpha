{
  "module_name": "usleep.m4",
  "hash_id": "71964002788a7989d047ddc03141ce03a05016d78a6903a08829f8e488b0b064",
  "original_prompt": "Ingested from coreutils-9.4/m4/usleep.m4",
  "human_readable_source": "# usleep.m4 serial 9\ndnl Copyright (C) 2009-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl This macro intentionally does not check for select or nanosleep;\ndnl both of those modules can require external libraries.\nAC_DEFUN([gl_FUNC_USLEEP],\n[\n  AC_REQUIRE([gl_UNISTD_H_DEFAULTS])\n  dnl usleep was required in POSIX 2001, but dropped as obsolete in\n  dnl POSIX 2008; therefore, it is not always exposed in headers.\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_CHECK_FUNCS_ONCE([usleep])\n  AC_CHECK_TYPE([useconds_t], [],\n    [AC_DEFINE([useconds_t], [unsigned int], [Define to an unsigned 32-bit\n      type if <sys/types.h> lacks this type.])])\n  if test $ac_cv_func_usleep = no; then\n    HAVE_USLEEP=0\n  else\n    dnl POSIX allows implementations to reject arguments larger than\n    dnl 999999, but GNU guarantees it will work.\n    AC_CACHE_CHECK([whether usleep allows large arguments],\n      [gl_cv_func_usleep_works],\n      [AC_RUN_IFELSE([AC_LANG_PROGRAM([[\n#include <unistd.h>\n]], [[return !!usleep (1000000);]])],\n        [gl_cv_func_usleep_works=yes], [gl_cv_func_usleep_works=no],\n        [case \"$host_os\" in\n                              # Guess yes on glibc systems.\n           *-gnu* | gnu*)     gl_cv_func_usleep_works=\"guessing yes\" ;;\n                              # Guess yes on musl systems.\n           *-musl*)           gl_cv_func_usleep_works=\"guessing yes\" ;;\n                              # Guess yes on systems that emulate the Linux system calls.\n           midipix*)          gl_cv_func_usleep_works=\"guessing yes\" ;;\n                              # Guess no on native Windows.\n           mingw* | windows*) gl_cv_func_usleep_works=\"guessing no\" ;;\n                              # If we don't know, obey --enable-cross-guesses.\n           *)                 gl_cv_func_usleep_works=\"$gl_cross_guess_normal\" ;;\n         esac\n        ])])\n    case \"$gl_cv_func_usleep_works\" in\n      *yes) ;;\n      *)\n        REPLACE_USLEEP=1\n        ;;\n    esac\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}