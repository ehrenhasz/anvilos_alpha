{
  "module_name": "strerror.m4",
  "hash_id": "e5a80285d9f80dd4dc7f81d25dbcdfaf9a1e4290b376295a9c1e8bf1f7c23dc3",
  "original_prompt": "Ingested from coreutils-9.4/m4/strerror.m4",
  "human_readable_source": "# strerror.m4 serial 25\ndnl Copyright (C) 2002, 2007-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_STRERROR],\n[\n  AC_REQUIRE([gl_STRING_H_DEFAULTS])\n  AC_REQUIRE([gl_HEADER_ERRNO_H])\n  AC_REQUIRE([gl_FUNC_STRERROR_0])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  m4_ifdef([gl_FUNC_STRERROR_R_WORKS], [\n    AC_REQUIRE([gl_FUNC_STRERROR_R_WORKS])\n  ])\n  if test \"$GL_GENERATE_ERRNO_H:$REPLACE_STRERROR_0\" = false:0; then\n    AC_CACHE_CHECK([for working strerror function],\n     [gl_cv_func_working_strerror],\n     [AC_RUN_IFELSE(\n        [AC_LANG_PROGRAM(\n           [[#include <string.h>\n           ]],\n           [[if (!*strerror (-2)) return 1;]])],\n        [gl_cv_func_working_strerror=yes],\n        [gl_cv_func_working_strerror=no],\n        [case \"$host_os\" in\n                               # Guess yes on glibc systems.\n           *-gnu* | gnu*)      gl_cv_func_working_strerror=\"guessing yes\" ;;\n                               # Guess yes on musl systems.\n           *-musl* | midipix*) gl_cv_func_working_strerror=\"guessing yes\" ;;\n                               # If we don't know, obey --enable-cross-guesses.\n           *)                  gl_cv_func_working_strerror=\"$gl_cross_guess_normal\" ;;\n         esac\n        ])\n    ])\n    case \"$gl_cv_func_working_strerror\" in\n      *yes) ;;\n      *)\n        dnl The system's strerror() fails to return a string for out-of-range\n        dnl integers. Replace it.\n        REPLACE_STRERROR=1\n        ;;\n    esac\n    m4_ifdef([gl_FUNC_STRERROR_R_WORKS], [\n      dnl If the system's strerror_r or __xpg_strerror_r clobbers strerror's\n      dnl buffer, we must replace strerror.\n      case \"$gl_cv_func_strerror_r_works\" in\n        *no) REPLACE_STRERROR=1 ;;\n      esac\n    ])\n  else\n    dnl The system's strerror() cannot know about the new errno values we add\n    dnl to <errno.h>, or any fix for strerror(0). Replace it.\n    REPLACE_STRERROR=1\n  fi\n])\n\ndnl Detect if strerror(0) passes (that is, does not set errno, and does not\ndnl return a string that matches strerror(-1)).\nAC_DEFUN([gl_FUNC_STRERROR_0],\n[\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  REPLACE_STRERROR_0=0\n  AC_CACHE_CHECK([whether strerror(0) succeeds],\n   [gl_cv_func_strerror_0_works],\n   [AC_RUN_IFELSE(\n      [AC_LANG_PROGRAM(\n         [[#include <string.h>\n           #include <errno.h>\n         ]],\n         [[int result = 0;\n           char *str;\n           errno = 0;\n           str = strerror (0);\n           if (!*str) result |= 1;\n           if (errno) result |= 2;\n           if (strstr (str, \"nknown\") || strstr (str, \"ndefined\"))\n             result |= 4;\n           return result;]])],\n      [gl_cv_func_strerror_0_works=yes],\n      [gl_cv_func_strerror_0_works=no],\n      [case \"$host_os\" in\n                             # Guess yes on glibc systems.\n         *-gnu* | gnu*)      gl_cv_func_strerror_0_works=\"guessing yes\" ;;\n                             # Guess yes on musl systems.\n         *-musl* | midipix*) gl_cv_func_strerror_0_works=\"guessing yes\" ;;\n                             # Guess yes on native Windows.\n         mingw* | windows*)  gl_cv_func_strerror_0_works=\"guessing yes\" ;;\n                             # If we don't know, obey --enable-cross-guesses.\n         *)                  gl_cv_func_strerror_0_works=\"$gl_cross_guess_normal\" ;;\n       esac\n      ])\n  ])\n  case \"$gl_cv_func_strerror_0_works\" in\n    *yes) ;;\n    *)\n      REPLACE_STRERROR_0=1\n      AC_DEFINE([REPLACE_STRERROR_0], [1], [Define to 1 if strerror(0)\n        does not return a message implying success.])\n      ;;\n  esac\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}