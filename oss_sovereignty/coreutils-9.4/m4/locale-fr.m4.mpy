{
  "module_name": "locale-fr.m4",
  "hash_id": "ecd60134cb822204e3fe7b155cdab159663858eaf9d9c18650d069ce5d0db8fe",
  "original_prompt": "Ingested from coreutils-9.4/m4/locale-fr.m4",
  "human_readable_source": "# locale-fr.m4 serial 23\ndnl Copyright (C) 2003, 2005-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl From Bruno Haible.\n\ndnl Determine the name of a french locale with traditional encoding.\nAC_DEFUN_ONCE([gt_LOCALE_FR],\n[\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_REQUIRE([AM_LANGINFO_CODESET])\n  AC_CACHE_CHECK([for a traditional french locale], [gt_cv_locale_fr], [\n    AC_LANG_CONFTEST([AC_LANG_SOURCE([[\n#include <locale.h>\n#include <time.h>\n#if HAVE_LANGINFO_CODESET\n# include <langinfo.h>\n#endif\n#include <stdlib.h>\n#include <string.h>\nstruct tm t;\nchar buf[16];\nint main () {\n  /* On BeOS and Haiku, locales are not implemented in libc.  Rather, libintl\n     imitates locale dependent behaviour by looking at the environment\n     variables, and all locales use the UTF-8 encoding.  */\n#if defined __BEOS__ || defined __HAIKU__\n  return 1;\n#else\n  /* Check whether the given locale name is recognized by the system.  */\n# if defined _WIN32 && !defined __CYGWIN__\n  /* On native Windows, setlocale(category, \"\") looks at the system settings,\n     not at the environment variables.  Also, when an encoding suffix such\n     as \".65001\" or \".54936\" is specified, it succeeds but sets the LC_CTYPE\n     category of the locale to \"C\".  */\n  if (setlocale (LC_ALL, getenv (\"LC_ALL\")) == NULL\n      || strcmp (setlocale (LC_CTYPE, NULL), \"C\") == 0)\n    return 1;\n# else\n  if (setlocale (LC_ALL, \"\") == NULL) return 1;\n# endif\n  /* Check whether nl_langinfo(CODESET) is nonempty and not \"ASCII\" or \"646\".\n     On Mac OS X 10.3.5 (Darwin 7.5) in the fr_FR locale, nl_langinfo(CODESET)\n     is empty, and the behaviour of Tcl 8.4 in this locale is not useful.\n     On OpenBSD 4.0, when an unsupported locale is specified, setlocale()\n     succeeds but then nl_langinfo(CODESET) is \"646\". In this situation,\n     some unit tests fail.\n     On MirBSD 10, when an unsupported locale is specified, setlocale()\n     succeeds but then nl_langinfo(CODESET) is \"UTF-8\".  */\n# if HAVE_LANGINFO_CODESET\n  {\n    const char *cs = nl_langinfo (CODESET);\n    if (cs[0] == '\\0' || strcmp (cs, \"ASCII\") == 0 || strcmp (cs, \"646\") == 0\n        || strcmp (cs, \"UTF-8\") == 0)\n      return 1;\n  }\n# endif\n# ifdef __CYGWIN__\n  /* On Cygwin, avoid locale names without encoding suffix, because the\n     locale_charset() function relies on the encoding suffix.  Note that\n     LC_ALL is set on the command line.  */\n  if (strchr (getenv (\"LC_ALL\"), '.') == NULL) return 1;\n# endif\n  /* Check whether in the abbreviation of the second month, the second\n     character (should be U+00E9: LATIN SMALL LETTER E WITH ACUTE) is only\n     one byte long. This excludes the UTF-8 encoding.  */\n  t.tm_year = 1975 - 1900; t.tm_mon = 2 - 1; t.tm_mday = 4;\n  if (strftime (buf, sizeof (buf), \"%b\", &t) < 3 || buf[2] != 'v') return 1;\n# if !defined __BIONIC__ /* Bionic libc's 'struct lconv' is just a dummy.  */\n  /* Check whether the decimal separator is a comma.\n     On NetBSD 3.0 in the fr_FR.ISO8859-1 locale, localeconv()->decimal_point\n     are nl_langinfo(RADIXCHAR) are both \".\".  */\n  if (localeconv () ->decimal_point[0] != ',') return 1;\n# endif\n  return 0;\n#endif\n}\n      ]])])\n    if AC_TRY_EVAL([ac_link]) && test -s conftest$ac_exeext; then\n      case \"$host_os\" in\n        # Handle native Windows specially, because there setlocale() interprets\n        # \"ar\" as \"Arabic\" or \"Arabic_Saudi Arabia.1256\",\n        # \"fr\" or \"fra\" as \"French\" or \"French_France.1252\",\n        # \"ge\"(!) or \"deu\"(!) as \"German\" or \"German_Germany.1252\",\n        # \"ja\" as \"Japanese\" or \"Japanese_Japan.932\",\n        # and similar.\n        mingw* | windows*)\n          # Test for the native Windows locale name.\n          if (LC_ALL=French_France.1252 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n            gt_cv_locale_fr=French_France.1252\n          else\n            # None found.\n            gt_cv_locale_fr=none\n          fi\n          ;;\n        *)\n          # Setting LC_ALL is not enough. Need to set LC_TIME to empty, because\n          # otherwise on Mac OS X 10.3.5 the LC_TIME=C from the beginning of the\n          # configure script would override the LC_ALL setting. Likewise for\n          # LC_CTYPE, which is also set at the beginning of the configure script.\n          # Test for the usual locale name.\n          if (LC_ALL=fr_FR LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n            gt_cv_locale_fr=fr_FR\n          else\n            # Test for the locale name with explicit encoding suffix.\n            if (LC_ALL=fr_FR.ISO-8859-1 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n              gt_cv_locale_fr=fr_FR.ISO-8859-1\n            else\n              # Test for the AIX, OSF/1, FreeBSD, NetBSD, OpenBSD locale name.\n              if (LC_ALL=fr_FR.ISO8859-1 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n                gt_cv_locale_fr=fr_FR.ISO8859-1\n              else\n                # Test for the HP-UX locale name.\n                if (LC_ALL=fr_FR.iso88591 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n                  gt_cv_locale_fr=fr_FR.iso88591\n                else\n                  # Test for the Solaris 7 locale name.\n                  if (LC_ALL=fr LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n                    gt_cv_locale_fr=fr\n                  else\n                    # None found.\n                    gt_cv_locale_fr=none\n                  fi\n                fi\n              fi\n            fi\n          fi\n          ;;\n      esac\n    fi\n    rm -fr conftest*\n  ])\n  LOCALE_FR=$gt_cv_locale_fr\n  case $LOCALE_FR in #(\n    '' | *[[[:space:]\\\"\\$\\'*@<:@]]*)\n      dnl This locale name might cause trouble with sh or make.\n      AC_MSG_WARN([invalid locale \"$LOCALE_FR\"; assuming \"none\"])\n      LOCALE_FR=none;;\n  esac\n  AC_SUBST([LOCALE_FR])\n])\n\ndnl Determine the name of a french locale with UTF-8 encoding.\nAC_DEFUN_ONCE([gt_LOCALE_FR_UTF8],\n[\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_REQUIRE([AM_LANGINFO_CODESET])\n  AC_CACHE_CHECK([for a french Unicode locale], [gt_cv_locale_fr_utf8], [\n    case \"$host_os\" in\n      *-musl* | midipix*)\n        dnl On musl libc, all kinds of ll_CC.UTF-8 locales exist, even without\n        dnl any locale file on disk. But they are effectively equivalent to the\n        dnl C.UTF-8 locale, except for locale categories (such as LC_MESSSAGES)\n        dnl for which localizations (.mo files) have been installed.\n        gt_cv_locale_fr_utf8=fr_FR.UTF-8\n        ;;\n      *)\n        AC_LANG_CONFTEST([AC_LANG_SOURCE([[\n#include <locale.h>\n#include <time.h>\n#if HAVE_LANGINFO_CODESET\n# include <langinfo.h>\n#endif\n#include <stdlib.h>\n#include <string.h>\nstruct tm t;\nchar buf[16];\nint main () {\n  /* On BeOS and Haiku, locales are not implemented in libc.  Rather, libintl\n     imitates locale dependent behaviour by looking at the environment\n     variables, and all locales use the UTF-8 encoding.  */\n#if !(defined __BEOS__ || defined __HAIKU__)\n  /* Check whether the given locale name is recognized by the system.  */\n# if defined _WIN32 && !defined __CYGWIN__\n  /* On native Windows, setlocale(category, \"\") looks at the system settings,\n     not at the environment variables.  Also, when an encoding suffix such\n     as \".65001\" or \".54936\" is specified, it succeeds but sets the LC_CTYPE\n     category of the locale to \"C\".  */\n  if (setlocale (LC_ALL, getenv (\"LC_ALL\")) == NULL\n      || strcmp (setlocale (LC_CTYPE, NULL), \"C\") == 0)\n    return 1;\n# else\n  if (setlocale (LC_ALL, \"\") == NULL) return 1;\n# endif\n  /* Check whether nl_langinfo(CODESET) is nonempty and not \"ASCII\" or \"646\".\n     On Mac OS X 10.3.5 (Darwin 7.5) in the fr_FR locale, nl_langinfo(CODESET)\n     is empty, and the behaviour of Tcl 8.4 in this locale is not useful.\n     On OpenBSD 4.0, when an unsupported locale is specified, setlocale()\n     succeeds but then nl_langinfo(CODESET) is \"646\". In this situation,\n     some unit tests fail.  */\n# if HAVE_LANGINFO_CODESET\n  {\n    const char *cs = nl_langinfo (CODESET);\n    if (cs[0] == '\\0' || strcmp (cs, \"ASCII\") == 0 || strcmp (cs, \"646\") == 0)\n      return 1;\n  }\n# endif\n# ifdef __CYGWIN__\n  /* On Cygwin, avoid locale names without encoding suffix, because the\n     locale_charset() function relies on the encoding suffix.  Note that\n     LC_ALL is set on the command line.  */\n  if (strchr (getenv (\"LC_ALL\"), '.') == NULL) return 1;\n# endif\n  /* Check whether in the abbreviation of the second month, the second\n     character (should be U+00E9: LATIN SMALL LETTER E WITH ACUTE) is\n     two bytes long, with UTF-8 encoding.  */\n  t.tm_year = 1975 - 1900; t.tm_mon = 2 - 1; t.tm_mday = 4;\n  if (strftime (buf, sizeof (buf), \"%b\", &t) < 4\n      || buf[1] != (char) 0xc3 || buf[2] != (char) 0xa9 || buf[3] != 'v')\n    return 1;\n#endif\n#if !defined __BIONIC__ /* Bionic libc's 'struct lconv' is just a dummy.  */\n  /* Check whether the decimal separator is a comma.\n     On NetBSD 3.0 in the fr_FR.ISO8859-1 locale, localeconv()->decimal_point\n     are nl_langinfo(RADIXCHAR) are both \".\".  */\n  if (localeconv () ->decimal_point[0] != ',') return 1;\n#endif\n  return 0;\n}\n          ]])])\n        if AC_TRY_EVAL([ac_link]) && test -s conftest$ac_exeext; then\n          case \"$host_os\" in\n            # Handle native Windows specially, because there setlocale() interprets\n            # \"ar\" as \"Arabic\" or \"Arabic_Saudi Arabia.1256\",\n            # \"fr\" or \"fra\" as \"French\" or \"French_France.1252\",\n            # \"ge\"(!) or \"deu\"(!) as \"German\" or \"German_Germany.1252\",\n            # \"ja\" as \"Japanese\" or \"Japanese_Japan.932\",\n            # and similar.\n            mingw* | windows*)\n              # Test for the hypothetical native Windows locale name.\n              if (LC_ALL=French_France.65001 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n                gt_cv_locale_fr_utf8=French_France.65001\n              else\n                # None found.\n                gt_cv_locale_fr_utf8=none\n              fi\n              ;;\n            *)\n              # Setting LC_ALL is not enough. Need to set LC_TIME to empty, because\n              # otherwise on Mac OS X 10.3.5 the LC_TIME=C from the beginning of the\n              # configure script would override the LC_ALL setting. Likewise for\n              # LC_CTYPE, which is also set at the beginning of the configure script.\n              # Test for the usual locale name.\n              if (LC_ALL=fr_FR LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n                gt_cv_locale_fr_utf8=fr_FR\n              else\n                # Test for the locale name with explicit encoding suffix.\n                if (LC_ALL=fr_FR.UTF-8 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n                  gt_cv_locale_fr_utf8=fr_FR.UTF-8\n                else\n                  # Test for the Solaris 7 locale name.\n                  if (LC_ALL=fr.UTF-8 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n                    gt_cv_locale_fr_utf8=fr.UTF-8\n                  else\n                    # None found.\n                    gt_cv_locale_fr_utf8=none\n                  fi\n                fi\n              fi\n              ;;\n          esac\n        fi\n        rm -fr conftest*\n        ;;\n    esac\n  ])\n  LOCALE_FR_UTF8=$gt_cv_locale_fr_utf8\n  case $LOCALE_FR_UTF8 in #(\n    '' | *[[[:space:]\\\"\\$\\'*@<:@]]*)\n      dnl This locale name might cause trouble with sh or make.\n      AC_MSG_WARN([invalid locale \"$LOCALE_FR_UTF8\"; assuming \"none\"])\n      LOCALE_FR_UTF8=none;;\n  esac\n  AC_SUBST([LOCALE_FR_UTF8])\n\n  dnl Users of $LOCALE_FR_UTF8 need to know which of the locale categories they\n  dnl can rely on.\n  case \"$host_os\" in\n    *-musl* | midipix*)\n      dnl On musl libc, locale categories other than LC_CTYPE and LC_MESSAGES\n      dnl are effectively unimplemented.\n      LC_COLLATE_IMPLEMENTED=false\n      LC_NUMERIC_IMPLEMENTED=false\n      LC_TIME_IMPLEMENTED=false\n      LC_MONETARY_IMPLEMENTED=false\n      ;;\n    *)\n      LC_COLLATE_IMPLEMENTED=true\n      LC_NUMERIC_IMPLEMENTED=true\n      LC_TIME_IMPLEMENTED=true\n      LC_MONETARY_IMPLEMENTED=true\n      ;;\n  esac\n  AC_SUBST([LC_COLLATE_IMPLEMENTED])\n  AC_SUBST([LC_NUMERIC_IMPLEMENTED])\n  AC_SUBST([LC_TIME_IMPLEMENTED])\n  AC_SUBST([LC_MONETARY_IMPLEMENTED])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}