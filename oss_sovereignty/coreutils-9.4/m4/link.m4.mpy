{
  "module_name": "link.m4",
  "hash_id": "a1fecfefd04586a0713419a02f8bc8702b08915f471f5a22643ec3430d7f5739",
  "original_prompt": "Ingested from coreutils-9.4/m4/link.m4",
  "human_readable_source": "# link.m4 serial 12\ndnl Copyright (C) 2009-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_LINK],\n[\n  AC_REQUIRE([gl_UNISTD_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_CHECK_FUNCS_ONCE([link])\n  if test $ac_cv_func_link = no; then\n    HAVE_LINK=0\n  else\n    AC_CACHE_CHECK([whether link obeys POSIX],\n      [gl_cv_func_link_works],\n      [touch conftest.a\n       # Assume that if we have lstat, we can also check symlinks.\n       if test $ac_cv_func_lstat = yes; then\n         ln -s conftest.a conftest.lnk\n       fi\n       AC_RUN_IFELSE(\n         [AC_LANG_PROGRAM(\n           [[#include <unistd.h>\n             #include <stdio.h>\n           ]],\n           [[int result = 0;\n             if (!link (\"conftest.a\", \"conftest.b/\"))\n               result |= 1;\n#if HAVE_LSTAT\n             if (!link (\"conftest.lnk/\", \"conftest.b\"))\n               result |= 2;\n             if (rename (\"conftest.a\", \"conftest.b\"))\n               result |= 4;\n             if (!link (\"conftest.b\", \"conftest.lnk\"))\n               result |= 8;\n#endif\n             return result;\n           ]])],\n         [gl_cv_func_link_works=yes], [gl_cv_func_link_works=no],\n         [case \"$host_os\" in\n                             # Guess yes on Linux systems.\n            linux-* | linux) gl_cv_func_link_works=\"guessing yes\" ;;\n                             # Guess yes on systems that emulate the Linux system calls.\n            midipix*)        gl_cv_func_link_works=\"guessing yes\" ;;\n                             # Guess yes on glibc systems.\n            *-gnu* | gnu*)   gl_cv_func_link_works=\"guessing yes\" ;;\n                             # If we don't know, obey --enable-cross-guesses.\n            *)               gl_cv_func_link_works=\"$gl_cross_guess_normal\" ;;\n          esac\n         ])\n       rm -f conftest.a conftest.b conftest.lnk])\n    case \"$gl_cv_func_link_works\" in\n      *yes) ;;\n      *)\n        REPLACE_LINK=1\n        ;;\n    esac\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}