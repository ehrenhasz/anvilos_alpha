{
  "module_name": "stat-prog.m4",
  "hash_id": "a570ed3d45dc2042c3319cd80257e3dbec2d2fe4f48b1e9eb7c0c195068a2fe9",
  "original_prompt": "Ingested from coreutils-9.4/m4/stat-prog.m4",
  "human_readable_source": "# stat-prog.m4 serial 7\n# Record the prerequisites of src/stat.c from the coreutils package.\n\n# Copyright (C) 2002-2023 Free Software Foundation, Inc.\n\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n\n# You should have received a copy of the GNU General Public License\n# along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n# Written by Jim Meyering.\n\nAC_DEFUN([cu_PREREQ_STAT_PROG],\n[\n  AC_REQUIRE([gl_FSUSAGE])\n  AC_REQUIRE([gl_FSTYPENAME])\n  AC_CHECK_HEADERS_ONCE([OS.h netinet/in.h sys/param.h sys/vfs.h])\n\n  dnl Check for vfs.h first, since this avoids a warning with nfs_client.h\n  dnl on Solaris 8.\n  test $ac_cv_header_sys_param_h = yes &&\n  test $ac_cv_header_sys_mount_h = yes &&\n  AC_CHECK_HEADERS([nfs/vfs.h],\n    [AC_CHECK_HEADERS([nfs/nfs_client.h])])\n\n  statvfs_includes=\"\\\nAC_INCLUDES_DEFAULT\n#include <sys/statvfs.h>\n\"\n  statfs_includes=\"\\\nAC_INCLUDES_DEFAULT\n#if HAVE_SYS_VFS_H\n# include <sys/vfs.h>\n#elif HAVE_SYS_MOUNT_H && HAVE_SYS_PARAM_H\n# include <sys/param.h>\n# include <sys/mount.h>\n# if HAVE_NETINET_IN_H && HAVE_NFS_NFS_CLNT_H && HAVE_NFS_VFS_H\n#  include <netinet/in.h>\n#  include <nfs/nfs_clnt.h>\n#  include <nfs/vfs.h>\n# endif\n#elif HAVE_OS_H\n# include <fs_info.h>\n#endif\n\"\n  dnl Keep this long conditional in sync with the USE_STATVFS conditional\n  dnl in ../src/stat.c.\n  if case \"$fu_cv_sys_stat_statvfs$fu_cv_sys_stat_statvfs64\" in\n       *yes*) ;; *) false;; esac &&\n     { AC_CHECK_MEMBERS([struct statvfs.f_basetype],,, [$statvfs_includes])\n       test $ac_cv_member_struct_statvfs_f_basetype = yes ||\n       { AC_CHECK_MEMBERS([struct statvfs.f_fstypename],,, [$statvfs_includes])\n         test $ac_cv_member_struct_statvfs_f_fstypename = yes ||\n         { test $ac_cv_member_struct_statfs_f_fstypename != yes &&\n           { AC_CHECK_MEMBERS([struct statvfs.f_type],,, [$statvfs_includes])\n             test $ac_cv_member_struct_statvfs_f_type = yes; }; }; }; }\n  then\n    AC_CHECK_MEMBERS([struct statvfs.f_namemax],,, [$statvfs_includes])\n    AC_COMPILE_IFELSE(\n      [AC_LANG_PROGRAM(\n         [$statvfs_includes],\n         [static statvfs s;\n          return (s.s_fsid ^ 0) == 0;])],\n      [AC_DEFINE([STRUCT_STATVFS_F_FSID_IS_INTEGER], [1],\n         [Define to 1 if the f_fsid member of struct statvfs is an integer.])])\n  else\n    AC_CHECK_MEMBERS([struct statfs.f_namelen, struct statfs.f_namemax,\n                      struct statfs.f_type, struct statfs.f_frsize],,,\n                     [$statfs_includes])\n    if test $ac_cv_header_OS_h != yes; then\n      AC_COMPILE_IFELSE(\n        [AC_LANG_PROGRAM(\n           [$statfs_includes],\n           [static statfs s;\n            return (s.s_fsid ^ 0) == 0;])],\n        [AC_DEFINE([STRUCT_STATFS_F_FSID_IS_INTEGER], [1],\n           [Define to 1 if the f_fsid member of struct statfs is an integer.])])\n    fi\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}