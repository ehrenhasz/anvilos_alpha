{
  "module_name": "calloc.m4",
  "hash_id": "0c744d2cd16238d99c18ab9d93a4789859c2d26d37adeca4f3048c58ad9a66d0",
  "original_prompt": "Ingested from coreutils-9.4/m4/calloc.m4",
  "human_readable_source": "# calloc.m4 serial 31\n\n# Copyright (C) 2004-2023 Free Software Foundation, Inc.\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\n# Written by Jim Meyering.\n\n# Determine whether calloc (N, S) returns non-NULL when N*S is zero,\n# and returns NULL when N*S overflows.\n# If so, define HAVE_CALLOC.  Otherwise, define calloc to rpl_calloc\n# and arrange to use a calloc wrapper function that does work in that case.\n\n# _AC_FUNC_CALLOC_IF([IF-WORKS], [IF-NOT])\n# -------------------------------------\n# If calloc is compatible with GNU calloc, run IF-WORKS, otherwise, IF-NOT.\nAC_DEFUN([_AC_FUNC_CALLOC_IF],\n[\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_CACHE_CHECK([whether calloc (0, n) and calloc (n, 0) return nonnull],\n    [ac_cv_func_calloc_0_nonnull],\n    [if test $cross_compiling != yes; then\n       ac_cv_func_calloc_0_nonnull=yes\n       AC_RUN_IFELSE(\n         [AC_LANG_PROGRAM(\n            [AC_INCLUDES_DEFAULT],\n            [[int result = 0;\n              char * volatile p = calloc (0, 0);\n              if (!p)\n                result |= 1;\n              free (p);\n              return result;\n            ]])],\n         [],\n         [ac_cv_func_calloc_0_nonnull=no])\n     else\n       case \"$host_os\" in\n                             # Guess yes on glibc systems.\n         *-gnu* | gnu*)      ac_cv_func_calloc_0_nonnull=\"guessing yes\" ;;\n                             # Guess yes on musl systems.\n         *-musl* | midipix*) ac_cv_func_calloc_0_nonnull=\"guessing yes\" ;;\n                             # Guess yes on native Windows.\n         mingw* | windows*)  ac_cv_func_calloc_0_nonnull=\"guessing yes\" ;;\n                             # If we don't know, obey --enable-cross-guesses.\n         *)                  ac_cv_func_calloc_0_nonnull=\"$gl_cross_guess_normal\" ;;\n       esac\n     fi\n    ])\n  AS_CASE([$ac_cv_func_calloc_0_nonnull], [*yes], [$1], [$2])\n])\n\n\n# gl_FUNC_CALLOC_GNU\n# ------------------\n# Replace calloc if it is not compatible with GNU libc.\nAC_DEFUN([gl_FUNC_CALLOC_GNU],\n[\n  AC_REQUIRE([gl_STDLIB_H_DEFAULTS])\n  AC_REQUIRE([gl_FUNC_CALLOC_POSIX])\n  REPLACE_CALLOC_FOR_CALLOC_GNU=\"$REPLACE_CALLOC_FOR_CALLOC_POSIX\"\n  if test $REPLACE_CALLOC_FOR_CALLOC_GNU = 0; then\n    _AC_FUNC_CALLOC_IF([], [REPLACE_CALLOC_FOR_CALLOC_GNU=1])\n  fi\n])# gl_FUNC_CALLOC_GNU\n\n# gl_FUNC_CALLOC_POSIX\n# --------------------\n# Test whether 'calloc' is POSIX compliant (sets errno to ENOMEM when it\n# fails, and doesn't mess up with ptrdiff_t or size_t overflow),\n# and replace calloc if it is not.\nAC_DEFUN([gl_FUNC_CALLOC_POSIX],\n[\n  AC_REQUIRE([gl_STDLIB_H_DEFAULTS])\n  AC_REQUIRE([gl_FUNC_MALLOC_POSIX])\n  if test $REPLACE_MALLOC_FOR_MALLOC_POSIX = 1; then\n    REPLACE_CALLOC_FOR_CALLOC_POSIX=1\n  fi\n  dnl Although in theory we should also test for size_t overflow,\n  dnl in practice testing for ptrdiff_t overflow suffices\n  dnl since PTRDIFF_MAX <= SIZE_MAX on all known Gnulib porting targets.\n  dnl A separate size_t test would slow down 'configure'.\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}