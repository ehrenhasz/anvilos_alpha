{
  "module_name": "mknod.m4",
  "hash_id": "29ec8b12c3869a28a19218260c243ece956075a03b5a6f0bb948cc053e4ef673",
  "original_prompt": "Ingested from coreutils-9.4/m4/mknod.m4",
  "human_readable_source": "# serial 8\n# See if we need to provide mknod replacement.\n\ndnl Copyright (C) 2009-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\n# Written by Eric Blake.\n\nAC_DEFUN([gl_FUNC_MKNOD],\n[\n  AC_REQUIRE([gl_SYS_STAT_H_DEFAULTS])\n  AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n  AC_REQUIRE([gl_FUNC_MKFIFO])\n  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n  AC_CHECK_FUNCS_ONCE([mknod])\n  if test $ac_cv_func_mknod = no; then\n    HAVE_MKNOD=0\n  else\n    dnl Detect BSD bug, where mknod requires root privileges to create fifo.\n    AC_CACHE_CHECK([whether mknod can create fifo without root privileges],\n      [gl_cv_func_mknod_works],\n      [AC_RUN_IFELSE(\n         [AC_LANG_PROGRAM(\n           [[#include <sys/stat.h>\n             #include <unistd.h>\n\n             /* Copied from root-uid.h.  FIXME: Just use root-uid.h.  */\n             #ifdef __TANDEM\n             # define ROOT_UID 65535\n             #else\n             # define ROOT_UID 0\n             #endif\n]], [[/* Indeterminate for super-user, assume no.  Why are you running\n         configure as root, anyway?  */\n      if (geteuid () == ROOT_UID) return 99;\n      if (mknod (\"conftest.fifo\", S_IFIFO | 0600, 0)) return 2;]])],\n         [gl_cv_func_mknod_works=yes],\n         [if test $? = 99 && test x\"$FORCE_UNSAFE_CONFIGURE\" = x; then\n            AC_MSG_FAILURE([you should not run configure as root ]dnl\n[(set FORCE_UNSAFE_CONFIGURE=1 in environment to bypass this check)])\n          fi\n          gl_cv_func_mknod_works=no],\n         [case \"$host_os\" in\n                             # Guess yes on Linux systems.\n            linux-* | linux) gl_cv_func_mknod_works=\"guessing yes\" ;;\n                             # Guess yes on glibc systems.\n            *-gnu* | gnu*)   gl_cv_func_mknod_works=\"guessing yes\" ;;\n                             # If we don't know, obey --enable-cross-guesses.\n            *)               gl_cv_func_mknod_works=\"$gl_cross_guess_normal\" ;;\n          esac\n         ])\n       rm -f conftest.fifo])\n    case \"$gl_cv_func_mknod_works\" in\n      *yes) ;;\n      *)\n        REPLACE_MKNOD=1\n        AC_DEFINE([MKNOD_FIFO_BUG], [1], [Define to 1 if mknod cannot create\n          a fifo without super-user privileges])\n        ;;\n    esac\n    dnl Systems that mishandle trailing slash on mkfifo also goof on mknod.\n    if test $REPLACE_MKFIFO = 1; then\n      REPLACE_MKNOD=1\n    fi\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}