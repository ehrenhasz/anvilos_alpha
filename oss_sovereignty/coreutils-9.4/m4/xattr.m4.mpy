{
  "module_name": "xattr.m4",
  "hash_id": "271fe59479f14e5cb3ebbbb3b1747b0d646cf787a6a27fb4bfe179c58b8cd6f6",
  "original_prompt": "Ingested from coreutils-9.4/m4/xattr.m4",
  "human_readable_source": "# xattr.m4 - check for Extended Attributes (Linux)\n# serial 7\n\n# Copyright (C) 2003-2023 Free Software Foundation, Inc.\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_FUNC_XATTR],\n[\n  AC_ARG_ENABLE([xattr],\n        AS_HELP_STRING([[--disable-xattr]],\n                       [do not support extended attributes]),\n        [use_xattr=$enableval], [use_xattr=yes])\n\n  LIB_XATTR=\n  AC_SUBST([LIB_XATTR])\n\n  if test \"$use_xattr\" = yes; then\n    AC_CACHE_CHECK([for xattr library with ATTR_ACTION_PERMISSIONS],\n      [gl_cv_xattr_lib],\n      [gl_cv_xattr_lib=no\n       AC_LANG_CONFTEST(\n         [AC_LANG_PROGRAM(\n            [[#include <attr/error_context.h>\n              #include <attr/libattr.h>\n              static int\n              is_attr_permissions (const char *name, struct error_context *ctx)\n              {\n                return attr_copy_action (name, ctx) == ATTR_ACTION_PERMISSIONS;\n              }\n            ]],\n            [[return attr_copy_fd (\"/\", 0, \"/\", 0, is_attr_permissions, 0);\n            ]])])\n       AC_LINK_IFELSE([],\n         [gl_cv_xattr_lib='none required'],\n         [xattr_saved_LIBS=$LIBS\n          LIBS=\"-lattr $LIBS\"\n          AC_LINK_IFELSE([], [gl_cv_xattr_lib=-lattr])\n          LIBS=$xattr_saved_LIBS])])\n    if test \"$gl_cv_xattr_lib\" = no; then\n      AC_MSG_WARN([libattr development library was not found or not usable.])\n      AC_MSG_WARN([AC_PACKAGE_NAME will be built without xattr support.])\n      use_xattr=no\n    elif test \"$gl_cv_xattr_lib\" != 'none required'; then\n      LIB_XATTR=$gl_cv_xattr_lib\n    fi\n  fi\n  if test \"$use_xattr\" = yes; then\n    AC_DEFINE([USE_XATTR], [1],\n      [Define to 1 to use the Linux extended attributes library.])\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}