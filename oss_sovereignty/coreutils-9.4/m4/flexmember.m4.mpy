{
  "module_name": "flexmember.m4",
  "hash_id": "70bb6b3f1c69ace3716ed71bf5258e714b024d6bc6a372c9460e2ac436ea2f74",
  "original_prompt": "Ingested from coreutils-9.4/m4/flexmember.m4",
  "human_readable_source": "# serial 5\n# Check for flexible array member support.\n\n# Copyright (C) 2006, 2009-2023 Free Software Foundation, Inc.\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\n# Written by Paul Eggert.\n\nAC_DEFUN([AC_C_FLEXIBLE_ARRAY_MEMBER],\n[\n  AC_CACHE_CHECK([for flexible array member],\n    ac_cv_c_flexmember,\n    [AC_COMPILE_IFELSE(\n       [AC_LANG_PROGRAM(\n          [[#include <stdlib.h>\n            #include <stdio.h>\n            #include <stddef.h>\n            struct m { struct m *next, **list; char name[]; };\n            struct s { struct s *p; struct m *m; int n; double d[]; };]],\n          [[int m = getchar ();\n            size_t nbytes = offsetof (struct s, d) + m * sizeof (double);\n            nbytes += sizeof (struct s) - 1;\n            nbytes -= nbytes % sizeof (struct s);\n            struct s *p = malloc (nbytes);\n            p->p = p;\n            p->m = NULL;\n            p->d[0] = 0.0;\n            return p->d != (double *) NULL;]])],\n       [ac_cv_c_flexmember=yes],\n       [ac_cv_c_flexmember=no])])\n  if test $ac_cv_c_flexmember = yes; then\n    AC_DEFINE([FLEXIBLE_ARRAY_MEMBER], [],\n      [Define to nothing if C supports flexible array members, and to\n       1 if it does not.  That way, with a declaration like 'struct s\n       { int n; short d@<:@FLEXIBLE_ARRAY_MEMBER@:>@; };', the struct hack\n       can be used with pre-C99 compilers.\n       Use 'FLEXSIZEOF (struct s, d, N * sizeof (short))' to calculate\n       the size in bytes of such a struct containing an N-element array.])\n  else\n    AC_DEFINE([FLEXIBLE_ARRAY_MEMBER], [1])\n  fi\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}