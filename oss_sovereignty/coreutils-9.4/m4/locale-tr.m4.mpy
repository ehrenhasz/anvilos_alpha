{
  "module_name": "locale-tr.m4",
  "hash_id": "c3ecb61fd1fad499cb380f7fbc767f4de6310d3c75f08324c7ef8e8346418ba4",
  "original_prompt": "Ingested from coreutils-9.4/m4/locale-tr.m4",
  "human_readable_source": "# locale-tr.m4 serial 15\ndnl Copyright (C) 2003, 2005-2023 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl From Bruno Haible.\n\ndnl Determine the name of a turkish locale with UTF-8 encoding.\nAC_DEFUN_ONCE([gt_LOCALE_TR_UTF8],\n[\n  AC_REQUIRE([AC_CANONICAL_HOST])\n  AC_REQUIRE([AM_LANGINFO_CODESET])\n  AC_CACHE_CHECK([for a turkish Unicode locale], [gt_cv_locale_tr_utf8], [\n    AC_LANG_CONFTEST([AC_LANG_SOURCE([[\n#include <locale.h>\n#include <time.h>\n#if HAVE_LANGINFO_CODESET\n# include <langinfo.h>\n#endif\n#include <stdlib.h>\n#include <string.h>\n#include <wctype.h>\nstruct tm t;\nchar buf[16];\nint main () {\n  /* On BeOS, locales are not implemented in libc.  Rather, libintl\n     imitates locale dependent behaviour by looking at the environment\n     variables, and all locales use the UTF-8 encoding.  But BeOS does not\n     implement the Turkish upper-/lowercase mappings.  Therefore, let this\n     program return 1 on BeOS.  */\n  /* Check whether the given locale name is recognized by the system.  */\n#if defined _WIN32 && !defined __CYGWIN__\n  /* On native Windows, setlocale(category, \"\") looks at the system settings,\n     not at the environment variables.  Also, when an encoding suffix such\n     as \".65001\" or \".54936\" is specified, it succeeds but sets the LC_CTYPE\n     category of the locale to \"C\".  */\n  if (setlocale (LC_ALL, getenv (\"LC_ALL\")) == NULL\n      || strcmp (setlocale (LC_CTYPE, NULL), \"C\") == 0)\n    return 1;\n#else\n  if (setlocale (LC_ALL, \"\") == NULL) return 1;\n#endif\n  /* Check whether nl_langinfo(CODESET) is nonempty and not \"ASCII\" or \"646\".\n     On Mac OS X 10.3.5 (Darwin 7.5) in the tr_TR locale, nl_langinfo(CODESET)\n     is empty, and the behaviour of Tcl 8.4 in this locale is not useful.\n     On OpenBSD 4.0, when an unsupported locale is specified, setlocale()\n     succeeds but then nl_langinfo(CODESET) is \"646\". In this situation,\n     some unit tests fail.  */\n#if HAVE_LANGINFO_CODESET\n  {\n    const char *cs = nl_langinfo (CODESET);\n    if (cs[0] == '\\0' || strcmp (cs, \"ASCII\") == 0 || strcmp (cs, \"646\") == 0)\n      return 1;\n  }\n#endif\n#ifdef __CYGWIN__\n  /* On Cygwin, avoid locale names without encoding suffix, because the\n     locale_charset() function relies on the encoding suffix.  Note that\n     LC_ALL is set on the command line.  */\n  if (strchr (getenv (\"LC_ALL\"), '.') == NULL) return 1;\n#endif\n  /* Check whether in the abbreviation of the eighth month, the second\n     character (should be U+011F: LATIN SMALL LETTER G WITH BREVE) is\n     two bytes long, with UTF-8 encoding.  */\n  t.tm_year = 1992 - 1900; t.tm_mon = 8 - 1; t.tm_mday = 19;\n  if (strftime (buf, sizeof (buf), \"%b\", &t) < 4\n      || buf[1] != (char) 0xc4 || buf[2] != (char) 0x9f)\n    return 1;\n  /* Check whether the upper-/lowercase mappings are as expected for\n     Turkish.  */\n  if (towupper ('i') != 0x0130 || towlower (0x0130) != 'i'\n      || towupper(0x0131) != 'I' || towlower ('I') != 0x0131)\n    return 1;\n  return 0;\n}\n      ]])])\n    if AC_TRY_EVAL([ac_link]) && test -s conftest$ac_exeext; then\n      case \"$host_os\" in\n        # Handle native Windows specially, because there setlocale() interprets\n        # \"ar\" as \"Arabic\" or \"Arabic_Saudi Arabia.1256\",\n        # \"fr\" or \"fra\" as \"French\" or \"French_France.1252\",\n        # \"ge\"(!) or \"deu\"(!) as \"German\" or \"German_Germany.1252\",\n        # \"ja\" as \"Japanese\" or \"Japanese_Japan.932\",\n        # and similar.\n        mingw* | windows*)\n          # Test for the hypothetical native Windows locale name.\n          if (LC_ALL=Turkish_Turkey.65001 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n            gt_cv_locale_tr_utf8=Turkish_Turkey.65001\n          else\n            # None found.\n            gt_cv_locale_tr_utf8=none\n          fi\n          ;;\n        *)\n          # Setting LC_ALL is not enough. Need to set LC_TIME to empty, because\n          # otherwise on Mac OS X 10.3.5 the LC_TIME=C from the beginning of the\n          # configure script would override the LC_ALL setting. Likewise for\n          # LC_CTYPE, which is also set at the beginning of the configure script.\n          # Test for the usual locale name.\n          if (LC_ALL=tr_TR LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n            gt_cv_locale_tr_utf8=tr_TR\n          else\n            # Test for the locale name with explicit encoding suffix.\n            if (LC_ALL=tr_TR.UTF-8 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n              gt_cv_locale_tr_utf8=tr_TR.UTF-8\n            else\n              # Test for the Solaris 7 locale name.\n              if (LC_ALL=tr.UTF-8 LC_TIME= LC_CTYPE= ./conftest; exit) 2>/dev/null; then\n                gt_cv_locale_tr_utf8=tr.UTF-8\n              else\n                # None found.\n                gt_cv_locale_tr_utf8=none\n              fi\n            fi\n          fi\n          ;;\n      esac\n    else\n      gt_cv_locale_tr_utf8=none\n    fi\n    rm -fr conftest*\n  ])\n  LOCALE_TR_UTF8=$gt_cv_locale_tr_utf8\n  case $LOCALE_TR_UTF8 in #(\n    '' | *[[[:space:]\\\"\\$\\'*@<:@]]*)\n      dnl This locale name might cause trouble with sh or make.\n      AC_MSG_WARN([invalid locale \"$LOCALE_TR_UTF8\"; assuming \"none\"])\n      LOCALE_TR_UTF8=none;;\n  esac\n  AC_SUBST([LOCALE_TR_UTF8])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}