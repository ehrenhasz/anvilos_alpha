{
  "module_name": "d-ino.m4",
  "hash_id": "ac017843c546dbdf67eaa4613aa2e1782c2e6de2b0e0bba86afe67a9561c8010",
  "original_prompt": "Ingested from coreutils-9.4/m4/d-ino.m4",
  "human_readable_source": "# serial 22\n\ndnl From Jim Meyering.\ndnl\ndnl Check whether struct dirent has a member named d_ino.\ndnl\n\n# Copyright (C) 1997, 1999-2001, 2003-2004, 2006-2007, 2009-2023 Free Software\n# Foundation, Inc.\n\n# This file is free software; the Free Software Foundation\n# gives unlimited permission to copy and/or distribute it,\n# with or without modifications, as long as this notice is preserved.\n\nAC_DEFUN([gl_CHECK_TYPE_STRUCT_DIRENT_D_INO],\n  [AC_REQUIRE([AC_CANONICAL_HOST]) dnl for cross-compiles\n   AC_CACHE_CHECK([for d_ino member in directory struct],\n                  [gl_cv_struct_dirent_d_ino],\n     [AC_RUN_IFELSE(\n        [AC_LANG_PROGRAM(\n           [[#include <sys/types.h>\n             #include <sys/stat.h>\n             #include <dirent.h>\n           ]],\n           [[DIR *dp = opendir (\".\");\n             struct dirent *e;\n             struct stat st;\n             if (! dp)\n               return 1;\n             e = readdir (dp);\n             if (! e)\n               { closedir (dp); return 2; }\n             if (lstat (e->d_name, &st) != 0)\n               { closedir (dp); return 3; }\n             if (e->d_ino != st.st_ino)\n               { closedir (dp); return 4; }\n             closedir (dp);\n             return 0;\n           ]])],\n           [gl_cv_struct_dirent_d_ino=yes],\n           [gl_cv_struct_dirent_d_ino=no],\n           [case \"$host_os\" in\n                                 # Guess yes on glibc systems with Linux kernel.\n              linux*-gnu*)       gl_cv_struct_dirent_d_ino=\"guessing yes\" ;;\n                                 # Guess yes on musl systems with Linux kernel.\n              linux*-musl*)      gl_cv_struct_dirent_d_ino=\"guessing yes\" ;;\n                                 # Guess yes on systems that emulate the Linux system calls.\n              midipix*)          gl_cv_struct_dirent_d_ino=\"guessing yes\" ;;\n                                 # Guess no on native Windows.\n              mingw* | windows*) gl_cv_struct_dirent_d_ino=\"guessing no\" ;;\n                                 # If we don't know, obey --enable-cross-guesses.\n              *)                 gl_cv_struct_dirent_d_ino=\"$gl_cross_guess_normal\" ;;\n            esac\n           ])])\n   case \"$gl_cv_struct_dirent_d_ino\" in\n     *yes)\n       AC_DEFINE([D_INO_IN_DIRENT], [1],\n         [Define if struct dirent has a member d_ino that actually works.])\n       ;;\n   esac\n  ]\n)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}