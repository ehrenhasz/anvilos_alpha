




























. @sysconfdir@/zfs/zfs-functions



do_depend()
{
	after sysfs zfs-mount zfs-zed
	keyword -lxc -openvz -prefix -vserver
}

do_start()
{
	check_boolean "$ZFS_SHARE" || exit 0

	check_module_loaded "zfs" || exit 0

	zfs_action "Sharing ZFS filesystems" "$ZFS" share -a
}

do_stop()
{
	check_boolean "$ZFS_UNSHARE" || exit 0

	check_module_loaded "zfs" || exit 0

	zfs_action "Unsharing ZFS filesystems" "$ZFS" unshare -a
}



if [ ! -e /sbin/openrc-run ]; then
	case "$1" in
		start)
			do_start
			;;
		stop)
			do_stop
			;;
		force-reload|reload|restart|status)
			
			;;
		*)
			[ -n "$1" ] && echo "Error: Unknown command $1."
			echo "Usage: $0 {start|stop}"
			exit 3
			;;
	esac

	exit $?
else
	
	depend() { do_depend; }
	start() { do_start; }
	stop() { do_stop; }
fi
