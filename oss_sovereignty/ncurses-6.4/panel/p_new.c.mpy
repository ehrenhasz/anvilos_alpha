{
  "module_name": "p_new.c",
  "hash_id": "4f6328b3ff49f5146b5935951df91c0c2dd73fa05492a9aadd389555a8ba443c",
  "original_prompt": "Ingested from ncurses-6.4/panel/p_new.c",
  "human_readable_source": " \n\n \n\n \n#include \"panel.priv.h\"\n\nMODULE_ID(\"$Id: p_new.c,v 1.24 2021/10/23 15:12:06 tom Exp $\")\n\n#ifdef TRACE\nstatic char *stdscr_id;\nstatic char *new_id;\n\nstatic PANEL *\nAllocPanel(const char *name)\n{\n  PANEL *result = typeMalloc(PANEL, 1);\n\n  _tracef(\"create :%s %p\", name, (void *)result);\n  return result;\n}\n#define InitUser(name) \\\n\tif (!name ## _id) \\\n\t    name ## _id = strdup(#name); \\\n\tpan->user = name ## _id; \\\n\t_tracef(\"create :user_ptr %p\", pan->user)\n#else\n#define AllocPanel(name) typeMalloc(PANEL, 1)\n#define InitUser(name) \\\n\t  pan->user = (void *)0\n#endif\n\n \nstatic PANEL *\nroot_panel(NCURSES_SP_DCL0)\n{\n#if NCURSES_SP_FUNCS\n  struct panelhook *ph = NCURSES_SP_NAME(_nc_panelhook) (sp);\n\n#elif NO_LEAKS\n  struct panelhook *ph = _nc_panelhook();\n#endif\n\n  if (_nc_stdscr_pseudo_panel == (PANEL *)0)\n    {\n\n      assert(SP_PARM && SP_PARM->_stdscr && !_nc_bottom_panel && !_nc_top_panel);\n#if NO_LEAKS\n      ph->destroy = del_panel;\n#endif\n      _nc_stdscr_pseudo_panel = AllocPanel(\"root_panel\");\n      if (_nc_stdscr_pseudo_panel != 0)\n\t{\n\t  PANEL *pan = _nc_stdscr_pseudo_panel;\n\t  WINDOW *win = SP_PARM->_stdscr;\n\n\t  pan->win = win;\n\t  pan->below = (PANEL *)0;\n\t  pan->above = (PANEL *)0;\n\t  InitUser(stdscr);\n\t  _nc_bottom_panel = _nc_top_panel = pan;\n\t}\n    }\n  return _nc_stdscr_pseudo_panel;\n}\n\nPANEL_EXPORT(PANEL *)\nnew_panel(WINDOW *win)\n{\n  PANEL *pan = (PANEL *)0;\n\n  GetWindowHook(win);\n\n  T((T_CALLED(\"new_panel(%p)\"), (void *)win));\n\n  if (!win)\n    returnPanel(pan);\n\n  if (!_nc_stdscr_pseudo_panel)\n    (void)root_panel(NCURSES_SP_ARG);\n  assert(_nc_stdscr_pseudo_panel);\n\n  if ((pan = AllocPanel(\"new_panel\")) != NULL)\n    {\n      pan->win = win;\n      pan->above = (PANEL *)0;\n      pan->below = (PANEL *)0;\n      InitUser(new);\n      (void)show_panel(pan);\n    }\n  returnPanel(pan);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}