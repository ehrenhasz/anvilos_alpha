{
  "module_name": "panel.priv.h",
  "hash_id": "a1bf15ffadf029c5dd0c02e6cd94f49febb8605c5dfe30d44957deb1424093c5",
  "original_prompt": "Ingested from ncurses-6.4/panel/panel.priv.h",
  "human_readable_source": " \n\n \n\n#ifndef NCURSES_PANEL_PRIV_H\n#define NCURSES_PANEL_PRIV_H 1\n \n\n#if HAVE_CONFIG_H\n#  include <ncurses_cfg.h>\n#endif\n\n#include <stdlib.h>\n#include <string.h>\n#include <assert.h>\n\nstruct screen;               \n\n#include \"curses.priv.h\"     \n\n#define NCURSES_OPAQUE_PANEL 0\n\n#include \"panel.h\"\n\n#ifdef TRACE\n   extern PANEL_EXPORT(const char *) _nc_my_visbuf (const void *, int);\n#  ifdef TRACE_TXT\n#    define USER_PTR(ptr,n) _nc_visbuf2(n, (const char *)ptr)\n#  else\n#    define USER_PTR(ptr,n) _nc_my_visbuf((const char *)ptr, n)\n#  endif\n\n#  define returnPanel(code)\tTRACE_RETURN1(code,panel)\n\n   extern PANEL_EXPORT(PANEL *) _nc_retrace_panel (PANEL *);\n   extern PANEL_EXPORT(void) _nc_dPanel (const char*, const PANEL*);\n   extern PANEL_EXPORT(void) _nc_dStack (const char*, int, const PANEL*);\n   extern PANEL_EXPORT(void) _nc_Wnoutrefresh (const PANEL*);\n   extern PANEL_EXPORT(void) _nc_Touchpan (const PANEL*);\n   extern PANEL_EXPORT(void) _nc_Touchline (const PANEL*, int, int);\n\n#  define dBug(x) _tracef x\n#  define dPanel(text,pan) _nc_dPanel(text,pan)\n#  define dStack(fmt,num,pan) _nc_dStack(fmt,num,pan)\n#  define Wnoutrefresh(pan) _nc_Wnoutrefresh(pan)\n#  define Touchpan(pan) _nc_Touchpan(pan)\n#  define Touchline(pan,start,count) _nc_Touchline(pan,start,count)\n#else  \n#  define returnPanel(code)\treturn code\n#  define dBug(x)\n#  define dPanel(text,pan)\n#  define dStack(fmt,num,pan)\n#  define Wnoutrefresh(pan) wnoutrefresh((pan)->win)\n#  define Touchpan(pan) touchwin((pan)->win)\n#  define Touchline(pan,start,count) touchline((pan)->win,start,count)\n#endif\n\n#if NCURSES_SP_FUNCS\n#define GetScreenHook(sp) \\\n\t\t\tstruct panelhook* ph = NCURSES_SP_NAME(_nc_panelhook)(sp)\n#define GetPanelHook(pan) \\\n\t\t\tGetScreenHook(pan ? _nc_screen_of((pan)->win) : 0)\n#define GetWindowHook(win) \\\n\t\t\tSCREEN* sp = _nc_screen_of(win); \\\n\t\t\tGetScreenHook(sp)\n#define GetHook(pan)\tSCREEN* sp = _nc_screen_of(pan->win); \\\n\t\t\tGetScreenHook(sp)\n\n#define _nc_stdscr_pseudo_panel ((ph)->stdscr_pseudo_panel)\n#define _nc_top_panel           ((ph)->top_panel)\n#define _nc_bottom_panel        ((ph)->bottom_panel)\n\n#else\t \n\n#define GetScreenHook(sp)  \n#define GetPanelHook(pan)  \n#define GetWindowHook(win)  \n#define GetHook(pan)  \n\n#define _nc_stdscr_pseudo_panel _nc_panelhook()->stdscr_pseudo_panel\n#define _nc_top_panel           _nc_panelhook()->top_panel\n#define _nc_bottom_panel        _nc_panelhook()->bottom_panel\n\n#endif\t \n\n#define EMPTY_STACK() (_nc_top_panel == _nc_bottom_panel)\n#define Is_Bottom(p)  (((p) != (PANEL*)0) && !EMPTY_STACK() && (_nc_bottom_panel->above == (p)))\n#define Is_Top(p)     (((p) != (PANEL*)0) && !EMPTY_STACK() && (_nc_top_panel == (p)))\n#define Is_Pseudo(p)  (((p) != (PANEL*)0) && ((p) == _nc_bottom_panel))\n\n \n \n#define IS_LINKED(p) (((p)->above || (p)->below ||((p)==_nc_bottom_panel)) ? TRUE : FALSE)\n\n#define PSTARTX(pan) ((pan)->win->_begx)\n#define PENDX(pan)   ((pan)->win->_begx + getmaxx((pan)->win) - 1)\n#define PSTARTY(pan) ((pan)->win->_begy)\n#define PENDY(pan)   ((pan)->win->_begy + getmaxy((pan)->win) - 1)\n\n \n#define PANELS_OVERLAPPED(pan1,pan2) \\\n(( !(pan1) || !(pan2) || \\\n       PSTARTY(pan1) > PENDY(pan2) || PENDY(pan1) < PSTARTY(pan2) ||\\\n       PSTARTX(pan1) > PENDX(pan2) || PENDX(pan1) < PSTARTX(pan2) ) \\\n     ? FALSE : TRUE)\n\n\n \n#define COMPUTE_INTERSECTION(pan1,pan2,ix1,ix2,iy1,iy2)\\\n   ix1 = (PSTARTX(pan1) < PSTARTX(pan2)) ? PSTARTX(pan2) : PSTARTX(pan1);\\\n   ix2 = (PENDX(pan1)   < PENDX(pan2))   ? PENDX(pan1)   : PENDX(pan2);\\\n   iy1 = (PSTARTY(pan1) < PSTARTY(pan2)) ? PSTARTY(pan2) : PSTARTY(pan1);\\\n   iy2 = (PENDY(pan1)   < PENDY(pan2))   ? PENDY(pan1)   : PENDY(pan2);\\\n   assert((ix1<=ix2) && (iy1<=iy2))\n\n\n \n#define PANEL_UPDATE(pan,panstart)\\\n{  PANEL* pan2 = ((panstart) ? (panstart) : _nc_bottom_panel);\\\n   while(pan2 && pan2->win) {\\\n      if ((pan2 != pan) && PANELS_OVERLAPPED(pan,pan2)) {\\\n        int y, ix1, ix2, iy1, iy2;\\\n        COMPUTE_INTERSECTION(pan, pan2, ix1, ix2, iy1, iy2);\\\n\tfor(y = iy1; y <= iy2; y++) {\\\n\t  if (is_linetouched(pan->win,y - PSTARTY(pan))) {\\\n            struct ldat* line = &(pan2->win->_line[y - PSTARTY(pan2)]);\\\n            CHANGED_RANGE(line, ix1 - PSTARTX(pan2), ix2 - PSTARTX(pan2));\\\n          }\\\n\t}\\\n      }\\\n      pan2 = pan2->above;\\\n   }\\\n}\n\n \n#define PANEL_UNLINK(pan,err) \\\n{  err = ERR;\\\n   if (pan) {\\\n     if (IS_LINKED(pan)) {\\\n       if ((pan)->below)\\\n         (pan)->below->above = (pan)->above;\\\n       if ((pan)->above)\\\n         (pan)->above->below = (pan)->below;\\\n       if ((pan) == _nc_bottom_panel) \\\n         _nc_bottom_panel = (pan)->above;\\\n       if ((pan) == _nc_top_panel) \\\n         _nc_top_panel = (pan)->below;\\\n       err = OK;\\\n     }\\\n     (pan)->above = (pan)->below = (PANEL*)0;\\\n   }\\\n}\n\n#define HIDE_PANEL(pan,err,err_if_unlinked)\\\n  if (IS_LINKED(pan)) {\\\n    Touchpan(pan);\\\n    PANEL_UPDATE(pan,(PANEL*)0);\\\n    PANEL_UNLINK(pan,err);\\\n  } \\\n  else {\\\n      err = err_if_unlinked;\\\n  }\n\n#if NCURSES_SP_FUNCS\n \nextern PANEL_EXPORT(void) NCURSES_SP_NAME(_nc_update_panels)(SCREEN*);\n#endif\n \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}