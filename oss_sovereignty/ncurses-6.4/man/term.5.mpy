{
  "module_name": "term.5",
  "hash_id": "213991b3edb0a2b98f85b2b77fd68d6ab27c12b10562d727230edecd06ef657c",
  "original_prompt": "Ingested from ncurses-6.4/man/term.5",
  "human_readable_source": ".\\\"***************************************************************************\n.\\\" Copyright 2018-2020,2021 Thomas E. Dickey                                *\n.\\\" Copyright 1998-2016,2017 Free Software Foundation, Inc.                  *\n.\\\"                                                                          *\n.\\\" Permission is hereby granted, free of charge, to any person obtaining a  *\n.\\\" copy of this software and associated documentation files (the            *\n.\\\" \"Software\"), to deal in the Software without restriction, including      *\n.\\\" without limitation the rights to use, copy, modify, merge, publish,      *\n.\\\" distribute, distribute with modifications, sublicense, and/or sell       *\n.\\\" copies of the Software, and to permit persons to whom the Software is    *\n.\\\" furnished to do so, subject to the following conditions:                 *\n.\\\"                                                                          *\n.\\\" The above copyright notice and this permission notice shall be included  *\n.\\\" in all copies or substantial portions of the Software.                   *\n.\\\"                                                                          *\n.\\\" THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *\n.\\\" OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *\n.\\\" MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *\n.\\\" IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *\n.\\\" DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *\n.\\\" OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *\n.\\\" THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *\n.\\\"                                                                          *\n.\\\" Except as contained in this notice, the name(s) of the above copyright   *\n.\\\" holders shall not be used in advertising or otherwise to promote the     *\n.\\\" sale, use or other dealings in this Software without prior written       *\n.\\\" authorization.                                                           *\n.\\\"***************************************************************************\n.\\\"\n.\\\" $Id: term.5,v 1.43 2021/12/25 21:28:59 tom Exp $\n.TH term 5\n.ie \\n(.g .ds `` \\(lq\n.el       .ds `` ``\n.ie \\n(.g .ds '' \\(rq\n.el       .ds '' ''\n.de NS\n.ie n  .sp\n.el    .sp .5\n.ie n  .in +4\n.el    .in +2\n.nf\n.ft C\t\t\t\\\" Courier\n..\n.de NE\n.fi\n.ft R\n.ie n  .in -4\n.el    .in -2\n..\n.de bP\n.ie n  .IP \\(bu 4\n.el    .IP \\(bu 2\n..\n.ds n 5\n.ds d @TERMINFO@\n.SH NAME\nterm \\- format of compiled term file.\n.SH SYNOPSIS\n.B term\n.SH DESCRIPTION\n.SS STORAGE LOCATION\nCompiled terminfo descriptions are placed under the directory \\fB\\*d\\fP.\nTwo configurations are supported (when building the \\fBncurses\\fP libraries):\n.TP 5\n.B directory tree\nA two-level scheme is used to avoid a linear search\nof a huge \\s-1UNIX\\s+1 system directory: \\fB\\*d/c/name\\fP where\n.I name\nis the name of the terminal, and\n.I c\nis the first character of\n.IR name .\nThus,\n.I act4\ncan be found in the file \\fB\\*d/a/act4\\fP.\nSynonyms for the same terminal are implemented by multiple\nlinks to the same compiled file.\n.TP 5\n.B hashed database\nUsing Berkeley database, two types of records are stored:\nthe terminfo data in the same format as stored in a directory tree with\nthe terminfo's primary name as a key,\nand records containing only aliases pointing to the primary name.\n.IP\nIf built to write hashed databases,\n\\fBncurses\\fP can still read terminfo databases organized as a directory tree,\nbut cannot write entries into the directory tree.\nIt can write (or rewrite) entries in the hashed database.\n.IP\n\\fBncurses\\fP distinguishes the two cases in the TERMINFO and TERMINFO_DIRS\nenvironment variable by assuming a directory tree for entries that\ncorrespond to an existing directory,\nand hashed database otherwise.\n.SS LEGACY STORAGE FORMAT\nThe format has been chosen so that it will be the same on all hardware.\nAn 8 or more bit byte is assumed, but no assumptions about byte ordering\nor sign extension are made.\n.PP\nThe compiled file is created with the \\fB@TIC@\\fP program,\nand read by the routine \\fBsetupterm\\fP(3X).\nThe file is divided into six parts:\n.RS 5\n.TP 3\na) \\fIheader\\fP,\n.TP 3\nb) \\fIterminal names\\fP,\n.TP 3\nc) \\fIboolean flags\\fP,\n.TP 3\nd) \\fInumbers\\fP,\n.TP 3\ne) \\fIstrings\\fP, and\n.TP 3\nf) \\fIstring table\\fP.\n.RE\n.PP\nThe \\fIheader\\fP section begins the file.\nThis section contains six short integers in the format\ndescribed below.\nThese integers are\n.RS 5\n.TP 5\n(1) the \\fImagic number\\fP (octal 0432);\n.TP 5\n(2) the size, in bytes, of the \\fIterminal names\\fP section;\n.TP 5\n(3) the number of bytes in the \\fIboolean flags\\fP section;\n.TP 5\n(4) the number of short integers in the \\fInumbers\\fP section;\n.TP 5\n(5) the number of offsets (short integers) in the \\fIstrings\\fP section;\n.TP 5\n(6) the size, in bytes, of the \\fIstring table\\fP.\n.RE\n.PP\nThe capabilities in the\n\\fIboolean flags\\fP,\n\\fInumbers\\fP, and\n\\fIstrings\\fP\nsections are in the same order as the file <term.h>.\n.PP\nShort integers are signed, in the range \\-32768 to 32767.\nThey are stored as two 8-bit bytes.\nThe first byte contains the least significant 8 bits of the value,\nand the second byte contains the most significant 8 bits.\n(Thus, the value represented is 256*second+first.)\nThis format corresponds to the hardware of the \\s-1VAX\\s+1\nand \\s-1PDP\\s+1-11 (that is, little-endian machines).\nMachines where this does not correspond to the hardware must read the\nintegers as two bytes and compute the little-endian value.\n.PP\nNumbers in a terminal description,\nwhether they are entries in the \\fInumbers\\fP or \\fIstrings\\fP table,\nare positive integers.\nBoolean flags are treated as positive one-byte integers.\nIn each case, those positive integers represent a terminal capability.\nThe terminal compiler @TIC@ uses negative integers to handle the cases where\na capability is not available:\n.bP\nIf a capability is absent from this terminal,\n@TIC@ stores a \\-1 in the corresponding table.\n.IP\nThe integer value \\-1 is represented by two bytes 0377, 0377.\n.br\nAbsent boolean values are represented by the byte 0 (false).\n.bP\nIf a capability has been canceled from this terminal,\n@TIC@ stores a \\-2 in the corresponding table.\n.IP\nThe integer value \\-2 is represented by two bytes 0377, 0376.\n.br\nThe boolean value \\-2 is represented by the byte 0376.\n.br\n.bP\nOther negative values are illegal.\n.PP\nThe \\fIterminal names\\fP section comes after the \\fIheader\\fP.\nIt contains the first line of the terminfo description,\nlisting the various names for the terminal,\nseparated by the \\*(``|\\*('' character.\nThe \\fIterminal names\\fP section is terminated\nwith an \\s-1ASCII NUL\\s+1 character.\n.PP\nThe \\fIboolean flags\\fP section has one byte for each flag.\nBoolean capabilities are either 1 or 0 (true or false)\naccording to whether the terminal supports the given capability or not.\n.PP\nBetween the \\fIboolean flags\\fP section and the \\fInumber\\fP section,\na null byte will be inserted, if necessary,\nto ensure that the \\fInumber\\fP section begins on an even byte\nThis is a relic of the PDP\\-11's word-addressed architecture,\noriginally designed to avoid traps induced\nby addressing a word on an odd byte boundary.\nAll short integers are aligned on a short word boundary.\n.PP\nThe \\fInumbers\\fP section is similar to the \\fIboolean flags\\fP section.\nEach capability takes up two bytes,\nand is stored as a little-endian short integer.\n.PP\nThe \\fIstrings\\fP section is also similar.\nEach capability is stored as a short integer.\nThe capability value is an index into the \\fIstring table\\fP.\n.PP\nThe \\fIstring table\\fP is the last section.\nIt contains all of the values of string capabilities referenced in\nthe \\fIstrings\\fP section.\nEach string is null-terminated.\nSpecial characters in ^X or \\ec notation are stored in their\ninterpreted form, not the printing representation.\nPadding information $<nn> and parameter information %x are\nstored intact in uninterpreted form.\n.SS EXTENDED STORAGE FORMAT\nThe previous section describes the conventional terminfo binary format.\nWith some minor variations of the offsets (see PORTABILITY),\nthe same binary format is used in all modern UNIX systems.\nEach system uses a predefined set of boolean, number or string capabilities.\n.PP\nThe \\fBncurses\\fP libraries and applications support\nextended terminfo binary format,\nallowing users to define capabilities which are loaded at runtime.\nThis\nextension is made possible by using the fact that the other implementations\nstop reading the terminfo data when they have reached the end of the size given\nin the header.\n\\fBncurses\\fP checks the size,\nand if it exceeds that due to the predefined data,\ncontinues to parse according to its own scheme.\n.PP\nFirst, it reads the extended header (5 short integers):\n.RS 5\n.TP 5\n(1)\ncount of extended boolean capabilities\n.TP 5\n(2)\ncount of extended numeric capabilities\n.TP 5\n(3)\ncount of extended string capabilities\n.TP 5\n(4)\ncount of the items in extended string table\n.TP 5\n(5)\nsize of the extended string table in bytes\n.RE\n.PP\nThe count- and size-values for the extended string table\ninclude the extended capability \\fInames\\fP as well as\nextended capability \\fIvalues\\fP.\n.PP\nUsing the counts and sizes, \\fBncurses\\fP allocates arrays and reads data\nfor the extended capabilities in the same order as the header information.\n.PP\nThe extended string table contains values for string capabilities.\nAfter the end of these values, it contains the names for each of\nthe extended capabilities in order, e.g., booleans, then numbers and\nfinally strings.\n.PP\nApplications which manipulate terminal data can use the definitions\ndescribed in \\fBterm_variables\\fP(3X) which associate the long capability\nnames with members of a \\fBTERMTYPE\\fP structure.\n.\n.SS EXTENDED NUMBER FORMAT\n.PP\nOn occasion, 16-bit signed integers are not large enough.\nWith \\fBncurses\\fP 6.1, a new format was introduced by making a few changes\nto the legacy format:\n.bP\na different magic number (octal 01036)\n.bP\nchanging the type for the \\fInumber\\fP array from signed 16-bit integers\nto signed 32-bit integers.\n.PP\nTo maintain compatibility, the library presents the same data structures\nto direct users of the \\fBTERMTYPE\\fP structure as in previous formats.\nHowever, that cannot provide callers with the extended numbers.\nThe library uses a similar but hidden data structure \\fBTERMTYPE2\\fP\nto provide data for the terminfo functions.\n.SH PORTABILITY\n.SS setupterm\n.PP\nNote that it is possible for\n.B setupterm\nto expect a different set of capabilities\nthan are actually present in the file.\nEither the database may have been updated since\n.B setupterm\nwas recompiled\n(resulting in extra unrecognized entries in the file)\nor the program may have been recompiled more recently\nthan the database was updated\n(resulting in missing entries).\nThe routine\n.B setupterm\nmust be prepared for both possibilities \\-\nthis is why the numbers and sizes are included.\nAlso, new capabilities must always be added at the end of the lists\nof boolean, number, and string capabilities.\n.SS Binary format\n.PP\nX/Open Curses does not specify a format for the terminfo database.\nUNIX System V curses used a directory-tree of binary files,\none per terminal description.\n.PP\nDespite the consistent use of little-endian for numbers and the otherwise\nself-describing format, it is not wise to count on portability of binary\nterminfo entries between commercial UNIX versions.\nThe problem is that there\nare at least three versions of terminfo (under HP\\-UX, AIX, and OSF/1) which\ndiverged from System V terminfo after SVr1, and have added extension\ncapabilities to the string table that (in the binary format) collide with\nSystem V and XSI Curses extensions.\nSee \\fBterminfo\\fP(\\*n) for detailed\ndiscussion of terminfo source compatibility issues.\n.PP\nThis implementation is by default compatible with the binary\nterminfo format used by Solaris curses,\nexcept in a few less-used details\nwhere it was found that the latter did not match X/Open Curses.\nThe format used by the other Unix versions\ncan be matched by building ncurses\nwith different configuration options.\n.SS Magic codes\n.PP\nThe magic number in a binary terminfo file is the first 16-bits (two bytes).\nBesides making it more reliable for the library to check that a file\nis terminfo,\nutilities such as \\fBfile\\fP(1) also use that to tell what the file-format is.\nSystem V defined more than one magic number,\nwith 0433, 0435 as screen-dumps (see \\fBscr_dump\\fP(5)).\nThis implementation uses 01036 as a continuation of that sequence,\nbut with a different high-order byte to avoid confusion.\n.SS The TERMTYPE structure\n.PP\nDirect access to the \\fBTERMTYPE\\fP structure is provided for legacy\napplications.\nPortable applications should use the \\fBtigetflag\\fP and related functions\ndescribed in \\fBcurs_terminfo\\fP(3X) for reading terminal capabilities.\n.SS Mixed-case terminal names\n.PP\nA small number of terminal descriptions use uppercase characters in\ntheir names.\nIf the underlying filesystem ignores the difference between\nuppercase and lowercase,\n\\fBncurses\\fP represents the \\*(``first character\\*(''\nof the terminal name used as\nthe intermediate level of a directory tree in (two-character) hexadecimal form.\n.SH EXAMPLE\nAs an example, here is a description for the Lear-Siegler\nADM\\-3, a popular though rather stupid early terminal:\n.NS\nadm3a|lsi adm3a,\n        am,\n        cols#80, lines#24,\n        bel=^G, clear=\\032$<1>, cr=^M, cub1=^H, cud1=^J,\n        cuf1=^L, cup=\\\\E=%p1%{32}%+%c%p2%{32}%+%c, cuu1=^K,\n        home=^^, ind=^J,\n.NS\n.PP\nand a hexadecimal dump of the compiled terminal description:\n.NS\n.ft CW\n\\s-20000  1a 01 10 00 02 00 03 00  82 00 31 00 61 64 6d 33  ........ ..1.adm3\n0010  61 7c 6c 73 69 20 61 64  6d 33 61 00 00 01 50 00  a|lsi ad m3a...P.\n0020  ff ff 18 00 ff ff 00 00  02 00 ff ff ff ff 04 00  ........ ........\n0030  ff ff ff ff ff ff ff ff  0a 00 25 00 27 00 ff ff  ........ ..%.'...\n0040  29 00 ff ff ff ff 2b 00  ff ff 2d 00 ff ff ff ff  ).....+. ..-.....\n0050  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n0060  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n0070  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n0080  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n0090  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n00a0  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n00b0  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n00c0  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n00d0  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n00e0  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n00f0  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n0100  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n0110  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  ........ ........\n0120  ff ff ff ff ff ff 2f 00  07 00 0d 00 1a 24 3c 31  ....../. .....$<1\n0130  3e 00 1b 3d 25 70 31 25  7b 33 32 7d 25 2b 25 63  >..=%p1% {32}%+%c\n0140  25 70 32 25 7b 33 32 7d  25 2b 25 63 00 0a 00 1e  %p2%{32} %+%c....\n0150  00 08 00 0c 00 0b 00 0a  00                       ........ .\\s+2\n.ft R\n.NE\n.sp\n.SH LIMITS\nSome limitations:\n.bP\ntotal compiled entries cannot exceed 4096 bytes in the legacy format.\n.bP\ntotal compiled entries cannot exceed 32768 bytes in the extended format.\n.bP\nthe name field cannot exceed 128 bytes.\n.PP\nCompiled entries are limited to 32768 bytes because offsets into the\n\\fIstrings table\\fP use two-byte integers.\nThe legacy format could have supported 32768-byte entries,\nbut was limited a virtual memory page's 4096 bytes.\n.SH FILES\n\\*d/*/*\tcompiled terminal capability database\n.SH SEE ALSO\n\\fBcurses\\fP(3X), \\fBterminfo\\fP(\\*n).\n.SH AUTHORS\nThomas E. Dickey\n.br\nextended terminfo format for ncurses 5.0\n.br\nhashed database support for ncurses 5.6\n.br\nextended number support for ncurses 6.1\n.sp\nEric S. Raymond\n.br\ndocumented legacy terminfo format, e.g., from \\fIpcurses\\fP.\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}