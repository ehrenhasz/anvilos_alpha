{
  "module_name": "curs_termcap.3x",
  "hash_id": "03096bbb7440a492b5f2c2c744078f01066c0749d5387e6f3fcaa508a7f1a451",
  "original_prompt": "Ingested from ncurses-6.4/man/curs_termcap.3x",
  "human_readable_source": ".\\\"***************************************************************************\n.\\\" Copyright 2018-2022,2022 Thomas E. Dickey                                *\n.\\\" Copyright 1998-2017,2018 Free Software Foundation, Inc.                  *\n.\\\"                                                                          *\n.\\\" Permission is hereby granted, free of charge, to any person obtaining a  *\n.\\\" copy of this software and associated documentation files (the            *\n.\\\" \"Software\"), to deal in the Software without restriction, including      *\n.\\\" without limitation the rights to use, copy, modify, merge, publish,      *\n.\\\" distribute, distribute with modifications, sublicense, and/or sell       *\n.\\\" copies of the Software, and to permit persons to whom the Software is    *\n.\\\" furnished to do so, subject to the following conditions:                 *\n.\\\"                                                                          *\n.\\\" The above copyright notice and this permission notice shall be included  *\n.\\\" in all copies or substantial portions of the Software.                   *\n.\\\"                                                                          *\n.\\\" THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *\n.\\\" OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *\n.\\\" MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *\n.\\\" IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *\n.\\\" DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *\n.\\\" OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *\n.\\\" THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *\n.\\\"                                                                          *\n.\\\" Except as contained in this notice, the name(s) of the above copyright   *\n.\\\" holders shall not be used in advertising or otherwise to promote the     *\n.\\\" sale, use or other dealings in this Software without prior written       *\n.\\\" authorization.                                                           *\n.\\\"***************************************************************************\n.\\\"\n.\\\" $Id: curs_termcap.3x,v 1.56 2022/02/12 20:05:11 tom Exp $\n.TH curs_termcap 3X \"\"\n.ie \\n(.g .ds `` \\(lq\n.el       .ds `` ``\n.ie \\n(.g .ds '' \\(rq\n.el       .ds '' ''\n.de bP\n.ie n  .IP \\(bu 4\n.el    .IP \\(bu 2\n..\n.na\n.hy 0\n.ds n 5\n.SH NAME\n\\fBPC\\fP,\n\\fBUP\\fP,\n\\fBBC\\fP,\n\\fBospeed\\fP,\n\\fBtgetent\\fP,\n\\fBtgetflag\\fP,\n\\fBtgetnum\\fP,\n\\fBtgetstr\\fP,\n\\fBtgoto\\fP,\n\\fBtputs\\fP \\- \\fBcurses\\fP emulation of termcap\n.ad\n.hy\n.SH SYNOPSIS\n\\fB#include <curses.h>\\fP\n.br\n\\fB#include <term.h>\\fP\n.sp\n\\fBextern char PC;\\fP\n.br\n\\fBextern char * UP;\\fP\n.br\n\\fBextern char * BC;\\fP\n.br\n\\fBextern @NCURSES_OSPEED@ ospeed;\\fP\n.sp\n\\fBint tgetent(char *\\fIbp\\fB, const char *\\fIname\\fB);\\fR\n.br\n\\fBint tgetflag(const char *\\fIid\\fB);\\fR\n.br\n\\fBint tgetnum(const char *\\fIid\\fB);\\fR\n.br\n\\fBchar *tgetstr(const char *\\fIid\\fB, char **\\fIarea\\fB);\\fR\n.br\n\\fBchar *tgoto(const char *\\fIcap\\fB, int \\fIcol\\fB, int \\fIrow\\fB);\\fR\n.br\n\\fBint tputs(const char *\\fIstr\\fB, int \\fIaffcnt\\fB, int (*\\fIputc\\fB)(int));\\fR\n.br\n.SH DESCRIPTION\nThese routines are included as a conversion aid for programs that use\nthe \\fItermcap\\fP library.\nTheir parameters are the same, but the\nroutines are emulated using the \\fIterminfo\\fP database.\nThus, they\ncan only be used to query the capabilities of entries for which a\nterminfo entry has been compiled.\n.SS Initialization\n.PP\nThe \\fBtgetent\\fP routine loads the entry for \\fIname\\fP.\nIt returns:\n.RS 3\n.TP 3\n1\non success,\n.TP 3\n0\nif there is no such entry\n(or that it is a generic type, having too little information for curses\napplications to run), and\n.TP 3\n\\-1\nif the terminfo database could not be found.\n.RE\n.PP\nThis differs from the \\fItermcap\\fP library in two ways:\n.RS 3\n.bP\nThe emulation ignores the buffer pointer \\fIbp\\fP.\nThe \\fItermcap\\fP library would store a copy of the terminal\ndescription in the area referenced by this pointer.\nHowever, ncurses stores its terminal descriptions in compiled\nbinary form, which is not the same thing.\n.bP\nThere is a difference in return codes.\nThe \\fItermcap\\fP library does not check if the terminal\ndescription is marked with the \\fIgeneric\\fP capability,\nor if the terminal description has cursor-addressing.\n.RE\n.SS Capability Values\n.PP\nThe \\fBtgetflag\\fP routine gets the boolean entry for \\fIid\\fP,\nor zero if it is not available.\n.PP\nThe \\fBtgetnum\\fP routine gets the numeric entry for \\fIid\\fP,\nor \\-1 if it is not available.\n.PP\nThe \\fBtgetstr\\fP routine returns the string entry for \\fIid\\fP,\nor zero if it is not available.\nUse \\fBtputs\\fP to output the returned string.\nThe \\fIarea\\fP parameter is used as follows:\n.RS 3\n.bP\nIt is assumed to be the address of a pointer to a buffer managed by the\ncalling application.\n.bP\nHowever, ncurses checks to ensure that \\fBarea\\fP is not NULL,\nand also that the resulting buffer pointer is not NULL.\nIf either check fails, the \\fIarea\\fP parameter is ignored.\n.bP\nIf the checks succeed, ncurses also copies the return value to\nthe buffer pointed to by \\fIarea\\fP,\nand the \\fIarea\\fP value will be updated to point past the null ending\nthis value.\n.bP\nThe return value itself is an address in the terminal description which\nis loaded into memory.\n.RE\n.PP\nOnly the first two characters of the \\fBid\\fP parameter of\n\\fBtgetflag\\fP,\n\\fBtgetnum\\fP and\n\\fBtgetstr\\fP are compared in lookups.\n.SS Formatting Capabilities\n.PP\nThe \\fBtgoto\\fP routine expands the given capability using the parameters.\n.bP\nBecause the capability may have padding characters,\nthe output of \\fBtgoto\\fP should be passed to \\fBtputs\\fP\nrather than some other output function such as \\fBprintf\\fP(3).\n.bP\nWhile \\fBtgoto\\fP is assumed to be used for the two-parameter\ncursor positioning capability,\ntermcap applications also use it for single-parameter capabilities.\n.IP\nDoing this shows a quirk in \\fBtgoto\\fP: most hardware\nterminals use cursor addressing with \\fIrow\\fP first,\nbut the original developers of the termcap interface chose to\nput the \\fIcolumn\\fP parameter first.\nThe \\fBtgoto\\fP function swaps the order of parameters.\nIt does this also for calls requiring only a single parameter.\nIn that case, the first parameter is merely a placeholder.\n.bP\nNormally the ncurses library is compiled with terminfo support.\nIn that case, \\fBtgoto\\fP uses \\fBtparm\\fP(3X) (a more capable formatter).\n.IP\nHowever, \\fBtparm\\fP is not a \\fItermcap\\fP feature,\nand portable \\fItermcap\\fP applications should not rely upon its availability.\n.PP\nThe \\fBtputs\\fP routine is described on the \\fBcurs_terminfo\\fP(3X) manual\npage.\nIt can retrieve capabilities by either termcap or terminfo name.\n.SS Global Variables\n.PP\nThe variables\n\\fBPC\\fP,\n\\fBUP\\fP and\n\\fBBC\\fP\nare set by \\fBtgetent\\fP to the terminfo entry's data for\n\\fBpad_char\\fP,\n\\fBcursor_up\\fP and\n\\fBbackspace_if_not_bs\\fP,\nrespectively.\n\\fBUP\\fP is not used by ncurses.\n\\fBPC\\fP is used in the \\fBtdelay_output\\fP function.\n\\fBBC\\fP is used in the \\fBtgoto\\fP emulation.\nThe variable \\fBospeed\\fP is set by ncurses in a system-specific coding\nto reflect the terminal speed.\n.SS Releasing Memory\nThe termcap functions provide no means for freeing memory,\nbecause legacy termcap implementations used only the buffer\nareas provided by the caller via \\fBtgetent\\fP and \\fBtgetstr\\fP.\nThose buffers are unused in terminfo.\n.PP\nOn the other hand, terminfo allocates memory.\nIt uses \\fBsetupterm\\fP to retrieve the data used by \\fBtgetent\\fP\nand the functions which return capability values such as \\fBtgetstr\\fP.\nOne could use\n.sp\n\t\\fBdel_curterm(cur_term);\\fP\n.sp\n.PP\nto free this memory, but there is an additional complication with ncurses.\nIt uses a fixed-size \\fIpool\\fP of storage locations,\none per setting of the \\fBTERM\\fP variable when \\fBtgetent\\fP is called.\nThe \\fBscreen\\fP(1) program relies upon this arrangement,\nto improve its performance.\n.PP\nAn application which uses only the low-level termcap functions could\nfree the memory using \\fBdel_curterm\\fP,\nbecause the pool is freed using other functions\n(see \\fBcurs_memleaks\\fP(3X)).\n.\n.SH RETURN VALUE\nExcept where explicitly noted,\nroutines that return an integer return \\fBERR\\fP upon failure and \\fBOK\\fP\n(SVr4 only specifies \"an integer value other than \\fBERR\\fP\") upon successful\ncompletion.\n.PP\nRoutines that return pointers return \\fBNULL\\fP on error.\n.SH BUGS\nIf you call \\fBtgetstr\\fP to fetch \\fBca\\fP or any other parameterized string,\nbe aware that it will be returned in terminfo notation, not the older and\nnot-quite-compatible termcap notation.\nThis will not cause problems if all\nyou do with it is call \\fBtgoto\\fP or \\fBtparm\\fP, which both expand\nterminfo-style strings as terminfo.\n(The \\fBtgoto\\fP function, if configured to support termcap, will check\nif the string is indeed terminfo-style by looking for \"%p\" parameters or\n\"$<..>\" delays, and invoke a termcap-style parser if the string does not\nappear to be terminfo).\n.PP\nBecause terminfo conventions for representing padding in string capabilities\ndiffer from termcap's,\nusers can be surprised:\n.bP\n\\fBtputs(\"50\")\\fP in a terminfo system will put out a literal \\*(``50\\*(''\nrather than busy-waiting for 50 milliseconds.\n.bP\nHowever, if ncurses is configured to support termcap,\nit may also have been configured to support the BSD-style padding.\n.IP\nIn that case, \\fBtputs\\fP inspects strings passed to it,\nlooking for digits at the beginning of the string.\n.IP\n\\fBtputs(\"50\")\\fP in a termcap system may wait for 50 milliseconds\nrather than put out a literal \\*(``50\\*(''\n.PP\nNote that termcap has nothing analogous to terminfo's \\fBsgr\\fP string.\nOne consequence of this is that termcap applications assume \\fBme\\fP\n(terminfo \\fBsgr0\\fP) does not reset the alternate character set.\nThis implementation checks for, and modifies the data shown to the\ntermcap interface to accommodate termcap's limitation in this respect.\n.SH PORTABILITY\n.SS Standards\nThese functions are provided for supporting legacy applications,\nand should not be used in new programs:\n.bP\nThe XSI Curses standard, Issue 4 describes these functions.\nHowever, they\nare marked TO BE WITHDRAWN and may be removed in future versions.\n.bP\nX/Open Curses, Issue 5 (December 2007) marked the termcap interface\n(along with \\fBvwprintw\\fP and \\fBvwscanw\\fP) as withdrawn.\n.PP\nNeither the XSI Curses standard nor the SVr4 man pages documented the return\nvalues of \\fBtgetent\\fP correctly, though all three were in fact returned ever\nsince SVr1.\nIn particular, an omission in the XSI Curses documentation has been\nmisinterpreted to mean that \\fBtgetent\\fP returns \\fBOK\\fP or \\fBERR\\fP.\nBecause the purpose of these functions is to provide compatibility with\nthe \\fItermcap\\fP library, that is a defect in XCurses, Issue 4, Version 2\nrather than in ncurses.\n.SS Compatibility with BSD Termcap\n.PP\nExternal variables are provided for support of certain termcap applications.\nHowever, termcap applications' use of those variables is poorly documented,\ne.g., not distinguishing between input and output.\nIn particular, some applications are reported to declare and/or\nmodify \\fBospeed\\fP.\n.PP\nThe comment that only the first two characters of the \\fBid\\fP parameter\nare used escapes many application developers.\nThe original BSD 4.2 termcap library (and historical relics thereof)\ndid not require a trailing null NUL on the parameter name passed\nto \\fBtgetstr\\fP, \\fBtgetnum\\fP and \\fBtgetflag\\fP.\nSome applications assume that the termcap interface does not require\nthe trailing NUL for the parameter name.\nTaking into account these issues:\n.bP\nAs a special case,\n\\fBtgetflag\\fP matched against a single-character identifier\nprovided that was at the end of the terminal description.\nYou should not rely upon this behavior in portable programs.\nThis implementation disallows matches against single-character capability names.\n.bP\nThis implementation disallows matches by the termcap interface against\nextended capability names which are longer than two characters.\n.PP\nThe BSD termcap function \\fBtgetent\\fP returns the text of a termcap\nentry in the buffer passed as an argument.\nThis library (like other terminfo implementations) does not store\nterminal descriptions as text.\nIt sets the buffer contents to a null-terminated string.\n.SS Other Compatibility\nThis library includes a termcap.h header,\nfor compatibility with other implementations.\nBut the header is rarely used because the other implementations\nare not strictly compatible.\n.PP\nThe original BSD termcap (through 4.3BSD) had no header file which\ngave function prototypes, because that was a feature of ANSI C.\nBSD termcap was written several years before C was standardized.\nHowever, there were two different termcap.h header files in the BSD\nsources:\n.bP\nOne was used internally by the \\fBjove\\fP editor in 2BSD through 4.4BSD.\nIt defined global symbols for the termcap variables which it used.\n.bP\nThe other appeared in 4.4BSD Lite Release 2 (mid-1993)\nas part of \\fIlibedit\\fP (also known as the \\fIeditline\\fP library).\nThe CSRG source history shows that this was added in mid-1992.\nThe \\fIlibedit\\fP header file was used internally,\nas a convenience for compiling the \\fIeditline\\fP library.\nIt declared function prototypes, but no global variables.\n.PP\nThe header file from \\fIlibedit\\fP was added to NetBSD's termcap\nlibrary in mid-1994.\n.PP\nMeanwhile, GNU termcap was under development, starting in 1990.\nThe first release (termcap 1.0) in 1991 included a termcap.h header.\nThe second release (termcap 1.1) in September 1992 modified the\nheader to use \\fBconst\\fP for the function prototypes in the header\nwhere one would expect the parameters to be read-only.\nThis was a difference versus the original BSD termcap.\nThe prototype for \\fBtputs\\fP also differed,\nbut in that instance, it was \\fIlibedit\\fP which differed from BSD termcap.\n.PP\nA copy of GNU termcap 1.3 was bundled with \\fIbash\\fP in mid-1993,\nto support the \\fBreadline\\fP(3) library.\n.PP\nA termcap.h file was provided in ncurses 1.8.1 (November 1993).\nThat reflected influence by \\fBemacs\\fP(1) (rather than \\fBjove\\fP(1))\nand GNU termcap:\n.bP\nit provided declarations for a few global symbols used by \\fBemacs\\fP\n.bP\nit provided function prototypes (using \\fBconst\\fP).\n.bP\na prototype for \\fBtparam\\fP (a GNU termcap feature) was provided.\n.PP\nLater (in mid-1996) the \\fBtparam\\fP function was removed from ncurses.\nAs a result, there are differences between any of the four implementations,\nwhich must be taken into account by programs which can work with all\ntermcap library interfaces.\n.SH SEE ALSO\n\\fBcurses\\fP(3X),\n\\fBputc\\fP(3),\n\\fBterm_variables\\fP(3X),\n\\fBterminfo\\fP(\\*n).\n.sp\nhttps://invisible-island.net/ncurses/tctest.html\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}