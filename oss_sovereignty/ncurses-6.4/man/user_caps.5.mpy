{
  "module_name": "user_caps.5",
  "hash_id": "3829c0e5c49da1ad68c342e5afa4086e1c3c70bd2c71d5968b8070ea886279b8",
  "original_prompt": "Ingested from ncurses-6.4/man/user_caps.5",
  "human_readable_source": ".\\\"***************************************************************************\n.\\\" Copyright 2018-2021,2022 Thomas E. Dickey                                *\n.\\\" Copyright 2017 Free Software Foundation, Inc.                            *\n.\\\"                                                                          *\n.\\\" Permission is hereby granted, free of charge, to any person obtaining a  *\n.\\\" copy of this software and associated documentation files (the            *\n.\\\" \"Software\"), to deal in the Software without restriction, including      *\n.\\\" without limitation the rights to use, copy, modify, merge, publish,      *\n.\\\" distribute, distribute with modifications, sublicense, and/or sell       *\n.\\\" copies of the Software, and to permit persons to whom the Software is    *\n.\\\" furnished to do so, subject to the following conditions:                 *\n.\\\"                                                                          *\n.\\\" The above copyright notice and this permission notice shall be included  *\n.\\\" in all copies or substantial portions of the Software.                   *\n.\\\"                                                                          *\n.\\\" THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *\n.\\\" OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *\n.\\\" MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *\n.\\\" IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *\n.\\\" DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *\n.\\\" OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *\n.\\\" THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *\n.\\\"                                                                          *\n.\\\" Except as contained in this notice, the name(s) of the above copyright   *\n.\\\" holders shall not be used in advertising or otherwise to promote the     *\n.\\\" sale, use or other dealings in this Software without prior written       *\n.\\\" authorization.                                                           *\n.\\\"***************************************************************************\n.\\\"\n.\\\" $Id: user_caps.5,v 1.22 2022/07/03 20:01:04 tom Exp $\n.TH user_caps 5\n.ie \\n(.g .ds `` \\(lq\n.el       .ds `` ``\n.ie \\n(.g .ds '' \\(rq\n.el       .ds '' ''\n.de NS\n.ie n  .sp\n.el    .sp .5\n.ie n  .in +4\n.el    .in +2\n.nf\n.ft C\t\t\t\\\" Courier\n..\n.de NE\n.fi\n.ft R\n.ie n  .in -4\n.el    .in -2\n..\n.de bP\n.ie n  .IP \\(bu 4\n.el    .IP \\(bu 2\n..\n.SH NAME\nuser_caps \\- user-defined terminfo capabilities\n.SH SYNOPSIS\n.B @TIC@ -x, @INFOCMP@ -x\n.SH DESCRIPTION\n.SS Background\n.PP\nBefore ncurses 5.0,\nterminfo databases used a \\fIfixed repertoire\\fP of terminal\ncapabilities designed for the SVr2 terminal database in 1984,\nand extended in stages through SVr4 (1989),\nand standardized in the Single Unix Specification beginning in 1995.\n.PP\nMost of the \\fIextensions\\fP in this fixed repertoire were additions\nto the tables of boolean, numeric and string capabilities.\nRather than change the meaning of an existing capability, a new name was added.\nThe terminfo database uses a binary format; binary compatibility was\nensured by using a header which gave the number of items in the\ntables for each type of capability.\nThe standardization was incomplete:\n.bP\nThe \\fIbinary format\\fP itself is not described\nin the X/Open Curses documentation.\nOnly the \\fIsource format\\fP is described.\n.IP\nLibrary developers rely upon the SVr4 documentation,\nand reverse-engineering the compiled terminfo files to match the binary format.\n.bP\nLacking a standard for the binary format, most implementations\ncopy the SVr2 binary format, which uses 16-bit signed integers,\nand is limited to 4096-byte entries.\n.IP\nThe format cannot represent very large numeric capabilities,\nnor can it represent large numbers of special keyboard definitions.\n.bP\nThe tables of capability names differ between implementations.\n.IP\nAlthough they \\fImay\\fP provide all of the standard capability names,\nthe position in the tables differs because some features were added as needed,\nwhile others were added (out of order) to comply with X/Open Curses.\n.IP\nWhile ncurses' repertoire of predefined capabilities is closest to Solaris,\nSolaris's terminfo database has a few differences from\nthe list published by X/Open Curses.\nFor example, ncurses can be configured with tables which match the\nterminal databases for AIX, HP-UX or OSF/1,\nrather than the default Solaris-like configuration.\n.bP\nIn SVr4 curses and ncurses,\nthe terminal database is defined at compile-time using a text file\nwhich lists the different terminal capabilities.\n.IP\nIn principle, the text-file can be extended,\nbut doing this requires recompiling and reinstalling the library.\nThe text-file used in ncurses for terminal capabilities includes\ndetails for various systems past the documented X/Open Curses features.\nFor example, ncurses supports these capabilities in each configuration:\n.RS 8\n.TP 5\nmemory_lock\n(meml)\nlock memory above cursor\n.TP 5\nmemory_unlock\n(memu)\nunlock memory\n.TP 5\nbox_chars_1\n(box1)\nbox characters primary set\n.RE\n.IP\nThe memory lock/unlock capabilities were included because they were used\nin the X11R6 terminal description for \\fBxterm\\fP(1).\nThe \\fIbox1\\fP capability is used in @TIC@ to help with terminal descriptions\nwritten for AIX.\n.PP\nDuring the 1990s, some users were reluctant to use terminfo\nin spite of its performance advantages over termcap:\n.bP\nThe fixed repertoire prevented users from adding features\nfor unanticipated terminal improvements\n(or required them to reuse existing capabilities as a workaround).\n.bP\nThe limitation to 16-bit signed integers was also mentioned.\nBecause termcap stores everything as a string,\nit could represent larger numbers.\n.PP\nAlthough termcap's extensibility was rarely used\n(it was never the \\fIspeaker\\fP who had actually used the feature),\nthe criticism had a point.\nncurses 5.0 provided a way to detect nonstandard capabilities,\ndetermine their\ntype and optionally store and retrieve them in a way which did not interfere\nwith other applications.\nThese are referred to as \\fIuser-defined capabilities\\fP because no\nmodifications to the toolset's predefined capability names are needed.\n.PP\nThe ncurses utilities \\fB@TIC@\\fP and \\fB@INFOCMP@\\fP have a command-line\noption \\*(``\\-x\\*('' to control whether the nonstandard capabilities\nare stored or retrieved.\nA library function \\fBuse_extended_names\\fP\nis provided for the same purpose.\n.PP\nWhen compiling a terminal database, if \\*(``\\-x\\*('' is set,\n\\fB@TIC@\\fP will store a user-defined capability if the capability name is not\none of the predefined names.\n.PP\nBecause ncurses provides a termcap library interface,\nthese user-defined capabilities may be visible to termcap applications:\n.bP\nThe termcap interface (like all implementations of termcap)\nrequires that the capability names are 2-characters.\n.IP\nWhen the capability is simple enough for use in a termcap application,\nit is provided as a 2-character name.\n.bP\nThere are other\nuser-defined capabilities which refer to features not usable in termcap,\ne.g., parameterized strings that use more than two parameters\nor use more than the trivial expression support provided by termcap.\nFor these, the terminfo database should have only capability names with\n3 or more characters.\n.bP\nSome terminals can send distinct strings for special keys (cursor-,\nkeypad- or function-keys) depending on modifier keys (shift, control, etc.).\nWhile terminfo and termcap have a set of 60 predefined function-key names,\nto which a series of keys can be assigned,\nthat is insufficient for more than a dozen keys multiplied by more than\na couple of modifier combinations.\nThe ncurses database uses a convention based on \\fBxterm\\fP(1) to\nprovide extended special-key names.\n.IP\nFitting that into termcap's limitation of 2-character names\nwould be pointless.\nThese extended keys are available only with terminfo.\n.SS Recognized capabilities\n.PP\nThe ncurses library uses the user-definable capabilities.\nWhile the terminfo database may have other extensions,\nncurses makes explicit checks for these:\n.RS 3\n.TP 3\nAX\n\\fIboolean\\fP, asserts that the terminal interprets SGR 39 and SGR 49\nby resetting the foreground and background color, respectively, to the default.\n.IP\nThis is a feature recognized by the \\fBscreen\\fP program as well.\n.TP 3\nE3\n\\fIstring\\fP, tells how to clear the terminal's scrollback buffer.\nWhen present, the \\fBclear\\fP(1) program sends this before clearing\nthe terminal.\n.IP\nThe command \\*(``\\fBtput clear\\fP\\*('' does the same thing.\n.TP 3\nNQ\nused to suppress a consistency check in @TIC@ for the ncurses capabilities\nin user6 through user9 (u6, u7, u8 and u9)\nwhich tell how to query the terminal's cursor position\nand its device attributes.\n.TP 3\nRGB\n\\fIboolean\\fP, \\fInumber\\fP \\fBor\\fP \\fIstring\\fP,\nused to assert that the\n\\fBset_a_foreground\\fP and\n\\fBset_a_background\\fP capabilities correspond to \\fIdirect colors\\fP,\nusing an RGB (red/green/blue) convention.\nThis capability allows the \\fBcolor_content\\fP function to\nreturn appropriate values without requiring the application\nto initialize colors using \\fBinit_color\\fP.\n.IP\nThe capability type determines the values which ncurses sees:\n.RS 3\n.TP 3\n\\fIboolean\\fP\nimplies that the number of bits for red, green and blue are the same.\nUsing the maximum number of colors,\nncurses adds two, divides that sum by three, and assigns the result\nto red, green and blue in that order.\n.IP\nIf the number of bits needed for the number of colors is not a multiple\nof three, the blue (and green) components lose in comparison to red.\n.TP 3\n\\fInumber\\fP\ntells ncurses what result to add to red, green and blue.\nIf ncurses runs out of bits,\nblue (and green) lose just as in the \\fIboolean\\fP case.\n.TP 3\n\\fIstring\\fP\nexplicitly list the number of bits used for red, green and blue components\nas a slash-separated list of decimal integers.\n.RE\n.IP\nBecause there are several RGB encodings in use,\napplications which make assumptions about the number of bits per color\nare unlikely to work reliably.\nAs a trivial case, for example, one could define \\fBRGB#1\\fP\nto represent the standard eight ANSI colors, i.e., one bit per color.\n.TP 3\nU8\n\\fInumber\\fP,\nasserts that ncurses must use Unicode values for line-drawing characters,\nand that it should ignore the alternate character set capabilities\nwhen the locale uses UTF-8 encoding.\nFor more information, see the discussion of\n\\fBNCURSES_NO_UTF8_ACS\\fP in \\fBncurses\\fP(3X).\n.IP\nSet this capability to a nonzero value to enable it.\n.TP 3\nXM\n\\fIstring\\fP,\noverride ncurses's built-in string which\nenables/disables \\fBxterm\\fP(1) mouse mode.\n.IP\nncurses sends a character sequence to the terminal to initialize mouse mode,\nand when the user clicks the mouse buttons or (in certain modes) moves the\nmouse, handles the characters sent back by the terminal to tell it what\nwas done with the mouse.\n.IP\nThe mouse protocol is enabled when\nthe \\fImask\\fP passed in the \\fBmousemask\\fP function is nonzero.\nBy default, ncurses handles the responses for the X11 xterm mouse protocol.\nIt also knows about the \\fISGR 1006\\fP xterm mouse protocol,\nbut must to be told to look for this specifically.\nIt will not be able to guess which mode is used,\nbecause the responses are enough alike that only confusion would result.\n.IP\nThe \\fBXM\\fP capability has a single parameter.\nIf nonzero, the mouse protocol should be enabled.\nIf zero, the mouse protocol should be disabled.\nncurses inspects this capability if it is present,\nto see whether the 1006 protocol is used.\nIf so, it expects the responses to use the \\fISGR 1006\\fP xterm mouse protocol.\n.IP\nThe xterm mouse protocol is used by other terminal emulators.\nThe terminal database uses building-blocks for the various xterm mouse\nprotocols which can be used in customized terminal descriptions.\n.IP\nThe terminal database building blocks for this mouse\nfeature also have an experimental capability \\fIxm\\fP.\nThe \\*(``xm\\*('' capability describes the mouse response.\nCurrently there is no interpreter which would use this\ninformation to make the mouse support completely data-driven.\n.IP\n\\fIxm\\fP shows the format of the mouse responses.\nIn this experimental capability, the parameters are\n.RS 5\n.TP 5\n.I p1\ny-ordinate\n.TP 5\n.I p2\nx-ordinate\n.TP 5\n.I p3\nbutton\n.TP 5\n.I p4\nstate, e.g., pressed or released\n.TP 5\n.I p5\ny-ordinate starting region\n.TP 5\n.I p6\nx-ordinate starting region\n.TP 5\n.I p7\ny-ordinate ending region\n.TP 5\n.I p8\nx-ordinate ending region\n.RE\n.IP\nHere are examples from the terminal database for the most commonly used\nxterm mouse protocols:\n.IP\n.nf\n  xterm+x11mouse|X11 xterm mouse protocol,\n          kmous=\\\\E[M, XM=\\\\E[?1000%?%p1%{1}%=%th%el%;,\n          xm=\\\\E[M\n             %?%p4%t%p3%e%{3}%;%'\\ '%+%c\n             %p2%'!'%+%c\n             %p1%'!'%+%c,\n\n  xterm+sm+1006|xterm SGR-mouse,\n          kmous=\\\\E[<, XM=\\\\E[?1006;1000%?%p1%{1}%=%th%el%;,\n          xm=\\\\E[<%i%p3%d;\n             %p1%d;\n             %p2%d;\n             %?%p4%tM%em%;,\n.fi\n.\n.SS Extended key-definitions\n.PP\nSeveral terminals provide the ability to send distinct strings for\ncombinations of modified special keys.\nThere is no standard for what those keys can send.\n.PP\nSince 1999, \\fBxterm\\fP(1) has supported\n\\fIshift\\fP, \\fIcontrol\\fP, \\fIalt\\fP, and \\fImeta\\fP modifiers which produce\ndistinct special-key strings.\nIn a terminal description, ncurses has no special knowledge of the\nmodifiers used.\nApplications can use the \\fInaming convention\\fP established for \\fBxterm\\fP\nto find these special keys in the terminal description.\n.PP\nStarting with the curses convention that \\fIkey names\\fP begin with \\*(``k\\*(''\nand that shifted special keys are an uppercase name,\nncurses' terminal database defines these names to which a suffix is added:\n.RS 5\n.TS\ntab(/) ;\nl l .\n\\fBName\\fP/\\fBDescription\\fP\n_\nkDC/special form of kdch1 (delete character)\nkDN/special form of kcud1 (cursor down)\nkEND/special form of kend (End)\nkHOM/special form of khome (Home)\nkLFT/special form of kcub1 (cursor-left or cursor-back)\nkNXT/special form of knext (Next, or Page-Down)\nkPRV/special form of kprev (Prev, or Page-Up)\nkRIT/special form of kcuf1 (cursor-right, or cursor-forward)\nkUP/special form of kcuu1 (cursor-up)\n.TE\n.RE\n.PP\nThese are the suffixes used to denote the modifiers:\n.RS 5\n.TS\ntab(/) ;\nl l .\n\\fBValue\\fP/\\fBDescription\\fP\n_\n2/Shift\n3/Alt\n4/Shift + Alt\n5/Control\n6/Shift + Control\n7/Alt + Control\n8/Shift + Alt + Control\n9/Meta\n10/Meta + Shift\n11/Meta + Alt\n12/Meta + Alt + Shift\n13/Meta + Ctrl\n14/Meta + Ctrl + Shift\n15/Meta + Ctrl + Alt\n16/Meta + Ctrl + Alt + Shift\n.TE\n.RE\n.PP\nNone of these are predefined; terminal descriptions can refer to \\fInames\\fP\nwhich ncurses will allocate at runtime to \\fIkey-codes\\fP.\nTo use these keys in an ncurses program, an application could do this:\n.bP\nusing a list of extended key \\fInames\\fP,\nask \\fBtigetstr\\fP(3X) for their values, and\n.bP\ngiven the list of values,\nask \\fBkey_defined\\fP(3X) for the \\fIkey-code\\fP which\nwould be returned for those keys by \\fBwgetch\\fP(3X).\n.PP\n.\\\"\n.SH PORTABILITY\n.PP\nThe \\*(``\\-x\\*('' extension feature of \\fB@TIC@\\fP and \\fB@INFOCMP@\\fP\nhas been adopted in NetBSD curses.\nThat implementation stores user-defined capabilities,\nbut makes no use of these capabilities itself.\n.\\\"\n.SH SEE ALSO\n.PP\n\\fB@INFOCMP@\\fP(1M),\n\\fB@TIC@\\fP(1M).\n.PP\nThe terminal database section\n.I \"NCURSES USER-DEFINABLE CAPABILITIES\"\nsummarizes commonly-used user-defined capabilities\nwhich are used in the terminal descriptions.\nSome of those features are mentioned in \\fBscreen\\fP(1) or \\fBtmux\\fP(1).\n.PP\n.I \"XTerm Control Sequences\"\nprovides further information on the \\fBxterm\\fP(1) features\nwhich are used in these extended capabilities.\n.\\\"\n.SH AUTHORS\n.PP\nThomas E. Dickey\n.br\nbeginning with ncurses 5.0 (1999)\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}