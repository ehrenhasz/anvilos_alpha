{
  "module_name": "ncurses2-flushinp_test.adb",
  "hash_id": "d11b478e2cb73dee45f233d394e53667f53c6d3f6988e1426608c687b7ee18f6",
  "original_prompt": "Ingested from ncurses-6.4/Ada95/samples/ncurses2-flushinp_test.adb",
  "human_readable_source": "------------------------------------------------------------------------------\n--                                                                          --\n--                       GNAT ncurses Binding Samples                       --\n--                                                                          --\n--                                 ncurses                                  --\n--                                                                          --\n--                                 B O D Y                                  --\n--                                                                          --\n------------------------------------------------------------------------------\n-- Copyright 2020 Thomas E. Dickey                                          --\n-- Copyright 2000 Free Software Foundation, Inc.                            --\n--                                                                          --\n-- Permission is hereby granted, free of charge, to any person obtaining a  --\n-- copy of this software and associated documentation files (the            --\n-- \"Software\"), to deal in the Software without restriction, including      --\n-- without limitation the rights to use, copy, modify, merge, publish,      --\n-- distribute, distribute with modifications, sublicense, and/or sell       --\n-- copies of the Software, and to permit persons to whom the Software is    --\n-- furnished to do so, subject to the following conditions:                 --\n--                                                                          --\n-- The above copyright notice and this permission notice shall be included  --\n-- in all copies or substantial portions of the Software.                   --\n--                                                                          --\n-- THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  --\n-- OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               --\n-- MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   --\n-- IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   --\n-- DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    --\n-- OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    --\n-- THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               --\n--                                                                          --\n-- Except as contained in this notice, the name(s) of the above copyright   --\n-- holders shall not be used in advertising or otherwise to promote the     --\n-- sale, use or other dealings in this Software without prior written       --\n-- authorization.                                                           --\n------------------------------------------------------------------------------\n--  Author: Eugene V. Melaragno <aldomel@ix.netcom.com> 2000\n--  Version Control\n--  $Revision: 1.2 $\n--  Binding Version 01.00\n------------------------------------------------------------------------------\nwith Terminal_Interface.Curses; use Terminal_Interface.Curses;\nwith ncurses2.util; use ncurses2.util;\n\nprocedure ncurses2.flushinp_test (win : Window) is\n\n   procedure Continue (win : Window);\n\n   procedure Continue (win : Window) is\n   begin\n      Set_Echo_Mode (False);\n      Move_Cursor (win, 10, 1);\n      Add (win, 10, 1, \" Press any key to continue\");\n      Refresh (win);\n      Getchar (win);\n   end Continue;\n\n   h, by, sh : Line_Position;\n   w, bx, sw : Column_Position;\n\n   subWin : Window;\n\nbegin\n   Clear (win);\n   Get_Size (win, h, w);\n   Get_Window_Position (win, by, bx);\n   sw := w / 3;\n   sh := h / 3;\n   subWin := Sub_Window (win, sh, sw, by + h - sh - 2, bx + w - sw - 2);\n\n   if Has_Colors then\n      Init_Pair (2, Cyan, Blue);\n      Change_Background (subWin,\n                         Attributed_Character'(Ch => ' ', Color => 2,\n                                               Attr => Normal_Video));\n   end if;\n\n   Set_Character_Attributes (subWin,\n                             (Bold_Character => True, others => False));\n   Box (subWin);\n   Add (subWin, 2, 1, \"This is a subwindow\");\n   Refresh (win);\n\n   Set_Cbreak_Mode (True);\n   Add (win, 0, 1, \"This is a test of the flushinp() call.\");\n\n   Add (win, 2, 1, \"Type random keys for 5 seconds.\");\n   Add (win, 3, 1,\n        \"These should be discarded (not echoed) after the subwindow \" &\n        \"goes away.\");\n   Refresh (win);\n\n   for i in 0 .. 4 loop\n      Move_Cursor (subWin, 1, 1);\n      Add (subWin, Str => \"Time = \");\n      Add (subWin, Str => Integer'Image (i));\n      Refresh (subWin);\n      Nap_Milli_Seconds (1000);\n      Flush_Input;\n   end loop;\n\n   Delete (subWin);\n   Erase (win);\n   Flash_Screen;\n   Refresh (win);\n   Nap_Milli_Seconds (1000);\n\n   Add (win, 2, 1,\n        Str => \"If you were still typing when the window timer expired,\");\n   Add (win, 3, 1,\n        \"or else you typed nothing at all while it was running,\");\n   Add (win, 4, 1,\n        \"test was invalid.  You'll see garbage or nothing at all. \");\n   Add (win, 6, 1, \"Press a key\");\n   Move_Cursor (win, 9, 10);\n   Refresh (win);\n   Set_Echo_Mode (True);\n   Getchar (win);\n   Flush_Input;\n   Add (win, 12, 0,\n        \"If you see any key other than what you typed, flushinp() is broken.\");\n   Continue (win);\n\n   Move_Cursor (win, 9, 10);\n   Delete_Character (win);\n   Refresh (win);\n   Move_Cursor (win, 12, 0);\n   Clear_To_End_Of_Line;\n   Add (win,\n        \"What you typed should now have been deleted; if not, wdelch() \" &\n        \"failed.\");\n   Continue (win);\n\n   Set_Cbreak_Mode (True);\n\nend ncurses2.flushinp_test;\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}