{
  "module_name": "ncurses2-demo_panels.adb",
  "hash_id": "febc761e3bb3bd0d2f0dfd13041a269dfcc87e168f806f4682f013e449f90b28",
  "original_prompt": "Ingested from ncurses-6.4/Ada95/samples/ncurses2-demo_panels.adb",
  "human_readable_source": "------------------------------------------------------------------------------\n--                                                                          --\n--                       GNAT ncurses Binding Samples                       --\n--                                                                          --\n--                                 ncurses                                  --\n--                                                                          --\n--                                 B O D Y                                  --\n--                                                                          --\n------------------------------------------------------------------------------\n-- Copyright 2018,2020 Thomas E. Dickey                                     --\n-- Copyright 2000-2008,2011 Free Software Foundation, Inc.                  --\n--                                                                          --\n-- Permission is hereby granted, free of charge, to any person obtaining a  --\n-- copy of this software and associated documentation files (the            --\n-- \"Software\"), to deal in the Software without restriction, including      --\n-- without limitation the rights to use, copy, modify, merge, publish,      --\n-- distribute, distribute with modifications, sublicense, and/or sell       --\n-- copies of the Software, and to permit persons to whom the Software is    --\n-- furnished to do so, subject to the following conditions:                 --\n--                                                                          --\n-- The above copyright notice and this permission notice shall be included  --\n-- in all copies or substantial portions of the Software.                   --\n--                                                                          --\n-- THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  --\n-- OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               --\n-- MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   --\n-- IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   --\n-- DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    --\n-- OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    --\n-- THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               --\n--                                                                          --\n-- Except as contained in this notice, the name(s) of the above copyright   --\n-- holders shall not be used in advertising or otherwise to promote the     --\n-- sale, use or other dealings in this Software without prior written       --\n-- authorization.                                                           --\n------------------------------------------------------------------------------\n--  Author: Eugene V. Melaragno <aldomel@ix.netcom.com> 2000\n--  Version Control\n--  $Revision: 1.9 $\n--  $Date: 2020/02/02 23:34:34 $\n--  Binding Version 01.00\n------------------------------------------------------------------------------\nwith ncurses2.util; use ncurses2.util;\nwith Terminal_Interface.Curses; use Terminal_Interface.Curses;\nwith Terminal_Interface.Curses.Panels; use Terminal_Interface.Curses.Panels;\nwith Terminal_Interface.Curses.Panels.User_Data;\n\nwith ncurses2.genericPuts;\n\nprocedure ncurses2.demo_panels (nap_mseci : Integer) is\n\n   function  mkpanel (color : Color_Number;\n                      rows  : Line_Count;\n                      cols  : Column_Count;\n                      tly   : Line_Position;\n                      tlx   : Column_Position) return Panel;\n   procedure rmpanel (pan : in out Panel);\n   procedure pflush;\n   procedure wait_a_while (msec : Integer);\n   procedure saywhat (text : String);\n   procedure fill_panel (pan : Panel);\n\n   nap_msec : Integer := nap_mseci;\n\n   function mkpanel (color : Color_Number;\n                     rows  : Line_Count;\n                     cols  : Column_Count;\n                     tly   : Line_Position;\n                     tlx   : Column_Position) return Panel is\n      win : Window;\n      pan : Panel := Null_Panel;\n   begin\n      win := New_Window (rows, cols, tly, tlx);\n      if Null_Window /= win then\n         pan := New_Panel (win);\n         if pan = Null_Panel then\n            Delete (win);\n         elsif Has_Colors then\n            declare\n               fg, bg : Color_Number;\n            begin\n               if color = Blue then\n                  fg := White;\n               else\n                  fg := Black;\n               end if;\n               bg := color;\n               Init_Pair (Color_Pair (color), fg, bg);\n               Set_Background (win, (Ch => ' ',\n                                     Attr => Normal_Video,\n                                     Color => Color_Pair (color)));\n            end;\n         else\n            Set_Background (win, (Ch => ' ',\n                                  Attr => (Bold_Character => True,\n                                           others => False),\n                                  Color => Color_Pair (color)));\n         end if;\n      end if;\n      return pan;\n   end mkpanel;\n\n   procedure rmpanel (pan : in out Panel) is\n      win : Window := Panel_Window (pan);\n   begin\n      Delete (pan);\n      Delete (win);\n   end rmpanel;\n\n   procedure pflush is\n   begin\n      Update_Panels;\n      Update_Screen;\n   end pflush;\n\n   procedure wait_a_while (msec : Integer) is\n   begin\n      --  The C version had some #ifdef blocks here\n      if msec = 1 then\n         Getchar;\n      else\n         Nap_Milli_Seconds (msec);\n      end if;\n   end wait_a_while;\n\n   procedure saywhat (text : String) is\n   begin\n      Move_Cursor (Line => Lines - 1, Column => 0);\n      Clear_To_End_Of_Line;\n      Add (Str => text);\n   end saywhat;\n\n   --  from sample-curses_demo.adb\n   type User_Data is new String (1 .. 2);\n   type User_Data_Access is access all User_Data;\n   package PUD is new Panels.User_Data (User_Data, User_Data_Access);\n\n   use PUD;\n\n   procedure fill_panel (pan : Panel) is\n      win : constant Window := Panel_Window (pan);\n      num : constant Character := Get_User_Data (pan).all (2);\n      tmp6 : String (1 .. 6) := \"-panx-\";\n      maxy : Line_Count;\n      maxx : Column_Count;\n\n   begin\n      Move_Cursor (win, 1, 1);\n      tmp6 (5) := num;\n      Add (win, Str => tmp6);\n      Clear_To_End_Of_Line (win);\n      Box (win);\n      Get_Size (win, maxy, maxx);\n      for y in 2 .. maxy - 3 loop\n         for x in 1 .. maxx - 3 loop\n            Move_Cursor (win, y, x);\n            Add (win, num);\n         end loop;\n      end loop;\n   exception\n   when Curses_Exception => null;\n   end fill_panel;\n\n   modstr : constant array (0 .. 5) of String (1 .. 5) :=\n     (\"test \",\n      \"TEST \",\n      \"(**) \",\n      \"*()* \",\n      \"<--> \",\n      \"LAST \"\n      );\n\n   package p is new ncurses2.genericPuts (1024);\n   use p;\n   use p.BS;\n   --  the C version said register int y, x;\n   tmpb : BS.Bounded_String;\n\nbegin\n   Refresh;\n\n   for y in 0 .. Integer (Lines - 2) loop\n      for x in 0 .. Integer (Columns - 1) loop\n         myPut (tmpb, (y + x) mod 10);\n         myAdd (Str => tmpb);\n      end loop;\n   end loop;\n   for y in 0 .. 4 loop\n      declare\n         p1, p2, p3, p4, p5 : Panel;\n         U1 : constant User_Data_Access := new User_Data'(\"p1\");\n         U2 : constant User_Data_Access := new User_Data'(\"p2\");\n         U3 : constant User_Data_Access := new User_Data'(\"p3\");\n         U4 : constant User_Data_Access := new User_Data'(\"p4\");\n         U5 : constant User_Data_Access := new User_Data'(\"p5\");\n\n      begin\n         p1 := mkpanel (Red, Lines / 2 - 2, Columns / 8 + 1, 0, 0);\n         Set_User_Data (p1, U1);\n         p2 := mkpanel (Green, Lines / 2 + 1, Columns / 7, Lines / 4,\n                        Columns / 10);\n         Set_User_Data (p2, U2);\n         p3 := mkpanel (Yellow, Lines / 4, Columns / 10, Lines / 2,\n                        Columns / 9);\n         Set_User_Data (p3, U3);\n         p4 := mkpanel (Blue, Lines / 2 - 2, Columns / 8,  Lines / 2 - 2,\n                        Columns / 3);\n         Set_User_Data (p4, U4);\n         p5 := mkpanel (Magenta, Lines / 2 - 2, Columns / 8,  Lines / 2,\n                        Columns / 2 - 2);\n         Set_User_Data (p5, U5);\n\n         fill_panel (p1);\n         fill_panel (p2);\n         fill_panel (p3);\n         fill_panel (p4);\n         fill_panel (p5);\n         Hide (p4);\n         Hide (p5);\n         pflush;\n         saywhat (\"press any key to continue\");\n         wait_a_while (nap_msec);\n\n         saywhat (\"h3 s1 s2 s4 s5; press any key to continue\");\n         Move (p1, 0, 0);\n         Hide (p3);\n         Show (p1);\n         Show (p2);\n         Show (p4);\n         Show (p5);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"s1; press any key to continue\");\n         Show (p1);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"s2; press any key to continue\");\n         Show (p2);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"m2; press any key to continue\");\n         Move (p2, Lines / 3 + 1, Columns / 8);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"s3;\");\n         Show (p3);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"m3; press any key to continue\");\n         Move (p3, Lines / 4 + 1, Columns / 15);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"b3; press any key to continue\");\n         Bottom (p3);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"s4; press any key to continue\");\n         Show (p4);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"s5; press any key to continue\");\n         Show (p5);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"t3; press any key to continue\");\n         Top (p3);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"t1; press any key to continue\");\n         Top (p1);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"t2; press any key to continue\");\n         Top (p2);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"t3; press any key to continue\");\n         Top (p3);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"t4; press any key to continue\");\n         Top (p4);\n         pflush;\n         wait_a_while (nap_msec);\n\n         for itmp in  0 ..  5 loop\n            declare\n               w4 : constant Window := Panel_Window (p4);\n               w5 : constant Window := Panel_Window (p5);\n            begin\n\n               saywhat (\"m4; press any key to continue\");\n               Move_Cursor (w4, Lines / 8, 1);\n               Add (w4, modstr (itmp));\n               Move (p4, Lines / 6, Column_Position (itmp) * (Columns / 8));\n               Move_Cursor (w5, Lines / 6, 1);\n               Add (w5, modstr (itmp));\n               pflush;\n               wait_a_while (nap_msec);\n\n               saywhat (\"m5; press any key to continue\");\n               Move_Cursor (w4, Lines / 6, 1);\n               Add (w4, modstr (itmp));\n               Move (p5, Lines / 3 - 1, (Column_Position (itmp) * 10) + 6);\n               Move_Cursor (w5, Lines / 8, 1);\n               Add (w5, modstr (itmp));\n               pflush;\n               wait_a_while (nap_msec);\n            end;\n         end loop;\n\n         saywhat (\"m4; press any key to continue\");\n         Move (p4, Lines / 6, 6 * (Columns / 8));\n         --  Move(p4, Lines / 6, itmp * (Columns / 8));\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"t5; press any key to continue\");\n         Top (p5);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"t2; press any key to continue\");\n         Top (p2);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"t1; press any key to continue\");\n         Top (p1);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"d2; press any key to continue\");\n         rmpanel (p2);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"h3; press any key to continue\");\n         Hide (p3);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"d1; press any key to continue\");\n         rmpanel (p1);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"d4; press any key to continue\");\n         rmpanel (p4);\n         pflush;\n         wait_a_while (nap_msec);\n\n         saywhat (\"d5; press any key to continue\");\n         rmpanel (p5);\n         pflush;\n         wait_a_while (nap_msec);\n         if nap_msec = 1 then\n            exit;\n         else\n            nap_msec := 100;\n         end if;\n\n      end;\n   end loop;\n\n   Erase;\n   End_Windows;\n\nend ncurses2.demo_panels;\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}