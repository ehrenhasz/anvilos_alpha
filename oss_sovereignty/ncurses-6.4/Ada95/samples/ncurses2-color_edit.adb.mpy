{
  "module_name": "ncurses2-color_edit.adb",
  "hash_id": "ce256da0d351788d250e3de5d40376f30b4c4caf1fe5913dd2f77f5aba989e7a",
  "original_prompt": "Ingested from ncurses-6.4/Ada95/samples/ncurses2-color_edit.adb",
  "human_readable_source": "------------------------------------------------------------------------------\n--                                                                          --\n--                       GNAT ncurses Binding Samples                       --\n--                                                                          --\n--                                 ncurses                                  --\n--                                                                          --\n--                                 B O D Y                                  --\n--                                                                          --\n------------------------------------------------------------------------------\n-- Copyright 2020 Thomas E. Dickey                                          --\n-- Copyright 2000-2006,2009 Free Software Foundation, Inc.                  --\n--                                                                          --\n-- Permission is hereby granted, free of charge, to any person obtaining a  --\n-- copy of this software and associated documentation files (the            --\n-- \"Software\"), to deal in the Software without restriction, including      --\n-- without limitation the rights to use, copy, modify, merge, publish,      --\n-- distribute, distribute with modifications, sublicense, and/or sell       --\n-- copies of the Software, and to permit persons to whom the Software is    --\n-- furnished to do so, subject to the following conditions:                 --\n--                                                                          --\n-- The above copyright notice and this permission notice shall be included  --\n-- in all copies or substantial portions of the Software.                   --\n--                                                                          --\n-- THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  --\n-- OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               --\n-- MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   --\n-- IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   --\n-- DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    --\n-- OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    --\n-- THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               --\n--                                                                          --\n-- Except as contained in this notice, the name(s) of the above copyright   --\n-- holders shall not be used in advertising or otherwise to promote the     --\n-- sale, use or other dealings in this Software without prior written       --\n-- authorization.                                                           --\n------------------------------------------------------------------------------\n--  Author: Eugene V. Melaragno <aldomel@ix.netcom.com> 2000\n--  Version Control\n--  $Revision: 1.7 $\n--  $Date: 2020/02/02 23:34:34 $\n--  Binding Version 01.00\n------------------------------------------------------------------------------\nwith ncurses2.util; use ncurses2.util;\nwith ncurses2.genericPuts;\nwith Terminal_Interface.Curses; use Terminal_Interface.Curses;\n\nprocedure ncurses2.color_edit is\n   use Int_IO;\n\n   type RGB_Enum is (Redx, Greenx, Bluex);\n\n   procedure change_color (current : Color_Number;\n                           field   : RGB_Enum;\n                           value   : RGB_Value;\n                           usebase : Boolean);\n\n   procedure change_color (current : Color_Number;\n                           field   : RGB_Enum;\n                           value   : RGB_Value;\n                           usebase : Boolean)  is\n      red, green, blue : RGB_Value;\n   begin\n      if usebase then\n         Color_Content (current, red, green, blue);\n      else\n         red := 0;\n         green := 0;\n         blue := 0;\n      end if;\n\n      case field is\n         when Redx => red :=  red + value;\n         when Greenx => green := green + value;\n         when Bluex => blue := blue + value;\n      end case;\n\n      declare\n      begin\n         Init_Color (current, red, green, blue);\n      exception\n         when Curses_Exception => Beep;\n      end;\n\n   end change_color;\n\n   package x is new ncurses2.genericPuts (100); use x;\n\n   tmpb : x.BS.Bounded_String;\n\n   tmp4 : String (1 .. 4);\n   tmp6 : String (1 .. 6);\n   tmp8 : String (1 .. 8);\n   --  This would be easier if Ada had a Bounded_String\n   --  defined as a class instead of the inferior generic package,\n   --  then I could define Put, Add, and Get for them. Blech.\n   value : RGB_Value := 0;\n   red, green, blue : RGB_Value;\n   max_colors : constant Natural := Number_Of_Colors;\n   current : Color_Number := 0;\n   field : RGB_Enum := Redx;\n   this_c : Key_Code := 0;\nbegin\n   Refresh;\n\n   for i in Color_Number'(0) .. Color_Number (Number_Of_Colors) loop\n      Init_Pair (Color_Pair (i), White, i);\n   end loop;\n\n   Move_Cursor (Line => Lines - 2, Column => 0);\n   Add (Str => \"Number: \");\n   myPut (tmpb, Integer (value));\n   myAdd (Str => tmpb);\n\n   loop\n\n      Switch_Character_Attribute (On => False,\n                                  Attr => (Bold_Character => True,\n                                           others => False));\n      Add (Line => 0, Column => 20, Str => \"Color RGB Value Editing\");\n\n      Switch_Character_Attribute (On => False,\n                                  Attr => (Bold_Character => True,\n                                           others => False));\n\n      for i in Color_Number'(0) .. Color_Number (Number_Of_Colors) loop\n         Move_Cursor (Line => 2 + Line_Position (i), Column => 0);\n         if current = i then\n            Add (Ch => '>');\n         else\n            Add (Ch => ' ');\n         end if;\n         --  TODO if i <= color_names'Max  then\n         Put (tmp8, Integer (i));\n         Set_Character_Attributes (Color => Color_Pair (i));\n         Add (Str => \"        \");\n         Set_Character_Attributes;\n\n         Refresh;\n\n         Color_Content (i, red, green, blue);\n         Add (Str => \"   R = \");\n         if current = i and field = Redx then\n            Switch_Character_Attribute (On => True,\n                                        Attr => (Stand_Out => True,\n                                                 others => False));\n         end if;\n         Put (tmp4, Integer (red));\n         Add (Str => tmp4);\n         if current = i and field = Redx then\n            Set_Character_Attributes;\n         end if;\n         Add (Str => \"   G = \");\n         if current = i and field =  Greenx then\n            Switch_Character_Attribute (On => True,\n                                        Attr => (Stand_Out => True,\n                                                 others => False));\n         end if;\n         Put (tmp4, Integer (green));\n         Add (Str => tmp4);\n         if current = i and field = Greenx then\n            Set_Character_Attributes;\n         end if;\n         Add (Str => \"   B = \");\n         if current = i and field = Bluex then\n            Switch_Character_Attribute (On => True,\n                                        Attr => (Stand_Out => True,\n                                                 others => False));\n         end if;\n         Put (tmp4, Integer (blue));\n         Add (Str => tmp4);\n         if current = i and field = Bluex then\n            Set_Character_Attributes;\n         end if;\n         Set_Character_Attributes;\n         Add (Ch => ')');\n      end loop;\n      Add (Line => Line_Position (Number_Of_Colors + 3), Column => 0,\n           Str => \"Use up/down to select a color, left/right to change \" &\n           \"fields.\");\n      Add (Line => Line_Position (Number_Of_Colors + 4), Column => 0,\n           Str => \"Modify field by typing nnn=, nnn-, or nnn+.  ? for help.\");\n\n      Move_Cursor (Line => 2 + Line_Position (current), Column => 0);\n\n      this_c := Getchar;\n      if Is_Digit (this_c) then\n         value := 0;\n      end if;\n\n      case this_c is\n         when KEY_UP =>\n            current := (current - 1) mod Color_Number (max_colors);\n         when KEY_DOWN =>\n            current := (current + 1) mod Color_Number (max_colors);\n         when KEY_RIGHT =>\n            field := RGB_Enum'Val ((RGB_Enum'Pos (field) + 1) mod 3);\n         when KEY_LEFT =>\n            field := RGB_Enum'Val ((RGB_Enum'Pos (field) - 1) mod 3);\n         when\n           Character'Pos ('0') |\n           Character'Pos ('1') |\n           Character'Pos ('2') |\n           Character'Pos ('3') |\n           Character'Pos ('4') |\n           Character'Pos ('5') |\n           Character'Pos ('6') |\n           Character'Pos ('7') |\n           Character'Pos ('8') |\n           Character'Pos ('9')  =>\n            value := value * 10 + RGB_Value (ctoi (Code_To_Char (this_c)));\n\n         when Character'Pos ('+') =>\n            change_color (current, field,  value, True);\n\n         when Character'Pos ('-') =>\n            change_color (current, field, -value, True);\n\n         when Character'Pos ('=') =>\n            change_color (current, field,  value, False);\n\n         when Character'Pos ('?') =>\n            Erase;\n            P (\"                      RGB Value Editing Help\");\n            P (\"\");\n            P (\"You are in the RGB value editor.  Use the arrow keys to \" &\n               \"select one of\");\n            P (\"the fields in one of the RGB triples of the current colors;\" &\n               \" the one\");\n            P (\"currently selected will be reverse-video highlighted.\");\n            P (\"\");\n            P (\"To change a field, enter the digits of the new value; they\" &\n               \" are echoed\");\n            P (\"as entered.  Finish by typing `='.  The change will take\" &\n               \" effect instantly.\");\n            P (\"To increment or decrement a value, use the same procedure,\" &\n               \" but finish\");\n            P (\"with a `+' or `-'.\");\n            P (\"\");\n            P (\"To quit, do `x' or 'q'\");\n\n            Pause;\n            Erase;\n         when Character'Pos ('q') |\n           Character'Pos ('x') =>\n            null;\n         when others =>\n            Beep;\n      end case;\n      Move_Cursor (Line => Lines - 2, Column => 0);\n      Put (tmp6, Integer (value));\n      Add (Str => \"Number: \" & tmp6);\n\n      Clear_To_End_Of_Line;\n      exit when this_c = Character'Pos ('x') or\n        this_c = Character'Pos ('q');\n   end loop;\n\n   Erase;\n   End_Windows;\nend ncurses2.color_edit;\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}