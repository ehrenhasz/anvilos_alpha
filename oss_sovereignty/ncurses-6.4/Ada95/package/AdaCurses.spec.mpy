{
  "module_name": "AdaCurses.spec",
  "hash_id": "2cdcbe125714833ac76a45e2c32e2e55eda39bd7343c253f2cf84684f6d4f49d",
  "original_prompt": "Ingested from ncurses-6.4/Ada95/package/AdaCurses.spec",
  "human_readable_source": "Summary: Ada95 binding for ncurses\n%define AppProgram AdaCurses\n%define AppVersion MAJOR.MINOR\n%define AppRelease YYYYMMDD\n# $Id: AdaCurses.spec,v 1.31 2022/12/18 00:08:17 tom Exp $\nName: %{AppProgram}\nVersion: %{AppVersion}\nRelease: %{AppRelease}\nLicense: MIT\nGroup: Applications/Development\nURL: ftp://ftp.invisible-island.net/%{AppProgram}\nSource0: %{AppProgram}-%{AppRelease}.tgz\nPackager: Thomas Dickey <dickey@invisible-island.net>\n\n%description\nThis is the Ada95 binding from the ncurses MAJOR.MINOR distribution, for\npatch-date YYYYMMDD.\n\nIn addition to a library, this package installs sample programs in\n\"bin/%{AppProgram}\" to avoid conflict with other packages.\n%prep\n\n%global is_mandriva %(test -f /etc/mandriva-release && echo 1 || echo 0)\n%global is_redhat   %(test -f /etc/redhat-release && echo 1 || echo 0)\n%global is_suse     %(if grep -E -i '(opensuse)' /etc/issue >/dev/null; then echo 1; else echo 0; fi)\n\n%define debug_package %{nil}\n\n%define need_filter %(if grep -E -i '(red hat|fedora)' /etc/issue >/dev/null; then echo 1; elif test -f /etc/fedora-release; then echo 1; else echo 0; fi)\n\n%if %{need_filter} == 1\n# http://fedoraproject.org/wiki/EPEL:Packaging_Autoprovides_and_Requires_Filtering\n%filter_from_requires /lib%{AppProgram}.so.1/d\n%filter_setup\n%endif\n\n%setup -q -n %{AppProgram}-%{AppRelease}\n\n%build\n\n%define ada_libdir %{_libdir}/ada/adalib\n%define ada_include %{_prefix}/share/ada/adainclude\n\n%if %{is_mandriva}\n# Mageia 8 lacks gprbuild, needed for building shared libraries.\n%define ada_model --without-shared --without-ada-sharedlib --with-ada-objects=%{_libdir}/adalib\n%else\n# OpenSUSE actually lacks gprbuild, but there is a workable \"community\" package.\n%define ada_model --with-shared --with-ada-sharedlib\n%if %{is_redhat}\n# Fedora 36 LTO does not work with gprbuild system configuration.\nunset CFLAGS\nunset LDFLAGS\nunset LT_SYS_LIBRARY_PATH\n%endif\n%endif\n\nINSTALL_PROGRAM='${INSTALL}' \\\n\t./configure %{ada_model} \\\n\t\t--target %{_target_platform} \\\n\t\t--prefix=%{_prefix} \\\n\t\t--bindir=%{_bindir} \\\n\t\t--libdir=%{_libdir} \\\n\t\t--libexecdir=%{_libexecdir} \\\n\t\t--with-ada-include=%{ada_include} \\\n\t\t--with-ada-objects=%{ada_libdir} \\\n\t\t--mandir=%{_mandir} \\\n\t\t--datadir=%{_datadir} \\\n\t\t--disable-rpath-link \\\n\t\t--disable-echo \\\n\t\t--verbose \\\n\t\t--enable-warnings\n\nmake\n\n%install\n[ \"$RPM_BUILD_ROOT\" != \"/\" ] && rm -rf $RPM_BUILD_ROOT\n\nmake install DESTDIR=$RPM_BUILD_ROOT\nmake install.examples DESTDIR=$RPM_BUILD_ROOT\n\n%clean\nif rm -rf $RPM_BUILD_ROOT; then\n  echo OK\nelse\n  find $RPM_BUILD_ROOT -type f | grep -F -v /.nfs && exit 1\nfi\nexit 0\n\n%files\n%defattr(-,root,root)\n%{_bindir}/%{AppProgram}\n%{_bindir}/adacurses*-config\n%{_libexecdir}/%{AppProgram}/*\n%{ada_libdir}/\n%if %{need_filter} == 1\n%{_libdir}/lib%{AppProgram}.*\n%endif\n%if %{is_suse}\n%{_libdir}/lib%{AppProgram}.*\n%endif\n%{_mandir}/man1/adacurses*-config.1*\n%{_datadir}/%{AppProgram}/*\n%{ada_include}/\n\n%changelog\n# each patch should add its ChangeLog entries here\n\n* Sat Dec 17 2022 Thomas Dickey\n- install sample programs in libexec\n\n* Sat Nov 19 2022 Thomas Dickey\n- use static libraries for Mageia.\n\n* Sat Nov 12 2022 Thomas Dickey\n- unset environment variables to work around Fedora LTO bugs.\n- build-fix for OpenSUSE with gprbuild.\n\n* Sat Nov 16 2019 Thomas Dickey\n- modify clean-rule to work around Fedora NFS bugs.\n\n* Sat Sep 14 2019 Thomas Dickey\n- build-fixes for Fedora29, OpenSUSE\n\n* Sat Sep 07 2019 Thomas Dickey\n- use AppProgram to replace \"AdaCurses\" globally\n- amend install-paths to work with Fedora30\n\n* Thu Mar 31 2011 Thomas Dickey\n- use --with-shared option for consistency with --with-ada-sharelib\n- ensure that MY_DATADIR is set when installing examples\n- add ada_libdir symbol to handle special case where libdir is /usr/lib64\n- use --disable-rpath-link to link sample programs without rpath\n\n* Fri Mar 25 2011 Thomas Dickey\n- initial version\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}