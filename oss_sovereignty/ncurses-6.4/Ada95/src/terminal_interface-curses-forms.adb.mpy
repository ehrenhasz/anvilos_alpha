{
  "module_name": "terminal_interface-curses-forms.adb",
  "hash_id": "fc604b6558f24b9ec9b691617c62ec56024976c2b81a95d1b6f740ab4321acf2",
  "original_prompt": "Ingested from ncurses-6.4/Ada95/src/terminal_interface-curses-forms.adb",
  "human_readable_source": "------------------------------------------------------------------------------\n--                                                                          --\n--                           GNAT ncurses Binding                           --\n--                                                                          --\n--                      Terminal_Interface.Curses.Forms                     --\n--                                                                          --\n--                                 B O D Y                                  --\n--                                                                          --\n------------------------------------------------------------------------------\n-- Copyright 2020 Thomas E. Dickey                                          --\n-- Copyright 1999-2011,2014 Free Software Foundation, Inc.                  --\n--                                                                          --\n-- Permission is hereby granted, free of charge, to any person obtaining a  --\n-- copy of this software and associated documentation files (the            --\n-- \"Software\"), to deal in the Software without restriction, including      --\n-- without limitation the rights to use, copy, modify, merge, publish,      --\n-- distribute, distribute with modifications, sublicense, and/or sell       --\n-- copies of the Software, and to permit persons to whom the Software is    --\n-- furnished to do so, subject to the following conditions:                 --\n--                                                                          --\n-- The above copyright notice and this permission notice shall be included  --\n-- in all copies or substantial portions of the Software.                   --\n--                                                                          --\n-- THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  --\n-- OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               --\n-- MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   --\n-- IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   --\n-- DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    --\n-- OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    --\n-- THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               --\n--                                                                          --\n-- Except as contained in this notice, the name(s) of the above copyright   --\n-- holders shall not be used in advertising or otherwise to promote the     --\n-- sale, use or other dealings in this Software without prior written       --\n-- authorization.                                                           --\n------------------------------------------------------------------------------\n--  Author:  Juergen Pfeifer, 1996\n--  Version Control:\n--  $Revision: 1.33 $\n--  $Date: 2020/02/02 23:34:34 $\n--  Binding Version 01.00\n------------------------------------------------------------------------------\nwith Ada.Unchecked_Deallocation;\n\nwith Interfaces.C; use Interfaces.C;\nwith Interfaces.C.Strings; use Interfaces.C.Strings;\nwith Interfaces.C.Pointers;\n\nwith Terminal_Interface.Curses.Aux;\n\npackage body Terminal_Interface.Curses.Forms is\n\n   use Terminal_Interface.Curses.Aux;\n\n   type C_Field_Array is array (Natural range <>) of aliased Field;\n   package F_Array is new\n     Interfaces.C.Pointers (Natural, Field, C_Field_Array, Null_Field);\n\n------------------------------------------------------------------------------\n   --  |\n   --  |\n   --  |\n   --  subtype chars_ptr is Interfaces.C.Strings.chars_ptr;\n\n   procedure Request_Name (Key  : Form_Request_Code;\n                                Name : out String)\n   is\n      function Form_Request_Name (Key : C_Int) return chars_ptr;\n      pragma Import (C, Form_Request_Name, \"form_request_name\");\n   begin\n      Fill_String (Form_Request_Name (C_Int (Key)), Name);\n   end Request_Name;\n\n   function Request_Name (Key : Form_Request_Code) return String\n   is\n      function Form_Request_Name (Key : C_Int) return chars_ptr;\n      pragma Import (C, Form_Request_Name, \"form_request_name\");\n   begin\n      return Fill_String (Form_Request_Name (C_Int (Key)));\n   end Request_Name;\n------------------------------------------------------------------------------\n   --  |\n   --  |\n   --  |\n   --  |\n   --  |=====================================================================\n   --  | man page form_field_new.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   function Create (Height       : Line_Count;\n                    Width        : Column_Count;\n                    Top          : Line_Position;\n                    Left         : Column_Position;\n                    Off_Screen   : Natural := 0;\n                    More_Buffers : Buffer_Number := Buffer_Number'First)\n                    return Field\n   is\n      function Newfield (H, W, T, L, O, M : C_Int) return Field;\n      pragma Import (C, Newfield, \"new_field\");\n      Fld : constant Field := Newfield (C_Int (Height), C_Int (Width),\n                                        C_Int (Top), C_Int (Left),\n                                        C_Int (Off_Screen),\n                                        C_Int (More_Buffers));\n   begin\n      if Fld = Null_Field then\n         raise Form_Exception;\n      end if;\n      return Fld;\n   end Create;\n--  |\n--  |\n--  |\n   procedure Delete (Fld : in out Field)\n   is\n      function Free_Field (Fld : Field) return Eti_Error;\n      pragma Import (C, Free_Field, \"free_field\");\n\n   begin\n      Eti_Exception (Free_Field (Fld));\n      Fld := Null_Field;\n   end Delete;\n   --  |\n   --  |\n   --  |\n   function Duplicate (Fld  : Field;\n                       Top  : Line_Position;\n                       Left : Column_Position) return Field\n   is\n      function Dup_Field (Fld  : Field;\n                          Top  : C_Int;\n                          Left : C_Int) return Field;\n      pragma Import (C, Dup_Field, \"dup_field\");\n\n      F : constant Field := Dup_Field (Fld,\n                                       C_Int (Top),\n                                       C_Int (Left));\n   begin\n      if F = Null_Field then\n         raise Form_Exception;\n      end if;\n      return F;\n   end Duplicate;\n   --  |\n   --  |\n   --  |\n   function Link (Fld  : Field;\n                  Top  : Line_Position;\n                  Left : Column_Position) return Field\n   is\n      function Lnk_Field (Fld  : Field;\n                          Top  : C_Int;\n                          Left : C_Int) return Field;\n      pragma Import (C, Lnk_Field, \"link_field\");\n\n      F : constant Field := Lnk_Field (Fld,\n                                       C_Int (Top),\n                                       C_Int (Left));\n   begin\n      if F = Null_Field then\n         raise Form_Exception;\n      end if;\n      return F;\n   end Link;\n   --  |\n   --  |=====================================================================\n   --  | man page form_field_just.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Set_Justification (Fld  : Field;\n                                Just : Field_Justification := None)\n   is\n      function Set_Field_Just (Fld  : Field;\n                               Just : C_Int) return Eti_Error;\n      pragma Import (C, Set_Field_Just, \"set_field_just\");\n\n   begin\n      Eti_Exception (Set_Field_Just (Fld,\n                                     C_Int (Field_Justification'Pos (Just))));\n   end Set_Justification;\n   --  |\n   --  |\n   --  |\n   function Get_Justification (Fld : Field) return Field_Justification\n   is\n      function Field_Just (Fld : Field) return C_Int;\n      pragma Import (C, Field_Just, \"field_just\");\n   begin\n      return Field_Justification'Val (Field_Just (Fld));\n   end Get_Justification;\n   --  |\n   --  |=====================================================================\n   --  | man page form_field_buffer.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Set_Buffer\n     (Fld    : Field;\n      Buffer : Buffer_Number := Buffer_Number'First;\n      Str    : String)\n   is\n      function Set_Fld_Buffer (Fld    : Field;\n                                 Bufnum : C_Int;\n                                 S      : char_array)\n        return Eti_Error;\n      pragma Import (C, Set_Fld_Buffer, \"set_field_buffer\");\n\n   begin\n      Eti_Exception (Set_Fld_Buffer (Fld, C_Int (Buffer), To_C (Str)));\n   end Set_Buffer;\n   --  |\n   --  |\n   --  |\n   procedure Get_Buffer\n     (Fld    : Field;\n      Buffer : Buffer_Number := Buffer_Number'First;\n      Str    : out String)\n   is\n      function Field_Buffer (Fld : Field;\n                             B   : C_Int) return chars_ptr;\n      pragma Import (C, Field_Buffer, \"field_buffer\");\n   begin\n      Fill_String (Field_Buffer (Fld, C_Int (Buffer)), Str);\n   end Get_Buffer;\n\n   function Get_Buffer\n     (Fld    : Field;\n      Buffer : Buffer_Number := Buffer_Number'First) return String\n   is\n      function Field_Buffer (Fld : Field;\n                             B   : C_Int) return chars_ptr;\n      pragma Import (C, Field_Buffer, \"field_buffer\");\n   begin\n      return Fill_String (Field_Buffer (Fld, C_Int (Buffer)));\n   end Get_Buffer;\n   --  |\n   --  |\n   --  |\n   procedure Set_Status (Fld    : Field;\n                         Status : Boolean := True)\n   is\n      function Set_Fld_Status (Fld : Field;\n                               St  : C_Int) return Eti_Error;\n      pragma Import (C, Set_Fld_Status, \"set_field_status\");\n\n   begin\n      if Set_Fld_Status (Fld, Boolean'Pos (Status)) /= E_Ok then\n         raise Form_Exception;\n      end if;\n   end Set_Status;\n   --  |\n   --  |\n   --  |\n   function Changed (Fld : Field) return Boolean\n   is\n      function Field_Status (Fld : Field) return C_Int;\n      pragma Import (C, Field_Status, \"field_status\");\n\n      Res : constant C_Int := Field_Status (Fld);\n   begin\n      if Res = Curses_False then\n         return False;\n      else\n         return True;\n      end if;\n   end Changed;\n   --  |\n   --  |\n   --  |\n   procedure Set_Maximum_Size (Fld : Field;\n                               Max : Natural := 0)\n   is\n      function Set_Field_Max (Fld : Field;\n                              M   : C_Int) return Eti_Error;\n      pragma Import (C, Set_Field_Max, \"set_max_field\");\n\n   begin\n      Eti_Exception (Set_Field_Max (Fld, C_Int (Max)));\n   end Set_Maximum_Size;\n   --  |\n   --  |=====================================================================\n   --  | man page form_field_opts.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Set_Options (Fld     : Field;\n                          Options : Field_Option_Set)\n   is\n      function Set_Field_Opts (Fld : Field;\n                               Opt : Field_Option_Set) return Eti_Error;\n      pragma Import (C, Set_Field_Opts, \"set_field_opts\");\n\n   begin\n      Eti_Exception (Set_Field_Opts (Fld, Options));\n   end Set_Options;\n   --  |\n   --  |\n   --  |\n   procedure Switch_Options (Fld     : Field;\n                             Options : Field_Option_Set;\n                             On      : Boolean := True)\n   is\n      function Field_Opts_On (Fld : Field;\n                              Opt : Field_Option_Set) return Eti_Error;\n      pragma Import (C, Field_Opts_On, \"field_opts_on\");\n      function Field_Opts_Off (Fld : Field;\n                               Opt : Field_Option_Set) return Eti_Error;\n      pragma Import (C, Field_Opts_Off, \"field_opts_off\");\n\n   begin\n      if On then\n         Eti_Exception (Field_Opts_On (Fld, Options));\n      else\n         Eti_Exception (Field_Opts_Off (Fld, Options));\n      end if;\n   end Switch_Options;\n   --  |\n   --  |\n   --  |\n   procedure Get_Options (Fld     : Field;\n                          Options : out Field_Option_Set)\n   is\n      function Field_Opts (Fld : Field) return Field_Option_Set;\n      pragma Import (C, Field_Opts, \"field_opts\");\n\n   begin\n      Options := Field_Opts (Fld);\n   end Get_Options;\n   --  |\n   --  |\n   --  |\n   function Get_Options (Fld : Field := Null_Field)\n                         return Field_Option_Set\n   is\n      Fos : Field_Option_Set;\n   begin\n      Get_Options (Fld, Fos);\n      return Fos;\n   end Get_Options;\n   --  |\n   --  |=====================================================================\n   --  | man page form_field_attributes.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Set_Foreground\n     (Fld   : Field;\n      Fore  : Character_Attribute_Set := Normal_Video;\n      Color : Color_Pair := Color_Pair'First)\n   is\n      function Set_Field_Fore (Fld  : Field;\n                               Attr : Attributed_Character) return Eti_Error;\n      pragma Import (C, Set_Field_Fore, \"set_field_fore\");\n\n   begin\n      Eti_Exception (Set_Field_Fore (Fld, (Ch    => Character'First,\n                                           Color => Color,\n                                           Attr  => Fore)));\n   end Set_Foreground;\n   --  |\n   --  |\n   --  |\n   procedure Foreground (Fld  : Field;\n                         Fore : out Character_Attribute_Set)\n   is\n      function Field_Fore (Fld : Field) return Attributed_Character;\n      pragma Import (C, Field_Fore, \"field_fore\");\n   begin\n      Fore := Field_Fore (Fld).Attr;\n   end Foreground;\n\n   procedure Foreground (Fld   : Field;\n                         Fore  : out Character_Attribute_Set;\n                         Color : out Color_Pair)\n   is\n      function Field_Fore (Fld : Field) return Attributed_Character;\n      pragma Import (C, Field_Fore, \"field_fore\");\n   begin\n      Fore  := Field_Fore (Fld).Attr;\n      Color := Field_Fore (Fld).Color;\n   end Foreground;\n   --  |\n   --  |\n   --  |\n   procedure Set_Background\n     (Fld   : Field;\n      Back  : Character_Attribute_Set := Normal_Video;\n      Color : Color_Pair := Color_Pair'First)\n   is\n      function Set_Field_Back (Fld  : Field;\n                               Attr : Attributed_Character) return Eti_Error;\n      pragma Import (C, Set_Field_Back, \"set_field_back\");\n\n   begin\n      Eti_Exception (Set_Field_Back (Fld, (Ch    => Character'First,\n                                           Color => Color,\n                                           Attr  => Back)));\n   end Set_Background;\n   --  |\n   --  |\n   --  |\n   procedure Background (Fld  : Field;\n                         Back : out Character_Attribute_Set)\n   is\n      function Field_Back (Fld : Field) return Attributed_Character;\n      pragma Import (C, Field_Back, \"field_back\");\n   begin\n      Back := Field_Back (Fld).Attr;\n   end Background;\n\n   procedure Background (Fld   : Field;\n                         Back  : out Character_Attribute_Set;\n                         Color : out Color_Pair)\n   is\n      function Field_Back (Fld : Field) return Attributed_Character;\n      pragma Import (C, Field_Back, \"field_back\");\n   begin\n      Back  := Field_Back (Fld).Attr;\n      Color := Field_Back (Fld).Color;\n   end Background;\n   --  |\n   --  |\n   --  |\n   procedure Set_Pad_Character (Fld : Field;\n                                Pad : Character := Space)\n   is\n      function Set_Field_Pad (Fld : Field;\n                              Ch  : C_Int) return Eti_Error;\n      pragma Import (C, Set_Field_Pad, \"set_field_pad\");\n\n   begin\n      Eti_Exception (Set_Field_Pad (Fld,\n                                    C_Int (Character'Pos (Pad))));\n   end Set_Pad_Character;\n   --  |\n   --  |\n   --  |\n   procedure Pad_Character (Fld : Field;\n                            Pad : out Character)\n   is\n      function Field_Pad (Fld : Field) return C_Int;\n      pragma Import (C, Field_Pad, \"field_pad\");\n   begin\n      Pad := Character'Val (Field_Pad (Fld));\n   end Pad_Character;\n   --  |\n   --  |=====================================================================\n   --  | man page form_field_info.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Info (Fld                : Field;\n                   Lines              : out Line_Count;\n                   Columns            : out Column_Count;\n                   First_Row          : out Line_Position;\n                   First_Column       : out Column_Position;\n                   Off_Screen         : out Natural;\n                   Additional_Buffers : out Buffer_Number)\n   is\n      type C_Int_Access is access all C_Int;\n      function Fld_Info (Fld : Field;\n                         L, C, Fr, Fc, Os, Ab : C_Int_Access)\n                         return Eti_Error;\n      pragma Import (C, Fld_Info, \"field_info\");\n\n      L, C, Fr, Fc, Os, Ab : aliased C_Int;\n   begin\n      Eti_Exception (Fld_Info (Fld,\n                               L'Access, C'Access,\n                               Fr'Access, Fc'Access,\n                               Os'Access, Ab'Access));\n      Lines              := Line_Count (L);\n      Columns            := Column_Count (C);\n      First_Row          := Line_Position (Fr);\n      First_Column       := Column_Position (Fc);\n      Off_Screen         := Natural (Os);\n      Additional_Buffers := Buffer_Number (Ab);\n   end Info;\n--  |\n--  |\n--  |\n   procedure Dynamic_Info (Fld     : Field;\n                           Lines   : out Line_Count;\n                           Columns : out Column_Count;\n                           Max     : out Natural)\n   is\n      type C_Int_Access is access all C_Int;\n      function Dyn_Info (Fld : Field; L, C, M : C_Int_Access) return Eti_Error;\n      pragma Import (C, Dyn_Info, \"dynamic_field_info\");\n\n      L, C, M : aliased C_Int;\n   begin\n      Eti_Exception (Dyn_Info (Fld,\n                               L'Access, C'Access,\n                               M'Access));\n      Lines   := Line_Count (L);\n      Columns := Column_Count (C);\n      Max     := Natural (M);\n   end Dynamic_Info;\n   --  |\n   --  |=====================================================================\n   --  | man page form_win.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Set_Window (Frm : Form;\n                         Win : Window)\n   is\n      function Set_Form_Win (Frm : Form;\n                             Win : Window) return Eti_Error;\n      pragma Import (C, Set_Form_Win, \"set_form_win\");\n\n   begin\n      Eti_Exception (Set_Form_Win (Frm, Win));\n   end Set_Window;\n   --  |\n   --  |\n   --  |\n   function Get_Window (Frm : Form) return Window\n   is\n      function Form_Win (Frm : Form) return Window;\n      pragma Import (C, Form_Win, \"form_win\");\n\n      W : constant Window := Form_Win (Frm);\n   begin\n      return W;\n   end Get_Window;\n   --  |\n   --  |\n   --  |\n   procedure Set_Sub_Window (Frm : Form;\n                             Win : Window)\n   is\n      function Set_Form_Sub (Frm : Form;\n                             Win : Window) return Eti_Error;\n      pragma Import (C, Set_Form_Sub, \"set_form_sub\");\n\n   begin\n      Eti_Exception (Set_Form_Sub (Frm, Win));\n   end Set_Sub_Window;\n   --  |\n   --  |\n   --  |\n   function Get_Sub_Window (Frm : Form) return Window\n   is\n      function Form_Sub (Frm : Form) return Window;\n      pragma Import (C, Form_Sub, \"form_sub\");\n\n      W : constant Window := Form_Sub (Frm);\n   begin\n      return W;\n   end Get_Sub_Window;\n   --  |\n   --  |\n   --  |\n   procedure Scale (Frm     : Form;\n                    Lines   : out Line_Count;\n                    Columns : out Column_Count)\n   is\n      type C_Int_Access is access all C_Int;\n      function M_Scale (Frm : Form; Yp, Xp : C_Int_Access) return Eti_Error;\n      pragma Import (C, M_Scale, \"scale_form\");\n\n      X, Y : aliased C_Int;\n   begin\n      Eti_Exception (M_Scale (Frm, Y'Access, X'Access));\n      Lines   := Line_Count (Y);\n      Columns := Column_Count (X);\n   end Scale;\n   --  |\n   --  |=====================================================================\n   --  | man page menu_hook.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Set_Field_Init_Hook (Frm  : Form;\n                                  Proc : Form_Hook_Function)\n   is\n      function Set_Field_Init (Frm  : Form;\n                               Proc : Form_Hook_Function) return Eti_Error;\n      pragma Import (C, Set_Field_Init, \"set_field_init\");\n\n   begin\n      Eti_Exception (Set_Field_Init (Frm, Proc));\n   end Set_Field_Init_Hook;\n   --  |\n   --  |\n   --  |\n   procedure Set_Field_Term_Hook (Frm  : Form;\n                                  Proc : Form_Hook_Function)\n   is\n      function Set_Field_Term (Frm  : Form;\n                               Proc : Form_Hook_Function) return Eti_Error;\n      pragma Import (C, Set_Field_Term, \"set_field_term\");\n\n   begin\n      Eti_Exception (Set_Field_Term (Frm, Proc));\n   end Set_Field_Term_Hook;\n   --  |\n   --  |\n   --  |\n   procedure Set_Form_Init_Hook (Frm  : Form;\n                                 Proc : Form_Hook_Function)\n   is\n      function Set_Form_Init (Frm  : Form;\n                              Proc : Form_Hook_Function) return Eti_Error;\n      pragma Import (C, Set_Form_Init, \"set_form_init\");\n\n   begin\n      Eti_Exception (Set_Form_Init (Frm, Proc));\n   end Set_Form_Init_Hook;\n   --  |\n   --  |\n   --  |\n   procedure Set_Form_Term_Hook (Frm  : Form;\n                                 Proc : Form_Hook_Function)\n   is\n      function Set_Form_Term (Frm  : Form;\n                              Proc : Form_Hook_Function) return Eti_Error;\n      pragma Import (C, Set_Form_Term, \"set_form_term\");\n\n   begin\n      Eti_Exception (Set_Form_Term (Frm, Proc));\n   end Set_Form_Term_Hook;\n   --  |\n   --  |=====================================================================\n   --  | man page form_fields.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Redefine (Frm  : Form;\n                       Flds : Field_Array_Access)\n   is\n      function Set_Frm_Fields (Frm   : Form;\n                               Items : System.Address) return Eti_Error;\n      pragma Import (C, Set_Frm_Fields, \"set_form_fields\");\n\n   begin\n      pragma Assert (Flds.all (Flds'Last) = Null_Field);\n      if Flds.all (Flds'Last) /= Null_Field then\n         raise Form_Exception;\n      else\n         Eti_Exception (Set_Frm_Fields (Frm, Flds.all (Flds'First)'Address));\n      end if;\n   end Redefine;\n   --  |\n   --  |\n   --  |\n   function Fields (Frm   : Form;\n                    Index : Positive) return Field\n   is\n      use F_Array;\n\n      function C_Fields (Frm : Form) return Pointer;\n      pragma Import (C, C_Fields, \"form_fields\");\n\n      P : Pointer := C_Fields (Frm);\n   begin\n      if P = null or else Index > Field_Count (Frm) then\n         raise Form_Exception;\n      else\n         P := P + ptrdiff_t (C_Int (Index) - 1);\n         return P.all;\n      end if;\n   end Fields;\n   --  |\n   --  |\n   --  |\n   function Field_Count (Frm : Form) return Natural\n   is\n      function Count (Frm : Form) return C_Int;\n      pragma Import (C, Count, \"field_count\");\n   begin\n      return Natural (Count (Frm));\n   end Field_Count;\n   --  |\n   --  |\n   --  |\n   procedure Move (Fld    : Field;\n                   Line   : Line_Position;\n                   Column : Column_Position)\n   is\n      function Move (Fld : Field; L, C : C_Int) return Eti_Error;\n      pragma Import (C, Move, \"move_field\");\n\n   begin\n      Eti_Exception (Move (Fld, C_Int (Line), C_Int (Column)));\n   end Move;\n   --  |\n   --  |=====================================================================\n   --  | man page form_new.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   function Create (Fields : Field_Array_Access) return Form\n   is\n      function NewForm (Fields : System.Address) return Form;\n      pragma Import (C, NewForm, \"new_form\");\n\n      M   : Form;\n   begin\n      pragma Assert (Fields.all (Fields'Last) = Null_Field);\n      if Fields.all (Fields'Last) /= Null_Field then\n         raise Form_Exception;\n      else\n         M := NewForm (Fields.all (Fields'First)'Address);\n         if M = Null_Form then\n            raise Form_Exception;\n         end if;\n         return M;\n      end if;\n   end Create;\n   --  |\n   --  |\n   --  |\n   procedure Delete (Frm : in out Form)\n   is\n      function Free (Frm : Form) return Eti_Error;\n      pragma Import (C, Free, \"free_form\");\n\n   begin\n      Eti_Exception (Free (Frm));\n      Frm := Null_Form;\n   end Delete;\n   --  |\n   --  |=====================================================================\n   --  | man page form_opts.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Set_Options (Frm     : Form;\n                          Options : Form_Option_Set)\n   is\n      function Set_Form_Opts (Frm : Form;\n                              Opt : Form_Option_Set) return Eti_Error;\n      pragma Import (C, Set_Form_Opts, \"set_form_opts\");\n\n   begin\n      Eti_Exception (Set_Form_Opts (Frm, Options));\n   end Set_Options;\n   --  |\n   --  |\n   --  |\n   procedure Switch_Options (Frm     : Form;\n                             Options : Form_Option_Set;\n                             On      : Boolean := True)\n   is\n      function Form_Opts_On (Frm : Form;\n                             Opt : Form_Option_Set) return Eti_Error;\n      pragma Import (C, Form_Opts_On, \"form_opts_on\");\n      function Form_Opts_Off (Frm : Form;\n                              Opt : Form_Option_Set) return Eti_Error;\n      pragma Import (C, Form_Opts_Off, \"form_opts_off\");\n\n   begin\n      if On then\n         Eti_Exception (Form_Opts_On (Frm, Options));\n      else\n         Eti_Exception (Form_Opts_Off (Frm, Options));\n      end if;\n   end Switch_Options;\n   --  |\n   --  |\n   --  |\n   procedure Get_Options (Frm     : Form;\n                          Options : out Form_Option_Set)\n   is\n      function Form_Opts (Frm : Form) return Form_Option_Set;\n      pragma Import (C, Form_Opts, \"form_opts\");\n\n   begin\n      Options := Form_Opts (Frm);\n   end Get_Options;\n   --  |\n   --  |\n   --  |\n   function Get_Options (Frm : Form := Null_Form) return Form_Option_Set\n   is\n      Fos : Form_Option_Set;\n   begin\n      Get_Options (Frm, Fos);\n      return Fos;\n   end Get_Options;\n   --  |\n   --  |=====================================================================\n   --  | man page form_post.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Post (Frm  : Form;\n                   Post : Boolean := True)\n   is\n      function M_Post (Frm : Form) return Eti_Error;\n      pragma Import (C, M_Post, \"post_form\");\n      function M_Unpost (Frm : Form) return Eti_Error;\n      pragma Import (C, M_Unpost, \"unpost_form\");\n\n   begin\n      if Post then\n         Eti_Exception (M_Post (Frm));\n      else\n         Eti_Exception (M_Unpost (Frm));\n      end if;\n   end Post;\n   --  |\n   --  |=====================================================================\n   --  | man page form_cursor.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Position_Cursor (Frm : Form)\n   is\n      function Pos_Form_Cursor (Frm : Form) return Eti_Error;\n      pragma Import (C, Pos_Form_Cursor, \"pos_form_cursor\");\n\n   begin\n      Eti_Exception (Pos_Form_Cursor (Frm));\n   end Position_Cursor;\n   --  |\n   --  |=====================================================================\n   --  | man page form_data.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   function Data_Ahead (Frm : Form) return Boolean\n   is\n      function Ahead (Frm : Form) return C_Int;\n      pragma Import (C, Ahead, \"data_ahead\");\n\n      Res : constant C_Int := Ahead (Frm);\n   begin\n      if Res = Curses_False then\n         return False;\n      else\n         return True;\n      end if;\n   end Data_Ahead;\n   --  |\n   --  |\n   --  |\n   function Data_Behind (Frm : Form) return Boolean\n   is\n      function Behind (Frm : Form) return C_Int;\n      pragma Import (C, Behind, \"data_behind\");\n\n      Res : constant C_Int := Behind (Frm);\n   begin\n      if Res = Curses_False then\n         return False;\n      else\n         return True;\n      end if;\n   end Data_Behind;\n   --  |\n   --  |=====================================================================\n   --  | man page form_driver.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   function Driver (Frm : Form;\n                    Key : Key_Code) return Driver_Result\n   is\n      function Frm_Driver (Frm : Form; Key : C_Int) return Eti_Error;\n      pragma Import (C, Frm_Driver, \"form_driver\");\n\n      R : constant Eti_Error := Frm_Driver (Frm, C_Int (Key));\n   begin\n      case R is\n         when E_Unknown_Command =>\n            return Unknown_Request;\n         when E_Invalid_Field =>\n            return Invalid_Field;\n         when E_Request_Denied =>\n            return Request_Denied;\n         when others =>\n            Eti_Exception (R);\n            return Form_Ok;\n      end case;\n   end Driver;\n   --  |\n   --  |=====================================================================\n   --  | man page form_page.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Set_Current (Frm : Form;\n                          Fld : Field)\n   is\n      function Set_Current_Fld (Frm : Form; Fld : Field) return Eti_Error;\n      pragma Import (C, Set_Current_Fld, \"set_current_field\");\n\n   begin\n      Eti_Exception (Set_Current_Fld (Frm, Fld));\n   end Set_Current;\n   --  |\n   --  |\n   --  |\n   function Current (Frm : Form) return Field\n   is\n      function Current_Fld (Frm : Form) return Field;\n      pragma Import (C, Current_Fld, \"current_field\");\n\n      Fld : constant Field := Current_Fld (Frm);\n   begin\n      if Fld = Null_Field then\n         raise Form_Exception;\n      end if;\n      return Fld;\n   end Current;\n   --  |\n   --  |\n   --  |\n   procedure Set_Page (Frm  : Form;\n                       Page : Page_Number := Page_Number'First)\n   is\n      function Set_Frm_Page (Frm : Form; Pg : C_Int) return Eti_Error;\n      pragma Import (C, Set_Frm_Page, \"set_form_page\");\n\n   begin\n      Eti_Exception (Set_Frm_Page (Frm, C_Int (Page)));\n   end Set_Page;\n   --  |\n   --  |\n   --  |\n   function Page (Frm : Form) return Page_Number\n   is\n      function Get_Page (Frm : Form) return C_Int;\n      pragma Import (C, Get_Page, \"form_page\");\n\n      P : constant C_Int := Get_Page (Frm);\n   begin\n      if P < 0 then\n         raise Form_Exception;\n      else\n         return Page_Number (P);\n      end if;\n   end Page;\n\n   function Get_Index (Fld : Field) return Positive\n   is\n      function Get_Fieldindex (Fld : Field) return C_Int;\n      pragma Import (C, Get_Fieldindex, \"field_index\");\n\n      Res : constant C_Int := Get_Fieldindex (Fld);\n   begin\n      if Res = Curses_Err then\n         raise Form_Exception;\n      end if;\n      return Positive (Natural (Res) + Positive'First);\n   end Get_Index;\n\n   --  |\n   --  |=====================================================================\n   --  | man page form_new_page.3x\n   --  |=====================================================================\n   --  |\n   --  |\n   --  |\n   procedure Set_New_Page (Fld      : Field;\n                           New_Page : Boolean := True)\n   is\n      function Set_Page (Fld : Field; Flg : C_Int) return Eti_Error;\n      pragma Import (C, Set_Page, \"set_new_page\");\n\n   begin\n      Eti_Exception (Set_Page (Fld, Boolean'Pos (New_Page)));\n   end Set_New_Page;\n   --  |\n   --  |\n   --  |\n   function Is_New_Page (Fld : Field) return Boolean\n   is\n      function Is_New (Fld : Field) return C_Int;\n      pragma Import (C, Is_New, \"new_page\");\n\n      Res : constant C_Int := Is_New (Fld);\n   begin\n      if Res = Curses_False then\n         return False;\n      else\n         return True;\n      end if;\n   end Is_New_Page;\n\n   procedure Free (FA          : in out Field_Array_Access;\n                   Free_Fields : Boolean := False)\n   is\n      procedure Release is new Ada.Unchecked_Deallocation\n        (Field_Array, Field_Array_Access);\n   begin\n      if FA /= null and then Free_Fields then\n         for I in FA'First .. (FA'Last - 1) loop\n            if FA.all (I) /= Null_Field then\n               Delete (FA.all (I));\n            end if;\n         end loop;\n      end if;\n      Release (FA);\n   end Free;\n\n   --  |=====================================================================\n\n   function Default_Field_Options return Field_Option_Set\n   is\n   begin\n      return Get_Options (Null_Field);\n   end Default_Field_Options;\n\n   function Default_Form_Options return Form_Option_Set\n   is\n   begin\n      return Get_Options (Null_Form);\n   end Default_Form_Options;\n\nend Terminal_Interface.Curses.Forms;\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}