{
  "module_name": "lib_tracemse.c",
  "hash_id": "89e0f74c20afd863528bc364077be6d86b1bb2ebdedafd3325e24d698867b0ef",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/trace/lib_tracemse.c",
  "human_readable_source": " \n\n \n\n \n\n#include <curses.priv.h>\n\nMODULE_ID(\"$Id: lib_tracemse.c,v 1.23 2020/02/02 23:34:34 tom Exp $\")\n\n#ifdef TRACE\n\n#define my_buffer sp->tracemse_buf\n\nNCURSES_EXPORT(char *)\n_nc_trace_mmask_t(SCREEN *sp, mmask_t code)\n{\n#define SHOW(m, s) \\\n    if ((code & m) == m) { \\\n\tsize_t n = strlen(my_buffer); \\\n\tif (n && (my_buffer[n-1] != '{')) \\\n\t_nc_STRCAT(my_buffer, \", \", sizeof(my_buffer)); \\\n\t_nc_STRCAT(my_buffer, s, sizeof(my_buffer)); \\\n    }\n\n    SHOW(BUTTON1_RELEASED, \"release-1\");\n    SHOW(BUTTON1_PRESSED, \"press-1\");\n    SHOW(BUTTON1_CLICKED, \"click-1\");\n    SHOW(BUTTON1_DOUBLE_CLICKED, \"doubleclick-1\");\n    SHOW(BUTTON1_TRIPLE_CLICKED, \"tripleclick-1\");\n#if NCURSES_MOUSE_VERSION == 1\n    SHOW(BUTTON1_RESERVED_EVENT, \"reserved-1\");\n#endif\n\n    SHOW(BUTTON2_RELEASED, \"release-2\");\n    SHOW(BUTTON2_PRESSED, \"press-2\");\n    SHOW(BUTTON2_CLICKED, \"click-2\");\n    SHOW(BUTTON2_DOUBLE_CLICKED, \"doubleclick-2\");\n    SHOW(BUTTON2_TRIPLE_CLICKED, \"tripleclick-2\");\n#if NCURSES_MOUSE_VERSION == 1\n    SHOW(BUTTON2_RESERVED_EVENT, \"reserved-2\");\n#endif\n\n    SHOW(BUTTON3_RELEASED, \"release-3\");\n    SHOW(BUTTON3_PRESSED, \"press-3\");\n    SHOW(BUTTON3_CLICKED, \"click-3\");\n    SHOW(BUTTON3_DOUBLE_CLICKED, \"doubleclick-3\");\n    SHOW(BUTTON3_TRIPLE_CLICKED, \"tripleclick-3\");\n#if NCURSES_MOUSE_VERSION == 1\n    SHOW(BUTTON3_RESERVED_EVENT, \"reserved-3\");\n#endif\n\n    SHOW(BUTTON4_RELEASED, \"release-4\");\n    SHOW(BUTTON4_PRESSED, \"press-4\");\n    SHOW(BUTTON4_CLICKED, \"click-4\");\n    SHOW(BUTTON4_DOUBLE_CLICKED, \"doubleclick-4\");\n    SHOW(BUTTON4_TRIPLE_CLICKED, \"tripleclick-4\");\n#if NCURSES_MOUSE_VERSION == 1\n    SHOW(BUTTON4_RESERVED_EVENT, \"reserved-4\");\n#endif\n\n#if NCURSES_MOUSE_VERSION == 2\n    SHOW(BUTTON5_RELEASED, \"release-5\");\n    SHOW(BUTTON5_PRESSED, \"press-5\");\n    SHOW(BUTTON5_CLICKED, \"click-5\");\n    SHOW(BUTTON5_DOUBLE_CLICKED, \"doubleclick-5\");\n    SHOW(BUTTON5_TRIPLE_CLICKED, \"tripleclick-5\");\n#endif\n\n    SHOW(BUTTON_CTRL, \"ctrl\");\n    SHOW(BUTTON_SHIFT, \"shift\");\n    SHOW(BUTTON_ALT, \"alt\");\n    SHOW(ALL_MOUSE_EVENTS, \"all-events\");\n    SHOW(REPORT_MOUSE_POSITION, \"position\");\n\n#undef SHOW\n\n    if (my_buffer[strlen(my_buffer) - 1] == ' ')\n\tmy_buffer[strlen(my_buffer) - 2] = '\\0';\n\n    return (my_buffer);\n}\n\nNCURSES_EXPORT(char *)\n_nc_tracemouse(SCREEN *sp, MEVENT const *ep)\n{\n    char *result = 0;\n\n    if (sp != 0) {\n\t_nc_SPRINTF(my_buffer, _nc_SLIMIT(sizeof(my_buffer))\n\t\t    TRACEMSE_FMT,\n\t\t    ep->id,\n\t\t    ep->x,\n\t\t    ep->y,\n\t\t    ep->z,\n\t\t    (unsigned long) ep->bstate);\n\n\t(void) _nc_trace_mmask_t(sp, ep->bstate);\n\t_nc_STRCAT(my_buffer, \"}\", sizeof(my_buffer));\n\tresult = (my_buffer);\n    }\n    return result;\n}\n\nNCURSES_EXPORT(mmask_t)\n_nc_retrace_mmask_t(SCREEN *sp, mmask_t code)\n{\n    if (sp != 0) {\n\t*my_buffer = '\\0';\n\tT((T_RETURN(\"{%s}\"), _nc_trace_mmask_t(sp, code)));\n    } else {\n\tT((T_RETURN(\"{?}\")));\n    }\n    return code;\n}\n\nNCURSES_EXPORT(char *)\n_tracemouse(MEVENT const *ep)\n{\n    return _nc_tracemouse(CURRENT_SCREEN, ep);\n}\n\n#else  \nEMPTY_MODULE(_nc_lib_tracemouse)\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}