{
  "module_name": "MKcaptab.awk",
  "hash_id": "0521d74c4797660a261064942e604bef28769cdd037bed8c19d28c1e9ba53f1d",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/tinfo/MKcaptab.awk",
  "human_readable_source": "##############################################################################\n# Copyright 2020 Thomas E. Dickey                                            #\n# Copyright 1998-2006,2007 Free Software Foundation, Inc.                    #\n#                                                                            #\n# Permission is hereby granted, free of charge, to any person obtaining a    #\n# copy of this software and associated documentation files (the \"Software\"), #\n# to deal in the Software without restriction, including without limitation  #\n# the rights to use, copy, modify, merge, publish, distribute, distribute    #\n# with modifications, sublicense, and/or sell copies of the Software, and to #\n# permit persons to whom the Software is furnished to do so, subject to the  #\n# following conditions:                                                      #\n#                                                                            #\n# The above copyright notice and this permission notice shall be included in #\n# all copies or substantial portions of the Software.                        #\n#                                                                            #\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR #\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,   #\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL    #\n# THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER      #\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING    #\n# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER        #\n# DEALINGS IN THE SOFTWARE.                                                  #\n#                                                                            #\n# Except as contained in this notice, the name(s) of the above copyright     #\n# holders shall not be used in advertising or otherwise to promote the sale, #\n# use or other dealings in this Software without prior written               #\n# authorization.                                                             #\n##############################################################################\n# $Id: MKcaptab.awk,v 1.21 2020/02/02 23:34:34 tom Exp $\nfunction add_string(text) {\n    if (text != \"IGNORE\") {\n\toffsets[num_strings] = offset;\n\toffset = offset + length(text) + 1;\n\tprintf \"%s\\\\0\", text;\n    } else {\n\toffsets[num_strings] = -1;\n    }\n    num_strings = num_strings + 1;\n    if ((num_strings % 3) == 0) {\n\tprintf \"\\\\\\n\";\n    }\n    return offsets[num_strings - 1];\n}\nBEGIN {\n\tfirst = 1;\n\tnum_aliases = 0;\n\tnum_strings = 0;\n\toffset = 0;\n}\n\n/^[^#]/ {\n\t    if (first) {\n\t\tprintf \"/* generated by MKcaptab.awk %s(%d) */\\n\", tablename, bigstrings;\n\t\tprint \"\"\n\t\tif (bigstrings) {\n\t\t    printf \"static struct alias *_nc_%s_table = 0;\\n\", tablename;\n\t\t    print \"\";\n\t\t    printf \"static const char %s_text[] = \\\"\\\\\\n\", tablename;\n\t\t} else {\n\t\t    printf \"static const struct alias _nc_%s_table[] =\\n\", tablename;\n\t\t    printf \"{\\n\";\n\t\t}\n\t\tfirst = 0;\n\t    }\n\t    if ($1 == tablename) {\n\t\tif ($3 == \"IGNORE\") {\n\t\t    to = \"(char *)NULL\";\n\t\t} else {\n\t\t    to = \"\\\"\" $3 \"\\\"\";\n\t\t}\n\t\tif (bigstrings) {\n\t\t    c1 = add_string($2);\n\t\t    c2 = add_string($3);\n\t\t    c3 = add_string($4);\n\t\t    aliases[num_aliases] = sprintf(\"\\t{%5d, %5d, %5d},\\t /* %s */\", c1, c2, c3, $5);\n\t\t    num_aliases = num_aliases + 1;\n\t\t} else {\n\t\t    printf \"\\t{\\\"%s\\\", %s, \\\"%s\\\"},\\t /* %s */\\n\", $2, to, $4, $5;\n\t\t}\n\t    }\n\t}\nEND\t{\n\t    if (bigstrings) {\n\t\tprintf \"\\\";\\n\\n\";\n\t\tprintf \"static const alias_table_data %s_data[] = {\\n\", tablename;\n\t\tfor (n = 0; n < num_aliases; ++n) {\n\t\t    printf \"%s\\n\", aliases[n];\n\t\t}\n\t\tprintf \"};\\n\\n\";\n\t    } else {\n\t\tprintf \"\\t{(char *)NULL, (char *)NULL, (char *)NULL}\\n\";\n\t\tprintf \"};\\n\\n\";\n\t    }\n\t}\n# vile:sw=4:\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}