{
  "module_name": "lib_ti.c",
  "hash_id": "c4cd5d51e94d9283c5176c4c19c20f5020dc745725a65cb178c592201126bd9f",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/tinfo/lib_ti.c",
  "human_readable_source": " \n\n \n\n#include <curses.priv.h>\n\n#include <tic.h>\n\nMODULE_ID(\"$Id: lib_ti.c,v 1.34 2020/02/02 23:34:34 tom Exp $\")\n\n#if 0\nstatic bool\nsame_name(const char *a, const char *b)\n{\n    fprintf(stderr, \"compare(%s,%s)\\n\", a, b);\n    return !strcmp(a, b);\n}\n#else\n#define same_name(a,b) !strcmp(a,b)\n#endif\n\nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(tigetflag) (NCURSES_SP_DCLx const char *str)\n{\n    int result = ABSENT_BOOLEAN;\n\n    T((T_CALLED(\"tigetflag(%p, %s)\"), (void *) SP_PARM, str));\n\n    if (HasTInfoTerminal(SP_PARM)) {\n\tTERMTYPE2 *tp = &TerminalType(TerminalOf(SP_PARM));\n\tstruct name_table_entry const *entry_ptr;\n\tint j = -1;\n\n\tentry_ptr = _nc_find_type_entry(str, BOOLEAN, FALSE);\n\tif (entry_ptr != 0) {\n\t    j = entry_ptr->nte_index;\n\t}\n#if NCURSES_XNAMES\n\telse {\n\t    int i;\n\t    for_each_ext_boolean(i, tp) {\n\t\tconst char *capname = ExtBoolname(tp, i, boolnames);\n\t\tif (same_name(str, capname)) {\n\t\t    j = i;\n\t\t    break;\n\t\t}\n\t    }\n\t}\n#endif\n\tif (j >= 0) {\n\t     \n\t    result = tp->Booleans[j];\n\t}\n    }\n\n    returnCode(result);\n}\n\n#if NCURSES_SP_FUNCS\nNCURSES_EXPORT(int)\ntigetflag(const char *str)\n{\n    return NCURSES_SP_NAME(tigetflag) (CURRENT_SCREEN, str);\n}\n#endif\n\nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(tigetnum) (NCURSES_SP_DCLx const char *str)\n{\n    int result = CANCELLED_NUMERIC;\t \n\n    T((T_CALLED(\"tigetnum(%p, %s)\"), (void *) SP_PARM, str));\n\n    if (HasTInfoTerminal(SP_PARM)) {\n\tTERMTYPE2 *tp = &TerminalType(TerminalOf(SP_PARM));\n\tstruct name_table_entry const *entry_ptr;\n\tint j = -1;\n\n\tentry_ptr = _nc_find_type_entry(str, NUMBER, FALSE);\n\tif (entry_ptr != 0) {\n\t    j = entry_ptr->nte_index;\n\t}\n#if NCURSES_XNAMES\n\telse {\n\t    int i;\n\t    for_each_ext_number(i, tp) {\n\t\tconst char *capname = ExtNumname(tp, i, numnames);\n\t\tif (same_name(str, capname)) {\n\t\t    j = i;\n\t\t    break;\n\t\t}\n\t    }\n\t}\n#endif\n\tif (j >= 0) {\n\t    if (VALID_NUMERIC(tp->Numbers[j]))\n\t\tresult = tp->Numbers[j];\n\t    else\n\t\tresult = ABSENT_NUMERIC;\n\t}\n    }\n\n    returnCode(result);\n}\n\n#if NCURSES_SP_FUNCS\nNCURSES_EXPORT(int)\ntigetnum(const char *str)\n{\n    return NCURSES_SP_NAME(tigetnum) (CURRENT_SCREEN, str);\n}\n#endif\n\nNCURSES_EXPORT(char *)\nNCURSES_SP_NAME(tigetstr) (NCURSES_SP_DCLx const char *str)\n{\n    char *result = CANCELLED_STRING;\n\n    T((T_CALLED(\"tigetstr(%p, %s)\"), (void *) SP_PARM, str));\n\n    if (HasTInfoTerminal(SP_PARM)) {\n\tTERMTYPE2 *tp = &TerminalType(TerminalOf(SP_PARM));\n\tstruct name_table_entry const *entry_ptr;\n\tint j = -1;\n\n\tentry_ptr = _nc_find_type_entry(str, STRING, FALSE);\n\tif (entry_ptr != 0) {\n\t    j = entry_ptr->nte_index;\n\t}\n#if NCURSES_XNAMES\n\telse {\n\t    int i;\n\t    for_each_ext_string(i, tp) {\n\t\tconst char *capname = ExtStrname(tp, i, strnames);\n\t\tif (same_name(str, capname)) {\n\t\t    j = i;\n\t\t    break;\n\t\t}\n\t    }\n\t}\n#endif\n\tif (j >= 0) {\n\t     \n\t    result = tp->Strings[j];\n\t}\n    }\n\n    returnPtr(result);\n}\n\n#if NCURSES_SP_FUNCS\nNCURSES_EXPORT(char *)\ntigetstr(const char *str)\n{\n    return NCURSES_SP_NAME(tigetstr) (CURRENT_SCREEN, str);\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}