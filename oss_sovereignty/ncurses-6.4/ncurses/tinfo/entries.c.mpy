{
  "module_name": "entries.c",
  "hash_id": "f7853e4a39149fa493eafe86b4ecd4bf6b11b4dff30d743b2a681c173b206c4a",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/tinfo/entries.c",
  "human_readable_source": " \n\n \n\n#include <curses.priv.h>\n\n#include <ctype.h>\n\n#include <tic.h>\n\nMODULE_ID(\"$Id: entries.c,v 1.34 2022/08/13 16:57:35 tom Exp $\")\n\n \n \n\nNCURSES_EXPORT_VAR(ENTRY *) _nc_head = 0;\nNCURSES_EXPORT_VAR(ENTRY *) _nc_tail = 0;\n\nstatic ENTRY *\n_nc_delink_entry(ENTRY * headp, TERMTYPE2 *tterm)\n \n{\n    ENTRY *ep, *last;\n\n    for (last = 0, ep = headp; ep != 0; last = ep, ep = ep->next) {\n\tif (&(ep->tterm) == tterm) {\n\t    if (last != 0) {\n\t\tlast->next = ep->next;\n\t    }\n\t    if (ep->next != 0) {\n\t\tep->next->last = last;\n\t    }\n\t    if (ep == _nc_head) {\n\t\t_nc_head = ep->next;\n\t    }\n\t    if (ep == _nc_tail) {\n\t\t_nc_tail = last;\n\t    }\n\t    break;\n\t}\n    }\n    return ep;\n}\n\nNCURSES_EXPORT(void)\n_nc_free_entry(ENTRY * headp, TERMTYPE2 *tterm)\n \n{\n    ENTRY *ep;\n\n    if ((ep = _nc_delink_entry(headp, tterm)) != 0) {\n\tfree(ep);\n    }\n}\n\nNCURSES_EXPORT(void)\n_nc_free_entries(ENTRY * headp)\n \n{\n    (void) headp;\t\t \n\n    while (_nc_head != 0) {\n\t_nc_free_termtype2(&(_nc_head->tterm));\n    }\n}\n\nNCURSES_EXPORT(void)\n_nc_leaks_tinfo(void)\n{\n#if NO_LEAKS\n    char *s;\n#endif\n\n    T((T_CALLED(\"_nc_leaks_tinfo()\")));\n#if NO_LEAKS\n    _nc_globals.leak_checking = TRUE;\n    _nc_free_tparm(cur_term);\n    _nc_tgetent_leaks();\n\n#ifdef USE_PTHREADS\n     \n    _nc_lock_global(screen);\n    {\n\tPRESCREEN_LIST *p;\n\tpthread_t id = GetThreadID();\n\tfor (p = _nc_prescreen.allocated; p != 0; p = p->next) {\n\t    if (p->id == id && p->sp != CURRENT_SCREEN) {\n\t\tFreeAndNull(p->sp);\n\t    }\n\t}\n    }\n    _nc_unlock_global(screen);\n#endif\n    if (TerminalOf(CURRENT_SCREEN) != 0) {\n\tdel_curterm(TerminalOf(CURRENT_SCREEN));\n    }\n    _nc_forget_prescr();\n\n    _nc_comp_captab_leaks();\n    _nc_comp_userdefs_leaks();\n    _nc_free_entries(_nc_head);\n    _nc_get_type(0);\n    _nc_first_name(0);\n    _nc_db_iterator_leaks();\n    _nc_keyname_leaks();\n#if BROKEN_LINKER || USE_REENTRANT\n    _nc_names_leaks();\n    _nc_codes_leaks();\n    FreeIfNeeded(_nc_prescreen.real_acs_map);\n#endif\n    _nc_comp_error_leaks();\n\n    if ((s = _nc_home_terminfo()) != 0)\n\tfree(s);\n\n#ifdef TRACE\n    T((T_RETURN(\"\")));\n    curses_trace(0);\n    _nc_trace_buf(-1, (size_t) 0);\n#endif\n\n#endif  \n    returnVoid;\n}\n\n#if NO_LEAKS\nNCURSES_EXPORT(void)\n_nc_free_tinfo(int code)\n{\n    T((T_CALLED(\"_nc_free_tinfo(%d)\"), code));\n    _nc_leaks_tinfo();\n    exit(code);\n}\n#endif\n\nNCURSES_EXPORT(void)\nexit_terminfo(int code)\n{\n    T((T_CALLED(\"exit_terminfo(%d)\"), code));\n#if NO_LEAKS\n    _nc_leaks_tinfo();\n#endif\n    exit(code);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}