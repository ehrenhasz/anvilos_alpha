{
  "module_name": "add_tries.c",
  "hash_id": "adf38611da4ded31f2470dae6b64934d5cc583d39d062eb27e35ddfa3aa3dfd3",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/tinfo/add_tries.c",
  "human_readable_source": " \n\n \n\n \n\n#include <curses.priv.h>\n\nMODULE_ID(\"$Id: add_tries.c,v 1.12 2020/02/02 23:34:34 tom Exp $\")\n\n#define SET_TRY(dst,src) if ((dst->ch = *src++) == 128) dst->ch = '\\0'\n#define CMP_TRY(a,b) ((a)? (a == b) : (b == 128))\n\nNCURSES_EXPORT(int)\n_nc_add_to_try(TRIES ** tree, const char *str, unsigned code)\n{\n    TRIES *ptr, *savedptr;\n    unsigned const char *txt = (unsigned const char *) str;\n\n    T((T_CALLED(\"_nc_add_to_try(%p, %s, %u)\"),\n       (void *) *tree, _nc_visbuf(str), code));\n    if (txt == 0 || *txt == '\\0' || code == 0)\n\treturnCode(ERR);\n\n    if ((*tree) != 0) {\n\tptr = savedptr = (*tree);\n\n\tfor (;;) {\n\t    unsigned char cmp = *txt;\n\n\t    while (!CMP_TRY(ptr->ch, cmp)\n\t\t   && ptr->sibling != 0)\n\t\tptr = ptr->sibling;\n\n\t    if (CMP_TRY(ptr->ch, cmp)) {\n\t\tif (*(++txt) == '\\0') {\n\t\t    ptr->value = (unsigned short) code;\n\t\t    returnCode(OK);\n\t\t}\n\t\tif (ptr->child != 0)\n\t\t    ptr = ptr->child;\n\t\telse\n\t\t    break;\n\t    } else {\n\t\tif ((ptr->sibling = typeCalloc(TRIES, 1)) == 0) {\n\t\t    returnCode(ERR);\n\t\t}\n\n\t\tsavedptr = ptr = ptr->sibling;\n\t\tSET_TRY(ptr, txt);\n\t\tptr->value = 0;\n\n\t\tbreak;\n\t    }\n\t}\t\t\t \n    } else {\t\t\t \n\tsavedptr = ptr = (*tree) = typeCalloc(TRIES, 1);\n\n\tif (ptr == 0) {\n\t    returnCode(ERR);\n\t}\n\n\tSET_TRY(ptr, txt);\n\tptr->value = 0;\n    }\n\n     \n\n    while (*txt) {\n\tptr->child = typeCalloc(TRIES, 1);\n\n\tptr = ptr->child;\n\n\tif (ptr == 0) {\n\t    while ((ptr = savedptr) != 0) {\n\t\tsavedptr = ptr->child;\n\t\tfree(ptr);\n\t    }\n\t    *tree = NULL;\n\t    returnCode(ERR);\n\t}\n\n\tSET_TRY(ptr, txt);\n\tptr->value = 0;\n    }\n\n    ptr->value = (unsigned short) code;\n    returnCode(OK);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}