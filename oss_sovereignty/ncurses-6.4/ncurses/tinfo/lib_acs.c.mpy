{
  "module_name": "lib_acs.c",
  "hash_id": "f48567e9f5d34b0262d6675f5064f581116d54884158ae11cf61d417def7916a",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/tinfo/lib_acs.c",
  "human_readable_source": " \n\n \n\n#include <curses.priv.h>\n\n#ifndef CUR\n#define CUR SP_TERMTYPE\n#endif\n\nMODULE_ID(\"$Id: lib_acs.c,v 1.50 2020/02/02 23:34:34 tom Exp $\")\n\n#if BROKEN_LINKER || USE_REENTRANT\n#define MyBuffer _nc_prescreen.real_acs_map\nNCURSES_EXPORT(chtype *)\nNCURSES_PUBLIC_VAR(acs_map) (void)\n{\n    if (MyBuffer == 0)\n\tMyBuffer = typeCalloc(chtype, ACS_LEN);\n    return MyBuffer;\n}\n#undef MyBuffer\n#else\nNCURSES_EXPORT_VAR (chtype) acs_map[ACS_LEN] =\n{\n    0\n};\n#endif\n\n#ifdef USE_TERM_DRIVER\nNCURSES_EXPORT(chtype)\nNCURSES_SP_NAME(_nc_acs_char) (NCURSES_SP_DCLx int c)\n{\n    chtype *map;\n    if (c < 0 || c >= ACS_LEN)\n\treturn (chtype) 0;\n    map = (SP_PARM != 0) ? SP_PARM->_acs_map :\n#if BROKEN_LINKER || USE_REENTRANT\n\t_nc_prescreen.real_acs_map\n#else\n\tacs_map\n#endif\n\t;\n    return map[c];\n}\n#endif  \n\nNCURSES_EXPORT(void)\nNCURSES_SP_NAME(_nc_init_acs) (NCURSES_SP_DCL0)\n{\n    chtype *fake_map = acs_map;\n    chtype *real_map = SP_PARM != 0 ? SP_PARM->_acs_map : fake_map;\n    int j;\n\n    T((\"initializing ACS map\"));\n\n     \n    if (real_map != fake_map) {\n\tfor (j = 1; j < ACS_LEN; ++j) {\n\t    real_map[j] = 0;\n\t    fake_map[j] = A_ALTCHARSET | (chtype) j;\n\t    if (SP_PARM)\n\t\tSP_PARM->_screen_acs_map[j] = FALSE;\n\t}\n    } else {\n\tfor (j = 1; j < ACS_LEN; ++j) {\n\t    real_map[j] = 0;\n\t}\n    }\n\n     \n    real_map['l'] = '+';\t \n    real_map['m'] = '+';\t \n    real_map['k'] = '+';\t \n    real_map['j'] = '+';\t \n    real_map['u'] = '+';\t \n    real_map['t'] = '+';\t \n    real_map['v'] = '+';\t \n    real_map['w'] = '+';\t \n    real_map['q'] = '-';\t \n    real_map['x'] = '|';\t \n    real_map['n'] = '+';\t \n    real_map['o'] = '~';\t \n    real_map['s'] = '_';\t \n    real_map['`'] = '+';\t \n    real_map['a'] = ':';\t \n    real_map['f'] = '\\'';\t \n    real_map['g'] = '#';\t \n    real_map['~'] = 'o';\t \n    real_map[','] = '<';\t \n    real_map['+'] = '>';\t \n    real_map['.'] = 'v';\t \n    real_map['-'] = '^';\t \n    real_map['h'] = '#';\t \n    real_map['i'] = '#';\t \n    real_map['0'] = '#';\t \n     \n    real_map['p'] = '-';\t \n    real_map['r'] = '-';\t \n    real_map['y'] = '<';\t \n    real_map['z'] = '>';\t \n    real_map['{'] = '*';\t \n    real_map['|'] = '!';\t \n    real_map['}'] = 'f';\t \n     \n    real_map['L'] = '+';\t \n    real_map['M'] = '+';\t \n    real_map['K'] = '+';\t \n    real_map['J'] = '+';\t \n    real_map['T'] = '+';\t \n    real_map['U'] = '+';\t \n    real_map['V'] = '+';\t \n    real_map['W'] = '+';\t \n    real_map['Q'] = '-';\t \n    real_map['X'] = '|';\t \n    real_map['N'] = '+';\t \n     \n    real_map['C'] = '+';\t \n    real_map['D'] = '+';\t \n    real_map['B'] = '+';\t \n    real_map['A'] = '+';\t \n    real_map['G'] = '+';\t \n    real_map['F'] = '+';\t \n    real_map['H'] = '+';\t \n    real_map['I'] = '+';\t \n    real_map['R'] = '-';\t \n    real_map['Y'] = '|';\t \n    real_map['E'] = '+';\t \n\n#ifdef USE_TERM_DRIVER\n    CallDriver_2(SP_PARM, td_initacs, real_map, fake_map);\n#else\n    if (ena_acs != NULL) {\n\tNCURSES_PUTP2(\"ena_acs\", ena_acs);\n    }\n#if NCURSES_EXT_FUNCS && defined(enter_pc_charset_mode) && defined(exit_pc_charset_mode)\n     \n#define PCH_KLUDGE(a,b) (a != 0 && b != 0 && !strcmp(a,b))\n    if (PCH_KLUDGE(enter_pc_charset_mode, enter_alt_charset_mode) &&\n\tPCH_KLUDGE(exit_pc_charset_mode, exit_alt_charset_mode)) {\n\tsize_t i;\n\tfor (i = 1; i < ACS_LEN; ++i) {\n\t    if (real_map[i] == 0) {\n\t\treal_map[i] = (chtype) i;\n\t\tif (real_map != fake_map) {\n\t\t    if (SP != 0)\n\t\t\tSP->_screen_acs_map[i] = TRUE;\n\t\t}\n\t    }\n\t}\n    }\n#endif\n\n    if (acs_chars != NULL) {\n\tsize_t i = 0;\n\tsize_t length = strlen(acs_chars);\n\n\twhile (i + 1 < length) {\n\t    if (acs_chars[i] != 0 && UChar(acs_chars[i]) < ACS_LEN) {\n\t\treal_map[UChar(acs_chars[i])] = UChar(acs_chars[i + 1]) | A_ALTCHARSET;\n\t\tT((\"#%d real_map[%s] = %s\",\n\t\t   (int) i,\n\t\t   _tracechar(UChar(acs_chars[i])),\n\t\t   _tracechtype(real_map[UChar(acs_chars[i])])));\n\t\tif (SP != 0) {\n\t\t    SP->_screen_acs_map[UChar(acs_chars[i])] = TRUE;\n\t\t}\n\t    }\n\t    i += 2;\n\t}\n    }\n#ifdef TRACE\n     \n    if (USE_TRACEF(TRACE_CALLS)) {\n\tsize_t n, m;\n\tchar show[ACS_LEN * 2 + 1];\n\tfor (n = 1, m = 0; n < ACS_LEN; n++) {\n\t    if (real_map[n] != 0) {\n\t\tshow[m++] = (char) n;\n\t\tshow[m++] = (char) ChCharOf(real_map[n]);\n\t    }\n\t}\n\tshow[m] = 0;\n\tif (acs_chars == NULL || strcmp(acs_chars, show))\n\t    _tracef(\"%s acs_chars %s\",\n\t\t    (acs_chars == NULL) ? \"NULL\" : \"READ\",\n\t\t    _nc_visbuf(acs_chars));\n\t_tracef(\"%s acs_chars %s\",\n\t\t(acs_chars == NULL)\n\t\t? \"NULL\"\n\t\t: (strcmp(acs_chars, show)\n\t\t   ? \"DIFF\"\n\t\t   : \"SAME\"),\n\t\t_nc_visbuf(show));\n\t_nc_unlock_global(tracef);\n    }\n#endif  \n#endif\n}\n\n#if NCURSES_SP_FUNCS\nNCURSES_EXPORT(void)\n_nc_init_acs(void)\n{\n    NCURSES_SP_NAME(_nc_init_acs) (CURRENT_SCREEN);\n}\n#endif\n\n#if !NCURSES_WCWIDTH_GRAPHICS\nNCURSES_EXPORT(int)\n_nc_wacs_width(unsigned ch)\n{\n    int result;\n    switch (ch) {\n    case 0x00a3:\t\t \n    case 0x00b0:\t\t \n    case 0x00b1:\t\t \n    case 0x00b7:\t\t \n    case 0x03c0:\t\t \n    case 0x2190:\t\t \n    case 0x2191:\t\t \n    case 0x2192:\t\t \n    case 0x2193:\t\t \n    case 0x2260:\t\t \n    case 0x2264:\t\t \n    case 0x2265:\t\t \n    case 0x23ba:\t\t \n    case 0x23bb:\t\t \n    case 0x23bc:\t\t \n    case 0x23bd:\t\t \n    case 0x2500:\t\t \n    case 0x2501:\t\t \n    case 0x2502:\t\t \n    case 0x2503:\t\t \n    case 0x250c:\t\t \n    case 0x250f:\t\t \n    case 0x2510:\t\t \n    case 0x2513:\t\t \n    case 0x2514:\t\t \n    case 0x2517:\t\t \n    case 0x2518:\t\t \n    case 0x251b:\t\t \n    case 0x251c:\t\t \n    case 0x2523:\t\t \n    case 0x2524:\t\t \n    case 0x252b:\t\t \n    case 0x252c:\t\t \n    case 0x2533:\t\t \n    case 0x2534:\t\t \n    case 0x253b:\t\t \n    case 0x253c:\t\t \n    case 0x254b:\t\t \n    case 0x2550:\t\t \n    case 0x2551:\t\t \n    case 0x2554:\t\t \n    case 0x2557:\t\t \n    case 0x255a:\t\t \n    case 0x255d:\t\t \n    case 0x2560:\t\t \n    case 0x2563:\t\t \n    case 0x2566:\t\t \n    case 0x2569:\t\t \n    case 0x256c:\t\t \n    case 0x2592:\t\t \n    case 0x25ae:\t\t \n    case 0x25c6:\t\t \n    case 0x2603:\t\t \n\tresult = 1;\n\tbreak;\n    default:\n\tresult = wcwidth(ch);\n\tbreak;\n    }\n    return result;\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}