{
  "module_name": "lib_data.c",
  "hash_id": "a026c04f584aff8c2dac4fa2abee000f4590d3aabe98a8de2b84a72bc63b1799",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/tinfo/lib_data.c",
  "human_readable_source": " \n\n \n\n \n\n#include <curses.priv.h>\n\nMODULE_ID(\"$Id: lib_data.c,v 1.87 2022/07/09 22:03:21 tom Exp $\")\n\n \n#if USE_REENTRANT\nNCURSES_EXPORT(WINDOW *)\nNCURSES_PUBLIC_VAR(stdscr) (void)\n{\n    return CURRENT_SCREEN ? StdScreen(CURRENT_SCREEN) : 0;\n}\nNCURSES_EXPORT(WINDOW *)\nNCURSES_PUBLIC_VAR(curscr) (void)\n{\n    return CURRENT_SCREEN ? CurScreen(CURRENT_SCREEN) : 0;\n}\nNCURSES_EXPORT(WINDOW *)\nNCURSES_PUBLIC_VAR(newscr) (void)\n{\n    return CURRENT_SCREEN ? NewScreen(CURRENT_SCREEN) : 0;\n}\n#else\nNCURSES_EXPORT_VAR(WINDOW *) stdscr = 0;\nNCURSES_EXPORT_VAR(WINDOW *) curscr = 0;\nNCURSES_EXPORT_VAR(WINDOW *) newscr = 0;\n#endif\n\nNCURSES_EXPORT_VAR(SCREEN *) _nc_screen_chain = 0;\n\n \n#if BROKEN_LINKER\nstatic SCREEN *my_screen;\n\nNCURSES_EXPORT(SCREEN *)\n_nc_screen(void)\n{\n    return my_screen;\n}\n\nNCURSES_EXPORT(int)\n_nc_alloc_screen(void)\n{\n    my_screen = _nc_alloc_screen_sp();\n    T((\"_nc_alloc_screen_sp %p\", my_screen));\n    return (my_screen != 0);\n}\n\nNCURSES_EXPORT(void)\n_nc_set_screen(SCREEN *sp)\n{\n    my_screen = sp;\n}\n\n#else\n\nNCURSES_EXPORT_VAR(SCREEN *) SP = NULL;  \n#endif\n \n#define CHARS_0s { '\\0' }\n\n#define TGETENT_0 { 0L, FALSE, NULL, NULL, NULL }\n#define TGETENT_0s { TGETENT_0, TGETENT_0, TGETENT_0, TGETENT_0 }\n\nNCURSES_EXPORT_VAR(NCURSES_GLOBALS) _nc_globals = {\n    0,\t\t\t\t \n    0,\t\t\t\t \n    0,\t\t\t\t \n\n    FALSE,\t\t\t \n    FALSE,\t\t\t \n\n    NULL,\t\t\t \n    NULL,\t\t\t \n\n    FALSE,\t\t\t \n    FALSE,\t\t\t \n    0,\t\t\t\t \n\n    NULL,\t\t\t \n    0,\t\t\t\t \n\n    NULL,\t\t\t \n    NULL,\t\t\t \n    0,\t\t\t\t \n\n    0,\t\t\t\t \n\n    2048,\t\t\t \n\n    NULL,\t\t\t \n    0,\t\t\t\t \n\n    TGETENT_0s,\t\t\t \n    0,\t\t\t\t \n    0,\t\t\t\t \n    0,\t\t\t\t \n\n    0,\t\t\t\t \n    0,\t\t\t\t \n    0,\t\t\t\t \n    0,\t\t\t\t \n    { { 0, 0 } },\t\t \n\n#if HAVE_TSEARCH\n    NULL,\t\t\t \n    0,\t\t\t\t \n#endif  \n\n#ifdef USE_TERM_DRIVER\n    0,\t\t\t\t \n#endif\n\n#ifndef USE_SP_WINDOWLIST\n    0,\t\t\t\t \n#endif\n\n#if USE_HOME_TERMINFO\n    NULL,\t\t\t \n#endif\n\n#if !USE_SAFE_SPRINTF\n    0,\t\t\t\t \n    0,\t\t\t\t \n#endif\n\n#ifdef USE_PTHREADS\n    PTHREAD_MUTEX_INITIALIZER,\t \n    PTHREAD_MUTEX_INITIALIZER,\t \n    PTHREAD_MUTEX_INITIALIZER,\t \n    PTHREAD_MUTEX_INITIALIZER,\t \n    PTHREAD_MUTEX_INITIALIZER,\t \n    PTHREAD_MUTEX_INITIALIZER,\t \n    0,\t\t\t\t \n    0,\t\t\t\t \n#if USE_PTHREADS_EINTR\n    0,\t\t\t\t \n#endif\n#endif\n#if USE_WIDEC_SUPPORT\n    CHARS_0s,\t\t\t \n#endif\n#ifdef TRACE\n    FALSE,\t\t\t \n    CHARS_0s,\t\t\t \n    0,\t\t\t\t \n    NULL,\t\t\t \n    -1,\t\t\t\t \n\n    NULL,\t\t\t \n    0,\t\t\t\t \n\n    NULL,\t\t\t \n    0,\t\t\t\t \n\n    CHARS_0s,\t\t\t \n\n    NULL,\t\t\t \n    0,\t\t\t\t \n\n    NULL,\t\t\t \n    0,\t\t\t\t \n\n    { CHARS_0s, CHARS_0s },\t \n    0,\t\t\t\t \n    -1,\t\t\t\t \n#if !defined(USE_PTHREADS) && USE_REENTRANT\n    0,\t\t\t\t \n#endif\n#endif  \n#if NO_LEAKS\n    FALSE,\t\t\t \n#endif\n};\n\n#define STACK_FRAME_0\t{ { 0 }, 0 }\n#define STACK_FRAME_0s\t{ STACK_FRAME_0 }\n#define NUM_VARS_0s\t{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 }\n\n#define RIPOFF_0\t{ 0,0,0 }\n#define RIPOFF_0s\t{ RIPOFF_0 }\n\nNCURSES_EXPORT_VAR(NCURSES_PRESCREEN) _nc_prescreen = {\n    NULL,\t\t\t \n    TRUE,\t\t\t \n    FALSE,\t\t\t \n    A_NORMAL,\t\t\t \n    {\t\t\t\t \n\tNULL,\t\t\t \n\n\tSTACK_FRAME_0s,\t\t \n\t0,\t\t\t \n\n\tNULL,\t\t\t \n\t0,\t\t\t \n\t0,\t\t\t \n\n\tNULL,\t\t\t \n\t0,\t\t\t \n\n\tNUM_VARS_0s,\t\t \n#ifdef TRACE\n\tNULL,\t\t\t \n#endif\n    },\n    NULL,\t\t\t \n    FALSE,\t\t\t \n    0,\t\t\t\t \n#ifndef USE_SP_RIPOFF\n    RIPOFF_0s,\t\t\t \n    NULL,\t\t\t \n#endif\n#if NCURSES_NO_PADDING\n    FALSE,\t\t\t \n#endif\n#if BROKEN_LINKER || USE_REENTRANT\n    NULL,\t\t\t \n    0,\t\t\t\t \n    0,\t\t\t\t \n    8,\t\t\t\t \n    1000,\t\t\t \n    0,\t\t\t\t \n#endif\n#ifdef TRACE\n#if BROKEN_LINKER || USE_REENTRANT\n    0L,\t\t\t\t \n    NULL,\t\t\t \n#endif\n#endif\n};\n \n\n \nNCURSES_EXPORT(SCREEN *)\n_nc_screen_of(WINDOW *win)\n{\n    SCREEN *sp = 0;\n\n    if (win != 0) {\n\tsp = WINDOW_EXT(win, screen);\n    }\n    return (sp);\n}\n\n \n#ifdef USE_PTHREADS\nstatic void\ninit_global_mutexes(void)\n{\n    static bool initialized = FALSE;\n\n    if (!initialized) {\n\tinitialized = TRUE;\n\t_nc_mutex_init(&_nc_globals.mutex_curses);\n\t_nc_mutex_init(&_nc_globals.mutex_prescreen);\n\t_nc_mutex_init(&_nc_globals.mutex_screen);\n\t_nc_mutex_init(&_nc_globals.mutex_update);\n\t_nc_mutex_init(&_nc_globals.mutex_tst_tracef);\n\t_nc_mutex_init(&_nc_globals.mutex_tracef);\n    }\n}\n\nNCURSES_EXPORT(void)\n_nc_init_pthreads(void)\n{\n    if (_nc_use_pthreads)\n\treturn;\n# if USE_WEAK_SYMBOLS\n    if ((pthread_mutex_init) == 0)\n\treturn;\n    if ((pthread_mutex_lock) == 0)\n\treturn;\n    if ((pthread_mutex_unlock) == 0)\n\treturn;\n    if ((pthread_mutex_trylock) == 0)\n\treturn;\n    if ((pthread_mutexattr_settype) == 0)\n\treturn;\n# endif\n    _nc_use_pthreads = 1;\n    init_global_mutexes();\n}\n\n \nNCURSES_EXPORT(void)\n_nc_mutex_init(pthread_mutex_t * obj)\n{\n    pthread_mutexattr_t recattr;\n\n    if (_nc_use_pthreads) {\n\tpthread_mutexattr_init(&recattr);\n\tpthread_mutexattr_settype(&recattr, PTHREAD_MUTEX_RECURSIVE);\n\tpthread_mutex_init(obj, &recattr);\n    }\n}\n\nNCURSES_EXPORT(int)\n_nc_mutex_lock(pthread_mutex_t * obj)\n{\n    int rc = 0;\n    if (_nc_use_pthreads != 0)\n\trc = pthread_mutex_lock(obj);\n    return rc;\n}\n\nNCURSES_EXPORT(int)\n_nc_mutex_trylock(pthread_mutex_t * obj)\n{\n    int rc = 0;\n    if (_nc_use_pthreads != 0)\n\trc = pthread_mutex_trylock(obj);\n    return rc;\n}\n\nNCURSES_EXPORT(int)\n_nc_mutex_unlock(pthread_mutex_t * obj)\n{\n    int rc = 0;\n    if (_nc_use_pthreads != 0)\n\trc = pthread_mutex_unlock(obj);\n    return rc;\n}\n#endif  \n\n#if defined(USE_PTHREADS) || USE_PTHREADS_EINTR\n#if USE_WEAK_SYMBOLS\n \nNCURSES_EXPORT(int)\n_nc_sigprocmask(int how, const sigset_t * newmask, sigset_t * oldmask)\n{\n    if ((pthread_sigmask))\n\treturn pthread_sigmask(how, newmask, oldmask);\n    else\n\treturn (sigprocmask) (how, newmask, oldmask);\n}\n#endif\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}