{
  "module_name": "tries.c",
  "hash_id": "922be4acf149597e063616903f09ab2537722d778ad2e9cf382dbb0d05b06316",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/base/tries.c",
  "human_readable_source": " \n\n \n\n \n\n#include <curses.priv.h>\n\nMODULE_ID(\"$Id: tries.c,v 1.31 2020/02/02 23:34:34 tom Exp $\")\n\n \nNCURSES_EXPORT(char *)\n_nc_expand_try(TRIES * tree, unsigned code, int *count, size_t len)\n{\n    TRIES *ptr = tree;\n    char *result = 0;\n\n    if (code != 0) {\n\twhile (ptr != 0) {\n\t    if ((result = _nc_expand_try(ptr->child, code, count, len + 1))\n\t\t!= 0) {\n\t\tbreak;\n\t    }\n\t    if (ptr->value == code) {\n\t\t*count -= 1;\n\t\tif (*count == -1) {\n\t\t    result = typeCalloc(char, len + 2);\n\t\t    break;\n\t\t}\n\t    }\n\t    ptr = ptr->sibling;\n\t}\n    }\n    if (result != 0) {\n\tif (ptr != 0 && (result[len] = (char) ptr->ch) == 0)\n\t    *((unsigned char *) (result + len)) = 128;\n#ifdef TRACE\n\tif (len == 0 && USE_TRACEF(TRACE_MAXIMUM)) {\n\t    _tracef(\"expand_key %s %s\",\n\t\t    _nc_tracechar(CURRENT_SCREEN, (int) code),\n\t\t    _nc_visbuf(result));\n\t    _nc_unlock_global(tracef);\n\t}\n#endif\n    }\n    return result;\n}\n\n \nNCURSES_EXPORT(int)\n_nc_remove_key(TRIES ** tree, unsigned code)\n{\n    T((T_CALLED(\"_nc_remove_key(%p,%d)\"), (void *) tree, code));\n\n    if (code == 0)\n\treturnCode(FALSE);\n\n    while (*tree != 0) {\n\tif (_nc_remove_key(&(*tree)->child, code)) {\n\t    returnCode(TRUE);\n\t}\n\tif ((*tree)->value == code) {\n\t    if ((*tree)->child) {\n\t\t \n\t\t(*tree)->value = 0;\n\t    } else {\n\t\tTRIES *to_free = *tree;\n\t\t*tree = (*tree)->sibling;\n\t\tfree(to_free);\n\t    }\n\t    returnCode(TRUE);\n\t}\n\ttree = &(*tree)->sibling;\n    }\n    returnCode(FALSE);\n}\n\n \nNCURSES_EXPORT(int)\n_nc_remove_string(TRIES ** tree, const char *string)\n{\n    T((T_CALLED(\"_nc_remove_string(%p,%s)\"), (void *) tree, _nc_visbuf(string)));\n\n    if (string == 0 || *string == 0)\n\treturnCode(FALSE);\n\n    while (*tree != 0) {\n\tif (UChar((*tree)->ch) == UChar(*string)) {\n\t    if (string[1] != 0)\n\t\treturnCode(_nc_remove_string(&(*tree)->child, string + 1));\n\t    if ((*tree)->child == 0) {\n\t\tTRIES *to_free = *tree;\n\t\t*tree = (*tree)->sibling;\n\t\tfree(to_free);\n\t\treturnCode(TRUE);\n\t    } else {\n\t\treturnCode(FALSE);\n\t    }\n\t}\n\ttree = &(*tree)->sibling;\n    }\n    returnCode(FALSE);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}