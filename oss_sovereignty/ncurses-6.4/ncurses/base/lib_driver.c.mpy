{
  "module_name": "lib_driver.c",
  "hash_id": "463a875f52fbaf602397b8f75473c3e1cf0095097cbefd88f0eb724ca8c65e1a",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/base/lib_driver.c",
  "human_readable_source": " \n\n \n\n#include <curses.priv.h>\n\nMODULE_ID(\"$Id: lib_driver.c,v 1.9 2020/08/29 19:53:35 tom Exp $\")\n\n#ifndef EXP_WIN32_DRIVER\ntypedef struct DriverEntry {\n    const char *name;\n    TERM_DRIVER *driver;\n} DRIVER_ENTRY;\n\nstatic DRIVER_ENTRY DriverTable[] =\n{\n#ifdef _WIN32\n    {\"win32console\", &_nc_WIN_DRIVER},\n#endif\n    {\"tinfo\", &_nc_TINFO_DRIVER}\t \n};\n\nNCURSES_EXPORT(int)\n_nc_get_driver(TERMINAL_CONTROL_BLOCK * TCB, const char *name, int *errret)\n{\n    int code = ERR;\n    size_t i;\n    TERM_DRIVER *res = (TERM_DRIVER *) 0;\n    TERM_DRIVER *use = 0;\n\n    T((T_CALLED(\"_nc_get_driver(%p, %s, %p)\"),\n       (void *) TCB, NonNull(name), (void *) errret));\n\n    assert(TCB != 0);\n\n    for (i = 0; i < SIZEOF(DriverTable); i++) {\n\tres = DriverTable[i].driver;\n\tif (strcmp(DriverTable[i].name, res->td_name(TCB)) == 0) {\n\t    if (res->td_CanHandle(TCB, name, errret)) {\n\t\tuse = res;\n\t\tbreak;\n\t    }\n\t}\n    }\n    if (use != 0) {\n\tTCB->drv = use;\n\tcode = OK;\n    }\n    returnCode(code);\n}\n#endif  \n\nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(has_key) (SCREEN *sp, int keycode)\n{\n    T((T_CALLED(\"has_key(%p, %d)\"), (void *) sp, keycode));\n    returnCode(IsValidTIScreen(sp) ? CallDriver_1(sp, td_kyExist, keycode) : FALSE);\n}\n\nNCURSES_EXPORT(int)\nhas_key(int keycode)\n{\n    return NCURSES_SP_NAME(has_key) (CURRENT_SCREEN, keycode);\n}\n\nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(_nc_mcprint) (SCREEN *sp, char *data, int len)\n{\n    int code = ERR;\n\n    if (0 != TerminalOf(sp))\n\tcode = CallDriver_2(sp, td_print, data, len);\n    return (code);\n}\n\nNCURSES_EXPORT(int)\nmcprint(char *data, int len)\n{\n    return NCURSES_SP_NAME(_nc_mcprint) (CURRENT_SCREEN, data, len);\n}\n\nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(doupdate) (SCREEN *sp)\n{\n    int code = ERR;\n\n    T((T_CALLED(\"doupdate(%p)\"), (void *) sp));\n\n    if (IsValidScreen(sp))\n\tcode = CallDriver(sp, td_update);\n\n    returnCode(code);\n}\n\nNCURSES_EXPORT(int)\ndoupdate(void)\n{\n    return NCURSES_SP_NAME(doupdate) (CURRENT_SCREEN);\n}\n\nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(mvcur) (SCREEN *sp, int yold, int xold, int ynew, int xnew)\n{\n    int code = ERR;\n    TR(TRACE_CALLS | TRACE_MOVE, (T_CALLED(\"mvcur(%p,%d,%d,%d,%d)\"),\n\t\t\t\t  (void *) sp, yold, xold, ynew, xnew));\n    if (HasTerminal(sp)) {\n\tcode = CallDriver_4(sp, td_hwcur, yold, xold, ynew, xnew);\n    }\n    returnCode(code);\n}\n\nNCURSES_EXPORT(int)\nmvcur(int yold, int xold, int ynew, int xnew)\n \n{\n    return NCURSES_SP_NAME(mvcur) (CURRENT_SCREEN, yold, xold, ynew, xnew);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}