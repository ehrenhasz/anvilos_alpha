{
  "module_name": "lib_slkrefr.c",
  "hash_id": "6413a6e215f8e86cea3a9ce6b3411ac7155da1f32317d0f83abf6f3a7e7c255b",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/base/lib_slkrefr.c",
  "human_readable_source": " \n\n \n\n \n#include <curses.priv.h>\n\n#ifndef CUR\n#define CUR SP_TERMTYPE\n#endif\n\nMODULE_ID(\"$Id: lib_slkrefr.c,v 1.32 2021/09/04 10:54:35 tom Exp $\")\n\n#ifdef USE_TERM_DRIVER\n#define NumLabels    InfoOf(SP_PARM).numlabels\n#else\n#define NumLabels    num_labels\n#endif\n\n \nstatic void\nslk_paint_info(WINDOW *win)\n{\n    SCREEN *sp = _nc_screen_of(win);\n\n    if (win && sp && (sp->slk_format == 4)) {\n\tint i;\n\n\t(void) mvwhline(win, 0, 0, 0, getmaxx(win));\n\twmove(win, 0, 0);\n\n\tfor (i = 0; i < sp->_slk->maxlab; i++) {\n\t    mvwprintw(win, 0, sp->_slk->ent[i].ent_x, \"F%d\", i + 1);\n\t}\n    }\n}\n\n \nstatic void\nslk_intern_refresh(SCREEN *sp)\n{\n    int i;\n    int fmt;\n    SLK *slk;\n    int numlab;\n\n    if (sp == 0)\n\treturn;\n\n    slk = sp->_slk;\n    fmt = sp->slk_format;\n    numlab = NumLabels;\n\n    if (slk->hidden)\n\treturn;\n\n    for (i = 0; i < slk->labcnt; i++) {\n\tif (slk->dirty || slk->ent[i].dirty) {\n\t    if (slk->ent[i].visible) {\n\t\tif (numlab > 0 && SLK_STDFMT(fmt)) {\n#ifdef USE_TERM_DRIVER\n\t\t    CallDriver_2(sp, td_hwlabel, i + 1, slk->ent[i].form_text);\n#else\n\t\t    if (i < num_labels) {\n\t\t\tNCURSES_PUTP2(\"plab_norm\",\n\t\t\t\t      TPARM_2(plab_norm,\n\t\t\t\t\t      i + 1,\n\t\t\t\t\t      slk->ent[i].form_text));\n\t\t    }\n#endif\n\t\t} else {\n\t\t    if (fmt == 4)\n\t\t\tslk_paint_info(slk->win);\n\t\t    wmove(slk->win, SLK_LINES(fmt) - 1, slk->ent[i].ent_x);\n\t\t    (void) wattrset(slk->win, (int) AttrOf(slk->attr));\n\t\t    waddstr(slk->win, slk->ent[i].form_text);\n\t\t     \n\t\t    (void) wattrset(slk->win, (int) WINDOW_ATTRS(StdScreen(sp)));\n\t\t}\n\t    }\n\t    slk->ent[i].dirty = FALSE;\n\t}\n    }\n    slk->dirty = FALSE;\n\n    if (numlab > 0) {\n#ifdef USE_TERM_DRIVER\n\tCallDriver_1(sp, td_hwlabelOnOff, slk->hidden ? FALSE : TRUE);\n#else\n\tif (slk->hidden) {\n\t    NCURSES_PUTP2(\"label_off\", label_off);\n\t} else {\n\t    NCURSES_PUTP2(\"label_on\", label_on);\n\t}\n#endif\n    }\n}\n\n \nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(slk_noutrefresh) (NCURSES_SP_DCL0)\n{\n    T((T_CALLED(\"slk_noutrefresh(%p)\"), (void *) SP_PARM));\n\n    if (SP_PARM == 0 || SP_PARM->_slk == 0)\n\treturnCode(ERR);\n    if (SP_PARM->_slk->hidden)\n\treturnCode(OK);\n    slk_intern_refresh(SP_PARM);\n\n    returnCode(wnoutrefresh(SP_PARM->_slk->win));\n}\n\n#if NCURSES_SP_FUNCS\nNCURSES_EXPORT(int)\nslk_noutrefresh(void)\n{\n    return NCURSES_SP_NAME(slk_noutrefresh) (CURRENT_SCREEN);\n}\n#endif\n\n \nNCURSES_EXPORT(int)\nNCURSES_SP_NAME(slk_refresh) (NCURSES_SP_DCL0)\n{\n    T((T_CALLED(\"slk_refresh(%p)\"), (void *) SP_PARM));\n\n    if (SP_PARM == 0 || SP_PARM->_slk == 0)\n\treturnCode(ERR);\n    if (SP_PARM->_slk->hidden)\n\treturnCode(OK);\n    slk_intern_refresh(SP_PARM);\n\n    returnCode(wrefresh(SP_PARM->_slk->win));\n}\n\n#if NCURSES_SP_FUNCS\nNCURSES_EXPORT(int)\nslk_refresh(void)\n{\n    return NCURSES_SP_NAME(slk_refresh) (CURRENT_SCREEN);\n}\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}