{
  "module_name": "MKunctrl.awk",
  "hash_id": "dbad6dbfb18a9e2c85ababcead396862d673299e59d81dc45ae41ee57fb5bb55",
  "original_prompt": "Ingested from ncurses-6.4/ncurses/base/MKunctrl.awk",
  "human_readable_source": "# $Id: MKunctrl.awk,v 1.29 2020/02/02 23:34:34 tom Exp $\n##############################################################################\n# Copyright 2020 Thomas E. Dickey                                            #\n# Copyright 1998-2012,2017 Free Software Foundation, Inc.                    #\n#                                                                            #\n# Permission is hereby granted, free of charge, to any person obtaining a    #\n# copy of this software and associated documentation files (the \"Software\"), #\n# to deal in the Software without restriction, including without limitation  #\n# the rights to use, copy, modify, merge, publish, distribute, distribute    #\n# with modifications, sublicense, and/or sell copies of the Software, and to #\n# permit persons to whom the Software is furnished to do so, subject to the  #\n# following conditions:                                                      #\n#                                                                            #\n# The above copyright notice and this permission notice shall be included in #\n# all copies or substantial portions of the Software.                        #\n#                                                                            #\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR #\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,   #\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL    #\n# THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER      #\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING    #\n# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER        #\n# DEALINGS IN THE SOFTWARE.                                                  #\n#                                                                            #\n# Except as contained in this notice, the name(s) of the above copyright     #\n# holders shall not be used in advertising or otherwise to promote the sale, #\n# use or other dealings in this Software without prior written               #\n# authorization.                                                             #\n##############################################################################\n#\n# Author: Thomas E. Dickey (1997-on)\n#\n\nBEGIN\t{\n\t\tprint \"/* generated by MKunctrl.awk */\"\n\t\tprint \"\"\n\t\tprint \"#include <curses.priv.h>\"\n\t\tprint \"#include <ctype.h>\"\n\t\tprint \"\"\n\t\tprint \"#undef unctrl\"\n\t\tprint \"\"\n\t}\nEND\t{\n\t\tprint \"NCURSES_EXPORT(NCURSES_CONST char *) safe_unctrl(SCREEN *sp, chtype ch)\"\n\t\tprint \"{\"\n\t\tblob=\"\"\n\t\toffset=0\n\t\tif (bigstrings) {\n\t\t\tprintf \"static const short unctrl_table[] = {\"\n\t\t} else {\n\t\t\tprintf \"static const char* const unctrl_table[] = {\"\n\t\t}\n\t\tfor ( ch = 0; ch < 256; ch++ ) {\n\t\t\tgap = \",\"\n\t\t\tpart=\"\"\n\t\t\tif ((ch % 8) == 0) {\n\t\t\t\tprintf \"\\n    \"\n\t\t\t\tif (ch != 0)\n\t\t\t\t\tblob = blob \"\\\"\"\n\t\t\t\tblob = blob \"\\n    \\\"\"\n\t\t\t}\n\t\t\tif (bigstrings)\n\t\t\t\tprintf \"%4d%s\", offset, gap;\n\t\t\tif (ch < 32) {\n\t\t\t\tpart = sprintf (\"^\\\\%03o\", ch + 64);\n\t\t\t\toffset = offset + 3;\n\t\t\t} else if (ch == 127) {\n\t\t\t\tpart = \"^?\";\n\t\t\t\toffset = offset + 3;\n\t\t\t} else if (ch >= 128 && ch < 160) {\n\t\t\t\tpart = sprintf(\"~\\\\%03o\", ch - 64);\n\t\t\t\toffset = offset + 3;\n\t\t\t} else if (ch == 255) {\n\t\t\t\tpart = \"~?\";\n\t\t\t\toffset = offset + 3;\n\t\t\t} else if (ch >= 160) {\n\t\t\t\tpart = sprintf(\"M-\\\\%03o\", ch - 128);\n\t\t\t\toffset = offset + 4;\n\t\t\t} else {\n\t\t\t\tgap = gap \" \"\n\t\t\t\tpart = sprintf(\"\\\\%03o\", ch);\n\t\t\t\toffset = offset + 2;\n\t\t\t}\n\t\t\tif (ch == 255)\n\t\t\t\tgap = \"\\n\"\n\t\t\telse if (((ch + 1) % 8) != 0)\n\t\t\t\tgap = gap \" \"\n\t\t\tif (bigstrings) {\n\t\t\t\tblob = blob part \"\\\\0\";\n\t\t\t} else {\n\t\t\t\tprintf \"\\\"%s\\\"%s\", part, gap\n\t\t\t}\n\t\t}\n\t\tprint \"};\"\n\t\tblob = blob \"\\\"\";\n\n\t\tprint \"\"\n\t\tprintf \"#if NCURSES_EXT_FUNCS\\n\";\n\t\tif (bigstrings) {\n\t\t\tblob = blob \"\\n/* printable values in 128-255 range */\"\n\t\t\tprintf \"static const short unctrl_c1[] = {\"\n\t\t} else {\n\t\t\tprintf \"static const char* const unctrl_c1[] = {\"\n\t\t}\n\t\tfor ( ch = 128; ch < 256; ch++ ) {\n\t\t\tgap = \",\"\n\t\t\tif ((ch % 8) == 0) {\n\t\t\t\tif (ch != 128)\n\t\t\t\t\tblob = blob \"\\\"\"\n\t\t\t\tprintf \"\\n    \"\n\t\t\t\tblob = blob \"\\n    \\\"\"\n\t\t\t}\n\t\t\tif (bigstrings) {\n\t\t\t\tprintf \"%4d%s\", offset, gap;\n\t\t\t\tpart = sprintf(\"\\\\%03o\\\\0\", ch);\n\t\t\t\tblob = blob part\n\t\t\t\toffset = offset + 2;\n\t\t\t\tif (((ch + 1) % 8) != 0)\n\t\t\t\t\tgap = gap \" \"\n\t\t\t} else {\n\t\t\t\tif (ch >= 128) {\n\t\t\t\t\tprintf \"\\\"\\\\%03o\\\"\", ch\n\t\t\t\t\tgap = gap \" \"\n\t\t\t\t}\n\t\t\t\tif (ch == 255)\n\t\t\t\t\tgap = \"\\n\"\n\t\t\t\telse if (((ch + 1) % 8) != 0)\n\t\t\t\t\tgap = gap \" \"\n\t\t\t\tprintf \"%s\", gap\n\t\t\t}\n\t\t}\n\t\tprint \"};\"\n\t\tprint \"#endif /* NCURSES_EXT_FUNCS */\"\n\t\tblob = blob \"\\\"\\n\"\n\n\t\tprint \"\"\n\t\tif (bigstrings) {\n\t\t\tprint \"static const char unctrl_blob[] = \"blob\";\"\n\t\t\tprint \"\"\n\t\t\tstringname = \"unctrl_blob + unctrl\"\n\t\t} else {\n\t\t\tstringname = \"unctrl\"\n\t\t}\n\t\tprint  \"\\tint check = (int) ChCharOf(ch);\"\n\t\tprint  \"\\tconst char *result;\"\n\t\tprint  \"\"\n\t\tprint  \"(void) sp;\"\n\t\tprint  \"\\tif (check >= 0 && check < (int)SIZEOF(unctrl_table)) {\"\n\t\tprint  \"#if NCURSES_EXT_FUNCS\"\n\t\tprint  \"\\t\\tif ((sp != 0)\"\n\t\tprint  \"\\t\\t && (sp->_legacy_coding > 1)\"\n\t\tprint  \"\\t\\t && (check >= 128)\"\n\t\tprint  \"\\t\\t && (check < 160))\"\n\t\tprintf \"\\t\\t\\tresult = %s_c1[check - 128];\\n\", stringname;\n\t\tprint  \"\\t\\telse\"\n\t\tprint  \"\\t\\tif ((check >= 160)\"\n\t\tprint  \"\\t\\t && (check < 256)\"\n\t\tprint  \"\\t\\t && ((sp != 0)\"\n\t\tprint  \"\\t\\t  && ((sp->_legacy_coding > 0)\"\n\t\tprint  \"\\t\\t   || (sp->_legacy_coding == 0\"\n\t\tprint  \"\\t\\t       && isprint(check)))))\"\n\t\tprintf \"\\t\\t\\tresult = %s_c1[check - 128];\\n\", stringname;\n\t\tprint  \"\\t\\telse\"\n\t\tprint  \"#endif /* NCURSES_EXT_FUNCS */\"\n\t\tprintf \"\\t\\t\\tresult = %s_table[check];\\n\", stringname;\n\t\tprint  \"\\t} else {\"\n\t\tprint  \"\\t\\tresult = 0;\"\n\t\tprint  \"\\t}\"\n\t\tprint  \"\\treturn (NCURSES_CONST char *)result;\"\n\t\tprint  \"}\"\n\t\tprint  \"\"\n\t\tprint  \"NCURSES_EXPORT(NCURSES_CONST char *) unctrl (chtype ch)\"\n\t\tprint  \"{\"\n\t\tprint  \"\\treturn safe_unctrl(CURRENT_SCREEN, ch);\"\n\t\tprint  \"}\"\n\t}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}