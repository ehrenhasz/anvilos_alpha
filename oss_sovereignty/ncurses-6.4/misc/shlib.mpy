{
  "module_name": "shlib",
  "hash_id": "9fcae9f7920856243c646f2de731e4e990fa68c2c49a5272752aef589615804c",
  "original_prompt": "Ingested from ncurses-6.4/misc/shlib",
  "human_readable_source": "#!/bin/sh\n##############################################################################\n# Copyright 2020,2021 Thomas E. Dickey                                       #\n# Copyright 1998-2005,2007 Free Software Foundation, Inc.                    #\n#                                                                            #\n# Permission is hereby granted, free of charge, to any person obtaining a    #\n# copy of this software and associated documentation files (the \"Software\"), #\n# to deal in the Software without restriction, including without limitation  #\n# the rights to use, copy, modify, merge, publish, distribute, distribute    #\n# with modifications, sublicense, and/or sell copies of the Software, and to #\n# permit persons to whom the Software is furnished to do so, subject to the  #\n# following conditions:                                                      #\n#                                                                            #\n# The above copyright notice and this permission notice shall be included in #\n# all copies or substantial portions of the Software.                        #\n#                                                                            #\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR #\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,   #\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL    #\n# THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER      #\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING    #\n# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER        #\n# DEALINGS IN THE SOFTWARE.                                                  #\n#                                                                            #\n# Except as contained in this notice, the name(s) of the above copyright     #\n# holders shall not be used in advertising or otherwise to promote the sale, #\n# use or other dealings in this Software without prior written               #\n# authorization.                                                             #\n##############################################################################\n#\n# Author: Thomas E. Dickey <dickey@clark.net> 1996\n#\n# $Id: shlib,v 1.14 2021/09/04 15:55:29 tom Exp $\n# Use this script as a wrapper when running executables linked to shared\n# libraries on systems that use the $LD_LIBRARY_PATH variable and don't embed\n# the soname's path within the linked executable (such as IRIX), e.g,\n#\n#\tshlib knight\n#\n# Setting LD_LIBRARY_PATH, overrides/supplements the loader's normal search\n# path, and works on most systems.  The drawback is that then the environment\n# variable has to be set to run the programs within this directory tree.\n#\n# For Linux (and other systems using the GNU loader), we can use the rpath\n# directive, which embeds the pathname of the library within the executable.\n# Using the Linux loader's rpath directive introduces a constraint, since\n# it's embedded into the binary, and means that the binary cannot be moved\n# around (though it'll work if the $exec_prefix convention that puts the bin\n# and lib directories under the same parent is followed).\n#\n# Using the actual soname (e.g., ../lib/libncurses.so) alone, is a more\n# flexible solution; you can link without having to set the environment\n# variable, and on some systems (IRIX) you can even run the resulting binaries\n# without setting LD_LIBRARY_PATH.\n#\n# Using a conventional link, with -L and -l options on Linux results in a\n# statically linked executable, which we don't want at all.\n#\n# Special cases:\n#\n#\tBeOS R4.5 uses $LIBRARY_PATH rather than $LD_LIBRARY_PATH.\n#\tCygwin uses $PATH\n#\tMac OS X uses $DYLD_LIBRARY_PATH\n#\n# Other cases not handled by this script:\n#\n#\tAIX uses $LIBPATH\n#\tIRIX64 may use $LD_LIBRARY64_PATH or $LD_LIBRARYN32_PATH\n#\tSolaris may use $LD_LIBRARY_PATH_64\n#\nCDPATH=\n#\n# Make sure that we use the PATH that was set in run_tic.sh\nif test -n \"$SHLIB_PATH\" ; then\n\tPATH=$SHLIB_PATH\n\texport PATH\nfi\n\n# Find the lib-directory for this build tree\nq=\"\"\nfor p in lib ../lib ../../lib ../../../lib\ndo\n\tif test -d $p; then\n\t\tq=`cd $p || exit; pwd`\n\t\tbreak\n\telif test -f configure && test ! -d ../$p ; then\n\t\tbreak\n\tfi\ndone\n\n# Set the environment variable.\nif test -n \"$q\" ; then\n\tsystem=\n\tif test -n \"$SHLIB_HOST\" ; then\n\t\tsystem=\"$SHLIB_HOST\"\n\telif test -n \"$PATHEXT\" ; then\n\t\tsystem=cygwin\n\telif test -n \"$LIBRARY_PATH\" ; then\n\t\tsystem=beos\n\telif test -n \"$DYLD_LIBRARY_PATH\" ; then\n\t\tsystem=darwin\n\telif test -n \"$LD_LIBRARY_PATH\"; then\n\t\tsystem=unix\n\telse\n\t\tfor r in \"$q\"/*.*\n\t\tdo\n\t\t\tif test -f \"$r\"\n\t\t\tthen\n\t\t\t\tcase $r in\n\t\t\t\t*.dll)\n\t\t\t\t\tsystem=cygwin\n\t\t\t\t\t;;\n\t\t\t\t*.dylib)\n\t\t\t\t\tsystem=darwin\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\tfi\n\t\t\ttest -n \"$system\" && break\n\t\tdone\n\tfi\n\n\tcase .$system in\n\t.cygwin*)\n\t\tvariable=PATH\n\t\t;;\n\t.beos*)\n\t\tvariable=LIBRARY_PATH\n\t\t;;\n\t.darwin*)\n\t\tvariable=DYLD_LIBRARY_PATH\n\t\t;;\n\t*)\n\t\tvariable=LD_LIBRARY_PATH\n\t\t;;\n\tesac\n\n\teval 'test -z \"$'$variable'\" && '$variable'=\":\"'\n\teval $variable'=\"$q:$'$variable'\"'\n\teval 'export '$variable\nfi\n\neval \"$*\"\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}