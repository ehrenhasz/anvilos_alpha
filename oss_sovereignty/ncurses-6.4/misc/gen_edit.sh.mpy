{
  "module_name": "gen_edit.sh",
  "hash_id": "3ee9f278d2038370b7ef8a29b0bc7a30b4d56364b0b04d161c57d60d864530cf",
  "original_prompt": "Ingested from ncurses-6.4/misc/gen_edit.sh",
  "human_readable_source": "#!/bin/sh\n##############################################################################\n# Copyright 2020,2021 Thomas E. Dickey                                       #\n# Copyright 2004-2011,2012 Free Software Foundation, Inc.                    #\n#                                                                            #\n# Permission is hereby granted, free of charge, to any person obtaining a    #\n# copy of this software and associated documentation files (the \"Software\"), #\n# to deal in the Software without restriction, including without limitation  #\n# the rights to use, copy, modify, merge, publish, distribute, distribute    #\n# with modifications, sublicense, and/or sell copies of the Software, and to #\n# permit persons to whom the Software is furnished to do so, subject to the  #\n# following conditions:                                                      #\n#                                                                            #\n# The above copyright notice and this permission notice shall be included in #\n# all copies or substantial portions of the Software.                        #\n#                                                                            #\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR #\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,   #\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL    #\n# THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER      #\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING    #\n# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER        #\n# DEALINGS IN THE SOFTWARE.                                                  #\n#                                                                            #\n# Except as contained in this notice, the name(s) of the above copyright     #\n# holders shall not be used in advertising or otherwise to promote the sale, #\n# use or other dealings in this Software without prior written               #\n# authorization.                                                             #\n##############################################################################\n#\n# Author: Thomas E. Dickey\n#\n# $Id: gen_edit.sh,v 1.7 2021/09/04 15:55:29 tom Exp $\n# Generate a sed-script for converting the terminfo.src to the form which will\n# be installed.\n#\n# Assumes:\n#\tThe leaf directory names (lib, tabset, terminfo)\n#\n\nlinux_dft=linux2.2\n\n: \"${datadir=/usr/share}\"\n: \"${WHICH_LINUX=$linux_dft}\"\n: \"${WHICH_XTERM=xterm-new}\"\n: \"${XTERM_KBS=BS}\"\n\n# If we're not installing into /usr/share/, we'll have to adjust the location\n# of the tabset files in terminfo.src (which are in a parallel directory).\nTABSET=${datadir}/tabset\nif test \"x$TABSET\" != \"x/usr/share/tabset\" ; then\ncat <<EOF\ns%/usr/share/tabset%$TABSET%g\nEOF\nfi\n\nif test \"$WHICH_XTERM\" != \"xterm-new\" ; then\necho \"** using $WHICH_XTERM terminal description for XTerm entry\" >&2\ncat <<EOF\n/^# This is xterm for ncurses/,/^$/{\n\ts/use=xterm-new,/use=$WHICH_XTERM,/\n}\nEOF\nfi\n\nif test \"$XTERM_KBS\" != \"BS\" ; then\necho \"** using DEL for XTerm backspace-key\" >&2\ncat <<EOF\n/^xterm+kbs|fragment for backspace key/,/^#/{\n\ts/kbs=^H,/kbs=^?,/\n}\nEOF\nfi\n\n# Work around incompatibities built into Linux console.  The 2.6 series added\n# a patch to fixup the SI/SO behavior, which is closer to vt100, but the older\n# kernels do not recognize those controls.  All of the kernels recognize the\n# older flavor of rmacs/smacs, but beginning in the late 1990s, changes made\n# as part of implementing UTF-8 prevent using those for line-drawing when the\n# console is in UTF-8 mode.  Taking into account the fact that it took about\n# ten years to provide (and distribute) the 2.6 series' change for SI/SO, the\n# default remains \"linux2.2\".\ncase x$WHICH_LINUX in #(vi\nxauto)\n\tsystem=`uname -s 2>/dev/null`\n\tif test \"x$system\" = xLinux\n\tthen\n\t\tcase x`uname -r` in\n\t\tx1.*)\n\t\t\tWHICH_LINUX=linux-c\n\t\t\t;;\n\t\tx2.[0-4]*)\n\t\t\tWHICH_LINUX=linux2.2\n\t\t\t;;\n\t\t*)\n\t\t\tWHICH_LINUX=linux3.0\n\t\t\t;;\n\t\tesac\n\telse\n\t\tWHICH_LINUX=$linux_dft\n\tfi\n\t;;\nxlinux*)\n\t# allow specific setting\n\t;;\n*)\n\tWHICH_LINUX=$linux_dft\n\t;;\nesac\n\nif test $WHICH_LINUX != $linux_dft\nthen\necho \"** using $WHICH_LINUX terminal description for Linux console\" >&2\ncat <<EOF\n/^# This is Linux console for ncurses/,/^$/{\n\ts/use=$linux_dft,/use=$WHICH_LINUX,/\n}\nEOF\nfi\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}