{
  "module_name": "run_tic.in",
  "hash_id": "0c21adb21d0144709f7bd30d05026ebc049a0a989c65cd382629cb33c0133a80",
  "original_prompt": "Ingested from ncurses-6.4/misc/run_tic.in",
  "human_readable_source": "#!@SHELL@\n# $Id: run_tic.in,v 1.40 2022/07/16 19:37:03 tom Exp $\n##############################################################################\n# Copyright 2019-2020,2022 Thomas E. Dickey                                  #\n# Copyright 2000-2012,2017 Free Software Foundation, Inc.                    #\n#                                                                            #\n# Permission is hereby granted, free of charge, to any person obtaining a    #\n# copy of this software and associated documentation files (the \"Software\"), #\n# to deal in the Software without restriction, including without limitation  #\n# the rights to use, copy, modify, merge, publish, distribute, distribute    #\n# with modifications, sublicense, and/or sell copies of the Software, and to #\n# permit persons to whom the Software is furnished to do so, subject to the  #\n# following conditions:                                                      #\n#                                                                            #\n# The above copyright notice and this permission notice shall be included in #\n# all copies or substantial portions of the Software.                        #\n#                                                                            #\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR #\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,   #\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL    #\n# THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER      #\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING    #\n# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER        #\n# DEALINGS IN THE SOFTWARE.                                                  #\n#                                                                            #\n# Except as contained in this notice, the name(s) of the above copyright     #\n# holders shall not be used in advertising or otherwise to promote the sale, #\n# use or other dealings in this Software without prior written               #\n# authorization.                                                             #\n##############################################################################\n#\n# Author: Thomas E. Dickey 1996-on\n#\n# This script is used to install terminfo.src using tic.  We use a script\n# because the path checking is too awkward to do in a makefile.\n#\n# Assumes:\n#\tThe leaf directory names (lib, tabset, terminfo)\n#\necho \"** Building terminfo database, please wait...\"\n#\n# The script is designed to be run from the misc/Makefile as\n#\tmake install.data\n\n: \"${suffix:=@EXEEXT@}\"\n: \"${DESTDIR:=@DESTDIR@}\"\n: \"${prefix:=@prefix@}\"\n: \"${exec_prefix:=@exec_prefix@}\"\n: \"${bindir:=@bindir@}\"\n: \"${top_srcdir:=@top_srcdir@}\"\n: \"${srcdir:=@srcdir@}\"\n: \"${datarootdir:=@datarootdir@}\"\n: \"${datadir:=@datadir@}\"\n: \"${TIC_PATH:=@TIC@}\"\n: \"${ticdir:=@TERMINFO@}\"\n: \"${source:=@TERMINFO_SRC@}\"\n: \"${cross_compiling:=no}\"\n: \"${ext_funcs:=@NCURSES_EXT_FUNCS@}\"\n\ntest -z \"${DESTDIR}\" && DESTDIR=\n\n# Allow tic to run either from the install-path, or from the build-directory.\n# Do not do this if we appear to be cross-compiling.  In that case, we rely\n# on the host's copy of tic to compile the terminfo database.\nif test \"x$cross_compiling\" = \"xno\"\nthen\n\tif test -f ../progs/tic$suffix\n\tthen\n\t\tcase \"$PATH\" in\n\t\t\\@PATH_SEPARATOR@*)\n\t\t\tPATH=\"../progs@PATH_SEPARATOR@../lib@PATH_SEPARATOR@${DESTDIR}$bindir$PATH\"\n\t\t\t;;\n\t\t*)\n\t\t\tPATH=\"../progs@PATH_SEPARATOR@../lib@PATH_SEPARATOR@${DESTDIR}$bindir@PATH_SEPARATOR@$PATH\"\n\t\t\t;;\n\t\tesac\n\t\texport PATH\n\t\tif test @DFT_LWR_MODEL@ = shared\n\t\tthen\n\t\t\tSHLIB=\"sh $srcdir/shlib\"\n\t\t\tTIC_PATH=\"$SHLIB tic\"\n\t\telse\n\t\t\tTIC_PATH=\"tic\"\n\t\tfi\n\telif test \"$TIC_PATH\" = unknown\n\tthen\n\t\techo \"? no tic program found\"\n\t\texit 1\n\tfi\nelse\n\t# Cross-compiling, so don't set PATH or run shlib.\n\tSHLIB=\n\t# reset $suffix, since it applies to the target, not the build platform.\n\tsuffix=\nfi\n\n\n# set another env var that doesn't get reset when `shlib' runs, so `shlib' uses\n# the PATH we just set.\nSHLIB_PATH=$PATH\nexport SHLIB_PATH\n\n# set a variable to simplify environment update in shlib\nSHLIB_HOST=@host_os@\nexport SHLIB_HOST\n\n# don't use user's TERMINFO variable\nunset TERMINFO_DIRS\nTERMINFO=\"${DESTDIR}$ticdir\" ; export TERMINFO\numask 022\n\n# Construct the name of the old (obsolete) pathname, e.g., /usr/lib/terminfo.\nTICDIR=`echo \"$TERMINFO\" | sed -e 's%/share/\\([^/]*\\)$%/lib/\\1%'`\n\n# Parent directory may not exist, which would confuse the install for hashed\n# database.  Fix.\nPARENT=`echo \"$TERMINFO\" | sed -e 's%/[^/]*$%%'`\nif test -n \"$PARENT\"\nthen\n\tmkdir -p \"$PARENT\"\nfi\n\n# Remove the old terminfo stuff; we don't care if it existed before, and it\n# would generate a lot of confusing error messages if we tried to overwrite it.\n# We explicitly remove its contents rather than the directory itself, in case\n# the directory is actually a symbolic link.\nif test -d \"$TERMINFO\"\nthen\n\t( cd \"$TERMINFO\" && rm -fr ./? 2>/dev/null )\nelif test -f \"$TERMINFO.db\"\nthen\n\t( rm -f \"$TERMINFO.db\" 2>/dev/null )\nfi\n\nif test \"$ext_funcs\" = 1 ; then\ncat <<EOF\nRunning $TIC_PATH to install $TERMINFO ...\n\n\tYou may see messages regarding extended capabilities, e.g., AX.\n\tThese are extended terminal capabilities which are compiled\n\tusing\n\t\ttic -x\n\tIf you have ncurses 4.2 applications, you should read the INSTALL\n\tdocument, and install the terminfo without the -x option.\n\nEOF\n$TIC_PATH -V\nif ( $TIC_PATH -x -s -o \"$TERMINFO\" $source )\nthen\n\techo \"** built new $TERMINFO\"\nelse\n\techo \"? tic could not build $TERMINFO\"\n\texit 1\nfi\nelse\ncat <<EOF\nRunning $TIC_PATH to install $TERMINFO ...\n\n\tYou may see messages regarding unknown capabilities, e.g., AX.\n\tThese are extended terminal capabilities which may be compiled\n\tusing\n\t\ttic -x\n\tIf you have ncurses 4.2 applications, you should read the INSTALL\n\tdocument, and install the terminfo without the -x option.\n\nEOF\n$TIC_PATH -V\nif ( $TIC_PATH -s -o \"$TERMINFO\" $source )\nthen\n\techo \"** built new $TERMINFO\"\nelse\n\techo \"? tic could not build $TERMINFO\"\n\texit 1\nfi\nfi\n\n# Make a symbolic link to provide compatibility with applications that expect\n# to find terminfo under /usr/lib.  That is, we'll _try_ to do that.  Not\n# all systems support symbolic links, and those that do provide a variety\n# of options for 'test'.\nif test \"$TICDIR\" != \"$TERMINFO\" ; then\n\t( rm -f \"$TICDIR\" 2>/dev/null )\n\tif ( cd \"$TICDIR\" 2>/dev/null )\n\tthen\n\t\tcd \"$TICDIR\" || exit\n\t\tTICDIR=`pwd`\n\t\tif test \"$TICDIR \" != \"$TERMINFO \"; then\n\t\t\t# Well, we tried.  Some systems lie to us, so the\n\t\t\t# installer will have to double-check.\n\t\t\techo \"Verify if $TICDIR and $TERMINFO are the same.\"\n\t\t\techo \"The new terminfo is in $TERMINFO; the other should be a link to it.\"\n\t\t\techo \"Otherwise, remove $TICDIR and link it to $TERMINFO.\"\n\t\tfi\n\telse\n\t\tcd ${DESTDIR}$prefix || exit\n\t\t# Construct a symbolic link that only assumes $ticdir has the\n\t\t# same $prefix as the other installed directories.\n\t\tRELATIVE=`echo $ticdir|sed -e 's%^'$prefix'/%%'`\n\t\tif test \"$RELATIVE\" != \"$ticdir\" ; then\n\t\t\tRELATIVE=../`echo $ticdir|sed -e 's%^'$prefix'/%%' -e 's%^/%%'`\n\t\tfi\n\t\tif ( @LN_S@ \"$RELATIVE\" \"$TICDIR\" )\n\t\tthen\n\t\t\techo \"** sym-linked $TICDIR for compatibility\"\n\t\telse\n\t\t\techo \"** could not sym-link $TICDIR for compatibility\"\n\t\tfi\n\tfi\nfi\n# vile:shmode\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}