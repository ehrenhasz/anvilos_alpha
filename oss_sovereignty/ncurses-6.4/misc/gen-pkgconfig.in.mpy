{
  "module_name": "gen-pkgconfig.in",
  "hash_id": "d9d7650b6264017d01f3d7aae97750ef637973c428c35afcce5faba973cf1b94",
  "original_prompt": "Ingested from ncurses-6.4/misc/gen-pkgconfig.in",
  "human_readable_source": "#!@SHELL@\n# $Id: gen-pkgconfig.in,v 1.56 2022/10/08 16:45:20 tom Exp $\n##############################################################################\n# Copyright 2018-2021,2022 Thomas E. Dickey                                  #\n# Copyright 2009-2015,2018 Free Software Foundation, Inc.                    #\n#                                                                            #\n# Permission is hereby granted, free of charge, to any person obtaining a    #\n# copy of this software and associated documentation files (the \"Software\"), #\n# to deal in the Software without restriction, including without limitation  #\n# the rights to use, copy, modify, merge, publish, distribute, distribute    #\n# with modifications, sublicense, and/or sell copies of the Software, and to #\n# permit persons to whom the Software is furnished to do so, subject to the  #\n# following conditions:                                                      #\n#                                                                            #\n# The above copyright notice and this permission notice shall be included in #\n# all copies or substantial portions of the Software.                        #\n#                                                                            #\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR #\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,   #\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL    #\n# THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER      #\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING    #\n# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER        #\n# DEALINGS IN THE SOFTWARE.                                                  #\n#                                                                            #\n# Except as contained in this notice, the name(s) of the above copyright     #\n# holders shall not be used in advertising or otherwise to promote the sale, #\n# use or other dealings in this Software without prior written               #\n# authorization.                                                             #\n##############################################################################\n#\n# Author: Thomas E. Dickey\n#\n# The complete configure script for ncurses is the ncurses5-config (or similar\n# name, depending on the flavor, e.g., ncursesw5-config, ncurses6-config, etc).\n# That provides more information than pkg-config, and is the portable and\n# recommended solution.\n#\n# For each library, generate a \".pc\" file which depends on the base ncurses\n# library, except that the tinfo library does not depend on ncurses.\nLIB_NAME=@LIB_NAME@\nTINFO_NAME=@TINFO_NAME@\nPANEL_NAME=@PANEL_NAME@\nMENU_NAME=@MENU_NAME@\nFORM_NAME=@FORM_NAME@\nCXX_NAME=@CXX_NAME@\n\nDFT_DEP_SUFFIX=@DFT_DEP_SUFFIX@\nTINFO_ARG_SUFFIX=@TINFO_ARG_SUFFIX@\nCXX_LIB_SUFFIX=@CXX_LIB_SUFFIX@\n\nsuffix=@PC_MODULE_SUFFIX@\nprefix=\"@prefix@\"\nexec_prefix=\"@exec_prefix@\"\nincludedir=\"@includedir@@includesubdir@\"\nlibdir=\"@libdir@\"\n\nRPATH_LIST=@RPATH_LIST@\nPRIVATE_LIBS=\"@PRIVATE_LIBS@\"\n\nshow_prefix='@prefix@'\nshow_exec_prefix='@exec_prefix@'\nshow_includedir='@includedir@@includesubdir@'\nshow_libdir='@libdir@'\n\nMAIN_LIBRARY=\"${LIB_NAME}@USE_ARG_SUFFIX@\"\nSUB_LIBRARY=\"${TINFO_ARG_SUFFIX}\"\n\nCXX_LIBRARY=\"${CXX_NAME}@USE_ARG_SUFFIX@\"\nFORM_LIBRARY=\"${FORM_NAME}@USE_ARG_SUFFIX@\"\nMENU_LIBRARY=\"${MENU_NAME}@USE_ARG_SUFFIX@\"\nPANEL_LIBRARY=\"${PANEL_NAME}@USE_ARG_SUFFIX@\"\n\nCFLAGS=\"@PKG_CFLAGS@\"\nif [ \"$includedir\" != \"/usr/include\" ]; then\n\tincludetop=`echo \"$includedir\" | sed -e 's,/include/[^/]*$,/include,'`\n\t[ \"$includetop\" = \"/usr/include\" ] && includetop=\"$includedir\"\n\tCFLAGS=\"$CFLAGS -I\\${includedir}\"\n\tif [ \"x$includetop\" != \"x$includedir\" ]\n\tthen\n\t\tCFLAGS=\"$CFLAGS -I${includetop}\"\n\tfi\nfi\n\nlib_flags=\nfor opt in -L$libdir @EXTRA_PKG_LDFLAGS@ @LIBS@\ndo\n\tcase $opt in\n\t-l*) # LIBS is handled specially below\n\t\tcontinue\n\t\t;;\n\t-specs*) # ignore linker specs-files which were used to build library\n\t\tcontinue\n\t\t;;\n\t-Wl,-z,*) # ignore flags used to manipulate shared image\n\t\tcontinue\n\t\t;;\n\t-Wl,--dynamic-linker*) # ignore ELF interpreter\n\t\tcontinue\n\t\t;;\n\t-Wl,--as-needed|-Wl,--build-id=*|-Wl,-dT,*|-Wl,-T,*)\n\t\tcontinue\n\t\t;;\n\t-L*)\n\t\tlib_check=`echo \"x$opt\" | sed -e 's/^.-L//'`\n\t\t# on a new/nonstandard install, $libdir may not yet exist at this point\n\t\tif [ \"$libdir\" != \"$lib_check\" ]\n\t\tthen\n\t\t\t[ -d \"$lib_check\" ] || continue\n\t\tfi\n\t\tcase \"$lib_check\" in\n\t\t@LD_SEARCHPATH@) # skip standard libdir\n\t\t\tif [ \"$lib_check\" = \"$libdir\" ]\n\t\t\tthen\n\t\t\t\tlib_first=yes\n\t\t\t\tIFS_save=\"$IFS\"\n\t\t\t\tIFS='|'\n\t\t\t\tLIBDIRS=\"@LD_SEARCHPATH@\"\n\t\t\t\tfor lib_check in $LIBDIRS\n\t\t\t\tdo\n\t\t\t\t\tif [ -d \"$lib_check\" ]\n\t\t\t\t\tthen\n\t\t\t\t\t\tif [ \"$lib_check\" != \"$libdir\" ]\n\t\t\t\t\t\tthen\n\t\t\t\t\t\t\tlib_first=no\n\t\t\t\t\t\tfi\n\t\t\t\t\t\tbreak\n\t\t\t\t\tfi\n\t\t\t\tdone\n\t\t\t\tIFS=\"$IFS_save\"\n\t\t\t\t[ $lib_first = yes ] && continue\n\t\t\t\tfound=no\n\t\t\t\tfor check in $lib_flags\n\t\t\t\tdo\n\t\t\t\t\tif [ \"x$check\" = \"x$opt\" ]\n\t\t\t\t\tthen\n\t\t\t\t\t\tfound=yes\n\t\t\t\t\t\tbreak\n\t\t\t\t\tfi\n\t\t\t\tdone\n\t\t\t\t[ $found = yes ] && continue\n\t\t\t\t:\n\t\t\telse\n\t\t\t\tcontinue\n\t\t\tfi\n\t\t\t;;\n\t\t*)\n\t\t\tfound=no\n\t\t\tfor check in $lib_flags\n\t\t\tdo\n\t\t\t\tif [ \"x$check\" = \"x$opt\" ]\n\t\t\t\tthen\n\t\t\t\t\tfound=yes\n\t\t\t\t\tbreak\n\t\t\t\tfi\n\t\t\tdone\n\t\t\t[ $found = yes ] && continue\n\t\t\t;;\n\t\tesac\n\t\t;;\n\tesac\n\tlib_flags=\"$lib_flags $opt\"\ndone\n\n# Check if we should specify the tinfo library explicitly so that terminfo\n# functions or curses variables (which also reside in tinfo) can be linked\n# using the -lncurses option.\nNEED_TINFO=no\nif [ \"x@TINFO_LIBS@\" != \"x\" ] && \\\n   [ \"x$TINFO_ARG_SUFFIX\" != \"x$MAIN_LIBRARY\" ]\nthen\n\tNEED_TINFO=yes\nfi\n\n# The \"URL\" feature came in pkg-config 0.17\nUSEURL=\"\"\nCFGVER=`${PKG_CONFIG:-pkg-config} --version 2>/dev/null |head -n 1 | awk -F. '/0.[0-9][0-9]/{print $2;}'`\n# A missing version should simply fail, but some packagers insist on building\n# packages on machines which do not actually have the tools they depend on at\n# runtime.\n[ -z \"$CFGVER\" ] && CFGVER=30\n[ $CFGVER -ge 17 ] || USEURL=\"#\"\n\nfor name in @PC_MODULES_TO_MAKE@\ndo\n\tname=\"${name}\"\n\tcase $name in\n\tform*)\t\tname=\"$FORM_LIBRARY\" \t;;\n\tmenu*)\t\tname=\"$MENU_LIBRARY\" \t;;\n\tpanel*)\t\tname=\"$PANEL_LIBRARY\"\t;;\n\tncurses++*)\tname=\"$CXX_LIBRARY\"\t\t;;\n\tesac\n\tLIBS=\"-l$name\"\n\n\tdesc=\"ncurses @NCURSES_MAJOR@.@NCURSES_MINOR@\"\n\treqs=\n\n\tif [ $name = $MAIN_LIBRARY ]; then\n\t\tdesc=\"$desc library\"\n\t\t[ $NEED_TINFO = yes ] && LIBS=\"$LIBS -l$TINFO_ARG_SUFFIX\"\n\t\t[ -n \"@LIBS@\" ] && LIBS=\"$LIBS @LIBS@\"\n\telif [ $name = $SUB_LIBRARY ]; then\n\t\tdesc=\"$desc terminal interface library\"\n\telif expr $name : \".*${CXX_NAME}.*\" >/dev/null ; then\n\t\treqs=\"$PANEL_LIBRARY${suffix}, $MENU_LIBRARY${suffix}, $FORM_LIBRARY${suffix}, $MAIN_LIBRARY${suffix}\"\n\t\tdesc=\"$desc add-on library\"\n\telse\n\t\treqs=\"$MAIN_LIBRARY${suffix}\"\n\t\tdesc=\"$desc add-on library\"\n\tfi\n\n\tif [ $name != $SUB_LIBRARY ] && \\\n\t   [ $SUB_LIBRARY != $MAIN_LIBRARY ] && \\\n\t   [ $name != $TINFO_NAME ] && \\\n\t   [ $NEED_TINFO != yes ] ; then\n\t\t[ -n \"$reqs\" ] && reqs=\"$reqs, \"\n\t\treqs=\"${reqs}${SUB_LIBRARY}${suffix}\"\n\tfi\n\n\tif [ $name = $MAIN_LIBRARY ]\n\tthen\n\t\tmain_libs=\"$PRIVATE_LIBS\"\n\telse\n\t\tmain_libs=\n\tfi\n\n\techo \"** creating ${name}${suffix}.pc\"\n\tcat >${name}${suffix}.pc <<EOF\n# pkg-config file generated by `basename \"$0\"`\n# vile:makemode\n\nprefix=$show_prefix\nexec_prefix=$show_exec_prefix\nlibdir=$show_libdir\nincludedir=$show_includedir\nabi_version=@cf_cv_abi_version@\nmajor_version=@NCURSES_MAJOR@\nversion=@NCURSES_MAJOR@.@NCURSES_MINOR@.@NCURSES_PATCH@\n\nName: ${name}${suffix}\nDescription: $desc\nVersion: \\${version}\n${USEURL}URL: https://invisible-island.net/ncurses\nRequires.private: $reqs\nLibs: $lib_flags $LIBS\nLibs.private: @LIBS@ $main_libs\nCflags: $CFLAGS\nEOF\n\ndone\n# vile:shmode ts=4 sw=4\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}