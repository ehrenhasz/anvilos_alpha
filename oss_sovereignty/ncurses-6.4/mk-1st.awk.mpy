{
  "module_name": "mk-1st.awk",
  "hash_id": "60cfb7bb90ec794704d8479a0b58ad6a4f52ad8c1dcc1aa38cb8e467c1cd1d62",
  "original_prompt": "Ingested from ncurses-6.4/mk-1st.awk",
  "human_readable_source": "# $Id: mk-1st.awk,v 1.124 2021/10/15 00:50:05 tom Exp $\n##############################################################################\n# Copyright 2018-2020,2021 Thomas E. Dickey                                  #\n# Copyright 1998-2016,2017 Free Software Foundation, Inc.                    #\n#                                                                            #\n# Permission is hereby granted, free of charge, to any person obtaining a    #\n# copy of this software and associated documentation files (the \"Software\"), #\n# to deal in the Software without restriction, including without limitation  #\n# the rights to use, copy, modify, merge, publish, distribute, distribute    #\n# with modifications, sublicense, and/or sell copies of the Software, and to #\n# permit persons to whom the Software is furnished to do so, subject to the  #\n# following conditions:                                                      #\n#                                                                            #\n# The above copyright notice and this permission notice shall be included in #\n# all copies or substantial portions of the Software.                        #\n#                                                                            #\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR #\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,   #\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL    #\n# THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER      #\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING    #\n# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER        #\n# DEALINGS IN THE SOFTWARE.                                                  #\n#                                                                            #\n# Except as contained in this notice, the name(s) of the above copyright     #\n# holders shall not be used in advertising or otherwise to promote the sale, #\n# use or other dealings in this Software without prior written               #\n# authorization.                                                             #\n##############################################################################\n#\n# Author: Thomas E. Dickey\n#\n# Generate list of objects for a given model library\n# Variables:\n#\tname\t\t  (library name, e.g., \"ncurses\", \"panel\", \"forms\", \"menus\")\n#\ttraces\t\t  (\"all\" or \"DEBUG\", to control whether tracing is compiled in)\n#\tMODEL\t\t  (e.g., \"DEBUG\", uppercase; toupper is not portable)\n#\tCXX_MODEL\t  (e.g., \"DEBUG\", uppercase)\n#\tLIB_SUFFIX\t  (e.g., \"\", \"w\", \"t\", \"tw\")\n#\tUSE_LIB_SUFFIX (e.g., \"\", \"w\", \"t\", \"tw\")\n#\tmodel\t\t  (directory into which we compile, e.g., \"obj\")\n#\tprefix\t\t  (e.g., \"lib\", for Unix-style libraries)\n#\tsuffix\t\t  (e.g., \"_g.a\", for debug libraries)\n#\tsubset\t\t  (\"none\", \"base\", \"base+ext_funcs\" or \"termlib\", etc.)\n#\tdriver\t\t  (\"yes\" or \"no\", depends on --enable-term-driver)\n#\tShlibVer\t  (\"rel\", \"abi\" or \"auto\", to augment DoLinks variable)\n#\tShlibVerInfix (\"yes\" or \"no\", determines location of version #)\n#\tSymLink\t\t  (\"ln -s\", etc)\n#\tTermlibRoot\t  (\"tinfo\" or other root for libterm.so)\n#\tTermlibSuffix (\".so\" or other suffix for libterm.so)\n#\tReLink\t\t  (\"yes\", or \"no\", flag to rebuild shared libs on install)\n#\tReRanlib\t  (\"yes\", or \"no\", flag to rerun ranlib for installing static)\n#\tDoLinks\t\t  (\"yes\", \"reverse\" or \"no\", flag to add symbolic links)\n#\trmSoLocs\t  (\"yes\" or \"no\", flag to add extra clean target)\n#\tldconfig\t  (path for this tool, if used)\n#\tmake_phony    (\"yes\" if the make-program accepts \".PHONY\" directive.\n#\toverwrite\t  (\"yes\" or \"no\", flag to add link to libcurses.a\n#\tdepend\t\t  (optional dependencies for all objects, e.g, ncurses_cfg.h)\n#\thost\t\t  (cross-compile host, if any)\n#\tlibtool_version (libtool \"-version-info\" or \"-version-number\")\n#\n# Notes:\n#\tCLIXs nawk does not like underscores in command-line variable names.\n#\tMixed-case variable names are ok.\n#\tHP-UX requires shared libraries to have executable permissions.\n#\nfunction is_ticlib() {\n\t\treturn ( subset ~ /^ticlib$/ );\n\t}\nfunction is_termlib() {\n\t\treturn ( subset ~ /^(ticlib\\+)?termlib((\\+[^+ ]+)*\\+[a-z_]+_tinfo)?$/ );\n\t}\n# see lib_name\nfunction lib_name_of(a_name) {\n\t\treturn sprintf(\"%s%s%s\", prefix, a_name, suffix)\n\t}\n# see imp_name\nfunction imp_name_of(a_name) {\n\t\tif (ShlibVerInfix == \"cygdll\" || ShlibVerInfix == \"msysdll\" || ShlibVerInfix == \"mingw\") {\n\t\t\tresult = sprintf(\"%s%s%s.a\", prefix, a_name, suffix);\n\t\t} else if (ShlibVerInfix == \"msvcdll\") {\n\t\t\tresult = sprintf(\"%s%s%s.lib\", prefix, a_name, suffix);\n\t\t} else{\n\t\t\tresult = \"\";\n\t\t}\n\t\treturn result;\n\t}\n# see abi_name\nfunction abi_name_of(a_name) {\n\t\tif (ShlibVerInfix == \"cygdll\") {\n\t\t\tresult = sprintf(\"%s%s$(ABI_VERSION)%s\", \"cyg\", a_name, suffix);\n\t\t} else if (ShlibVerInfix == \"msysdll\") {\n\t\t\tresult = sprintf(\"%s%s$(ABI_VERSION)%s\", \"msys-\", a_name, suffix);\n\t\t} else if (ShlibVerInfix == \"mingw\" || ShlibVerInfix == \"msvcdll\") {\n\t\t\tresult = sprintf(\"%s%s$(ABI_VERSION)%s\", prefix, a_name, suffix);\n\t\t} else if (ShlibVerInfix == \"yes\") {\n\t\t\tresult = sprintf(\"%s%s.$(ABI_VERSION)%s\", prefix, a_name, suffix);\n\t\t} else {\n\t\t\tresult = sprintf(\"%s.$(ABI_VERSION)\", lib_name_of(a_name));\n\t\t}\n\t\treturn result;\n\t}\n# see rel_name\nfunction rel_name_of(a_name) {\n\t\tif (ShlibVerInfix == \"cygdll\") {\n\t\t\tresult = sprintf(\"%s%s$(REL_VERSION)%s\", \"cyg\", a_name, suffix);\n\t\t} else if (ShlibVerInfix == \"msysdll\") {\n\t\t\tresult = sprintf(\"%s%s$(ABI_VERSION)%s\", \"msys-\", a_name, suffix);\n\t\t} else if (ShlibVerInfix == \"mingw\" || ShlibVerInfix == \"msvcdll\") {\n\t\t\tresult = sprintf(\"%s%s$(REL_VERSION)%s\", prefix, a_name, suffix);\n\t\t} else if (ShlibVerInfix == \"yes\") {\n\t\t\tresult = sprintf(\"%s%s.$(REL_VERSION)%s\", prefix, a_name, suffix);\n\t\t} else {\n\t\t\tresult = sprintf(\"%s.$(REL_VERSION)\", lib_name_of(a_name));\n\t\t}\n\t\treturn result;\n\t}\n# see end_name\nfunction end_name_of(a_name) {\n\t\tif ( MODEL != \"SHARED\" ) {\n\t\t\tresult = lib_name_of(a_name);\n\t\t} else if ( DoLinks == \"reverse\") {\n\t\t\tresult = lib_name_of(a_name);\n\t\t} else {\n\t\t\tif ( ShlibVer == \"rel\" ) {\n\t\t\t\tresult = rel_name_of(a_name);\n\t\t\t} else if ( ShlibVer == \"abi\" || ShlibVer == \"cygdll\" || ShlibVer == \"msysdll\" || ShlibVer == \"mingw\" || ShlibVer == \"msvcdll\" ) {\n\t\t\t\tresult = abi_name_of(a_name);\n\t\t\t} else {\n\t\t\t\tresult = lib_name_of(a_name);\n\t\t\t}\n\t\t}\n\t\treturn result\n\t}\nfunction symlink(src,dst) {\n\t\tif ( src != dst ) {\n\t\t\tif ( SymLink !~ /.*-f.*/ ) {\n\t\t\t\tprintf \"rm -f %s; \", dst\n\t\t\t}\n\t\t\tprintf \"$(LN_S) %s %s; \", src, dst\n\t\t}\n\t}\nfunction rmlink(directory, dst) {\n\t\tif ( dst != \"\" ) {\n\t\t\tprintf \"\\t-rm -f %s/%s\\n\", directory, dst\n\t\t}\n\t}\nfunction removelinks(directory) {\n\t\tnlinks = 0;\n\t\tlinks[nlinks++] = end_name;\n\t\tif ( DoLinks == \"reverse\" ) {\n\t\t\tif ( ShlibVer == \"rel\" ) {\n\t\t\t\tlinks[nlinks++] = abi_name;\n\t\t\t\tlinks[nlinks++] = rel_name;\n\t\t\t} else if ( ShlibVer == \"abi\" ) {\n\t\t\t\tlinks[nlinks++] = abi_name;\n\t\t\t}\n\t\t} else {\n\t\t\tif ( ShlibVer == \"rel\" ) {\n\t\t\t\tlinks[nlinks++] = abi_name;\n\t\t\t\tlinks[nlinks++] = lib_name;\n\t\t\t} else if ( ShlibVer == \"abi\" ) {\n\t\t\t\tlinks[nlinks++] = lib_name;\n\t\t\t}\n\t\t}\n\t\tfor (j = 0; j < nlinks; ++j) {\n\t\t\tfound = 0;\n\t\t\tfor (k = 0; k < j; ++k ) {\n\t\t\t\tif ( links[j] == links[k] ) {\n\t\t\t\t\tfound = 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( !found ) {\n\t\t\t\trmlink(directory, links[j]);\n\t\t\t}\n\t\t}\n\t}\nfunction make_shlib(objs, shlib_list) {\n\t\tprintf \"\\t$(MK_SHARED_LIB) $(%s_OBJS) $(%s)\\n\", objs, shlib_list\n\t}\nfunction sharedlinks(directory) {\n\t\tif ( ShlibVer != \"auto\" && ShlibVer != \"cygdll\" && ShlibVer != \"msysdll\" && ShlibVer != \"mingw\" && ShlibVer != \"msvcdll\" ) {\n\t\t\tprintf \"\\tcd %s && (\", directory\n\t\t\tif ( DoLinks == \"reverse\" ) {\n\t\t\t\tif ( ShlibVer == \"rel\" ) {\n\t\t\t\t\tsymlink(lib_name, abi_name);\n\t\t\t\t\tsymlink(abi_name, rel_name);\n\t\t\t\t} else if ( ShlibVer == \"abi\" ) {\n\t\t\t\t\tsymlink(lib_name, abi_name);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( ShlibVer == \"rel\" ) {\n\t\t\t\t\tsymlink(rel_name, abi_name);\n\t\t\t\t\tsymlink(abi_name, lib_name);\n\t\t\t\t} else if ( ShlibVer == \"abi\" ) {\n\t\t\t\t\tsymlink(abi_name, lib_name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tprintf \")\\n\"\n\t\t}\n\t}\n# termlib may be named explicitly via \"--with-termlib=XXX\", which overrides\n# any suffix.  Temporarily override \"suffix\" to account for this.\nfunction termlib_end_of() {\n\ttermlib_save_suffix = suffix;\n\tsuffix = TermlibSuffix;\n\ttermlib_temp_result = end_name_of(TermlibRoot);\n\tsuffix = termlib_save_suffix;\n\treturn termlib_temp_result;\n}\nfunction shlib_build(directory) {\n\t\tdst_libs = sprintf(\"%s/%s\", directory, end_name);\n\t\tprintf \"%s : \\\\\\n\", dst_libs\n\t\tif (subset == \"ticlib\" && driver == \"yes\" ) {\n\t\t\tbase = name;\n\t\t\tsub(/^tic/, \"ncurses\", base); # workaround for \"w\"\n\t\t\tprintf \"\\t\\t%s/%s \\\\\\n\", directory, end_name_of(base);\n\t\t}\n\t\tif (subset ~ /^base/ || subset == \"ticlib\" ) {\n\t\t\tsave_suffix = suffix\n\t\t\tsub(/^[^.]\\./,\".\",suffix)\n\t\t\tif (directory != \"../lib\") {\n\t\t\t\tprintf \"\\t\\t%s/%s \\\\\\n\", \"../lib\", termlib_end_of();\n\t\t\t}\n\t\t\tprintf \"\\t\\t%s/%s \\\\\\n\", directory, termlib_end_of();\n\t\t\tsuffix = save_suffix\n\t\t}\n\t\tprintf \"\\t\\t$(RESULTING_SYMS) $(%s_OBJS)\\n\", OBJS\n\t\tprintf \"\\t@echo linking $@\\n\"\n\t\tprintf \"\\t@mkdir -p %s\\n\", directory\n\t\tif ( ReLink != \"yes\" ) {\n\t\t\tprintf \"\\t@sleep 1\\n\"\n\t\t}\n\t\tif ( is_ticlib() ) {\n\t\t\tmake_shlib(OBJS, \"TICS_LIST\")\n\t\t} else if ( is_termlib() ) {\n\t\t\tmake_shlib(OBJS, \"TINFO_LIST\")\n\t\t} else {\n\t\t\tmake_shlib(OBJS, \"SHLIB_LIST\")\n\t\t}\n\t\tsharedlinks(directory)\n\t}\nfunction shlib_install(directory) {\n\t\tsrc_lib1 = sprintf(\"../lib/%s\", end_name);\n\t\tdst_lib1 = sprintf(\"%s/%s\", directory, end_name);\n\t\tprintf \"%s : \\\\\\n\", dst_lib1\n\t\tprintf \"\\t\\t%s \\\\\\n\", directory\n\t\tprintf \"\\t\\t%s\\n\", src_lib1\n\t\tprintf \"\\t@echo installing $@\\n\"\n\t\tprintf \"\\t$(INSTALL_LIB) %s %s\\n\", src_lib1, dst_lib1;\n\t\tsharedlinks(directory)\n\t}\nfunction install_dll(directory,filename) {\n\t\tsrc_name = sprintf(\"../lib/%s\", filename);\n\t\tdst_name = sprintf(\"$(DESTDIR)%s/%s\", directory, filename);\n\t\tprintf \"\\t@echo installing %s as %s\\n\", src_name, dst_name\n\t\tif ( directory == \"$(bindir)\" ) {\n\t\t\tprogram = \"$(INSTALL) -m 755\";\n\t\t} else {\n\t\t\tprogram = \"$(INSTALL_LIB)\";\n\t\t}\n\t\tprintf \"\\t%s %s %s\\n\", program, src_name, dst_name\n\t}\nfunction in_subset(value) {\n\t\tvalue = \" \" value \" \";\n\t\tcheck = subset;\n\t\tgsub(\"[+]\", \" \", check);\n\t\tcheck = \" \" check \" \";\n\t\treturn index(check,value);\n\t}\nfunction trim_suffix(value) {\n\tif (USE_LIB_SUFFIX != \"\" && length(value) > length(USE_LIB_SUFFIX)) {\n\t\tcheck = substr(value, 1 + length(value) - length(USE_LIB_SUFFIX));\n\t\tif (check == USE_LIB_SUFFIX) {\n\t\t\tvalue = substr(value, 1, length(value) - length(USE_LIB_SUFFIX));\n\t\t}\n\t}\n\treturn value;\n}\nBEGIN\t{\n\t\tTOOL_PREFIX = \"\";\n\t\tfound = 0;\n\t\tusing = 0;\n\t}\n\t/^@/ {\n\t\tusing = 0\n\t\tif (subset == \"none\") {\n\t\t\tusing = 1\n\t\t\tprint  \"\"\n\t\t\tprint \"# generated by mk-1st.awk\"\n\t\t} else if (in_subset($2) > 0) {\n\t\t\tif (using == 0) {\n\t\t\t\tif (found == 0) {\n\t\t\t\t\tif ( name ~ /^.*\\+\\+.*/ ) {\n\t\t\t\t\t\tif ( CXX_MODEL == \"NORMAL\" && MODEL == \"SHARED\" ) {\n\t\t\t\t\t\t\tprint  \"\"\n\t\t\t\t\t\t\tprintf \"# overriding model from %s to match CXX_MODEL\\n\", MODEL;\n\t\t\t\t\t\t\tMODEL = \"NORMAL\";\n\t\t\t\t\t\t\tsuffix = \".a\";\n\t\t\t\t\t\t\tDoLinks = \"no\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tprint  \"\"\n\t\t\t\t\tprintf \"# generated by mk-1st.awk (subset=%s)\\n\", subset\n\t\t\t\t\tprintf \"#  name:            %s\\n\", name\n\t\t\t\t\tprintf \"#  traces:          %s\\n\", traces\n\t\t\t\t\tprintf \"#  MODEL:           %s\\n\", MODEL\n\t\t\t\t\tprintf \"#  CXX_MODEL:       %s\\n\", CXX_MODEL\n\t\t\t\t\tprintf \"#  LIB_SUFFIX:      %s\\n\", LIB_SUFFIX\n\t\t\t\t\tprintf \"#  USE_LIB_SUFFIX:  %s\\n\", USE_LIB_SUFFIX\n\t\t\t\t\tprintf \"#  model:           %s\\n\", model\n\t\t\t\t\tprintf \"#  prefix:          %s\\n\", prefix\n\t\t\t\t\tprintf \"#  suffix:          %s\\n\", suffix\n\t\t\t\t\tprintf \"#  subset:          %s\\n\", subset\n\t\t\t\t\tprintf \"#  driver:          %s\\n\", driver\n\t\t\t\t\tprintf \"#  ShlibVer:        %s\\n\", ShlibVer\n\t\t\t\t\tprintf \"#  ShlibVerInfix:   %s\\n\", ShlibVerInfix\n\t\t\t\t\tprintf \"#  SymLink:         %s\\n\", SymLink\n\t\t\t\t\tprintf \"#  TermlibRoot:     %s\\n\", TermlibRoot\n\t\t\t\t\tprintf \"#  TermlibSuffix:   %s\\n\", TermlibSuffix\n\t\t\t\t\tprintf \"#  ReLink:          %s\\n\", ReLink\n\t\t\t\t\tprintf \"#  ReRanlib:        %s\\n\", ReRanlib\n\t\t\t\t\tprintf \"#  DoLinks:         %s\\n\", DoLinks\n\t\t\t\t\tprintf \"#  rmSoLocs:        %s\\n\", rmSoLocs\n\t\t\t\t\tprintf \"#  ldconfig:        %s\\n\", ldconfig\n\t\t\t\t\tprintf \"#  make_phony:      %s\\n\", make_phony\n\t\t\t\t\tprintf \"#  overwrite:       %s\\n\", overwrite\n\t\t\t\t\tprintf \"#  depend:          %s\\n\", depend\n\t\t\t\t\tprintf \"#  host:            %s\\n\", host\n\t\t\t\t\tprintf \"#  libtool_version: %s\\n\", libtool_version\n\t\t\t\t\tprint  \"\"\n\t\t\t\t}\n\t\t\t\tusing = 1\n\t\t\t}\n\t\t\tif ( is_ticlib() ) {\n\t\t\t\tOBJS  = MODEL \"_P\"\n\t\t\t} else if ( is_termlib() ) {\n\t\t\t\tOBJS  = MODEL \"_T\"\n\t\t\t} else {\n\t\t\t\tOBJS  = MODEL\n\t\t\t}\n\t\t}\n\t}\n\t/^[@#]/ {\n\t\tnext\n\t}\n\t$1 ~ /trace/ {\n\t\tif (traces != \"all\" && traces != MODEL && $1 != \"lib_trace\")\n\t\t\tnext\n\t}\n\t{\n\t\tif (using \\\n\t\t && ( $1 != \"link_test\" ) \\\n\t\t && ( $2 == \"lib\" \\\n\t\t   || $2 == \"progs\" \\\n\t\t   || $2 == \"c++\" \\\n\t\t   || $2 == \"tack\" ))\n\t\t{\n\t\t\tif ( found == 0 )\n\t\t\t{\n\t\t\t\tprintf \"%s_OBJS =\", OBJS\n\t\t\t\tif ( $2 == \"lib\" ) {\n\t\t\t\t\tfound = 1;\n\t\t\t\t} else if ( $2 == \"c++\" ) {\n\t\t\t\t\tTOOL_PREFIX = \"CXX_\";\n\t\t\t\t\tfound = 1;\n\t\t\t\t} else {\n\t\t\t\t\tfound = 2;\n\t\t\t\t}\n\t\t\t\tif ( $2 == \"c++\" ) {\n\t\t\t\t\tCC_NAME=\"CXX\"\n\t\t\t\t\tCC_FLAG=\"CXXFLAGS\"\n\t\t\t\t} else {\n\t\t\t\t\tCC_NAME=\"CC\"\n\t\t\t\t\tCC_FLAG=\"CFLAGS\"\n\t\t\t\t}\n\t\t\t}\n\t\t\tprintf \" \\\\\\n\\t../%s/%s$o\", model, $1;\n\t\t}\n\t}\nEND\t{\n\t\tprint  \"\"\n\t\tif ( found != 0 )\n\t\t{\n\t\t\tprintf \"\\n$(%s_OBJS) : %s\\n\", OBJS, depend\n\t\t}\n\t\tif ( found == 1 )\n\t\t{\n\t\t\tprint  \"\"\n\t\t\tlib_name = lib_name_of(name);\n\t\t\tif ( MODEL == \"SHARED\" )\n\t\t\t{\n\t\t\t\tabi_name = abi_name_of(name);\n\t\t\t\trel_name = rel_name_of(name);\n\t\t\t\timp_name = imp_name_of(name);\n\t\t\t\tend_name = end_name_of(name);\n\n\t\t\t\tshlib_build(\"../lib\")\n\n\t\t\t\tprint  \"\"\n\t\t\t\tprint  \"install \\\\\"\n\t\t\t\tprint  \"install.libs \\\\\"\n\n\t\t\t\tif ( ShlibVer == \"cygdll\" || ShlibVer == \"msysdll\" || ShlibVer == \"mingw\" || ShlibVer == \"msvcdll\") {\n\n\t\t\t\t\tdst_dirs = \"$(DESTDIR)$(bindir) $(DESTDIR)$(libdir)\";\n\t\t\t\t\tprintf \"install.%s :: %s $(LIBRARIES)\\n\", name, dst_dirs\n\t\t\t\t\tinstall_dll(\"$(bindir)\",end_name);\n\t\t\t\t\tinstall_dll(\"$(libdir)\",imp_name);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlib_dir = \"$(DESTDIR)$(libdir)\";\n\t\t\t\t\tprintf \"install.%s :: %s/%s\\n\", name, lib_dir, end_name\n\t\t\t\t\tprint \"\"\n\t\t\t\t\tif ( ReLink == \"yes\" ) {\n\t\t\t\t\t\tshlib_build(lib_dir)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshlib_install(lib_dir)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( overwrite == \"yes\" && name == \"ncurses\" )\n\t\t\t\t{\n\t\t\t\t\tif ( ShlibVer == \"cygdll\" || ShlibVer == \"msysdll\" || ShlibVer == \"mingw\" || SlibVer == \"msvcdll\") {\n\t\t\t\t\t\tif (ShlibVer == \"msvcdll\") {\n\t\t\t\t\t\t\tcurses_prefix = \"\"\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcurses_prefix = \"lib\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tovr_name = sprintf(\"%scurses%s.a\", curses_prefix, suffix)\n\t\t\t\t\t\tprintf \"\\t@echo linking %s to %s\\n\", imp_name, ovr_name\n\t\t\t\t\t\tprintf \"\\tcd $(DESTDIR)$(libdir) && (\"\n\t\t\t\t\t\tsymlink(imp_name, ovr_name)\n\t\t\t\t\t\tprintf \")\\n\"\n\t\t\t\t\t} else {\n\t\t\t\t\t\tovr_name = sprintf(\"libcurses%s\", suffix)\n\t\t\t\t\t\tprintf \"\\t@echo linking %s to %s\\n\", end_name, ovr_name\n\t\t\t\t\t\tprintf \"\\tcd $(DESTDIR)$(libdir) && (\"\n\t\t\t\t\t\tsymlink(end_name, ovr_name)\n\t\t\t\t\t\tprintf \")\\n\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( ldconfig != \"\" && ldconfig != \":\" ) {\n\t\t\t\t\tprintf \"\\t- test -z \\\"$(DESTDIR)\\\" && %s\\n\", ldconfig\n\t\t\t\t}\n\t\t\t\tprint  \"\"\n\t\t\t\tprint  \"uninstall \\\\\"\n\t\t\t\tprint  \"uninstall.libs \\\\\"\n\t\t\t\tprintf \"uninstall.%s ::\\n\", name\n\t\t\t\tif ( ShlibVer == \"cygdll\" || ShlibVer == \"msysdll\" || ShlibVer == \"mingw\" || ShlibVer == \"msvcdll\") {\n\n\t\t\t\t\tprintf \"\\t@echo uninstalling $(DESTDIR)$(bindir)/%s\\n\", end_name\n\t\t\t\t\tprintf \"\\t-@rm -f $(DESTDIR)$(bindir)/%s\\n\", end_name\n\n\t\t\t\t\tprintf \"\\t@echo uninstalling $(DESTDIR)$(libdir)/%s\\n\", imp_name\n\t\t\t\t\tprintf \"\\t-@rm -f $(DESTDIR)$(libdir)/%s\\n\", imp_name\n\n\t\t\t\t} else {\n\t\t\t\t\tprintf \"\\t@echo uninstalling $(DESTDIR)$(libdir)/%s\\n\", end_name\n\t\t\t\t\tremovelinks(\"$(DESTDIR)$(libdir)\")\n\t\t\t\t\tif ( overwrite == \"yes\" && name == \"ncurses\" )\n\t\t\t\t\t{\n\t\t\t\t\t\tovr_name = sprintf(\"libcurses%s\", suffix)\n\t\t\t\t\t\tprintf \"\\t-@rm -f $(DESTDIR)$(libdir)/%s\\n\", ovr_name\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( rmSoLocs == \"yes\" ) {\n\t\t\t\t\tprint  \"\"\n\t\t\t\t\tprint  \"mostlyclean \\\\\"\n\t\t\t\t\tprint  \"clean ::\"\n\t\t\t\t\tprintf \"\\t-@rm -f so_locations\\n\"\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ( MODEL == \"LIBTOOL\" )\n\t\t\t{\n\t\t\t\tend_name = lib_name;\n\t\t\t\tuse_name = trim_suffix(TermlibRoot) USE_LIB_SUFFIX\n\t\t\t\tprintf \"../lib/%s : \\\\\\n\", lib_name\n\t\t\t\tif ( (name != use_name ) && ( index(name, \"++\") == 0 ) && ( index(name, \"tic\") == 1 || index(name, \"ncurses\") == 1 ) ) {\n\t\t\t\t\tprintf \"\\t\\t../lib/lib%s.la \\\\\\n\", use_name;\n\t\t\t\t\tif ( index(name, \"tic\") == 1 && index(TermlibRoot, \"ncurses\") != 1 ) {\n\t\t\t\t\t\tprintf \"\\t\\t../lib/lib%s%s.la \\\\\\n\", \"ncurses\", USE_LIB_SUFFIX;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tprintf \"\\t\\t$(%s_OBJS)\\n\", OBJS\n\t\t\t\tif ( is_ticlib() ) {\n\t\t\t\t\twhich_list = \"TICS_LIST\";\n\t\t\t\t} else if ( is_termlib() ) {\n\t\t\t\t\twhich_list = \"TINFO_LIST\";\n\t\t\t\t} else {\n\t\t\t\t\twhich_list = \"SHLIB_LIST\";\n\t\t\t\t}\n\t\t\t\tprintf \"\\tcd ../lib && $(LIBTOOL_LINK) $(%s) $(%s) \\\\\\n\", CC_NAME, CC_FLAG;\n\t\t\t\tprintf \"\\t\\t-o %s $(%s_OBJS:$o=.lo) \\\\\\n\", lib_name, OBJS;\n\t\t\t\tprintf \"\\t\\t-rpath $(libdir) \\\\\\n\";\n\t\t\t\tprintf \"\\t\\t%s $(NCURSES_MAJOR):$(NCURSES_MINOR) $(LT_UNDEF) $(%s) $(LDFLAGS)\\n\", libtool_version, which_list;\n\t\t\t\tif ( make_phony == \"yes\" ) {\n\t\t\t\t\tprint  \"\"\n\t\t\t\t\tprintf \".PHONY :\\tinstall.%s\\n\", trim_suffix(name);\n\t\t\t\t}\n\t\t\t\tprint  \"\"\n\t\t\t\tprint  \"install \\\\\"\n\t\t\t\tprint  \"install.libs \\\\\"\n\t\t\t\tprintf \"install.%s :: \\\\\\n\", trim_suffix(name);\n\t\t\t\tprintf \"\\t\\t$(DESTDIR)$(libdir) \\\\\\n\";\n\t\t\t\tuse_name = TermlibRoot USE_LIB_SUFFIX\n\t\t\t\tif ( (name != use_name ) && ( index(name, \"++\") == 0 ) && ( index(name, \"tic\") == 1 || index(name, \"ncurses\") == 1 ) ) {\n\t\t\t\t\tif ( trim_suffix(TermlibRoot) != trim_suffix(name) ) {\n\t\t\t\t\t\tprintf \"\\t\\tinstall.%s \\\\\\n\", trim_suffix(TermlibRoot);\n\t\t\t\t\t}\n\t\t\t\t\tif ( index(name, \"tic\") == 1 && index(TermlibRoot, \"ncurses\") != 1 && trim_suffix(name) != \"ncurses\" ) {\n\t\t\t\t\t\tprintf \"\\t\\tinstall.%s \\\\\\n\", \"ncurses\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tprintf \"\\t\\t../lib/%s\\n\", lib_name\n\t\t\t\tprintf \"\\t@echo installing ../lib/%s as $(DESTDIR)$(libdir)/%s\\n\", lib_name, lib_name\n\t\t\t\tprintf \"\\tcd ../lib; $(LIBTOOL_INSTALL) $(INSTALL) %s $(DESTDIR)$(libdir)\\n\", lib_name\n\t\t\t\tprint  \"\"\n\t\t\t\tprint  \"uninstall \\\\\"\n\t\t\t\tprint  \"uninstall.libs \\\\\"\n\t\t\t\tprintf \"uninstall.%s ::\\n\", trim_suffix(name)\n\t\t\t\tprintf \"\\t@echo uninstalling $(DESTDIR)$(libdir)/%s\\n\", lib_name\n\t\t\t\tprintf \"\\t-@$(LIBTOOL_UNINSTALL) rm -f $(DESTDIR)$(libdir)/%s\\n\", lib_name\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tend_name = lib_name;\n\t\t\t\tprintf \"../lib/%s : $(%s_OBJS)\\n\", lib_name, OBJS\n\t\t\t\t# workaround: binutils' ranlib tries to be clever with\n\t\t\t\t# timestamps, by pretending its update took no time, confusing\n\t\t\t\t# the make utility.\n\t\t\t\tif ( ReLink != \"yes\" ) {\n\t\t\t\t\tprintf \"\\t@sleep 1\\n\"\n\t\t\t\t}\n\t\t\t\tprintf \"\\t$(%sAR) $(%sARFLAGS) $@ $?\\n\", TOOL_PREFIX, TOOL_PREFIX;\n\t\t\t\tprintf \"\\t$(RANLIB) $@\\n\"\n\t\t\t\tif ( host == \"vxworks\" )\n\t\t\t\t{\n\t\t\t\t\tprintf \"\\t$(LD) $(LD_OPTS) $? -o $(@:.a=$o)\\n\"\n\t\t\t\t}\n\t\t\t\tprint  \"\"\n\t\t\t\tprint  \"install \\\\\"\n\t\t\t\tprint  \"install.libs \\\\\"\n\t\t\t\tprintf \"install.%s :: $(DESTDIR)$(libdir) ../lib/%s\\n\", name, lib_name\n\t\t\t\tprintf \"\\t@echo installing ../lib/%s as $(DESTDIR)$(libdir)/%s\\n\", lib_name, lib_name\n\t\t\t\tprintf \"\\t$(INSTALL_DATA) ../lib/%s $(DESTDIR)$(libdir)/%s\\n\", lib_name, lib_name\n\t\t\t\tif ( overwrite == \"yes\" && lib_name == \"libncurses.a\" )\n\t\t\t\t{\n\t\t\t\t\tprintf \"\\t@echo linking libcurses.a to libncurses.a\\n\"\n\t\t\t\t\tprintf \"\\t-@rm -f $(DESTDIR)$(libdir)/libcurses.a\\n\"\n\t\t\t\t\tprintf \"\\t(cd $(DESTDIR)$(libdir) && \"\n\t\t\t\t\tsymlink(\"libncurses.a\", \"libcurses.a\")\n\t\t\t\t\tprintf \")\\n\"\n\t\t\t\t}\n\t\t\t\tif ( ReRanlib == \"yes\" )\n\t\t\t\t{\n\t\t\t\t\tprintf \"\\t$(RANLIB) $(DESTDIR)$(libdir)/%s\\n\", lib_name\n\t\t\t\t}\n\t\t\t\tif ( host == \"vxworks\" )\n\t\t\t\t{\n\t\t\t\t\tprintf \"\\t@echo installing ../lib/lib%s$o as $(DESTDIR)$(libdir)/lib%s$o\\n\", name, name\n\t\t\t\t\tprintf \"\\t$(INSTALL_DATA) ../lib/lib%s$o $(DESTDIR)$(libdir)/lib%s$o\\n\", name, name\n\t\t\t\t}\n\t\t\t\tprint  \"\"\n\t\t\t\tprint  \"uninstall \\\\\"\n\t\t\t\tprint  \"uninstall.libs \\\\\"\n\t\t\t\tprintf \"uninstall.%s ::\\n\", name\n\t\t\t\tprintf \"\\t@echo uninstalling $(DESTDIR)$(libdir)/%s\\n\", lib_name\n\t\t\t\tprintf \"\\t-@rm -f $(DESTDIR)$(libdir)/%s\\n\", lib_name\n\t\t\t\tif ( overwrite == \"yes\" && lib_name == \"libncurses.a\" )\n\t\t\t\t{\n\t\t\t\t\tprintf \"\\t@echo linking libcurses.a to libncurses.a\\n\"\n\t\t\t\t\tprintf \"\\t-@rm -f $(DESTDIR)$(libdir)/libcurses.a\\n\"\n\t\t\t\t}\n\t\t\t\tif ( host == \"vxworks\" )\n\t\t\t\t{\n\t\t\t\t\tprintf \"\\t@echo uninstalling $(DESTDIR)$(libdir)/lib%s$o\\n\", name\n\t\t\t\t\tprintf \"\\t-@rm -f $(DESTDIR)$(libdir)/lib%s$o\\n\", name\n\t\t\t\t}\n\t\t\t}\n\t\t\tprint \"\"\n\t\t\tprint \"clean ::\"\n\t\t\tremovelinks(\"../lib\");\n\t\t\tprint \"\"\n\t\t\tprint \"mostlyclean::\"\n\t\t\tprintf \"\\t-rm -f $(%s_OBJS)\\n\", OBJS\n\t\t\tif ( MODEL == \"LIBTOOL\" ) {\n\t\t\t\tprintf \"\\t-$(LIBTOOL_CLEAN) rm -f $(%s_OBJS:$o=.lo)\\n\", OBJS\n\t\t\t}\n\t\t}\n\t\telse if ( found == 2 )\n\t\t{\n\t\t\tprint \"\"\n\t\t\tprint \"mostlyclean::\"\n\t\t\tprintf \"\\t-rm -f $(%s_OBJS)\\n\", OBJS\n\t\t\tif ( MODEL == \"LIBTOOL\" ) {\n\t\t\t\tprintf \"\\t-$(LIBTOOL_CLEAN) rm -f $(%s_OBJS:$o=.lo)\\n\", OBJS\n\t\t\t}\n\t\t\tprint \"\"\n\t\t\tprint \"clean ::\"\n\t\t\tprintf \"\\t-rm -f $(%s_OBJS)\\n\", OBJS\n\t\t\tif ( MODEL == \"LIBTOOL\" ) {\n\t\t\t\tprintf \"\\t-$(LIBTOOL_CLEAN) rm -f $(%s_OBJS:$o=.lo)\\n\", OBJS\n\t\t\t}\n\t\t}\n\t}\n# vile:ts=4 sw=4\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}