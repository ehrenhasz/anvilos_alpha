{
  "module_name": "rules",
  "hash_id": "580bf3887286d9005adf6a698b4d222c31ac18db52622e9f68a4db81849a4f2b",
  "original_prompt": "Ingested from ncurses-6.4/package/debian/rules",
  "human_readable_source": "#!/usr/bin/make -f\n# $Id: rules,v 1.45 2022/10/22 18:35:38 tom Exp $\n\n# Uncomment this to turn on verbose mode.\n#export DH_VERBOSE=1\n\n# packages\nPACKAGES.indep = ncurses6-doc ncurses6-doc-html\nPACKAGES.arch  = ncurses6 ncursest6\n\n# These are used for cross-compiling and for saving the configure script\n# from having to guess our platform (since we know it already)\nDEB_HOST_GNU_TYPE   ?= $(shell dpkg-architecture -qDEB_HOST_GNU_TYPE)\nDEB_BUILD_GNU_TYPE  ?= $(shell dpkg-architecture -qDEB_BUILD_GNU_TYPE)\nDEB_HOST_MULTIARCH  ?= $(shell dpkg-architecture -qDEB_HOST_MULTIARCH)\n\nCC_NORMAL = -Wall -Wstrict-prototypes -Wmissing-prototypes -Wshadow -Wconversion\nCC_STRICT = $(CC_NORMAL) -W -Wbad-function-cast -Wcast-align -Wcast-qual -Wmissing-declarations -Wnested-externs -Wpointer-arith -Wwrite-strings -ansi -pedantic\n\nMY_ABI=6\nMY_DIR=/usr\nBINDIR=$(MY_DIR)/bin\nLIBDIR=$(MY_DIR)/lib/$(DEB_HOST_MULTIARCH)\nMYDATA=/usr/local/ncurses/share/terminfo\nNORMAL_DIR=$(CURDIR)/debian/ncurses$(MY_ABI)\nTHREAD_DIR=$(CURDIR)/debian/ncursest$(MY_ABI)\n\nCFLAGS   = $(shell dpkg-buildflags --get CFLAGS) $(CC_NORMAL)\nCXXFLAGS = $(shell dpkg-buildflags --get CXXFLAGS)\nCPPFLAGS = $(shell dpkg-buildflags --get CPPFLAGS)\nLDFLAGS  = $(shell dpkg-buildflags --get LDFLAGS)\n\nifneq ($(MY_DIR),/usr)\n\tRPATH_ENV = RPATH_LIST=../lib:$(LIBDIR)\n\tRPATH_OPT = --enable-rpath\nelse\n\tRPATH_ENV =\n\tRPATH_OPT = --disable-rpath --disable-rpath-hack\nendif\n\nifneq (,$(findstring noopt,$(DEB_BUILD_OPTIONS)))\n        CFLAGS += -O0\nelse\n        CFLAGS += -O2\nendif\nifeq (,$(findstring nostrip,$(DEB_BUILD_OPTIONS)))\n        INSTALL_PROGRAM += -s\nendif\n\nverbose = # -v\n\nconfigure = \\\n\t$(RPATH_ENV) \\\n\tCFLAGS=\"$(CFLAGS)\" \\\n\tCPPFLAGS=\"$(CPPFLAGS)\" \\\n\tLDFLAGS=\"$(LDFLAGS)\" ../../configure $(RPATH_OPT) \\\n\t\t--host=$(DEB_HOST_GNU_TYPE) \\\n\t\t--build=$(DEB_BUILD_GNU_TYPE) \\\n\t\t--prefix=$(MY_DIR) \\\n\t\t--libdir=\\$${prefix}/lib/$(DEB_HOST_MULTIARCH) \\\n\t\t--disable-echo \\\n\t\t--disable-getcap \\\n\t\t--disable-leaks \\\n\t\t--disable-macros  \\\n\t\t--disable-overwrite  \\\n\t\t--disable-relink \\\n\t\t--disable-termcap \\\n\t\t--enable-hard-tabs \\\n\t\t--enable-opaque-curses \\\n\t\t--enable-opaque-form \\\n\t\t--enable-opaque-menu \\\n\t\t--enable-opaque-panel \\\n\t\t--enable-pc-files \\\n\t\t--enable-stdnoreturn \\\n\t\t--enable-warnings \\\n\t\t--enable-wgetch-events \\\n\t\t--enable-widec \\\n\t\t--enable-xmc-glitch \\\n\t\t--program-suffix=$(MY_ABI) \\\n\t\t--verbose \\\n\t\t--with-abi-version=$(MY_ABI) \\\n\t\t--with-config-suffix=dev \\\n\t\t--with-cxx-shared \\\n\t\t--with-default-terminfo-dir=$(MYDATA) \\\n\t\t--with-develop \\\n\t\t--with-extra-suffix=$(MY_ABI) \\\n\t\t--with-shared \\\n\t\t--with-terminfo-dirs=$(MYDATA):/lib/terminfo:/usr/share/terminfo \\\n\t\t--with-termlib \\\n\t\t--with-ticlib \\\n\t\t--with-trace \\\n\t\t--with-versioned-syms \\\n\t\t--with-xterm-kbs=DEL \\\n\t\t--without-ada \\\n\t\t--without-debug \\\n\t\t--without-manpage-aliases \\\n\t\t--without-normal\n\nNCURSES6_DIR = $(CURDIR)/debian/ncurses6\nNCURSEST6_DIR = $(CURDIR)/debian/ncursest6\n\n.PHONY: all config build install binary clean config-indep config-arch \\\n    build-indep build-arch install-indep install-arch binary-indep \\\n    binary-arch\n\nall: build\n\nconfig: config-indep config-arch\nbuild: build-indep build-arch\ninstall: install-indep install-arch\nbinary: binary-indep binary-arch\nclean:\n\tdh_testdir\n\tdh_testroot\n\tdh_clean $(verbose)\n\trm -rf t\n\nconfig-indep: $(PACKAGES.indep:%=config-%-stamp)\nconfig-arch: $(PACKAGES.arch:%=config-%-stamp)\n\nbuild-indep: $(PACKAGES.indep:%=build-%-stamp)\nbuild-arch: $(PACKAGES.arch:%=build-%-stamp)\n\ninstall-indep: $(PACKAGES.indep:%=install-%-stamp)\ninstall-arch: $(PACKAGES.arch:%=install-%-stamp)\n\n# make the doc-package installable by renaming everything to avoid clashing\npatch-ncurses6-stamp:\n\tdh_testdir\n\tsed -i.bak \\\n\t\t-e 's/-config\\.1$$/dev-config.1/;t' \\\n\t\t-e 's/\\.3ncurses$$/.3ncurses6/' \\\n\t\t-e 's/\\.3curses$$/.3curses6/' \\\n\t\t-e 's/\\.3form$$/.3form6/' \\\n\t\t-e 's/\\.3menu$$/.3menu6/' \\\n\t\t-e 's/\\.3panel$$/.3panel6/' \\\n\t\t-e 's/\\.\\([157]\\)$$/6.\\1/' \\\n\t\tman/man_db.renames.in\n\tdiff -u man/man_db.renames.in.bak man/man_db.renames.in || true\n\ttouch $@\n\nconfig-ncurses6-stamp: patch-ncurses6-stamp\n\tdh_testdir\n\trm -rf t/ncurses6\n\tmkdir -p t/ncurses6\n\tcd t/ncurses6; $(configure)\n\ttouch $@\n\nconfig-ncursest6-stamp: patch-ncurses6-stamp\n\tdh_testdir\n\trm -rf t/ncursest6\n\tmkdir -p t/ncursest6\n\tcd t/ncursest6; $(configure) \\\n\t\t--enable-interop \\\n\t\t--enable-sp-funcs \\\n\t\t--program-suffix=t$(MY_ABI) \\\n\t\t--with-pthread\n\ttouch $@\n\nconfig-ncurses6-doc-stamp \\\nconfig-ncurses6-doc-html-stamp: config-ncurses6-stamp\n\ttouch $@\n\nbuild-ncurses6-stamp: config-ncurses6-stamp\n\tdh_testdir\n\n\t$(MAKE) -C t/ncurses6\n\n\ttouch $@\n\nbuild-ncursest6-stamp: config-ncursest6-stamp\n\tdh_testdir\n\n\t$(MAKE) -C t/ncursest6\n\n\ttouch $@\n\nbuild-ncurses6-doc-stamp \\\nbuild-ncurses6-doc-html-stamp: build-ncurses6-stamp\n\ttouch $@\n\ninstall-ncurses6-stamp: build-ncurses6-stamp\n\tdh_testdir\n\tdh_testroot\n\tdh_installdirs $(verbose)\n\tdh_prep        $(verbose) -pncurses6\n\n\t$(MAKE) -C t/ncurses6 install.libs install.progs DESTDIR=$(NCURSES6_DIR)\n\t$(MAKE) -C t/ncurses6/test ncurses LOCAL_LIBDIR=$(LIBDIR)\n\n\tmv t/ncurses6/test/ncurses $(NCURSES6_DIR)$(BINDIR)/ncurses$(MY_ABI)\n\n\ttouch $@\n\ninstall-ncursest6-stamp: build-ncursest6-stamp\n\tdh_testdir\n\tdh_testroot\n\tdh_installdirs $(verbose)\n\tdh_prep        $(verbose) -pncursest6\n\n\t$(MAKE) -C t/ncursest6 install.libs install.progs DESTDIR=$(NCURSEST6_DIR)\n\t$(MAKE) -C t/ncursest6/test ncurses LOCAL_LIBDIR=$(LIBDIR)\n\n\tmv t/ncursest6/test/ncurses $(NCURSEST6_DIR)$(BINDIR)/ncursest$(MY_ABI)\n\n\ttouch $@\n\ninstall-ncurses6-doc-stamp: build-ncurses6-stamp\n\tdh_testdir\n\tdh_testroot\n\tdh_installdirs $(verbose)\n\tdh_prep        $(verbose) -pncurses6-doc\n\n\t$(MAKE) -C t/ncurses6 install.man DESTDIR=$(NCURSES6_DIR)-doc\n\n\tcd $(NCURSES6_DIR)-doc/usr/share/man/man1 && ln -sf tset6.1.gz reset6.1.gz\n\n\ttouch $@\n\nHTML_DESTDIR=$(NCURSES6_DIR)-doc-html/usr/share/ncurses6-doc-html\ninstall-ncurses6-doc-html-stamp: build-ncurses6-stamp\n\tdh_testdir\n\tdh_testroot\n\tdh_installdirs $(verbose)\n\tdh_prep        $(verbose) -pncurses6-doc-html\n\n\tcd doc/html && find * -type d | sort | xargs -I{} mkdir -p -v $(HTML_DESTDIR)/{}\n\tcd doc/html && find * -type f -name '*.html' | sort | xargs -I{} install -m 644 -p -v -T {} $(HTML_DESTDIR)/{}\n\n\ttouch $@\n\n# Build architecture-independent files here.\nbinary-indep: install-indep\nifneq ($(PACKAGES.indep),)\n\trm -f $(PACKAGES.indep:%=install-%-stamp)\n\tdh_testdir\n\tdh_testroot\n\tdh_lintian           $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_installdocs       $(verbose) $(PACKAGES.indep:%=-p%)\n\tdh_installman        $(verbose) $(PACKAGES.indep:%=-p%)\n\tdh_installexamples   $(verbose) $(PACKAGES.indep:%=-p%)\n\tdh_installchangelogs $(verbose) $(PACKAGES.indep:%=-p%) NEWS\n\tdh_compress          $(verbose) $(PACKAGES.indep:%=-p%)\n\tdh_fixperms          $(verbose) $(PACKAGES.indep:%=-p%)\n\tdh_installdeb        $(verbose) $(PACKAGES.indep:%=-p%)\n\tdh_gencontrol        $(verbose) $(PACKAGES.indep:%=-p%)\n\tdh_md5sums           $(verbose) $(PACKAGES.indep:%=-p%)\n\tdh_builddeb          $(verbose) $(PACKAGES.indep:%=-p%)\nendif\n\n# Build architecture-dependent files here.\nbinary-arch: install-arch\nifneq ($(PACKAGES.arch),)\n\trm -f $(PACKAGES.arch:%=install-%-stamp)\n\tdh_testdir\n\tdh_testroot\n\n\tversion=`set -x; awk 'BEGIN{major=minor=0} /^NCURSES_MAJOR/{major=$$3} /^NCURSES_MINOR/{minor=$$3} END{print major \".\" minor}' < dist.mk`; \\\n\tsed -i \\\n\t\t-e \"s, usr/lib, usr/lib/$(DEB_HOST_MULTIARCH),\" \\\n\t\t-e \"s,6\\.1,$${version},\" \\\n\t\tdebian/*.lintian-overrides\n\n\tdh_lintian           $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_installdocs       $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_installchangelogs $(verbose) $(PACKAGES.arch:%=-p%)  NEWS\n\tdh_strip             $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_compress          $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_fixperms          $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_installdeb        $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_makeshlibs        $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_shlibdeps         $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_gencontrol        $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_md5sums           $(verbose) $(PACKAGES.arch:%=-p%)\n\tdh_builddeb          $(verbose) $(PACKAGES.arch:%=-p%)\nendif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}