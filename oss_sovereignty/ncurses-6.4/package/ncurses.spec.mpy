{
  "module_name": "ncurses.spec",
  "hash_id": "6742c5a8486659c39274f5a6f41dab128b34df8ca33a659052f6603986b933e7",
  "original_prompt": "Ingested from ncurses-6.4/package/ncurses.spec",
  "human_readable_source": "Summary: shared libraries for terminal handling\nName: ncurses6\nVersion: 6.4\nRelease: 20221231\nLicense: X11\nGroup: Development/Libraries\nSource: ncurses-%{version}-%{release}.tgz\n# URL: https://invisible-island.net/ncurses/\n\n%global MY_ABI 6\n\n# save value before redefining\n%global sys_libdir %{_libdir}\n\n# was redefined...\n#global _prefix /usr/local/ncurses#{MY_ABI}\n\n%global MY_PKG %{sys_libdir}/pkgconfig\n%define MYDATA /usr/local/ncurses/share/terminfo\n\n%description\nThe ncurses library routines are a terminal-independent method of\nupdating character screens with reasonable optimization.\n\nThis package is used for testing ABI %{MY_ABI}.\n\n%prep\n\n%global is_mandriva %(test -f /etc/mandriva-release && echo 1 || echo 0)\n%global is_fedora   %(test -f /usr/bin/dnf && echo 1 || echo 0)\n%global is_centos   %(test -f /etc/centos-release && echo 1 || echo 0)\n%global is_redhat   %(test -f /etc/redhat-release && echo 1 || echo 0)\n%global is_scilinux %(test -f /etc/sl-release && echo 1 || echo 0)\n%global is_suse     %(test -f /etc/SuSE-release && echo 1 || echo 0)\n\n%if %{is_redhat}\n# generate debug/debug-source packages.\n%else\n%define debug_package %{nil}\n%endif\n\n%if %{is_mandriva}\n%define _disable_ld_as_needed 1\n%define _disable_ld_no_undefined 1\n# libtool is not used here...\n%define _disable_libtoolize 1\n%define _disable_ld_build_id 1\n%endif\n\n%if %{is_fedora} || %{is_scilinux} || %{is_centos}\n# workaround for toolset breakage in Fedora 28\n%define _test_relink --enable-relink\n%else\n%define _test_relink --disable-relink\n%endif\n\n%setup -q -n ncurses-%{version}-%{release}\n\n%build\n%define CFG_OPTS \\\\\\\n\t--target %{_target_platform} \\\\\\\n\t--prefix=%{_prefix} \\\\\\\n\t--bindir=%{_bindir} \\\\\\\n\t--includedir=%{_includedir} \\\\\\\n\t--libdir=%{_libdir} \\\\\\\n\t--includedir='${prefix}/include' \\\\\\\n\t--disable-echo \\\\\\\n\t--disable-getcap \\\\\\\n\t--disable-leaks \\\\\\\n\t--disable-macros  \\\\\\\n\t--disable-overwrite  \\\\\\\n\t%{_test_relink}  \\\\\\\n\t--disable-termcap \\\\\\\n\t--enable-hard-tabs \\\\\\\n\t--enable-opaque-curses \\\\\\\n\t--enable-opaque-form \\\\\\\n\t--enable-opaque-menu \\\\\\\n\t--enable-opaque-panel \\\\\\\n\t--enable-pc-files \\\\\\\n\t--disable-rpath \\\\\\\n\t--enable-stdnoreturn \\\\\\\n\t--enable-warnings \\\\\\\n\t--enable-wgetch-events \\\\\\\n\t--enable-widec \\\\\\\n\t--enable-xmc-glitch \\\\\\\n\t--program-suffix=%{MY_ABI} \\\\\\\n\t--verbose \\\\\\\n\t--with-abi-version=%{MY_ABI} \\\\\\\n\t--with-config-suffix=dev \\\\\\\n\t--with-cxx-shared \\\\\\\n\t--with-default-terminfo-dir=%{MYDATA} \\\\\\\n\t--with-develop \\\\\\\n\t--with-extra-suffix=%{MY_ABI} \\\\\\\n\t--with-install-prefix=$RPM_BUILD_ROOT \\\\\\\n\t--with-pkg-config-libdir=%{MY_PKG} \\\\\\\n\t--with-shared \\\\\\\n\t--with-terminfo-dirs=%{MYDATA}:/usr/share/terminfo \\\\\\\n\t--with-termlib \\\\\\\n\t--with-ticlib \\\\\\\n\t--with-trace \\\\\\\n\t--with-versioned-syms \\\\\\\n\t--with-xterm-kbs=DEL \\\\\\\n\t--without-ada \\\\\\\n\t--without-debug \\\\\\\n\t--without-normal\n\n%configure %{CFG_OPTS}\n\nmake\n\n%install\nrm -rf $RPM_BUILD_ROOT\n\nmake install.libs install.progs\nrm -f test/ncurses\n( cd test && make ncurses LOCAL_LIBDIR=%{_libdir} && mv ncurses $RPM_BUILD_ROOT/%{_bindir}/ncurses%{MY_ABI} )\n\n%if %{is_mandriva}\n# check this first because Mageia has the /etc/redhat-release file...\n%else\n%if %{is_fedora}\n%ldconfig_scriptlets libs\n%ldconfig_scriptlets c++-libs\n%endif\n%endif\n\n%clean\nif rm -rf $RPM_BUILD_ROOT; then\n  echo OK\nelse\n  find $RPM_BUILD_ROOT -type f | grep -F -v /.nfs && exit 1\nfi\nexit 0\n\n%files\n%defattr(-,root,root,-)\n%{_bindir}/*\n%{_includedir}/*\n%{_libdir}/*\n\n%changelog\n\n* Sat Oct 16 2021 Thomas Dickey\n- disable rpath to address QA_RPATHS=1 warning.\n\n* Tue Dec 24 2019 Thomas Dickey\n- drop custom CC_NORMAL warning flags because setting CFLAGS interferes with\n  matching Fedora's PIE/PIC configuration.  Also, generate debug/debug-source\n  packages.\n\n* Sat Nov 16 2019 Thomas Dickey\n- modify clean-rule to work around Fedora NFS bugs.\n\n* Sat Aug 25 2018 Thomas E. Dickey\n- split spec-file into ncurses6 and ncursest6 to work around toolset breakage\n  in Fedora 28\n\n* Sat Jun 02 2018 Thomas E. Dickey\n- build-fix for Mageia\n\n* Sat May 26 2018 Thomas E. Dickey\n- use predefined configure-macro\n- separate ncurses6/ncursest6 packages\n\n* Sat Feb 10 2018 Thomas E. Dickey\n- add ncursest6 package\n- add several development features\n\n* Mon Jan 01 2018 Thomas E. Dickey\n- drop redundant files pattern for \"*.pc\"\n\n* Tue Dec 26 2017 Thomas E. Dickey\n- add --with-config-suffix option\n\n* Sun Apr 26 2015 Thomas E. Dickey\n- move package to /usr\n\n* Sun Apr 12 2015 Thomas E. Dickey\n- factor-out MY_ABI\n\n* Sat Mar 09 2013 Thomas E. Dickey\n- add --with-cxx-shared option to demonstrate c++ binding as shared library\n\n* Sat Oct 27 2012 Thomas E. Dickey\n- add ncurses program as \"ncurses6\" to provide demonstration.\n\n* Fri Jun 08 2012 Thomas E. Dickey\n- initial version.\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}