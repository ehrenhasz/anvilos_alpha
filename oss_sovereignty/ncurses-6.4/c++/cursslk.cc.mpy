{
  "module_name": "cursslk.cc",
  "hash_id": "4c397716edb712a79999c91c40577ec37a4eec4473407d7cc45d7bf8096b1332",
  "original_prompt": "Ingested from ncurses-6.4/c++/cursslk.cc",
  "human_readable_source": "\n \n\n \n\n#include \"internal.h\"\n#include \"cursslk.h\"\n#include \"cursesapp.h\"\n\nMODULE_ID(\"$Id: cursslk.cc,v 1.20 2022/02/26 17:57:23 tom Exp $\")\n\nSoft_Label_Key_Set::Soft_Label_Key&\n  Soft_Label_Key_Set::Soft_Label_Key::operator=(char *text)\n{\n  delete[] label;\n  size_t need = 1 + ::strlen(text);\n  label = new char[need];\n  ::_nc_STRCPY(label,text,need);\n  return *this;\n}\n\nlong Soft_Label_Key_Set::count      = 0L;\nint  Soft_Label_Key_Set::num_labels = 0;\n\nSoft_Label_Key_Set::Label_Layout\n  Soft_Label_Key_Set::format = None;\n\nvoid Soft_Label_Key_Set::init()\n{\n  if (num_labels > 12)\n      num_labels = 12;\n  slk_array = new Soft_Label_Key[num_labels];\n  for(int i=0; i < num_labels; i++) {\n    slk_array[i].num = i+1;\n  }\n  b_attrInit = FALSE;\n}\n\nSoft_Label_Key_Set::Soft_Label_Key_Set()\n  : b_attrInit(FALSE),\n    slk_array(NULL)\n{\n  if (format==None)\n    Error(\"No default SLK layout\");\n  init();\n}\n\nSoft_Label_Key_Set::Soft_Label_Key_Set(Soft_Label_Key_Set::Label_Layout fmt)\n  : b_attrInit(FALSE),\n    slk_array(NULL)\n{\n  if (fmt==None)\n    Error(\"Invalid SLK Layout\");\n  if (count++==0) {\n    format = fmt;\n    if (ERR == ::slk_init(static_cast<int>(fmt)))\n      Error(\"slk_init\");\n    num_labels = (fmt>=PC_Style?12:8);\n  }\n  else if (fmt!=format)\n    Error(\"All SLKs must have same layout\");\n  init();\n}\n\nSoft_Label_Key_Set::~Soft_Label_Key_Set() THROWS(NCursesException) {\n  if (!::isendwin())\n    clear();\n  delete[] slk_array;\n  count--;\n}\n\nSoft_Label_Key_Set::Soft_Label_Key& Soft_Label_Key_Set::operator[](int i) {\n  if (i<1 || i>num_labels)\n    Error(\"Invalid Label index\");\n  return slk_array[i-1];\n}\n\nint Soft_Label_Key_Set::labels() const {\n  return num_labels;\n}\n\nvoid Soft_Label_Key_Set::activate_label(int i, bool bf) {\n  if (!b_attrInit) {\n    NCursesApplication* A = NCursesApplication::getApplication();\n    if (A) attrset(A->labels());\n    b_attrInit = TRUE;\n  }\n  Soft_Label_Key& K = (*this)[i];\n  if (ERR==::slk_set(K.num,bf?K.label:\"\",K.format))\n    Error(\"slk_set\");\n  noutrefresh();\n}\n\nvoid Soft_Label_Key_Set::activate_labels(bool bf)\n{\n  if (!b_attrInit) {\n    NCursesApplication* A = NCursesApplication::getApplication();\n    if (A) attrset(A->labels());\n    b_attrInit = TRUE;\n  }\n  for(int i=1; i <= num_labels; i++) {\n    Soft_Label_Key& K = (*this)[i];\n    if (ERR==::slk_set(K.num,bf?K.label:\"\",K.format))\n      Error(\"slk_set\");\n  }\n  if (bf)\n    restore();\n  else\n    clear();\n  noutrefresh();\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}