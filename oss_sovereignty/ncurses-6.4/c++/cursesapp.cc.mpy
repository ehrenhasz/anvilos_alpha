{
  "module_name": "cursesapp.cc",
  "hash_id": "8cc65134243aecf11c58f1fca22ee10982edb936fe003c1bff36a872b996337b",
  "original_prompt": "Ingested from ncurses-6.4/c++/cursesapp.cc",
  "human_readable_source": "\n \n\n \n\n#include \"internal.h\"\n#include \"cursesapp.h\"\n\nMODULE_ID(\"$Id: cursesapp.cc,v 1.18 2020/07/18 19:57:11 anonymous.maarten Exp $\")\n\nvoid\nNCursesApplication::init(bool bColors)\n{\n  if (bColors)\n    NCursesWindow::useColors();\n\n  if (Root_Window->colors() > 1) {\n    b_Colors = TRUE;\n    Root_Window->setcolor(1);\n    Root_Window->setpalette(COLOR_YELLOW,COLOR_BLUE);\n    Root_Window->setcolor(2);\n    Root_Window->setpalette(COLOR_CYAN,COLOR_BLUE);\n    Root_Window->setcolor(3);\n    Root_Window->setpalette(COLOR_BLACK,COLOR_BLUE);\n    Root_Window->setcolor(4);\n    Root_Window->setpalette(COLOR_BLACK,COLOR_CYAN);\n    Root_Window->setcolor(5);\n    Root_Window->setpalette(COLOR_BLUE,COLOR_YELLOW);\n    Root_Window->setcolor(6);\n    Root_Window->setpalette(COLOR_BLACK,COLOR_GREEN);\n  }\n  else\n    b_Colors = FALSE;\n\n  Root_Window->bkgd(' '|window_backgrounds());\n}\n\nNCursesApplication* NCursesApplication::theApp = 0;\nNCursesWindow* NCursesApplication::titleWindow = 0;\nNCursesApplication::SLK_Link* NCursesApplication::slk_stack = 0;\n\n\nNCursesWindow *&NCursesApplication::getTitleWindow() {\n  return titleWindow;\n}\n\nNCursesApplication::~NCursesApplication() THROWS(NCursesException)\n{\n  Soft_Label_Key_Set* S;\n\n  delete titleWindow;\n  titleWindow = 0;\n\n  while( (S=top()) ) {\n    pop();\n    delete S;\n  }\n\n  delete Root_Window;\n  Root_Window = 0;\n\n  ::endwin();\n}\n\nNCursesApplication* NCursesApplication::getApplication() {\n  return theApp;\n}\n\nint NCursesApplication::rinit(NCursesWindow& w)\n{\n  titleWindow = &w;\n  return OK;\n}\n\nvoid NCursesApplication::push(Soft_Label_Key_Set& S)\n{\n  SLK_Link* L = new SLK_Link;\n  assert(L != 0);\n  L->prev = slk_stack;\n  L->SLKs = &S;\n  slk_stack = L;\n  if (Root_Window)\n    S.show();\n}\n\nbool NCursesApplication::pop()\n{\n  if (slk_stack) {\n    SLK_Link* L = slk_stack;\n    slk_stack = slk_stack->prev;\n    delete L;\n    if (Root_Window) {\n      Soft_Label_Key_Set* xx = top();\n      if (xx != 0)\n        xx->show();\n    }\n  }\n  return (slk_stack ? FALSE : TRUE);\n}\n\nSoft_Label_Key_Set* NCursesApplication::top() const\n{\n  if (slk_stack)\n    return slk_stack->SLKs;\n  else\n    return static_cast<Soft_Label_Key_Set*>(0);\n}\n\nint NCursesApplication::operator()(void)\n{\n  bool bColors = b_Colors;\n  Soft_Label_Key_Set* S = 0;\n\n  int ts = titlesize();\n  if (ts>0)\n    NCursesWindow::ripoffline(ts,rinit);\n  Soft_Label_Key_Set::Label_Layout fmt = useSLKs();\n  if (fmt!=Soft_Label_Key_Set::None) {\n    S = new Soft_Label_Key_Set(fmt);\n    assert(S != 0);\n    init_labels(*S);\n  }\n\n  Root_Window = new NCursesWindow(::stdscr);\n  init(bColors);\n\n  if (ts>0)\n    title();\n  if (fmt!=Soft_Label_Key_Set::None) {\n    push(*S);\n  }\n\n  return run();\n}\n\nNCursesApplication::NCursesApplication(bool bColors)\n  : b_Colors(bColors),\n    Root_Window(NULL)\n{\n  if (theApp)\n    THROW(new NCursesException(\"Application object already created.\"));\n  else\n    theApp = this;\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}