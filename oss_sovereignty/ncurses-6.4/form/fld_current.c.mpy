{
  "module_name": "fld_current.c",
  "hash_id": "d4f3ace4f1d79ccfc23bd826653fd5cefbf90efcc013ebae4102aff03abbbc38",
  "original_prompt": "Ingested from ncurses-6.4/form/fld_current.c",
  "human_readable_source": " \n\n \n\n#include \"form.priv.h\"\n\nMODULE_ID(\"$Id: fld_current.c,v 1.16 2020/05/24 01:40:20 anonymous.maarten Exp $\")\n\n \nFORM_EXPORT(int)\nset_current_field(FORM *form, FIELD *field)\n{\n  int err = E_OK;\n\n  T((T_CALLED(\"set_current_field(%p,%p)\"), (void *)form, (void *)field));\n  if (form == 0 || field == 0)\n    {\n      RETURN(E_BAD_ARGUMENT);\n    }\n  else if ((form != field->form) || Field_Is_Not_Selectable(field))\n    {\n      RETURN(E_REQUEST_DENIED);\n    }\n  else if ((form->status & _POSTED) == 0)\n    {\n      form->current = field;\n      form->curpage = field->page;\n    }\n  else\n    {\n      if ((form->status & _IN_DRIVER) != 0)\n\t{\n\t  err = E_BAD_STATE;\n\t}\n      else\n\t{\n\t  if (form->current != field)\n\t    {\n\t      if (form->current && !_nc_Internal_Validation(form))\n\t\t{\n\t\t  err = E_INVALID_FIELD;\n\t\t}\n\t      else\n\t\t{\n\t\t  Call_Hook(form, fieldterm);\n\t\t  if (field->page != form->curpage)\n\t\t    {\n\t\t      Call_Hook(form, formterm);\n\t\t      err = _nc_Set_Form_Page(form, (int)field->page, field);\n\t\t      Call_Hook(form, forminit);\n\t\t    }\n\t\t  else\n\t\t    {\n\t\t      err = _nc_Set_Current_Field(form, field);\n\t\t    }\n\t\t  Call_Hook(form, fieldinit);\n\t\t  (void)_nc_Refresh_Current_Field(form);\n\t\t}\n\t    }\n\t}\n    }\n  RETURN(err);\n}\n\n \nFORM_EXPORT(int)\nunfocus_current_field(FORM *const form)\n{\n  T((T_CALLED(\"unfocus_current_field(%p)\"), (const void *)form));\n  if (form == 0)\n    {\n      RETURN(E_BAD_ARGUMENT);\n    }\n  else if (form->current == 0)\n    {\n      RETURN(E_REQUEST_DENIED);\n    }\n  _nc_Unset_Current_Field(form);\n  RETURN(E_OK);\n}\n\n \nFORM_EXPORT(FIELD *)\ncurrent_field(const FORM *form)\n{\n  T((T_CALLED(\"current_field(%p)\"), (const void *)form));\n  returnField(Normalize_Form(form)->current);\n}\n\n \nFORM_EXPORT(int)\nfield_index(const FIELD *field)\n{\n  T((T_CALLED(\"field_index(%p)\"), (const void *)field));\n  returnCode((field != 0 && field->form != 0) ? (int)field->index : -1);\n}\n\n \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}