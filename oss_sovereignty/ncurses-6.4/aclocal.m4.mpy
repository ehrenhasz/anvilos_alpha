{
  "module_name": "aclocal.m4",
  "hash_id": "6c25b2c0dc6d751a08d0afb2fb39017d948ac1e20641a046a2376d28b5d76620",
  "original_prompt": "Ingested from ncurses-6.4/aclocal.m4",
  "human_readable_source": "dnl***************************************************************************\ndnl Copyright 2018-2021,2022 Thomas E. Dickey                                *\ndnl Copyright 1998-2017,2018 Free Software Foundation, Inc.                  *\ndnl                                                                          *\ndnl Permission is hereby granted, free of charge, to any person obtaining a  *\ndnl copy of this software and associated documentation files (the            *\ndnl \"Software\"), to deal in the Software without restriction, including      *\ndnl without limitation the rights to use, copy, modify, merge, publish,      *\ndnl distribute, distribute with modifications, sublicense, and/or sell       *\ndnl copies of the Software, and to permit persons to whom the Software is    *\ndnl furnished to do so, subject to the following conditions:                 *\ndnl                                                                          *\ndnl The above copyright notice and this permission notice shall be included  *\ndnl in all copies or substantial portions of the Software.                   *\ndnl                                                                          *\ndnl THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *\ndnl OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *\ndnl MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *\ndnl IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *\ndnl DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *\ndnl OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *\ndnl THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *\ndnl                                                                          *\ndnl Except as contained in this notice, the name(s) of the above copyright   *\ndnl holders shall not be used in advertising or otherwise to promote the     *\ndnl sale, use or other dealings in this Software without prior written       *\ndnl authorization.                                                           *\ndnl***************************************************************************\ndnl\ndnl Author: Thomas E. Dickey 1995-on\ndnl\ndnl $Id: aclocal.m4,v 1.1023 2022/11/05 20:13:19 tom Exp $\ndnl Macros used in NCURSES auto-configuration script.\ndnl\ndnl These macros are maintained separately from NCURSES.  The copyright on\ndnl this file applies to the aggregation of macros and does not affect use of\ndnl these macros in other applications.\ndnl\ndnl See these pages for additional information:\ndnl\t\thttps://invisible-island.net/autoconf/\ndnl\t\thttps://invisible-island.net/autoconf/my-autoconf.html\ndnl\ndnl ---------------------------------------------------------------------------\ndnl ---------------------------------------------------------------------------\ndnl AM_LANGINFO_CODESET version: 6 updated: 2021/01/01 16:53:59\ndnl -------------------\ndnl Inserted as requested by gettext 0.10.40\ndnl File from /usr/share/aclocal\ndnl codeset.m4\ndnl ====================\ndnl serial AM1\ndnl\ndnl From Bruno Haible.\nAC_DEFUN([AM_LANGINFO_CODESET],\n[\nAC_CACHE_CHECK([for nl_langinfo and CODESET], am_cv_langinfo_codeset,\n\t[AC_TRY_LINK([#include <langinfo.h>],\n\t[char* cs = nl_langinfo(CODESET); (void)cs],\n\tam_cv_langinfo_codeset=yes,\n\tam_cv_langinfo_codeset=no)\n\t])\n\tif test \"$am_cv_langinfo_codeset\" = yes; then\n\t\tAC_DEFINE(HAVE_LANGINFO_CODESET, 1,\n\t\t[Define if you have <langinfo.h> and nl_langinfo(CODESET).])\n\tfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ABI_DEFAULTS version: 3 updated: 2022/01/22 19:13:38\ndnl ---------------\ndnl Provide configure-script defaults for different ncurses ABIs.\nAC_DEFUN([CF_ABI_DEFAULTS],[\nAC_REQUIRE([CF_NCURSES_WITH_ABI_VERSION])\n\n# ABI 5 defaults:\ncf_dft_ccharw_max=5\ncf_dft_chtype=auto\ncf_dft_ext_colors=no\ncf_dft_ext_const=no\ncf_dft_ext_mouse=no\ncf_dft_ext_putwin=no\ncf_dft_ext_spfuncs=no\ncf_dft_filter_syms=no\ncf_dft_interop=no\ncf_dft_mmask_t=auto\ncf_dft_opaque_curses=no\ncf_dft_ordinate_type=short\ncf_dft_signed_char=no\ncf_dft_tparm_arg=long\ncf_dft_with_lp64=no\n\n# ABI 6 defaults:\ncase x$cf_cv_abi_version in\n(x[[6789]])\n\tcf_dft_chtype=uint32_t\n\tcf_dft_ext_colors=yes\n\tcf_dft_ext_const=yes\n\tcf_dft_ext_mouse=yes\n\tcf_dft_ext_putwin=yes\n\tcf_dft_ext_spfuncs=yes\n\tcf_dft_filter_syms=yes\n\tcf_dft_interop=yes\n\tcf_dft_mmask_t=uint32_t\n\tcf_dft_tparm_arg=intptr_t\n\tcf_dft_with_lp64=yes\n\t;;\nesac\n\n# ABI 7 defaults:\ncase x$cf_cv_abi_version in\n(x[[789]])\n\tcf_dft_ccharw_max=6\n\tcf_dft_mmask_t=uint64_t\n\tcf_dft_opaque_curses=yes\n\tcf_dft_ordinate_type=int\n\tcf_dft_signed_char=yes\n\t# also: remove the wgetch-events feature in ABI 7\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ACVERSION_CHECK version: 5 updated: 2014/06/04 19:11:49\ndnl ------------------\ndnl Conditionally generate script according to whether we're using a given autoconf.\ndnl\ndnl $1 = version to compare against\ndnl $2 = code to use if AC_ACVERSION is at least as high as $1.\ndnl $3 = code to use if AC_ACVERSION is older than $1.\ndefine([CF_ACVERSION_CHECK],\n[\nifdef([AC_ACVERSION], ,[ifdef([AC_AUTOCONF_VERSION],[m4_copy([AC_AUTOCONF_VERSION],[AC_ACVERSION])],[m4_copy([m4_PACKAGE_VERSION],[AC_ACVERSION])])])dnl\nifdef([m4_version_compare],\n[m4_if(m4_version_compare(m4_defn([AC_ACVERSION]), [$1]), -1, [$3], [$2])],\n[CF_ACVERSION_COMPARE(\nAC_PREREQ_CANON(AC_PREREQ_SPLIT([$1])),\nAC_PREREQ_CANON(AC_PREREQ_SPLIT(AC_ACVERSION)), AC_ACVERSION, [$2], [$3])])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ACVERSION_COMPARE version: 3 updated: 2012/10/03 18:39:53\ndnl --------------------\ndnl CF_ACVERSION_COMPARE(MAJOR1, MINOR1, TERNARY1,\ndnl                      MAJOR2, MINOR2, TERNARY2,\ndnl                      PRINTABLE2, not FOUND, FOUND)\ndefine([CF_ACVERSION_COMPARE],\n[ifelse(builtin([eval], [$2 < $5]), 1,\n[ifelse([$8], , ,[$8])],\n[ifelse([$9], , ,[$9])])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADA_INCLUDE_DIRS version: 8 updated: 2013/10/14 04:24:07\ndnl -------------------\ndnl Construct the list of include-options for the C programs in the Ada95\ndnl binding.\nAC_DEFUN([CF_ADA_INCLUDE_DIRS],\n[\nACPPFLAGS=\"-I. -I../include -I../../include $ACPPFLAGS\"\nif test \"$srcdir\" != \".\"; then\n\tACPPFLAGS=\"-I\\${srcdir}/../../include $ACPPFLAGS\"\nfi\nif test \"$GCC\" != yes; then\n\tACPPFLAGS=\"$ACPPFLAGS -I\\${includedir}\"\nelif test \"$includedir\" != \"/usr/include\"; then\n\tif test \"$includedir\" = '${prefix}/include' ; then\n\t\tif test x$prefix != x/usr ; then\n\t\t\tACPPFLAGS=\"$ACPPFLAGS -I\\${includedir}\"\n\t\tfi\n\telse\n\t\tACPPFLAGS=\"$ACPPFLAGS -I\\${includedir}\"\n\tfi\nfi\nAC_SUBST(ACPPFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_ADAFLAGS version: 1 updated: 2010/06/19 15:22:18\ndnl ---------------\ndnl Add to $ADAFLAGS, which is substituted into makefile and scripts.\nAC_DEFUN([CF_ADD_ADAFLAGS],[\n \tADAFLAGS=\"$ADAFLAGS $1\"\n\tAC_SUBST(ADAFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_CFLAGS version: 15 updated: 2020/12/31 10:54:15\ndnl -------------\ndnl Copy non-preprocessor flags to $CFLAGS, preprocessor flags to $CPPFLAGS\ndnl $1 = flags to add\ndnl $2 = if given makes this macro verbose.\ndnl\ndnl Put any preprocessor definitions that use quoted strings in $EXTRA_CPPFLAGS,\ndnl to simplify use of $CPPFLAGS in compiler checks, etc., that are easily\ndnl confused by the quotes (which require backslashes to keep them usable).\nAC_DEFUN([CF_ADD_CFLAGS],\n[\ncf_fix_cppflags=no\ncf_new_cflags=\ncf_new_cppflags=\ncf_new_extra_cppflags=\n\nfor cf_add_cflags in $1\ndo\ncase \"$cf_fix_cppflags\" in\n(no)\n\tcase \"$cf_add_cflags\" in\n\t(-undef|-nostdinc*|-I*|-D*|-U*|-E|-P|-C)\n\t\tcase \"$cf_add_cflags\" in\n\t\t(-D*)\n\t\t\tcf_tst_cflags=`echo \"${cf_add_cflags}\" |sed -e 's/^-D[[^=]]*='\\''\\\"[[^\"]]*//'`\n\n\t\t\ttest \"x${cf_add_cflags}\" != \"x${cf_tst_cflags}\" \\\n\t\t\t\t&& test -z \"${cf_tst_cflags}\" \\\n\t\t\t\t&& cf_fix_cppflags=yes\n\n\t\t\tif test \"$cf_fix_cppflags\" = yes ; then\n\t\t\t\tCF_APPEND_TEXT(cf_new_extra_cppflags,$cf_add_cflags)\n\t\t\t\tcontinue\n\t\t\telif test \"${cf_tst_cflags}\" = \"\\\"'\" ; then\n\t\t\t\tCF_APPEND_TEXT(cf_new_extra_cppflags,$cf_add_cflags)\n\t\t\t\tcontinue\n\t\t\tfi\n\t\t\t;;\n\t\tesac\n\t\tcase \"$CPPFLAGS\" in\n\t\t(*$cf_add_cflags)\n\t\t\t;;\n\t\t(*)\n\t\t\tcase \"$cf_add_cflags\" in\n\t\t\t(-D*)\n\t\t\t\tcf_tst_cppflags=`echo \"x$cf_add_cflags\" | sed -e 's/^...//' -e 's/=.*//'`\n\t\t\t\tCF_REMOVE_DEFINE(CPPFLAGS,$CPPFLAGS,$cf_tst_cppflags)\n\t\t\t\t;;\n\t\t\tesac\n\t\t\tCF_APPEND_TEXT(cf_new_cppflags,$cf_add_cflags)\n\t\t\t;;\n\t\tesac\n\t\t;;\n\t(*)\n\t\tCF_APPEND_TEXT(cf_new_cflags,$cf_add_cflags)\n\t\t;;\n\tesac\n\t;;\n(yes)\n\tCF_APPEND_TEXT(cf_new_extra_cppflags,$cf_add_cflags)\n\n\tcf_tst_cflags=`echo \"${cf_add_cflags}\" |sed -e 's/^[[^\"]]*\"'\\''//'`\n\n\ttest \"x${cf_add_cflags}\" != \"x${cf_tst_cflags}\" \\\n\t\t&& test -z \"${cf_tst_cflags}\" \\\n\t\t&& cf_fix_cppflags=no\n\t;;\nesac\ndone\n\nif test -n \"$cf_new_cflags\" ; then\n\tifelse([$2],,,[CF_VERBOSE(add to \\$CFLAGS $cf_new_cflags)])\n\tCF_APPEND_TEXT(CFLAGS,$cf_new_cflags)\nfi\n\nif test -n \"$cf_new_cppflags\" ; then\n\tifelse([$2],,,[CF_VERBOSE(add to \\$CPPFLAGS $cf_new_cppflags)])\n\tCF_APPEND_TEXT(CPPFLAGS,$cf_new_cppflags)\nfi\n\nif test -n \"$cf_new_extra_cppflags\" ; then\n\tifelse([$2],,,[CF_VERBOSE(add to \\$EXTRA_CPPFLAGS $cf_new_extra_cppflags)])\n\tCF_APPEND_TEXT(EXTRA_CPPFLAGS,$cf_new_extra_cppflags)\nfi\n\nAC_SUBST(EXTRA_CPPFLAGS)\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_CXXFLAGS version: 1 updated: 2020/04/04 16:16:13\ndnl ---------------\ndnl Copy non-preprocessor flags to $CXXFLAGS, preprocessor flags to $CPPFLAGS\ndnl The second parameter if given makes this macro verbose.\ndnl\ndnl Put any preprocessor definitions that use quoted strings in $EXTRA_CPPFLAGS,\ndnl to simplify use of $CPPFLAGS in compiler checks, etc., that are easily\ndnl confused by the quotes (which require backslashes to keep them usable).\nAC_DEFUN([CF_ADD_CXXFLAGS],\n[\ncf_save_CXXFLAGS=\"$CFLAGS\"\nCFLAGS=\"$CXXFLAGS\"\nCF_ADD_CFLAGS($1 ifelse($2,,,[,$2]))\nCXXFLAGS=\"$CFLAGS\"\nCFLAGS=\"$cf_save_CXXFLAGS\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_INCDIR version: 17 updated: 2021/09/04 06:35:04\ndnl -------------\ndnl Add an include-directory to $CPPFLAGS.  Don't add /usr/include, since it is\ndnl redundant.  We don't normally need to add -I/usr/local/include for gcc,\ndnl but old versions (and some misinstalled ones) need that.  To make things\ndnl worse, gcc 3.x may give error messages if -I/usr/local/include is added to\ndnl the include-path).\nAC_DEFUN([CF_ADD_INCDIR],\n[\nif test -n \"$1\" ; then\n  for cf_add_incdir in $1\n  do\n\twhile test \"$cf_add_incdir\" != /usr/include\n\tdo\n\t  if test -d \"$cf_add_incdir\"\n\t  then\n\t\tcf_have_incdir=no\n\t\tif test -n \"$CFLAGS$CPPFLAGS\" ; then\n\t\t  # a loop is needed to ensure we can add subdirs of existing dirs\n\t\t  for cf_test_incdir in $CFLAGS $CPPFLAGS ; do\n\t\t\tif test \".$cf_test_incdir\" = \".-I$cf_add_incdir\" ; then\n\t\t\t  cf_have_incdir=yes; break\n\t\t\tfi\n\t\t  done\n\t\tfi\n\n\t\tif test \"$cf_have_incdir\" = no ; then\n\t\t  if test \"$cf_add_incdir\" = /usr/local/include ; then\n\t\t\tif test \"$GCC\" = yes\n\t\t\tthen\n\t\t\t  cf_save_CPPFLAGS=$CPPFLAGS\n\t\t\t  CF_APPEND_TEXT(CPPFLAGS,-I$cf_add_incdir)\n\t\t\t  AC_TRY_COMPILE([#include <stdio.h>],\n\t\t\t\t  [printf(\"Hello\")],\n\t\t\t\t  [],\n\t\t\t\t  [cf_have_incdir=yes])\n\t\t\t  CPPFLAGS=$cf_save_CPPFLAGS\n\t\t\tfi\n\t\t  fi\n\t\tfi\n\n\t\tif test \"$cf_have_incdir\" = no ; then\n\t\t  CF_VERBOSE(adding $cf_add_incdir to include-path)\n\t\t  ifelse([$2],,CPPFLAGS,[$2])=\"$ifelse([$2],,CPPFLAGS,[$2]) -I$cf_add_incdir\"\n\n\t\t  cf_top_incdir=`echo \"$cf_add_incdir\" | sed -e 's%/include/.*$%/include%'`\n\t\t  test \"$cf_top_incdir\" = \"$cf_add_incdir\" && break\n\t\t  cf_add_incdir=\"$cf_top_incdir\"\n\t\telse\n\t\t  break\n\t\tfi\n\t  else\n\t\tbreak\n\t  fi\n\tdone\n  done\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_LIB version: 2 updated: 2010/06/02 05:03:05\ndnl ----------\ndnl Add a library, used to enforce consistency.\ndnl\ndnl $1 = library to add, without the \"-l\"\ndnl $2 = variable to update (default $LIBS)\nAC_DEFUN([CF_ADD_LIB],[CF_ADD_LIBS(-l$1,ifelse($2,,LIBS,[$2]))])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_LIBDIR version: 11 updated: 2020/12/31 20:19:42\ndnl -------------\ndnl\tAdds to the library-path\ndnl\ndnl\tSome machines have trouble with multiple -L options.\ndnl\ndnl $1 is the (list of) directory(s) to add\ndnl $2 is the optional name of the variable to update (default LDFLAGS)\ndnl\nAC_DEFUN([CF_ADD_LIBDIR],\n[\nif test -n \"$1\" ; then\n\tfor cf_add_libdir in $1\n\tdo\n\t\tif test \"$cf_add_libdir\" = /usr/lib ; then\n\t\t\t:\n\t\telif test -d \"$cf_add_libdir\"\n\t\tthen\n\t\t\tcf_have_libdir=no\n\t\t\tif test -n \"$LDFLAGS$LIBS\" ; then\n\t\t\t\t# a loop is needed to ensure we can add subdirs of existing dirs\n\t\t\t\tfor cf_test_libdir in $LDFLAGS $LIBS ; do\n\t\t\t\t\tif test \".$cf_test_libdir\" = \".-L$cf_add_libdir\" ; then\n\t\t\t\t\t\tcf_have_libdir=yes; break\n\t\t\t\t\tfi\n\t\t\t\tdone\n\t\t\tfi\n\t\t\tif test \"$cf_have_libdir\" = no ; then\n\t\t\t\tCF_VERBOSE(adding $cf_add_libdir to library-path)\n\t\t\t\tifelse([$2],,LDFLAGS,[$2])=\"-L$cf_add_libdir $ifelse([$2],,LDFLAGS,[$2])\"\n\t\t\tfi\n\t\tfi\n\tdone\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_LIBS version: 3 updated: 2019/11/02 16:47:33\ndnl -----------\ndnl Add one or more libraries, used to enforce consistency.  Libraries are\ndnl prepended to an existing list, since their dependencies are assumed to\ndnl already exist in the list.\ndnl\ndnl $1 = libraries to add, with the \"-l\", etc.\ndnl $2 = variable to update (default $LIBS)\nAC_DEFUN([CF_ADD_LIBS],[\ncf_add_libs=\"[$]ifelse($2,,LIBS,[$2])\"\n# reverse order\ncf_add_0lib=\nfor cf_add_1lib in $1; do cf_add_0lib=\"$cf_add_1lib $cf_add_0lib\"; done\n# filter duplicates\nfor cf_add_1lib in $cf_add_0lib; do\n\tfor cf_add_2lib in $cf_add_libs; do\n\t\tif test \"x$cf_add_1lib\" = \"x$cf_add_2lib\"; then\n\t\t\tcf_add_1lib=\n\t\t\tbreak\n\t\tfi\n\tdone\n\ttest -n \"$cf_add_1lib\" && cf_add_libs=\"$cf_add_1lib $cf_add_libs\"\ndone\nifelse($2,,LIBS,[$2])=\"$cf_add_libs\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ADD_SUBDIR_PATH version: 5 updated: 2020/12/31 20:19:42\ndnl ------------------\ndnl Append to a search-list for a nonstandard header/lib-file\ndnl\t$1 = the variable to return as result\ndnl\t$2 = the package name\ndnl\t$3 = the subdirectory, e.g., bin, include or lib\ndnl $4 = the directory under which we will test for subdirectories\ndnl $5 = a directory that we do not want $4 to match\nAC_DEFUN([CF_ADD_SUBDIR_PATH],\n[\ntest \"x$4\" != \"x$5\" && \\\ntest -d \"$4\" && \\\nifelse([$5],NONE,,[{ test -z \"$5\" || test \"x$5\" = xNONE || test \"x$4\" != \"x$5\"; } &&]) {\n\ttest -n \"$verbose\" && echo \"\t... testing for $3-directories under $4\"\n\ttest -d \"$4/$3\" &&          $1=\"[$]$1 $4/$3\"\n\ttest -d \"$4/$3/$2\" &&       $1=\"[$]$1 $4/$3/$2\"\n\ttest -d \"$4/$3/$2/$3\" &&    $1=\"[$]$1 $4/$3/$2/$3\"\n\ttest -d \"$4/$2/$3\" &&       $1=\"[$]$1 $4/$2/$3\"\n\ttest -d \"$4/$2/$3/$2\" &&    $1=\"[$]$1 $4/$2/$3/$2\"\n}\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_APPEND_CFLAGS version: 3 updated: 2021/09/05 17:25:40\ndnl ----------------\ndnl Use CF_ADD_CFLAGS after first checking for potential redefinitions.\ndnl $1 = flags to add\ndnl $2 = if given makes this macro verbose.\ndefine([CF_APPEND_CFLAGS],\n[\nfor cf_add_cflags in $1\ndo\n\tcase \"x$cf_add_cflags\" in\n\t(x-[[DU]]*)\n\t\tCF_REMOVE_CFLAGS($cf_add_cflags,CFLAGS,[$2])\n\t\tCF_REMOVE_CFLAGS($cf_add_cflags,CPPFLAGS,[$2])\n\t\t;;\n\tesac\n\tCF_ADD_CFLAGS([$cf_add_cflags],[$2])\ndone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_APPEND_TEXT version: 1 updated: 2017/02/25 18:58:55\ndnl --------------\ndnl use this macro for appending text without introducing an extra blank at\ndnl the beginning\ndefine([CF_APPEND_TEXT],\n[\n\ttest -n \"[$]$1\" && $1=\"[$]$1 \"\n\t$1=\"[$]{$1}$2\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ARG_DISABLE version: 3 updated: 1999/03/30 17:24:31\ndnl --------------\ndnl Allow user to disable a normally-on option.\nAC_DEFUN([CF_ARG_DISABLE],\n[CF_ARG_OPTION($1,[$2],[$3],[$4],yes)])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ARG_ENABLE version: 3 updated: 1999/03/30 17:24:31\ndnl -------------\ndnl Allow user to enable a normally-off option.\nAC_DEFUN([CF_ARG_ENABLE],\n[CF_ARG_OPTION($1,[$2],[$3],[$4],no)])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ARG_OPTION version: 5 updated: 2015/05/10 19:52:14\ndnl -------------\ndnl Restricted form of AC_ARG_ENABLE that ensures user doesn't give bogus\ndnl values.\ndnl\ndnl Parameters:\ndnl $1 = option name\ndnl $2 = help-string\ndnl $3 = action to perform if option is not default\ndnl $4 = action if perform if option is default\ndnl $5 = default option value (either 'yes' or 'no')\nAC_DEFUN([CF_ARG_OPTION],\n[AC_ARG_ENABLE([$1],[$2],[test \"$enableval\" != ifelse([$5],no,yes,no) && enableval=ifelse([$5],no,no,yes)\n\tif test \"$enableval\" != \"$5\" ; then\nifelse([$3],,[    :]dnl\n,[    $3]) ifelse([$4],,,[\n\telse\n\t\t$4])\n\tfi],[enableval=$5 ifelse([$4],,,[\n\t$4\n])dnl\n])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_AR_FLAGS version: 9 updated: 2021/01/01 13:31:04\ndnl -----------\ndnl Check for suitable \"ar\" (archiver) options for updating an archive.\ndnl\ndnl In particular, handle some obsolete cases where the \"-\" might be omitted,\ndnl as well as a workaround for breakage of make's archive rules by the GNU\ndnl binutils \"ar\" program.\nAC_DEFUN([CF_AR_FLAGS],[\nAC_REQUIRE([CF_PROG_AR])\n\nAC_CACHE_CHECK(for options to update archives, cf_cv_ar_flags,[\n\tcase \"$cf_cv_system_name\" in\n\t(*-msvc*)\n\t\tcf_cv_ar_flags=''\n\t\tcat >mk_static_lib.sh <<-EOF\n\t\t#!$SHELL\n\t\tMSVC_BIN=\"[$]AR\"\n\t\tout=\"\\[$]1\"\n\t\tshift\n\t\texec \\[$]MSVC_BIN -out:\"\\[$]out\" \\[$]@\n\t\tEOF\n\t\tchmod +x mk_static_lib.sh\n\t\tAR=`pwd`/mk_static_lib.sh\n\t\t;;\n\t(*)\n\t\tcf_cv_ar_flags=unknown\n\t\tfor cf_ar_flags in -curvU -curv curv -crv crv -cqv cqv -rv rv\n\t\tdo\n\n\t\t\t# check if $ARFLAGS already contains this choice\n\t\t\tif test \"x$ARFLAGS\" != \"x\" ; then\n\t\t\t\tcf_check_ar_flags=`echo \"x$ARFLAGS\" | sed -e \"s/$cf_ar_flags\\$//\" -e \"s/$cf_ar_flags / /\"`\n\t\t\t\tif test \"x$ARFLAGS\" != \"$cf_check_ar_flags\" ; then\n\t\t\t\t\tcf_cv_ar_flags=\n\t\t\t\t\tbreak\n\t\t\t\tfi\n\t\t\tfi\n\n\t\t\trm -f \"conftest.$ac_cv_objext\"\n\t\t\trm -f conftest.a\n\n\t\t\tcat >\"conftest.$ac_ext\" <<EOF\n#line __oline__ \"configure\"\nint\ttestdata[[3]] = { 123, 456, 789 };\nEOF\n\t\t\tif AC_TRY_EVAL(ac_compile) ; then\n\t\t\t\techo \"$AR $ARFLAGS $cf_ar_flags conftest.a conftest.$ac_cv_objext\" >&AC_FD_CC\n\t\t\t\t$AR $ARFLAGS \"$cf_ar_flags\" conftest.a \"conftest.$ac_cv_objext\" 2>&AC_FD_CC 1>/dev/null\n\t\t\t\tif test -f conftest.a ; then\n\t\t\t\t\tcf_cv_ar_flags=\"$cf_ar_flags\"\n\t\t\t\t\tbreak\n\t\t\t\tfi\n\t\t\telse\n\t\t\t\tCF_VERBOSE(cannot compile test-program)\n\t\t\t\tbreak\n\t\t\tfi\n\t\tdone\n\t\trm -f conftest.a \"conftest.$ac_ext\" \"conftest.$ac_cv_objext\"\n\t\t;;\n\tesac\n])\n\nif test -n \"$ARFLAGS\" ; then\n\tif test -n \"$cf_cv_ar_flags\" ; then\n\t\tARFLAGS=\"$ARFLAGS $cf_cv_ar_flags\"\n\tfi\nelse\n\tARFLAGS=$cf_cv_ar_flags\nfi\n\nAC_SUBST(ARFLAGS)\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_AWK_BIG_PRINTF version: 5 updated: 2015/04/17 21:13:04\ndnl -----------------\ndnl Check if awk can handle big strings using printf.  Some older versions of\ndnl awk choke on large strings passed via \"%s\".\ndnl\ndnl $1 = desired string size\ndnl $2 = variable to set with result\nAC_DEFUN([CF_AWK_BIG_PRINTF],\n[\n\tcase x$AWK in\n\t(x)\n\t\teval $2=no\n\t\t;;\n\t(*)\n\t\tif ( ${AWK} 'BEGIN { xx = \"x\"; while (length(xx) < $1) { xx = xx \"x\"; }; printf(\"%s\\n\", xx); }' 2>/dev/null \\\n\t\t\t| $AWK '{ printf \"%d\\n\", length([$]0); }' 2>/dev/null | $AWK 'BEGIN { eqls=0; recs=0; } { recs++; if ([$]0 == 12000) eqls++; } END { if (recs != 1 || eqls != 1) exit 1; }' 2>/dev/null >/dev/null ) ; then\n\t\t\teval $2=yes\n\t\telse\n\t\t\teval $2=no\n\t\tfi\n\t\t;;\n\tesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_BOOL_DECL version: 8 updated: 2004/01/30 15:51:18\ndnl ------------\ndnl Test if 'bool' is a builtin type in the configured C++ compiler.  Some\ndnl older compilers (e.g., gcc 2.5.8) don't support 'bool' directly; gcc\ndnl 2.6.3 does, in anticipation of the ANSI C++ standard.\ndnl\ndnl Treat the configuration-variable specially here, since we're directly\ndnl substituting its value (i.e., 1/0).\ndnl\ndnl $1 is the shell variable to store the result in, if not $cv_cv_builtin_bool\nAC_DEFUN([CF_BOOL_DECL],\n[\nAC_MSG_CHECKING(if we should include stdbool.h)\n\nAC_CACHE_VAL(cf_cv_header_stdbool_h,[\n\tAC_TRY_COMPILE([],[bool foo = false],\n\t\t[cf_cv_header_stdbool_h=0],\n\t\t[AC_TRY_COMPILE([\n#ifndef __BEOS__\n#include <stdbool.h>\n#endif\n],[bool foo = false],\n\t\t\t[cf_cv_header_stdbool_h=1],\n\t\t\t[cf_cv_header_stdbool_h=0])])])\n\nif test \"$cf_cv_header_stdbool_h\" = 1\nthen\tAC_MSG_RESULT(yes)\nelse\tAC_MSG_RESULT(no)\nfi\n\nAC_MSG_CHECKING([for builtin bool type])\n\nAC_CACHE_VAL(ifelse($1,,cf_cv_builtin_bool,[$1]),[\n\tAC_TRY_COMPILE([\n#include <stdio.h>\n#include <sys/types.h>\n],[bool x = false],\n\t\t[ifelse($1,,cf_cv_builtin_bool,[$1])=1],\n\t\t[ifelse($1,,cf_cv_builtin_bool,[$1])=0])\n\t])\n\nif test \"$ifelse($1,,cf_cv_builtin_bool,[$1])\" = 1\nthen\tAC_MSG_RESULT(yes)\nelse\tAC_MSG_RESULT(no)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_BOOL_SIZE version: 18 updated: 2021/09/04 06:35:04\ndnl ------------\ndnl Test for the size of 'bool' in the configured C++ compiler (e.g., a type).\ndnl Don't bother looking for bool.h, since it has been deprecated.\ndnl\ndnl If the current compiler is C rather than C++, we get the bool definition\ndnl from <stdbool.h>.\nAC_DEFUN([CF_BOOL_SIZE],\n[\nAC_CHECK_SIZEOF(bool,,[\n#include <stdlib.h>\n#include <stdio.h>\n\n#if defined(__cplusplus)\n\n#ifdef HAVE_GXX_BUILTIN_H\n#include <g++/builtin.h>\n#elif HAVE_GPP_BUILTIN_H\n#include <gpp/builtin.h>\n#elif HAVE_BUILTIN_H\n#include <builtin.h>\n#endif\n\n#else\n\n#if $cf_cv_header_stdbool_h\n#include <stdbool.h>\n#endif\n\n#endif\n])\n\nAC_CACHE_CHECK(for type of bool, cf_cv_type_of_bool,[\n\trm -f cf_test.out\n\tAC_TRY_RUN([\n#include <stdlib.h>\n#include <stdio.h>\n\n#if defined(__cplusplus)\n\n#ifdef HAVE_GXX_BUILTIN_H\n#include <g++/builtin.h>\n#elif HAVE_GPP_BUILTIN_H\n#include <gpp/builtin.h>\n#elif HAVE_BUILTIN_H\n#include <builtin.h>\n#endif\n\n#else\n\n#if $cf_cv_header_stdbool_h\n#include <stdbool.h>\n#endif\n\n#endif\n\nint main(void)\n{\n\tFILE *fp = fopen(\"cf_test.out\", \"w\");\n\tif (fp != 0) {\n\t\tbool x = true;\n\t\tif ((bool)(-x) >= 0)\n\t\t\tfputs(\"unsigned \", fp);\n\t\tif (sizeof(x) == sizeof(int))       fputs(\"int\",  fp);\n\t\telse if (sizeof(x) == sizeof(char)) fputs(\"char\", fp);\n\t\telse if (sizeof(x) == sizeof(short))fputs(\"short\",fp);\n\t\telse if (sizeof(x) == sizeof(long)) fputs(\"long\", fp);\n\t\tfclose(fp);\n\t}\n\t${cf_cv_main_return:-return}(0);\n}\n\t\t],\n\t\t[cf_cv_type_of_bool=`cat cf_test.out`\n\t\t if test -z \"$cf_cv_type_of_bool\"; then\n\t\t   cf_cv_type_of_bool=unknown\n\t\t fi],\n\t\t[cf_cv_type_of_bool=unknown],\n\t\t[\n\t\tcase x$ac_cv_sizeof_bool in\n\t\t(x1) cf_cv_type_of_bool=\"unsigned char\";;\n\t\t(x2) cf_cv_type_of_bool=\"unsigned short\";;\n\t\t(x4) cf_cv_type_of_bool=\"unsigned int\";;\n\t\t(x8) cf_cv_type_of_bool=\"unsigned long\";;\n\t\t(*)  cf_cv_type_of_bool=unknown;;\n\t\tesac\n\t\t])\n\trm -f cf_test.out\n])\n\nif test \"$cf_cv_type_of_bool\" = unknown ; then\n\tcase .$NCURSES_BOOL in\n\t(.auto|.) NCURSES_BOOL=unsigned;;\n\tesac\n\tAC_MSG_WARN(Assuming $NCURSES_BOOL for type of bool)\n\tcf_cv_type_of_bool=$NCURSES_BOOL\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_BUILD_CC version: 10 updated: 2022/09/24 16:36:41\ndnl -----------\ndnl If we're cross-compiling, allow the user to override the tools and their\ndnl options.  The configure script is oriented toward identifying the host\ndnl compiler, etc., but we need a build compiler to generate parts of the\ndnl source.\ndnl\ndnl $1 = default for $CPPFLAGS\ndnl $2 = default for $LIBS\nAC_DEFUN([CF_BUILD_CC],[\nCF_ACVERSION_CHECK(2.52,,\n\t[AC_REQUIRE([CF_PROG_EXT])])\nif test \"$cross_compiling\" = yes ; then\n\n\t# defaults that we might want to override\n\t: ${BUILD_CFLAGS:=''}\n\t: ${BUILD_CPPFLAGS:='ifelse([$1],,,[$1])'}\n\t: ${BUILD_LDFLAGS:=''}\n\t: ${BUILD_LIBS:='ifelse([$2],,,[$2])'}\n\t: ${BUILD_EXEEXT:='$x'}\n\t: ${BUILD_OBJEXT:='o'}\n\n\tAC_ARG_WITH(build-cc,\n\t\t[  --with-build-cc=XXX     the build C compiler ($BUILD_CC)],\n\t\t[BUILD_CC=\"$withval\"],\n\t\t[AC_CHECK_PROGS(BUILD_CC, [gcc clang c99 c89 cc cl],none)])\n\tAC_MSG_CHECKING(for native build C compiler)\n\tAC_MSG_RESULT($BUILD_CC)\n\n\tAC_MSG_CHECKING(for native build C preprocessor)\n\tAC_ARG_WITH(build-cpp,\n\t\t[  --with-build-cpp=XXX    the build C preprocessor ($BUILD_CPP)],\n\t\t[BUILD_CPP=\"$withval\"],\n\t\t[BUILD_CPP='${BUILD_CC} -E'])\n\tAC_MSG_RESULT($BUILD_CPP)\n\n\tAC_MSG_CHECKING(for native build C flags)\n\tAC_ARG_WITH(build-cflags,\n\t\t[  --with-build-cflags=XXX the build C compiler-flags ($BUILD_CFLAGS)],\n\t\t[BUILD_CFLAGS=\"$withval\"])\n\tAC_MSG_RESULT($BUILD_CFLAGS)\n\n\tAC_MSG_CHECKING(for native build C preprocessor-flags)\n\tAC_ARG_WITH(build-cppflags,\n\t\t[  --with-build-cppflags=XXX the build C preprocessor-flags ($BUILD_CPPFLAGS)],\n\t\t[BUILD_CPPFLAGS=\"$withval\"])\n\tAC_MSG_RESULT($BUILD_CPPFLAGS)\n\n\tAC_MSG_CHECKING(for native build linker-flags)\n\tAC_ARG_WITH(build-ldflags,\n\t\t[  --with-build-ldflags=XXX the build linker-flags ($BUILD_LDFLAGS)],\n\t\t[BUILD_LDFLAGS=\"$withval\"])\n\tAC_MSG_RESULT($BUILD_LDFLAGS)\n\n\tAC_MSG_CHECKING(for native build linker-libraries)\n\tAC_ARG_WITH(build-libs,\n\t\t[  --with-build-libs=XXX   the build libraries (${BUILD_LIBS})],\n\t\t[BUILD_LIBS=\"$withval\"])\n\tAC_MSG_RESULT($BUILD_LIBS)\n\n\t# this assumes we're on Unix.\n\tBUILD_EXEEXT=\n\tBUILD_OBJEXT=o\n\n\t: ${BUILD_CC:='${CC}'}\n\n\tAC_MSG_CHECKING(if the build-compiler \"$BUILD_CC\" works)\n\n\tcf_save_crossed=$cross_compiling\n\tcf_save_ac_link=$ac_link\n\tcross_compiling=no\n\tac_link='$BUILD_CC -o \"conftest$ac_exeext\" $BUILD_CFLAGS $BUILD_CPPFLAGS $BUILD_LDFLAGS \"conftest.$ac_ext\" $BUILD_LIBS >&AS_MESSAGE_LOG_FD'\n\n\tAC_TRY_RUN([#include <stdio.h>\n\t\tint main(int argc, char *argv[])\n\t\t{\n\t\t\t${cf_cv_main_return:-return}(argc < 0 || argv == 0 || argv[0] == 0);\n\t\t}\n\t],\n\t\tcf_ok_build_cc=yes,\n\t\tcf_ok_build_cc=no,\n\t\tcf_ok_build_cc=unknown)\n\n\tcross_compiling=$cf_save_crossed\n\tac_link=$cf_save_ac_link\n\n\tAC_MSG_RESULT($cf_ok_build_cc)\n\n\tif test \"$cf_ok_build_cc\" != yes\n\tthen\n\t\tAC_MSG_ERROR([Cross-build requires two compilers.\nUse --with-build-cc to specify the native compiler.])\n\tfi\n\nelse\n\t: ${BUILD_CC:='${CC}'}\n\t: ${BUILD_CPP:='${CPP}'}\n\t: ${BUILD_CFLAGS:='${CFLAGS}'}\n\t: ${BUILD_CPPFLAGS:='${CPPFLAGS}'}\n\t: ${BUILD_LDFLAGS:='${LDFLAGS}'}\n\t: ${BUILD_LIBS:='${LIBS}'}\n\t: ${BUILD_EXEEXT:='$x'}\n\t: ${BUILD_OBJEXT:='o'}\nfi\n\nAC_SUBST(BUILD_CC)\nAC_SUBST(BUILD_CPP)\nAC_SUBST(BUILD_CFLAGS)\nAC_SUBST(BUILD_CPPFLAGS)\nAC_SUBST(BUILD_LDFLAGS)\nAC_SUBST(BUILD_LIBS)\nAC_SUBST(BUILD_EXEEXT)\nAC_SUBST(BUILD_OBJEXT)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_C11_NORETURN version: 3 updated: 2021/03/28 11:36:23\ndnl ---------------\nAC_DEFUN([CF_C11_NORETURN],\n[\nAC_MSG_CHECKING(if you want to use C11 _Noreturn feature)\nCF_ARG_ENABLE(stdnoreturn,\n\t[  --enable-stdnoreturn    enable C11 _Noreturn feature for diagnostics],\n\t[enable_stdnoreturn=yes],\n\t[enable_stdnoreturn=no])\nAC_MSG_RESULT($enable_stdnoreturn)\n\nif test $enable_stdnoreturn = yes; then\nAC_CACHE_CHECK([for C11 _Noreturn feature], cf_cv_c11_noreturn,\n\t[AC_TRY_COMPILE([\n#include <stdio.h>\n#include <stdlib.h>\n#include <stdnoreturn.h>\nstatic _Noreturn void giveup(void) { exit(0); }\n\t],\n\t[if (feof(stdin)) giveup()],\n\tcf_cv_c11_noreturn=yes,\n\tcf_cv_c11_noreturn=no)\n\t])\nelse\n\tcf_cv_c11_noreturn=no,\nfi\n\nif test \"$cf_cv_c11_noreturn\" = yes; then\n\tAC_DEFINE(HAVE_STDNORETURN_H, 1,[Define if <stdnoreturn.h> header is available and working])\n\tAC_DEFINE_UNQUOTED(STDC_NORETURN,_Noreturn,[Define if C11 _Noreturn keyword is supported])\n\tHAVE_STDNORETURN_H=1\nelse\n\tHAVE_STDNORETURN_H=0\nfi\n\nAC_SUBST(HAVE_STDNORETURN_H)\nAC_SUBST(STDC_NORETURN)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CC_ENV_FLAGS version: 10 updated: 2020/12/31 18:40:20\ndnl ---------------\ndnl Check for user's environment-breakage by stuffing CFLAGS/CPPFLAGS content\ndnl into CC.  This will not help with broken scripts that wrap the compiler\ndnl with options, but eliminates a more common category of user confusion.\ndnl\ndnl In particular, it addresses the problem of being able to run the C\ndnl preprocessor in a consistent manner.\ndnl\ndnl Caveat: this also disallows blanks in the pathname for the compiler, but\ndnl the nuisance of having inconsistent settings for compiler and preprocessor\ndnl outweighs that limitation.\nAC_DEFUN([CF_CC_ENV_FLAGS],\n[\n# This should have been defined by AC_PROG_CC\n: \"${CC:=cc}\"\n\nAC_MSG_CHECKING(\\$CFLAGS variable)\ncase \"x$CFLAGS\" in\n(*-[[IUD]]*)\n\tAC_MSG_RESULT(broken)\n\tAC_MSG_WARN(your environment uses the CFLAGS variable to hold CPPFLAGS options)\n\tcf_flags=\"$CFLAGS\"\n\tCFLAGS=\n\tfor cf_arg in $cf_flags\n\tdo\n\t\tCF_ADD_CFLAGS($cf_arg)\n\tdone\n\t;;\n(*)\n\tAC_MSG_RESULT(ok)\n\t;;\nesac\n\nAC_MSG_CHECKING(\\$CC variable)\ncase \"$CC\" in\n(*[[\\ \\\t]]-*)\n\tAC_MSG_RESULT(broken)\n\tAC_MSG_WARN(your environment uses the CC variable to hold CFLAGS/CPPFLAGS options)\n\t# humor him...\n\tcf_prog=`echo \"$CC\" | sed -e 's/\t/ /g' -e 's/[[ ]]* / /g' -e 's/[[ ]]*[[ ]]-[[^ ]].*//'`\n\tcf_flags=`echo \"$CC\" | ${AWK:-awk} -v prog=\"$cf_prog\" '{ printf(\"%s\", [substr]([$]0,1+length(prog))); }'`\n\tCC=\"$cf_prog\"\n\tfor cf_arg in $cf_flags\n\tdo\n\t\tcase \"x$cf_arg\" in\n\t\t(x-[[IUDfgOW]]*)\n\t\t\tCF_ADD_CFLAGS($cf_arg)\n\t\t\t;;\n\t\t(*)\n\t\t\tCC=\"$CC $cf_arg\"\n\t\t\t;;\n\t\tesac\n\tdone\n\tCF_VERBOSE(resulting CC: '$CC')\n\tCF_VERBOSE(resulting CFLAGS: '$CFLAGS')\n\tCF_VERBOSE(resulting CPPFLAGS: '$CPPFLAGS')\n\t;;\n(*)\n\tAC_MSG_RESULT(ok)\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CFG_DEFAULTS version: 16 updated: 2021/01/04 19:33:05\ndnl ---------------\ndnl Determine the default configuration into which we'll install ncurses.  This\ndnl can be overridden by the user's command-line options.  There's two items to\ndnl look for:\ndnl\t1. the prefix (e.g., /usr)\ndnl\t2. the header files (e.g., /usr/include/ncurses)\ndnl We'll look for a previous installation of ncurses and use the same defaults.\ndnl\ndnl We don't use AC_PREFIX_DEFAULT, because it gets evaluated too soon, and\ndnl we don't use AC_PREFIX_PROGRAM, because we cannot distinguish ncurses's\ndnl programs from a vendor's.\nAC_DEFUN([CF_CFG_DEFAULTS],\n[AC_REQUIRE([AC_PROG_FGREP])dnl\n\nAC_MSG_CHECKING(for prefix)\nif test \"x$prefix\" = \"xNONE\" ; then\n\tcase \"$cf_cv_system_name\" in\n\t\t# non-vendor systems don't have a conflict\n\t(openbsd*|freebsd*|mirbsd*|linux*|cygwin*|msys*|k*bsd*-gnu|mingw*)\n\t\tprefix=/usr\n\t\t;;\n\t(*)\tprefix=$ac_default_prefix\n\t\t;;\n\tesac\nfi\nAC_MSG_RESULT($prefix)\n\nif test \"x$prefix\" = \"xNONE\" ; then\nAC_MSG_CHECKING(for default include-directory)\ntest -n \"$verbose\" && echo 1>&AC_FD_MSG\nfor cf_symbol in \\\n\t\"$includedir\" \\\n\t\"$includedir/ncurses\" \\\n\t\"$prefix/include\" \\\n\t\"$prefix/include/ncurses\" \\\n\t/usr/local/include \\\n\t/usr/local/include/ncurses \\\n\t/usr/include \\\n\t/usr/include/ncurses\ndo\n\tcf_dir=`eval echo \"$cf_symbol\"`\n\tif test -f \"$cf_dir/curses.h\" ; then\n\tif ( ${FGREP-fgrep} NCURSES_VERSION \"$cf_dir/curses.h\" >/dev/null 2>&1 ) ; then\n\t\tincludedir=\"$cf_symbol\"\n\t\ttest -n \"$verbose\"  && echo $ECHO_N \"\tfound \" 1>&AC_FD_MSG\n\t\tbreak\n\tfi\n\tfi\n\ttest -n \"$verbose\"  && echo \"\ttested $cf_dir\" 1>&AC_FD_MSG\ndone\nAC_MSG_RESULT($includedir)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CGETENT version: 6 updated: 2017/01/21 11:06:25\ndnl ----------\ndnl Check if the terminal-capability database functions are available.  If not,\ndnl ncurses has a much-reduced version.\nAC_DEFUN([CF_CGETENT],[\nAC_CACHE_CHECK(for terminal-capability database functions,cf_cv_cgetent,[\nAC_TRY_LINK([\n#include <stdlib.h>],[\n\tchar temp[128];\n\tchar *buf = temp;\n\tchar *db_array = temp;\n\tcgetent(&buf, &db_array, \"vt100\");\n\tcgetcap(buf, \"tc\", '=');\n\tcgetmatch(buf, \"tc\");\n\t],\n\t[cf_cv_cgetent=yes],\n\t[cf_cv_cgetent=no])\n])\n\nif test \"$cf_cv_cgetent\" = yes\nthen\n\tAC_DEFINE(HAVE_BSD_CGETENT,1,[Define to 1 if we have BSD cgetent])\nAC_CACHE_CHECK(if cgetent uses const parameter,cf_cv_cgetent_const,[\nAC_TRY_LINK([\n#pragma GCC diagnostic error \"-Wincompatible-pointer-types-discards-qualifiers\"\n#include <stdlib.h>],[\n\tchar temp[128];\n\tchar *buf = temp;\n#ifndef _NETBSD_SOURCE\t\t\t/* given, since April 2004 in stdlib.h */\n\tconst char *db_array = temp;\n\tcgetent(&buf, &db_array, \"vt100\");\n#endif\n\tcgetcap(buf, \"tc\", '=');\n\tcgetmatch(buf, \"tc\");\n\t],\n\t[cf_cv_cgetent_const=yes],\n\t[cf_cv_cgetent_const=no])\n])\n\tif test \"$cf_cv_cgetent_const\" = yes\n\tthen\n\t\tAC_DEFINE_UNQUOTED(CGETENT_CONST,const,[Define to const if needed for some BSD cgetent variations])\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_CACHE version: 13 updated: 2020/12/31 10:54:15\ndnl --------------\ndnl Check if we're accidentally using a cache from a different machine.\ndnl Derive the system name, as a check for reusing the autoconf cache.\ndnl\ndnl If we've packaged config.guess and config.sub, run that (since it does a\ndnl better job than uname).  Normally we'll use AC_CANONICAL_HOST, but allow\ndnl an extra parameter that we may override, e.g., for AC_CANONICAL_SYSTEM\ndnl which is useful in cross-compiles.\ndnl\ndnl Note: we would use $ac_config_sub, but that is one of the places where\ndnl autoconf 2.5x broke compatibility with autoconf 2.13\nAC_DEFUN([CF_CHECK_CACHE],\n[\nif test -f \"$srcdir/config.guess\" || test -f \"$ac_aux_dir/config.guess\" ; then\n\tifelse([$1],,[AC_CANONICAL_HOST],[$1])\n\tsystem_name=\"$host_os\"\nelse\n\tsystem_name=\"`(uname -s -r) 2>/dev/null`\"\n\tif test -z \"$system_name\" ; then\n\t\tsystem_name=\"`(hostname) 2>/dev/null`\"\n\tfi\nfi\ntest -n \"$system_name\" && AC_DEFINE_UNQUOTED(SYSTEM_NAME,\"$system_name\",[Define to the system name.])\nAC_CACHE_VAL(cf_cv_system_name,[cf_cv_system_name=\"$system_name\"])\n\ntest -z \"$system_name\" && system_name=\"$cf_cv_system_name\"\ntest -n \"$cf_cv_system_name\" && AC_MSG_RESULT(Configuring for $cf_cv_system_name)\n\nif test \".$system_name\" != \".$cf_cv_system_name\" ; then\n\tAC_MSG_RESULT(Cached system name ($system_name) does not agree with actual ($cf_cv_system_name))\n\tAC_MSG_ERROR(\"Please remove config.cache and try again.\")\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_ENVIRON version: 3 updated: 2010/05/26 16:44:57\ndnl ----------------\ndnl Check for data that is usually declared in <unistd.h>, e.g., the 'environ'\ndnl variable.  Define a DECL_xxx symbol if we must declare it ourselves.\ndnl\ndnl $1 = the name to check\ndnl $2 = the assumed type\nAC_DEFUN([CF_CHECK_ENVIRON],\n[\nAC_CACHE_CHECK(if external $1 is declared, cf_cv_dcl_$1,[\n    AC_TRY_COMPILE([\n#ifdef HAVE_STDLIB_H\n#include <stdlib.h>\n#endif\n#include <unistd.h> ],\n    ifelse([$2],,int,[$2]) x = (ifelse([$2],,int,[$2])) $1,\n    [cf_cv_dcl_$1=yes],\n    [cf_cv_dcl_$1=no])\n])\n\nif test \"$cf_cv_dcl_$1\" = no ; then\n    CF_UPPER(cf_result,decl_$1)\n    AC_DEFINE_UNQUOTED($cf_result)\nfi\n\n# It's possible (for near-UNIX clones) that the data doesn't exist\nCF_CHECK_EXTERN_DATA($1,ifelse([$2],,int,[$2]))\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_ERRNO version: 13 updated: 2020/03/10 18:53:47\ndnl --------------\ndnl Check for data that is usually declared in <stdio.h> or <errno.h>, e.g.,\ndnl the 'errno' variable.  Define a DECL_xxx symbol if we must declare it\ndnl ourselves.\ndnl\ndnl $1 = the name to check\ndnl $2 = the assumed type\nAC_DEFUN([CF_CHECK_ERRNO],\n[\nAC_CACHE_CHECK(if external $1 is declared, cf_cv_dcl_$1,[\n\tAC_TRY_COMPILE([\n#ifdef HAVE_STDLIB_H\n#include <stdlib.h>\n#endif\n#include <stdio.h>\n#include <sys/types.h>\n#include <errno.h> ],\n\tifelse([$2],,int,[$2]) x = (ifelse([$2],,int,[$2])) $1; (void)x,\n\t[cf_cv_dcl_$1=yes],\n\t[cf_cv_dcl_$1=no])\n])\n\nif test \"$cf_cv_dcl_$1\" = no ; then\n\tCF_UPPER(cf_result,decl_$1)\n\tAC_DEFINE_UNQUOTED($cf_result)\nfi\n\n# It's possible (for near-UNIX clones) that the data doesn't exist\nCF_CHECK_EXTERN_DATA($1,ifelse([$2],,int,[$2]))\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_EXTERN_DATA version: 5 updated: 2021/09/04 06:35:04\ndnl --------------------\ndnl Check for existence of external data in the current set of libraries.  If\ndnl we can modify it, it is real enough.\ndnl $1 = the name to check\ndnl $2 = its type\nAC_DEFUN([CF_CHECK_EXTERN_DATA],\n[\nAC_CACHE_CHECK(if external $1 exists, cf_cv_have_$1,[\n\tAC_TRY_LINK([\n#undef $1\nextern $2 $1;\n],\n\t[$1 = 2],\n\t[cf_cv_have_$1=yes],\n\t[cf_cv_have_$1=no])\n])\n\nif test \"$cf_cv_have_$1\" = yes ; then\n\tCF_UPPER(cf_result,have_$1)\n\tAC_DEFINE_UNQUOTED($cf_result)\nfi\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_FVISIBILITY version: 2 updated: 2020/04/04 16:16:13\ndnl --------------------\ndnl Check whether the compiler understands -fvisibility=hidden\ndnl\ndnl $1 = compiler\ndnl $2 = compiler-flags variable name\ndnl $3 = cache variable to set\nAC_DEFUN([CF_CHECK_FVISIBILITY],[\nAC_CACHE_CHECK(if $1 -fvisibility=hidden option works,$3,[\n    cf_save_cflags=\"[$]$2\"\n    $2=\"[$]$2 -fvisibility=hidden\"\n    AC_TRY_LINK([\n__attribute__ ((visibility(\"default\"))) int somefunc() {return 42;}\n\t],[\n\tif (somefunc()) return 1;\n],\n    [$3=yes],\n    [$3=no])\n    $2=$cf_save_cflags\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_GETENV version: 2 updated: 2021/01/02 17:09:14\ndnl ---------------\ndnl Check if repeated getenv calls return the same pointer, e.g., it does not\ndnl discard the previous pointer when returning a new one.\nAC_DEFUN([CF_CHECK_GETENV],\n[\nAC_REQUIRE([CF_CHECK_ENVIRON])\nAC_CHECK_FUNC( getenv, ,, AC_MSG_ERROR(getenv not found) )\nAC_CHECK_FUNCS( putenv setenv strdup )\nAC_CACHE_CHECK(if getenv returns consistent values,cf_cv_consistent_getenv,[\nAC_TRY_RUN([\n#include <stdlib.h>\n#include <unistd.h>\n#include <stdio.h>\n#include <string.h>\n#include <sys/types.h>\n\n#if defined(HAVE_ENVIRON) && defined(DECL_ENVIRON) && !defined(environ)\nextern char **environ;\t/* POSIX, but some systems are not... */\n#endif\n\n#if defined(HAVE_STRDUP)\n#define str_alloc(s) strdup(s)\n#else\n#define str_alloc(s) strcpy(malloc(strlen(s) + 1, s))\n#endif\n\nstatic void set_value(const char *name, const char *value)\n{\n#if defined(HAVE_SETENV)\n\tsetenv(name, value, 1);\n#elif defined(HAVE_PUTENV)\n\tchar buffer[1024];\n\tsprintf(buffer, \"%s=%s\", name, value);\n\tputenv(str_alloc(buffer));\n#else\n#error neither putenv/setenv found\n#endif\n}\nint main(void)\n{\n\tint pass;\n\tsize_t numenv, limit, j;\n\tchar **mynames;\n\tchar **myvalues;\n\tchar **mypointer;\n\tchar *equals;\n\tfor (numenv = 0; environ[numenv]; ++numenv) ;\n\tlimit = numenv + 10;\n\tmynames = (char **) calloc(limit + 1, sizeof(char *));\n\tmyvalues = (char **) calloc(limit + 1, sizeof(char *));\n\tmypointer = (char **) calloc(limit + 1, sizeof(char *));\n#if defined(HAVE_ENVIRON)\n\tfor (j = 0; environ[j]; ++j) {\n\t\tmynames[j] = str_alloc(environ[j]);\n\t\tequals = strchr(mynames[j], '=');\n\t\tif (equals != 0) {\n\t\t\t*equals++ = '\\\\0';\n\t\t\tmyvalues[j] = str_alloc(equals);\n\t\t} else {\n\t\t\tmyvalues[j] = str_alloc(\"\");\n\t\t}\n\t}\n#endif\n\tfor (j = numenv; j < limit; ++j) {\n\t\tchar name[80];\n\t\tchar value[80];\n\t\tsize_t found;\n\t\tsize_t k = 0;\n\t\tdo {\n\t\t\tsize_t jk;\n\t\t\tfound = 0;\n\t\t\tsprintf(name, \"TERM%lu\", (unsigned long) k);\n\t\t\tfor (jk = 0; jk < j; ++jk) {\n\t\t\t\tif (!strcmp(name, mynames[jk])) {\n\t\t\t\t\tfound = 1;\n\t\t\t\t\t++k;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} while (found);\n\t\tsprintf(value, \"%lu:%p\", (unsigned long) k, &mynames[j]);\n\t\tset_value(name, value);\n\t\tmynames[j] = str_alloc(name);\n\t\tmyvalues[j] = str_alloc(value);\n\t}\n\tfor (pass = 0; pass < 3; ++pass) {\n\t\tfor (j = 0; j < limit; ++j) {\n\t\t\tchar *value = getenv(mynames[j]);\n\t\t\tif (pass) {\n\t\t\t\tif (value == 0) {\n\t\t\t\t\tfprintf(stderr, \"getenv returned null for %s\\\\n\", mynames[j]);\n\t\t\t\t\t${cf_cv_main_return:-return}(1);\n\t\t\t\t} else if (value != mypointer[j]) {\n\t\t\t\t\tfprintf(stderr, \"getenv returned different pointer for %s\\\\n\", mynames[j]);\n\t\t\t\t\t${cf_cv_main_return:-return}(1);\n\t\t\t\t} else if (strcmp(value, myvalues[j])) {\n\t\t\t\t\tfprintf(stderr, \"getenv returned different value for %s\\\\n\", mynames[j]);\n\t\t\t\t\t${cf_cv_main_return:-return}(1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsize_t k;\n\t\t\t\tmypointer[j] = value;\n\t\t\t\tfor (k = 0; k < j; ++k) {\n\t\t\t\t\tif (mypointer[j] == mypointer[k]) {\n\t\t\t\t\t\tfprintf(stderr, \"getenv returned same pointer for %s and %s\\\\n\", mynames[j], mynames[k]);\n\t\t\t\t\t\t${cf_cv_main_return:-return}(1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t${cf_cv_main_return:-return}(0);\n}\n],\n[cf_cv_consistent_getenv=yes],\n[cf_cv_consistent_getenv=no],\n[cf_cv_consistent_getenv=unknown])\n])\n\nif test \"x$cf_cv_consistent_getenv\" = xno\nthen\n\tAC_DEFINE(HAVE_CONSISTENT_GETENV,1,[Define to 1 if getenv repeatably returns the same value for a given name])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_GNAT_VERSION version: 4 updated: 2021/01/01 13:31:04\ndnl ---------------------\nAC_DEFUN([CF_CHECK_GNAT_VERSION],\n[\nAC_REQUIRE([CF_GNAT_VERSION])\ncase \"$cf_cv_gnat_version\" in\n(3.1[[1-9]]*|3.[[2-9]]*|[[4-9]].*|[[1-9]][[0-9]].[[0-9]]*|20[[0-9]][[0-9]])\n\tcf_cv_prog_gnat_correct=yes\n\t;;\n(*)\n\tAC_MSG_WARN(Unsupported GNAT version $cf_cv_gnat_version. We require 3.11 or better. Disabling Ada95 binding.)\n\tcf_cv_prog_gnat_correct=no\n\t;;\nesac\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_GPM_WGETCH version: 6 updated: 2021/01/04 18:48:01\ndnl -------------------\ndnl Check if GPM is already linked with curses.  If so - and if the linkage\ndnl is not \"weak\" - warn about this because it can create problems linking\ndnl applications with ncurses.\nAC_DEFUN([CF_CHECK_GPM_WGETCH],[\nAC_REQUIRE([AC_PROG_EGREP])dnl\n\nAC_CHECK_LIB(gpm,Gpm_Wgetch,[\n\nAC_CACHE_CHECK(if GPM is weakly bound to curses library, cf_cv_check_gpm_wgetch,[\ncf_cv_check_gpm_wgetch=unknown\nif test \"$cross_compiling\" != yes ; then\n\ncat >conftest.$ac_ext <<CF_EOF\n#include <gpm.h>\nint main(void)\n{\n\tGpm_Wgetch();\n\t${cf_cv_main_return:-return}(0);\n}\nCF_EOF\n\n\tcf_save_LIBS=\"$LIBS\"\n\t# This only works if we can look at the symbol table.  If a shared\n\t# library is stripped for install, we cannot use that.  So we're forced\n\t# to rely on the static library, noting that some packagers may not\n\t# include it.\n\tLIBS=\"-static -lgpm -dynamic $LIBS\"\n\tif AC_TRY_EVAL(ac_compile) ; then\n\t\tif AC_TRY_EVAL(ac_link) ; then\n\t\t\tcf_cv_check_gpm_wgetch=\"`nm \\\"conftest$ac_exeext\\\" | ${EGREP-egrep} '\\<wgetch\\>' | ${EGREP-egrep} '\\<[[vVwW]]\\>'`\"\n\t\t\ttest -n \"$cf_cv_check_gpm_wgetch\" && cf_cv_check_gpm_wgetch=yes\n\t\t\ttest -z \"$cf_cv_check_gpm_wgetch\" && cf_cv_check_gpm_wgetch=no\n\t\tfi\n\tfi\n\trm -rf ./conftest*\n\tLIBS=\"$cf_save_LIBS\"\nfi\n])\n\nif test \"$cf_cv_check_gpm_wgetch\" != yes ; then\n\tAC_MSG_WARN(GPM library is already linked with curses - read the FAQ)\nfi\n])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_LIBSSP version: 1 updated: 2021/10/30 10:40:19\ndnl ---------------\ndnl Check if libssp is needed, e.g., to work around misconfigured libraries\ndnl used in cross-compiling to MinGW.\nAC_DEFUN([CF_CHECK_LIBSSP],[\nAC_CACHE_CHECK(if ssp library is needed,cf_cv_need_libssp,[\nAC_TRY_LINK([\n#include <sys/types.h>\n#include <dirent.h>\n],[\n       DIR *dp = opendir(\".\");\n],cf_cv_need_libssp=no,[\n\tcf_save_LIBS=\"$LIBS\"\n\tLIBS=\"$LIBS -lssp\"\n\tAC_TRY_LINK([\n#include <sys/types.h>\n#include <dirent.h>\n\t],[\n\t\t   DIR *dp = opendir(\".\");\n\t],cf_cv_need_libssp=yes,\n\t  cf_cv_need_libssp=maybe)\n\tLIBS=\"$cf_save_LIBS\"\n])dnl\n])\n\nif test \"x$cf_cv_need_libssp\" = xyes\nthen\n\tCF_ADD_LIB(ssp)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_LIBTOOL_VERSION version: 2 updated: 2021/05/01 16:24:34\ndnl ------------------------\ndnl Show the version of libtool\ndnl\ndnl Save the version in a cache variable - this is not entirely a good thing,\ndnl but the version string from libtool is very ugly, and for bug reports it\ndnl might be useful to have the original string.\ndnl\ndnl There is an imitation in OpenBSD, which has no apparent use other than to\ndnl deny that it is GNU libtool.  Just ignore it.\nAC_DEFUN([CF_CHECK_LIBTOOL_VERSION],[\nif test -n \"$LIBTOOL\" && test \"$LIBTOOL\" != none\nthen\n\tAC_MSG_CHECKING(version of $LIBTOOL)\n\tCF_LIBTOOL_VERSION\n\tAC_MSG_RESULT($cf_cv_libtool_version)\n\tif test -n \"$cf_cv_libtool_version\"\n\tthen\n\t\tcf_check_libtool_version=`$LIBTOOL --version 2>&1 | sed -e '/^$/d' -e 's,[[()]],...,g' -e 's,[[ ]],-,g' -e '2,$d'`\n\t\tcase \"x$cf_check_libtool_version\" in\n\t\t(*...GNU-libtool...*)\n\t\t\t;;\n\t\t(*)\n\t\t\tAC_MSG_ERROR(This is not GNU libtool)\n\t\t\t;;\n\t\tesac\n\telse\n\t\tAC_MSG_ERROR(No version found for $LIBTOOL)\n\tfi\nelse\n\tAC_MSG_ERROR(GNU libtool has not been found)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_WCHAR_H version: 3 updated: 2021/01/01 13:31:04\ndnl ----------------\ndnl Check if wchar.h can be used, i.e., without defining _XOPEN_SOURCE_EXTENDED\nAC_DEFUN([CF_CHECK_WCHAR_H],[\nAC_CHECK_HEADERS( \\\nwchar.h \\\nwctype.h \\\n)\nAC_CACHE_CHECK(if wchar.h can be used as is,cf_cv_wchar_h_okay,[\nAC_TRY_COMPILE(\n[\n#include <stdlib.h>\n#ifdef HAVE_WCHAR_H\n#include <wchar.h>\n#endif\n#ifdef HAVE_WCTYPE_H\n#include <wctype.h>\n#endif\n],[\n\twint_t foo = 0;\n\tint bar = iswpunct(foo)],\n\t[cf_cv_wchar_h_okay=yes],\n\t[cf_cv_wchar_h_okay=no])])\n\nif test \"$cf_cv_wchar_h_okay\" = no\nthen\n\tCF_PREDEFINE(_XOPEN_SOURCE_EXTENDED)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CHECK_WCWIDTH_GRAPHICS version: 2 updated: 2021/01/02 17:09:14\ndnl -------------------------\ndnl Most \"modern\" terminal emulators are based to some degree on VT100, and\ndnl should support line-drawing.  Even with Unicode.  There is a problem.\ndnl\ndnl While most of the VT100 graphics characters were incorporated into Unicode,\ndnl all of those were combined into a page of useful graphics characters.\ndnl\ndnl So far, so good.\ndnl\ndnl However, while they are useful, there are other considerations.  CJK\ndnl is (because of poor device resolution) often rendered as double-width\ndnl characters.  So... for these generally-useful characters, what should\ndnl be the width (to make them consistent with adjacent characters)?\ndnl\ndnl The obvious choice would have been to make this locale-dependent, and use\ndnl wcwidth() to tell applications what the actual width is.  That was too\ndnl obvious.  Instead, we have a slew of \"ambiguous-width\" characters.\ndnl See for example\ndnl\t\thttp://www.unicode.org/reports/tr11/tr11-29.html\ndnl\t\thttp://www.cl.cam.ac.uk/~mgk25/ucs/scw-proposal.html\ndnl\ndnl The EastAsianWidth-6.2.0.txt file from the Unicode organization lists\ndnl more than 22,000 characters, with 1281 of those as ambiguous-width.  For\ndnl instance, it lists half (44/96) of the Latin-1 characters as\ndnl ambiguous-width.  Also, all of the box-characters at 0x2500 are ambiguous.\ndnl\ndnl What this means for the implementor is that on some systems wcwidth() can\ndnl give bad advice.  On Solaris, some of the ambiguous widths are returned as\ndnl 1 (the Latin-1 characters), while others are returned as 2 (line-drawing\ndnl characters).  These do not necessarily match the behavior of the terminal\ndnl emulator.  xterm, for instance, does an optional startup check to find if\ndnl this problem (or similar) exists with the system's locale tables, rejecting\ndnl them if they are too unreliable.\nAC_DEFUN([CF_CHECK_WCWIDTH_GRAPHICS],[\nAC_CACHE_CHECK(if wcwidth agrees graphics are single-width, cf_cv_wcwidth_graphics,[\ncat >conftest.in <<CF_EOF\n-\tVT100 symbols\n0x250c\tupper left corner\n0x2514\tlower left corner\n0x2510\tupper right corner\n0x2518\tlower right corner\n0x251c\ttee pointing left\n0x2524\ttee pointing right\n0x2534\ttee pointing up\n0x252c\ttee pointing down\n0x2500\thorizontal line\n0x2502\tvertical line\n0x253c\tlarge plus or crossover\n0x23ba\tscan line 1\n0x23bd\tscan line 9\n0x25c6\tdiamond\n0x2592\tchecker board (stipple)\n0x00b0\tdegree symbol\n0x00b1\tplus/minus\n0x00b7\tbullet\n-\tTeletype 5410v1 symbols\n0x2190\tarrow pointing left\n0x2192\tarrow pointing right\n0x2193\tarrow pointing down\n0x2191\tarrow pointing up\n0x2592\tboard of squares\n0x2603\tlantern symbol\n0x25ae\tsolid square block\n-\tthese defaults were invented for ncurses\n0x23bb\tscan line 3\n0x23bc\tscan line 7\n0x2264\tless-than-or-equal-to\n0x2265\tgreater-than-or-equal-to\n0x03c0\tgreek pi\n0x2260\tnot-equal\n0x00a3\tpound-sterling symbol\n-\tthick-line-drawing\n0x250f\tupper left corner\n0x2517\tlower left corner\n0x2513\tupper right corner\n0x251b\tlower right corner\n0x2523\ttee pointing left\n0x252b\ttee pointing right\n0x253b\ttee pointing up\n0x2533\ttee pointing down\n0x2501\thorizontal line\n0x2503\tvertical line\n0x254b\tlarge plus or crossover\n-\tdouble-line-drawing\n0x2554\tupper left corner\n0x255a\tlower left corner\n0x2557\tupper right corner\n0x255d\tlower right corner\n0x2563\ttee pointing left\n0x2560\ttee pointing right\n0x2569\ttee pointing up\n0x2566\ttee pointing down\n0x2550\thorizontal line\n0x2551\tvertical line\n0x256c\tlarge plus or crossover\nCF_EOF\nAC_TRY_RUN([\n#include <locale.h>\n#include <stdio.h>\n#include <wchar.h>\n\n#define MY_LEN 80\n\nint\nmain(void)\n{\n\tFILE *fp;\n\tint value;\n\tchar buffer[MY_LEN + 1];\n\tchar notes[MY_LEN + 1];\n\tint totals = 0;\n\tint passed = 0;\n\n\tif (setlocale(LC_ALL, \"en_US.UTF8\") ||\n\t\tsetlocale(LC_ALL, \"en_US.UTF-8\") ||\n\t\tsetlocale(LC_ALL, \"en_US.utf8\") ||\n\t\tsetlocale(LC_ALL, \"en_US.utf-8\")) {\n\t\tif ((fp = fopen(\"conftest.in\", \"r\")) != 0) {\n\t\t\twhile (fgets(buffer, MY_LEN, fp) != 0) {\n\t\t\t\tif (*buffer == '-') {\n\t\t\t\t\tfprintf(stderr, \"\\\\t%s\", buffer);\n\t\t\t\t} else if (sscanf(buffer, \"%x %s\", &value, notes) == 2) {\n\t\t\t\t\t++totals;\n\t\t\t\t\tif (wcwidth(value) == 1)\n\t\t\t\t\t\t++passed;\n\t\t\t\t\tfprintf(stderr, \"%d\\\\t%s\", wcwidth(value), buffer);\n\t\t\t\t} else {\n\t\t\t\t\tfprintf(stderr, \"?\\\\t%s\", buffer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfprintf(stderr, \"%d/%d passed wcwidth/graphics check\\\\n\", passed, totals);\n\treturn (totals == passed) ? 0 : 1;\n}\n],\n[cf_cv_wcwidth_graphics=yes],\n[cf_cv_wcwidth_graphics=no],\n[cf_cv_wcwidth_graphics=unknown])\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CLANG_COMPILER version: 8 updated: 2021/01/01 13:31:04\ndnl -----------------\ndnl Check if the given compiler is really clang.  clang's C driver defines\ndnl __GNUC__ (fooling the configure script into setting $GCC to yes) but does\ndnl not ignore some gcc options.\ndnl\ndnl This macro should be run \"soon\" after AC_PROG_CC or AC_PROG_CPLUSPLUS, to\ndnl ensure that it is not mistaken for gcc/g++.  It is normally invoked from\ndnl the wrappers for gcc and g++ warnings.\ndnl\ndnl $1 = GCC (default) or GXX\ndnl $2 = CLANG_COMPILER (default)\ndnl $3 = CFLAGS (default) or CXXFLAGS\nAC_DEFUN([CF_CLANG_COMPILER],[\nifelse([$2],,CLANG_COMPILER,[$2])=no\n\nif test \"$ifelse([$1],,[$1],GCC)\" = yes ; then\n\tAC_MSG_CHECKING(if this is really Clang ifelse([$1],GXX,C++,C) compiler)\n\tcf_save_CFLAGS=\"$ifelse([$3],,CFLAGS,[$3])\"\n\tAC_TRY_COMPILE([],[\n#ifdef __clang__\n#else\nmake an error\n#endif\n],[ifelse([$2],,CLANG_COMPILER,[$2])=yes\n],[])\n\tifelse([$3],,CFLAGS,[$3])=\"$cf_save_CFLAGS\"\n\tAC_MSG_RESULT($ifelse([$2],,CLANG_COMPILER,[$2]))\nfi\n\nCLANG_VERSION=none\n\nif test \"x$ifelse([$2],,CLANG_COMPILER,[$2])\" = \"xyes\" ; then\n\tcase \"$CC\" in\n\t(c[[1-9]][[0-9]]|*/c[[1-9]][[0-9]])\n\t\tAC_MSG_WARN(replacing broken compiler alias $CC)\n\t\tCFLAGS=\"$CFLAGS -std=`echo \"$CC\" | sed -e 's%.*/%%'`\"\n\t\tCC=clang\n\t\t;;\n\tesac\n\n\tAC_MSG_CHECKING(version of $CC)\n\tCLANG_VERSION=\"`$CC --version 2>/dev/null | sed -e '2,$d' -e 's/^.*(CLANG[[^)]]*) //' -e 's/^.*(Debian[[^)]]*) //' -e 's/^[[^0-9.]]*//' -e 's/[[^0-9.]].*//'`\"\n\ttest -z \"$CLANG_VERSION\" && CLANG_VERSION=unknown\n\tAC_MSG_RESULT($CLANG_VERSION)\n\n\tfor cf_clang_opt in \\\n\t\t-Qunused-arguments \\\n\t\t-Wno-error=implicit-function-declaration\n\tdo\n\t\tAC_MSG_CHECKING(if option $cf_clang_opt works)\n\t\tcf_save_CFLAGS=\"$CFLAGS\"\n\t\tCFLAGS=\"$CFLAGS $cf_clang_opt\"\n\t\tAC_TRY_LINK([\n\t\t\t#include <stdio.h>],[\n\t\t\tprintf(\"hello!\\\\n\");],[\n\t\t\tcf_clang_optok=yes],[\n\t\t\tcf_clang_optok=no])\n\t\tAC_MSG_RESULT($cf_clang_optok)\n\t\tCFLAGS=\"$cf_save_CFLAGS\"\n\t\tif test \"$cf_clang_optok\" = yes; then\n\t\t\tCF_VERBOSE(adding option $cf_clang_opt)\n\t\t\tCF_APPEND_TEXT(CFLAGS,$cf_clang_opt)\n\t\tfi\n\tdone\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_CONST_X_STRING version: 7 updated: 2021/06/07 17:39:17\ndnl -----------------\ndnl The X11R4-X11R6 Xt specification uses an ambiguous String type for most\ndnl character-strings.\ndnl\ndnl It is ambiguous because the specification accommodated the pre-ANSI\ndnl compilers bundled by more than one vendor in lieu of providing a standard C\ndnl compiler other than by costly add-ons.  Because of this, the specification\ndnl did not take into account the use of const for telling the compiler that\ndnl string literals would be in readonly memory.\ndnl\ndnl As a workaround, one could (starting with X11R5) define XTSTRINGDEFINES, to\ndnl let the compiler decide how to represent Xt's strings which were #define'd.\ndnl That does not solve the problem of using the block of Xt's strings which\ndnl are compiled into the library (and is less efficient than one might want).\ndnl\ndnl Xt specification 7 introduces the _CONST_X_STRING symbol which is used both\ndnl when compiling the library and compiling using the library, to tell the\ndnl compiler that String is const.\nAC_DEFUN([CF_CONST_X_STRING],\n[\nAC_REQUIRE([AC_PATH_XTRA])\n\nCF_SAVE_XTRA_FLAGS([CF_CONST_X_STRING])\n\nAC_TRY_COMPILE(\n[\n#include <stdlib.h>\n#include <X11/Intrinsic.h>\n],\n[String foo = malloc(1); free((void*)foo)],[\n\nAC_CACHE_CHECK(for X11/Xt const-feature,cf_cv_const_x_string,[\n\tAC_TRY_COMPILE(\n\t\t[\n#define _CONST_X_STRING\t/* X11R7.8 (perhaps) */\n#undef  XTSTRINGDEFINES\t/* X11R5 and later */\n#include <stdlib.h>\n#include <X11/Intrinsic.h>\n\t\t],[String foo = malloc(1); *foo = 0],[\n\t\t\tcf_cv_const_x_string=no\n\t\t],[\n\t\t\tcf_cv_const_x_string=yes\n\t\t])\n])\n\nCF_RESTORE_XTRA_FLAGS([CF_CONST_X_STRING])\n\ncase \"$cf_cv_const_x_string\" in\n(no)\n\tCF_APPEND_TEXT(CPPFLAGS,-DXTSTRINGDEFINES)\n\t;;\n(*)\n\tCF_APPEND_TEXT(CPPFLAGS,-D_CONST_X_STRING)\n\t;;\nesac\n\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CPP_OVERRIDE version: 1 updated: 2022/08/20 16:07:10\ndnl ---------------\ndnl Check if the C++ compiler accepts the override keyword.  This is a C++-11\ndnl feature.\nAC_DEFUN([CF_CPP_OVERRIDE],\n[\nif test -n \"$CXX\"; then\nAC_CACHE_CHECK(if $CXX accepts override keyword,cf_cv_cpp_override,[\n\tAC_LANG_SAVE\n\tAC_LANG_CPLUSPLUS\n\tAC_TRY_RUN([\n\nclass base\n{\npublic:\n\tvirtual int foo(float x) = 0; \n};\n\n\nclass derived: public base\n{\npublic:\n\tint foo(float x) override { return x != 0.0 ? 1 : 0; }\n};\n\nint main(void) { }\n],\n\t[cf_cv_cpp_override=yes],\n\t[cf_cv_cpp_override=no],\n\t[cf_cv_cpp_override=unknown])\n\tAC_LANG_RESTORE\n])\nfi\ntest \"$cf_cv_cpp_override\" = yes && AC_DEFINE(CPP_HAS_OVERRIDE,1,[Define to 1 if C++ has override keyword])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CPP_PARAM_INIT version: 7 updated: 2017/01/21 11:06:25\ndnl -----------------\ndnl Check if the C++ compiler accepts duplicate parameter initialization.  This\ndnl is a late feature for the standard and is not in some recent compilers\ndnl (1999/9/11).\nAC_DEFUN([CF_CPP_PARAM_INIT],\n[\nif test -n \"$CXX\"; then\nAC_CACHE_CHECK(if $CXX accepts parameter initialization,cf_cv_cpp_param_init,[\n\tAC_LANG_SAVE\n\tAC_LANG_CPLUSPLUS\n\tAC_TRY_RUN([\nclass TEST {\nprivate:\n\tint value;\npublic:\n\tTEST(int x = 1);\n\t~TEST();\n};\n\nTEST::TEST(int x = 1)\t// some compilers do not like second initializer\n{\n\tvalue = x;\n}\nint main(void) { }\n],\n\t[cf_cv_cpp_param_init=yes],\n\t[cf_cv_cpp_param_init=no],\n\t[cf_cv_cpp_param_init=unknown])\n\tAC_LANG_RESTORE\n])\nfi\ntest \"$cf_cv_cpp_param_init\" = yes && AC_DEFINE(CPP_HAS_PARAM_INIT,1,[Define to 1 if C++ has parameter initialization])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CPP_STATIC_CAST version: 3 updated: 2013/04/13 18:03:21\ndnl ------------------\ndnl Check if the C++ compiler accepts static_cast in generics.  This appears to\ndnl not be supported in g++ before 3.0\nAC_DEFUN([CF_CPP_STATIC_CAST],\n[\nif test -n \"$CXX\"; then\n\nAC_CACHE_CHECK(if $CXX accepts static_cast,cf_cv_cpp_static_cast,[\n\tAC_LANG_SAVE\n\tAC_LANG_CPLUSPLUS\n\n\tAC_TRY_COMPILE([\nclass NCursesPanel\n{\npublic:\n  NCursesPanel(int nlines,\n\t       int ncols,\n\t       int begin_y = 0,\n\t       int begin_x = 0)\n  {\n  }\n  NCursesPanel();\n  ~NCursesPanel();\n};\n\ntemplate<class T> class NCursesUserPanel : public NCursesPanel\n{\npublic:\n  NCursesUserPanel (int nlines,\n\t\t    int ncols,\n\t\t    int begin_y = 0,\n\t\t    int begin_x = 0,\n\t\t    const T* p_UserData = static_cast<T*>(0))\n    : NCursesPanel (nlines, ncols, begin_y, begin_x)\n  {\n  };\n  NCursesUserPanel(const T* p_UserData = static_cast<T*>(0)) : NCursesPanel()\n  {\n  };\n\n  virtual ~NCursesUserPanel() {};\n};\n],[\n\tconst char* p_UserData = static_cast<char*>(0)],\n\t[cf_cv_cpp_static_cast=yes],\n\t[cf_cv_cpp_static_cast=no])\n\n\tAC_LANG_RESTORE\n])\n\nfi\n\ntest \"$cf_cv_cpp_static_cast\" = yes && AC_DEFINE(CPP_HAS_STATIC_CAST,1,[Define to 1 if C++ has static_cast])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CXX_AR_FLAGS version: 3 updated: 2021/01/01 13:31:04\ndnl ---------------\ndnl Setup special archiver flags for given compilers.\nAC_DEFUN([CF_CXX_AR_FLAGS],[\n\tCXX_AR='$(AR)'\n\tCXX_ARFLAGS='$(ARFLAGS)'\n\tcase \"$cf_cv_system_name\" in\n\t(irix*)\n\t    if test \"$GXX\" != yes ; then\n\t\tCXX_AR='$(CXX)'\n\t\tCXX_ARFLAGS='-ar -o'\n\t    fi\n\t    ;;\n\t(sco3.2v5*)\n\t    CXXLDFLAGS=\"-u main\"\n\t    ;;\n\t(solaris2*)\n\t    if test \"$GXX\" != yes ; then\n\t\tCXX_AR='$(CXX)'\n\t\tCXX_ARFLAGS='-xar -o'\n\t    fi\n\t    ;;\n\tesac\n\tAC_SUBST(CXXLDFLAGS)\n\tAC_SUBST(CXX_AR)\n\tAC_SUBST(CXX_ARFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_CXX_IOSTREAM_NAMESPACE version: 2 updated: 2012/10/06 17:56:13\ndnl -------------------------\ndnl For c++, check if iostream uses \"std::\" namespace.\nAC_DEFUN([CF_CXX_IOSTREAM_NAMESPACE],[\nAC_CHECK_HEADERS(iostream)\nif test x\"$ac_cv_header_iostream\" = xyes ; then\n\tAC_MSG_CHECKING(if iostream uses std-namespace)\n\tAC_TRY_COMPILE([\n#include <iostream>\nusing std::endl;\nusing std::cerr;],[\ncerr << \"testing\" << endl;\n],[cf_iostream_namespace=yes],[cf_iostream_namespace=no])\n\tAC_MSG_RESULT($cf_iostream_namespace)\n\tif test \"$cf_iostream_namespace\" = yes ; then\n\t\tAC_DEFINE(IOSTREAM_NAMESPACE,1,[Define to 1 if C++ has namespace iostream])\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_C_INLINE version: 6 updated: 2019/09/07 13:38:36\ndnl -----------\ndnl Check if the C compiler supports \"inline\".\ndnl $1 is the name of a shell variable to set if inline is supported\ndnl $2 is the threshold for gcc 4.x's option controlling maximum inline size\nAC_DEFUN([CF_C_INLINE],[\nAC_REQUIRE([CF_GCC_VERSION])\nAC_C_INLINE\n$1=\nif test \"$ac_cv_c_inline\" != no ; then\n\t$1=inline\n\tif test \"$INTEL_COMPILER\" = yes\n\tthen\n\t\t:\n\telif test \"$CLANG_COMPILER\" = yes\n\tthen\n\t\t:\n\telif test \"$GCC\" = yes\n\tthen\n\t\tAC_CACHE_CHECK(if $CC supports options to tune inlining,cf_cv_gcc_inline,[\n\t\tcf_save_CFLAGS=$CFLAGS\n\t\tCFLAGS=\"$CFLAGS --param max-inline-insns-single=$2\"\n\t\tAC_TRY_COMPILE([inline int foo(void) { return 1; }],\n\t\t[${cf_cv_main_return:-return} foo()],\n\t\t[cf_cv_gcc_inline=yes],\n\t\t[cf_cv_gcc_inline=no])\n\t\tCFLAGS=$cf_save_CFLAGS\n\t\t])\n\t\tif test \"$cf_cv_gcc_inline\" = yes ; then\n\t\t\tCF_ADD_CFLAGS([--param max-inline-insns-single=$2])\n\t\tfi\n\tfi\nfi\nAC_SUBST($1)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DIRNAME version: 5 updated: 2020/12/31 20:19:42\ndnl ----------\ndnl \"dirname\" is not portable, so we fake it with a shell script.\nAC_DEFUN([CF_DIRNAME],[$1=`echo \"$2\" | sed -e 's%/[[^/]]*$%%'`])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DIRS_TO_MAKE version: 4 updated: 2021/01/01 13:31:04\ndnl ---------------\nAC_DEFUN([CF_DIRS_TO_MAKE],\n[\nDIRS_TO_MAKE=\"lib\"\nfor cf_item in $cf_list_models\ndo\n\tCF_OBJ_SUBDIR($cf_item,cf_subdir)\n\tfor cf_item2 in $DIRS_TO_MAKE\n\tdo\n\t\ttest \"$cf_item2\" = \"$cf_subdir\" && break\n\tdone\n\ttest \".$cf_item2\" != \".$cf_subdir\" && DIRS_TO_MAKE=\"$DIRS_TO_MAKE $cf_subdir\"\ndone\nfor cf_dir in $DIRS_TO_MAKE\ndo\n\ttest ! -d \"$cf_dir\" && mkdir \"$cf_dir\"\ndone\nAC_SUBST(DIRS_TO_MAKE)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_ECHO version: 14 updated: 2021/09/04 06:35:04\ndnl ---------------\ndnl You can always use \"make -n\" to see the actual options, but it is hard to\ndnl pick out/analyze warning messages when the compile-line is long.\ndnl\ndnl Sets:\ndnl\tECHO_LT - symbol to control if libtool is verbose\ndnl\tECHO_LD - symbol to prefix \"cc -o\" lines\ndnl\tRULE_CC - symbol to put before implicit \"cc -c\" lines (e.g., .c.o)\ndnl\tSHOW_CC - symbol to put before explicit \"cc -c\" lines\ndnl\tECHO_CC - symbol to put before any \"cc\" line\ndnl\nAC_DEFUN([CF_DISABLE_ECHO],[\nAC_MSG_CHECKING(if you want to see long compiling messages)\nCF_ARG_DISABLE(echo,\n\t[  --disable-echo          do not display \"compiling\" commands],\n\t[\n\tECHO_LT='--silent'\n\tECHO_LD='@echo linking [$]@;'\n\tRULE_CC='@echo compiling [$]<'\n\tSHOW_CC='@echo compiling [$]@'\n\tECHO_CC='@'\n],[\n\tECHO_LT=''\n\tECHO_LD=''\n\tRULE_CC=''\n\tSHOW_CC=''\n\tECHO_CC=''\n])\nAC_MSG_RESULT($enableval)\nAC_SUBST(ECHO_LT)\nAC_SUBST(ECHO_LD)\nAC_SUBST(RULE_CC)\nAC_SUBST(SHOW_CC)\nAC_SUBST(ECHO_CC)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_GNAT_PROJECTS version: 1 updated: 2014/06/01 11:34:00\ndnl ------------------------\nAC_DEFUN([CF_DISABLE_GNAT_PROJECTS],[\nAC_MSG_CHECKING(if we want to use GNAT projects)\nCF_ARG_DISABLE(gnat-projects,\n\t[  --disable-gnat-projects test: disable GNAT projects even if usable],\n\t[enable_gnat_projects=no],\n\t[enable_gnat_projects=yes])\nAC_MSG_RESULT($enable_gnat_projects)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_LEAKS version: 9 updated: 2021/04/03 16:41:50\ndnl ----------------\ndnl Combine no-leak checks with the libraries or tools that are used for the\ndnl checks.\nAC_DEFUN([CF_DISABLE_LEAKS],[\n\nAC_REQUIRE([CF_WITH_DMALLOC])\nAC_REQUIRE([CF_WITH_DBMALLOC])\nAC_REQUIRE([CF_WITH_VALGRIND])\n\nAC_MSG_CHECKING(if you want to perform memory-leak testing)\nAC_ARG_ENABLE(leaks,\n\t[  --disable-leaks         test: free permanent memory, analyze leaks],\n\t[enable_leaks=$enableval],\n\t[enable_leaks=yes])\ndnl with_no_leaks is more readable...\nif test \"x$enable_leaks\" = xno; then with_no_leaks=yes; else with_no_leaks=no; fi\nAC_MSG_RESULT($with_no_leaks)\n\nif test \"$enable_leaks\" = no ; then\n\tAC_DEFINE(NO_LEAKS,1,[Define to 1 if you want to perform memory-leak testing.])\n\tAC_DEFINE(YY_NO_LEAKS,1,[Define to 1 if you want to perform memory-leak testing.])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_LIBTOOL_VERSION version: 3 updated: 2015/04/17 21:13:04\ndnl --------------------------\ndnl Check if we should use the libtool 1.5 feature \"-version-number\" instead of\ndnl the older \"-version-info\" feature.  The newer feature allows us to use\ndnl version numbering on shared libraries which make them compatible with\ndnl various systems.\nAC_DEFUN([CF_DISABLE_LIBTOOL_VERSION],\n[\nAC_MSG_CHECKING(if libtool -version-number should be used)\nCF_ARG_DISABLE(libtool-version,\n\t[  --disable-libtool-version  enable to use libtool's incompatible naming scheme],\n\t[cf_libtool_version=no],\n\t[cf_libtool_version=yes])\nAC_MSG_RESULT($cf_libtool_version)\n\nif test \"$cf_libtool_version\" = yes ; then\n\tLIBTOOL_VERSION=\"-version-number\"\nelse\n\tLIBTOOL_VERSION=\"-version-info\"\n\tcase \"x$VERSION\" in\n\t(x)\n\t\tAC_MSG_WARN(VERSION was not set)\n\t\t;;\n\t(x*.*.*)\n\t\tABI_VERSION=\"$VERSION\"\n\t\tCF_VERBOSE(ABI_VERSION: $ABI_VERSION)\n\t\t;;\n\t(x*:*:*)\n\t\tABI_VERSION=`echo \"$VERSION\" | sed -e 's/:/./g'`\n\t\tCF_VERBOSE(ABI_VERSION: $ABI_VERSION)\n\t\t;;\n\t(*)\n\t\tAC_MSG_WARN(unexpected VERSION value: $VERSION)\n\t\t;;\n\tesac\nfi\n\nAC_SUBST(ABI_VERSION)\nAC_SUBST(LIBTOOL_VERSION)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_DISABLE_RPATH_HACK version: 3 updated: 2021/01/05 20:14:44\ndnl ---------------------\ndnl The rpath-hack makes it simpler to build programs, particularly with the\ndnl *BSD ports which may have essential libraries in unusual places.  But it\ndnl can interfere with building an executable for the base system.  Use this\ndnl option in that case.\nAC_DEFUN([CF_DISABLE_RPATH_HACK],\n[\nAC_MSG_CHECKING(if rpath-hack should be disabled)\nCF_ARG_DISABLE(rpath-hack,\n\t[  --disable-rpath-hack    don't add rpath options for additional libraries],\n\t[enable_rpath_hack=no],\n\t[enable_rpath_hack=yes])\ndnl TODO - drop cf_disable_rpath_hack\nif test \"x$enable_rpath_hack\" = xno; then cf_disable_rpath_hack=yes; else cf_disable_rpath_hack=no; fi\nAC_MSG_RESULT($cf_disable_rpath_hack)\n\nif test \"$enable_rpath_hack\" = yes ; then\n\tCF_RPATH_HACK\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_ENABLE_BROKEN_LINKER version: 2 updated: 2021/01/02 17:09:14\ndnl -----------------------\ndnl Some linkers cannot reference a data-only object.  Cygwin used to be one.\ndnl This usually follows CF_LINK_DATAONLY, but is not required in case we need\ndnl an unconditional feature.\nAC_DEFUN([CF_ENABLE_BROKEN_LINKER],[\n\nAC_MSG_CHECKING(if you want broken-linker support code)\nAC_ARG_ENABLE(broken_linker,\n\t[  --enable-broken_linker  compile with broken-linker support code],\n\t[with_broken_linker=$enableval],\n\t[with_broken_linker=no])\nAC_MSG_RESULT($with_broken_linker)\n\n: \"${BROKEN_LINKER:=0}\"\nif test \"x$with_broken_linker\" = xyes ; then\n\tAC_DEFINE(BROKEN_LINKER,1,[Define to 1 to work around linkers which cannot link data-only modules])\n\tBROKEN_LINKER=1\nfi\nAC_SUBST(BROKEN_LINKER)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ENABLE_PC_FILES version: 16 updated: 2021/11/20 12:48:37\ndnl ------------------\ndnl This is the \"--enable-pc-files\" option, which is available if there is a\ndnl pkg-config configuration on the local machine.\nAC_DEFUN([CF_ENABLE_PC_FILES],[\nAC_REQUIRE([CF_PKG_CONFIG])\nAC_REQUIRE([CF_WITH_PKG_CONFIG_LIBDIR])\n\nif test \"x$PKG_CONFIG\" != xnone\nthen\n\tAC_MSG_CHECKING(if we should install .pc files for $PKG_CONFIG)\nelse\n\tAC_MSG_CHECKING(if we should install .pc files)\nfi\n\nAC_ARG_ENABLE(pc-files,\n\t[  --enable-pc-files       generate and install .pc files for pkg-config],\n\t[enable_pc_files=$enableval],\n\t[enable_pc_files=no])\nAC_MSG_RESULT($enable_pc_files)\n\nif test \"x$enable_pc_files\" != xno\nthen\n\tMAKE_PC_FILES=\n\tcase \"x$PKG_CONFIG_LIBDIR\" in\n\t(xno|xnone|xyes|x)\n\t\tAC_MSG_WARN(no PKG_CONFIG_LIBDIR was found)\n\t\t;;\n\t(*)\n\t\tcf_pkg_config_libdir=\"$PKG_CONFIG_LIBDIR\"\n\t\tCF_PATH_SYNTAX(cf_pkg_config_libdir)\n\t\t;;\n\tesac\nelse\n\tMAKE_PC_FILES=\"#\"\nfi\nAC_SUBST(MAKE_PC_FILES)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ENABLE_RPATH version: 2 updated: 2010/03/27 18:39:42\ndnl ---------------\ndnl Check if the rpath option should be used, setting cache variable\ndnl cf_cv_enable_rpath if so.\nAC_DEFUN([CF_ENABLE_RPATH],\n[\nAC_MSG_CHECKING(if rpath option should be used)\nAC_ARG_ENABLE(rpath,\n[  --enable-rpath          use rpath option when generating shared libraries],\n[cf_cv_enable_rpath=$enableval],\n[cf_cv_enable_rpath=no])\nAC_MSG_RESULT($cf_cv_enable_rpath)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ENABLE_STRING_HACKS version: 6 updated: 2021/01/05 19:23:48\ndnl ----------------------\ndnl On a few platforms, the compiler and/or loader nags with untruthful\ndnl comments stating that \"most\" uses of strcat/strcpy/sprintf are incorrect,\ndnl and implying that most uses of the recommended alternatives are correct.\ndnl\ndnl Factually speaking, no one has actually counted the number of uses of these\ndnl functions versus the total of incorrect uses.  Samples of a few thousand\ndnl instances are meaningless compared to the hundreds of millions of lines of\ndnl existing C code.\ndnl\ndnl strlcat/strlcpy are (as of 2012) non-standard, and are available on some\ndnl platforms, in implementations of varying quality.  Likewise, snprintf is\ndnl standard - but evolved through phases, and older implementations are likely\ndnl to yield surprising results, as documented in manpages on various systems.\nAC_DEFUN([CF_ENABLE_STRING_HACKS],\n[\nAC_MSG_CHECKING(if you want to work around bogus compiler/loader warnings)\nAC_ARG_ENABLE(string-hacks,\n\t[  --enable-string-hacks   work around bogus compiler/loader warnings],\n\t[enable_string_hacks=$enableval],\n\t[enable_string_hacks=no])\nAC_MSG_RESULT($enable_string_hacks)\n\nif test \"x$enable_string_hacks\" = \"xyes\"; then\n \tAC_DEFINE(USE_STRING_HACKS,1,[Define to 1 to work around bogus compiler/loader warnings])\n\tAC_MSG_WARN(enabling string-hacks to work around bogus compiler/loader warnings)\n\tAC_CHECK_FUNC(strlcat,[\n\t\tAC_DEFINE(HAVE_STRLCAT,1,[Define to 1 if we have strlcat function])\n\t\t],[\n\t\tAC_CHECK_LIB(bsd,strlcat,[\n\t\t\tCF_ADD_LIB(bsd)\n\t\t\tAC_CHECK_HEADERS(bsd/string.h)\n\t\t\tAC_DEFINE(HAVE_STRLCAT,1,[Define to 1 if we have strlcat function])\n\t\t\t])\n\t\t])\n\tAC_CHECK_FUNCS( strlcpy snprintf )\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ENABLE_WARNINGS version: 9 updated: 2021/01/05 19:40:50\ndnl ------------------\ndnl Configure-option to enable gcc warnings\ndnl\ndnl $1 = extra options to add, if supported\ndnl $2 = option for checking attributes.  By default, this is done when\ndnl      warnings are enabled.  For other values:\ndnl      yes: always do this, e.g., to use in generated library-headers\ndnl      no: never do this\nAC_DEFUN([CF_ENABLE_WARNINGS],[\nif test \"$GCC\" = yes || test \"$GXX\" = yes\nthen\nCF_FIX_WARNINGS(CFLAGS)\nCF_FIX_WARNINGS(CPPFLAGS)\nCF_FIX_WARNINGS(LDFLAGS)\nAC_MSG_CHECKING(if you want to turn on gcc warnings)\nCF_ARG_ENABLE(warnings,\n\t[  --enable-warnings       test: turn on gcc compiler warnings],\n\t[enable_warnings=yes],\n\t[enable_warnings=no])\nAC_MSG_RESULT($enable_warnings)\nif test \"$enable_warnings\" = \"yes\"\nthen\n\tifelse($2,,[CF_GCC_ATTRIBUTES])\n\tCF_GCC_WARNINGS($1)\nfi\nifelse($2,yes,[CF_GCC_ATTRIBUTES])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ERRNO version: 5 updated: 1997/11/30 12:44:39\ndnl --------\ndnl Check if 'errno' is declared in <errno.h>\nAC_DEFUN([CF_ERRNO],\n[\nCF_CHECK_ERRNO(errno)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ETIP_DEFINES version: 6 updated: 2021/01/02 17:09:14\ndnl ---------------\ndnl Test for conflicting definitions of exception in gcc 2.8.0, etc., between\ndnl math.h and builtin.h, only for ncurses\nAC_DEFUN([CF_ETIP_DEFINES],\n[\nAC_MSG_CHECKING(for special defines needed for etip.h)\ncf_save_CXXFLAGS=\"$CXXFLAGS\"\ncf_result=\"none\"\n\n# etip.h includes ncurses.h which includes ncurses_dll.h\n# But ncurses_dll.h is generated - fix here.\ntest -d include || mkdir include\ntest -f include/ncurses_dll.h || sed -e 's/@NCURSES_WRAP_PREFIX@/'$NCURSES_WRAP_PREFIX'/g' \"${srcdir}/include/ncurses_dll.h.in\" >include/ncurses_dll.h\n\nfor cf_math in \"\" MATH_H\ndo\nfor cf_excp in \"\" MATH_EXCEPTION\ndo\n\tCXXFLAGS=\"$cf_save_CXXFLAGS -I${srcdir}/c++ -I${srcdir}/menu -Iinclude -I${srcdir}/include\"\n\ttest -n \"$cf_math\" && CXXFLAGS=\"$CXXFLAGS -DETIP_NEEDS_${cf_math}\"\n\ttest -n \"$cf_excp\" && CXXFLAGS=\"$CXXFLAGS -DETIP_NEEDS_${cf_excp}\"\nAC_TRY_COMPILE([\n#include <etip.h.in>\n],[],[\n\ttest -n \"$cf_math\" && AC_DEFINE_UNQUOTED(ETIP_NEEDS_${cf_math})\n\ttest -n \"$cf_excp\" && AC_DEFINE_UNQUOTED(ETIP_NEEDS_${cf_excp})\n\tcf_result=\"$cf_math $cf_excp\"\n\tbreak 2\n],[])\ndone\ndone\nAC_MSG_RESULT($cf_result)\nCXXFLAGS=\"$cf_save_CXXFLAGS\"\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_FIND_LINKAGE version: 22 updated: 2020/12/31 20:19:42\ndnl ---------------\ndnl Find a library (specifically the linkage used in the code fragment),\ndnl searching for it if it is not already in the library path.\ndnl See also CF_ADD_SEARCHPATH.\ndnl\ndnl Parameters (4-on are optional):\ndnl     $1 = headers for library entrypoint\ndnl     $2 = code fragment for library entrypoint\ndnl     $3 = the library name without the \"-l\" option or \".so\" suffix.\ndnl     $4 = action to perform if successful (default: update CPPFLAGS, etc)\ndnl     $5 = action to perform if not successful\ndnl     $6 = module name, if not the same as the library name\ndnl     $7 = extra libraries\ndnl\ndnl Sets these variables:\ndnl     $cf_cv_find_linkage_$3 - yes/no according to whether linkage is found\ndnl     $cf_cv_header_path_$3 - include-directory if needed\ndnl     $cf_cv_library_path_$3 - library-directory if needed\ndnl     $cf_cv_library_file_$3 - library-file if needed, e.g., -l$3\nAC_DEFUN([CF_FIND_LINKAGE],[\n\n# If the linkage is not already in the $CPPFLAGS/$LDFLAGS configuration, these\n# will be set on completion of the AC_TRY_LINK below.\ncf_cv_header_path_$3=\ncf_cv_library_path_$3=\n\nCF_MSG_LOG([Starting [FIND_LINKAGE]($3,$6)])\n\ncf_save_LIBS=\"$LIBS\"\n\nAC_TRY_LINK([$1],[$2],[\n\tcf_cv_find_linkage_$3=yes\n\tcf_cv_header_path_$3=/usr/include\n\tcf_cv_library_path_$3=/usr/lib\n],[\n\nLIBS=\"-l$3 $7 $cf_save_LIBS\"\n\nAC_TRY_LINK([$1],[$2],[\n\tcf_cv_find_linkage_$3=yes\n\tcf_cv_header_path_$3=/usr/include\n\tcf_cv_library_path_$3=/usr/lib\n\tcf_cv_library_file_$3=\"-l$3\"\n],[\n\tcf_cv_find_linkage_$3=no\n\tLIBS=\"$cf_save_LIBS\"\n\n\tCF_VERBOSE(find linkage for $3 library)\n\tCF_MSG_LOG([Searching for headers in [FIND_LINKAGE]($3,$6)])\n\n\tcf_save_CPPFLAGS=\"$CPPFLAGS\"\n\tcf_test_CPPFLAGS=\"$CPPFLAGS\"\n\n\tCF_HEADER_PATH(cf_search,ifelse([$6],,[$3],[$6]))\n\tfor cf_cv_header_path_$3 in $cf_search\n\tdo\n\t\tif test -d \"$cf_cv_header_path_$3\" ; then\n\t\t\tCF_VERBOSE(... testing $cf_cv_header_path_$3)\n\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\tCF_APPEND_TEXT(CPPFLAGS,-I$cf_cv_header_path_$3)\n\t\t\tAC_TRY_COMPILE([$1],[$2],[\n\t\t\t\tCF_VERBOSE(... found $3 headers in $cf_cv_header_path_$3)\n\t\t\t\tcf_cv_find_linkage_$3=maybe\n\t\t\t\tcf_test_CPPFLAGS=\"$CPPFLAGS\"\n\t\t\t\tbreak],[\n\t\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\t\t])\n\t\tfi\n\tdone\n\n\tif test \"$cf_cv_find_linkage_$3\" = maybe ; then\n\n\t\tCF_MSG_LOG([Searching for $3 library in [FIND_LINKAGE]($3,$6)])\n\n\t\tcf_save_LIBS=\"$LIBS\"\n\t\tcf_save_LDFLAGS=\"$LDFLAGS\"\n\n\t\tifelse([$6],,,[\n\t\tCPPFLAGS=\"$cf_test_CPPFLAGS\"\n\t\tLIBS=\"-l$3 $7 $cf_save_LIBS\"\n\t\tAC_TRY_LINK([$1],[$2],[\n\t\t\tCF_VERBOSE(... found $3 library in system)\n\t\t\tcf_cv_find_linkage_$3=yes])\n\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\tLIBS=\"$cf_save_LIBS\"\n\t\t\t])\n\n\t\tif test \"$cf_cv_find_linkage_$3\" != yes ; then\n\t\t\tCF_LIBRARY_PATH(cf_search,$3)\n\t\t\tfor cf_cv_library_path_$3 in $cf_search\n\t\t\tdo\n\t\t\t\tif test -d \"$cf_cv_library_path_$3\" ; then\n\t\t\t\t\tCF_VERBOSE(... testing $cf_cv_library_path_$3)\n\t\t\t\t\tCPPFLAGS=\"$cf_test_CPPFLAGS\"\n\t\t\t\t\tLIBS=\"-l$3 $7 $cf_save_LIBS\"\n\t\t\t\t\tLDFLAGS=\"$cf_save_LDFLAGS -L$cf_cv_library_path_$3\"\n\t\t\t\t\tAC_TRY_LINK([$1],[$2],[\n\t\t\t\t\tCF_VERBOSE(... found $3 library in $cf_cv_library_path_$3)\n\t\t\t\t\tcf_cv_find_linkage_$3=yes\n\t\t\t\t\tcf_cv_library_file_$3=\"-l$3\"\n\t\t\t\t\tbreak],[\n\t\t\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\t\t\tLIBS=\"$cf_save_LIBS\"\n\t\t\t\t\tLDFLAGS=\"$cf_save_LDFLAGS\"\n\t\t\t\t\t])\n\t\t\t\tfi\n\t\t\tdone\n\t\t\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t\t\tLDFLAGS=\"$cf_save_LDFLAGS\"\n\t\tfi\n\n\telse\n\t\tcf_cv_find_linkage_$3=no\n\tfi\n\t],$7)\n])\n\nLIBS=\"$cf_save_LIBS\"\n\nif test \"$cf_cv_find_linkage_$3\" = yes ; then\nifelse([$4],,[\n\tCF_ADD_INCDIR($cf_cv_header_path_$3)\n\tCF_ADD_LIBDIR($cf_cv_library_path_$3)\n\tCF_ADD_LIB($3)\n],[$4])\nelse\nifelse([$5],,AC_MSG_WARN(Cannot find $3 library),[$5])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FIND_SUB_INCDIR version: 3 updated: 2021/01/01 13:31:04\ndnl ------------------\ndnl Find an include-directory with the given leaf-name.  This is useful for\ndnl example with FreeBSD ports, which use this convention to distinguish\ndnl different versions of the same port.\nAC_DEFUN([CF_FIND_SUB_INCDIR],[\n\tCF_SUBDIR_PATH(cf_search,$1,include)\n\tfor cf_item in $cf_search\n\tdo\n\t\tcase \"$cf_item\" in\n\t\t(*/$1)\n\t\t\tCF_ADD_INCDIR($cf_item)\n\t\t\t;;\n\t\tesac\n\tdone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FIND_SUB_LIBDIR version: 3 updated: 2021/01/01 13:31:04\ndnl ------------------\ndnl Find a library-directory with the given leaf-name.  This is useful for\ndnl example with FreeBSD ports, which use this convention to distinguish\ndnl different versions of the same port.\nAC_DEFUN([CF_FIND_SUB_LIBDIR],[\n\tCF_SUBDIR_PATH(cf_search,$1,lib)\n\tfor cf_item in $cf_search\n\tdo\n\t\tcase \"$cf_item\" in\n\t\t(*/$1)\n\t\t\tCF_ADD_LIBDIR($cf_item)\n\t\t\t;;\n\t\tesac\n\tdone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FIXUP_ADAFLAGS version: 2 updated: 2015/04/17 21:13:04\ndnl -----------------\ndnl make ADAFLAGS consistent with CFLAGS\nAC_DEFUN([CF_FIXUP_ADAFLAGS],[\n\tAC_MSG_CHECKING(optimization options for ADAFLAGS)\n\tcase \"$CFLAGS\" in\n\t(*-g*)\n\t\tCF_ADD_ADAFLAGS(-g)\n\t\t;;\n\tesac\n\tcase \"$CFLAGS\" in\n\t(*-O*)\n\t\tcf_O_flag=`echo \"$CFLAGS\" |sed -e 's/^.*-O/-O/' -e 's/[[ \t]].*//'`\n\t\tCF_ADD_ADAFLAGS($cf_O_flag)\n\t\t;;\n\tesac\n\tAC_MSG_RESULT($ADAFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FIX_WARNINGS version: 4 updated: 2021/12/16 18:22:31\ndnl ---------------\ndnl Warning flags do not belong in CFLAGS, CPPFLAGS, etc.  Any of gcc's\ndnl \"-Werror\" flags can interfere with configure-checks.  Those go into\ndnl EXTRA_CFLAGS.\ndnl\ndnl $1 = variable name to repair\ndefine([CF_FIX_WARNINGS],[\nif test \"$GCC\" = yes || test \"$GXX\" = yes\nthen\n\tcase [$]$1 in\n\t(*-Werror=*)\n\t\tcf_temp_flags=\n\t\tfor cf_temp_scan in [$]$1\n\t\tdo\n\t\t\tcase \"x$cf_temp_scan\" in\n\t\t\t(x-Werror=format*)\n\t\t\t\tCF_APPEND_TEXT(cf_temp_flags,$cf_temp_scan)\n\t\t\t\t;;\n\t\t\t(x-Werror=*)\n\t\t\t\tCF_APPEND_TEXT(EXTRA_CFLAGS,$cf_temp_scan)\n\t\t\t\t;;\n\t\t\t(*)\n\t\t\t\tCF_APPEND_TEXT(cf_temp_flags,$cf_temp_scan)\n\t\t\t\t;;\n\t\t\tesac\n\t\tdone\n\t\tif test \"x[$]$1\" != \"x$cf_temp_flags\"\n\t\tthen\n\t\t\tCF_VERBOSE(repairing $1: [$]$1)\n\t\t\t$1=\"$cf_temp_flags\"\n\t\t\tCF_VERBOSE(... fixed [$]$1)\n\t\t\tCF_VERBOSE(... extra $EXTRA_CFLAGS)\n\t\tfi\n\t\t;;\n\tesac\nfi\nAC_SUBST(EXTRA_CFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FOPEN_BIN_R version: 2 updated: 2019/12/31 08:53:54\ndnl --------------\ndnl Check if fopen works when the \"b\" (binary) flag is added to the mode\ndnl parameter.  POSIX ignores the \"b\", which c89 specified.  Some very old\ndnl systems do not accept it.\nAC_DEFUN([CF_FOPEN_BIN_R],[\nAC_CACHE_CHECK(if fopen accepts explicit binary mode,cf_cv_fopen_bin_r,[\n\tAC_TRY_RUN([\n#include <stdio.h>\nint main(void) {\n\tFILE *fp = fopen(\"conftest.tmp\", \"wb\");\n\tint rc = 0;\n\tif (fp != 0) {\n\t\tint p, q;\n\t\tfor (p = 0; p < 256; ++p) {\n\t\t\tfputc(p, fp);\n\t\t}\n\t\tfclose(fp);\n\t\tfp = fopen(\"conftest.tmp\", \"rb\");\n\t\tif (fp != 0) {\n\t\t\tfor (p = 0; p < 256; ++p) {\n\t\t\t\tq = fgetc(fp);\n\t\t\t\tif (q != p) {\n\t\t\t\t\trc = 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\trc = 1;\n\t\t}\n\t} else {\n\t\trc = 1;\n\t}\n\t${cf_cv_main_return:-return} (rc);\n}\n],\n\t\t[cf_cv_fopen_bin_r=yes],\n\t\t[cf_cv_fopen_bin_r=no],\n\t\t[cf_cv_fopen_bin_r=unknown])\n])\ntest \"x$cf_cv_fopen_bin_r\" != xno && AC_DEFINE(USE_FOPEN_BIN_R,1,[Define to 1 if fopen accepts explicit binary mode])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FORGET_TOOL version: 1 updated: 2013/04/06 18:03:09\ndnl --------------\ndnl Forget that we saw the given tool.\nAC_DEFUN([CF_FORGET_TOOL],[\nunset ac_cv_prog_ac_ct_$1\nunset ac_ct_$1\nunset $1\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_DLSYM version: 4 updated: 2015/09/12 14:46:44\ndnl -------------\ndnl Test for dlsym() and related functions, as well as libdl.\ndnl\ndnl Sets\ndnl\t$cf_have_dlsym\ndnl\t$cf_have_libdl\nAC_DEFUN([CF_FUNC_DLSYM],[\ncf_have_dlsym=no\nAC_CHECK_FUNC(dlsym,cf_have_dlsym=yes,[\n\ncf_have_libdl=no\nAC_CHECK_LIB(dl,dlsym,[\n\tcf_have_dlsym=yes\n\tcf_have_libdl=yes])])\n\nif test \"$cf_have_dlsym\" = yes ; then\n\ttest \"$cf_have_libdl\" = yes && { CF_ADD_LIB(dl) }\n\n\tAC_MSG_CHECKING(whether able to link to dl*() functions)\n\tAC_TRY_LINK([#include <dlfcn.h>],[\n\t\tvoid *obj;\n\t\tif ((obj = dlopen(\"filename\", 0)) != 0) {\n\t\t\tif (dlsym(obj, \"symbolname\") == 0) {\n\t\t\tdlclose(obj);\n\t\t\t}\n\t\t}],[\n\t\tAC_DEFINE(HAVE_LIBDL,1,[Define to 1 if we have dl library])],[\n\t\tAC_MSG_ERROR(Cannot link test program for libdl)])\n\tAC_MSG_RESULT(ok)\nelse\n\tAC_MSG_ERROR(Cannot find dlsym function)\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_GETTTYNAM version: 1 updated: 2021/12/04 18:29:47\ndnl -----------------\ndnl Check if the 4.3BSD function getttyname exists, as well as if <ttyent.h>\ndnl defines the _PATH_TTYS symbol.  If the corresponding file exists, but the\ndnl other checks fail, just define HAVE_PATH_TTYS.\nAC_DEFUN([CF_FUNC_GETTTYNAM],[\nAC_CACHE_CHECK(if _PATH_TTYS is defined in ttyent.h,cf_cv_PATH_TTYS,[\nAC_TRY_COMPILE([\n#include <stdio.h>\n#include <ttyent.h>],[\nFILE *fp = fopen(_PATH_TTYS, \"r\"); (void)fp],\n\t[cf_cv_PATH_TTYS=yes],\n\t[cf_cv_PATH_TTYS=no])])\n\nif test $cf_cv_PATH_TTYS = no\nthen\n\tfor cf_ttys in /etc/ttytype /etc/ttys\n\tdo\n\t\tif test -f $cf_ttys\n\t\tthen\n\t\t\tcf_cv_PATH_TTYS=maybe\n\t\t\tAC_DEFINE(_PATH_TTYS,$cf_ttys,[define to pathname of file containing mapping from tty name to terminal type])\n\t\t\tbreak\n\t\tfi\n\tdone\nfi\n\nif test $cf_cv_PATH_TTYS != no\nthen\n\tAC_CACHE_CHECK(if _PATH_TTYS file exists,cf_cv_have_PATH_TTYS,[\n\t\tAC_TRY_RUN([\n#include <stdio.h>\n#include <ttyent.h>\nint main(void) {\n\tFILE *fp = fopen(_PATH_TTYS, \"r\");\n\t${cf_cv_main_return:-return} (fp == 0);\n}],\n\t\t\t[cf_cv_have_PATH_TTYS=yes],\n\t\t\t[cf_cv_have_PATH_TTYS=no],\n\t\t\t[cf_cv_have_PATH_TTYS=unknown])])\n\ttest \"$cf_cv_have_PATH_TTYS\" = no && cf_cv_PATH_TTYS=no\nfi\n\nif test $cf_cv_PATH_TTYS != no\nthen\n\tAC_DEFINE(HAVE_PATH_TTYS,1,[define to 1 if system can map tty name to terminal type])\n\tAC_CACHE_CHECK(for getttynam,cf_cv_func_getttynam,[\n\t\tAC_TRY_LINK([#include <ttyent.h>],\n\t\t[struct ttyent *fp = getttynam(\"/dev/tty\"); (void)fp],\n\t\t[cf_cv_func_getttynam=yes],\n\t\t[cf_cv_func_getttynam=no])])\n\ttest \"$cf_cv_func_getttynam\" = yes && AC_DEFINE(HAVE_GETTTYNAM)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_MEMMOVE version: 9 updated: 2017/01/21 11:06:25\ndnl ---------------\ndnl Check for memmove, or a bcopy that can handle overlapping copy.  If neither\ndnl is found, add our own version of memmove to the list of objects.\nAC_DEFUN([CF_FUNC_MEMMOVE],\n[\nAC_CHECK_FUNC(memmove,,[\nAC_CHECK_FUNC(bcopy,[\n\tAC_CACHE_CHECK(if bcopy does overlapping moves,cf_cv_good_bcopy,[\n\t\tAC_TRY_RUN([\nint main(void) {\n\tstatic char data[] = \"abcdefghijklmnopqrstuwwxyz\";\n\tchar temp[40];\n\tbcopy(data, temp, sizeof(data));\n\tbcopy(temp+10, temp, 15);\n\tbcopy(temp+5, temp+15, 10);\n\t${cf_cv_main_return:-return} (strcmp(temp, \"klmnopqrstuwwxypqrstuwwxyz\"));\n}\n\t\t],\n\t\t[cf_cv_good_bcopy=yes],\n\t\t[cf_cv_good_bcopy=no],\n\t\t[cf_cv_good_bcopy=unknown])\n\t\t])\n\t],[cf_cv_good_bcopy=no])\n\tif test \"$cf_cv_good_bcopy\" = yes ; then\n\t\tAC_DEFINE(USE_OK_BCOPY,1,[Define to 1 to use bcopy when memmove is unavailable])\n\telse\n\t\tAC_DEFINE(USE_MY_MEMMOVE,1,[Define to 1 to use replacement function when memmove is unavailable])\n\tfi\n])])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_NANOSLEEP version: 5 updated: 2017/01/21 11:06:25\ndnl -----------------\ndnl Check for existence of workable nanosleep() function.  Some systems, e.g.,\ndnl AIX 4.x, provide a non-working version.\nAC_DEFUN([CF_FUNC_NANOSLEEP],[\nAC_CACHE_CHECK(if nanosleep really works,cf_cv_func_nanosleep,[\nAC_TRY_RUN([\n#include <stdio.h>\n#include <errno.h>\n#include <time.h>\n\n#ifdef HAVE_SYS_TIME_H\n#include <sys/time.h>\n#endif\n\nint main(void) {\n\tstruct timespec ts1, ts2;\n\tint code;\n\tts1.tv_sec  = 0;\n\tts1.tv_nsec = 750000000;\n\tts2.tv_sec  = 0;\n\tts2.tv_nsec = 0;\n\terrno = 0;\n\tcode = nanosleep(&ts1, &ts2); /* on failure errno is ENOSYS. */\n\t${cf_cv_main_return:-return}(code != 0);\n}\n],\n\t[cf_cv_func_nanosleep=yes],\n\t[cf_cv_func_nanosleep=no],\n\t[cf_cv_func_nanosleep=unknown])])\n\ntest \"$cf_cv_func_nanosleep\" = \"yes\" && AC_DEFINE(HAVE_NANOSLEEP,1,[Define to 1 if we have nanosleep()])\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_OPENPTY version: 6 updated: 2021/01/01 13:31:04\ndnl ---------------\ndnl Check for openpty() function, along with <pty.h> header.  It may need the\ndnl \"util\" library as well.\nAC_DEFUN([CF_FUNC_OPENPTY],\n[\nAC_CHECK_LIB(util,openpty,cf_cv_lib_util=yes,cf_cv_lib_util=no)\nAC_CACHE_CHECK(for openpty header,cf_cv_func_openpty,[\n\tcf_save_LIBS=\"$LIBS\"\n\ttest \"$cf_cv_lib_util\" = yes && { CF_ADD_LIB(util) }\n\tfor cf_header in pty.h libutil.h util.h\n\tdo\n\tAC_TRY_LINK([\n#include <$cf_header>\n],[\n\tint x = openpty((int *)0, (int *)0, (char *)0,\n\t\t\t\t   (struct termios *)0, (struct winsize *)0);\n],[\n\t\tcf_cv_func_openpty=$cf_header\n\t\tbreak\n],[\n\t\tcf_cv_func_openpty=no\n])\n\tdone\n\tLIBS=\"$cf_save_LIBS\"\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_POLL version: 10 updated: 2021/01/04 19:13:57\ndnl ------------\ndnl See if the poll function really works.  Some platforms have poll(), but\ndnl it does not work for terminals or files.\nAC_DEFUN([CF_FUNC_POLL],[\ntty >/dev/null 2>&1 || { AC_CHECK_FUNCS(posix_openpt) }\nAC_CACHE_CHECK(if poll really works,cf_cv_working_poll,[\nAC_TRY_RUN([\n#include <stdlib.h>\n#include <stdio.h>\n#include <unistd.h>\n#include <fcntl.h>\n#ifdef HAVE_POLL_H\n#include <poll.h>\n#else\n#include <sys/poll.h>\n#endif\nint main(void) {\n\tstruct pollfd myfds;\n\tint ret;\n\n\t/* check for Darwin bug with respect to \"devices\" */\n\tmyfds.fd = open(\"/dev/null\", 1);\t/* O_WRONLY */\n\tif (myfds.fd < 0)\n\t\tmyfds.fd = 0;\n\tmyfds.events = POLLIN;\n\tmyfds.revents = 0;\n\n\tret = poll(&myfds, 1, 100);\n\n\tif (ret < 0 || (myfds.revents & POLLNVAL)) {\n\t\tret = -1;\n\t} else {\n\t\tint fd = 0;\n\t\tif (!isatty(fd)) {\n\t\t\tfd = open(\"/dev/tty\", 2);\t/* O_RDWR */\n\t\t}\n#ifdef HAVE_POSIX_OPENPT\n\t\tif (fd < 0) {\n\t\t\tfd = posix_openpt(O_RDWR);\n\t\t}\n#endif\n\n\t\tif (fd >= 0) {\n\t\t\t/* also check with standard input */\n\t\t\tmyfds.fd = fd;\n\t\t\tmyfds.events = POLLIN;\n\t\t\tmyfds.revents = 0;\n\t\t\tret = poll(&myfds, 1, 100);\n\t\t} else {\n\t\t\tret = -1;\n\t\t}\n\t}\n\t${cf_cv_main_return:-return}(ret < 0);\n}],\n\t[cf_cv_working_poll=yes],\n\t[cf_cv_working_poll=no],\n\t[cf_cv_working_poll=unknown])])\ntest \"$cf_cv_working_poll\" = \"yes\" && AC_DEFINE(HAVE_WORKING_POLL,1,[Define to 1 if the poll function seems to work])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_TERMIOS version: 3 updated: 2012/10/06 17:56:13\ndnl ---------------\ndnl Some old/broken variations define tcgetattr() only as a macro in\ndnl termio(s).h\nAC_DEFUN([CF_FUNC_TERMIOS],[\nAC_REQUIRE([CF_STRUCT_TERMIOS])\nAC_CACHE_CHECK(for tcgetattr, cf_cv_have_tcgetattr,[\nAC_TRY_LINK([\n#include <sys/types.h>\n#ifdef HAVE_UNISTD_H\n#include <unistd.h>\n#endif\n#ifdef HAVE_TERMIOS_H\n#include <termios.h>\n#define TTY struct termios\n#else\n#ifdef HAVE_TERMIO_H\n#include <termio.h>\n#define TTY struct termio\n#endif\n#endif\n],[\nTTY foo;\ntcgetattr(1, &foo);],\n[cf_cv_have_tcgetattr=yes],\n[cf_cv_have_tcgetattr=no])])\ntest \"$cf_cv_have_tcgetattr\" = yes && AC_DEFINE(HAVE_TCGETATTR,1,[Define to 1 if we have tcgetattr])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_FUNC_VSSCANF version: 7 updated: 2021/01/01 13:31:04\ndnl ---------------\ndnl Check for vsscanf() function, which is in c9x but generally not in earlier\ndnl versions of C.  It is in the GNU C library, and can often be simulated by\ndnl other functions.\nAC_DEFUN([CF_FUNC_VSSCANF],\n[\nAC_CACHE_CHECK(for vsscanf function or workaround,cf_cv_func_vsscanf,[\nAC_TRY_LINK([\n#include <stdarg.h>\n#include <stdio.h>],[\n\tva_list ap;\n\tvsscanf(\"from\", \"%d\", ap)],[cf_cv_func_vsscanf=vsscanf],[\nAC_TRY_LINK([\n#include <stdarg.h>\n#include <stdio.h>],[\n\tFILE strbuf;\n\tchar *str = \"from\";\n\n\tstrbuf._flag = _IOREAD;\n\tstrbuf._ptr = strbuf._base = (unsigned char *) str;\n\tstrbuf._cnt = strlen(str);\n\tstrbuf._file = _NFILE;\n\treturn (vfscanf(&strbuf, \"%d\", ap))],[cf_cv_func_vsscanf=vfscanf],[\nAC_TRY_LINK([\n#include <stdarg.h>\n#include <stdio.h>],[\n\tFILE strbuf;\n\tchar *str = \"from\";\n\n\tstrbuf._flag = _IOREAD;\n\tstrbuf._ptr = strbuf._base = (unsigned char *) str;\n\tstrbuf._cnt = strlen(str);\n\tstrbuf._file = _NFILE;\n\treturn (_doscan(&strbuf, \"%d\", ap))],[cf_cv_func_vsscanf=_doscan],[\ncf_cv_func_vsscanf=no])])])])\n\ncase \"$cf_cv_func_vsscanf\" in\n(vsscanf) AC_DEFINE(HAVE_VSSCANF,1,[Define to 1 if we have vsscanf]);;\n(vfscanf) AC_DEFINE(HAVE_VFSCANF,1,[Define to 1 if we have vfscanf]);;\n(_doscan) AC_DEFINE(HAVE__DOSCAN,1,[Define to 1 if we have _doscan]);;\nesac\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GCC_ATTRIBUTES version: 24 updated: 2021/03/20 12:00:25\ndnl -----------------\ndnl Test for availability of useful gcc __attribute__ directives to quiet\ndnl compiler warnings.  Though useful, not all are supported -- and contrary\ndnl to documentation, unrecognized directives cause older compilers to barf.\nAC_DEFUN([CF_GCC_ATTRIBUTES],\n[AC_REQUIRE([AC_PROG_FGREP])dnl\nAC_REQUIRE([CF_C11_NORETURN])dnl\n\nif test \"$GCC\" = yes || test \"$GXX\" = yes\nthen\ncat > conftest.i <<EOF\n#ifndef GCC_PRINTF\n#define GCC_PRINTF 0\n#endif\n#ifndef GCC_SCANF\n#define GCC_SCANF 0\n#endif\n#ifndef GCC_NORETURN\n#define GCC_NORETURN /* nothing */\n#endif\n#ifndef GCC_UNUSED\n#define GCC_UNUSED /* nothing */\n#endif\nEOF\nif test \"$GCC\" = yes\nthen\n\tAC_CHECKING([for $CC __attribute__ directives])\ncat > \"conftest.$ac_ext\" <<EOF\n#line __oline__ \"${as_me:-configure}\"\n#include \"confdefs.h\"\n#include \"conftest.h\"\n#include \"conftest.i\"\n#if\tGCC_PRINTF\n#define GCC_PRINTFLIKE(fmt,var) __attribute__((format(printf,fmt,var)))\n#else\n#define GCC_PRINTFLIKE(fmt,var) /*nothing*/\n#endif\n#if\tGCC_SCANF\n#define GCC_SCANFLIKE(fmt,var)  __attribute__((format(scanf,fmt,var)))\n#else\n#define GCC_SCANFLIKE(fmt,var)  /*nothing*/\n#endif\nextern void wow(char *,...) GCC_SCANFLIKE(1,2);\nextern GCC_NORETURN void oops(char *,...) GCC_PRINTFLIKE(1,2);\nextern GCC_NORETURN void foo(void);\nint main(int argc GCC_UNUSED, char *argv[[]] GCC_UNUSED) { (void)argc; (void)argv; return 0; }\nEOF\n\tcf_printf_attribute=no\n\tcf_scanf_attribute=no\n\tfor cf_attribute in scanf printf unused noreturn\n\tdo\n\t\tCF_UPPER(cf_ATTRIBUTE,$cf_attribute)\n\t\tcf_directive=\"__attribute__(($cf_attribute))\"\n\t\techo \"checking for $CC $cf_directive\" 1>&AC_FD_CC\n\n\t\tcase \"$cf_attribute\" in\n\t\t(printf)\n\t\t\tcf_printf_attribute=yes\n\t\t\tcat >conftest.h <<EOF\n#define GCC_$cf_ATTRIBUTE 1\nEOF\n\t\t\t;;\n\t\t(scanf)\n\t\t\tcf_scanf_attribute=yes\n\t\t\tcat >conftest.h <<EOF\n#define GCC_$cf_ATTRIBUTE 1\nEOF\n\t\t\t;;\n\t\t(*)\n\t\t\tcat >conftest.h <<EOF\n#define GCC_$cf_ATTRIBUTE $cf_directive\nEOF\n\t\t\t;;\n\t\tesac\n\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... $cf_attribute)\n\t\t\tcat conftest.h >>confdefs.h\n\t\t\tcase \"$cf_attribute\" in\n\t\t\t(noreturn)\n\t\t\t\tAC_DEFINE_UNQUOTED(GCC_NORETURN,$cf_directive,[Define to noreturn-attribute for gcc])\n\t\t\t\t;;\n\t\t\t(printf)\n\t\t\t\tcf_value='/* nothing */'\n\t\t\t\tif test \"$cf_printf_attribute\" != no ; then\n\t\t\t\t\tcf_value='__attribute__((format(printf,fmt,var)))'\n\t\t\t\t\tAC_DEFINE(GCC_PRINTF,1,[Define to 1 if the compiler supports gcc-like printf attribute.])\n\t\t\t\tfi\n\t\t\t\tAC_DEFINE_UNQUOTED(GCC_PRINTFLIKE(fmt,var),$cf_value,[Define to printf-attribute for gcc])\n\t\t\t\t;;\n\t\t\t(scanf)\n\t\t\t\tcf_value='/* nothing */'\n\t\t\t\tif test \"$cf_scanf_attribute\" != no ; then\n\t\t\t\t\tcf_value='__attribute__((format(scanf,fmt,var)))'\n\t\t\t\t\tAC_DEFINE(GCC_SCANF,1,[Define to 1 if the compiler supports gcc-like scanf attribute.])\n\t\t\t\tfi\n\t\t\t\tAC_DEFINE_UNQUOTED(GCC_SCANFLIKE(fmt,var),$cf_value,[Define to sscanf-attribute for gcc])\n\t\t\t\t;;\n\t\t\t(unused)\n\t\t\t\tAC_DEFINE_UNQUOTED(GCC_UNUSED,$cf_directive,[Define to unused-attribute for gcc])\n\t\t\t\t;;\n\t\t\tesac\n\t\tfi\n\tdone\nelse\n\t${FGREP-fgrep} define conftest.i >>confdefs.h\nfi\nrm -rf ./conftest*\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GCC_VERSION version: 8 updated: 2019/09/07 13:38:36\ndnl --------------\ndnl Find version of gcc, and (because icc/clang pretend to be gcc without being\ndnl compatible), attempt to determine if icc/clang is actually used.\nAC_DEFUN([CF_GCC_VERSION],[\nAC_REQUIRE([AC_PROG_CC])\nGCC_VERSION=none\nif test \"$GCC\" = yes ; then\n\tAC_MSG_CHECKING(version of $CC)\n\tGCC_VERSION=\"`${CC} --version 2>/dev/null | sed -e '2,$d' -e 's/^.*(GCC[[^)]]*) //' -e 's/^.*(Debian[[^)]]*) //' -e 's/^[[^0-9.]]*//' -e 's/[[^0-9.]].*//'`\"\n\ttest -z \"$GCC_VERSION\" && GCC_VERSION=unknown\n\tAC_MSG_RESULT($GCC_VERSION)\nfi\nCF_INTEL_COMPILER(GCC,INTEL_COMPILER,CFLAGS)\nCF_CLANG_COMPILER(GCC,CLANG_COMPILER,CFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GCC_WARNINGS version: 41 updated: 2021/01/01 16:53:59\ndnl ---------------\ndnl Check if the compiler supports useful warning options.  There's a few that\ndnl we don't use, simply because they're too noisy:\ndnl\ndnl\t-Wconversion (useful in older versions of gcc, but not in gcc 2.7.x)\ndnl\t-Winline (usually not worthwhile)\ndnl\t-Wredundant-decls (system headers make this too noisy)\ndnl\t-Wtraditional (combines too many unrelated messages, only a few useful)\ndnl\t-Wwrite-strings (too noisy, but should review occasionally).  This\ndnl\t\tis enabled for ncurses using \"--enable-const\".\ndnl\t-pedantic\ndnl\ndnl Parameter:\ndnl\t$1 is an optional list of gcc warning flags that a particular\ndnl\t\tapplication might want to use, e.g., \"no-unused\" for\ndnl\t\t-Wno-unused\ndnl Special:\ndnl\tIf $with_ext_const is \"yes\", add a check for -Wwrite-strings\ndnl\nAC_DEFUN([CF_GCC_WARNINGS],\n[\nAC_REQUIRE([CF_GCC_VERSION])\nif test \"x$have_x\" = xyes; then CF_CONST_X_STRING fi\ncat > \"conftest.$ac_ext\" <<EOF\n#line __oline__ \"${as_me:-configure}\"\nint main(int argc, char *argv[[]]) { return (argv[[argc-1]] == 0) ; }\nEOF\nif test \"$INTEL_COMPILER\" = yes\nthen\n# The \"-wdXXX\" options suppress warnings:\n# remark #1419: external declaration in primary source file\n# remark #1683: explicit conversion of a 64-bit integral type to a smaller integral type (potential portability problem)\n# remark #1684: conversion from pointer to same-sized integral type (potential portability problem)\n# remark #193: zero used for undefined preprocessing identifier\n# remark #593: variable \"curs_sb_left_arrow\" was set but never used\n# remark #810: conversion from \"int\" to \"Dimension={unsigned short}\" may lose significant bits\n# remark #869: parameter \"tw\" was never referenced\n# remark #981: operands are evaluated in unspecified order\n# warning #279: controlling expression is constant\n\n\tAC_CHECKING([for $CC warning options])\n\tcf_save_CFLAGS=\"$CFLAGS\"\n\tEXTRA_CFLAGS=\"$EXTRA_CFLAGS -Wall\"\n\tfor cf_opt in \\\n\t\twd1419 \\\n\t\twd1683 \\\n\t\twd1684 \\\n\t\twd193 \\\n\t\twd593 \\\n\t\twd279 \\\n\t\twd810 \\\n\t\twd869 \\\n\t\twd981\n\tdo\n\t\tCFLAGS=\"$cf_save_CFLAGS $EXTRA_CFLAGS -$cf_opt\"\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... -$cf_opt)\n\t\t\tEXTRA_CFLAGS=\"$EXTRA_CFLAGS -$cf_opt\"\n\t\tfi\n\tdone\n\tCFLAGS=\"$cf_save_CFLAGS\"\nelif test \"$GCC\" = yes && test \"$GCC_VERSION\" != \"unknown\"\nthen\n\tAC_CHECKING([for $CC warning options])\n\tcf_save_CFLAGS=\"$CFLAGS\"\n\tcf_warn_CONST=\"\"\n\ttest \"$with_ext_const\" = yes && cf_warn_CONST=\"Wwrite-strings\"\n\tcf_gcc_warnings=\"Wignored-qualifiers Wlogical-op Wvarargs\"\n\ttest \"x$CLANG_COMPILER\" = xyes && cf_gcc_warnings=\n\tfor cf_opt in W Wall \\\n\t\tWbad-function-cast \\\n\t\tWcast-align \\\n\t\tWcast-qual \\\n\t\tWdeclaration-after-statement \\\n\t\tWextra \\\n\t\tWinline \\\n\t\tWmissing-declarations \\\n\t\tWmissing-prototypes \\\n\t\tWnested-externs \\\n\t\tWpointer-arith \\\n\t\tWshadow \\\n\t\tWstrict-prototypes \\\n\t\tWundef Wno-inline $cf_gcc_warnings $cf_warn_CONST $1\n\tdo\n\t\tCFLAGS=\"$cf_save_CFLAGS $EXTRA_CFLAGS -$cf_opt\"\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... -$cf_opt)\n\t\t\tcase \"$cf_opt\" in\n\t\t\t(Winline)\n\t\t\t\tcase \"$GCC_VERSION\" in\n\t\t\t\t([[34]].*)\n\t\t\t\t\tCF_VERBOSE(feature is broken in gcc $GCC_VERSION)\n\t\t\t\t\tcontinue;;\n\t\t\t\tesac\n\t\t\t\t;;\n\t\t\t(Wpointer-arith)\n\t\t\t\tcase \"$GCC_VERSION\" in\n\t\t\t\t([[12]].*)\n\t\t\t\t\tCF_VERBOSE(feature is broken in gcc $GCC_VERSION)\n\t\t\t\t\tcontinue;;\n\t\t\t\tesac\n\t\t\t\t;;\n\t\t\tesac\n\t\t\tEXTRA_CFLAGS=\"$EXTRA_CFLAGS -$cf_opt\"\n\t\tfi\n\tdone\n\tCFLAGS=\"$cf_save_CFLAGS\"\nfi\nrm -rf ./conftest*\n\nAC_SUBST(EXTRA_CFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GETOPT_HEADER version: 8 updated: 2021/06/19 19:16:16\ndnl ----------------\ndnl Check for getopt's variables which are commonly defined in stdlib.h,\ndnl unistd.h or (nonstandard) in getopt.h\nAC_DEFUN([CF_GETOPT_HEADER],\n[\nAC_HAVE_HEADERS(unistd.h getopt.h)\nAC_CACHE_CHECK(for header declaring getopt variables,cf_cv_getopt_header,[\ncf_cv_getopt_header=none\nfor cf_header in stdio.h stdlib.h unistd.h getopt.h\ndo\nAC_TRY_COMPILE([\n#include <$cf_header>],\n[int x = optind; char *y = optarg; (void)x; (void)y],\n[cf_cv_getopt_header=$cf_header\n break])\ndone\n])\nif test \"$cf_cv_getopt_header\" != none ; then\n\tAC_DEFINE(HAVE_GETOPT_HEADER,1,[Define to 1 if getopt variables are declared in header])\nfi\nif test \"$cf_cv_getopt_header\" = getopt.h ; then\n\tAC_DEFINE(NEED_GETOPT_H,1,[Define to 1 if we must include getopt.h])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNATPREP_OPT_T version: 1 updated: 2014/08/02 18:37:25\ndnl -----------------\nAC_DEFUN([CF_GNATPREP_OPT_T],[\nAC_CACHE_CHECK(if GNATPREP supports -T option,cf_cv_gnatprep_opt_t,[\ncf_cv_gnatprep_opt_t=no\ngnatprep -T 2>/dev/null >/dev/null && cf_cv_gnatprep_opt_t=yes\n])\ntest \"$cf_cv_gnatprep_opt_t\" = yes && GNATPREP_OPTS=\"-T $GNATPREP_OPTS\"\nAC_SUBST(GNATPREP_OPTS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_GENERICS version: 7 updated: 2021/01/01 13:31:04\ndnl ----------------\nAC_DEFUN([CF_GNAT_GENERICS],\n[\nAC_REQUIRE([CF_GNAT_VERSION])\n\nAC_MSG_CHECKING(if GNAT supports generics)\ncase \"$cf_cv_gnat_version\" in\n(3.1[[1-9]]*|3.[[2-9]]*|[[4-9]].*|[[1-9]][[0-9]].[[0-9]]*|20[[0-9]][[0-9]])\n\tcf_gnat_generics=yes\n\t;;\n(*)\n\tcf_gnat_generics=no\n\t;;\nesac\nAC_MSG_RESULT($cf_gnat_generics)\n\nif test \"$cf_gnat_generics\" = yes\nthen\n\tcf_compile_generics=generics\n\tcf_generic_objects=\"\\${GENOBJS}\"\nelse\n\tcf_compile_generics=\n\tcf_generic_objects=\nfi\n\nAC_SUBST(cf_compile_generics)\nAC_SUBST(cf_generic_objects)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_PROJECTS version: 13 updated: 2021/01/02 17:09:14\ndnl ----------------\ndnl GNAT projects are configured with \".gpr\" project files.\ndnl GNAT libraries are a further development, using the project feature.\nAC_DEFUN([CF_GNAT_PROJECTS],\n[\nAC_REQUIRE([CF_GNAT_VERSION])\nAC_REQUIRE([CF_DISABLE_GNAT_PROJECTS])\n\ncf_gnat_libraries=no\ncf_gnat_projects=no\n\nif test \"$enable_gnat_projects\" != no ; then\nAC_MSG_CHECKING(if GNAT supports project files)\ncase \"$cf_cv_gnat_version\" in\n(3.[[0-9]]*)\n\t;;\n(*)\n\tcase \"$cf_cv_system_name\" in\n\t(cygwin*|msys*)\n\t\t;;\n\t(*)\n\t\trm -rf ./conftest* ./*~conftest*\n\t\tif mkdir conftest.src conftest.bin conftest.lib\n\t\tthen\n\t\t\tcd conftest.src\n\t\t\trm -rf ./conftest* ./*~conftest*\n\t\t\tcat >>library.gpr <<CF_EOF\nproject Library is\n  Kind := External (\"LIB_KIND\");\n  for Library_Name use \"ConfTest\";\n  for Object_Dir use \".\";\n  for Library_ALI_Dir use External(\"LIBRARY_DIR\");\n  for Library_Version use External (\"SONAME\");\n  for Library_Kind use Kind;\n  for Library_Dir use External(\"BUILD_DIR\");\n  Source_Dir := External (\"SOURCE_DIR\");\n  for Source_Dirs use (Source_Dir);\nend Library;\nCF_EOF\n\t\t\tcat >>confpackage.ads <<CF_EOF\npackage ConfPackage is\n   procedure conftest;\nend ConfPackage;\nCF_EOF\n\t\t\tcat >>confpackage.adb <<CF_EOF\nwith Text_IO;\npackage body ConfPackage is\n   procedure conftest is\n   begin\n      Text_IO.Put (\"Hello World\");\n      Text_IO.New_Line;\n   end conftest;\nend ConfPackage;\nCF_EOF\n\t\t\tif ( \"$cf_ada_make\" $ADAFLAGS \\\n\t\t\t\t\t-Plibrary.gpr \\\n\t\t\t\t\t-XBUILD_DIR=\"`cd ../conftest.bin;pwd`\" \\\n\t\t\t\t\t-XLIBRARY_DIR=\"`cd ../conftest.lib;pwd`\" \\\n\t\t\t\t\t-XSOURCE_DIR=\"`pwd`\" \\\n\t\t\t\t\t-XSONAME=libConfTest.so.1 \\\n\t\t\t\t\t-XLIB_KIND=static 1>&AC_FD_CC 2>&1 ) ; then\n\t\t\t\tcf_gnat_projects=yes\n\t\t\tfi\n\t\t\tcd ..\n\t\tfi\n\t\tif test -f conftest.lib/confpackage.ali\n\t\tthen\n\t\t\tcf_gnat_libraries=yes\n\t\tfi\n\t\trm -rf ./conftest* ./*~conftest*\n\t\t;;\n\tesac\n\t;;\nesac\nAC_MSG_RESULT($cf_gnat_projects)\nfi # enable_gnat_projects\n\nif test \"$cf_gnat_projects\" = yes\nthen\n\tAC_MSG_CHECKING(if GNAT supports libraries)\n\tAC_MSG_RESULT($cf_gnat_libraries)\nfi\n\nUSE_OLD_MAKERULES=\"\"\nUSE_GNAT_PROJECTS=\"#\"\nUSE_GNAT_MAKE_GPR=\"#\"\nUSE_GNAT_GPRBUILD=\"#\"\n\nif test \"$cf_gnat_projects\" = yes\nthen\n\tUSE_OLD_MAKERULES=\"#\"\n\tUSE_GNAT_PROJECTS=\"\"\n\tif test \"$cf_cv_VERSION_GPRBUILD\" != no\n\tthen\n\t\tUSE_GNAT_GPRBUILD=\"\"\n\telif test \"$cf_cv_VERSION_GNATMAKE\" != no\n\tthen\n\t\tUSE_GNAT_MAKE_GPR=\"\"\n\telse\n\t\tAC_MSG_WARN(use old makefile rules since tools are missing)\n\tfi\nfi\n\nif test \"$cf_gnat_libraries\" = yes\nthen\n\tUSE_GNAT_LIBRARIES=\"\"\nelse\n\tUSE_GNAT_LIBRARIES=\"#\"\nfi\n\nAC_SUBST(USE_OLD_MAKERULES)\nAC_SUBST(USE_GNAT_PROJECTS)\nAC_SUBST(USE_GNAT_LIBRARIES)\nAC_SUBST(USE_GNAT_MAKE_GPR)\nAC_SUBST(USE_GNAT_GPRBUILD)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_SIGINT version: 2 updated: 2021/01/01 13:31:04\ndnl --------------\ndnl Check if gnat supports SIGINT, and presumably tasking.  For the latter, it\ndnl is noted that gnat may compile a tasking unit even for configurations which\ndnl fail at runtime.\nAC_DEFUN([CF_GNAT_SIGINT],[\nAC_CACHE_CHECK(if GNAT supports SIGINT,cf_cv_gnat_sigint,[\nCF_GNAT_TRY_LINK([with Ada.Interrupts.Names;\n\npackage ConfTest is\n\n   pragma Warnings (Off);  --  the next pragma exists since 3.11p\n   pragma Unreserve_All_Interrupts;\n   pragma Warnings (On);\n\n   protected Process is\n      procedure Stop;\n      function Continue return Boolean;\n      pragma Attach_Handler (Stop, Ada.Interrupts.Names.SIGINT);\n   private\n      Done : Boolean := False;\n   end Process;\n\nend ConfTest;],\n[package body ConfTest is\n   protected body Process is\n      procedure Stop is\n      begin\n         Done := True;\n      end Stop;\n      function Continue return Boolean is\n      begin\n         return not Done;\n      end Continue;\n   end Process;\nend ConfTest;],\n\t[cf_cv_gnat_sigint=yes],\n\t[cf_cv_gnat_sigint=no])])\n\nif test \"$cf_cv_gnat_sigint\" = yes ; then\n\tUSE_GNAT_SIGINT=\"\"\nelse\n\tUSE_GNAT_SIGINT=\"#\"\nfi\nAC_SUBST(USE_GNAT_SIGINT)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_TRY_LINK version: 4 updated: 2021/01/01 13:31:04\ndnl ----------------\ndnl Verify that a test program compiles/links with GNAT.\ndnl $cf_ada_make is set to the program that compiles/links\ndnl $ADAFLAGS may be set to the GNAT flags.\ndnl\ndnl $1 is the text of the spec\ndnl $2 is the text of the body\ndnl $3 is the shell command to execute if successful\ndnl $4 is the shell command to execute if not successful\nAC_DEFUN([CF_GNAT_TRY_LINK],\n[\nrm -rf ./conftest* ./*~conftest*\ncat >>conftest.ads <<CF_EOF\n$1\nCF_EOF\ncat >>conftest.adb <<CF_EOF\n$2\nCF_EOF\nif ( \"$cf_ada_make\" $ADAFLAGS conftest 1>&AC_FD_CC 2>&1 ) ; then\nifelse($3,,      :,[      $3])\nifelse($4,,,[else\n   $4])\nfi\nrm -rf ./conftest* ./*~conftest*\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_TRY_RUN version: 6 updated: 2021/01/01 13:31:04\ndnl ---------------\ndnl Verify that a test program compiles and runs with GNAT\ndnl $cf_ada_make is set to the program that compiles/links\ndnl $ADAFLAGS may be set to the GNAT flags.\ndnl\ndnl $1 is the text of the spec\ndnl $2 is the text of the body\ndnl $3 is the shell command to execute if successful\ndnl $4 is the shell command to execute if not successful\nAC_DEFUN([CF_GNAT_TRY_RUN],\n[\nrm -rf ./conftest* ./*~conftest*\ncat >>conftest.ads <<CF_EOF\n$1\nCF_EOF\ncat >>conftest.adb <<CF_EOF\n$2\nCF_EOF\nif ( \"$cf_ada_make\" $ADAFLAGS conftest 1>&AC_FD_CC 2>&1 ) ; then\n   if ( ./conftest 1>&AC_FD_CC 2>&1 ) ; then\nifelse($3,,      :,[      $3])\nifelse($4,,,[   else\n      $4])\n   fi\nifelse($4,,,[else\n   $4])\nfi\nrm -rf ./conftest* ./*~conftest*\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNAT_VERSION version: 22 updated: 2019/12/31 08:53:54\ndnl ---------------\ndnl $1 = cache variable to update\ndnl $2 = program name\ndnl Verify version of GNAT or related tool\nAC_DEFUN([CF_GNAT_VERSION],\n[\nAC_CACHE_CHECK(for ifelse($2,,gnat,$2) version, cf_cv_gnat_version,[\ncf_cv_gnat_version=`ifelse($2,,${cf_ada_make:-gnatmake},$2) --version 2>&1 | \\\n\tgrep '[[0-9]].[[0-9]][[0-9]]*' |\\\n\tsed -e '2,$d' -e 's/[[^0-9 \\.]]//g' -e 's/^[[ ]]*//' -e 's/ .*//'`\n])\ntest -z \"$cf_cv_gnat_version\" && cf_cv_gnat_version=no\nifelse($1,,,[eval $1=$cf_cv_gnat_version; unset cf_cv_gnat_version])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GNU_SOURCE version: 10 updated: 2018/12/10 20:09:41\ndnl -------------\ndnl Check if we must define _GNU_SOURCE to get a reasonable value for\ndnl _XOPEN_SOURCE, upon which many POSIX definitions depend.  This is a defect\ndnl (or misfeature) of glibc2, which breaks portability of many applications,\ndnl since it is interwoven with GNU extensions.\ndnl\ndnl Well, yes we could work around it...\ndnl\ndnl Parameters:\ndnl\t$1 is the nominal value for _XOPEN_SOURCE\nAC_DEFUN([CF_GNU_SOURCE],\n[\ncf_gnu_xopen_source=ifelse($1,,500,$1)\n\nAC_CACHE_CHECK(if this is the GNU C library,cf_cv_gnu_library,[\nAC_TRY_COMPILE([#include <sys/types.h>],[\n\t#if __GLIBC__ > 0 && __GLIBC_MINOR__ >= 0\n\t\treturn 0;\n\t#elif __NEWLIB__ > 0 && __NEWLIB_MINOR__ >= 0\n\t\treturn 0;\n\t#else\n\t#\terror not GNU C library\n\t#endif],\n\t[cf_cv_gnu_library=yes],\n\t[cf_cv_gnu_library=no])\n])\n\nif test x$cf_cv_gnu_library = xyes; then\n\n\t# With glibc 2.19 (13 years after this check was begun), _DEFAULT_SOURCE\n\t# was changed to help a little.  newlib incorporated the change about 4\n\t# years later.\n\tAC_CACHE_CHECK(if _DEFAULT_SOURCE can be used as a basis,cf_cv_gnu_library_219,[\n\t\tcf_save=\"$CPPFLAGS\"\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D_DEFAULT_SOURCE)\n\t\tAC_TRY_COMPILE([#include <sys/types.h>],[\n\t\t\t#if (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 19) || (__GLIBC__ > 2)\n\t\t\t\treturn 0;\n\t\t\t#elif (__NEWLIB__ == 2 && __NEWLIB_MINOR__ >= 4) || (__GLIBC__ > 3)\n\t\t\t\treturn 0;\n\t\t\t#else\n\t\t\t#\terror GNU C library __GLIBC__.__GLIBC_MINOR__ is too old\n\t\t\t#endif],\n\t\t\t[cf_cv_gnu_library_219=yes],\n\t\t\t[cf_cv_gnu_library_219=no])\n\t\tCPPFLAGS=\"$cf_save\"\n\t])\n\n\tif test \"x$cf_cv_gnu_library_219\" = xyes; then\n\t\tcf_save=\"$CPPFLAGS\"\n\t\tAC_CACHE_CHECK(if _XOPEN_SOURCE=$cf_gnu_xopen_source works with _DEFAULT_SOURCE,cf_cv_gnu_dftsrc_219,[\n\t\t\tCF_ADD_CFLAGS(-D_DEFAULT_SOURCE -D_XOPEN_SOURCE=$cf_gnu_xopen_source)\n\t\t\tAC_TRY_COMPILE([\n\t\t\t\t#include <limits.h>\n\t\t\t\t#include <sys/types.h>\n\t\t\t\t],[\n\t\t\t\t#if (_XOPEN_SOURCE >= $cf_gnu_xopen_source) && (MB_LEN_MAX > 1)\n\t\t\t\t\treturn 0;\n\t\t\t\t#else\n\t\t\t\t#\terror GNU C library is too old\n\t\t\t\t#endif],\n\t\t\t\t[cf_cv_gnu_dftsrc_219=yes],\n\t\t\t\t[cf_cv_gnu_dftsrc_219=no])\n\t\t\t])\n\t\ttest \"x$cf_cv_gnu_dftsrc_219\" = \"xyes\" || CPPFLAGS=\"$cf_save\"\n\telse\n\t\tcf_cv_gnu_dftsrc_219=maybe\n\tfi\n\n\tif test \"x$cf_cv_gnu_dftsrc_219\" != xyes; then\n\n\t\tAC_CACHE_CHECK(if we must define _GNU_SOURCE,cf_cv_gnu_source,[\n\t\tAC_TRY_COMPILE([#include <sys/types.h>],[\n\t\t\t#ifndef _XOPEN_SOURCE\n\t\t\t#error\texpected _XOPEN_SOURCE to be defined\n\t\t\t#endif],\n\t\t\t[cf_cv_gnu_source=no],\n\t\t\t[cf_save=\"$CPPFLAGS\"\n\t\t\t CF_ADD_CFLAGS(-D_GNU_SOURCE)\n\t\t\t AC_TRY_COMPILE([#include <sys/types.h>],[\n\t\t\t\t#ifdef _XOPEN_SOURCE\n\t\t\t\t#error\texpected _XOPEN_SOURCE to be undefined\n\t\t\t\t#endif],\n\t\t\t\t[cf_cv_gnu_source=no],\n\t\t\t\t[cf_cv_gnu_source=yes])\n\t\t\tCPPFLAGS=\"$cf_save\"\n\t\t\t])\n\t\t])\n\n\t\tif test \"$cf_cv_gnu_source\" = yes\n\t\tthen\n\t\tAC_CACHE_CHECK(if we should also define _DEFAULT_SOURCE,cf_cv_default_source,[\n\t\t\tCF_APPEND_TEXT(CPPFLAGS,-D_GNU_SOURCE)\n\t\t\tAC_TRY_COMPILE([#include <sys/types.h>],[\n\t\t\t\t#ifdef _DEFAULT_SOURCE\n\t\t\t\t#error\texpected _DEFAULT_SOURCE to be undefined\n\t\t\t\t#endif],\n\t\t\t\t[cf_cv_default_source=no],\n\t\t\t\t[cf_cv_default_source=yes])\n\t\t\t])\n\t\t\tif test \"$cf_cv_default_source\" = yes\n\t\t\tthen\n\t\t\t\tCF_APPEND_TEXT(CPPFLAGS,-D_DEFAULT_SOURCE)\n\t\t\tfi\n\t\tfi\n\tfi\n\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GPP_LIBRARY version: 13 updated: 2021/01/01 13:31:04\ndnl --------------\ndnl If we're trying to use g++, test if libg++ is installed (a rather common\ndnl problem :-).  If we have the compiler but no library, we'll be able to\ndnl configure, but won't be able to build the c++ demo program.\nAC_DEFUN([CF_GPP_LIBRARY],\n[\ncf_cxx_library=unknown\ncase \"$cf_cv_system_name\" in\n(os2*)\n\tcf_gpp_libname=gpp\n\t;;\n(*)\n\tcf_gpp_libname=g++\n\t;;\nesac\nif test \"$GXX\" = yes; then\n\tAC_MSG_CHECKING([for lib$cf_gpp_libname])\n\tcf_save=\"$LIBS\"\n\tCF_ADD_LIB($cf_gpp_libname)\n\tAC_TRY_LINK([\n#include <$cf_gpp_libname/builtin.h>\n\t],\n\t[two_arg_error_handler_t foo2 = lib_error_handler],\n\t[cf_cxx_library=yes\n\t CF_ADD_LIB($cf_gpp_libname,CXXLIBS)\n\t if test \"$cf_gpp_libname\" = cpp ; then\n\t    AC_DEFINE(HAVE_GPP_BUILTIN_H,1,[Define to 1 if we have gpp builtin.h])\n\t else\n\t    AC_DEFINE(HAVE_GXX_BUILTIN_H,1,[Define to 1 if we have g++ builtin.h])\n\t fi],\n\t[AC_TRY_LINK([\n#include <builtin.h>\n\t],\n\t[two_arg_error_handler_t foo2 = lib_error_handler],\n\t[cf_cxx_library=yes\n\t CF_ADD_LIB($cf_gpp_libname,CXXLIBS)\n\t AC_DEFINE(HAVE_BUILTIN_H,1,[Define to 1 if we have builtin.h])],\n\t[cf_cxx_library=no])])\n\tLIBS=\"$cf_save\"\n\tAC_MSG_RESULT($cf_cxx_library)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GXX_VERSION version: 8 updated: 2017/02/11 14:48:57\ndnl --------------\ndnl Check for version of g++\nAC_DEFUN([CF_GXX_VERSION],[\nAC_REQUIRE([AC_PROG_CPP])\nGXX_VERSION=none\nif test \"$GXX\" = yes; then\n\tAC_MSG_CHECKING(version of ${CXX:-g++})\n\tGXX_VERSION=\"`${CXX:-g++} --version| sed -e '2,$d' -e 's/^.*(GCC) //' -e 's/^[[^0-9.]]*//' -e 's/[[^0-9.]].*//'`\"\n\tif test -z \"$GXX_VERSION\"\n\tthen\n\t\tGXX_VERSION=unknown\n\t\tGXX=no\n\tfi\n\tAC_MSG_RESULT($GXX_VERSION)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_GXX_WARNINGS version: 11 updated: 2021/01/08 16:50:55\ndnl ---------------\ndnl Check if the compiler supports useful warning options.\ndnl\ndnl Most of gcc's options apply to g++, except:\ndnl\t-Wbad-function-cast\ndnl\t-Wmissing-declarations\ndnl\t-Wnested-externs\ndnl\ndnl Omit a few (for now):\ndnl\t-Winline\ndnl\ndnl Parameter:\ndnl\t$1 is an optional list of g++ warning flags that a particular\ndnl\t\tapplication might want to use, e.g., \"no-unused\" for\ndnl\t\t-Wno-unused\ndnl Special:\ndnl\tIf $with_ext_const is \"yes\", add a check for -Wwrite-strings\ndnl\nAC_DEFUN([CF_GXX_WARNINGS],\n[\n\nCF_INTEL_COMPILER(GXX,INTEL_CPLUSPLUS,CXXFLAGS)\nCF_CLANG_COMPILER(GXX,CLANG_CPLUSPLUS,CXXFLAGS)\n\nAC_REQUIRE([CF_GXX_VERSION])\n\nAC_LANG_SAVE\nAC_LANG_CPLUSPLUS\n\ncat > conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\nint main(int argc, char *argv[[]]) { return (argv[[argc-1]] == 0) ; }\nEOF\n\nif test \"$INTEL_CPLUSPLUS\" = yes\nthen\n# The \"-wdXXX\" options suppress warnings:\n# remark #1419: external declaration in primary source file\n# remark #1682: implicit conversion of a 64-bit integral type to a smaller integral type (potential portability problem)\n# remark #1683: explicit conversion of a 64-bit integral type to a smaller integral type (potential portability problem)\n# remark #1684: conversion from pointer to same-sized integral type (potential portability problem)\n# remark #193: zero used for undefined preprocessing identifier\n# remark #593: variable \"curs_sb_left_arrow\" was set but never used\n# remark #810: conversion from \"int\" to \"Dimension={unsigned short}\" may lose significant bits\n# remark #869: parameter \"tw\" was never referenced\n# remark #981: operands are evaluated in unspecified order\n# warning #269: invalid format string conversion\n\n\tAC_CHECKING([for $CC warning options])\n\tcf_save_CXXFLAGS=\"$CXXFLAGS\"\n\tEXTRA_CXXFLAGS=\"-Wall\"\n\tfor cf_opt in \\\n\t\twd1419 \\\n\t\twd1682 \\\n\t\twd1683 \\\n\t\twd1684 \\\n\t\twd193 \\\n\t\twd279 \\\n\t\twd593 \\\n\t\twd810 \\\n\t\twd869 \\\n\t\twd981\n\tdo\n\t\tCXXFLAGS=\"$cf_save_CXXFLAGS $EXTRA_CXXFLAGS -$cf_opt\"\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... -$cf_opt)\n\t\t\tEXTRA_CXXFLAGS=\"$EXTRA_CXXFLAGS -$cf_opt\"\n\t\tfi\n\tdone\n\tCXXFLAGS=\"$cf_save_CXXFLAGS\"\n\nelif test \"$GXX\" = yes\nthen\n\tAC_CHECKING([for $CXX warning options])\n\tcf_save_CXXFLAGS=\"$CXXFLAGS\"\n\tEXTRA_CXXFLAGS=\"-W -Wall\"\n\tcf_gxx_extra_warnings=\"\"\n\ttest \"$with_ext_const\" = yes && cf_gxx_extra_warnings=\"Wwrite-strings\"\n\tcase \"$GXX_VERSION\" in\n\t([[1-2]].*)\n\t\t;;\n\t(*)\n\t\tcf_gxx_extra_warnings=\"$cf_gxx_extra_warnings Weffc++\"\n\t\t;;\n\tesac\n\tfor cf_opt in \\\n\t\tWabi \\\n\t\tfabi-version=0 \\\n\t\tWextra \\\n\t\tWignored-qualifiers \\\n\t\tWlogical-op \\\n\t\tWoverloaded-virtual \\\n\t\tWsign-promo \\\n\t\tWsynth \\\n\t\tWold-style-cast \\\n\t\tWcast-align \\\n\t\tWcast-qual \\\n\t\tWpointer-arith \\\n\t\tWshadow \\\n\t\tWundef $cf_gxx_extra_warnings $1\n\tdo\n\t\tCXXFLAGS=\"$cf_save_CXXFLAGS $EXTRA_CXXFLAGS -Werror -$cf_opt\"\n\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... -$cf_opt)\n\t\t\tEXTRA_CXXFLAGS=\"$EXTRA_CXXFLAGS -$cf_opt\"\n\t\telse\n\t\t\ttest -n \"$verbose\" && AC_MSG_RESULT(... no -$cf_opt)\n\t\tfi\n\tdone\n\tCXXFLAGS=\"$cf_save_CXXFLAGS\"\nfi\n\nrm -rf ./conftest*\nAC_LANG_RESTORE\nAC_SUBST(EXTRA_CXXFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HASHED_DB version: 7 updated: 2015/04/18 08:56:57\ndnl ------------\ndnl Look for an instance of the Berkeley hashed database.\ndnl\ndnl $1 = optional parameter, to specify install-prefix for the database.\nAC_DEFUN([CF_HASHED_DB],\n[\nifelse([$1],,,[\ncase $1 in\n(yes|*able*)\n\t;;\n(*)\n\tif test -d \"$1\" ; then\n\t\tCF_ADD_INCDIR($1/include)\n\t\tCF_ADD_LIBDIR($1/lib)\n\telse\n\t\tcase \"$1\" in\n\t\t(./*|../*|/*)\n\t\t\tAC_MSG_WARN(no such directory $1)\n\t\t\t;;\n\t\t(*)\n\t\t\tCF_FIND_SUB_INCDIR($1)\n\t\t\tCF_FIND_SUB_LIBDIR($1)\n\t\t\t;;\n\t\tesac\n\tfi\nesac\n])\nAC_CHECK_HEADER(db.h,[\nCF_HASHED_DB_VERSION\nif test \"$cf_cv_hashed_db_version\" = unknown ; then\n\tAC_MSG_ERROR(Cannot determine version of db)\nelse\n\tCF_HASHED_DB_LIBS\n\tif test \"$cf_cv_hashed_db_libs\" = unknown ; then\n\t\tAC_MSG_ERROR(Cannot determine library for db)\n\telif test \"$cf_cv_hashed_db_libs\" != default ; then\n\t\tCF_ADD_LIB($cf_cv_hashed_db_libs)\n\tfi\nfi\n],[\n\tAC_MSG_ERROR(Cannot find db.h)\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HASHED_DB_LIBS version: 10 updated: 2021/01/02 17:09:14\ndnl -----------------\ndnl Given that we have the header and version for hashed database, find the\ndnl library information.\nAC_DEFUN([CF_HASHED_DB_LIBS],\n[\nAC_CACHE_CHECK(for db libraries, cf_cv_hashed_db_libs,[\ncf_cv_hashed_db_libs=unknown\nfor cf_db_libs in \"\" db$cf_cv_hashed_db_version db-$cf_cv_hashed_db_version db ''\ndo\n\tcf_save_libs=\"$LIBS\"\n\tif test -n \"$cf_db_libs\"; then\n\t\tCF_ADD_LIB($cf_db_libs)\n\tfi\n\tCF_MSG_LOG(checking for library $cf_db_libs)\n\tAC_TRY_LINK([\n$ac_includes_default\n#include <db.h>\n],[\n\tchar *path = \"/tmp/foo\";\n#ifdef DB_VERSION_MAJOR\n#if DB_VERSION_MAJOR >= 4\n\tDB *result = 0;\n\tdb_create(&result, NULL, 0);\n\tresult->open(result,\n\t\tNULL,\n\t\tpath,\n\t\tpath,\n\t\tDB_HASH,\n\t\tDB_CREATE,\n\t\t0644);\n#elif DB_VERSION_MAJOR >= 3\n\tDB *result = 0;\n\tdb_create(&result, NULL, 0);\n\tresult->open(result,\n\t\tpath,\n\t\tpath,\n\t\tDB_HASH,\n\t\tDB_CREATE,\n\t\t0644);\n#elif DB_VERSION_MAJOR >= 2\n\tDB *result = 0;\n\tdb_open(path,\n\t\tDB_HASH,\n\t\tDB_CREATE,\n\t\t0644,\n\t\t(DB_ENV *) 0,\n\t\t(DB_INFO *) 0,\n\t\t&result);\n#endif /* DB_VERSION_MAJOR */\n#else\n\tDB *result = dbopen(path,\n\t\t     2,\n\t\t     0644,\n\t\t     DB_HASH,\n\t\t     0);\n#endif\n\t${cf_cv_main_return:-return}(result != 0)\n],[\n\tif test -n \"$cf_db_libs\" ; then\n\t\tcf_cv_hashed_db_libs=$cf_db_libs\n\telse\n\t\tcf_cv_hashed_db_libs=default\n\tfi\n\tLIBS=\"$cf_save_libs\"\n\tbreak\n])\n\tLIBS=\"$cf_save_libs\"\ndone\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HASHED_DB_VERSION version: 4 updated: 2014/04/12 16:47:01\ndnl --------------------\ndnl Given that we have the header file for hashed database, find the version\ndnl information.\nAC_DEFUN([CF_HASHED_DB_VERSION],\n[\nAC_CACHE_CHECK(for version of db, cf_cv_hashed_db_version,[\ncf_cv_hashed_db_version=unknown\n\nfor cf_db_version in 1 2 3 4 5 6\ndo\n\tCF_MSG_LOG(checking for db version $cf_db_version)\n\tAC_TRY_COMPILE([\n$ac_includes_default\n#include <db.h>\n\n#ifdef DB_VERSION_MAJOR\n\t/* db2 (DB_VERSION_MAJOR=2) has also DB_VERSION_MINOR, tested with 7 */\n#if $cf_db_version == DB_VERSION_MAJOR\n\t/* ok */\n#else\n\tmake an error\n#endif\n#else\n#if $cf_db_version == 1\n\t/* ok: assuming this is DB 1.8.5 */\n#else\n\tmake an error\n#endif\n#endif\n],[DBT *foo = 0],[\n\tcf_cv_hashed_db_version=$cf_db_version\n\tbreak\n\t])\ndone\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HEADER_PATH version: 15 updated: 2021/01/01 13:31:04\ndnl --------------\ndnl Construct a search-list of directories for a nonstandard header-file\ndnl\ndnl Parameters\ndnl\t$1 = the variable to return as result\ndnl\t$2 = the package name\nAC_DEFUN([CF_HEADER_PATH],\n[\n$1=\n\n# collect the current set of include-directories from compiler flags\ncf_header_path_list=\"\"\nif test -n \"${CFLAGS}${CPPFLAGS}\" ; then\n\tfor cf_header_path in $CPPFLAGS $CFLAGS\n\tdo\n\t\tcase \"$cf_header_path\" in\n\t\t(-I*)\n\t\t\tcf_header_path=`echo \".$cf_header_path\" |sed -e 's/^...//' -e 's,/include$,,'`\n\t\t\tCF_ADD_SUBDIR_PATH($1,$2,include,$cf_header_path,NONE)\n\t\t\tcf_header_path_list=\"$cf_header_path_list [$]$1\"\n\t\t\t;;\n\t\tesac\n\tdone\nfi\n\n# add the variations for the package we are looking for\nCF_SUBDIR_PATH($1,$2,include)\n\ntest \"$includedir\" != NONE && \\\ntest \"$includedir\" != \"/usr/include\" && \\\ntest -d \"$includedir\" && {\n\ttest -d \"$includedir\" &&    $1=\"[$]$1 $includedir\"\n\ttest -d \"$includedir/$2\" && $1=\"[$]$1 $includedir/$2\"\n}\n\ntest \"$oldincludedir\" != NONE && \\\ntest \"$oldincludedir\" != \"/usr/include\" && \\\ntest -d \"$oldincludedir\" && {\n\ttest -d \"$oldincludedir\"    && $1=\"[$]$1 $oldincludedir\"\n\ttest -d \"$oldincludedir/$2\" && $1=\"[$]$1 $oldincludedir/$2\"\n}\n\n$1=\"[$]$1 $cf_header_path_list\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_HELP_MESSAGE version: 4 updated: 2019/12/31 08:53:54\ndnl ---------------\ndnl Insert text into the help-message, for readability, from AC_ARG_WITH.\nAC_DEFUN([CF_HELP_MESSAGE],\n[CF_ACVERSION_CHECK(2.53,[],[\nAC_DIVERT_HELP($1)])dnl\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INCLUDE_DIRS version: 10 updated: 2014/09/19 20:58:42\ndnl ---------------\ndnl Construct the list of include-options according to whether we're building\ndnl in the source directory or using '--srcdir=DIR' option.\nAC_DEFUN([CF_INCLUDE_DIRS],\n[\nif test \"$srcdir\" != \".\"; then\n\tCPPFLAGS=\"-I\\${srcdir}/../include $CPPFLAGS\"\nfi\nCPPFLAGS=\"-I../include $CPPFLAGS\"\nif test \"$srcdir\" != \".\"; then\n\tCPPFLAGS=\"-I\\${srcdir} $CPPFLAGS\"\nfi\nCPPFLAGS=\"-I. $CPPFLAGS\"\nAC_SUBST(CPPFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INSTALL_OPTS version: 2 updated: 2018/08/18 12:19:21\ndnl ---------------\ndnl prompt for/fill-in useful install-program options\nAC_DEFUN([CF_INSTALL_OPTS],\n[\nCF_INSTALL_OPT_S\nCF_INSTALL_OPT_P\nCF_INSTALL_OPT_O\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INSTALL_OPT_O version: 3 updated: 2020/12/31 20:19:42\ndnl ----------------\ndnl Almost all \"install\" programs default to the current user's ownership.\ndnl Almost - MINIX is an exception.\nAC_DEFUN([CF_INSTALL_OPT_O],\n[\nAC_MSG_CHECKING(if install needs to be told about ownership)\ncase `$ac_config_guess` in\n(*minix)\n\twith_install_o=yes\n\t;;\n(*)\n\twith_install_o=no\n\t;;\nesac\n\nAC_MSG_RESULT($with_install_o)\nif test \"x$with_install_o\" = xyes\nthen\n\tINSTALL_OPT_O=\"`id root|sed -e 's/uid=[[0-9]]*(/ -o /' -e 's/gid=[[0-9]]*(/ -g /' -e 's/ [[^=[:space:]]][[^=[:space:]]]*=.*/ /' -e 's/)//g'`\"\nelse\n\tINSTALL_OPT_O=\nfi\n\nAC_SUBST(INSTALL_OPT_O)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INSTALL_OPT_P version: 3 updated: 2021/01/01 13:31:04\ndnl ----------------\ndnl Some install-programs accept a \"-p\" option to preserve file modification\ndnl timestamps.  That can be useful as an install option, as well as a way to\ndnl avoid the need for ranlib after copying a static archive.\nAC_DEFUN([CF_INSTALL_OPT_P],\n[\n: \"${INSTALL:=install}\"\nAC_CACHE_CHECK(if install accepts -p option, cf_cv_install_p,[\n\trm -rf ./conftest*\n\tdate >conftest.in\n\tmkdir conftest.out\n\tsleep 3\n\tif $INSTALL -p conftest.in conftest.out 2>/dev/null\n\tthen\n\t\tif test -f conftest.out/conftest.in\n\t\tthen\n\t\t\ttest conftest.in -nt conftest.out/conftest.in 2>conftest.err && \\\n\t\t\ttest conftest.out/conftest.in -nt conftest.in 2>conftest.err\n\t\t\tif test -s conftest.err\n\t\t\tthen\n\t\t\t\tcf_cv_install_p=no\n\t\t\telse\n\t\t\t\tcf_cv_install_p=yes\n\t\t\tfi\n\t\telse\n\t\t\tcf_cv_install_p=no\n\t\tfi\n\telse\n\t\tcf_cv_install_p=no\n\tfi\n\trm -rf ./conftest*\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INSTALL_OPT_S version: 3 updated: 2021/01/05 19:23:48\ndnl ----------------\ndnl By default, we should strip executables which are installed, but leave the\ndnl ability to suppress that for unit-testing.\nAC_DEFUN([CF_INSTALL_OPT_S],\n[\nAC_MSG_CHECKING(if you want to install stripped executables)\nCF_ARG_DISABLE(stripping,\n\t[  --disable-stripping     do not strip (debug info) installed executables],\n\t[enable_stripping=no],\n\t[enable_stripping=yes])\nAC_MSG_RESULT($enable_stripping)\n\nif test \"$enable_stripping\" = yes\nthen\n\tINSTALL_OPT_S=\"-s\"\nelse\n\tINSTALL_OPT_S=\nfi\nAC_SUBST(INSTALL_OPT_S)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_INTEL_COMPILER version: 8 updated: 2021/01/01 16:53:59\ndnl -----------------\ndnl Check if the given compiler is really the Intel compiler for Linux.  It\ndnl tries to imitate gcc, but does not return an error when it finds a mismatch\ndnl between prototypes, e.g., as exercised by CF_MISSING_CHECK.\ndnl\ndnl This macro should be run \"soon\" after AC_PROG_CC or AC_PROG_CPLUSPLUS, to\ndnl ensure that it is not mistaken for gcc/g++.  It is normally invoked from\ndnl the wrappers for gcc and g++ warnings.\ndnl\ndnl $1 = GCC (default) or GXX\ndnl $2 = INTEL_COMPILER (default) or INTEL_CPLUSPLUS\ndnl $3 = CFLAGS (default) or CXXFLAGS\nAC_DEFUN([CF_INTEL_COMPILER],[\nAC_REQUIRE([AC_CANONICAL_HOST])\nifelse([$2],,INTEL_COMPILER,[$2])=no\n\nif test \"$ifelse([$1],,[$1],GCC)\" = yes ; then\n\tcase \"$host_os\" in\n\t(linux*|gnu*)\n\t\tAC_MSG_CHECKING(if this is really Intel ifelse([$1],GXX,C++,C) compiler)\n\t\tcf_save_CFLAGS=\"$ifelse([$3],,CFLAGS,[$3])\"\n\t\tifelse([$3],,CFLAGS,[$3])=\"$ifelse([$3],,CFLAGS,[$3]) -no-gcc\"\n\t\tAC_TRY_COMPILE([],[\n#ifdef __INTEL_COMPILER\n#else\nmake an error\n#endif\n],[ifelse([$2],,INTEL_COMPILER,[$2])=yes\ncf_save_CFLAGS=\"$cf_save_CFLAGS -we147\"\n],[])\n\t\tifelse([$3],,CFLAGS,[$3])=\"$cf_save_CFLAGS\"\n\t\tAC_MSG_RESULT($ifelse([$2],,INTEL_COMPILER,[$2]))\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_ISASCII version: 4 updated: 2012/10/06 17:56:13\ndnl ----------\ndnl Check if we have either a function or macro for 'isascii()'.\nAC_DEFUN([CF_ISASCII],\n[\nAC_MSG_CHECKING(for isascii)\nAC_CACHE_VAL(cf_cv_have_isascii,[\n\tAC_TRY_LINK([#include <ctype.h>],[int x = isascii(' ')],\n\t[cf_cv_have_isascii=yes],\n\t[cf_cv_have_isascii=no])\n])dnl\nAC_MSG_RESULT($cf_cv_have_isascii)\ntest \"$cf_cv_have_isascii\" = yes && AC_DEFINE(HAVE_ISASCII,1,[Define to 1 if we have isascii()])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LARGEFILE version: 12 updated: 2020/03/19 20:23:48\ndnl ------------\ndnl Add checks for large file support.\nAC_DEFUN([CF_LARGEFILE],[\nifdef([AC_FUNC_FSEEKO],[\n\tAC_SYS_LARGEFILE\n\tif test \"$enable_largefile\" != no ; then\n\tAC_FUNC_FSEEKO\n\n\t# Normally we would collect these definitions in the config.h,\n\t# but (like _XOPEN_SOURCE), some environments rely on having these\n\t# defined before any of the system headers are included.  Another\n\t# case comes up with C++, e.g., on AIX the compiler compiles the\n\t# header files by themselves before looking at the body files it is\n\t# told to compile.  For ncurses, those header files do not include\n\t# the config.h\n\tif test \"$ac_cv_sys_large_files\" != no\n\tthen\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D_LARGE_FILES)\n\tfi\n\tif test \"$ac_cv_sys_largefile_source\" != no\n\tthen\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D_LARGEFILE_SOURCE)\n\tfi\n\tif test \"$ac_cv_sys_file_offset_bits\" != no\n\tthen\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D_FILE_OFFSET_BITS=$ac_cv_sys_file_offset_bits)\n\tfi\n\n\tAC_CACHE_CHECK(whether to use struct dirent64, cf_cv_struct_dirent64,[\n\t\tAC_TRY_COMPILE([\n#pragma GCC diagnostic error \"-Wincompatible-pointer-types\"\n#include <sys/types.h>\n#include <dirent.h>\n\t\t],[\n\t\t/* if transitional largefile support is setup, this is true */\n\t\textern struct dirent64 * readdir(DIR *);\n\t\tstruct dirent64 *x = readdir((DIR *)0);\n\t\tstruct dirent *y = readdir((DIR *)0);\n\t\tint z = x - y;\n\t\t(void)z;\n\t\t],\n\t\t[cf_cv_struct_dirent64=yes],\n\t\t[cf_cv_struct_dirent64=no])\n\t])\n\ttest \"$cf_cv_struct_dirent64\" = yes && AC_DEFINE(HAVE_STRUCT_DIRENT64,1,[Define to 1 if we have struct dirent64])\n\tfi\n])\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_LDFLAGS_STATIC version: 14 updated: 2021/01/02 17:09:14\ndnl -----------------\ndnl Check for compiler/linker flags used to temporarily force usage of static\ndnl libraries.  This depends on the compiler and platform.  Use this to help\ndnl ensure that the linker picks up a given library based on its position in\ndnl the list of linker options and libraries.\nAC_DEFUN([CF_LDFLAGS_STATIC],[\n\nif test \"$GCC\" = yes ; then\n\tcase \"$cf_cv_system_name\" in\n\t(OS/2*|os2*|aix[[4]]*|solaris2.1[[0-9]]|darwin*)\n\t\tLDFLAGS_STATIC=\n\t\tLDFLAGS_SHARED=\n\t\t;;\n\t(*) \t# normally, except when broken\n\t\tLDFLAGS_STATIC=-static\n\t\tLDFLAGS_SHARED=-dynamic\n\t\t;;\n\tesac\nelse\n\tcase \"$cf_cv_system_name\" in\n\t(aix[[4-7]]*) \t# from ld manpage\n\t\tLDFLAGS_STATIC=-bstatic\n\t\tLDFLAGS_SHARED=-bdynamic\n\t\t;;\n\t(hpux*)\t\t# from ld manpage for hpux10.20, hpux11.11\n\t\t# We could also use just \"archive\" and \"shared\".\n\t\tLDFLAGS_STATIC=-Wl,-a,archive_shared\n\t\tLDFLAGS_SHARED=-Wl,-a,shared_archive\n\t\t;;\n\t(irix*)\t\t# from ld manpage IRIX64\n\t\tLDFLAGS_STATIC=-Bstatic\n\t\tLDFLAGS_SHARED=-Bdynamic\n\t\t;;\n\t(osf[[45]]*)\t# from ld manpage osf4.0d, osf5.1\n\t\t# alternative \"-oldstyle_liblookup\" (not in cc manpage)\n\t\tLDFLAGS_STATIC=-noso\n\t\tLDFLAGS_SHARED=-so_archive\n\t\t;;\n\t(solaris2*)\n\t\tLDFLAGS_STATIC=-Bstatic\n\t\tLDFLAGS_SHARED=-Bdynamic\n\t\t;;\n\tesac\nfi\n\nif test -n \"$LDFLAGS_STATIC\" && test -n \"$LDFLAGS_SHARED\"\nthen\n\tAC_MSG_CHECKING(if linker supports switching between static/dynamic)\n\n\trm -f libconftest.a\n\tcat >conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\n#include <stdio.h>\nint cf_ldflags_static(FILE *fp) { return fflush(fp); }\nEOF\n\tif AC_TRY_EVAL(ac_compile) ; then\n\t\t( $AR $ARFLAGS libconftest.a conftest.o ) 2>&AC_FD_CC 1>/dev/null\n\t\t( eval $RANLIB libconftest.a ) 2>&AC_FD_CC >/dev/null\n\tfi\n\trm -f conftest.*\n\n\tcf_save_LIBS=\"$LIBS\"\n\n\tLIBS=\"$LDFLAGS_STATIC -L`pwd` -lconftest $LDFLAGS_DYNAMIC $LIBS\"\n\tAC_TRY_LINK([\n#line __oline__ \"configure\"\n#include <stdio.h>\nint cf_ldflags_static(FILE *fp);\n],[\n\treturn cf_ldflags_static(stdin);\n],[\n\t# some linkers simply ignore the -dynamic\n\tcase x`file \"conftest$ac_exeext\" 2>/dev/null` in\n\t(*static*)\n\t\tcf_ldflags_static=no\n\t\t;;\n\t(*)\n\t\tcf_ldflags_static=yes\n\t\t;;\n\tesac\n],[cf_ldflags_static=no])\n\n\trm -f libconftest.*\n\tLIBS=\"$cf_save_LIBS\"\n\n\tAC_MSG_RESULT($cf_ldflags_static)\n\n\tif test \"$cf_ldflags_static\" != yes\n\tthen\n\t\tLDFLAGS_STATIC=\n\t\tLDFLAGS_SHARED=\n\tfi\nelse\n\tLDFLAGS_STATIC=\n\tLDFLAGS_SHARED=\nfi\n\nAC_SUBST(LDFLAGS_STATIC)\nAC_SUBST(LDFLAGS_SHARED)\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_LD_RPATH_OPT version: 9 updated: 2021/01/01 13:31:04\ndnl ---------------\ndnl For the given system and compiler, find the compiler flags to pass to the\ndnl loader to use the \"rpath\" feature.\nAC_DEFUN([CF_LD_RPATH_OPT],\n[\nAC_REQUIRE([CF_CHECK_CACHE])\n\nLD_RPATH_OPT=\nif test \"x$cf_cv_enable_rpath\" != xno\nthen\n\tAC_MSG_CHECKING(for an rpath option)\n\tcase \"$cf_cv_system_name\" in\n\t(irix*)\n\t\tif test \"$GCC\" = yes; then\n\t\t\tLD_RPATH_OPT=\"-Wl,-rpath,\"\n\t\telse\n\t\t\tLD_RPATH_OPT=\"-rpath \"\n\t\tfi\n\t\t;;\n\t(linux*|gnu*|k*bsd*-gnu|freebsd*)\n\t\tLD_RPATH_OPT=\"-Wl,-rpath,\"\n\t\t;;\n\t(openbsd[[2-9]].*|mirbsd*)\n\t\tLD_RPATH_OPT=\"-Wl,-rpath,\"\n\t\t;;\n\t(dragonfly*)\n\t\tLD_RPATH_OPT=\"-rpath \"\n\t\t;;\n\t(netbsd*)\n\t\tLD_RPATH_OPT=\"-Wl,-rpath,\"\n\t\t;;\n\t(osf*|mls+*)\n\t\tLD_RPATH_OPT=\"-rpath \"\n\t\t;;\n\t(solaris2*)\n\t\tLD_RPATH_OPT=\"-R\"\n\t\t;;\n\t(*)\n\t\t;;\n\tesac\n\tAC_MSG_RESULT($LD_RPATH_OPT)\n\n\tcase \"x$LD_RPATH_OPT\" in\n\t(x-R*)\n\t\tAC_MSG_CHECKING(if we need a space after rpath option)\n\t\tcf_save_LIBS=\"$LIBS\"\n\t\tCF_ADD_LIBS(${LD_RPATH_OPT}$libdir)\n\t\tAC_TRY_LINK(, , cf_rpath_space=no, cf_rpath_space=yes)\n\t\tLIBS=\"$cf_save_LIBS\"\n\t\tAC_MSG_RESULT($cf_rpath_space)\n\t\ttest \"$cf_rpath_space\" = yes && LD_RPATH_OPT=\"$LD_RPATH_OPT \"\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LD_SEARCHPATH version: 4 updated: 2022/08/27 15:43:08\ndnl ----------------\ndnl Try to obtain the linker's search-path, for use in scripts.\ndnl\ndnl Ignore LD_LIBRARY_PATH, etc.\nAC_DEFUN([CF_LD_SEARCHPATH],[\nAC_CACHE_CHECK(for linker search path,cf_cv_ld_searchpath,[\n\nif test \"$cross_compiling\" != yes ; then\n\n# GNU binutils' ld does not involve permissions which may stop ldconfig.\ncf_pathlist=`${LD:-ld} --verbose 2>/dev/null | grep SEARCH_DIR | sed -e 's,SEARCH_DIR[[(\"=]][[(\"=]]*,,g' -e 's/\"[[)]];//gp' | sort -u`\n\n# The -NX options tell newer versions of Linux ldconfig to not attempt to\n# update the cache, which makes it run faster.\ntest -z \"$cf_pathlist\" && \\\n\tcf_pathlist=`(ldconfig -NX -v) 2>/dev/null | sed -e '/^[[ \t]]/d' -e 's/:$//' | sort -u`\n\ntest -z \"$cf_pathlist\" &&\n\tcf_pathlist=`(ldconfig -v) 2>/dev/null | sed -n -e '/^[[ \t]]/d' -e 's/:$//p' | sort -u`\n\n# This works with OpenBSD 6.5, which lists only filenames\ntest -z \"$cf_pathlist\" &&\n\tcf_pathlist=`(ldconfig -v) 2>/dev/null | sed -n -e 's,^Adding \\(.*\\)/.*[$],\\1,p' | sort -u`\n\nif test -z \"$cf_pathlist\"\nthen\n\t# dyld default path with MacOS\n\tif test -f /usr/bin/otool && test \"x`uname -s`\" = xDarwin\n\tthen\n\t\t# do this to bypass check\n\t\tcf_cv_ld_searchpath='$HOME/lib'\n\t\tcf_pathlist=\"/usr/local/lib /lib /usr/lib\"\n\tfi\nfi\n\nif test -z \"$cf_pathlist\"\nthen\n\t# Solaris is \"SunOS\"\n\tif test -f /usr/bin/isainfo && test \"x`uname -s`\" = xSunOS\n\tthen\n\t\tcase x`(isainfo -b)` in\n\t\t(x64)\n\t\t\tcf_pathlist=\"$cf_pathlist /lib/64 /usr/lib/64\"\n\t\t\t;;\n\t\t(x32)\n\t\t\ttest -d /usr/ccs/lib && cf_pathlist=\"$cf_pathlist /usr/ccs/lib\"\n\t\t\tcf_pathlist=\"$cf_pathlist /lib /usr/lib\"\n\t\t\t;;\n\t\t(*)\n\t\t\tAC_MSG_WARN(problem with Solaris architecture)\n\t\t\t;;\n\t\tesac\n\tfi\nfi\n\nif test -z \"$cf_pathlist\"\nthen\n\t# HP-UX\n\tif test x\"`uname -s`\" = xHP-UX\n\tthen\n\t\tcase x`getconf LONG_BIT` in\n\t\t(x64)\n\t\t\tcf_pathlist=\"/usr/lib/hpux64\"\n\t\t\t;;\n\t\t(x*)\n\t\t\tcf_pathlist=\"/usr/lib/hpux32\"\n\t\t\t;;\n\t\tesac\n\tfi\nfi\n\nfi\n\n# If nothing else, assume it is conventional\ntest -z \"$cf_pathlist\" && cf_pathlist=\"/usr/lib /lib\"\n\n# Finally, check that this is only directories\nfor cf_path in [$]0 $cf_pathlist\ndo\n\tif test -d \"$cf_path\"; then\n\t\ttest -n \"$cf_cv_ld_searchpath\" && cf_cv_ld_searchpath=\"${cf_cv_ld_searchpath} \"\n\t\tcf_cv_ld_searchpath=\"${cf_cv_ld_searchpath}${cf_path}\"\n\tfi\ndone\n\n# Ensure that it is nonempty\ntest -z \"$cf_cv_ld_searchpath\" && cf_cv_ld_searchpath=/usr/lib\n])\n\nLD_SEARCHPATH=`echo \"$cf_cv_ld_searchpath\"|sed -e 's/ /|/g'`\nAC_SUBST(LD_SEARCHPATH)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIBRARY_PATH version: 11 updated: 2021/01/01 13:31:04\ndnl ---------------\ndnl Construct a search-list of directories for a nonstandard library-file\ndnl\ndnl Parameters\ndnl\t$1 = the variable to return as result\ndnl\t$2 = the package name\nAC_DEFUN([CF_LIBRARY_PATH],\n[\n$1=\ncf_library_path_list=\"\"\nif test -n \"${LDFLAGS}${LIBS}\" ; then\n\tfor cf_library_path in $LDFLAGS $LIBS\n\tdo\n\t\tcase \"$cf_library_path\" in\n\t\t(-L*)\n\t\t\tcf_library_path=`echo \".$cf_library_path\" |sed -e 's/^...//' -e 's,/lib$,,'`\n\t\t\tCF_ADD_SUBDIR_PATH($1,$2,lib,$cf_library_path,NONE)\n\t\t\tcf_library_path_list=\"$cf_library_path_list [$]$1\"\n\t\t\t;;\n\t\tesac\n\tdone\nfi\n\nCF_SUBDIR_PATH($1,$2,lib)\n\n$1=\"$cf_library_path_list [$]$1\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIBTOOL_VERSION version: 1 updated: 2013/04/06 18:03:09\ndnl ------------------\nAC_DEFUN([CF_LIBTOOL_VERSION],[\nif test -n \"$LIBTOOL\" && test \"$LIBTOOL\" != none\nthen\n\tcf_cv_libtool_version=`$LIBTOOL --version 2>&1 | sed -e '/^$/d' |sed -e '2,$d' -e 's/([[^)]]*)//g' -e 's/^[[^1-9]]*//' -e 's/[[^0-9.]].*//'`\nelse\n\tcf_cv_libtool_version=\nfi\ntest -z \"$cf_cv_libtool_version\" && unset cf_cv_libtool_version\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_PREFIX version: 14 updated: 2021/01/01 13:31:04\ndnl -------------\ndnl Compute the library-prefix for the given host system\ndnl $1 = variable to set\ndefine([CF_LIB_PREFIX],\n[\n\tcase \"$cf_cv_system_name\" in\n\t(OS/2*|os2*)\n\t\tif test \"$DFT_LWR_MODEL\" = libtool; then\n\t\t\tLIB_PREFIX='lib'\n\t\telse\n\t\t\tLIB_PREFIX=''\n\t\tfi\n\t\t;;\n\t(*-msvc*)\n\t\tLIB_PREFIX=''\n\t\t;;\n\t(*)\tLIB_PREFIX='lib'\n\t\t;;\n\tesac\nifelse($1,,,[$1=$LIB_PREFIX])\n\tAC_SUBST(LIB_PREFIX)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_RULES version: 97 updated: 2021/07/17 13:10:54\ndnl ------------\ndnl Append definitions and rules for the given models to the subdirectory\ndnl Makefiles, and the recursion rule for the top-level Makefile.  If the\ndnl subdirectory is a library-source directory, modify the Libs_To_Make list in\ndnl the corresponding makefile to list the models that we'll generate.\ndnl\ndnl For shared libraries, make a list of symbolic links to construct when\ndnl generating each library.  The convention used for Linux is the simplest\ndnl one:\ndnl\tlib<name>.so\t->\ndnl\tlib<name>.so.<major>\t->\ndnl\tlib<name>.so.<maj>.<minor>\ndnl\ndnl Note: Libs_To_Make is mixed case, since it is not a pure autoconf variable.\nAC_DEFUN([CF_LIB_RULES],\n[AC_REQUIRE([AC_PROG_FGREP])dnl\nAC_REQUIRE([CF_MAKE_PHONY])dnl\n\ncf_prefix=$LIB_PREFIX\nAC_REQUIRE([CF_SUBST_NCURSES_VERSION])\n\ncase \"$cf_cv_shlib_version\" in\n(cygdll|msysdll|mingw|msvcdll)\n\tTINFO_NAME=$TINFO_ARG_SUFFIX\n\tTINFO_SUFFIX=.dll\n\t;;\nesac\n\nif test -n \"$TINFO_SUFFIX\" ; then\n\tcase \"$TINFO_SUFFIX\" in\n\t(tw*)\n\t\tTINFO_NAME=\"${TINFO_NAME}tw${EXTRA_SUFFIX}\"\n\t\tTINFO_SUFFIX=`echo \"$TINFO_SUFFIX\" | sed 's/^tw'$EXTRA_SUFFIX'//'`\n\t\t;;\n\t(t*)\n\t\tTINFO_NAME=\"${TINFO_NAME}t${EXTRA_SUFFIX}\"\n\t\tTINFO_SUFFIX=`echo \"$TINFO_SUFFIX\" | sed 's/^t'$EXTRA_SUFFIX'//'`\n\t\t;;\n\t(w*)\n\t\tTINFO_NAME=\"${TINFO_NAME}w${EXTRA_SUFFIX}\"\n\t\tTINFO_SUFFIX=`echo \"$TINFO_SUFFIX\" | sed 's/^w'$EXTRA_SUFFIX'//'`\n\t\t;;\n\tesac\nfi\n\nfor cf_dir in $SRC_SUBDIRS\ndo\n\tif test ! -d \"$srcdir/$cf_dir\" ; then\n\t\tcontinue\n\telif test -f \"$srcdir/$cf_dir/modules\" ; then\n\n\t\tSHARED_LIB=\n\t\tLibs_To_Make=\n\t\tcf_awk_program=\n\t\tif test -n \"${cf_cv_abi_version}\" && test \"x${cf_cv_abi_version}\" != \"x5\"\n\t\tthen\n\t\t\tcf_awk_program=\"$cf_awk_program\\\n/deprecated in ABI${cf_cv_abi_version}/ { next; }\\\n{ sub(\\\"NCURSES([[WT]]+)?\\\", \\\"&${cf_cv_abi_version}\\\"); }\\\n\"\n\t\tfi\n\n\t\tif test \"x$WILDCARD_SYMS\" = xno\n\t\tthen\n\t\t\tcf_awk_program=\"$cf_awk_program\\\n/[[ \t]]_\\\\*;/ { skip=1; next; }\\\n\"\n\t\tfi\n\n\t\tif test \"x$cf_awk_program\" != \"x\"\n\t\tthen\n\t\t\tcat >>$cf_dir/Makefile <<CF_EOF\n\n# Generated by CF_LIB_RULES\nresulting.map: $UNALTERED_SYMS\n\t$AWK 'BEGIN { skip = 1; last=\"\"; } \\\n$cf_awk_program \\\n{ if ( last != \"\" && ( skip == 0 || \\[$]\\[$]0 !~ /}/ ) ) { print last; }\\\n skip = 0; last = \\[$]\\[$]0; } \\\nEND { print last; }' < \"$UNALTERED_SYMS\" >\\[$]@\n\ndistclean::\n\trm -f resulting.map\nCF_EOF\n\t\tfi\n\n\t\tfor cf_item in $cf_LIST_MODELS\n\t\tdo\n\t\t\tCF_LIB_SUFFIX($cf_item,cf_suffix,cf_depsuf)\n\t\t\tif test \"$cf_dir\" = \"c++\"\n\t\t\tthen\n\t\t\t\tCF_MAP_LIB_BASENAME(cf_libname,cxx)\n\t\t\telse\n\t\t\t\tCF_MAP_LIB_BASENAME(cf_libname,$cf_dir)\n\t\t\tfi\n\t\t\ttest -z \"$cf_libname\" && cf_libname=\"$cf_dir\"\n\t\t\tif test \"$cf_item\" = shared ; then\n\t\t\t\tif test -n \"${LIB_SUFFIX}\"\n\t\t\t\tthen\n\t\t\t\t\tcf_shared_suffix=`echo \"$cf_suffix\" | sed 's/^'\"${USE_LIB_SUFFIX}\"'//'`\n\t\t\t\telse\n\t\t\t\t\tcf_shared_suffix=\"$cf_suffix\"\n\t\t\t\tfi\n\t\t\t\tif test \"$cf_cv_do_symlinks\" = yes ; then\n\t\t\t\t\tcf_version_name=\n\n\t\t\t\t\tcase \"$cf_cv_shlib_version\" in\n\t\t\t\t\t(rel)\n\t\t\t\t\t\tcf_version_name=REL_VERSION\n\t\t\t\t\t\t;;\n\t\t\t\t\t(abi)\n\t\t\t\t\t\tcf_version_name=ABI_VERSION\n\t\t\t\t\t\t;;\n\t\t\t\t\tesac\n\n\t\t\t\t\tif test -n \"$cf_version_name\"\n\t\t\t\t\tthen\n\t\t\t\t\t\tcase \"$cf_cv_system_name\" in\n\t\t\t\t\t\t(darwin*)\n\t\t\t\t\t\t\t# \"w\", etc?\n\t\t\t\t\t\t\tcf_suffix=\"${USE_LIB_SUFFIX}\"'.${'$cf_version_name'}'\"$cf_shared_suffix\"\n\t\t\t\t\t\t\t;;\n\t\t\t\t\t\t(*)\n\t\t\t\t\t\t\tcf_suffix=\"$cf_suffix\"'.${'$cf_version_name'}'\n\t\t\t\t\t\t\t;;\n\t\t\t\t\t\tesac\n\t\t\t\t\tfi\n\t\t\t\t\tif test -n \"${USE_LIB_SUFFIX}\"\n\t\t\t\t\tthen\n\t\t\t\t\t\tcf_shared_suffix=`echo \"$cf_suffix\" | sed 's/^'\"${USE_LIB_SUFFIX}\"'//'`\n\t\t\t\t\telse\n\t\t\t\t\t\tcf_shared_suffix=\"$cf_suffix\"\n\t\t\t\t\tfi\n\t\t\t\tfi\n\t\t\t\t# cygwin needs import library, and has unique naming convention\n\t\t\t\t# use autodetected ${cf_prefix} for import lib and static lib, but\n\t\t\t\t# use 'cyg' prefix for shared lib.\n\t\t\t\tcase \"$cf_cv_shlib_version\" in\n\t\t\t\t(cygdll)\n\t\t\t\t\tcf_cygsuf=`echo \"$cf_suffix\" | sed -e 's/\\.dll/\\${ABI_VERSION}.dll/'`\n\t\t\t\t\tcf_add_lib=\"../lib/cyg${cf_libname}${cf_cygsuf}\"\n\t\t\t\t\t;;\n\t\t\t\t(msysdll)\n\t\t\t\t\tcf_cygsuf=`echo \"$cf_suffix\" | sed -e 's/\\.dll/\\${ABI_VERSION}.dll/'`\n\t\t\t\t\tcf_add_lib=\"../lib/msys-${cf_libname}${cf_cygsuf}\"\n\t\t\t\t\t;;\n\t\t\t\t(mingw)\n\t\t\t\t\tcf_cygsuf=`echo \"$cf_suffix\" | sed -e 's/\\.dll/\\${ABI_VERSION}.dll/'`\n\t\t\t\t\tcf_add_lib=\"../lib/lib${cf_libname}${cf_cygsuf}\"\n\t\t\t\t\t;;\n\t\t\t\t(msvcdll)\n\t\t\t\t\tcf_cygsuf=`echo \"$cf_suffix\" | sed -e 's/\\.dll/\\${ABI_VERSION}.dll/'`\n\t\t\t\t\tcf_add_lib=\"../lib/${cf_libname}${cf_cygsuf}\"\n\t\t\t\t\t;;\n\t\t\t\t(*)\n\t\t\t\t\tcf_add_lib=\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\t\tif test -n \"$cf_add_lib\"\n\t\t\t\tthen\n\t\t\t\t\tLibs_To_Make=\"$Libs_To_Make $cf_add_lib\"\n\t\t\t\t\tcontinue\n\t\t\t\tfi\n\t\t\tfi\n\t\t\tcf_add_lib=\"../lib/${cf_prefix}${cf_libname}${cf_suffix}\"\n\t\t\tLibs_To_Make=\"$Libs_To_Make $cf_add_lib\"\n\t\tdone\n\n\t\tif test \"$cf_dir\" = ncurses ; then\n\t\t\tcf_subsets=\"$LIB_SUBSETS\"\n\t\t\tcf_r_parts=\"$cf_subsets\"\n\t\t\tcf_liblist=\"$Libs_To_Make\"\n\n\t\t\twhile test -n \"$cf_r_parts\"\n\t\t\tdo\n\t\t\t\tcf_l_parts=`echo \"$cf_r_parts\" |sed -e 's/ .*$//'`\n\t\t\t\tcf_r_parts=`echo \"$cf_r_parts\" |sed -e 's/^[[^ ]]* //'`\n\t\t\t\tif test \"$cf_l_parts\" != \"$cf_r_parts\" ; then\n\t\t\t\t\tcf_add_lib=\n\t\t\t\t\tcase \"$cf_l_parts\" in\n\t\t\t\t\t(*termlib*)\n\t\t\t\t\t\tcf_add_lib=`echo \"$cf_liblist\" |sed -e s%${LIB_NAME}${USE_LIB_SUFFIX}%${TINFO_LIB_SUFFIX}%g`\n\t\t\t\t\t\t;;\n\t\t\t\t\t(*ticlib*)\n\t\t\t\t\t\tcf_add_lib=`echo \"$cf_liblist\" |sed -e s%${LIB_NAME}${USE_LIB_SUFFIX}%${TICS_LIB_SUFFIX}%g`\n\t\t\t\t\t\t;;\n\t\t\t\t\t(*)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t\t;;\n\t\t\t\t\tesac\n\t\t\t\t\tif test -n \"$cf_add_lib\"; then\n\t\t\t\t\t\tLibs_To_Make=\"$cf_add_lib $Libs_To_Make\"\n\t\t\t\t\tfi\n\t\t\t\telse\n\t\t\t\t\tbreak\n\t\t\t\tfi\n\t\t\tdone\n\t\telse\n\t\t\tcf_subsets=`echo \"$LIB_SUBSETS\" | sed -e 's/^termlib.* //'`\n\t\tfi\n\n\t\tif test \"$cf_dir\" = c++; then\n\t\t\tif test \"x$with_shared_cxx\" != xyes && test -n \"$cf_shared_suffix\"; then\n\t\t\t\tcf_list=\n\t\t\t\tfor cf_item in $Libs_To_Make\n\t\t\t\tdo\n\t\t\t\t\tcase \"$cf_item\" in\n\t\t\t\t\t(*.a)\n\t\t\t\t\t\t;;\n\t\t\t\t\t(*)\n\t\t\t\t\t\tcf_item=`echo \"$cf_item\" | sed -e \"s,\"$cf_shared_suffix\",.a,\"`\n\t\t\t\t\t\t;;\n\t\t\t\t\tesac\n\t\t\t\t\tfor cf_test in $cf_list\n\t\t\t\t\tdo\n\t\t\t\t\t\tif test \"$cf_test\" = \"$cf_item\"\n\t\t\t\t\t\tthen\n\t\t\t\t\t\t\tcf_LIST_MODELS=`echo \"$cf_LIST_MODELS\" | sed -e 's/normal//'`\n\t\t\t\t\t\t\tcf_item=\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tfi\n\t\t\t\t\tdone\n\t\t\t\t\ttest -n \"$cf_item\" && cf_list=\"$cf_list $cf_item\"\n\t\t\t\tdone\n\t\t\t\tLibs_To_Make=\"$cf_list\"\n\t\t\tfi\n\t\tfi\n\n\t\tsed -e \"s%@Libs_To_Make@%$Libs_To_Make%\" \\\n\t\t    -e \"s%@SHARED_LIB@%$SHARED_LIB%\" \\\n\t\t\t\"$cf_dir/Makefile\" >$cf_dir/Makefile.out\n\t\tmv \"$cf_dir/Makefile.out\" \"$cf_dir/Makefile\"\n\n\t\t$AWK -f \"$srcdir/mk-0th.awk\" \\\n\t\t\tlibname=\"${cf_dir}${LIB_SUFFIX}\" subsets=\"$LIB_SUBSETS\" ticlib=\"$TICS_LIB_SUFFIX\" termlib=\"$TINFO_LIB_SUFFIX\" \\\n\t\t\t\"$srcdir/$cf_dir/modules\" >>$cf_dir/Makefile\n\n\t\tfor cf_subset in $cf_subsets\n\t\tdo\n\t\t\tcf_subdirs=\n\t\t\tfor cf_item in $cf_LIST_MODELS\n\t\t\tdo\n\n\t\t\techo \"Appending rules for ${cf_item} model (${cf_dir}: ${cf_subset})\"\n\t\t\tCF_UPPER(cf_ITEM,$cf_item)\n\n\t\t\tCXX_MODEL=$cf_ITEM\n\t\t\tif test \"$CXX_MODEL\" = SHARED; then\n\t\t\t\tcase \"$cf_cv_shlib_version\" in\n\t\t\t\t(cygdll|msysdll|mingw|msvcdll)\n\t\t\t\t\ttest \"x$with_shared_cxx\" = xno && CF_VERBOSE(overriding CXX_MODEL to SHARED)\n\t\t\t\t\twith_shared_cxx=yes\n\t\t\t\t\t;;\n\t\t\t\t(*)\n\t\t\t\t\ttest \"x$with_shared_cxx\" = xno && CXX_MODEL=NORMAL\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\tfi\n\n\t\t\tCF_LIB_SUFFIX($cf_item,cf_suffix,cf_depsuf)\n\t\t\tCF_OBJ_SUBDIR($cf_item,cf_subdir)\n\n\t\t\t# Test for case where we build libtinfo with a different name.\n\t\t\tcf_libname=$cf_dir\n\t\t\tif test \"$cf_dir\" = ncurses ; then\n\t\t\t\tcase \"$cf_subset\" in\n\t\t\t\t(*base*)\n\t\t\t\t\tcf_libname=${cf_libname}$USE_LIB_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(*termlib*)\n\t\t\t\t\tcf_libname=$TINFO_LIB_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(ticlib*)\n\t\t\t\t\tcf_libname=$TICS_LIB_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\telif test \"$cf_dir\" = c++ ; then\n\t\t\t\tCF_MAP_LIB_BASENAME(cf_libname,cxx)\n\t\t\t\tcf_libname=${cf_libname}$USE_LIB_SUFFIX\n\t\t\telse\n\t\t\t\tCF_MAP_LIB_BASENAME(cf_libname,$cf_dir)\n\t\t\t\tcf_libname=${cf_libname}$USE_LIB_SUFFIX\n\t\t\tfi\n\t\t\tif test -n \"${USE_ARG_SUFFIX}\" ; then\n\t\t\t\t# undo $USE_LIB_SUFFIX add-on in CF_LIB_SUFFIX\n\t\t\t\tcf_suffix=`echo \"$cf_suffix\" |sed -e \"s%^${USE_LIB_SUFFIX}%%\"`\n\t\t\tfi\n\n\t\t\t# These dependencies really are for development, not\n\t\t\t# builds, but they are useful in porting, too.\n\t\t\tcf_depend=\"../include/ncurses_cfg.h\"\n\t\t\tif test \"$srcdir\" = \".\"; then\n\t\t\t\tcf_reldir=\".\"\n\t\t\telse\n\t\t\t\tcf_reldir=\"\\${srcdir}\"\n\t\t\tfi\n\n\t\t\tif test -f \"$srcdir/$cf_dir/$cf_dir.priv.h\" ; then\n\t\t\t\tcf_depend=\"$cf_depend $cf_reldir/$cf_dir.priv.h\"\n\t\t\telif test -f \"$srcdir/$cf_dir/curses.priv.h\" ; then\n\t\t\t\tcf_depend=\"$cf_depend $cf_reldir/curses.priv.h\"\n\t\t\tfi\n\n \t\t\tcf_dir_suffix=\n \t\t\told_cf_suffix=\"$cf_suffix\"\n \t\t\tif test \"$cf_cv_shlib_version_infix\" = yes ; then\n\t\t\tif test -n \"$USE_LIB_SUFFIX\" ; then\n\t\t\t\tcase \"$USE_LIB_SUFFIX\" in\n\t\t\t\t(tw*)\n\t\t\t\t\tcf_libname=`echo \"$cf_libname\" | sed 's/tw'$EXTRA_SUFFIX'$//'`\n\t\t\t\t\tcf_suffix=`echo \"$cf_suffix\" | sed 's/^tw'$EXTRA_SUFFIX'//'`\n\t\t\t\t\tcf_dir_suffix=tw$EXTRA_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(t*)\n\t\t\t\t\tcf_libname=`echo \"$cf_libname\" | sed 's/t'$EXTRA_SUFFIX'$//'`\n\t\t\t\t\tcf_suffix=`echo \"$cf_suffix\" | sed 's/^t'$EXTRA_SUFFIX'//'`\n\t\t\t\t\tcf_dir_suffix=t$EXTRA_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(w*)\n\t\t\t\t\tcf_libname=`echo \"$cf_libname\" | sed 's/w'$EXTRA_SUFFIX'$//'`\n\t\t\t\t\tcf_suffix=`echo \"$cf_suffix\" | sed 's/^w'$EXTRA_SUFFIX'//'`\n\t\t\t\t\tcf_dir_suffix=w$EXTRA_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\t(*)\n\t\t\t\t\tcf_libname=`echo \"$cf_libname\" | sed 's/'$EXTRA_SUFFIX'$//'`\n\t\t\t\t\tcf_suffix=`echo \"$cf_suffix\" | sed 's/^'$EXTRA_SUFFIX'//'`\n\t\t\t\t\tcf_dir_suffix=$EXTRA_SUFFIX\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\tfi\n \t\t\tfi\n\n\t\t\t$AWK -f \"$srcdir/mk-1st.awk\" \\\n\t\t\t\tname=${cf_libname}${cf_dir_suffix} \\\n\t\t\t\ttraces=$LIB_TRACING \\\n\t\t\t\tMODEL=$cf_ITEM \\\n\t\t\t\tCXX_MODEL=$CXX_MODEL \\\n\t\t\t\tLIB_SUFFIX=$LIB_SUFFIX \\\n\t\t\t\tUSE_LIB_SUFFIX=$USE_LIB_SUFFIX \\\n\t\t\t\tmake_phony=\"${cf_cv_make_PHONY:-no}\" \\\n\t\t\t\tmodel=$cf_subdir \\\n\t\t\t\tprefix=$cf_prefix \\\n\t\t\t\tsuffix=$cf_suffix \\\n\t\t\t\tsubset=$cf_subset \\\n\t\t\t\tdriver=$cf_cv_term_driver \\\n\t\t\t\tSymLink=\"$LN_S\" \\\n\t\t\t\tTermlibRoot=$TINFO_NAME \\\n\t\t\t\tTermlibSuffix=$TINFO_SUFFIX \\\n\t\t\t\tShlibVer=$cf_cv_shlib_version \\\n\t\t\t\tShlibVerInfix=$cf_cv_shlib_version_infix \\\n\t\t\t\tReLink=${cf_cv_do_relink:-no} \\\n\t\t\t\tReRanlib=${cf_cv_do_reranlib:-yes} \\\n\t\t\t\tDoLinks=$cf_cv_do_symlinks \\\n\t\t\t\trmSoLocs=$cf_cv_rm_so_locs \\\n\t\t\t\tldconfig=\"$LDCONFIG\" \\\n\t\t\t\toverwrite=$WITH_OVERWRITE \\\n\t\t\t\tdepend=\"$cf_depend\" \\\n\t\t\t\thost=\"$host\" \\\n\t\t\t\tlibtool_version=\"$LIBTOOL_VERSION\" \\\n\t\t\t\t\"$srcdir/$cf_dir/modules\" >>$cf_dir/Makefile\n\n\t\t\tcf_suffix=\"$old_cf_suffix\"\n\n\t\t\tfor cf_subdir2 in $cf_subdirs lib\n\t\t\tdo\n\t\t\t\ttest \"$cf_subdir\" = \"$cf_subdir2\" && break\n\t\t\tdone\n\t\t\ttest \"${cf_subset}.${cf_subdir2}\" != \"${cf_subset}.${cf_subdir}\" && \\\n\t\t\t$AWK -f \"$srcdir/mk-2nd.awk\" \\\n\t\t\t\tname=$cf_dir \\\n\t\t\t\ttraces=$LIB_TRACING \\\n\t\t\t\tMODEL=$cf_ITEM \\\n\t\t\t\tmodel=$cf_subdir \\\n\t\t\t\tsubset=$cf_subset \\\n\t\t\t\tsrcdir=$srcdir \\\n\t\t\t\techo=$WITH_ECHO \\\n\t\t\t\tcrenames=$cf_cv_prog_CC_c_o \\\n\t\t\t\tcxxrenames=$cf_cv_prog_CXX_c_o \\\n\t\t\t\t\"$srcdir/$cf_dir/modules\" >>$cf_dir/Makefile\n\t\t\tcf_subdirs=\"$cf_subdirs $cf_subdir\"\n\t\t\tdone\n\t\tdone\n\tfi\n\n\techo '\t( cd '$cf_dir' && ${MAKE} ${TOP_MFLAGS} [$]@ )' >>Makefile\ndone\n\necho >> Makefile\necho '# generated by CF_LIB_RULES' >> Makefile\n\nif test \"x$cf_cv_make_PHONY\" = xyes ; then\n\tcat >> Makefile <<-CF_EOF\n\n\t.PHONY :\tlibs\n\t.PHONY :\tlintlib\n\t.PHONY :\tinstall.includes\n\t.PHONY :\tuninstall.includes\n\t.PHONY :\tinstall.libs\n\t.PHONY :\tuninstall.libs\nCF_EOF\nfi\n\nfor cf_dir in $SRC_SUBDIRS\ndo\n\tif test ! -d \"$srcdir/$cf_dir\" ; then\n\t\tcontinue\n\tfi\n\n\tif test -f \"$cf_dir/Makefile\" ; then\n\t\tcase \"$cf_dir\" in\n\t\t(Ada95)\n\t\t\techo 'libs \\' >> Makefile\n\t\t\techo 'install.libs \\' >> Makefile\n\t\t\techo 'uninstall.libs ::' >> Makefile\n\t\t\techo '\t( cd '$cf_dir' && ${MAKE} ${TOP_MFLAGS} [$]@ )' >> Makefile\n\t\t\t;;\n\t\tesac\n\tfi\n\n\tif test -f \"$srcdir/$cf_dir/modules\" ; then\n\n\t\tif test \"x$cf_cv_make_PHONY\" = xyes ; then\n\t\t\tcat >> Makefile <<-CF_EOF\n\n\t\t\t.PHONY :\tinstall.$cf_dir\n\t\t\t.PHONY :\tuninstall.$cf_dir\nCF_EOF\n\t\tfi\n\n\t\techo >> Makefile\n\t\tif test -f \"$srcdir/$cf_dir/headers\" ; then\ncat >> Makefile <<CF_EOF\ninstall.includes \\\\\nuninstall.includes \\\\\nCF_EOF\n\t\tfi\n\ncat >> Makefile <<CF_EOF\nlint \\\\\nlibs \\\\\nlintlib \\\\\ninstall.libs \\\\\nuninstall.libs \\\\\ninstall.$cf_dir \\\\\nuninstall.$cf_dir ::\n\t( cd \"$cf_dir\" && \\${MAKE} \\${TOP_MFLAGS} \\[$]@ )\nCF_EOF\n\telif test -f \"$srcdir/$cf_dir/headers\" ; then\ncat >> Makefile <<CF_EOF\n\nlibs \\\\\ninstall.libs \\\\\nuninstall.libs \\\\\ninstall.includes \\\\\nuninstall.includes ::\n\t( cd \"$cf_dir\" && \\${MAKE} \\${TOP_MFLAGS} \\[$]@ )\nCF_EOF\nfi\ndone\n\nif test \"x$cf_cv_make_PHONY\" = xyes ; then\n\tcat >> Makefile <<-CF_EOF\n\n\t.PHONY :\tinstall.data\n\t.PHONY :\tuninstall.data\nCF_EOF\nfi\n\nif test \"x$cf_with_db_install\" = xyes; then\ncat >> Makefile <<CF_EOF\n\ninstall.libs uninstall.libs \\\\\ninstall.data uninstall.data ::\n$MAKE_TERMINFO\t( cd misc && \\${MAKE} \\${TOP_MFLAGS} \\[$]@ )\nCF_EOF\nelse\ncat >> Makefile <<CF_EOF\n\ninstall.libs uninstall.libs ::\n\t( cd misc && \\${MAKE} \\${TOP_MFLAGS} \\[$]@ )\nCF_EOF\nfi\n\nif test \"x$cf_with_manpages\" = xyes; then\n\nif test \"x$cf_cv_make_PHONY\" = xyes ; then\n\tcat >> Makefile <<-CF_EOF\n\n\t.PHONY :\tinstall.man\n\t.PHONY :\tuninstall.man\nCF_EOF\nfi\n\ncat >> Makefile <<CF_EOF\n\ninstall.man \\\\\nuninstall.man ::\n\t( cd man && \\${MAKE} \\${TOP_MFLAGS} \\[$]@ )\nCF_EOF\nfi\n\ncat >> Makefile <<CF_EOF\n\ndistclean ::\n\trm -f config.cache config.log config.status Makefile include/ncurses_cfg.h\n\trm -f headers.sh headers.sed mk_shared_lib.sh\n\trm -f edit_man.* man_alias.*\n\trm -rf \\${DIRS_TO_MAKE}\nCF_EOF\n\n# Special case: tack's manpage lives in its own directory.\nif test \"x$cf_with_manpages\" = xyes; then\nif test \"x$cf_with_tack\" = \"xyes\"; then\ncat >> Makefile <<CF_EOF\n\ninstall.man \\\\\nuninstall.man ::\n\t( cd tack && \\${MAKE} \\${TOP_MFLAGS} \\[$]@ )\nCF_EOF\nfi\nfi\n\ndnl If we're installing into a subdirectory of /usr/include, etc., we should\ndnl prepend the subdirectory's name to the \"#include\" paths.  It won't hurt\ndnl anything, and will make it more standardized.  It's awkward to decide this\ndnl at configuration because of quoting, so we'll simply make all headers\ndnl installed via a script that can do the right thing.\n\nrm -f headers.sed headers.sh\n\ndnl ( generating this script makes the makefiles a little tidier :-)\necho creating headers.sh\ncat >headers.sh <<CF_EOF\n#! $SHELL\n# This shell script is generated by the 'configure' script.  It is invoked in a\n# subdirectory of the build tree.  It generates a sed-script in the parent\n# directory that is used to adjust includes for header files that reside in a\n# subdirectory of /usr/include, etc.\nPRG=\"\"\nwhile test \\[$]# != 3\ndo\nPRG=\"\\$PRG \\[$]1\"; shift\ndone\nDST=\\[$]1\nREF=\\[$]2\nSRC=\\[$]3\nTMPSRC=\\${TMPDIR:-/tmp}/\\`basename \\$SRC\\`\\$\\$\nTMPSED=\\${TMPDIR:-/tmp}/headers.sed\\$\\$\necho installing \\$SRC in \\$DST\nCF_EOF\n\nif test \"$WITH_CURSES_H\" = yes; then\n\tcat >>headers.sh <<CF_EOF\ncase \\$DST in\n(/*/include/*)\n\tEND=\\`basename \\$DST\\`\n\tfor i in \\`cat \\$REF/../*/headers |${FGREP-fgrep} -v \"#\"\\`\n\tdo\n\t\tNAME=\\`basename \\$i\\`\n\t\techo \"s/<\\$NAME>/<\\$END\\/\\$NAME>/\" >> \\$TMPSED\n\tdone\n\t;;\n(*)\n\techo \"\" >> \\$TMPSED\n\t;;\nesac\nCF_EOF\n\nelse\n\tcat >>headers.sh <<CF_EOF\ncase \\$DST in\n(/*/include/*)\n\tEND=\\`basename \\$DST\\`\n\tfor i in \\`cat \\$REF/../*/headers |${FGREP-fgrep} -v \"#\"\\`\n\tdo\n\t\tNAME=\\`basename \\$i\\`\n\t\tif test \"\\$NAME\" = \"curses.h\"\n\t\tthen\n\t\t\techo \"s/<curses.h>/<ncurses.h>/\" >> \\$TMPSED\n\t\t\tNAME=ncurses.h\n\t\tfi\n\t\techo \"s/<\\$NAME>/<\\$END\\/\\$NAME>/\" >> \\$TMPSED\n\tdone\n\t;;\n(*)\n\techo \"s/<curses.h>/<ncurses.h>/\" >> \\$TMPSED\n\t;;\nesac\nCF_EOF\nfi\ncat >>headers.sh <<CF_EOF\nrm -f \\$TMPSRC\nsed -f \\$TMPSED \\$SRC > \\$TMPSRC\nNAME=\\`basename \\$SRC\\`\nCF_EOF\nif test \"$WITH_CURSES_H\" != yes; then\n\tcat >>headers.sh <<CF_EOF\ntest \"\\$NAME\" = \"curses.h\" && NAME=ncurses.h\nCF_EOF\nfi\ncat >>headers.sh <<CF_EOF\n# Just in case someone gzip'd manpages, remove the conflicting copy.\ntest -f \\$DST/\\$NAME.gz && rm -f \\$DST/\\$NAME.gz\n\neval \\$PRG \\$TMPSRC \\$DST/\\$NAME\nrm -f \\$TMPSRC \\$TMPSED\nCF_EOF\n\nchmod 0755 headers.sh\n\nfor cf_dir in $SRC_SUBDIRS\ndo\n\tif test ! -d \"$srcdir/$cf_dir\" ; then\n\t\tcontinue\n\tfi\n\n\tif test -f \"$srcdir/$cf_dir/headers\" ; then\n\t\t$AWK -f \"$srcdir/mk-hdr.awk\" \\\n\t\t\tsubset=\"$LIB_SUBSETS\" \\\n\t\t\tcompat=\"$WITH_CURSES_H\" \\\n\t\t\t\"$srcdir/$cf_dir/headers\" >>$cf_dir/Makefile\n\tfi\n\n\tif test -f \"$srcdir/$cf_dir/modules\" ; then\n\t\tif test \"$cf_dir\" != \"c++\" ; then\n\t\t\tif test \"x$cf_cv_make_PHONY\" = xyes ; then\n\t\t\t\tcat >> $cf_dir/Makefile <<-CF_EOF\n\n\t\t\t\t.PHONY :\tdepend\nCF_EOF\n\t\t\tfi\n\n\t\t\tcat >>$cf_dir/Makefile <<\"CF_EOF\"\ndepend : ${AUTO_SRC}\n\tmakedepend -- ${CPPFLAGS} -- ${C_SRC}\n\n# DO NOT DELETE THIS LINE -- make depend depends on it.\nCF_EOF\n\t\tfi\n\tfi\ndone\nAC_SUBST(Libs_To_Make)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_SONAME version: 9 updated: 2021/01/04 18:48:01\ndnl -------------\ndnl Find the and soname for the given shared library.  Set the cache variable\ndnl cf_cv_$3_soname to this, unless it is not found.  Then set the cache\ndnl variable to \"unknown\".\ndnl\ndnl $1 = headers\ndnl $2 = code\ndnl $3 = library name\nAC_DEFUN([CF_LIB_SONAME],\n[AC_REQUIRE([AC_PROG_FGREP])dnl\n\nAC_CACHE_CHECK(for soname of $3 library,cf_cv_$3_soname,[\n\ncf_cv_$3_soname=unknown\nif test \"$cross_compiling\" != yes ; then\ncat >conftest.$ac_ext <<CF_EOF\n$1\nint main(void)\n{\n$2\n\t${cf_cv_main_return:-return}(0);\n}\nCF_EOF\ncf_save_LIBS=\"$LIBS\"\n\tCF_ADD_LIB($3)\n\tif AC_TRY_EVAL(ac_compile) ; then\n\t\tif AC_TRY_EVAL(ac_link) ; then\n\t\t\tcf_cv_$3_soname=\"`ldd \\\"conftest$ac_exeext\\\" 2>/dev/null | sed -e 's,^.*/,,' -e 's, .*$,,' | ${FGREP-fgrep} lib$3.`\"\n\t\t\ttest -z \"$cf_cv_$3_soname\" && cf_cv_$3_soname=unknown\n\t\tfi\n\tfi\nrm -rf ./conftest*\nLIBS=\"$cf_save_LIBS\"\nfi\n])\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_SUFFIX version: 28 updated: 2021/01/01 16:53:59\ndnl -------------\ndnl Compute the library file-suffix from the given model name\ndnl $1 = model name\ndnl $2 = variable to set (the nominal library suffix)\ndnl $3 = dependency variable to set (actual filename)\ndnl The variable $LIB_SUFFIX, if set, prepends the variable to set.\nAC_DEFUN([CF_LIB_SUFFIX],\n[\n\tcase X$1 in\n\t(Xlibtool)\n\t\t$2='.la'\n\t\t$3=[$]$2\n\t\t;;\n\t(Xdebug)\n\t\tcase \"$cf_cv_system_name\" in\n\t\t(*-msvc*)\n\t\t\t$2='_g.lib'\n\t\t\t;;\n\t\t(*)\n\t\t\t$2='_g.a'\n\t\t\t;;\n\t\tesac\n\t\t$3=[$]$2\n\t\t;;\n\t(Xprofile)\n\t\tcase \"$cf_cv_system_name\" in\n\t\t(*-msvc*)\n\t\t\t$2='_p.lib'\n\t\t\t;;\n\t\t(*)\n\t\t\t$2='_p.a'\n\t\t\t;;\n\t\tesac\n\t\t$3=[$]$2\n\t\t;;\n\t(Xshared)\n\t\tcase \"$cf_cv_system_name\" in\n\t\t(aix[[5-7]]*)\n\t\t\t$2='.so'\n\t\t\t$3=[$]$2\n\t\t\t;;\n\t\t(*-msvc*)\n\t\t\t$2='.dll'\n\t\t\t$3='.dll.lib'\n\t\t\t;;\n\t\t(cygwin*|msys*|mingw*)\n\t\t\t$2='.dll'\n\t\t\t$3='.dll.a'\n\t\t\t;;\n\t\t(darwin*)\n\t\t\t$2='.dylib'\n\t\t\t$3=[$]$2\n\t\t\t;;\n\t\t(hpux*)\n\t\t\tcase \"$target\" in\n\t\t\t(ia64*)\n\t\t\t\t$2='.so'\n\t\t\t\t$3=[$]$2\n\t\t\t\t;;\n\t\t\t(*)\n\t\t\t\t$2='.sl'\n\t\t\t\t$3=[$]$2\n\t\t\t\t;;\n\t\t\tesac\n\t\t\t;;\n\t\t(*)\n\t\t\t$2='.so'\n\t\t\t$3=[$]$2\n\t\t\t;;\n\t\tesac\n\t\t;;\n\t(*)\n\t\tcase \"$target\" in\n\t\t(*-msvc*)\n\t\t\t$2='.lib'\n\t\t\t;;\n\t\t(*)\n\t\t\t$2='.a'\n\t\t\t;;\n\t\tesac\n\t\t$3=[$]$2\n\t\t;;\n\tesac\n\tif test -n \"${LIB_SUFFIX}${EXTRA_SUFFIX}\"\n\tthen\n\t\t$2=\"${LIB_SUFFIX}${EXTRA_SUFFIX}[$]{$2}\"\n\t\t$3=\"${LIB_SUFFIX}${EXTRA_SUFFIX}[$]{$3}\"\n\tfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LIB_TYPE version: 5 updated: 2015/04/17 21:13:04\ndnl -----------\ndnl Compute the string to append to -library from the given model name\ndnl $1 = model name\ndnl $2 = variable to set\ndnl The variable $LIB_SUFFIX, if set, prepends the variable to set.\nAC_DEFUN([CF_LIB_TYPE],\n[\n\tcase $1 in\n\t(libtool) $2=''   ;;\n\t(normal)  $2=''   ;;\n\t(debug)   $2='_g' ;;\n\t(profile) $2='_p' ;;\n\t(shared)  $2=''   ;;\n\tesac\n\ttest -n \"$LIB_SUFFIX\" && $2=\"${LIB_SUFFIX}[$]{$2}\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LINK_DATAONLY version: 13 updated: 2020/02/08 15:59:30\ndnl ----------------\ndnl Some systems have a non-ANSI linker that doesn't pull in modules that have\ndnl only data (i.e., no functions), for example NeXT.  On those systems we'll\ndnl have to provide wrappers for global tables to ensure they're linked\ndnl properly.\nAC_DEFUN([CF_LINK_DATAONLY],\n[\nAC_MSG_CHECKING([if data-only library module links])\nAC_CACHE_VAL(cf_cv_link_dataonly,[\n\trm -f conftest.a\n\tcat >conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\nint\ttestdata[[3]] = { 123, 456, 789 };\nEOF\n\tif AC_TRY_EVAL(ac_compile) ; then\n\t\tmv conftest.o data.o && \\\n\t\t( $AR $ARFLAGS conftest.a data.o ) 2>&AC_FD_CC 1>/dev/null\n\tfi\n\trm -f conftest.$ac_ext data.o\n\tcat >conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\nint\ttestfunc(void)\n{\n#if defined(NeXT)\n\t${cf_cv_main_return:-return}(1);\t/* I'm told this linker is broken */\n#else\n\textern int testdata[[3]];\n\treturn testdata[[0]] == 123\n\t   &&  testdata[[1]] == 456\n\t   &&  testdata[[2]] == 789;\n#endif\n}\nEOF\n\tif AC_TRY_EVAL(ac_compile); then\n\t\tmv conftest.o func.o && \\\n\t\t( $AR $ARFLAGS conftest.a func.o ) 2>&AC_FD_CC 1>/dev/null\n\tfi\n\trm -f conftest.$ac_ext func.o\n\t( eval $RANLIB conftest.a ) 2>&AC_FD_CC >/dev/null\n\tcf_saveLIBS=\"$LIBS\"\n\tLIBS=\"conftest.a $LIBS\"\n\tAC_TRY_RUN([\n\tint main(void)\n\t{\n\t\textern int testfunc();\n\t\t${cf_cv_main_return:-return} (!testfunc());\n\t}\n\t],\n\t[cf_cv_link_dataonly=yes],\n\t[cf_cv_link_dataonly=no],\n\t[cf_cv_link_dataonly=unknown])\n\tLIBS=\"$cf_saveLIBS\"\n\t])\nAC_MSG_RESULT($cf_cv_link_dataonly)\n\nif test \"$cf_cv_link_dataonly\" = no ; then\n\tAC_DEFINE(BROKEN_LINKER,1,[if data-only library module does not link])\n\tBROKEN_LINKER=1\nfi\nAC_SUBST(BROKEN_LINKER)\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_LINK_FUNCS version: 11 updated: 2021/04/18 14:08:47\ndnl -------------\ndnl Most Unix systems have both link and symlink, a few don't have symlink.\ndnl A few non-Unix systems implement symlink, but not link.\ndnl A few non-systems implement neither (or have nonfunctional versions).\ndnl\ndnl This allows for a 2-second difference in modification times to allow for\ndnl some marginal NFS implementations.\nAC_DEFUN([CF_LINK_FUNCS],\n[\nAC_CHECK_HEADERS( \\\nunistd.h \\\n)\nAC_CHECK_FUNCS( \\\n\tremove \\\n\tunlink )\n\nif test \"$cross_compiling\" = yes ; then\n\tAC_CHECK_FUNCS( \\\n\t\tlink \\\n\t\tsymlink )\nelse\n\tAC_CACHE_CHECK(if link/symlink functions work,cf_cv_link_funcs,[\n\t\tcf_cv_link_funcs=\n\t\tfor cf_func in link symlink ; do\n\t\t\tAC_TRY_RUN([\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/stat.h>\n#ifdef HAVE_UNISTD_H\n#include <unistd.h>\n#endif\nint main(void)\n{\n\tint fail = 0;\n\tchar *src = \"conftest.tmp\";\n\tchar *dst = \"conftest.chk\";\n\tstruct stat src_sb, dst_sb;\n\tFILE *fp = fopen(src, \"w\");\n\tif (fp == 0) { fail = 3; } else {\n\t\tfclose(fp); stat(src, &src_sb);\n\t\tif ($cf_func(src, dst) < 0) {\n\t\t\tfail = 1;\n\t\t} else if (stat(dst, &dst_sb) < 0) {\n\t\t\tfail = 2;\n\t\t} else {\n\t\t\tlong diff = (dst_sb.st_mtime - src_sb.st_mtime);\n\t\t\tif (diff < 0) diff = -diff;\n\t\t\tif (diff > 2) fail = 3;\n\t\t}\n\t}\n#ifdef HAVE_UNLINK\n\tunlink(dst); unlink(src);\n#else\n\tremove(dst); remove(src);\n#endif\n\t${cf_cv_main_return:-return} (fail);\n}\n\t\t\t],[\n\t\t\tcf_cv_link_funcs=\"$cf_cv_link_funcs $cf_func\"\n\t\t\teval 'ac_cv_func_'$cf_func'=yes'],[\n\t\t\teval 'ac_cv_func_'$cf_func'=no'],[\n\t\t\teval 'ac_cv_func_'$cf_func'=error'])\n\t\tdone\n\t\ttest -z \"$cf_cv_link_funcs\" && cf_cv_link_funcs=no\n\t])\n\ttest \"$ac_cv_func_link\"    = yes && AC_DEFINE(HAVE_LINK,1,[Define to 1 if we have link() function])\n\ttest \"$ac_cv_func_symlink\" = yes && AC_DEFINE(HAVE_SYMLINK,1,[Define to 1 if we have symlink() function])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MAKEFLAGS version: 21 updated: 2021/09/04 06:47:34\ndnl ------------\ndnl Some 'make' programs support ${MAKEFLAGS}, some ${MFLAGS}, to pass 'make'\ndnl options to lower-levels.  It is very useful for \"make -n\" -- if we have it.\ndnl (GNU 'make' does both, something POSIX 'make', which happens to make the\ndnl ${MAKEFLAGS} variable incompatible because it adds the assignments :-)\nAC_DEFUN([CF_MAKEFLAGS],\n[AC_REQUIRE([AC_PROG_FGREP])dnl\n\nAC_CACHE_CHECK(for makeflags variable, cf_cv_makeflags,[\n\tcf_cv_makeflags=''\n\tfor cf_option in '-${MAKEFLAGS}' '${MFLAGS}'\n\tdo\n\t\tcat >cf_makeflags.tmp <<CF_EOF\nSHELL = $SHELL\nall :\n\t@ echo '.$cf_option'\nCF_EOF\n\t\tcf_result=`${MAKE:-make} -k -f cf_makeflags.tmp 2>/dev/null | ${FGREP-fgrep} -v \"ing directory\" | sed -e 's,[[ \t]]*$,,'`\n\t\tcase \"$cf_result\" in\n\t\t(.*k|.*kw)\n\t\t\tcf_result=\"`${MAKE:-make} -k -f cf_makeflags.tmp CC=cc 2>/dev/null`\"\n\t\t\tcase \"$cf_result\" in\n\t\t\t(.*CC=*)\tcf_cv_makeflags=\n\t\t\t\t;;\n\t\t\t(*)\tcf_cv_makeflags=$cf_option\n\t\t\t\t;;\n\t\t\tesac\n\t\t\tbreak\n\t\t\t;;\n\t\t(.-)\n\t\t\t;;\n\t\t(*)\n\t\t\tCF_MSG_LOG(given option \\\"$cf_option\\\", no match \\\"$cf_result\\\")\n\t\t\t;;\n\t\tesac\n\tdone\n\trm -f cf_makeflags.tmp\n])\n\nAC_SUBST(cf_cv_makeflags)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MAKE_PHONY version: 3 updated: 2021/01/08 16:08:21\ndnl -------------\ndnl Check if the make-program handles a \".PHONY\" target, e.g,. a target which\ndnl acts as a placeholder.\ndnl\ndnl The \".PHONY\" feature was proposed in 2011 here\ndnl     https://www.austingroupbugs.net/view.php?id=523\ndnl and is scheduled for release in P1003.1 Issue 8 (late 2022).\ndnl\ndnl This is not supported by SVr4 make (or SunOS 4, 4.3SD, etc), but works with\ndnl a few others (i.e., GNU make and the non-POSIX \"BSD\" make):\ndnl\ndnl + This is a GNU make feature (since April 1988, but in turn from binutils,\ndnl   date unspecified).\ndnl\ndnl + It was adopted in NetBSD make in June 1995.\ndnl\ndnl + The other BSD make programs are derived from the NetBSD make (and for\ndnl   that reason are not actually different \"implementations\").\ndnl\ndnl + Some features of NetBSD make were actually adapted from pmake, which\ndnl   began as a modified GNU make starting in 1993.\ndnl\ndnl + Version 3.8 of the dmake program in January 1992 also implemented this\ndnl   GNU make extension, but is less well known than the BSD make.\nAC_DEFUN([CF_MAKE_PHONY],[\nAC_CACHE_CHECK(for \\\".PHONY\\\" make-support, cf_cv_make_PHONY,[\n\trm -rf conftest*\n\t(\n\t\tmkdir conftest || exit 1\n\t\tcd conftest\n\t\tcat >makefile <<'CF_EOF'\n.PHONY: always\nDATA=0\nalways:\talways.out\n\t@echo \"** making [$]@ [$](DATA)\"\nonce: once.out\n\t@echo \"** making [$]@ [$](DATA)\"\nalways.out:\n\t@echo \"** making [$]@ [$](DATA)\"\n\techo [$](DATA) > [$]@\nonce.out:\n\t@echo \"** making [$]@ [$](DATA)\"\n\techo [$](DATA) > [$]@\nCF_EOF\n\t\tfor cf_data in 1 2 3\n\t\tdo\n\t\t\t${MAKE:-make} always DATA=$cf_data\n\t\t\t${MAKE:-make} once   DATA=$cf_data\n\t\t\t${MAKE:-make} -t always once\n\t\t\tif test -f always ; then\n\t\t\t\techo \"no (case 1)\" > ../conftest.tmp\n\t\t\telif test ! -f always.out ; then\n\t\t\t\techo \"no (case 2)\" > ../conftest.tmp\n\t\t\telif test ! -f once.out ; then\n\t\t\t\techo \"no (case 3)\" > ../conftest.tmp\n\t\t\telif ! cmp -s always.out once.out ; then\n\t\t\t\techo \"no (case 4)\" > ../conftest.tmp\n\t\t\t\tdiff always.out once.out\n\t\t\telse\n\t\t\t\tcf_check=\"`cat always.out`\"\n\t\t\t\tif test \"x$cf_check\" != \"x$cf_data\" ; then\n\t\t\t\t\techo \"no (case 5)\" > ../conftest.tmp\n\t\t\t\telse\n\t\t\t\t\techo yes > ../conftest.tmp\n\t\t\t\t\trm -f ./*.out\n\t\t\t\t\tcontinue\n\t\t\t\tfi\n\t\t\tfi\n\t\t\tbreak\n\t\tdone\n\t) >&AC_FD_CC 2>&1\n\tcf_cv_make_PHONY=\"`cat conftest.tmp`\"\n\trm -rf conftest*\n])\nMAKE_NO_PHONY=\"#\"\nMAKE_PHONY=\"#\"\ntest \"x$cf_cv_make_PHONY\" = xyes && MAKE_PHONY=\ntest \"x$cf_cv_make_PHONY\" != xyes && MAKE_NO_PHONY=\nAC_SUBST(MAKE_NO_PHONY)\nAC_SUBST(MAKE_PHONY)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MAKE_TAGS version: 6 updated: 2010/10/23 15:52:32\ndnl ------------\ndnl Generate tags/TAGS targets for makefiles.  Do not generate TAGS if we have\ndnl a monocase filesystem.\nAC_DEFUN([CF_MAKE_TAGS],[\nAC_REQUIRE([CF_MIXEDCASE_FILENAMES])\n\nAC_CHECK_PROGS(CTAGS, exctags ctags)\nAC_CHECK_PROGS(ETAGS, exetags etags)\n\nAC_CHECK_PROG(MAKE_LOWER_TAGS, ${CTAGS:-ctags}, yes, no)\n\nif test \"$cf_cv_mixedcase\" = yes ; then\n\tAC_CHECK_PROG(MAKE_UPPER_TAGS, ${ETAGS:-etags}, yes, no)\nelse\n\tMAKE_UPPER_TAGS=no\nfi\n\nif test \"$MAKE_UPPER_TAGS\" = yes ; then\n\tMAKE_UPPER_TAGS=\nelse\n\tMAKE_UPPER_TAGS=\"#\"\nfi\n\nif test \"$MAKE_LOWER_TAGS\" = yes ; then\n\tMAKE_LOWER_TAGS=\nelse\n\tMAKE_LOWER_TAGS=\"#\"\nfi\n\nAC_SUBST(CTAGS)\nAC_SUBST(ETAGS)\n\nAC_SUBST(MAKE_UPPER_TAGS)\nAC_SUBST(MAKE_LOWER_TAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MANPAGE_FORMAT version: 16 updated: 2022/11/05 16:12:11\ndnl -----------------\ndnl Option to allow user to override automatic configuration of manpage format.\ndnl There are several special cases:\ndnl\ndnl\tcompress - man checks for, can display compressed files\ndnl\tbzip2 - man checks for, can display bzip2'd files\ndnl\tgzip - man checks for, can display gzip'd files\ndnl\txz - man checks for, can display xz'd files\ndnl\ndnl\tBSDI - files in the cat-directories are suffixed \".0\"\ndnl\tformatted - installer should format (put files in cat-directory)\ndnl\tcatonly - installer should only format, e.g., for a turnkey system.\ndnl\ndnl There are other configurations which this macro does not test, e.g., HPUX's\ndnl compressed manpages (but uncompressed manpages are fine, and HPUX's naming\ndnl convention would not match our use).\nAC_DEFUN([CF_MANPAGE_FORMAT],\n[\nAC_REQUIRE([CF_PATHSEP])\nAC_MSG_CHECKING(format of man-pages)\n\nAC_ARG_WITH(manpage-format,\n\t[  --with-manpage-format   specify manpage-format: gzip/compress/bzip2/xz,\n                          BSDI/normal and optionally formatted/catonly,\n                          e.g., gzip,formatted],\n\t[MANPAGE_FORMAT=$withval],\n\t[MANPAGE_FORMAT=unknown])\n\ntest -z \"$MANPAGE_FORMAT\" && MANPAGE_FORMAT=unknown\nMANPAGE_FORMAT=`echo \"$MANPAGE_FORMAT\" | sed -e 's/,/ /g'`\n\ncf_unknown=\n\ncase \"$MANPAGE_FORMAT\" in\n(unknown)\n\tif test -z \"$MANPATH\" ; then\n\t\tMANPATH=\"/usr/man:/usr/share/man\"\n\tfi\n\n\t# look for the 'date' man-page (it is most likely to be installed!)\n\tMANPAGE_FORMAT=\n\tcf_preform=\"no\"\n\tcf_catonly=\"yes\"\n\tcf_example=\"date\"\n\n\tIFS=\"${IFS:- \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR}\"\n\tfor cf_dir in $MANPATH; do\n\t\ttest -z \"$cf_dir\" && cf_dir=/usr/man\n\t\tfor cf_name in $cf_dir/man*/$cf_example.[[01]]* $cf_dir/cat*/$cf_example.[[01]]* $cf_dir/man*/$cf_example $cf_dir/cat*/$cf_example\n\t\tdo\n\t\t\tcf_test=`echo \"$cf_name\" | sed -e 's/*//'`\n\t\t\tif test \"x$cf_test\" = \"x$cf_name\" ; then\n\n\t\t\t\tcase \"$cf_name\" in\n\t\t\t\t(*.bz2) MANPAGE_FORMAT=\"$MANPAGE_FORMAT bzip2\";;\n\t\t\t\t(*.xz)  MANPAGE_FORMAT=\"$MANPAGE_FORMAT xz\";;\n\t\t\t\t(*.gz)  MANPAGE_FORMAT=\"$MANPAGE_FORMAT gzip\";;\n\t\t\t\t(*.Z)   MANPAGE_FORMAT=\"$MANPAGE_FORMAT compress\";;\n\t\t\t\t(*.0)   MANPAGE_FORMAT=\"$MANPAGE_FORMAT BSDI\";;\n\t\t\t\t(*)     MANPAGE_FORMAT=\"$MANPAGE_FORMAT normal\";;\n\t\t\t\tesac\n\n\t\t\t\tcase \"$cf_name\" in\n\t\t\t\t($cf_dir/man*)\n\t\t\t\t\tcf_catonly=no\n\t\t\t\t\t;;\n\t\t\t\t($cf_dir/cat*)\n\t\t\t\t\tcf_preform=yes\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\t\tbreak\n\t\t\tfi\n\n\t\t\t# if we found a match in either man* or cat*, stop looking\n\t\t\tif test -n \"$MANPAGE_FORMAT\" ; then\n\t\t\t\tcf_found=no\n\t\t\t\ttest \"$cf_preform\" = yes && MANPAGE_FORMAT=\"$MANPAGE_FORMAT formatted\"\n\t\t\t\ttest \"$cf_catonly\" = yes && MANPAGE_FORMAT=\"$MANPAGE_FORMAT catonly\"\n\t\t\t\tcase \"$cf_name\" in\n\t\t\t\t($cf_dir/cat*)\n\t\t\t\t\tcf_found=yes\n\t\t\t\t\t;;\n\t\t\t\tesac\n\t\t\t\ttest \"$cf_found\" = yes && break\n\t\t\tfi\n\t\tdone\n\t\t# only check the first directory in $MANPATH where we find manpages\n\t\tif test -n \"$MANPAGE_FORMAT\" ; then\n\t\t\tbreak\n\t\tfi\n\tdone\n\t# if we did not find the example, just assume it is normal\n\ttest -z \"$MANPAGE_FORMAT\" && MANPAGE_FORMAT=normal\n\tIFS=\"$ac_save_ifs\"\n\t;;\n(*)\n\tfor cf_option in $MANPAGE_FORMAT; do\n\tcase \"$cf_option\" in\n\t(xz|bzip2|gzip|compress|BSDI|normal|formatted|catonly)\n\t\t;;\n\t(*)\n\t\tcf_unknown=\"$cf_unknown $cf_option\"\n\t\t;;\n\tesac\n\tdone\n\t;;\nesac\n\nAC_MSG_RESULT($MANPAGE_FORMAT)\nif test -n \"$cf_unknown\" ; then\n\tAC_MSG_WARN(Unexpected manpage-format $cf_unknown)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MANPAGE_RENAMES version: 17 updated: 2022/10/23 07:46:29\ndnl ------------------\ndnl The Debian people have their own naming convention for manpages.  This\ndnl option lets us override the name of the file containing renaming, or\ndnl disable it altogether.\nAC_DEFUN([CF_MANPAGE_RENAMES],\n[\nAC_MSG_CHECKING(for manpage renaming)\n\nAC_ARG_WITH(manpage-renames,\n\t[  --with-manpage-renames  specify manpage-renaming],\n\t[MANPAGE_RENAMES=$withval],\n\t[MANPAGE_RENAMES=yes])\n\ncase \".$MANPAGE_RENAMES\" in\n(.no)\n\t;;\n(.|.yes)\n\t# Debian 'man' program?\n\tif test -f /etc/debian_version ; then\n\t\tMANPAGE_RENAMES=man/man_db.renames\n\telse\n\t\tMANPAGE_RENAMES=no\n\tfi\n\t;;\nesac\n\nif test \"$MANPAGE_RENAMES\" = man/man_db.renames ; then\n\tMANPAGE_RENAMES=`pwd`/$MANPAGE_RENAMES\nelif test \"$MANPAGE_RENAMES\" = no ; then\n\t:\nelif test ! -f \"$MANPAGE_RENAMES\" ; then\n\tAC_MSG_ERROR(not a filename: $MANPAGE_RENAMES)\nfi\n\nAC_MSG_RESULT($MANPAGE_RENAMES)\nAC_SUBST(MANPAGE_RENAMES)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MANPAGE_SYMLINKS version: 6 updated: 2015/04/17 21:13:04\ndnl -------------------\ndnl Some people expect each tool to make all aliases for manpages in the\ndnl man-directory.  This accommodates the older, less-capable implementations\ndnl of 'man', and is optional.\nAC_DEFUN([CF_MANPAGE_SYMLINKS],\n[\nAC_MSG_CHECKING(if manpage aliases will be installed)\n\nAC_ARG_WITH(manpage-aliases,\n\t[  --with-manpage-aliases  specify manpage-aliases using .so],\n\t[MANPAGE_ALIASES=$withval],\n\t[MANPAGE_ALIASES=yes])\n\nAC_MSG_RESULT($MANPAGE_ALIASES)\n\ncase \"x$LN_S\" in\n(xln*)\n\tcf_use_symlinks=yes\n\t;;\n(*)\n\tcf_use_symlinks=no\n\t;;\nesac\n\nMANPAGE_SYMLINKS=no\nif test \"$MANPAGE_ALIASES\" = yes ; then\nAC_MSG_CHECKING(if manpage symlinks should be used)\n\nAC_ARG_WITH(manpage-symlinks,\n\t[  --with-manpage-symlinks specify manpage-aliases using symlinks],\n\t[MANPAGE_SYMLINKS=$withval],\n\t[MANPAGE_SYMLINKS=$cf_use_symlinks])\n\nif test \"$$cf_use_symlinks\" = no; then\nif test \"$MANPAGE_SYMLINKS\" = yes ; then\n\tAC_MSG_WARN(cannot make symlinks, will use .so files)\n\tMANPAGE_SYMLINKS=no\nfi\nfi\n\nAC_MSG_RESULT($MANPAGE_SYMLINKS)\nfi\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MANPAGE_TBL version: 3 updated: 2002/01/19 22:51:32\ndnl --------------\ndnl This option causes manpages to be run through tbl(1) to generate tables\ndnl correctly.\nAC_DEFUN([CF_MANPAGE_TBL],\n[\nAC_MSG_CHECKING(for manpage tbl)\n\nAC_ARG_WITH(manpage-tbl,\n\t[  --with-manpage-tbl      specify manpage processing with tbl],\n\t[MANPAGE_TBL=$withval],\n\t[MANPAGE_TBL=no])\n\nAC_MSG_RESULT($MANPAGE_TBL)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MAN_PAGES version: 54 updated: 2022/11/05 16:12:11\ndnl ------------\ndnl Try to determine if the man-pages on the system are compressed, and if\ndnl so, what format is used.  Use this information to construct a script that\ndnl will install man-pages.\nAC_DEFUN([CF_MAN_PAGES],\n[\nCF_HELP_MESSAGE(Options to Specify How Manpages are Installed:)\nCF_MANPAGE_FORMAT\nCF_MANPAGE_RENAMES\nCF_MANPAGE_SYMLINKS\nCF_MANPAGE_TBL\n\nif test \"$prefix\" = \"NONE\" ; then\n\tcf_prefix=\"$ac_default_prefix\"\nelse\n\tcf_prefix=\"$prefix\"\nfi\n\ncase \"$MANPAGE_FORMAT\" in\n(*catonly*)\n\tcf_format=yes\n\tcf_inboth=no\n\t;;\n(*formatted*)\n\tcf_format=yes\n\tcf_inboth=yes\n\t;;\n(*)\n\tcf_format=no\n\tcf_inboth=no\n\t;;\nesac\n\ntest ! -d man && mkdir man\n\ncf_so_strip=\ncf_compress=\nfor cf_manpage_format in $MANPAGE_FORMAT\ndo\ncase \"$cf_manpage_format\" in\n(compress)\n\tcf_so_strip=\"Z\"\n\tcf_compress=compress\n\t;;\n(gzip)\n\tcf_so_strip=\"gz\"\n\tcf_compress=gzip\n\t;;\n(bzip2)\n\tcf_so_strip=\"bz2\"\n\tcf_compress=bzip2\n\t;;\n(xz)\n\tcf_so_strip=\"xz\"\n\tcf_compress=xz\n\t;;\nesac\ndone\n\ncf_edit_man=./edit_man.sh\ncf_man_alias=`pwd`/man_alias.sed\n\ncat >$cf_edit_man <<CF_EOF\n#! $SHELL\n# this script is generated by the configure-script CF_MAN_PAGES macro.\n\nprefix=\"$cf_prefix\"\ndatarootdir=\"$datarootdir\"\ndatadir=\"$datadir\"\n\nNCURSES_MAJOR=\"$NCURSES_MAJOR\"\nNCURSES_MINOR=\"$NCURSES_MINOR\"\nNCURSES_PATCH=\"$NCURSES_PATCH\"\n\nNCURSES_OSPEED=\"$NCURSES_OSPEED\"\nTERMINFO=\"$TERMINFO\"\n\nINSTALL=\"$INSTALL\"\nINSTALL_DATA=\"$INSTALL_DATA\"\n\ntransform=\"$program_transform_name\"\n\nTMP=\\${TMPDIR:=/tmp}/man\\$\\$\ntrap \"rm -f \\$TMP; exit 1\" 1 2 3 15\ntrap \"rm -f \\$TMP\" 0\n\nform=\\[$]1\nshift || exit 1\n\nverb=\\[$]1\nshift || exit 1\n\nmandir=\\[$]1\nshift || exit 1\n\nsrcdir=\\[$]1\ntop_srcdir=\\[$]srcdir/..\nshift || exit 1\n\nif test \"\\$form\" = normal ; then\n\tif test \"$cf_format\" = yes ; then\n\tif test \"$cf_inboth\" = no ; then\n\t\t$SHELL \"\\[$]0\" format \"\\$verb\" \"\\$mandir\" \"\\$srcdir\" \"\\[$]@\"\n\t\texit $?\n\tfi\n\tfi\n\tcf_subdir=\\$mandir/man\n\tcf_tables=$MANPAGE_TBL\nelse\n\tcf_subdir=\\$mandir/cat\n\tcf_tables=yes\nfi\n\n# process the list of source-files\nfor i in \"\\[$]@\" ; do\ncase \\$i in\n(*.orig|*.rej) ;;\n(*.[[0-9]]*)\n\tsection=\\`expr \"\\$i\" : '.*\\\\.\\\\([[0-9]]\\\\)[[xm]]*'\\`;\n\tif test \"\\$verb\" = installing ; then\n\tif test ! -d \"\\$cf_subdir\\${section}\" ; then\n\t\tmkdir -p \"\\$cf_subdir\\$section\"\n\tfi\n\tfi\n\n\t# replace variables in man page\n\tif test ! -f \"$cf_man_alias\" ; then\ncat >>$cf_man_alias <<-CF_EOF2\n\t\ts,@DATADIR@,\\$datadir,g\n\t\ts,@TERMINFO@,\\${TERMINFO:=\"no default value\"},g\n\t\ts,@TERMINFO_DIRS@,\\${TERMINFO_DIRS:=\"no default value\"},g\n\t\ts,@NCURSES_MAJOR@,\\${NCURSES_MAJOR:=\"no default value\"},g\n\t\ts,@NCURSES_MINOR@,\\${NCURSES_MINOR:=\"no default value\"},g\n\t\ts,@NCURSES_PATCH@,\\${NCURSES_PATCH:=\"no default value\"},g\n\t\ts,@NCURSES_OSPEED@,\\${NCURSES_OSPEED:=\"no default value\"},g\nCF_EOF\n\tifelse($1,,,[\n\tfor cf_name in $1\n\tdo\n\t\tcf_NAME=`echo \"$cf_name\" | sed y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%`\n\t\tcf_name=`echo \"$cf_name\" | sed \"$program_transform_name\"`\ncat >>$cf_edit_man <<-CF_EOF\n\t\ts,@$cf_NAME@,$cf_name,g\nCF_EOF\n\tdone\n\t])\ncat >>$cf_edit_man <<CF_EOF\nCF_EOF2\n\t\techo \"...made $cf_man_alias\"\n\tfi\n\n\taliases=\n\tcf_source=\\`basename \"\\$i\"\\`\n\tinalias=\\$cf_source\n\ttest ! -f \"\\$inalias\" && inalias=\"\\$srcdir/\\$inalias\"\n\tif test ! -f \"\\$inalias\" ; then\n\t\techo \".. skipped \\$cf_source\"\n\t\tcontinue\n\tfi\nCF_EOF\n\nif test \"$MANPAGE_ALIASES\" != no ; then\ncat >>$cf_edit_man <<CF_EOF\n\tnCurses=ignore.3x\n\ttest \"$with_curses_h\" = yes && nCurses=ncurses.3x\n\taliases=\\`sed -f \"\\$top_srcdir/man/manlinks.sed\" \"\\$inalias\" |sed -f \"$cf_man_alias\" | sort -u; test \"\\$inalias\" = \"\\$nCurses\" && echo curses\\`\nCF_EOF\nfi\n\nif test \"$MANPAGE_RENAMES\" = no ; then\ncat >>$cf_edit_man <<CF_EOF\n\t# perform program transformations for section 1 man pages\n\tif test \\$section = 1 ; then\n\t\tcf_target=\\$cf_subdir\\${section}/\\`echo \\$cf_source|sed \"\\${transform}\"\\`\n\telse\n\t\tcf_target=\\$cf_subdir\\${section}/\\$cf_source\n\tfi\nCF_EOF\nelse\ncat >>$cf_edit_man <<CF_EOF\n\tcf_target=\\`grep \"^\\$cf_source\" $MANPAGE_RENAMES | $AWK '{print \\[$]2}'\\`\n\tif test -z \"\\$cf_target\" ; then\n\t\techo \"? missing rename for \\$cf_source\"\n\t\tcf_target=\"\\$cf_source\"\n\tfi\n\tcf_target=\"\\$cf_subdir\\${section}/\\${cf_target}\"\n\nCF_EOF\nfi\n\ncat >>$cf_edit_man <<CF_EOF\n\tsed\t-f \"$cf_man_alias\" \\\\\nCF_EOF\n\nif test \"$MANPAGE_RENAMES\" != no ; then\ncat >>$cf_edit_man <<CF_EOF\n\t\t< \"\\$i\" | sed -f `pwd`/edit_man.sed >\\$TMP\nCF_EOF\nelse\ncat >>$cf_edit_man <<CF_EOF\n\t\t< \"\\$i\" >\\$TMP\nCF_EOF\nfi\n\ncat >>$cf_edit_man <<CF_EOF\nif test \\$cf_tables = yes ; then\n\ttbl \\$TMP >\\$TMP.out\n\tmv \\$TMP.out \\$TMP\nfi\nCF_EOF\n\nif test \"$with_overwrite\" != yes ; then\ncat >>$cf_edit_man <<CF_EOF\n\tsed -e \"/\\\\#[    ]*include/s,<curses.h,<ncurses$LIB_SUFFIX/curses.h,\" < \\$TMP >\\$TMP.out\n\tmv \\$TMP.out \\$TMP\nCF_EOF\nfi\n\nif test \"$with_curses_h\" != yes ; then\ncat >>$cf_edit_man <<CF_EOF\n\tsed -e \"/\\\\#[    ]*include/s,curses.h,ncurses.h,\" < \\$TMP >\\$TMP.out\n\tmv \\$TMP.out \\$TMP\nCF_EOF\nfi\n\ncat >>$cf_edit_man <<CF_EOF\n\tif test \"\\$form\" = format ; then\n\t\tnroff -man \\$TMP >\\$TMP.out\n\t\tmv \\$TMP.out \\$TMP\n\tfi\nCF_EOF\n\nif test -n \"$cf_compress\" ; then\ncat >>$cf_edit_man <<CF_EOF\n\tif test \"\\$verb\" = installing ; then\n\tif ( \"$cf_compress\" -f \\$TMP )\n\tthen\n\t\tmv \\$TMP.$cf_so_strip \\$TMP\n\tfi\n\tfi\n\tcf_target=\"\\$cf_target.$cf_so_strip\"\nCF_EOF\nfi\n\ncase \"$MANPAGE_FORMAT\" in\n(*BSDI*)\ncat >>$cf_edit_man <<CF_EOF\n\tif test \"\\$form\" = format ; then\n\t\t# BSDI installs only .0 suffixes in the cat directories\n\t\tcf_target=\"\\`echo \\$cf_target|sed -e 's/\\\\.[[1-9]]\\\\+[[a-z]]*/.0/'\\`\"\n\tfi\nCF_EOF\n  ;;\nesac\n\ncat >>$cf_edit_man <<CF_EOF\n\tsuffix=\\`basename \"\\$cf_target\" | sed -e 's%^[[^.]]*%%'\\`\n\tif test \"\\$verb\" = installing ; then\n\t\techo \"\\$verb \\$cf_target\"\n\t\t\\$INSTALL_DATA \\$TMP \"\\$cf_target\"\n\t\ttest -d \"\\$cf_subdir\\${section}\" &&\n\t\ttest -n \"\\$aliases\" && (\n\t\t\tcd \"\\$cf_subdir\\${section}\" && (\n\t\t\t\tcf_source=\\`echo \"\\$cf_target\" |sed -e 's%^.*/\\\\([[^/]][[^/]]*/[[^/]][[^/]]*$\\\\)%\\\\1%'\\`\n\t\t\t\ttest -n \"$cf_so_strip\" && cf_source=\\`echo \"\\$cf_source\" |sed -e 's%\\\\.$cf_so_strip\\$%%'\\`\n\t\t\t\tcf_target=\\`basename \"\\$cf_target\"\\`\n\t\t\t\tfor cf_alias in \\$aliases\n\t\t\t\tdo\n\t\t\t\t\tif test \"\\$section\" = 1 ; then\n\t\t\t\t\t\tcf_alias=\\`echo \"\\$cf_alias\" |sed \"\\${transform}\"\\`\n\t\t\t\t\tfi\n\n\t\t\t\t\tif test \"$MANPAGE_SYMLINKS\" = yes ; then\n\t\t\t\t\t\tif test -f \"\\$cf_alias\\${suffix}\" ; then\n\t\t\t\t\t\t\tif ( cmp -s \"\\$cf_target\" \"\\$cf_alias\\${suffix}\" )\n\t\t\t\t\t\t\tthen\n\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\tfi\n\t\t\t\t\t\tfi\n\t\t\t\t\t\techo \".. \\$verb alias \\$cf_alias\\${suffix}\"\nCF_EOF\ncase \"x$LN_S\" in\n(*-f)\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\t\t$LN_S \"\\$cf_target\" \"\\$cf_alias\\${suffix}\"\nCF_EOF\n\t;;\n(*)\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\t\trm -f \"\\$cf_alias\\${suffix}\"\n\t\t\t\t\t\t$LN_S \"\\$cf_target\" \"\\$cf_alias\\${suffix}\"\nCF_EOF\n\t;;\nesac\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\telif test \"\\$cf_target\" != \"\\$cf_alias\\${suffix}\" ; then\n\t\t\t\t\t\techo \".so \\$cf_source\" >\\$TMP\nCF_EOF\nif test -n \"$cf_compress\" ; then\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\t\tif test -n \"$cf_so_strip\" ; then\n\t\t\t\t\t\t\t\"$cf_compress\" -f \\$TMP\n\t\t\t\t\t\t\tmv \\$TMP.$cf_so_strip \\$TMP\n\t\t\t\t\t\tfi\nCF_EOF\nfi\ncat >>$cf_edit_man <<CF_EOF\n\t\t\t\t\t\techo \".. \\$verb alias \\$cf_alias\\${suffix}\"\n\t\t\t\t\t\trm -f \"\\$cf_alias\\${suffix}\"\n\t\t\t\t\t\t\\$INSTALL_DATA \\$TMP \"\\$cf_alias\\${suffix}\"\n\t\t\t\t\tfi\n\t\t\t\tdone\n\t\t\t)\n\t\t)\n\telif test \"\\$verb\" = removing ; then\n\t\ttest -f \"\\$cf_target\" && (\n\t\t\techo \"\\$verb \\$cf_target\"\n\t\t\trm -f \"\\$cf_target\"\n\t\t)\n\t\ttest -d \"\\$cf_subdir\\${section}\" &&\n\t\ttest -n \"\\$aliases\" && (\n\t\t\tcd \"\\$cf_subdir\\${section}\" && (\n\t\t\t\tfor cf_alias in \\$aliases\n\t\t\t\tdo\n\t\t\t\t\tif test \"\\$section\" = 1 ; then\n\t\t\t\t\t\tcf_alias=\\`echo \"\\$cf_alias\" |sed \"\\${transform}\"\\`\n\t\t\t\t\tfi\n\n\t\t\t\t\techo \".. \\$verb alias \\$cf_alias\\${suffix}\"\n\t\t\t\t\trm -f \"\\$cf_alias\\${suffix}\"\n\t\t\t\tdone\n\t\t\t)\n\t\t)\n\telse\n#\t\techo \".hy 0\"\n\t\tcat \\$TMP\n\tfi\n\t;;\nesac\ndone\n\nif test \"$cf_inboth\" = yes ; then\nif test \"\\$form\" != format ; then\n\t$SHELL \"\\[$]0\" format \"\\$verb\" \"\\$mandir\" \"\\$srcdir\" \"\\[$]@\"\nfi\nfi\n\nexit 0\nCF_EOF\nchmod 755 \"$cf_edit_man\"\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MAP_LIB_BASENAME version: 2 updated: 2021/01/02 17:09:14\ndnl -------------------\ndnl Convert a default-libname to the actual one used via CF_WITH_LIB_BASENAME.\ndnl\ndnl $1 = variable to set\ndnl $2 = default-libname\nAC_DEFUN([CF_MAP_LIB_BASENAME],[\nCF_UPPER(cf_map_lib_basename,$2)\neval $1=\"\\$${cf_map_lib_basename}_NAME\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MATH_LIB version: 11 updated: 2022/07/27 19:01:48\ndnl -----------\ndnl Checks for libraries.  At least one UNIX system, Apple Macintosh\ndnl Rhapsody 5.5, does not have -lm.  We cannot use the simpler\ndnl AC_CHECK_LIB(m,sin), because that fails for C++.\nAC_DEFUN([CF_MATH_LIB],\n[\nAC_CACHE_CHECK(if -lm needed for math functions,\n\tcf_cv_need_libm,[\n\tAC_TRY_LINK([\n\t\t#include <stdio.h>\n\t\t#include <stdlib.h>\n\t\t#include <math.h>\n\t],\n\t[double x = rand(); printf(\"result = %g\\\\n\", ]ifelse([$2],,sin(x),$2)[)],\n\t[cf_cv_need_libm=no],\n\t[cf_cv_need_libm=yes])])\n\nif test \"$cf_cv_need_libm\" = yes\nthen\n\n\tcf_save_LIBS=\"$LIBS\"\n\tLIBS=\"$LIBS -lm\"\n\tAC_CACHE_CHECK(if -lm is available for math functions,\n\tcf_cv_have_libm,[\n\tAC_TRY_LINK([\n\t\t#include <stdio.h>\n\t\t#include <stdlib.h>\n\t\t#include <math.h>\n\t],\n\t[double x = rand(); printf(\"result = %g\\\\n\", ]ifelse([$2],,sin(x),$2)[)],\n\t[cf_cv_have_libm=yes],\n\t[cf_cv_have_libm=no])])\n\tLIBS=\"$cf_save_LIBS\"\n\n\tif test \"$cf_cv_have_libm\" = yes\n\tthen\n\t\tifelse($1,,[CF_ADD_LIB(m)],[$1=-lm])\n\tfi\nelse\n\tcf_cv_have_libm=yes\nfi\n\nif test \"$cf_cv_have_libm\" = yes\nthen\n\tAC_DEFINE(HAVE_MATH_FUNCS,1,[Define to 1 if math functions are available])\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_MIXEDCASE_FILENAMES version: 9 updated: 2021/01/01 16:53:59\ndnl ----------------------\ndnl Check if the file-system supports mixed-case filenames.  If we're able to\ndnl create a lowercase name and see it as uppercase, it doesn't support that.\nAC_DEFUN([CF_MIXEDCASE_FILENAMES],\n[\nAC_CACHE_CHECK(if filesystem supports mixed-case filenames,cf_cv_mixedcase,[\nif test \"$cross_compiling\" = yes ; then\n\tcase \"$target_alias\" in\n\t(*-os2-emx*|*-msdosdjgpp*|*-cygwin*|*-msys*|*-mingw*|*-uwin*|darwin*)\n\t\tcf_cv_mixedcase=no\n\t\t;;\n\t(*)\n\t\tcf_cv_mixedcase=yes\n\t\t;;\n\tesac\nelse\n\trm -f conftest CONFTEST\n\techo test >conftest\n\tif test -f CONFTEST ; then\n\t\tcf_cv_mixedcase=no\n\telse\n\t\tcf_cv_mixedcase=yes\n\tfi\n\trm -f conftest CONFTEST\nfi\n])\ntest \"$cf_cv_mixedcase\" = yes && AC_DEFINE(MIXEDCASE_FILENAMES,1,[Define to 1 if filesystem supports mixed-case filenames.])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MKSTEMP version: 11 updated: 2021/01/01 13:31:04\ndnl ----------\ndnl Check for a working mkstemp.  This creates two files, checks that they are\ndnl successfully created and distinct (AmigaOS apparently fails on the last).\nAC_DEFUN([CF_MKSTEMP],[\nAC_CHECK_HEADERS( \\\nunistd.h \\\n)\nAC_CACHE_CHECK(for working mkstemp, cf_cv_func_mkstemp,[\nrm -rf ./conftest*\nAC_TRY_RUN([\n#include <sys/types.h>\n#ifdef HAVE_UNISTD_H\n#include <unistd.h>\n#endif\n#include <stdlib.h>\n#include <stdio.h>\n#include <string.h>\n#include <sys/stat.h>\nint main(void)\n{\n\tchar *tmpl = \"conftestXXXXXX\";\n\tchar name[2][80];\n\tint n;\n\tint result = 0;\n\tint fd;\n\tstruct stat sb;\n\n\tumask(077);\n\tfor (n = 0; n < 2; ++n) {\n\t\tstrcpy(name[n], tmpl);\n\t\tif ((fd = mkstemp(name[n])) >= 0) {\n\t\t\tif (!strcmp(name[n], tmpl)\n\t\t\t || stat(name[n], &sb) != 0\n\t\t\t || (sb.st_mode & S_IFMT) != S_IFREG\n\t\t\t || (sb.st_mode & 077) != 0) {\n\t\t\t\tresult = 1;\n\t\t\t}\n\t\t\tclose(fd);\n\t\t}\n\t}\n\tif (result == 0\n\t && !strcmp(name[0], name[1]))\n\t\tresult = 1;\n\t${cf_cv_main_return:-return}(result);\n}\n],[cf_cv_func_mkstemp=yes\n],[cf_cv_func_mkstemp=no\n],[cf_cv_func_mkstemp=maybe])\n])\nif test \"x$cf_cv_func_mkstemp\" = xmaybe ; then\n\tAC_CHECK_FUNC(mkstemp)\nfi\nif test \"x$cf_cv_func_mkstemp\" = xyes || test \"x$ac_cv_func_mkstemp\" = xyes ; then\n\tAC_DEFINE(HAVE_MKSTEMP,1,[Define to 1 if mkstemp() is available and working.])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_MSG_LOG version: 5 updated: 2010/10/23 15:52:32\ndnl ----------\ndnl Write a debug message to config.log, along with the line number in the\ndnl configure script.\nAC_DEFUN([CF_MSG_LOG],[\necho \"${as_me:-configure}:__oline__: testing $* ...\" 1>&AC_FD_CC\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_NCURSES_ABI_6 version: 4 updated: 2021/01/01 13:31:04\ndnl ----------------\ndnl Set ncurses' ABI to 6 unless overridden by explicit configure option, and\ndnl warn about this.\nAC_DEFUN([CF_NCURSES_ABI_6],[\nif test \"${with_abi_version+set}\" != set; then\n\tcase \"$cf_cv_rel_version\" in\n\t(5.*)\n\t\tcf_cv_rel_version=6.0\n\t\tcf_cv_abi_version=6\n\t\tAC_MSG_WARN(overriding ABI version to $cf_cv_abi_version)\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_NCURSES_WITH_ABI_VERSION version: 3 updated: 2021/01/01 13:31:04\ndnl ---------------------------\ndnl Allow ncurses's ABI to be overridden.  Generally this happens when a\ndnl packager has incremented the ABI past that used in the original package,\ndnl and wishes to keep doing this.\ndnl\ndnl $1 is the package name, if any, to derive a corresponding {package}_ABI\ndnl symbol.\nAC_DEFUN([CF_NCURSES_WITH_ABI_VERSION],[\nCF_WITH_ABI_VERSION($1)\nif test \"x$cf_cv_abi_version\" != \"x$with_abi_version\"\nthen\n\tcase \"$cf_cv_rel_version\" in\n\t(5.*)\n\t\tcf_cv_rel_version=$with_abi_version.0\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_NO_LEAKS_OPTION version: 9 updated: 2021/06/13 19:45:41\ndnl ------------------\ndnl see CF_WITH_NO_LEAKS\ndnl\ndnl $1 = option/name\ndnl $2 = help-text\ndnl $3 = symbol to define if the option is set\ndnl $4 = additional actions to take if the option is set\nAC_DEFUN([CF_NO_LEAKS_OPTION],[\nAC_MSG_CHECKING(if you want to use $1 for testing)\nAC_ARG_WITH($1,\n\t[$2],\n\t[case \"x$withval\" in\n\t(x|xno) ;;\n\t(*)\n\t\t: \"${with_cflags:=-g}\"\n\t\t: \"${enable_leaks:=no}\"\n\t\twith_$1=yes\n\t\tAC_DEFINE_UNQUOTED($3,1,\"Define to 1 if you want to use $1 for testing.\")ifelse([$4],,[\n\t $4\n])\n\t\t;;\n\tesac],\n\t[with_$1=])\nAC_MSG_RESULT(${with_$1:-no})\n\ncase \".$with_cflags\" in\n(.*-g*)\n\tcase .$CFLAGS in\n\t(.*-g*)\n\t\t;;\n\t(*)\n\t\tCF_ADD_CFLAGS([-g])\n\t\t;;\n\tesac\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_NUMBER_SYNTAX version: 2 updated: 2015/04/17 21:13:04\ndnl ----------------\ndnl Check if the given variable is a number.  If not, report an error.\ndnl $1 is the variable\ndnl $2 is the message\nAC_DEFUN([CF_NUMBER_SYNTAX],[\nif test -n \"$1\" ; then\n  case $1 in\n  ([[0-9]]*)\n \t;;\n  (*)\n\tAC_MSG_ERROR($2 is not a number: $1)\n \t;;\n  esac\nelse\n  AC_MSG_ERROR($2 value is empty)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_OBJ_SUBDIR version: 8 updated: 2021/01/01 13:31:04\ndnl -------------\ndnl Compute the object-directory name from the given model name\nAC_DEFUN([CF_OBJ_SUBDIR],\n[\n\tcase $1 in\n\t(libtool) $2='obj_lo'  ;;\n\t(normal)  $2='objects' ;;\n\t(debug)   $2='obj_g' ;;\n\t(profile) $2='obj_p' ;;\n\t(shared)\n\t\tcase \"$cf_cv_system_name\" in\n\t\t(cygwin|msys)\n\t\t\t$2='objects' ;;\n\t\t(*)\n\t\t\t$2='obj_s' ;;\n\t\tesac\n\tesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_OUTPUT_MANPAGE_RENAMES version: 2 updated: 2022/10/22 19:12:31\ndnl -------------------------\ndnl This runs in the output step to config.status, after man_db.renames has\ndnl been generated.\nAC_DEFUN([CF_OUTPUT_MANPAGE_RENAMES],\n[\nAC_REQUIRE([CF_MANPAGE_RENAMES])\nif test \"$MANPAGE_RENAMES\" != no ; then\n\t# Construct a sed-script to perform renaming within man-pages\n\ttest -n \"$verbose\" && echo \"creating edit_man.sed\"\n\ttest ! -d man && mkdir man\n\tFGREP=\"${FGREP-grep -F}\" $SHELL \"$srcdir/man/make_sed.sh\" \"$MANPAGE_RENAMES\" >./edit_man.sed\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PATHSEP version: 8 updated: 2021/01/01 13:31:04\ndnl ----------\ndnl Provide a value for the $PATH and similar separator (or amend the value\ndnl as provided in autoconf 2.5x).\nAC_DEFUN([CF_PATHSEP],\n[\n\tAC_MSG_CHECKING(for PATH separator)\n\tcase \"$cf_cv_system_name\" in\n\t(os2*)\tPATH_SEPARATOR=';'  ;;\n\t(*)\t${PATH_SEPARATOR:=':'}  ;;\n\tesac\nifelse([$1],,,[$1=$PATH_SEPARATOR])\n\tAC_SUBST(PATH_SEPARATOR)\n\tAC_MSG_RESULT($PATH_SEPARATOR)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PATH_PROG version: 12 updated: 2021/01/02 09:31:20\ndnl ------------\ndnl Check for a given program, defining corresponding symbol.\ndnl\t$1 = environment variable, which is suffixed by \"_PATH\" in the #define.\ndnl\t$2 = program name to find.\ndnl\t$3 = optional list of additional program names to test.\ndnl $4 = $PATH\ndnl\ndnl If there is more than one token in the result, #define the remaining tokens\ndnl to $1_ARGS.  We need this for 'install' in particular.\ndnl\ndnl FIXME: we should allow this to be overridden by environment variables\ndnl\nAC_DEFUN([CF_PATH_PROG],[\nAC_REQUIRE([CF_PATHSEP])\ntest -z \"[$]$1\" && $1=\"$2\"\nAC_PATH_PROGS($1,[$]$1 $2 ifelse($3,,,$3),[$]$1, ifelse($4,,,$4))\n\ncf_path_prog=\"\"\ncf_path_args=\"\"\nIFS=\"${IFS:- \t}\"; cf_save_ifs=\"$IFS\"; IFS=\"${IFS}$PATH_SEPARATOR\"\nfor cf_temp in $ac_cv_path_$1\ndo\n\tif test -z \"$cf_path_prog\" ; then\n\t\tif test \"$with_full_paths\" = yes ; then\n\t\t\tCF_PATH_SYNTAX(cf_temp,break)\n\t\t\tcf_path_prog=\"$cf_temp\"\n\t\telse\n\t\t\tcf_path_prog=\"`basename \"$cf_temp\"`\"\n\t\tfi\n\telif test -z \"$cf_path_args\" ; then\n\t\tcf_path_args=\"$cf_temp\"\n\telse\n\t\tcf_path_args=\"$cf_path_args $cf_temp\"\n\tfi\ndone\nIFS=\"$cf_save_ifs\"\n\nif test -n \"$cf_path_prog\" ; then\n\tCF_MSG_LOG(defining path for ${cf_path_prog})\n\tAC_DEFINE_UNQUOTED($1_PATH,\"$cf_path_prog\",Define to pathname $1)\n\ttest -n \"$cf_path_args\" && AC_DEFINE_UNQUOTED($1_ARGS,\"$cf_path_args\",Define to provide args for $1)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PATH_SYNTAX version: 18 updated: 2020/12/31 18:40:20\ndnl --------------\ndnl Check the argument to see that it looks like a pathname.  Rewrite it if it\ndnl begins with one of the prefix/exec_prefix variables, and then again if the\ndnl result begins with 'NONE'.  This is necessary to work around autoconf's\ndnl delayed evaluation of those symbols.\nAC_DEFUN([CF_PATH_SYNTAX],[\nif test \"x$prefix\" != xNONE; then\n\tcf_path_syntax=\"$prefix\"\nelse\n\tcf_path_syntax=\"$ac_default_prefix\"\nfi\n\ncase \".[$]$1\" in\n(.\\[$]\\(*\\)*|.\\'*\\'*)\n\t;;\n(..|./*|.\\\\*)\n\t;;\n(.[[a-zA-Z]]:[[\\\\/]]*) # OS/2 EMX\n\t;;\n(.\\[$]\\{*prefix\\}*|.\\[$]\\{*dir\\}*)\n\teval $1=\"[$]$1\"\n\tcase \".[$]$1\" in\n\t(.NONE/*)\n\t\t$1=`echo \"[$]$1\" | sed -e s%NONE%$cf_path_syntax%`\n\t\t;;\n\tesac\n\t;;\n(.no|.NONE/*)\n\t$1=`echo \"[$]$1\" | sed -e s%NONE%$cf_path_syntax%`\n\t;;\n(*)\n\tifelse([$2],,[AC_MSG_ERROR([expected a pathname, not \\\"[$]$1\\\"])],$2)\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PKG_CONFIG version: 12 updated: 2021/10/10 20:18:09\ndnl -------------\ndnl Check for the package-config program, unless disabled by command-line.\ndnl\ndnl Sets $PKG_CONFIG to the pathname of the pkg-config program.\nAC_DEFUN([CF_PKG_CONFIG],\n[\nAC_MSG_CHECKING(if you want to use pkg-config)\nAC_ARG_WITH(pkg-config,\n\t[  --with-pkg-config{=path} enable/disable use of pkg-config],\n\t[cf_pkg_config=$withval],\n\t[cf_pkg_config=yes])\nAC_MSG_RESULT($cf_pkg_config)\n\ncase \"$cf_pkg_config\" in\n(no)\n\tPKG_CONFIG=none\n\t;;\n(yes)\n\tCF_ACVERSION_CHECK(2.52,\n\t\t[AC_PATH_TOOL(PKG_CONFIG, pkg-config, none)],\n\t\t[AC_PATH_PROG(PKG_CONFIG, pkg-config, none)])\n\t;;\n(*)\n\tPKG_CONFIG=$withval\n\t;;\nesac\n\ntest -z \"$PKG_CONFIG\" && PKG_CONFIG=none\nif test \"$PKG_CONFIG\" != none ; then\n\tCF_PATH_SYNTAX(PKG_CONFIG)\nelif test \"x$cf_pkg_config\" != xno ; then\n\tAC_MSG_WARN(pkg-config is not installed)\nfi\n\nAC_SUBST(PKG_CONFIG)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_POSIX_C_SOURCE version: 11 updated: 2018/12/31 20:46:17\ndnl -----------------\ndnl Define _POSIX_C_SOURCE to the given level, and _POSIX_SOURCE if needed.\ndnl\ndnl\tPOSIX.1-1990\t\t\t\t_POSIX_SOURCE\ndnl\tPOSIX.1-1990 and\t\t\t_POSIX_SOURCE and\ndnl\t\tPOSIX.2-1992 C-Language\t\t\t_POSIX_C_SOURCE=2\ndnl\t\tBindings Option\ndnl\tPOSIX.1b-1993\t\t\t\t_POSIX_C_SOURCE=199309L\ndnl\tPOSIX.1c-1996\t\t\t\t_POSIX_C_SOURCE=199506L\ndnl\tX/Open 2000\t\t\t\t_POSIX_C_SOURCE=200112L\ndnl\ndnl Parameters:\ndnl\t$1 is the nominal value for _POSIX_C_SOURCE\nAC_DEFUN([CF_POSIX_C_SOURCE],\n[AC_REQUIRE([CF_POSIX_VISIBLE])dnl\n\nif test \"$cf_cv_posix_visible\" = no; then\n\ncf_POSIX_C_SOURCE=ifelse([$1],,199506L,[$1])\n\ncf_save_CFLAGS=\"$CFLAGS\"\ncf_save_CPPFLAGS=\"$CPPFLAGS\"\n\nCF_REMOVE_DEFINE(cf_trim_CFLAGS,$cf_save_CFLAGS,_POSIX_C_SOURCE)\nCF_REMOVE_DEFINE(cf_trim_CPPFLAGS,$cf_save_CPPFLAGS,_POSIX_C_SOURCE)\n\nAC_CACHE_CHECK(if we should define _POSIX_C_SOURCE,cf_cv_posix_c_source,[\n\tCF_MSG_LOG(if the symbol is already defined go no further)\n\tAC_TRY_COMPILE([#include <sys/types.h>],[\n#ifndef _POSIX_C_SOURCE\nmake an error\n#endif],\n\t[cf_cv_posix_c_source=no],\n\t[cf_want_posix_source=no\n\t case .$cf_POSIX_C_SOURCE in\n\t (.[[12]]??*)\n\t\tcf_cv_posix_c_source=\"-D_POSIX_C_SOURCE=$cf_POSIX_C_SOURCE\"\n\t\t;;\n\t (.2)\n\t\tcf_cv_posix_c_source=\"-D_POSIX_C_SOURCE=$cf_POSIX_C_SOURCE\"\n\t\tcf_want_posix_source=yes\n\t\t;;\n\t (.*)\n\t\tcf_want_posix_source=yes\n\t\t;;\n\t esac\n\t if test \"$cf_want_posix_source\" = yes ; then\n\t\tAC_TRY_COMPILE([#include <sys/types.h>],[\n#ifdef _POSIX_SOURCE\nmake an error\n#endif],[],\n\t\tcf_cv_posix_c_source=\"$cf_cv_posix_c_source -D_POSIX_SOURCE\")\n\t fi\n\t CF_MSG_LOG(ifdef from value $cf_POSIX_C_SOURCE)\n\t CFLAGS=\"$cf_trim_CFLAGS\"\n\t CPPFLAGS=\"$cf_trim_CPPFLAGS\"\n\t CF_APPEND_TEXT(CPPFLAGS,$cf_cv_posix_c_source)\n\t CF_MSG_LOG(if the second compile does not leave our definition intact error)\n\t AC_TRY_COMPILE([#include <sys/types.h>],[\n#ifndef _POSIX_C_SOURCE\nmake an error\n#endif],,\n\t [cf_cv_posix_c_source=no])\n\t CFLAGS=\"$cf_save_CFLAGS\"\n\t CPPFLAGS=\"$cf_save_CPPFLAGS\"\n\t])\n])\n\nif test \"$cf_cv_posix_c_source\" != no ; then\n\tCFLAGS=\"$cf_trim_CFLAGS\"\n\tCPPFLAGS=\"$cf_trim_CPPFLAGS\"\n\tCF_ADD_CFLAGS($cf_cv_posix_c_source)\nfi\n\nfi # cf_cv_posix_visible\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_POSIX_VISIBLE version: 1 updated: 2018/12/31 20:46:17\ndnl ----------------\ndnl POSIX documents test-macros which an application may set before any system\ndnl headers are included to make features available.\ndnl\ndnl Some BSD platforms (originally FreeBSD, but copied by a few others)\ndnl diverged from POSIX in 2002 by setting symbols which make all of the most\ndnl recent features visible in the system header files unless the application\ndnl overrides the corresponding test-macros.  Doing that introduces portability\ndnl problems.\ndnl\ndnl This macro makes a special check for the symbols used for this, to avoid a\ndnl conflicting definition.\nAC_DEFUN([CF_POSIX_VISIBLE],\n[\nAC_CACHE_CHECK(if the POSIX test-macros are already defined,cf_cv_posix_visible,[\nAC_TRY_COMPILE([#include <stdio.h>],[\n#if defined(__POSIX_VISIBLE) && ((__POSIX_VISIBLE - 0L) > 0) \\\n\t&& defined(__XSI_VISIBLE) && ((__XSI_VISIBLE - 0L) > 0) \\\n\t&& defined(__BSD_VISIBLE) && ((__BSD_VISIBLE - 0L) > 0) \\\n\t&& defined(__ISO_C_VISIBLE) && ((__ISO_C_VISIBLE - 0L) > 0)\n#error conflicting symbols found\n#endif\n],[cf_cv_posix_visible=no],[cf_cv_posix_visible=yes])\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PREDEFINE version: 2 updated: 2010/05/26 16:44:57\ndnl ------------\ndnl Add definitions to CPPFLAGS to ensure they're predefined for all compiles.\ndnl\ndnl $1 = symbol to test\ndnl $2 = value (if any) to use for a predefinition\nAC_DEFUN([CF_PREDEFINE],\n[\nAC_MSG_CHECKING(if we must define $1)\nAC_TRY_COMPILE([#include <sys/types.h>\n],[\n#ifndef $1\nmake an error\n#endif],[cf_result=no],[cf_result=yes])\nAC_MSG_RESULT($cf_result)\n\nif test \"$cf_result\" = yes ; then\n\tCPPFLAGS=\"$CPPFLAGS ifelse([$2],,-D$1,[-D$1=$2])\"\nelif test \"x$2\" != \"x\" ; then\n\tAC_MSG_CHECKING(checking for compatible value versus $2)\n\tAC_TRY_COMPILE([#include <sys/types.h>\n],[\n#if $1-$2 < 0\nmake an error\n#endif],[cf_result=yes],[cf_result=no])\n\tAC_MSG_RESULT($cf_result)\n\tif test \"$cf_result\" = no ; then\n\t\t# perhaps we can override it - try...\n\t\tCPPFLAGS=\"$CPPFLAGS -D$1=$2\"\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PRG_RULES version: 2 updated: 2021/01/01 13:31:04\ndnl ------------\ndnl Append definitions and rules for the given programs to the subdirectory\ndnl Makefiles, and the recursion rule for the top-level Makefile.\ndnl\ndnl parameters\ndnl\t$1 = script to run\ndnl\t$2 = list of subdirectories\ndnl\ndnl variables\ndnl\t$AWK\nAC_DEFUN([CF_PRG_RULES],\n[\nfor cf_dir in $2\ndo\n\tif test ! -d \"$srcdir/$cf_dir\" ; then\n\t\tcontinue\n\telif test -f \"$srcdir/$cf_dir/programs\" ; then\n\t\t$AWK -f $1 \"$srcdir/$cf_dir/programs\" >>$cf_dir/Makefile\n\tfi\ndone\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_AR version: 1 updated: 2009/01/01 20:15:22\ndnl ----------\ndnl Check for archiver \"ar\".\nAC_DEFUN([CF_PROG_AR],[\nAC_CHECK_TOOL(AR, ar, ar)\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_AWK version: 1 updated: 2006/09/16 11:40:59\ndnl -----------\ndnl Check for awk, ensure that the check found something.\nAC_DEFUN([CF_PROG_AWK],\n[\nAC_PROG_AWK\ntest -z \"$AWK\" && AC_MSG_ERROR(No awk program found)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_CC version: 5 updated: 2019/12/31 08:53:54\ndnl ----------\ndnl standard check for CC, plus followup sanity checks\ndnl $1 = optional parameter to pass to AC_PROG_CC to specify compiler name\nAC_DEFUN([CF_PROG_CC],[\nCF_ACVERSION_CHECK(2.53,\n\t[AC_MSG_WARN(this will incorrectly handle gnatgcc choice)\n\t AC_REQUIRE([AC_PROG_CC])],\n\t[])\nifelse($1,,[AC_PROG_CC],[AC_PROG_CC($1)])\nCF_GCC_VERSION\nCF_ACVERSION_CHECK(2.52,\n\t[AC_PROG_CC_STDC],\n\t[CF_ANSI_CC_REQD])\nCF_CC_ENV_FLAGS\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_CC_C_O version: 6 updated: 2021/01/01 13:31:04\ndnl --------------\ndnl Analogous to AC_PROG_CC_C_O, but more useful: tests only $CC, ensures that\ndnl the output file can be renamed, and allows for a shell variable that can\ndnl be used later.  The parameter is either CC or CXX.  The result is the\ndnl cache variable:\ndnl\t$cf_cv_prog_CC_c_o\ndnl\t$cf_cv_prog_CXX_c_o\ndnl\ndnl $1 = compiler\ndnl $2 = compiler options, if any\nAC_DEFUN([CF_PROG_CC_C_O],\n[AC_REQUIRE([AC_PROG_CC])dnl\nAC_MSG_CHECKING([whether [$]$1 understands -c and -o together])\nAC_CACHE_VAL(cf_cv_prog_$1_c_o,\n[\ncat > conftest.$ac_ext <<CF_EOF\nint main(void)\n{\n\t${cf_cv_main_return:-return}(0);\n}\nCF_EOF\n# We do the test twice because some compilers refuse to overwrite an\n# existing .o file with -o, though they will create one.\nac_try='[$]$1 $2 -c conftest.$ac_ext -o conftest2.$ac_objext >&AC_FD_CC'\nif AC_TRY_EVAL(ac_try) &&\n  test -f conftest2.$ac_objext && AC_TRY_EVAL(ac_try);\nthen\n  eval cf_cv_prog_$1_c_o=yes\nelse\n  eval cf_cv_prog_$1_c_o=no\nfi\nrm -rf ./conftest*\n])dnl\nif test \"$cf_cv_prog_$1_c_o\" = yes; then\n  AC_MSG_RESULT([yes])\nelse\n  AC_MSG_RESULT([no])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_GNAT version: 12 updated: 2021/01/02 17:09:14\ndnl ------------\ndnl Check for gnat/gnatmake/etc, ensure that the toolset is complete.\nAC_DEFUN([CF_PROG_GNAT],[\nfor cf_prog_gnat in gnat gnatmake gprconfig gprbuild\ndo\n\tCF_UPPER(cf_upper_prog_gnat,${cf_prog_gnat})\n\n\tunset ac_cv_path_cf_TEMP_gnat\n\tunset cf_TEMP_gnat\n\tAC_PATH_PROG(cf_TEMP_gnat,$cf_prog_gnat,no)\n\teval \"cf_cv_PATH_$cf_upper_prog_gnat=[$]ac_cv_path_cf_TEMP_gnat\"\n\n\tif test \"x$cf_TEMP_gnat\" != xno; then\n\t\tunset cf_cv_gnat_version\n\t\tunset cf_TEMP_gnat\n\t\tCF_GNAT_VERSION(cf_TEMP_gnat,$cf_prog_gnat)\n\tfi\n\teval \"cf_cv_VERSION_$cf_upper_prog_gnat=[$]cf_TEMP_gnat\"\n\n\tunset cf_TEMP_gnat\n\tunset cf_cv_gnat_version\n\tunset ac_cv_path_cf_TEMP_gnat\ndone\n\nif test \"x$cf_cv_VERSION_GNATMAKE\" = \"xno\"; then\n\tcf_ada_make=\n\tcf_cv_prog_gnat_correct=no\nelse\n\tcf_ada_make=gnatmake\n\tif test \"x$cf_cv_VERSION_GPRCONFIG\" = \"xno\"; then\n\t\t# gprconfig is newer than gnatmake; we can continue...\n\t\tcf_ada_config=\"##\"\n\telse\n\t\trm -rf ./conftest* ./*~conftest*\n\t\tif mkdir conftest.src\n\t\tthen\n\t\t\tcf_ada_config=\"\"\n\t\t\tcd conftest.src\n\t\t\tfor cf_gprconfig in Ada C\n\t\t\tdo\n\t\t\t\tAC_MSG_CHECKING(for gprconfig name for $cf_gprconfig)\n\t\t\t\tif test \"$cf_gprconfig\" = C\n\t\t\t\tthen\n\t\t\t\t\tfor cf_gprconfig_param in \\\n\t\t\t\t\t\t\"$cf_gprconfig,,,,GNATGCC\" \\\n\t\t\t\t\t\t\"$cf_gprconfig,,,,GCC\" \\\n\t\t\t\t\t\t\"$cf_gprconfig\"\n\t\t\t\t\tdo\n\t\t\t\t\t\tcf_gprconfig_value=`echo s| gprconfig --config=$cf_gprconfig_param 2>&AC_FD_CC | ${AWK:-awk} '/^\\*/{print [$]3;}' | head -n 1`\n\t\t\t\t\t\ttest -n \"$cf_gprconfig_value\" && break\n\t\t\t\t\tdone\n\t\t\t\telse\n\t\t\t\t\tcf_gprconfig_param=$cf_gprconfig\n\t\t\t\t\tcf_gprconfig_value=`echo s| gprconfig --config=$cf_gprconfig_param 2>&AC_FD_CC | ${AWK:-awk} '/^\\*/{print [$]3;}' | head -n 1`\n\t\t\t\tfi\n\t\t\t\tif test -n \"$cf_gprconfig_value\"\n\t\t\t\tthen\n\t\t\t\t\teval \"cf_ada_config_[$]cf_gprconfig=[$]cf_gprconfig_value\"\n\t\t\t\t\tAC_MSG_RESULT($cf_gprconfig_value)\n\t\t\t\telse\n\t\t\t\t\tAC_MSG_RESULT(missing)\n\t\t\t\t\tcf_ada_config=\"#\"\n\t\t\t\t\tbreak\n\t\t\t\tfi\n\t\t\tdone\n\t\t\tcd ..\n\t\t\trm -rf ./conftest* ./*~conftest*\n\t\tfi\n\tfi\n\tif test \"x$cf_ada_config\" != \"x#\"\n\tthen\n\t\tCF_GNAT_VERSION\n\t\tCF_CHECK_GNAT_VERSION\n\t\tAC_CHECK_PROG(M4_exists, m4, yes, no)\n\t\tif test \"$ac_cv_prog_M4_exists\" = no; then\n\t\t\tcf_cv_prog_gnat_correct=no\n\t\t\tAC_MSG_WARN(Ada95 binding required program m4 not found. Ada95 binding disabled)\n\t\tfi\n\t\tif test \"$cf_cv_prog_gnat_correct\" = yes; then\n\t\t\tAC_MSG_CHECKING(if GNAT works)\n\t\t\tCF_GNAT_TRY_RUN([procedure conftest;],\n[with Text_IO;\nwith GNAT.OS_Lib;\nprocedure conftest is\nbegin\n   Text_IO.Put (\"Hello World\");\n   Text_IO.New_Line;\n   GNAT.OS_Lib.OS_Exit (0);\nend conftest;],\n[cf_cv_prog_gnat_correct=yes],\n[cf_cv_prog_gnat_correct=no])\n\t\t\tAC_MSG_RESULT($cf_cv_prog_gnat_correct)\n\t\tfi\n\telse\n\t\tcf_cv_prog_gnat_correct=no\n\tfi\nfi\n\nAC_SUBST(cf_ada_make)\nAC_SUBST(cf_ada_config)\nAC_SUBST(cf_ada_config_Ada)\nAC_SUBST(cf_ada_config_C)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_INSTALL version: 10 updated: 2021/01/04 19:33:05\ndnl ---------------\ndnl Force $INSTALL to be an absolute-path.  Otherwise, edit_man.sh and the\ndnl misc/tabset install won't work properly.  Usually this happens only when\ndnl using the fallback mkinstalldirs script\nAC_DEFUN([CF_PROG_INSTALL],\n[AC_PROG_INSTALL\ncase $INSTALL in\n(/*)\n\t;;\n(*)\n\tCF_DIRNAME(cf_dir,$INSTALL)\n\ttest -z \"$cf_dir\" && cf_dir=.\n\tINSTALL=\"`cd \\\"$cf_dir\\\" && pwd`\"/\"`echo \"$INSTALL\" | sed -e 's%^.*/%%'`\"\n\t;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_LDCONFIG version: 5 updated: 2015/04/18 08:56:57\ndnl ----------------\ndnl Check for ldconfig, needed to fixup shared libraries that would be built\ndnl and then used in the install.\nAC_DEFUN([CF_PROG_LDCONFIG],[\nif test \"$cross_compiling\" = yes ; then\n\tLDCONFIG=:\nelse\n\tcase \"$cf_cv_system_name\" in\n\t(dragonfly*|mirbsd*|freebsd*)\n\t\ttest -z \"$LDCONFIG\" && LDCONFIG=\"/sbin/ldconfig -R\"\n\t\t;;\n\t(*) LDPATH=$PATH:/sbin:/usr/sbin\n\t\tAC_PATH_PROG(LDCONFIG,ldconfig,,$LDPATH)\n\t\t;;\n\tesac\nfi\nAC_SUBST(LDCONFIG)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_LINT version: 5 updated: 2022/08/20 15:44:13\ndnl ------------\nAC_DEFUN([CF_PROG_LINT],\n[\nAC_CHECK_PROGS(LINT, lint cppcheck splint)\ncase \"x$LINT\" in\n(xcppcheck|x*/cppcheck)\n\ttest -z \"$LINT_OPTS\" && LINT_OPTS=\"--enable=all\"\n\t;;\nesac\nAC_SUBST(LINT_OPTS)\nAC_SUBST(LINT_LIBS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_PROG_LN_S version: 2 updated: 2010/08/14 18:25:37\ndnl ------------\ndnl Combine checks for \"ln -s\" and \"ln -sf\", updating $LN_S to include \"-f\"\ndnl option if it is supported.\nAC_DEFUN([CF_PROG_LN_S],[\nAC_PROG_LN_S\nAC_MSG_CHECKING(if $LN_S -f options work)\n\nrm -f conf$$.src conf$$dst\necho >conf$$.dst\necho first >conf$$.src\nif $LN_S -f conf$$.src conf$$.dst 2>/dev/null; then\n\tcf_prog_ln_sf=yes\nelse\n\tcf_prog_ln_sf=no\nfi\nrm -f conf$$.dst conf$$src\nAC_MSG_RESULT($cf_prog_ln_sf)\n\ntest \"$cf_prog_ln_sf\" = yes && LN_S=\"$LN_S -f\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_REGEX version: 18 updated: 2021/01/01 16:53:59\ndnl --------\ndnl Attempt to determine if we've got one of the flavors of regular-expression\ndnl code that we can support.\nAC_DEFUN([CF_REGEX],\n[\n\ncf_regex_func=no\ncf_regex_libs=\ncase \"$host_os\" in\n(mingw*)\n\t# -lsystre -ltre -lintl -liconv\n\tAC_CHECK_LIB(systre,regcomp,[\n\t\tAC_CHECK_LIB(iconv,libiconv_open,[CF_ADD_LIB(iconv)])\n\t\tAC_CHECK_LIB(intl,libintl_gettext,[CF_ADD_LIB(intl)])\n\t\tAC_CHECK_LIB(tre,tre_regcomp,[CF_ADD_LIB(tre)])\n\t\tCF_ADD_LIB(systre)\n\t\tcf_regex_func=regcomp\n\t],[\n\t\tAC_CHECK_LIB(gnurx,regcomp,[\n\t\t\tCF_ADD_LIB(gnurx)\n\t\t\tcf_regex_func=regcomp])\n\t])\n\t;;\n(*)\n\tcf_regex_libs=\"regex re\"\n\tAC_CHECK_FUNC(regcomp,[cf_regex_func=regcomp],[\n\t\tfor cf_regex_lib in $cf_regex_libs\n\t\tdo\n\t\t\tAC_CHECK_LIB($cf_regex_lib,regcomp,[\n\t\t\t\t\tCF_ADD_LIB($cf_regex_lib)\n\t\t\t\t\tcf_regex_func=regcomp\n\t\t\t\t\tbreak])\n\t\tdone\n\t])\n\t;;\nesac\n\nif test \"$cf_regex_func\" = no ; then\n\tAC_CHECK_FUNC(compile,[cf_regex_func=compile],[\n\t\tAC_CHECK_LIB(gen,compile,[\n\t\t\t\tCF_ADD_LIB(gen)\n\t\t\t\tcf_regex_func=compile])])\nfi\n\nif test \"$cf_regex_func\" = no ; then\n\tAC_MSG_WARN(cannot find regular expression library)\nfi\n\nAC_CACHE_CHECK(for regular-expression headers,cf_cv_regex_hdrs,[\n\ncf_cv_regex_hdrs=no\ncase \"$cf_regex_func\" in\n(compile)\n\tfor cf_regex_hdr in regexp.h regexpr.h\n\tdo\n\t\tAC_TRY_LINK([#include <$cf_regex_hdr>],[\n\t\t\tchar *p = compile(\"\", \"\", \"\", 0);\n\t\t\tint x = step(\"\", \"\");\n\t\t\t(void)p;\n\t\t\t(void)x;\n\t\t],[\n\t\t\tcf_cv_regex_hdrs=$cf_regex_hdr\n\t\t\tbreak\n\t\t])\n\tdone\n\t;;\n(*)\n\tfor cf_regex_hdr in regex.h\n\tdo\n\t\tAC_TRY_LINK([#include <sys/types.h>\n#include <$cf_regex_hdr>],[\n\t\t\tregex_t *p = 0;\n\t\t\tint x = regcomp(p, \"\", 0);\n\t\t\tint y = regexec(p, \"\", 0, 0, 0);\n\t\t\t(void)x;\n\t\t\t(void)y;\n\t\t\tregfree(p);\n\t\t],[\n\t\t\tcf_cv_regex_hdrs=$cf_regex_hdr\n\t\t\tbreak\n\t\t])\n\tdone\n\t;;\nesac\n\n])\n\ncase \"$cf_cv_regex_hdrs\" in\n\t(no)\t\tAC_MSG_WARN(no regular expression header found) ;;\n\t(regex.h)\tAC_DEFINE(HAVE_REGEX_H_FUNCS,1,[Define to 1 to include regex.h for regular expressions]) ;;\n\t(regexp.h)\tAC_DEFINE(HAVE_REGEXP_H_FUNCS,1,[Define to 1 to include regexp.h for regular expressions]) ;;\n\t(regexpr.h) AC_DEFINE(HAVE_REGEXPR_H_FUNCS,1,[Define to 1 to include regexpr.h for regular expressions]) ;;\nesac\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_REMOVE_CFLAGS version: 3 updated: 2021/09/05 17:25:40\ndnl ----------------\ndnl Remove a given option from CFLAGS/CPPFLAGS\ndnl $1 = option to remove\ndnl $2 = variable to update\ndnl $3 = nonempty to allow verbose message\ndefine([CF_REMOVE_CFLAGS],\n[\ncf_tmp_cflag=`echo \"x$1\" | sed -e 's/^.//' -e 's/=.*//'`\nwhile true\ndo\n\tcf_old_cflag=`echo \"x[$]$2\" | sed -e 's/^.//' -e 's/[[ \t]][[ \t]]*-/ -/g' -e \"s%$cf_tmp_cflag\\\\(=[[^ \t]][[^ \t]]*\\\\)\\?%%\" -e 's/^[[ \t]]*//' -e 's%[[ ]][[ ]]*-D% -D%g' -e 's%[[ ]][[ ]]*-I% -I%g'`\n\ttest \"[$]$2\" != \"$cf_old_cflag\" || break\n\tifelse([$3],,,[CF_VERBOSE(removing old option $1 from $2)])\n\t$2=\"$cf_old_cflag\"\ndone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_REMOVE_DEFINE version: 3 updated: 2010/01/09 11:05:50\ndnl ----------------\ndnl Remove all -U and -D options that refer to the given symbol from a list\ndnl of C compiler options.  This works around the problem that not all\ndnl compilers process -U and -D options from left-to-right, so a -U option\ndnl cannot be used to cancel the effect of a preceding -D option.\ndnl\ndnl $1 = target (which could be the same as the source variable)\ndnl $2 = source (including '$')\ndnl $3 = symbol to remove\ndefine([CF_REMOVE_DEFINE],\n[\n$1=`echo \"$2\" | \\\n\tsed\t-e 's/-[[UD]]'\"$3\"'\\(=[[^ \t]]*\\)\\?[[ \t]]/ /g' \\\n\t\t-e 's/-[[UD]]'\"$3\"'\\(=[[^ \t]]*\\)\\?[$]//g'`\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_REMOVE_LIB version: 1 updated: 2007/02/17 14:11:52\ndnl -------------\ndnl Remove the given library from the symbol\ndnl\ndnl $1 = target (which could be the same as the source variable)\ndnl $2 = source (including '$')\ndnl $3 = library to remove\ndefine([CF_REMOVE_LIB],\n[\n# remove $3 library from $2\n$1=`echo \"$2\" | sed -e 's/-l$3[[ \t]]//g' -e 's/-l$3[$]//'`\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_RESTORE_XTRA_FLAGS version: 1 updated: 2020/01/11 16:47:45\ndnl ---------------------\ndnl Restore flags saved in CF_SAVE_XTRA_FLAGS\ndnl $1 = name of current macro\ndefine([CF_RESTORE_XTRA_FLAGS],\n[\nLIBS=\"$cf_save_LIBS_$1\"\nCFLAGS=\"$cf_save_CFLAGS_$1\"\nCPPFLAGS=\"$cf_save_CPPFLAGS_$1\"\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_RPATH_HACK version: 13 updated: 2021/01/03 18:30:50\ndnl -------------\nAC_DEFUN([CF_RPATH_HACK],\n[AC_REQUIRE([AC_PROG_FGREP])dnl\nAC_REQUIRE([CF_LD_RPATH_OPT])dnl\n\nAC_MSG_CHECKING(for updated LDFLAGS)\nif test -n \"$LD_RPATH_OPT\" ; then\n\tAC_MSG_RESULT(maybe)\n\n\tAC_CHECK_PROGS(cf_ldd_prog,ldd,no)\n\tcf_rpath_list=\"/usr/lib /lib\"\n\tif test \"$cf_ldd_prog\" != no\n\tthen\n\t\tcf_rpath_oops=\n\nAC_TRY_LINK([#include <stdio.h>],\n\t\t[printf(\"Hello\");],\n\t\t[cf_rpath_oops=`\"$cf_ldd_prog\" \"conftest$ac_exeext\" | ${FGREP-fgrep} ' not found' | sed -e 's% =>.*$%%' |sort | uniq`\n\t\t cf_rpath_list=`\"$cf_ldd_prog\" \"conftest$ac_exeext\" | ${FGREP-fgrep} / | sed -e 's%^.*[[ \t]]/%/%' -e 's%/[[^/]][[^/]]*$%%' |sort | uniq`])\n\n\t\t# If we passed the link-test, but get a \"not found\" on a given library,\n\t\t# this could be due to inept reconfiguration of gcc to make it only\n\t\t# partly honor /usr/local/lib (or whatever).  Sometimes this behavior\n\t\t# is intentional, e.g., installing gcc in /usr/bin and suppressing the\n\t\t# /usr/local libraries.\n\t\tif test -n \"$cf_rpath_oops\"\n\t\tthen\n\t\t\tfor cf_rpath_src in $cf_rpath_oops\n\t\t\tdo\n\t\t\t\tfor cf_rpath_dir in \\\n\t\t\t\t\t/usr/local \\\n\t\t\t\t\t/usr/pkg \\\n\t\t\t\t\t/opt/sfw\n\t\t\t\tdo\n\t\t\t\t\tif test -f \"$cf_rpath_dir/lib/$cf_rpath_src\"\n\t\t\t\t\tthen\n\t\t\t\t\t\tCF_VERBOSE(...adding -L$cf_rpath_dir/lib to LDFLAGS for $cf_rpath_src)\n\t\t\t\t\t\tLDFLAGS=\"$LDFLAGS -L$cf_rpath_dir/lib\"\n\t\t\t\t\t\tbreak\n\t\t\t\t\tfi\n\t\t\t\tdone\n\t\t\tdone\n\t\tfi\n\tfi\n\n\tCF_VERBOSE(...checking EXTRA_LDFLAGS $EXTRA_LDFLAGS)\n\n\tCF_RPATH_HACK_2(LDFLAGS)\n\tCF_RPATH_HACK_2(LIBS)\n\n\tCF_VERBOSE(...checked EXTRA_LDFLAGS $EXTRA_LDFLAGS)\nelse\n\tAC_MSG_RESULT(no)\nfi\nAC_SUBST(EXTRA_LDFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_RPATH_HACK_2 version: 8 updated: 2021/01/01 13:31:04\ndnl ---------------\ndnl Do one set of substitutions for CF_RPATH_HACK, adding an rpath option to\ndnl EXTRA_LDFLAGS for each -L option found.\ndnl\ndnl $cf_rpath_list contains a list of directories to ignore.\ndnl\ndnl $1 = variable name to update.  The LDFLAGS variable should be the only one,\ndnl      but LIBS often has misplaced -L options.\nAC_DEFUN([CF_RPATH_HACK_2],\n[\nCF_VERBOSE(...checking $1 [$]$1)\n\ncf_rpath_dst=\nfor cf_rpath_src in [$]$1\ndo\n\tcase \"$cf_rpath_src\" in\n\t(-L*)\n\n\t\t# check if this refers to a directory which we will ignore\n\t\tcf_rpath_skip=no\n\t\tif test -n \"$cf_rpath_list\"\n\t\tthen\n\t\t\tfor cf_rpath_item in $cf_rpath_list\n\t\t\tdo\n\t\t\t\tif test \"x$cf_rpath_src\" = \"x-L$cf_rpath_item\"\n\t\t\t\tthen\n\t\t\t\t\tcf_rpath_skip=yes\n\t\t\t\t\tbreak\n\t\t\t\tfi\n\t\t\tdone\n\t\tfi\n\n\t\tif test \"$cf_rpath_skip\" = no\n\t\tthen\n\t\t\t# transform the option\n\t\t\tif test \"$LD_RPATH_OPT\" = \"-R \" ; then\n\t\t\t\tcf_rpath_tmp=`echo \"$cf_rpath_src\" |sed -e \"s%-L%-R %\"`\n\t\t\telse\n\t\t\t\tcf_rpath_tmp=`echo \"$cf_rpath_src\" |sed -e \"s%-L%$LD_RPATH_OPT%\"`\n\t\t\tfi\n\n\t\t\t# if we have not already added this, add it now\n\t\t\tcf_rpath_tst=`echo \"$EXTRA_LDFLAGS\" | sed -e \"s%$cf_rpath_tmp %%\"`\n\t\t\tif test \"x$cf_rpath_tst\" = \"x$EXTRA_LDFLAGS\"\n\t\t\tthen\n\t\t\t\tCF_VERBOSE(...Filter $cf_rpath_src ->$cf_rpath_tmp)\n\t\t\t\tEXTRA_LDFLAGS=\"$cf_rpath_tmp $EXTRA_LDFLAGS\"\n\t\t\tfi\n\t\tfi\n\t\t;;\n\tesac\n\tcf_rpath_dst=\"$cf_rpath_dst $cf_rpath_src\"\ndone\n$1=$cf_rpath_dst\n\nCF_VERBOSE(...checked $1 [$]$1)\nAC_SUBST(EXTRA_LDFLAGS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SAVE_XTRA_FLAGS version: 1 updated: 2020/01/11 16:46:44\ndnl ------------------\ndnl Use this macro to save CFLAGS/CPPFLAGS/LIBS before checks against X headers\ndnl and libraries which do not update those variables.\ndnl\ndnl $1 = name of current macro\ndefine([CF_SAVE_XTRA_FLAGS],\n[\ncf_save_LIBS_$1=\"$LIBS\"\ncf_save_CFLAGS_$1=\"$CFLAGS\"\ncf_save_CPPFLAGS_$1=\"$CPPFLAGS\"\nLIBS=\"$LIBS ${X_PRE_LIBS} ${X_LIBS} ${X_EXTRA_LIBS}\"\nfor cf_X_CFLAGS in $X_CFLAGS\ndo\n\tcase \"x$cf_X_CFLAGS\" in\n\tx-[[IUD]]*)\n\t\tCPPFLAGS=\"$CPPFLAGS $cf_X_CFLAGS\"\n\t\t;;\n\t*)\n\t\tCFLAGS=\"$CFLAGS $cf_X_CFLAGS\"\n\t\t;;\n\tesac\ndone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SHARED_OPTS version: 107 updated: 2021/09/04 06:47:34\ndnl --------------\ndnl --------------\ndnl Attempt to determine the appropriate CC/LD options for creating a shared\ndnl library.\ndnl\ndnl Notes:\ndnl a) ${LOCAL_LDFLAGS} is used to link executables that will run within\ndnl the build-tree, i.e., by making use of the libraries that are compiled in\ndnl $rel_builddir/lib We avoid compiling-in a $rel_builddir/lib path for the\ndnl shared library since that can lead to unexpected results at runtime.\ndnl b) ${LOCAL_LDFLAGS2} has the same intention but assumes that the shared\ndnl libraries are compiled in ../../lib\ndnl\ndnl The variable 'cf_cv_do_symlinks' is used to control whether we configure\ndnl to install symbolic links to the rel/abi versions of shared libraries.\ndnl\ndnl The variable 'cf_cv_shlib_version' controls whether we use the rel or abi\ndnl version when making symbolic links.\ndnl\ndnl The variable 'cf_cv_shlib_version_infix' controls whether shared library\ndnl version numbers are infix (ex: libncurses.<ver>.dylib) or postfix\ndnl (ex: libncurses.so.<ver>).\ndnl\ndnl Some loaders leave 'so_locations' lying around.  It is nice to clean up.\nAC_DEFUN([CF_SHARED_OPTS],\n[\n\tAC_REQUIRE([CF_LD_RPATH_OPT])\n\n\tRM_SHARED_OPTS=\n\tLOCAL_LDFLAGS=\n\tLOCAL_LDFLAGS2=\n\tLD_SHARED_OPTS=\n\tINSTALL_LIB=\"-m 644\"\n\t: ${rel_builddir:=.}\n\n\tshlibdir=$libdir\n\tAC_SUBST(shlibdir)\n\n\tMAKE_DLLS=\"#\"\n\tAC_SUBST(MAKE_DLLS)\n\n\tcf_cv_do_symlinks=no\n\tcf_ld_rpath_opt=\n\ttest \"$cf_cv_enable_rpath\" = yes && cf_ld_rpath_opt=\"$LD_RPATH_OPT\"\n\n\tAC_MSG_CHECKING(if release/abi version should be used for shared libs)\n\tAC_ARG_WITH(shlib-version,\n\t[  --with-shlib-version=X  Specify rel or abi version for shared libs],\n\t[test -z \"$withval\" && withval=auto\n\tcase \"$withval\" in\n\t(yes)\n\t\tcf_cv_shlib_version=auto\n\t\t;;\n\t(rel|abi|auto)\n\t\tcf_cv_shlib_version=$withval\n\t\t;;\n\t(*)\n\t\tAC_MSG_RESULT($withval)\n\t\tAC_MSG_ERROR([option value must be one of: rel, abi, or auto])\n\t\t;;\n\tesac\n\t],[cf_cv_shlib_version=auto])\n\tAC_MSG_RESULT($cf_cv_shlib_version)\n\n\tcf_cv_rm_so_locs=no\n\tcf_try_cflags=\n\n\t# Some less-capable ports of gcc support only -fpic\n\tCC_SHARED_OPTS=\n\n\tcf_try_fPIC=no\n\tif test \"$GCC\" = yes\n\tthen\n\t\tcf_try_fPIC=yes\n\telse\n\t\tcase \"$cf_cv_system_name\" in\n\t\t(*linux*)\t# e.g., PGI compiler\n\t\t\tcf_try_fPIC=yes\n\t\t\t;;\n\t\tesac\n\tfi\n\n\tif test \"$cf_try_fPIC\" = yes\n\tthen\n\t\tAC_MSG_CHECKING(which $CC option to use)\n\t\tcf_save_CFLAGS=\"$CFLAGS\"\n\t\tfor CC_SHARED_OPTS in -fPIC -fpic ''\n\t\tdo\n\t\t\tCFLAGS=\"$cf_save_CFLAGS $CC_SHARED_OPTS\"\n\t\t\tAC_TRY_COMPILE([#include <stdio.h>],[int x = 1],[break],[])\n\t\tdone\n\t\tAC_MSG_RESULT($CC_SHARED_OPTS)\n\t\tCFLAGS=\"$cf_save_CFLAGS\"\n\tfi\n\n\tcf_cv_shlib_version_infix=no\n\n\tcase \"$cf_cv_system_name\" in\n\t(aix4.[3-9]*|aix[[5-7]]*)\n\t\tif test \"$GCC\" = yes; then\n\t\t\tCC_SHARED_OPTS='-Wl,-brtl'\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-brtl -Wl,-blibpath:${RPATH_LIST}:/usr/lib -o [$]@'\n\t\telse\n\t\t\tCC_SHARED_OPTS='-brtl'\n\t\t\t# as well as '-qpic=large -G' or perhaps \"-bM:SRE -bnoentry -bexpall\"\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -G -Wl,-brtl -Wl,-blibpath:${RPATH_LIST}:/usr/lib -o [$]@'\n\t\tfi\n\t\t;;\n\t(beos*)\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -o $[@] -Xlinker -soname=`basename $[@]` -nostart -e 0'\n\t\t;;\n\t(cygwin*)\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB=$SHELL' '$rel_builddir'/mk_shared_lib.sh [$]@ [$]{CC} [$]{CFLAGS}'\n\t\tRM_SHARED_OPTS=\"$RM_SHARED_OPTS $rel_builddir/mk_shared_lib.sh *.dll.a\"\n\t\tcf_cv_shlib_version=cygdll\n\t\tcf_cv_shlib_version_infix=cygdll\n\t\tshlibdir=$bindir\n\t\tMAKE_DLLS=\n\t\tcat >mk_shared_lib.sh <<-CF_EOF\n\t\t#!$SHELL\n\t\tSHARED_LIB=\\[$]1\n\t\tIMPORT_LIB=\\`echo \"\\[$]1\" | sed -e 's/cyg/lib/' -e 's/[[0-9]]*\\.dll[$]/.dll.a/'\\`\n\t\tshift\n\t\tcat <<-EOF\n\t\tLinking shared library\n\t\t** SHARED_LIB \\[$]SHARED_LIB\n\t\t** IMPORT_LIB \\[$]IMPORT_LIB\nEOF\n\t\texec \\[$]* ${LDFLAGS} -shared -Wl,--out-implib=\\[$]{IMPORT_LIB} -Wl,--export-all-symbols -o \\[$]{SHARED_LIB}\nCF_EOF\n\t\tchmod +x mk_shared_lib.sh\n\t\t;;\n\t(msys*)\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB=$SHELL' '$rel_builddir'/mk_shared_lib.sh [$]@ [$]{CC} [$]{CFLAGS}'\n\t\tRM_SHARED_OPTS=\"$RM_SHARED_OPTS $rel_builddir/mk_shared_lib.sh *.dll.a\"\n\t\tcf_cv_shlib_version=msysdll\n\t\tcf_cv_shlib_version_infix=msysdll\n\t\tshlibdir=$bindir\n\t\tMAKE_DLLS=\n\t\tcat >mk_shared_lib.sh <<-CF_EOF\n\t\t#!$SHELL\n\t\tSHARED_LIB=\\[$]1\n\t\tIMPORT_LIB=\\`echo \"\\[$]1\" | sed -e 's/msys-/lib/' -e 's/[[0-9]]*\\.dll[$]/.dll.a/'\\`\n\t\tshift\n\t\tcat <<-EOF\n\t\tLinking shared library\n\t\t** SHARED_LIB \\[$]SHARED_LIB\n\t\t** IMPORT_LIB \\[$]IMPORT_LIB\nEOF\n\t\texec \\[$]* ${LDFLAGS} -shared -Wl,--out-implib=\\[$]{IMPORT_LIB} -Wl,--export-all-symbols -o \\[$]{SHARED_LIB}\nCF_EOF\n\t\tchmod +x mk_shared_lib.sh\n\t\t;;\n\t(darwin*)\n\t\tcf_try_cflags=\"no-cpp-precomp\"\n\t\tCC_SHARED_OPTS=\"-dynamic\"\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -dynamiclib -install_name ${libdir}/`basename $[@]` -compatibility_version ${ABI_VERSION} -current_version ${ABI_VERSION} -o $[@]'\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=abi\n\t\tcf_cv_shlib_version_infix=yes\n\t\tAC_CACHE_CHECK([if ld -search_paths_first works], cf_cv_ldflags_search_paths_first, [\n\t\t\tcf_save_LDFLAGS=$LDFLAGS\n\t\t\tLDFLAGS=\"$LDFLAGS -Wl,-search_paths_first\"\n\t\t\tAC_TRY_LINK(, [int i;], cf_cv_ldflags_search_paths_first=yes, cf_cv_ldflags_search_paths_first=no)\n\t\t\t\tLDFLAGS=$cf_save_LDFLAGS])\n\t\tif test \"$cf_cv_ldflags_search_paths_first\" = yes; then\n\t\t\tLDFLAGS=\"$LDFLAGS -Wl,-search_paths_first\"\n\t\tfi\n\t\t;;\n\t(haiku*)\n\t\tCF_SHARED_SONAME\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-soname,'$cf_cv_shared_soname',-stats,-lc -o $[@]'\n\t\t;;\n\t(hpux[[7-8]]*)\n\t\t# HP-UX 8.07 ld lacks \"+b\" option used for libdir search-list\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='+Z'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -b -o $[@]'\n\t\tINSTALL_LIB=\"-m 555\"\n\t\t;;\n\t(hpux*)\n\t\t# (tested with gcc 2.7.2 -- I don't have c89)\n\t\tif test \"$GCC\" = yes; then\n\t\t\tLD_SHARED_OPTS='-Xlinker +b -Xlinker ${libdir}'\n\t\telse\n\t\t\tCC_SHARED_OPTS='+Z'\n\t\t\tLD_SHARED_OPTS='-Wl,+b,${libdir}'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} +b ${libdir} -b -o $[@]'\n\t\t# HP-UX shared libraries must be executable, and should be\n\t\t# readonly to exploit a quirk in the memory manager.\n\t\tINSTALL_LIB=\"-m 555\"\n\t\t;;\n\t(interix*)\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=rel\n\t\tif test \"$cf_cv_shlib_version\" = rel; then\n\t\t\tcf_shared_soname='`basename $[@] .${REL_VERSION}`.${ABI_VERSION}'\n\t\telse\n\t\t\tcf_shared_soname='`basename $[@]`'\n\t\tfi\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-rpath,${RPATH_LIST} -Wl,-h,'$cf_shared_soname' -o $[@]'\n\t\t;;\n\t(irix*)\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\t# tested with IRIX 5.2 and 'cc'.\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='-KPIC'\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -rdata_shared -soname `basename $[@]` -o $[@]'\n\t\telse\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-soname,`basename $[@]` -o $[@]'\n\t\tfi\n\t\tcf_cv_rm_so_locs=yes\n\t\t;;\n\t(linux*|gnu*|k*bsd*-gnu)\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test -n \"$LD_RPATH_OPT\" ; then\n\t\t\tLOCAL_LDFLAGS=\"${LD_RPATH_OPT}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\tfi\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCF_SHARED_SONAME\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-soname,'$cf_cv_shared_soname',-stats,-lc -o $[@]'\n\t\t;;\n\t(mingw*msvc*)\n\t\tcf_cv_shlib_version=msvcdll\n\t\tcf_cv_shlib_version_infix=msvcdll\n\t\tshlibdir=$bindir\n\t\tMAKE_DLLS=\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" ; then\n\t\t\tLOCAL_LDFLAGS=\"-link -dll\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\t\tEXTRA_LDFLAGS=\"-link -dll $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB=$SHELL' '$rel_builddir'/mk_shared_lib.sh [$]@ ${LD} [$]{CFLAGS}'\n\t\tRM_SHARED_OPTS=\"$RM_SHARED_OPTS $rel_builddir/mk_shared_lib.sh *.dll.lib\"\n\t\tcat >mk_shared_lib.sh <<-CF_EOF\n\t\t#!$SHELL\n\t\tSHARED_LIB=\\[$]1\n\t\tIMPORT_LIB=\\`echo \"\\[$]1\" | sed -e 's/[[0-9]]*\\.dll[$]/.dll.lib/'\\`\n\t\tshift\n\t\tmy_ld=\\[$]1\n\t\tshift\n\t\tcat <<-EOF\n\t\tLinking shared library\n\t\t** SHARED LIB \\$SHARED_LIB\n\t\t** IMPORT_LIB \\$IMPORT_LIB\nEOF\n\t\targs=\\$(echo \\[$]* | sed -E \"s#-l(\\w*)#\\1.dll.lib#g\" | sed -E \"s#-L(\\w*)#-LIBPATH:\\1#g\")\n\t\texec \\$my_ld -DLL -IMPLIB:\"\\${IMPORT_LIB}\" -OUT:\"\\${SHARED_LIB}\" ${LDFLAGS} \\$args\n\t\tmv \"\\${IMPORT_LIB}\" \"\\${IMPORT_LIB}\"\nCF_EOF\n\t\tchmod +x mk_shared_lib.sh\n\t\tcat >mk_prog.sh <<-CF_EOF\n\t\t#!$SHELL\n\t\tshift\n\t\t# Ignore first argument (compiler) and use LD (link.exe) unconditionally\n\t\tLD=\"[$]LD\"\n\t\tclopts=()\n\t\tldopts=(\"/subsystem:console\")\n\t\tlibs=()\n\t\tisdll=0\n\t\twhile test \\[$]# -gt 0; do\n\t\t\tcase \"\\[$]1\" in\n\t\t\t\t-link)\n\t\t\t\t\t# ignore -link argument\n\t\t\t\t\t;;\n\t\t\t\t-M[[TD]] | -M[[TD]]d)\n\t\t\t\t\t# ignore runtime-library option\n\t\t\t\t\t;;\n\t\t\t\t-dll)\n\t\t\t\t\tisdll=1\n\t\t\t\t\t;;\n\t\t\t\t-W* | -w*)\n\t\t\t\t\t# ignore warnings\n\t\t\t\t\t;;\n\t\t\t\t-D*)\n\t\t\t\t\tclopts+=(\"\\[$]1\")\n\t\t\t\t\t;;\n\t\t\t\t-I*)\n\t\t\t\t\tclopts+=(\"\\[$]1\")\n\t\t\t\t\t;;\n\t\t\t\t-l*)\n\t\t\t\t\tlibs+=(\"\\`echo \\\"\\[$]1\\\" | sed \\\"s/^-l//\\\"\\`\")\n\t\t\t\t\t;;\n\t\t\t\t-L*)\n\t\t\t\t\tldopts+=(\"\\`echo \\\"\\[$]1\\\" | sed \\\"s/^-L/-LIBPATH:/\\\"\\`\")\n\t\t\t\t\t;;\n\t\t\t\t*.obj | *.o)\n\t\t\t\t\tldopts+=(\"\\[$]1\")\n\t\t\t\t\t;;\n\t\t\t\t-Wl,*)\n\t\t\t\t\tfor linkarg in \\`echo '\\[$]1' | sed -e 's/-Wl,//' -e 's/,/ /'\\`; do\n\t\t\t\t\t\tldopts+=(\"\\[$]{linkarg}\")\n\t\t\t\t\tdone\n\t\t\t\t\t;;\n\t\t\t\t*.lib)\n\t\t\t\t\tldopts+=(\"\\[$]1\")\n\t\t\t\t\t;;\n\t\t\t\t-o)\n\t\t\t\t\tshift\n\t\t\t\t\tldopts+=(\"-out:\\[$]1\")\n\t\t\t\t\t;;\n\t\t\t\t*)\n\t\t\t\t\tclopts+=(\"\\[$]1\")\n\t\t\t\t\tldopts+=(\"\\[$]1\")\n\t\t\t\t\t;;\n\t\t\tesac\n\t\t\tshift\n\t\tdone\n\t\tif [[ \"\\$isdll\" -ne 0 ]]; then\n\t\t\tfor lib in \\[$]{libs[[*]]}; do\n\t\t\t\tldopts+=(\"\\[$]lib.dll.lib\")\n\t\t\tdone\n\t\telse\n\t\t\tfor lib in \\[$]{libs[[*]]}; do\n\t\t\t\tldopts+=(\"\\[$]lib.lib\")\n\t\t\tdone\n\t\tfi\n\t\tcat <<-EOF\n\t\tCreating program\n\t\t** ld options:   \"\\[$]{ldopts[[@]]}\"\nEOF\n\t\texec \\[$]LD \\[$]{ldopts[[@]]}\nCF_EOF\n\t\tchmod +x mk_prog.sh\n\t\tLINK_PROGS=\"$SHELL ${rel_builddir}/mk_prog.sh\"\n\t\tLINK_TESTS=\"$SHELL ${rel_builddir}/mk_prog.sh\"\n\t\t;;\n\t(mingw*)\n\t\tcf_cv_shlib_version=mingw\n\t\tcf_cv_shlib_version_infix=mingw\n\t\tshlibdir=$bindir\n\t\tMAKE_DLLS=\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" ; then\n\t\t\tLOCAL_LDFLAGS=\"-Wl,--enable-auto-import\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\t\tEXTRA_LDFLAGS=\"-Wl,--enable-auto-import $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB=$SHELL' '$rel_builddir'/mk_shared_lib.sh [$]@ [$]{CC} [$]{CFLAGS}'\n\t\tRM_SHARED_OPTS=\"$RM_SHARED_OPTS $rel_builddir/mk_shared_lib.sh *.dll.a\"\n\t\tcat >mk_shared_lib.sh <<-CF_EOF\n\t\t#!$SHELL\n\t\tSHARED_LIB=\\[$]1\n\t\tIMPORT_LIB=\\`echo \"\\[$]1\" | sed -e 's/[[0-9]]*\\.dll[$]/.dll.a/'\\`\n\t\tshift\n\t\tcat <<-EOF\n\t\tLinking shared library\n\t\t** SHARED_LIB \\[$]SHARED_LIB\n\t\t** IMPORT_LIB \\[$]IMPORT_LIB\nEOF\n\t\texec \\[$]* ${LDFLAGS} -shared -Wl,--enable-auto-import,--out-implib=\\[$]{IMPORT_LIB} -Wl,--export-all-symbols -o \\[$]{SHARED_LIB}\nCF_EOF\n\t\tchmod +x mk_shared_lib.sh\n\t\t;;\n\t(openbsd[[2-9]].*|mirbsd*)\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test -n \"$LD_RPATH_OPT\" ; then\n\t\t\tLOCAL_LDFLAGS=\"${LD_RPATH_OPT}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\tfi\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCC_SHARED_OPTS=\"$CC_SHARED_OPTS -DPIC\"\n\t\tCF_SHARED_SONAME\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-Bshareable,-soname,'$cf_cv_shared_soname',-stats,-lc -o $[@]'\n\t\t;;\n\t(nskJ*)\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB='${LD} -Wshared -Weld=-export_all -o $[@]'\n\t\t;;\n\t(nskL*)\n\t\tCC_SHARED_OPTS=\n\t\tMK_SHARED_LIB='${LD} -Wshared -Wxld=-export_all -o $[@]'\n\t\t;;\n\t(nto-qnx*|openbsd*|freebsd[[12]].*)\n\t\tCC_SHARED_OPTS=\"$CC_SHARED_OPTS -DPIC\"\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -Bshareable -o $[@]'\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=rel\n\t\t;;\n\t(dragonfly*|freebsd*)\n\t\tCC_SHARED_OPTS=\"$CC_SHARED_OPTS -DPIC\"\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tLOCAL_LDFLAGS=\"${cf_ld_rpath_opt}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $LOCAL_LDFLAGS\"\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCF_SHARED_SONAME\n\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-soname,'$cf_cv_shared_soname',-stats,-lc -o $[@]'\n\t\t;;\n\t(netbsd*)\n\t\tCC_SHARED_OPTS=\"$CC_SHARED_OPTS -DPIC\"\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tLOCAL_LDFLAGS=\"${cf_ld_rpath_opt}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\t\tEXTRA_LDFLAGS=\"${cf_ld_rpath_opt}\\${RPATH_LIST} $EXTRA_LDFLAGS\"\n\t\t\tif test \"$cf_cv_shlib_version\" = auto; then\n\t\t\tif test -f /usr/libexec/ld.elf_so; then\n\t\t\t\tcf_cv_shlib_version=abi\n\t\t\telse\n\t\t\t\tcf_cv_shlib_version=rel\n\t\t\tfi\n\t\t\tfi\n\t\t\tCF_SHARED_SONAME\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -Wl,-soname,'$cf_cv_shared_soname' -o $[@]'\n\t\telse\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -o $[@]'\n\t\tfi\n\t\t;;\n\t(osf*|mls+*)\n\t\t# tested with OSF/1 V3.2 and 'cc'\n\t\t# tested with OSF/1 V3.2 and gcc 2.6.3 (but the c++ demo didn't\n\t\t# link with shared libs).\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -set_version ${REL_VERSION}:${ABI_VERSION} -expect_unresolved \"*\" -shared -soname `basename $[@]`'\n\t\tcase \"$host_os\" in\n\t\t(osf4*)\n\t\t\tMK_SHARED_LIB=\"${MK_SHARED_LIB} -msym\"\n\t\t\t;;\n\t\tesac\n\t\tMK_SHARED_LIB=\"${MK_SHARED_LIB}\"' -o $[@]'\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" && test -n \"$LD_RPATH_OPT\" ; then\n\t\t\tLOCAL_LDFLAGS=\"${LD_RPATH_OPT}\\$(LOCAL_LIBDIR)\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\tfi\n\t\tcf_cv_rm_so_locs=yes\n\t\t;;\n\t(sco3.2v5*)  # also uw2* and UW7: hops 13-Apr-98\n\t\t# tested with osr5.0.5\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='-belf -KPIC'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -dy -G -h `basename $[@] .${REL_VERSION}`.${ABI_VERSION} -o [$]@'\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\t# only way is to set LD_RUN_PATH but no switch for it\n\t\t\tRUN_PATH=$libdir\n\t\tfi\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=rel\n\t\tLINK_PROGS='LD_RUN_PATH=${libdir}'\n\t\tLINK_TESTS='Pwd=`pwd`;LD_RUN_PATH=`dirname $${Pwd}`/lib'\n\t\t;;\n\t(sunos4*)\n\t\t# tested with SunOS 4.1.1 and gcc 2.7.0\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='-KPIC'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -assert pure-text -o $[@]'\n\t\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=rel\n\t\t;;\n\t(solaris2*)\n\t\t# tested with SunOS 5.5.1 (solaris 2.5.1) and gcc 2.7.2\n\t\t# tested with SunOS 5.10 (solaris 10) and gcc 3.4.3\n\t\tif test \"$DFT_LWR_MODEL\" = \"shared\" ; then\n\t\t\tLOCAL_LDFLAGS=\"-R \\$(LOCAL_LIBDIR):\\${libdir}\"\n\t\t\tLOCAL_LDFLAGS2=\"$LOCAL_LDFLAGS\"\n\t\tfi\n\t\tif test \"$cf_cv_enable_rpath\" = yes ; then\n\t\t\tEXTRA_LDFLAGS=\"-R \\${libdir} $EXTRA_LDFLAGS\"\n\t\tfi\n\t\tCF_SHARED_SONAME\n\t\tif test \"$GCC\" != yes; then\n\t\t\tcf_save_CFLAGS=\"$CFLAGS\"\n\t\t\tfor cf_shared_opts in -xcode=pic32 -xcode=pic13 -KPIC -Kpic -O\n\t\t\tdo\n\t\t\t\tCFLAGS=\"$cf_shared_opts $cf_save_CFLAGS\"\n\t\t\t\tAC_TRY_COMPILE([#include <stdio.h>],[printf(\"Hello\\\\n\");],[break])\n\t\t\tdone\n\t\t\tCFLAGS=\"$cf_save_CFLAGS\"\n\t\t\tCC_SHARED_OPTS=$cf_shared_opts\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -dy -G -h '$cf_cv_shared_soname' -o $[@]'\n\t\telse\n\t\t\tMK_SHARED_LIB='${CC} ${LDFLAGS} ${CFLAGS} -shared -dy -G -h '$cf_cv_shared_soname' -o $[@]'\n\t\tfi\n\t\t;;\n\t(sysv5uw7*|unix_sv*)\n\t\t# tested with UnixWare 7.1.0 (gcc 2.95.2 and cc)\n\t\tif test \"$GCC\" != yes; then\n\t\t\tCC_SHARED_OPTS='-KPIC'\n\t\tfi\n\t\tMK_SHARED_LIB='${LD} ${LDFLAGS} -d y -G -o [$]@'\n\t\t;;\n\t(*)\n\t\tCC_SHARED_OPTS='unknown'\n\t\tMK_SHARED_LIB='echo unknown'\n\t\t;;\n\tesac\n\n\t# This works if the last tokens in $MK_SHARED_LIB are the -o target.\n\tcase \"$cf_cv_shlib_version\" in\n\t(rel|abi)\n\t\tcase \"$MK_SHARED_LIB\" in\n\t\t(*'-o $[@]')\n\t\t\ttest \"$cf_cv_do_symlinks\" = no && cf_cv_do_symlinks=yes\n\t\t\t;;\n\t\t(*)\n\t\t\tAC_MSG_WARN(ignored --with-shlib-version)\n\t\t\t;;\n\t\tesac\n\t\t;;\n\tesac\n\n\tif test -n \"$cf_try_cflags\"\n\tthen\ncat > conftest.$ac_ext <<EOF\n#line __oline__ \"${as_me:-configure}\"\n#include <stdio.h>\nint main(int argc, char *argv[[]])\n{\n\tprintf(\"hello\\\\n\");\n\treturn (argv[[argc-1]] == 0) ;\n}\nEOF\n\t\tcf_save_CFLAGS=\"$CFLAGS\"\n\t\tfor cf_opt in $cf_try_cflags\n\t\tdo\n\t\t\tCFLAGS=\"$cf_save_CFLAGS -$cf_opt\"\n\t\t\tAC_MSG_CHECKING(if CFLAGS option -$cf_opt works)\n\t\t\tif AC_TRY_EVAL(ac_compile); then\n\t\t\t\tAC_MSG_RESULT(yes)\n\t\t\t\tcf_save_CFLAGS=\"$CFLAGS\"\n\t\t\telse\n\t\t\t\tAC_MSG_RESULT(no)\n\t\t\tfi\n\t\tdone\n\t\tCFLAGS=\"$cf_save_CFLAGS\"\n\tfi\n\n\n\t# RPATH_LIST is a colon-separated list of directories\n\ttest -n \"$cf_ld_rpath_opt\" && MK_SHARED_LIB=\"$MK_SHARED_LIB $cf_ld_rpath_opt\\${RPATH_LIST}\"\n\ttest -z \"$RPATH_LIST\" && RPATH_LIST=\"\\${libdir}\"\n\n\ttest \"$cf_cv_rm_so_locs\" = yes && RM_SHARED_OPTS=\"$RM_SHARED_OPTS so_locations\"\n\n\tCF_VERBOSE(CC_SHARED_OPTS: $CC_SHARED_OPTS)\n\tCF_VERBOSE(MK_SHARED_LIB:  $MK_SHARED_LIB)\n\n\tAC_SUBST(CC_SHARED_OPTS)\n\tAC_SUBST(LD_RPATH_OPT)\n\tAC_SUBST(LD_SHARED_OPTS)\n\tAC_SUBST(MK_SHARED_LIB)\n\tAC_SUBST(RM_SHARED_OPTS)\n\n\tAC_SUBST(LINK_PROGS)\n\tAC_SUBST(LINK_TESTS)\n\n\tAC_SUBST(EXTRA_LDFLAGS)\n\tAC_SUBST(LOCAL_LDFLAGS)\n\tAC_SUBST(LOCAL_LDFLAGS2)\n\n\tAC_SUBST(INSTALL_LIB)\n\tAC_SUBST(RPATH_LIST)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SHARED_SONAME version: 3 updated: 2008/09/08 18:34:43\ndnl ----------------\ndnl utility macro for CF_SHARED_OPTS, constructs \"$cf_cv_shared_soname\" for\ndnl substitution into MK_SHARED_LIB string for the \"-soname\" (or similar)\ndnl option.\ndnl\ndnl $1 is the default that should be used for \"$cf_cv_shlib_version\".\ndnl If missing, use \"rel\".\ndefine([CF_SHARED_SONAME],\n[\n\ttest \"$cf_cv_shlib_version\" = auto && cf_cv_shlib_version=ifelse($1,,rel,$1)\n\tif test \"$cf_cv_shlib_version\" = rel; then\n\t\tcf_cv_shared_soname='`basename $[@] .${REL_VERSION}`.${ABI_VERSION}'\n\telse\n\t\tcf_cv_shared_soname='`basename $[@]`'\n\tfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_SIGWINCH version: 6 updated: 2021/01/01 13:31:04\ndnl -----------\ndnl Use this macro after CF_XOPEN_SOURCE, but do not require it (not all\ndnl programs need this test).\ndnl\ndnl This is really a Mac OS X 10.4.3 workaround.  Defining _POSIX_C_SOURCE\ndnl forces SIGWINCH to be undefined (breaks xterm, ncurses).  Oddly, the struct\ndnl winsize declaration is left alone - we may revisit this if Apple choose to\ndnl break that part of the interface as well.\nAC_DEFUN([CF_SIGWINCH],\n[\nAC_CACHE_CHECK(if SIGWINCH is defined,cf_cv_define_sigwinch,[\n\tAC_TRY_COMPILE([\n#include <sys/types.h>\n#include <sys/signal.h>\n],[int x = SIGWINCH; (void)x],\n\t[cf_cv_define_sigwinch=yes],\n\t[AC_TRY_COMPILE([\n#undef _XOPEN_SOURCE\n#undef _POSIX_SOURCE\n#undef _POSIX_C_SOURCE\n#include <sys/types.h>\n#include <sys/signal.h>\n],[int x = SIGWINCH; (void)x],\n\t[cf_cv_define_sigwinch=maybe],\n\t[cf_cv_define_sigwinch=no])\n])\n])\n\nif test \"$cf_cv_define_sigwinch\" = maybe ; then\nAC_CACHE_CHECK(for actual SIGWINCH definition,cf_cv_fixup_sigwinch,[\ncf_cv_fixup_sigwinch=unknown\ncf_sigwinch=32\nwhile test \"$cf_sigwinch\" != 1\ndo\n\tAC_TRY_COMPILE([\n#undef _XOPEN_SOURCE\n#undef _POSIX_SOURCE\n#undef _POSIX_C_SOURCE\n#include <sys/types.h>\n#include <sys/signal.h>\n],[\n#if SIGWINCH != $cf_sigwinch\nmake an error\n#endif\nint x = SIGWINCH; (void)x],\n\t[cf_cv_fixup_sigwinch=$cf_sigwinch\n\t break])\n\ncf_sigwinch=\"`expr \"$cf_sigwinch\" - 1`\"\ndone\n])\n\n\tif test \"$cf_cv_fixup_sigwinch\" != unknown ; then\n\t\tCPPFLAGS=\"$CPPFLAGS -DSIGWINCH=$cf_cv_fixup_sigwinch\"\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SIG_ATOMIC_T version: 5 updated: 2020/03/10 18:53:47\ndnl ---------------\ndnl signal handler, but there are some gcc dependencies in that recommendation.\ndnl Try anyway.\nAC_DEFUN([CF_SIG_ATOMIC_T],\n[\nAC_MSG_CHECKING(for signal global datatype)\nAC_CACHE_VAL(cf_cv_sig_atomic_t,[\n\tfor cf_type in \\\n\t\t\"volatile sig_atomic_t\" \\\n\t\t\"sig_atomic_t\" \\\n\t\t\"int\"\n\tdo\n\tAC_TRY_COMPILE([\n#include <sys/types.h>\n#include <signal.h>\n#include <stdio.h>\n\nextern $cf_type x;\n$cf_type x;\nstatic void handler(int sig)\n{\n\t(void)sig;\n\tx = 5;\n}],\n\t\t[signal(SIGINT, handler);\n\t\t x = 1],\n\t\t[cf_cv_sig_atomic_t=$cf_type],\n\t\t[cf_cv_sig_atomic_t=no])\n\t\ttest \"$cf_cv_sig_atomic_t\" != no && break\n\tdone\n\t])\nAC_MSG_RESULT($cf_cv_sig_atomic_t)\ntest \"$cf_cv_sig_atomic_t\" != no && AC_DEFINE_UNQUOTED(SIG_ATOMIC_T, $cf_cv_sig_atomic_t,[Define to signal global datatype])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SIZECHANGE version: 18 updated: 2021/09/04 06:35:04\ndnl -------------\ndnl Check for definitions & structures needed for window size-changing\ndnl\ndnl https://stackoverflow.com/questions/18878141/difference-between-structures-ttysize-and-winsize/50769952#50769952\nAC_DEFUN([CF_SIZECHANGE],\n[\nAC_REQUIRE([CF_STRUCT_TERMIOS])\nAC_CACHE_CHECK(declaration of size-change, cf_cv_sizechange,[\n\tcf_cv_sizechange=unknown\n\tcf_save_CPPFLAGS=\"$CPPFLAGS\"\n\nfor cf_opts in \"\" \"NEED_PTEM_H\"\ndo\n\n\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\tif test -n \"$cf_opts\"\n\tthen\n\t\tCF_APPEND_TEXT(CPPFLAGS,-D$cf_opts)\n\tfi\n\tAC_TRY_COMPILE([#include <sys/types.h>\n#ifdef HAVE_TERMIOS_H\n#include <termios.h>\n#else\n#ifdef HAVE_TERMIO_H\n#include <termio.h>\n#endif\n#endif\n\n#ifdef NEED_PTEM_H\n/* This is a workaround for SCO:  they neglected to define struct winsize in\n * termios.h -- it is only in termio.h and ptem.h\n */\n#include <sys/stream.h>\n#include <sys/ptem.h>\n#endif\n\n#ifdef HAVE_SYS_IOCTL_H\n#include <sys/ioctl.h>\n#endif\n],[\n#ifdef TIOCGSIZE\n\tstruct ttysize win;\t/* SunOS 3.0... */\n\tint y = win.ts_lines = 2;\n\tint x = win.ts_cols = 1;\n\t(void)y;\n\t(void)x;\n#else\n#ifdef TIOCGWINSZ\n\tstruct winsize win;\t/* everything else */\n\tint y = win.ws_row = 2;\n\tint x = win.ws_col = 1;\n\t(void)y;\n\t(void)x;\n#else\n\tno TIOCGSIZE or TIOCGWINSZ\n#endif /* TIOCGWINSZ */\n#endif /* TIOCGSIZE */\n\t],\n\t[cf_cv_sizechange=yes],\n\t[cf_cv_sizechange=no])\n\n\tCPPFLAGS=\"$cf_save_CPPFLAGS\"\n\tif test \"$cf_cv_sizechange\" = yes ; then\n\t\techo \"size-change succeeded ($cf_opts)\" >&AC_FD_CC\n\t\ttest -n \"$cf_opts\" && cf_cv_sizechange=\"$cf_opts\"\n\t\tbreak\n\tfi\ndone\n])\nif test \"$cf_cv_sizechange\" != no ; then\n\tAC_DEFINE(HAVE_SIZECHANGE,1,[Define to 1 if sizechange declarations are provided])\n\tcase \"$cf_cv_sizechange\" in\n\t(NEED*)\n\t\tAC_DEFINE_UNQUOTED($cf_cv_sizechange )\n\t\t;;\n\tesac\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SRC_MODULES version: 33 updated: 2021/01/01 13:31:04\ndnl --------------\ndnl For each parameter, test if the source-directory exists, and if it contains\ndnl a 'modules' file.  If so, add to the list $cf_cv_src_modules which we'll\ndnl use in CF_LIB_RULES.\ndnl\ndnl This uses the configured value to make the lists SRC_SUBDIRS and\ndnl SUB_MAKEFILES which are used in the makefile-generation scheme.\nAC_DEFUN([CF_SRC_MODULES],\n[\nAC_REQUIRE([CF_CHECK_GNAT_VERSION])\nAC_MSG_CHECKING(for src modules)\n\n# dependencies and linker-arguments for test-programs\nTEST_DEPS=\"${LIB_DIR}/${LIB_PREFIX}${LIB_NAME}${DFT_DEP_SUFFIX} $TEST_DEPS\"\nTEST_DEP2=\"${LIB_2ND}/${LIB_PREFIX}${LIB_NAME}${DFT_DEP_SUFFIX} $TEST_DEP2\"\nif test \"$DFT_LWR_MODEL\" = \"libtool\"; then\n\tTEST_ARGS=\"${TEST_DEPS}\"\n\tTEST_ARG2=\"${TEST_DEP2}\"\nelse\n\tTEST_ARGS=\"-l${LIB_NAME}${USE_ARG_SUFFIX} $TEST_ARGS\"\n\tTEST_ARG2=\"-l${LIB_NAME}${USE_ARG_SUFFIX} $TEST_ARG2\"\nfi\n\nPC_MODULES_TO_MAKE=\"ncurses${USE_ARG_SUFFIX}\"\ncf_cv_src_modules=\nfor cf_dir in $1\ndo\n\tif test -f \"$srcdir/$cf_dir/modules\" ; then\n\n\t\t# We may/may not have tack in the distribution, though the\n\t\t# makefile is.\n\t\tif test \"$cf_dir\" = tack ; then\n\t\t\tif test \"x$cf_with_tack\" != \"xyes\"; then\n\t\t\t\tcontinue\n\t\t\tfi\n\t\tfi\n\n\t\tif test -z \"$cf_cv_src_modules\"; then\n\t\t\tcf_cv_src_modules=$cf_dir\n\t\telse\n\t\t\tcf_cv_src_modules=\"$cf_cv_src_modules $cf_dir\"\n\t\tfi\n\n\t\t# Make the ncurses_cfg.h file record the library interface files as\n\t\t# well.  These are header files that are the same name as their\n\t\t# directory.  Ncurses is the only library that does not follow\n\t\t# that pattern.\n\t\tif test \"$cf_dir\" = tack ; then\n\t\t\tcontinue\n\t\telif test -f \"$srcdir/${cf_dir}/${cf_dir}.h\" ; then\n\t\t\tCF_UPPER(cf_have_include,$cf_dir)\n\t\t\tAC_DEFINE_UNQUOTED(HAVE_${cf_have_include}_H)\n\t\t\tAC_DEFINE_UNQUOTED(HAVE_LIB${cf_have_include})\n\t\t\tCF_MAP_LIB_BASENAME(TEST_ROOT,$cf_dir)\n\t\t\tTEST_DEPS=\"${LIB_DIR}/${LIB_PREFIX}${TEST_ROOT}${DFT_DEP_SUFFIX} $TEST_DEPS\"\n\t\t\tTEST_DEP2=\"${LIB_2ND}/${LIB_PREFIX}${TEST_ROOT}${DFT_DEP_SUFFIX} $TEST_DEP2\"\n\t\t\tif test \"$DFT_LWR_MODEL\" = \"libtool\"; then\n\t\t\t\tTEST_ARGS=\"${TEST_DEPS}\"\n\t\t\t\tTEST_ARG2=\"${TEST_DEP2}\"\n\t\t\telse\n\t\t\t\tTEST_ARGS=\"-l${TEST_ROOT}${USE_ARG_SUFFIX} $TEST_ARGS\"\n\t\t\t\tTEST_ARG2=\"-l${TEST_ROOT}${USE_ARG_SUFFIX} $TEST_ARG2\"\n\t\t\tfi\n\t\t\tPC_MODULES_TO_MAKE=\"${PC_MODULES_TO_MAKE} ${cf_dir}${USE_ARG_SUFFIX}\"\n\t\tfi\n\tfi\ndone\nAC_MSG_RESULT($cf_cv_src_modules)\n\nTEST_ARGS=\"-L${LIB_DIR} $TEST_ARGS\"\nTEST_ARG2=\"-L${LIB_2ND} $TEST_ARG2\"\n\nAC_SUBST(TEST_ARGS)\nAC_SUBST(TEST_DEPS)\n\nAC_SUBST(TEST_ARG2)\nAC_SUBST(TEST_DEP2)\n\nSRC_SUBDIRS=\nif test \"x$cf_with_manpages\" != xno ; then\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS man\"\nfi\nSRC_SUBDIRS=\"$SRC_SUBDIRS include\"\nfor cf_dir in $cf_cv_src_modules\ndo\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS $cf_dir\"\ndone\nif test \"x$cf_with_tests\" != \"xno\" ; then\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS test\"\nfi\n# always make this, to install the ncurses-config script\nSRC_SUBDIRS=\"$SRC_SUBDIRS misc\"\nif test \"$cf_with_cxx_binding\" != no; then\n\tPC_MODULES_TO_MAKE=\"${PC_MODULES_TO_MAKE} ncurses++${USE_ARG_SUFFIX}\"\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS c++\"\nfi\n\ntest \"x$with_termlib\" != xno && PC_MODULES_TO_MAKE=\"$PC_MODULES_TO_MAKE $TINFO_ARG_SUFFIX\"\ntest \"x$with_ticlib\" != xno && PC_MODULES_TO_MAKE=\"$PC_MODULES_TO_MAKE $TICS_ARG_SUFFIX\"\n\nAC_SUBST(PC_MODULES_TO_MAKE)\n\nADA_SUBDIRS=\nif test \"x$cf_with_ada\" = \"xyes\" && test \"x$cf_cv_prog_gnat_correct\" = xyes && test -f \"$srcdir/Ada95/Makefile.in\" ; then\n\tSRC_SUBDIRS=\"$SRC_SUBDIRS Ada95\"\n\tADA_SUBDIRS=\"gen src\"\n\tif test \"x$cf_with_tests\" != \"xno\" ; then\n\t\tADA_SUBDIRS=\"$ADA_SUBDIRS samples\"\n\tfi\nfi\n\nSUB_MAKEFILES=\nfor cf_dir in $SRC_SUBDIRS\ndo\n\tSUB_MAKEFILES=\"$SUB_MAKEFILES $cf_dir/Makefile\"\ndone\n\nif test -n \"$ADA_SUBDIRS\"; then\n\tfor cf_dir in $ADA_SUBDIRS\n\tdo\n\t\tSUB_MAKEFILES=\"$SUB_MAKEFILES Ada95/$cf_dir/Makefile\"\n\tdone\n\tAC_SUBST(ADA_SUBDIRS)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_STDCPP_LIBRARY version: 12 updated: 2021/01/01 13:31:04\ndnl -----------------\ndnl Check for -lstdc++, which is GNU's standard C++ library.\ndnl If $CXXLIBS is set, add that to the libraries used for test-linking.\ndnl If -lstdc++ was not already added to $LIBS or $CXXLIBS, and is needed,\ndnl add it to $CXXLIBS.\nAC_DEFUN([CF_STDCPP_LIBRARY],\n[\nif test -n \"$GXX\" ; then\n\n\tcf_save=\"$LIBS\"\n\tLIBS=\"$LIBS $CXXLIBS\"\n\tAC_MSG_CHECKING(if we already have C++ library)\n\tAC_TRY_LINK([\n\t\t\t#include <iostream>],[\n\t\t\tstd::cout << \"Hello World!\" << std::endl;],\n\t\t[cf_have_libstdcpp=yes],\n\t\t[cf_have_libstdcpp=no])\n\tAC_MSG_RESULT($cf_have_libstdcpp)\n\tLIBS=\"$cf_save\"\n\n\tif test \"$cf_have_libstdcpp\" != yes\n\tthen\n\t\tcase \"$cf_cv_system_name\" in\n\t\t(os2*)\n\t\t\tif test -z \"`g++ -dM -E - < /dev/null | grep __KLIBC__`\"; then\n\t\t\t\tcf_stdcpp_libname=stdcpp\n\t\t\telse\n\t\t\t\tcf_stdcpp_libname=stdc++\n\t\t\tfi\n\t\t\t;;\n\t\t(*)\n\t\t\tcf_stdcpp_libname=stdc++\n\t\t\t;;\n\t\tesac\n\n\t\tAC_CACHE_CHECK(for library $cf_stdcpp_libname,cf_cv_libstdcpp,[\n\t\t\tcf_save=\"$LIBS\"\n\t\t\tLIBS=\"$LIBS $CXXLIBS\"\n\t\t\tCF_ADD_LIB($cf_stdcpp_libname)\n\t\tAC_TRY_LINK([\n\t\t\t\t#include <iostream>],[\n\t\t\t\tstd::cout << \"Hello World!\" << std::endl;],\n\t\t\t[cf_cv_libstdcpp=yes],\n\t\t\t[cf_cv_libstdcpp=no])\n\t\t\tLIBS=\"$cf_save\"\n\t\t])\n\t\ttest \"$cf_cv_libstdcpp\" = yes && { CF_ADD_LIB($cf_stdcpp_libname,CXXLIBS) }\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_STRIP_G_OPT version: 4 updated: 2021/01/02 09:31:20\ndnl --------------\ndnl\tRemove \"-g\" option from the compiler options\nAC_DEFUN([CF_STRIP_G_OPT],\n[$1=`echo \"${$1}\" | CF__SED_TRIMBLANKS(-e 's%-g %%' -e 's%-g$%%')`])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_STRUCT_SIGACTION version: 5 updated: 2012/10/06 17:56:13\ndnl -------------------\ndnl Check if we need _POSIX_SOURCE defined to use struct sigaction.  We'll only\ndnl do this if we've found the sigaction function.\nAC_DEFUN([CF_STRUCT_SIGACTION],[\nAC_REQUIRE([CF_XOPEN_SOURCE])\n\nif test \"$ac_cv_func_sigaction\" = yes; then\nAC_MSG_CHECKING(whether sigaction needs _POSIX_SOURCE)\nAC_TRY_COMPILE([\n#include <sys/types.h>\n#include <signal.h>],\n\t[struct sigaction act],\n\t[sigact_bad=no],\n\t[\nAC_TRY_COMPILE([\n#define _POSIX_SOURCE\n#include <sys/types.h>\n#include <signal.h>],\n\t[struct sigaction act],\n\t[sigact_bad=yes\n\t AC_DEFINE(_POSIX_SOURCE,1,[Define to 1 if we must define _POSIX_SOURCE])],\n\t [sigact_bad=unknown])])\nAC_MSG_RESULT($sigact_bad)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_STRUCT_TERMIOS version: 11 updated: 2020/03/19 20:46:13\ndnl -----------------\ndnl Some machines require _POSIX_SOURCE to completely define struct termios.\nAC_DEFUN([CF_STRUCT_TERMIOS],[\nAC_REQUIRE([CF_XOPEN_SOURCE])\n\nAC_CHECK_HEADERS( \\\ntermio.h \\\ntermios.h \\\nunistd.h \\\nsys/ioctl.h \\\nsys/termio.h \\\n)\n\nif test \"$ac_cv_header_termios_h\" = yes ; then\n\tcase \"$CFLAGS $CPPFLAGS\" in\n\t(*-D_POSIX_SOURCE*)\n\t\ttermios_bad=dunno ;;\n\t(*)\ttermios_bad=maybe ;;\n\tesac\n\tif test \"$termios_bad\" = maybe ; then\n\tAC_MSG_CHECKING(whether termios.h needs _POSIX_SOURCE)\n\tAC_TRY_COMPILE([#include <termios.h>],\n\t\t[struct termios foo; int x = foo.c_iflag = 1; (void)x],\n\t\ttermios_bad=no, [\n\t\tAC_TRY_COMPILE([\n#define _POSIX_SOURCE\n#include <termios.h>],\n\t\t\t[struct termios foo; int x = foo.c_iflag = 2; (void)x],\n\t\t\ttermios_bad=unknown,\n\t\t\ttermios_bad=yes AC_DEFINE(_POSIX_SOURCE,1,[Define to 1 if we must define _POSIX_SOURCE]))\n\t\t\t])\n\tAC_MSG_RESULT($termios_bad)\n\tfi\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SUBDIR_PATH version: 7 updated: 2014/12/04 04:33:06\ndnl --------------\ndnl Construct a search-list for a nonstandard header/lib-file\ndnl\t$1 = the variable to return as result\ndnl\t$2 = the package name\ndnl\t$3 = the subdirectory, e.g., bin, include or lib\nAC_DEFUN([CF_SUBDIR_PATH],\n[\n$1=\n\nCF_ADD_SUBDIR_PATH($1,$2,$3,$prefix,NONE)\n\nfor cf_subdir_prefix in \\\n\t/usr \\\n\t/usr/local \\\n\t/usr/pkg \\\n\t/opt \\\n\t/opt/local \\\n\t[$]HOME\ndo\n\tCF_ADD_SUBDIR_PATH($1,$2,$3,$cf_subdir_prefix,$prefix)\ndone\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SUBST_IF version: 2 updated: 2006/06/17 12:33:03\ndnl -----------\ndnl\tShorthand macro for substituting things that the user may override\ndnl\twith an environment variable.\ndnl\ndnl\t$1 = condition to pass to \"test\"\ndnl\t$2 = environment variable\ndnl\t$3 = value if the test succeeds\ndnl\t$4 = value if the test fails\nAC_DEFUN([CF_SUBST_IF],\n[\nif test $1 ; then\n\t$2=$3\nifelse($4,,,[else\n\t$2=$4])\nfi\nAC_SUBST($2)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SUBST_NCURSES_VERSION version: 10 updated: 2021/01/04 18:48:01\ndnl ------------------------\ndnl Get the version-number for use in shared-library naming, etc.\nAC_DEFUN([CF_SUBST_NCURSES_VERSION],\n[AC_REQUIRE([AC_PROG_EGREP])dnl\n\nNCURSES_MAJOR=\"`${EGREP-egrep} '^NCURSES_MAJOR[[ \t]]*=' \"$srcdir/dist.mk\" | sed -e 's/^[[^0-9]]*//'`\"\nNCURSES_MINOR=\"`${EGREP-egrep} '^NCURSES_MINOR[[ \t]]*=' \"$srcdir/dist.mk\" | sed -e 's/^[[^0-9]]*//'`\"\nNCURSES_PATCH=\"`${EGREP-egrep} '^NCURSES_PATCH[[ \t]]*=' \"$srcdir/dist.mk\" | sed -e 's/^[[^0-9]]*//'`\"\ncf_cv_abi_version=${NCURSES_MAJOR}\ncf_cv_rel_version=${NCURSES_MAJOR}.${NCURSES_MINOR}\ndnl Show the computed version, for logging\ncf_cv_timestamp=`date`\nAC_MSG_RESULT(Configuring NCURSES $cf_cv_rel_version ABI $cf_cv_abi_version ($cf_cv_timestamp))\ndnl We need these values in the generated headers\nAC_SUBST(NCURSES_MAJOR)\nAC_SUBST(NCURSES_MINOR)\nAC_SUBST(NCURSES_PATCH)\ndnl We need these values in the generated makefiles\nAC_SUBST(cf_cv_rel_version)\nAC_SUBST(cf_cv_abi_version)\nAC_SUBST(cf_cv_builtin_bool)\nAC_SUBST(cf_cv_header_stdbool_h)\nAC_SUBST(cf_cv_type_of_bool)dnl\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_SYS_TIME_SELECT version: 6 updated: 2015/04/18 08:56:57\ndnl ------------------\ndnl Check if we can include <sys/time.h> with <sys/select.h>; this breaks on\ndnl older SCO configurations.\nAC_DEFUN([CF_SYS_TIME_SELECT],\n[\nAC_MSG_CHECKING(if sys/time.h works with sys/select.h)\nAC_CACHE_VAL(cf_cv_sys_time_select,[\nAC_TRY_COMPILE([\n#include <sys/types.h>\n#ifdef HAVE_SYS_TIME_H\n#include <sys/time.h>\n#endif\n#ifdef HAVE_SYS_SELECT_H\n#include <sys/select.h>\n#endif\n],[],[cf_cv_sys_time_select=yes],\n\t [cf_cv_sys_time_select=no])\n\t ])\nAC_MSG_RESULT($cf_cv_sys_time_select)\ntest \"$cf_cv_sys_time_select\" = yes && AC_DEFINE(HAVE_SYS_TIME_SELECT,1,[Define to 1 if we can include <sys/time.h> with <sys/select.h>])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_TOP_BUILDDIR version: 2 updated: 2013/07/27 17:38:32\ndnl ---------------\ndnl Define a top_builddir symbol, for applications that need an absolute path.\nAC_DEFUN([CF_TOP_BUILDDIR],\n[\ntop_builddir=ifelse($1,,`pwd`,$1)\nAC_SUBST(top_builddir)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_TRY_PKG_CONFIG version: 6 updated: 2020/12/31 10:54:15\ndnl -----------------\ndnl This is a simple wrapper to use for pkg-config, for libraries which may be\ndnl available in that form.\ndnl\ndnl $1 = package name, which may be a shell variable\ndnl $2 = extra logic to use, if any, after updating CFLAGS and LIBS\ndnl $3 = logic to use if pkg-config does not have the package\nAC_DEFUN([CF_TRY_PKG_CONFIG],[\nAC_REQUIRE([CF_PKG_CONFIG])\n\nif test \"$PKG_CONFIG\" != none && \"$PKG_CONFIG\" --exists \"$1\"; then\n\tCF_VERBOSE(found package $1)\n\tcf_pkgconfig_incs=\"`$PKG_CONFIG --cflags \"$1\" 2>/dev/null`\"\n\tcf_pkgconfig_libs=\"`$PKG_CONFIG --libs   \"$1\" 2>/dev/null`\"\n\tCF_VERBOSE(package $1 CFLAGS: $cf_pkgconfig_incs)\n\tCF_VERBOSE(package $1 LIBS: $cf_pkgconfig_libs)\n\tCF_ADD_CFLAGS($cf_pkgconfig_incs)\n\tCF_ADD_LIBS($cf_pkgconfig_libs)\n\tifelse([$2],,:,[$2])\nelse\n\tcf_pkgconfig_incs=\n\tcf_pkgconfig_libs=\n\tifelse([$3],,:,[$3])\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_TRY_XOPEN_SOURCE version: 4 updated: 2022/09/10 15:16:16\ndnl -------------------\ndnl If _XOPEN_SOURCE is not defined in the compile environment, check if we\ndnl can define it successfully.\nAC_DEFUN([CF_TRY_XOPEN_SOURCE],[\nAC_CACHE_CHECK(if we should define _XOPEN_SOURCE,cf_cv_xopen_source,[\n\tAC_TRY_COMPILE(CF__XOPEN_SOURCE_HEAD,CF__XOPEN_SOURCE_BODY,\n\t[cf_cv_xopen_source=no],\n\t[cf_save=\"$CPPFLAGS\"\n\t CF_APPEND_TEXT(CPPFLAGS,-D_XOPEN_SOURCE=$cf_XOPEN_SOURCE)\n\t AC_TRY_COMPILE(CF__XOPEN_SOURCE_HEAD,CF__XOPEN_SOURCE_BODY,\n\t\t[cf_cv_xopen_source=no],\n\t\t[cf_cv_xopen_source=$cf_XOPEN_SOURCE])\n\t\tCPPFLAGS=\"$cf_save\"\n\t])\n])\n\nif test \"$cf_cv_xopen_source\" != no ; then\n\tCF_REMOVE_DEFINE(CFLAGS,$CFLAGS,_XOPEN_SOURCE)\n\tCF_REMOVE_DEFINE(CPPFLAGS,$CPPFLAGS,_XOPEN_SOURCE)\n\tcf_temp_xopen_source=\"-D_XOPEN_SOURCE=$cf_cv_xopen_source\"\n\tCF_APPEND_CFLAGS($cf_temp_xopen_source)\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_TYPEOF_CHTYPE version: 10 updated: 2017/01/21 11:06:25\ndnl ----------------\ndnl Determine the type we should use for chtype (and attr_t, which is treated\ndnl as the same thing).  We want around 32 bits, so on most machines want a\ndnl long, but on newer 64-bit machines, probably want an int.  If we're using\ndnl wide characters, we have to have a type compatible with that, as well.\nAC_DEFUN([CF_TYPEOF_CHTYPE],\n[\nAC_MSG_CHECKING([for type of chtype])\nAC_CACHE_VAL(cf_cv_typeof_chtype,[\n\t\tAC_TRY_RUN([\n#define WANT_BITS 31\n#include <stdio.h>\nint main(void)\n{\n\tFILE *fp = fopen(\"cf_test.out\", \"w\");\n\tif (fp != 0) {\n\t\tchar *result = \"long\";\n\t\tif (sizeof(unsigned long) > sizeof(unsigned int)) {\n\t\t\tint n;\n\t\t\tunsigned int x, y;\n\t\t\tfor (n = 0; n < WANT_BITS; n++) {\n\t\t\t\tx = (1 << n);\n\t\t\t\ty = (x >> n);\n\t\t\t\tif (y != 1 || x == 0) {\n\t\t\t\t\tx = 0;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/*\n\t\t\t * If x is nonzero, an int is big enough for the bits\n\t\t\t * that we want.\n\t\t\t */\n\t\t\tresult = (x != 0) ? \"int\" : \"long\";\n\t\t}\n\t\tfputs(result, fp);\n\t\tfclose(fp);\n\t}\n\t${cf_cv_main_return:-return}(0);\n}\n\t\t],\n\t\t[cf_cv_typeof_chtype=`cat cf_test.out`],\n\t\t[cf_cv_typeof_chtype=long],\n\t\t[cf_cv_typeof_chtype=long])\n\t\trm -f cf_test.out\n\t])\nAC_MSG_RESULT($cf_cv_typeof_chtype)\n\nAC_SUBST(cf_cv_typeof_chtype)\nAC_DEFINE_UNQUOTED(TYPEOF_CHTYPE,$cf_cv_typeof_chtype,[Define to actual type if needed for chtype])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_TYPE_SIGACTION version: 4 updated: 2012/10/06 17:56:13\ndnl -----------------\ndnl\nAC_DEFUN([CF_TYPE_SIGACTION],\n[\nAC_MSG_CHECKING([for type sigaction_t])\nAC_CACHE_VAL(cf_cv_type_sigaction,[\n\tAC_TRY_COMPILE([\n#include <signal.h>],\n\t\t[sigaction_t x],\n\t\t[cf_cv_type_sigaction=yes],\n\t\t[cf_cv_type_sigaction=no])])\nAC_MSG_RESULT($cf_cv_type_sigaction)\ntest \"$cf_cv_type_sigaction\" = yes && AC_DEFINE(HAVE_TYPE_SIGACTION,1,[Define to 1 if we have the sigaction_t type])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_UNSIGNED_LITERALS version: 2 updated: 1998/02/07 22:10:16\ndnl --------------------\ndnl Test if the compiler supports 'U' and 'L' suffixes.  Only old compilers\ndnl won't, but they're still there.\nAC_DEFUN([CF_UNSIGNED_LITERALS],\n[\nAC_MSG_CHECKING([if unsigned literals are legal])\nAC_CACHE_VAL(cf_cv_unsigned_literals,[\n\tAC_TRY_COMPILE([],[long x = 1L + 1UL + 1U + 1],\n\t\t[cf_cv_unsigned_literals=yes],\n\t\t[cf_cv_unsigned_literals=no])\n\t])\nAC_MSG_RESULT($cf_cv_unsigned_literals)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_UPPER version: 5 updated: 2001/01/29 23:40:59\ndnl --------\ndnl Make an uppercase version of a variable\ndnl $1=uppercase($2)\nAC_DEFUN([CF_UPPER],\n[\n$1=`echo \"$2\" | sed y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%`\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_UTF8_LIB version: 9 updated: 2021/05/19 19:35:25\ndnl -----------\ndnl Check for multibyte support, and if not found, utf8 compatibility library\nAC_DEFUN([CF_UTF8_LIB],\n[\nAC_HAVE_HEADERS(wchar.h)\nAC_CACHE_CHECK(for multibyte character support,cf_cv_utf8_lib,[\n\tcf_save_LIBS=\"$LIBS\"\n\tAC_TRY_LINK([\n#include <stdlib.h>\n#include <stdio.h>\n#ifdef HAVE_WCHAR_H\n#include <wchar.h>\n#endif\n],[putwc(0,0);],\n\t[cf_cv_utf8_lib=yes],\n\t[CF_FIND_LINKAGE([\n#include <libutf8.h>],[putwc(0,0);],utf8,\n\t\t[cf_cv_utf8_lib=add-on],\n\t\t[cf_cv_utf8_lib=no])\n])])\n\n# HAVE_LIBUTF8_H is used by ncurses if curses.h is shared between\n# ncurses/ncursesw:\nif test \"$cf_cv_utf8_lib\" = \"add-on\" ; then\n\tAC_DEFINE(HAVE_LIBUTF8_H,1,[Define to 1 if we should include libutf8.h])\n\tCF_ADD_INCDIR($cf_cv_header_path_utf8)\n\tCF_ADD_LIBDIR($cf_cv_library_path_utf8)\n\tCF_ADD_LIBS($cf_cv_library_file_utf8)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_VA_COPY version: 6 updated: 2018/12/04 18:14:25\ndnl ----------\ndnl check for va_copy, part of stdarg.h starting with ISO C 1999.\ndnl Also, workaround for glibc's __va_copy, by checking for both.\ndnl Finally, try to accommodate pre-ISO C 1999 headers.\nAC_DEFUN([CF_VA_COPY],[\nAC_CACHE_CHECK(for va_copy, cf_cv_have_va_copy,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tstatic va_list dst;\n\tstatic va_list src;\n\tva_copy(dst, src)],\n\tcf_cv_have_va_copy=yes,\n\tcf_cv_have_va_copy=no)])\n\nif test \"$cf_cv_have_va_copy\" = yes;\nthen\n\tAC_DEFINE(HAVE_VA_COPY,1,[Define to 1 if we have va_copy])\nelse # !cf_cv_have_va_copy\n\nAC_CACHE_CHECK(for __va_copy, cf_cv_have___va_copy,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tstatic va_list dst;\n\tstatic va_list src;\n\t__va_copy(dst, src)],\n\tcf_cv_have___va_copy=yes,\n\tcf_cv_have___va_copy=no)])\n\nif test \"$cf_cv_have___va_copy\" = yes\nthen\n\tAC_DEFINE(HAVE___VA_COPY,1,[Define to 1 if we have __va_copy])\nelse # !cf_cv_have___va_copy\n\nAC_CACHE_CHECK(for __builtin_va_copy, cf_cv_have___builtin_va_copy,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tstatic va_list dst;\n\tstatic va_list src;\n\t__builtin_va_copy(dst, src)],\n\tcf_cv_have___builtin_va_copy=yes,\n\tcf_cv_have___builtin_va_copy=no)])\n\ntest \"$cf_cv_have___builtin_va_copy\" = yes &&\n\tAC_DEFINE(HAVE___BUILTIN_VA_COPY,1,[Define to 1 if we have __builtin_va_copy])\n\nfi # cf_cv_have___va_copy\n\nfi # cf_cv_have_va_copy\n\ncase \"${cf_cv_have_va_copy}${cf_cv_have___va_copy}${cf_cv_have___builtin_va_copy}\" in\n(*yes*)\n\t;;\n\n(*)\n\tAC_CACHE_CHECK(if we can simply copy va_list, cf_cv_pointer_va_list,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tva_list dst;\n\tva_list src;\n\tdst = src],\n\tcf_cv_pointer_va_list=yes,\n\tcf_cv_pointer_va_list=no)])\n\n\tif test \"$cf_cv_pointer_va_list\" = no\n\tthen\n\t\tAC_CACHE_CHECK(if we can copy va_list indirectly, cf_cv_array_va_list,[\nAC_TRY_LINK([\n#include <stdarg.h>\n],[\n\tva_list dst;\n\tva_list src;\n\t*dst = *src],\n\t\t\tcf_cv_array_va_list=yes,\n\t\t\tcf_cv_array_va_list=no)])\n\t\ttest \"$cf_cv_array_va_list\" = yes && AC_DEFINE(ARRAY_VA_LIST,1,[Define to 1 if we can copy va_list indirectly])\n\tfi\n\t;;\nesac\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_VERBOSE version: 3 updated: 2007/07/29 09:55:12\ndnl ----------\ndnl Use AC_VERBOSE w/o the warnings\nAC_DEFUN([CF_VERBOSE],\n[test -n \"$verbose\" && echo \"\t$1\" 1>&AC_FD_MSG\nCF_MSG_LOG([$1])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_VERSION_INFO version: 8 updated: 2021/01/01 13:31:04\ndnl ---------------\ndnl Define several useful symbols derived from the VERSION file.  A separate\ndnl file is preferred to embedding the version numbers in various scripts.\ndnl (automake is a textbook-example of why the latter is a bad idea, but there\ndnl are others).\ndnl\ndnl The file contents are:\ndnl\tlibtool-version\trelease-version\tpatch-version\ndnl or\ndnl\trelease-version\ndnl where\ndnl\tlibtool-version (see ?) consists of 3 integers separated by '.'\ndnl\trelease-version consists of a major version and minor version\ndnl\t\tseparated by '.', optionally followed by a patch-version\ndnl\t\tseparated by '-'.  The minor version need not be an\ndnl\t\tinteger (but it is preferred).\ndnl\tpatch-version is an integer in the form yyyymmdd, so ifdef's and\ndnl\t\tscripts can easily compare versions.\ndnl\ndnl If libtool is used, the first form is required, since CF_WITH_LIBTOOL\ndnl simply extracts the first field using 'cut -f1'.\ndnl\ndnl Optional parameters:\ndnl $1 = internal name for package\ndnl $2 = external name for package\nAC_DEFUN([CF_VERSION_INFO],\n[\nif test -f \"$srcdir/VERSION\" ; then\n\tAC_MSG_CHECKING(for package version)\n\n\t# if there are not enough fields, cut returns the last one...\n\tcf_field1=`sed -e '2,$d' \"$srcdir/VERSION\" |cut -f1`\n\tcf_field2=`sed -e '2,$d' \"$srcdir/VERSION\" |cut -f2`\n\tcf_field3=`sed -e '2,$d' \"$srcdir/VERSION\" |cut -f3`\n\n\t# this is how CF_BUNDLED_INTL uses $VERSION:\n\tVERSION=\"$cf_field1\"\n\n\tVERSION_MAJOR=`echo \"$cf_field2\" | sed -e 's/\\..*//'`\n\ttest -z \"$VERSION_MAJOR\" && AC_MSG_ERROR(missing major-version)\n\n\tVERSION_MINOR=`echo \"$cf_field2\" | sed -e 's/^[[^.]]*\\.//' -e 's/-.*//'`\n\ttest -z \"$VERSION_MINOR\" && AC_MSG_ERROR(missing minor-version)\n\n\tAC_MSG_RESULT(${VERSION_MAJOR}.${VERSION_MINOR})\n\n\tAC_MSG_CHECKING(for package patch date)\n\tVERSION_PATCH=`echo \"$cf_field3\" | sed -e 's/^[[^-]]*-//'`\n\tcase .$VERSION_PATCH in\n\t(.)\n\t\tAC_MSG_ERROR(missing patch-date $VERSION_PATCH)\n\t\t;;\n\t(.[[0-9]][[0-9]][[0-9]][[0-9]][[0-9]][[0-9]][[0-9]][[0-9]])\n\t\t;;\n\t(*)\n\t\tAC_MSG_ERROR(illegal patch-date $VERSION_PATCH)\n\t\t;;\n\tesac\n\tAC_MSG_RESULT($VERSION_PATCH)\nelse\n\tAC_MSG_ERROR(did not find $srcdir/VERSION)\nfi\n\n# show the actual data that we have for versions:\nCF_VERBOSE(ABI VERSION $VERSION)\nCF_VERBOSE(VERSION_MAJOR $VERSION_MAJOR)\nCF_VERBOSE(VERSION_MINOR $VERSION_MINOR)\nCF_VERBOSE(VERSION_PATCH $VERSION_PATCH)\n\nAC_SUBST(VERSION)\nAC_SUBST(VERSION_MAJOR)\nAC_SUBST(VERSION_MINOR)\nAC_SUBST(VERSION_PATCH)\n\ndnl if a package name is given, define its corresponding version info.  We\ndnl need the package name to ensure that the defined symbols are unique.\nifelse($1,,,[\n\tcf_PACKAGE=$1\n\tPACKAGE=ifelse($2,,$1,$2)\n\tAC_DEFINE_UNQUOTED(PACKAGE, \"$PACKAGE\",[Define to the package-name])\n\tAC_SUBST(PACKAGE)\n\tCF_UPPER(cf_PACKAGE,$cf_PACKAGE)\n\tAC_DEFINE_UNQUOTED(${cf_PACKAGE}_VERSION,\"${VERSION_MAJOR}.${VERSION_MINOR}\")\n\tAC_DEFINE_UNQUOTED(${cf_PACKAGE}_PATCHDATE,${VERSION_PATCH})\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WCHAR_TYPE version: 4 updated: 2012/10/06 16:39:58\ndnl -------------\ndnl Check if type wide-character type $1 is declared, and if so, which header\ndnl file is needed.  The second parameter is used to set a shell variable when\ndnl the type is not found.  The first parameter sets a shell variable for the\ndnl opposite sense.\nAC_DEFUN([CF_WCHAR_TYPE],\n[\n# This is needed on Tru64 5.0 to declare $1\nAC_CACHE_CHECK(if we must include wchar.h to declare $1,cf_cv_$1,[\nAC_TRY_COMPILE([\n#include <stdlib.h>\n#include <stdarg.h>\n#include <stdio.h>\n#ifdef HAVE_LIBUTF8_H\n#include <libutf8.h>\n#endif],\n\t[$1 state],\n\t[cf_cv_$1=no],\n\t[AC_TRY_COMPILE([\n#include <stdlib.h>\n#include <stdarg.h>\n#include <stdio.h>\n#include <wchar.h>\n#ifdef HAVE_LIBUTF8_H\n#include <libutf8.h>\n#endif],\n\t[$1 value],\n\t[cf_cv_$1=yes],\n\t[cf_cv_$1=unknown])])])\n\nif test \"$cf_cv_$1\" = yes ; then\n\tAC_DEFINE(NEED_WCHAR_H,1,[Define to 1 if we must include wchar.h])\n\tNEED_WCHAR_H=1\nfi\n\nifelse([$2],,,[\n# if we do not find $1 in either place, use substitution to provide a fallback.\nif test \"$cf_cv_$1\" = unknown ; then\n\t$2=1\nfi\n])\nifelse($3,,,[\n# if we find $1 in either place, use substitution to provide a fallback.\nif test \"$cf_cv_$1\" != unknown ; then\n\t$3=1\nfi\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WEAK_SYMBOLS version: 1 updated: 2008/08/16 19:18:06\ndnl ---------------\ndnl Check for compiler-support for weak symbols.\ndnl This works with \"recent\" gcc.\nAC_DEFUN([CF_WEAK_SYMBOLS],[\nAC_CACHE_CHECK(if $CC supports weak symbols,cf_cv_weak_symbols,[\n\nAC_TRY_COMPILE([\n#include <stdio.h>],\n[\n#if defined(__GNUC__)\n#  if defined __USE_ISOC99\n#    define _cat_pragma(exp)\t_Pragma(#exp)\n#    define _weak_pragma(exp)\t_cat_pragma(weak name)\n#  else\n#    define _weak_pragma(exp)\n#  endif\n#  define _declare(name)\t__extension__ extern __typeof__(name) name\n#  define weak_symbol(name)\t_weak_pragma(name) _declare(name) __attribute__((weak))\n#endif\n\nweak_symbol(fopen);\n],[cf_cv_weak_symbols=yes],[cf_cv_weak_symbols=no])\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ABI_VERSION version: 4 updated: 2021/01/01 13:31:04\ndnl -------------------\ndnl Allow library's ABI to be overridden.  Generally this happens when a\ndnl packager has incremented the ABI past that used in the original package,\ndnl and wishes to keep doing this.\ndnl\ndnl $1 is the package name, if any, to derive a corresponding {package}_ABI\ndnl symbol.\nAC_DEFUN([CF_WITH_ABI_VERSION],[\ntest -z \"$cf_cv_abi_version\" && cf_cv_abi_version=0\nAC_ARG_WITH(abi-version,\n[  --with-abi-version=XXX  override derived ABI version],[\n\tif test \"x$cf_cv_abi_version\" != \"x$withval\"\n\tthen\n\t\tAC_MSG_WARN(overriding ABI version $cf_cv_abi_version to $withval)\n\t\tcase \"$cf_cv_rel_version\" in\n\t\t(5.*)\n\t\t\tcf_cv_rel_version=$withval.0\n\t\t\t;;\n\t\t(6.*)\n\t\t\tcf_cv_rel_version=$withval.9\t# FIXME: should be 10 as of 6.0 release\n\t\t\t;;\n\t\tesac\n\tfi\n\tcf_cv_abi_version=$withval])\n\tCF_NUMBER_SYNTAX($cf_cv_abi_version,ABI version)\nifelse($1,,,[\n$1_ABI=$cf_cv_abi_version\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_COMPILER version: 2 updated: 2010/06/26 17:35:58\ndnl --------------------\ndnl Command-line option to specify the Ada95 compiler.\nAC_DEFUN([CF_WITH_ADA_COMPILER],[\nAC_MSG_CHECKING(for ada-compiler)\nAC_ARG_WITH(ada-compiler,\n\t[  --with-ada-compiler=CMD specify Ada95 compiler command (default gnatmake)],\n\t[cf_ada_compiler=$withval],\n\t[cf_ada_compiler=gnatmake])\nAC_SUBST(cf_ada_compiler)\nAC_MSG_RESULT($cf_ada_compiler)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_INCLUDE version: 2 updated: 2010/06/26 17:35:58\ndnl -------------------\ndnl Command-line option to specify where Ada includes will install.\nAC_DEFUN([CF_WITH_ADA_INCLUDE],[\nAC_MSG_CHECKING(for ada-include)\nCF_WITH_PATH(ada-include,\n   [  --with-ada-include=DIR  Ada includes are in DIR],\n   ADA_INCLUDE,\n   PREFIX/share/ada/adainclude,\n   [$]prefix/share/ada/adainclude)\nAC_SUBST(ADA_INCLUDE)\nAC_MSG_RESULT($ADA_INCLUDE)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_LIBNAME version: 1 updated: 2019/09/07 18:59:41\ndnl -------------------\ndnl CF_WITH_ADA_LIBNAME\ndnl -------------------\ndnl Command-line option to specify how to name the resulting Ada library.\ndnl $1 = default value\nAC_DEFUN([CF_WITH_ADA_LIBNAME],[\nAC_MSG_CHECKING(for ada-libname)\nAC_ARG_WITH(ada-libname,\n   [  --with-ada-libname=XXX  override default Ada library-name],\n   ADA_LIBNAME=[$]withval,\n   ADA_LIBNAME=$1)\ncase \"x$ADA_LIBNAME\" in\n(x|xyes|xno)\n\tADA_LIBNAME=$1\n\t;;\nesac\nAC_SUBST(ADA_LIBNAME)\nAC_MSG_RESULT($ADA_LIBNAME)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_OBJECTS version: 2 updated: 2010/06/26 17:35:58\ndnl -------------------\ndnl Command-line option to specify where Ada objects will install.\nAC_DEFUN([CF_WITH_ADA_OBJECTS],[\nAC_MSG_CHECKING(for ada-objects)\nCF_WITH_PATH(ada-objects,\n   [  --with-ada-objects=DIR  Ada objects are in DIR],\n   ADA_OBJECTS,\n   PREFIX/lib/ada/adalib,\n   [$]prefix/lib/ada/adalib)\nAC_SUBST(ADA_OBJECTS)\nAC_MSG_RESULT($ADA_OBJECTS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_ADA_SHAREDLIB version: 5 updated: 2018/07/21 19:10:35\ndnl ---------------------\ndnl Command-line option to specify if an Ada95 shared-library should be built,\ndnl and optionally what its soname should be.\nAC_DEFUN([CF_WITH_ADA_SHAREDLIB],[\nAC_REQUIRE([CF_GNAT_PROJECTS])\nAC_MSG_CHECKING(if an Ada95 shared-library should be built)\nAC_ARG_WITH(ada-sharedlib,\n\t[  --with-ada-sharedlib=soname build shared-library (requires GNAT projects)],\n\t[with_ada_sharedlib=$withval],\n\t[with_ada_sharedlib=no])\nAC_MSG_RESULT($with_ada_sharedlib)\n\nif test \"x$with_ada_sharedlib\" != xno\nthen\n\tif test \"x$cf_gnat_projects\" != xyes\n\tthen\n\t\tAC_MSG_WARN(disabling shared-library since GNAT projects are not supported)\n\t\twith_ada_sharedlib=no\n\tfi\nfi\n\nADA_SHAREDLIB='lib$(LIB_NAME).so.1'\nMAKE_ADA_SHAREDLIB=\"#\"\n\nif test \"x$with_ada_sharedlib\" != xno\nthen\n\tMAKE_ADA_SHAREDLIB=\n\tif test \"x$with_ada_sharedlib\" != xyes\n\tthen\n\t\tADA_SHAREDLIB=\"$with_ada_sharedlib\"\n\tfi\nfi\n\nAC_SUBST(ADA_SHAREDLIB)\nAC_SUBST(MAKE_ADA_SHAREDLIB)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_DBMALLOC version: 7 updated: 2010/06/21 17:26:47\ndnl ----------------\ndnl Configure-option for dbmalloc.  The optional parameter is used to override\ndnl the updating of $LIBS, e.g., to avoid conflict with subsequent tests.\nAC_DEFUN([CF_WITH_DBMALLOC],[\nCF_NO_LEAKS_OPTION(dbmalloc,\n\t[  --with-dbmalloc         test: use Conor Cahill's dbmalloc library],\n\t[USE_DBMALLOC])\n\nif test \"$with_dbmalloc\" = yes ; then\n\tAC_CHECK_HEADER(dbmalloc.h,\n\t\t[AC_CHECK_LIB(dbmalloc,[debug_malloc]ifelse([$1],,[],[,$1]))])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_DMALLOC version: 7 updated: 2010/06/21 17:26:47\ndnl ---------------\ndnl Configure-option for dmalloc.  The optional parameter is used to override\ndnl the updating of $LIBS, e.g., to avoid conflict with subsequent tests.\nAC_DEFUN([CF_WITH_DMALLOC],[\nCF_NO_LEAKS_OPTION(dmalloc,\n\t[  --with-dmalloc          test: use Gray Watson's dmalloc library],\n\t[USE_DMALLOC])\n\nif test \"$with_dmalloc\" = yes ; then\n\tAC_CHECK_HEADER(dmalloc.h,\n\t\t[AC_CHECK_LIB(dmalloc,[dmalloc_debug]ifelse([$1],,[],[,$1]))])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_EXPORT_SYMS version: 3 updated: 2014/12/20 19:16:08\ndnl -------------------\ndnl Use this with libtool to specify the list of symbols that may be exported.\ndnl The input file contains one symbol per line; comments work with \"#\".\ndnl\ndnl $1 = basename of the \".sym\" file (default $PACKAGE)\nAC_DEFUN([CF_WITH_EXPORT_SYMS],\n[\nAC_MSG_CHECKING(if exported-symbols file should be used)\nAC_ARG_WITH(export-syms,\n\t[  --with-export-syms=XXX  limit exported symbols using libtool],\n\t[with_export_syms=$withval],\n\t[with_export_syms=no])\nif test \"x$with_export_syms\" = xyes\nthen\n\twith_export_syms='${top_srcdir}/package/ifelse($1,,${PACKAGE},[$1]).sym'\n\tAC_SUBST(PACKAGE)\nfi\nAC_MSG_RESULT($with_export_syms)\nif test \"x$with_export_syms\" != xno\nthen\n\tEXPORT_SYMS=\"-export-symbols $with_export_syms\"\n\tAC_SUBST(EXPORT_SYMS)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_GPM version: 10 updated: 2017/04/29 18:32:18\ndnl -----------\ndnl\ndnl The option parameter (if neither yes/no) is assumed to be the name of\ndnl the gpm library, e.g., for dynamic loading.\nAC_DEFUN([CF_WITH_GPM],\n[\nAC_MSG_CHECKING(if you want to link with the GPM mouse library)\nAC_ARG_WITH(gpm,\n\t[  --with-gpm              use Alessandro Rubini's GPM library],\n\t[with_gpm=$withval],\n\t[with_gpm=maybe])\nAC_MSG_RESULT($with_gpm)\n\nif test \"$with_gpm\" != no ; then\n\tAC_CHECK_HEADER(gpm.h,[\n\t\tAC_DEFINE(HAVE_GPM_H,1,[Define to 1 if we have gpm.h header])\n\t\tif test \"$with_gpm\" != yes && test \"$with_gpm\" != maybe ; then\n\t\t\tCF_VERBOSE(assuming we really have GPM library)\n\t\t\tAC_DEFINE(HAVE_LIBGPM,1,[Define to 1 if we have the gpm library])\n\t\t\twith_gpm=yes\n\t\telse\n\t\t\tAC_CHECK_LIB(gpm,Gpm_Open,[with_gpm=yes],[\n\t\t\t\tif test \"$with_gpm\" = maybe; then\n\t\t\t\t\tAC_MSG_WARN(Cannot link with GPM library)\n\t\t\t\t\twith_gpm=no\n\t\t\t\telse\n\t\t\t\t\tAC_MSG_ERROR(Cannot link with GPM library)\n\t\t\t\tfi\n\t\t\t])\n\t\tfi\n\t],[\n\t\ttest \"$with_gpm\" != maybe && AC_MSG_WARN(Cannot find GPM header)\n\t\twith_gpm=no\n\t])\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_LIBTOOL version: 36 updated: 2021/01/01 13:31:04\ndnl ---------------\ndnl Provide a configure option to incorporate libtool.  Define several useful\ndnl symbols for the makefile rules.\ndnl\ndnl The reference to AC_PROG_LIBTOOL does not normally work, since it uses\ndnl macros from libtool.m4 which is in the aclocal directory of automake.\ndnl Following is a simple script which turns on the AC_PROG_LIBTOOL macro.\ndnl But that still does not work properly since the macro is expanded outside\ndnl the CF_WITH_LIBTOOL macro:\ndnl\ndnl\t#!/bin/sh\ndnl\tACLOCAL=`aclocal --print-ac-dir`\ndnl\tif test -z \"$ACLOCAL\" ; then\ndnl\t\techo cannot find aclocal directory\ndnl\t\texit 1\ndnl\telif test ! -f $ACLOCAL/libtool.m4 ; then\ndnl\t\techo cannot find libtool.m4 file\ndnl\t\texit 1\ndnl\tfi\ndnl\ndnl\tLOCAL=aclocal.m4\ndnl\tORIG=aclocal.m4.orig\ndnl\ndnl\ttrap \"mv $ORIG $LOCAL\" 0 1 2 3 15\ndnl\trm -f $ORIG\ndnl\tmv $LOCAL $ORIG\ndnl\ndnl\t# sed the LIBTOOL= assignment to omit the current directory?\ndnl\tsed -e 's/^LIBTOOL=.*/LIBTOOL=${LIBTOOL:-libtool}/' $ACLOCAL/libtool.m4 >>$LOCAL\ndnl\tcat $ORIG >>$LOCAL\ndnl\ndnl\tautoconf-257 $*\ndnl\nAC_DEFUN([CF_WITH_LIBTOOL],\n[\nAC_REQUIRE([CF_DISABLE_LIBTOOL_VERSION])\nifdef([AC_PROG_LIBTOOL],,[\nLIBTOOL=\n])\n# common library maintenance symbols that are convenient for libtool scripts:\nLIB_CREATE='${AR} -cr'\nLIB_OBJECT='${OBJECTS}'\nLIB_SUFFIX=.a\nLIB_PREP=\"$RANLIB\"\n\n# symbols used to prop libtool up to enable it to determine what it should be\n# doing:\nLIB_CLEAN=\nLIB_COMPILE=\nLIB_LINK='${CC}'\nLIB_INSTALL=\nLIB_UNINSTALL=\n\nAC_MSG_CHECKING(if you want to build libraries with libtool)\nAC_ARG_WITH(libtool,\n\t[  --with-libtool          generate libraries with libtool],\n\t[with_libtool=$withval],\n\t[with_libtool=no])\nAC_MSG_RESULT($with_libtool)\nif test \"$with_libtool\" != \"no\"; then\nifdef([AC_PROG_LIBTOOL],[\n\t# missing_content_AC_PROG_LIBTOOL{{\n\tAC_PROG_LIBTOOL\n\t# missing_content_AC_PROG_LIBTOOL}}\n],[\n\tif test \"$with_libtool\" != \"yes\" ; then\n\t\tCF_PATH_SYNTAX(with_libtool)\n\t\tLIBTOOL=$with_libtool\n\telse\n\t\tAC_CHECK_TOOLS(LIBTOOL,[libtool glibtool],none)\n\t\tCF_LIBTOOL_VERSION\n\t\tif test -z \"$cf_cv_libtool_version\" && test \"$LIBTOOL\" = libtool\n\t\tthen\n\t\t\tCF_FORGET_TOOL(LIBTOOL)\n\t\t\tAC_CHECK_TOOLS(LIBTOOL,[glibtool],none)\n\t\t\tCF_LIBTOOL_VERSION\n\t\tfi\n\tfi\n\tif test -z \"$LIBTOOL\" ; then\n\t\tAC_MSG_ERROR(Cannot find libtool)\n\tfi\n])dnl\n\tLIB_CREATE='${LIBTOOL} --mode=link ${CC} -rpath ${libdir} ${LIBTOOL_VERSION} `cut -f1 ${top_srcdir}/VERSION` ${LIBTOOL_OPTS} ${LT_UNDEF} $(LIBS) -o'\n\tLIB_OBJECT='${OBJECTS:.o=.lo}'\n\tLIB_SUFFIX=.la\n\tLIB_CLEAN='${LIBTOOL} --mode=clean'\n\tLIB_COMPILE='${LIBTOOL} --mode=compile'\n\tLIB_LINK='${LIBTOOL} --mode=link ${CC} ${LIBTOOL_OPTS}'\n\tLIB_INSTALL='${LIBTOOL} --mode=install'\n\tLIB_UNINSTALL='${LIBTOOL} --mode=uninstall'\n\tLIB_PREP=:\n\n\tCF_CHECK_LIBTOOL_VERSION\n\n\t# special hack to add -no-undefined (which libtool should do for itself)\n\tLT_UNDEF=\n\tcase \"$cf_cv_system_name\" in\n\t(cygwin*|msys*|mingw32*|os2*|uwin*|aix[[4-7]])\n\t\tLT_UNDEF=-no-undefined\n\t\t;;\n\tesac\n\tAC_SUBST([LT_UNDEF])\n\n\t# special hack to add --tag option for C++ compiler\n\tcase \"$cf_cv_libtool_version\" in\n\t(1.[[5-9]]*|[[2-9]].[[0-9.a-z]]*)\n\t\tLIBTOOL_CXX=\"$LIBTOOL --tag=CXX\"\n\t\tLIBTOOL=\"$LIBTOOL --tag=CC\"\n\t\t;;\n\t(*)\n\t\tLIBTOOL_CXX=\"$LIBTOOL\"\n\t\t;;\n\tesac\nelse\n\tLIBTOOL=\"\"\n\tLIBTOOL_CXX=\"\"\nfi\n\ntest -z \"$LIBTOOL\" && ECHO_LT=\n\nAC_SUBST(LIBTOOL)\nAC_SUBST(LIBTOOL_CXX)\nAC_SUBST(LIBTOOL_OPTS)\n\nAC_SUBST(LIB_CREATE)\nAC_SUBST(LIB_OBJECT)\nAC_SUBST(LIB_SUFFIX)\nAC_SUBST(LIB_PREP)\n\nAC_SUBST(LIB_CLEAN)\nAC_SUBST(LIB_COMPILE)\nAC_SUBST(LIB_LINK)\nAC_SUBST(LIB_INSTALL)\nAC_SUBST(LIB_UNINSTALL)\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_LIBTOOL_OPTS version: 4 updated: 2015/04/17 21:13:04\ndnl --------------------\ndnl Allow user to pass additional libtool options into the library creation\ndnl and link steps.  The main use for this is to do something like\ndnl\t./configure --with-libtool-opts=-static\ndnl to get the same behavior as automake-flavored\ndnl\t./configure --enable-static\nAC_DEFUN([CF_WITH_LIBTOOL_OPTS],[\nAC_MSG_CHECKING(for additional libtool options)\nAC_ARG_WITH(libtool-opts,\n\t[  --with-libtool-opts=XXX specify additional libtool options],\n\t[with_libtool_opts=$withval],\n\t[with_libtool_opts=no])\nAC_MSG_RESULT($with_libtool_opts)\n\ncase .$with_libtool_opts in\n(.yes|.no|.)\n\t;;\n(*)\n\tLIBTOOL_OPTS=\"$LIBTOOL_OPTS $with_libtool_opts\"\n\t;;\nesac\n\nAC_SUBST(LIBTOOL_OPTS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_LIB_BASENAME version: 1 updated: 2020/03/07 20:05:14\ndnl --------------------\ndnl Allow for overriding the basename of a library, i.e., the part to which\ndnl prefixes/suffixes are attached.\ndnl\ndnl $1 = variable to set\ndnl $2 = option name\ndnl $3 = default basename for library, if omitted use $2\nAC_DEFUN([CF_WITH_LIB_BASENAME],\n[\nAC_MSG_CHECKING(for desired basename for $2 library)\nAC_ARG_WITH($2-libname,\n\t[  --with-$2-libname=XXX override ifelse($3,,$2,$3) basename of library],\n\t[with_lib_basename=$withval],\n\t[with_lib_basename=ifelse($3,,$2,$3)])\n$1=\"$with_lib_basename\"\n\ncase \"x[$]$1\" in\n(x|xno|xnone|xyes)\n\t$1=ifelse($3,,$2,$3)\n\t;;\n(*)\n\t;;\nesac\n\nAC_MSG_RESULT([$]$1)\nAC_SUBST($1)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_LIB_PREFIX version: 2 updated: 2021/01/01 16:53:59\ndnl ------------------\ndnl Allow the library-prefix to be overridden.  OS/2 EMX originally had no\ndnl \"lib\" prefix, e.g., because it used the dll naming convention.\ndnl\ndnl $1 = variable to set\nAC_DEFUN([CF_WITH_LIB_PREFIX],\n[\nAC_MSG_CHECKING(if you want to have a library-prefix)\nAC_ARG_WITH(lib-prefix,\n\t[  --with-lib-prefix       override library-prefix],\n\t[with_lib_prefix=$withval],\n\t[with_lib_prefix=auto])\nAC_MSG_RESULT($with_lib_prefix)\n\nif test \"$with_lib_prefix\" = auto\nthen\n\tCF_LIB_PREFIX($1)\nelif test \"$with_lib_prefix\" = no\nthen\n\tLIB_PREFIX=\nelse\n\tLIB_PREFIX=$with_lib_prefix\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PATH version: 12 updated: 2021/09/04 06:35:04\ndnl ------------\ndnl Wrapper for AC_ARG_WITH to ensure that user supplies a pathname, not just\ndnl defaulting to yes/no.\ndnl\ndnl $1 = option name\ndnl $2 = help-text\ndnl $3 = environment variable to set\ndnl $4 = default value, shown in the help-message, must be a constant\ndnl $5 = default value, if it is an expression & cannot be in the help-message\ndnl\nAC_DEFUN([CF_WITH_PATH],\n[AC_ARG_WITH($1,[$2 ](default: ifelse([$4],,empty,[$4])),,\nifelse([$4],,[withval=\"${$3}\"],[withval=\"${$3:-ifelse([$5],,[$4],[$5])}\"]))dnl\nif ifelse([$5],,true,[test -n \"$5\"]) ; then\nCF_PATH_SYNTAX(withval)\nfi\neval $3=\"$withval\"\nAC_SUBST($3)dnl\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PATHLIST version: 13 updated: 2021/09/04 06:35:04\ndnl ----------------\ndnl Process an option specifying a list of colon-separated paths.\ndnl\ndnl $1 = option name\ndnl $2 = help-text\ndnl $3 = environment variable to set\ndnl $4 = default value, shown in the help-message, must be a constant\ndnl $5 = default value, if it is an expression & cannot be in the help-message\ndnl $6 = flag to tell if we want to define or substitute\ndnl\nAC_DEFUN([CF_WITH_PATHLIST],[\nAC_REQUIRE([CF_PATHSEP])\nAC_ARG_WITH($1,[$2 ](default: ifelse($4,,empty,$4)),,\nifelse($4,,[withval=${$3}],[withval=${$3:-ifelse($5,,$4,$5)}]))dnl\n\nIFS=\"${IFS:- \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${PATH_SEPARATOR}\"\ncf_dst_path=\nfor cf_src_path in $withval\ndo\n  CF_PATH_SYNTAX(cf_src_path)\n  test -n \"$cf_dst_path\" && cf_dst_path=\"${cf_dst_path}$PATH_SEPARATOR\"\n  cf_dst_path=\"${cf_dst_path}${cf_src_path}\"\ndone\nIFS=\"$ac_save_ifs\"\n\nifelse($6,define,[\n# Strip single quotes from the value, e.g., when it was supplied as a literal\n# for $4 or $5.\ncase \"$cf_dst_path\" in\n(\\'*)\n  cf_dst_path=\"`echo \"$cf_dst_path\" |sed -e s/\\'// -e s/\\'\\$//`\"\n  ;;\nesac\ncf_dst_path=`echo \"$cf_dst_path\" | sed -e 's/\\\\\\\\/\\\\\\\\\\\\\\\\/g'`\n])\n\n# This may use the prefix/exec_prefix symbols which will only yield \"NONE\"\n# so we have to check/work around.  We do prefer the result of \"eval\"...\neval cf_dst_eval=\"$cf_dst_path\"\ncase \"x$cf_dst_eval\" in\n(xNONE*)\n\t$3=$cf_dst_path\n\t;;\n(*)\n\t$3=\"$cf_dst_eval\"\n\t;;\nesac\nAC_SUBST($3)dnl\n\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PATH_PROG version: 1 updated: 2019/06/30 19:44:43\ndnl -----------------\ndnl Check for a given program, like CF_PATH_PROG, but allow override using a\ndnl \"--with-xxx\" option.\ndnl\ndnl Parameters:\ndnl\t\t$1 = environment variable to set/update\ndnl\t\t$2 = program name\ndnl\t\t$3 = help-text\ndnl\t\t$4 = $PATH\nAC_DEFUN([CF_WITH_PATH_PROG],[\nAC_ARG_WITH($2-path,\n\t[  --with-$2-path=XXX     specify path of $2 ifelse($3,,,$3)],\n\t[AC_MSG_CHECKING(for $2 program ifelse($3,,,$3))\n\t\t$1=$withval\n\t\tAC_MSG_RESULT([$]$1)\n\t\tCF_PATH_SYNTAX($1)\n\t],\n\t[CF_PATH_PROG($1,$2,,ifelse($4,,,$4))\n\t\tif test -z \"[$]$1\"\n\t\tthen\n\t\t\tAC_MSG_WARN(no $2 program found ifelse($3,,,$3))\n\t\tfi\n\t])\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PCRE2 version: 6 updated: 2021/08/11 20:35:34\ndnl -------------\ndnl Add PCRE2 (Perl-compatible regular expressions v2) to the build if it is\ndnl available and the user requests it.  Assume the application will otherwise\ndnl use the POSIX interface.\ndnl\ndnl TODO allow $withval to specify package location\nAC_DEFUN([CF_WITH_PCRE2],\n[\nAC_REQUIRE([CF_PKG_CONFIG])\n\nAC_MSG_CHECKING(if you want to use PCRE2 for regular-expressions)\nAC_ARG_WITH(pcre2,\n\t[  --with-pcre2            use PCRE2 for regular-expressions])\ntest -z \"$with_pcre2\" && with_pcre2=no\nAC_MSG_RESULT($with_pcre2)\n\nif test \"x$with_pcre2\" != xno ; then\n\tcf_with_pcre2_ok=no\n\tfor cf_with_pcre2 in libpcre2 libpcre2-posix libpcre\n\tdo\n\t\tCF_TRY_PKG_CONFIG($cf_with_pcre2,[cf_with_pcre2_ok=yes; break])\n\tdone\n\tcf_with_pcre2_ok=yes || AC_MSG_ERROR(Cannot find PCRE2 library)\n\n\tAC_DEFINE(HAVE_LIB_PCRE2,1,[Define to 1 if we can/should compile with the PCRE2 library])\n\n\t# if pkgconfig gave no results, look for the libraries directly\n\tcase \"$LIBS\" in\n\t(*pcre2-posix*|*pcreposix*)\n\t\t;;\n\t(*)\n\t\tAC_CHECK_LIB(pcre2-posix,regcomp,[\n\t\t\tCF_ADD_LIB(pcre2-posix)],\n\t\t\t[AC_CHECK_LIB(pcreposix,regcomp,[\n\t\t\t CF_ADD_LIB(pcreposix)\n\t\t\t],[AC_MSG_ERROR(Cannot find PCRE2 POSIX library)])])\n\t\t;;\n\tesac\n\n\t# either way, check for the library header files\n\tAC_CHECK_HEADERS(pcre2posix.h pcreposix.h)\n\tAC_CHECK_FUNCS(PCRE2regcomp)\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PKG_CONFIG_LIBDIR version: 20 updated: 2022/01/29 17:03:42\ndnl -------------------------\ndnl Allow the choice of the pkg-config library directory to be overridden.\ndnl\ndnl pkg-config uses a search-list built from these colon-separated lists of\ndnl directories:\ndnl a) $PKG_CONFIG_PATH (tested first, added if set)\ndnl b) $PKG_CONFIG_LIBDIR (tested second, added if set)\ndnl c) builtin-list (added if $PKG_CONFIG_LIBDIR is not set)\ndnl\ndnl pkgconf (used with some systems such as FreeBSD in place of pkg-config)\ndnl optionally ignores $PKG_CONFIG_LIBDIR.\nAC_DEFUN([CF_WITH_PKG_CONFIG_LIBDIR],[\n\ncase \"$PKG_CONFIG\" in\n(no|none|yes)\n\tAC_MSG_CHECKING(for pkg-config library directory)\n\t;;\n(*)\n\tAC_MSG_CHECKING(for $PKG_CONFIG library directory)\n\t;;\nesac\n\n# if $PKG_CONFIG_LIBDIR is set, try to use that\ncf_search_path=`echo \"$PKG_CONFIG_LIBDIR\" | sed -e 's/:/ /g' -e 's,^[[ \t]]*,,'`\n\n# if the option is used, let that override.  otherwise default to \"libdir\"\nAC_ARG_WITH(pkg-config-libdir,\n\t[  --with-pkg-config-libdir=XXX use given directory for installing pc-files],\n\t[cf_search_path=$withval],\n\t[test \"x$PKG_CONFIG\" != xnone && test -z \"$cf_search_path\" && cf_search_path=libdir])\n\ncase \"x$cf_search_path\" in\n(xlibdir)\n\tPKG_CONFIG_LIBDIR='${libdir}/pkgconfig'\n\tAC_MSG_RESULT($PKG_CONFIG_LIBDIR)\n\tcf_search_path=\n\t;;\n(x)\n\t;;\n(x/*\\ *)\n\tPKG_CONFIG_LIBDIR=\n\t;;\n(x/*)\n\tPKG_CONFIG_LIBDIR=\"$cf_search_path\"\n\tAC_MSG_RESULT($PKG_CONFIG_LIBDIR)\n\tcf_search_path=\n\t;;\n(xyes|xauto)\n\tAC_MSG_RESULT(auto)\n\tcf_search_path=\n\t# Look for the library directory using the same prefix as the executable\n\tAC_MSG_CHECKING(for search-list)\n\tif test \"x$PKG_CONFIG\" != xnone\n\tthen\n\t\t# works for pkg-config since version 0.24 (2009)\n\t\t# works for pkgconf since version 0.8.3 (2012)\n\t\tfor cf_pkg_program in \\\n\t\t\t`echo \"$PKG_CONFIG\" | sed -e 's,^.*/,,'` \\\n\t\t\tpkg-config \\\n\t\t\tpkgconf\n\t\tdo\n\t\t\tcf_search_path=`\"$PKG_CONFIG\" --variable=pc_path \"$cf_pkg_program\" 2>/dev/null | tr : ' '`\n\t\t\ttest -n \"$cf_search_path\" && break\n\t\tdone\n\n\t\t# works for pkg-config since import in 2005 of original 2001 HP code.\n\t\ttest -z \"$cf_search_path\" && \\\n\t\tcf_search_path=`\n\t\t\"$PKG_CONFIG\" --debug --exists no-such-package 2>&1 | $AWK \"\\\n/^Scanning directory (#[1-9][0-9]* )?'.*'$/{ \\\n\tsub(\\\"^[[^']]*'\\\",\\\"\\\"); \\\n\tsub(\\\"'.*\\\",\\\"\\\"); \\\n\tprintf \\\" %s\\\", \\\\[$]0; } \\\n{ next; } \\\n\"`\n\tfi\n\n\tAC_MSG_RESULT($cf_search_path)\n\t;;\n(*)\n\tAC_MSG_ERROR(Unexpected option value: $cf_search_path)\n\t;;\nesac\n\nif test -n \"$cf_search_path\"\nthen\n\tAC_MSG_CHECKING(for first directory)\n\tcf_pkg_config_path=none\n\tfor cf_config in $cf_search_path\n\tdo\n\t\tif test -d \"$cf_config\"\n\t\tthen\n\t\t\tcf_pkg_config_path=$cf_config\n\t\t\tbreak\n\t\tfi\n\tdone\n\tAC_MSG_RESULT($cf_pkg_config_path)\n\n\tif test \"x$cf_pkg_config_path\" != xnone ; then\n\t\t# limit this to the first directory found\n\t\tPKG_CONFIG_LIBDIR=\"$cf_pkg_config_path\"\n\tfi\n\n\tif test -z \"$PKG_CONFIG_LIBDIR\" && test -n \"$cf_search_path\"\n\tthen\n\t\tAC_MSG_CHECKING(for workaround)\n\t\tif test \"$prefix\" = \"NONE\" ; then\n\t\t\tcf_prefix=\"$ac_default_prefix\"\n\t\telse\n\t\t\tcf_prefix=\"$prefix\"\n\t\tfi\n\t\teval cf_libdir=$libdir\n\t\tcf_libdir=`echo \"$cf_libdir\" | sed -e \"s,^NONE,$cf_prefix,\"`\n\t\tcf_backup=\n\t\tfor cf_config in $cf_search_path\n\t\tdo\n\t\t\tcase $cf_config in\n\t\t\t$cf_libdir/pkgconfig)\n\t\t\t\tPKG_CONFIG_LIBDIR=$cf_libdir/pkgconfig\n\t\t\t\tbreak\n\t\t\t\t;;\n\t\t\t*)\n\t\t\t\ttest -z \"$cf_backup\" && cf_backup=$cf_config\n\t\t\t\t;;\n\t\t\tesac\n\t\tdone\n\t\ttest -z \"$PKG_CONFIG_LIBDIR\" && PKG_CONFIG_LIBDIR=$cf_backup\n\t\tAC_MSG_RESULT($PKG_CONFIG_LIBDIR)\n\tfi\nfi\n\nAC_SUBST(PKG_CONFIG_LIBDIR)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_PTHREAD version: 7 updated: 2015/04/18 08:56:57\ndnl ---------------\ndnl Check for POSIX thread library.\nAC_DEFUN([CF_WITH_PTHREAD],\n[\nAC_MSG_CHECKING(if you want to link with the pthread library)\nAC_ARG_WITH(pthread,\n\t[  --with-pthread          use POSIX thread library],\n\t[with_pthread=$withval],\n\t[with_pthread=no])\nAC_MSG_RESULT($with_pthread)\n\nif test \"$with_pthread\" != no ; then\n\tAC_CHECK_HEADER(pthread.h,[\n\tAC_DEFINE(HAVE_PTHREADS_H,1,[Define to 1 if we have pthreads.h header])\n\n\tfor cf_lib_pthread in pthread c_r\n\tdo\n\t    AC_MSG_CHECKING(if we can link with the $cf_lib_pthread library)\n\t    cf_save_LIBS=\"$LIBS\"\n\t    CF_ADD_LIB($cf_lib_pthread)\n\t    AC_TRY_LINK([\n#include <pthread.h>\n],[\n\t\tint rc = pthread_create(0,0,0,0);\n\t\tint r2 = pthread_mutexattr_settype(0, 0);\n],[with_pthread=yes],[with_pthread=no])\n\t    LIBS=\"$cf_save_LIBS\"\n\t    AC_MSG_RESULT($with_pthread)\n\t    test \"$with_pthread\" = yes && break\n\tdone\n\n\tif test \"$with_pthread\" = yes ; then\n\t    CF_ADD_LIB($cf_lib_pthread)\n\t    AC_DEFINE(HAVE_LIBPTHREADS,1,[Define to 1 if we have pthreads library])\n\telse\n\t    AC_MSG_ERROR(Cannot link with pthread library)\n\tfi\n\t])\nfi\n])\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_REL_VERSION version: 1 updated: 2003/09/20 18:12:49\ndnl -------------------\ndnl Allow library's release-version to be overridden.  Generally this happens when a\ndnl packager has incremented the release-version past that used in the original package,\ndnl and wishes to keep doing this.\ndnl\ndnl $1 is the package name, if any, to derive corresponding {package}_MAJOR\ndnl and {package}_MINOR symbols\ndnl symbol.\nAC_DEFUN([CF_WITH_REL_VERSION],[\ntest -z \"$cf_cv_rel_version\" && cf_cv_rel_version=0.0\nAC_ARG_WITH(rel-version,\n[  --with-rel-version=XXX  override derived release version],\n[AC_MSG_WARN(overriding release version $cf_cv_rel_version to $withval)\n cf_cv_rel_version=$withval])\nifelse($1,,[\n CF_NUMBER_SYNTAX($cf_cv_rel_version,Release version)\n],[\n $1_MAJOR=`echo \"$cf_cv_rel_version\" | sed -e 's/\\..*//'`\n $1_MINOR=`echo \"$cf_cv_rel_version\" | sed -e 's/^[[^.]]*//' -e 's/^\\.//' -e 's/\\..*//'`\n CF_NUMBER_SYNTAX([$]$1_MAJOR,Release major-version)\n CF_NUMBER_SYNTAX([$]$1_MINOR,Release minor-version)\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_SYSMOUSE version: 3 updated: 2012/10/06 17:56:13\ndnl ----------------\ndnl If we can compile with sysmouse, make it available unless it is not wanted.\nAC_DEFUN([CF_WITH_SYSMOUSE],[\n# not everyone has \"test -c\"\nif test -c /dev/sysmouse 2>/dev/null ; then\nAC_MSG_CHECKING(if you want to use sysmouse)\nAC_ARG_WITH(sysmouse,\n\t[  --with-sysmouse         use sysmouse (FreeBSD console)],\n\t[cf_with_sysmouse=$withval],\n\t[cf_with_sysmouse=maybe])\n\tif test \"$cf_with_sysmouse\" != no ; then\n\tAC_TRY_COMPILE([\n#include <osreldate.h>\n#if (__FreeBSD_version >= 400017)\n#include <sys/consio.h>\n#include <sys/fbio.h>\n#else\n#include <machine/console.h>\n#endif\n],[\n\tstruct mouse_info the_mouse;\n\tioctl(0, CONS_MOUSECTL, &the_mouse);\n],[cf_with_sysmouse=yes],[cf_with_sysmouse=no])\n\tfi\nAC_MSG_RESULT($cf_with_sysmouse)\ntest \"$cf_with_sysmouse\" = yes && AC_DEFINE(USE_SYSMOUSE,1,[Define to 1 if we can/should use the sysmouse interface])\nfi\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_SYSTYPE version: 1 updated: 2013/01/26 16:26:12\ndnl ---------------\ndnl For testing, override the derived host system-type which is used to decide\ndnl things such as the linker commands used to build shared libraries.  This is\ndnl normally chosen automatically based on the type of system which you are\ndnl building on.  We use it for testing the configure script.\ndnl\ndnl This is different from the --host option: it is used only for testing parts\ndnl of the configure script which would not be reachable with --host since that\ndnl relies on the build environment being real, rather than mocked up.\nAC_DEFUN([CF_WITH_SYSTYPE],[\nCF_CHECK_CACHE([AC_CANONICAL_SYSTEM])\nAC_ARG_WITH(system-type,\n\t[  --with-system-type=XXX  test: override derived host system-type],\n[AC_MSG_WARN(overriding system type to $withval)\n\tcf_cv_system_name=$withval\n\thost_os=$withval\n])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_VALGRIND version: 1 updated: 2006/12/14 18:00:21\ndnl ----------------\nAC_DEFUN([CF_WITH_VALGRIND],[\nCF_NO_LEAKS_OPTION(valgrind,\n\t[  --with-valgrind         test: use valgrind],\n\t[USE_VALGRIND])\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_VERSIONED_SYMS version: 10 updated: 2021/01/04 18:48:01\ndnl ----------------------\ndnl Use this when building shared library with ELF, to markup symbols with the\ndnl version identifier from the given input file.  Generally that identifier is\ndnl the same as the SONAME at which the symbol was first introduced.\ndnl\ndnl $1 = basename of the \".map\" file (default $PACKAGE)\nAC_DEFUN([CF_WITH_VERSIONED_SYMS],\n[AC_REQUIRE([AC_PROG_FGREP])dnl\nAC_REQUIRE([AC_PROG_EGREP])dnl\n\nAC_MSG_CHECKING(if versioned-symbols file should be used)\nAC_ARG_WITH(versioned-syms,\n\t[  --with-versioned-syms=X markup versioned symbols using ld],\n\t[with_versioned_syms=$withval],\n\t[with_versioned_syms=no])\ncase \"x$with_versioned_syms\" in\n(xyes)\n\twith_versioned_syms='${top_srcdir}/package/ifelse($1,,${PACKAGE},[$1]).map'\n\tAC_SUBST(PACKAGE)\n\t;;\n(xno)\n\t;;\n(x/*)\n\ttest -f \"$with_versioned_syms\" || AC_MSG_ERROR(expected a filename: $with_versioned_syms)\n\t;;\n(*)\n\ttest -f \"$with_versioned_syms\" || AC_MSG_ERROR(expected a filename: $with_versioned_syms)\n\twith_versioned_syms=`pwd`/\"$with_versioned_syms\"\n\t;;\nesac\nAC_MSG_RESULT($with_versioned_syms)\n\nRESULTING_SYMS=\nVERSIONED_SYMS=\nWILDCARD_SYMS=\n\nif test \"x$with_versioned_syms\" != xno\nthen\n\tRESULTING_SYMS=$with_versioned_syms\n\tcase \"x$MK_SHARED_LIB\" in\n\t(*-Wl,*)\n\t\tVERSIONED_SYMS=\"-Wl,--version-script,\\${RESULTING_SYMS}\"\n\t\tMK_SHARED_LIB=`echo \"$MK_SHARED_LIB\" | sed -e \"s%-Wl,%\\\\[$]{VERSIONED_SYMS} -Wl,%\"`\n\t\tCF_VERBOSE(MK_SHARED_LIB:  $MK_SHARED_LIB)\n\t\t;;\n\t(*-dy\\ *)\n\t\tVERSIONED_SYMS=\"-Wl,-M,\\${RESULTING_SYMS}\"\n\t\tMK_SHARED_LIB=`echo \"$MK_SHARED_LIB\" | sed -e \"s%-dy%\\\\[$]{VERSIONED_SYMS} -dy%\"`\n\t\tCF_VERBOSE(MK_SHARED_LIB:  $MK_SHARED_LIB)\n\t\t;;\n\t(*)\n\t\tAC_MSG_WARN(this system does not support versioned-symbols)\n\t\t;;\n\tesac\n\n\t# Linux ld can selectively override scope, e.g., of symbols beginning with\n\t# \"_\" by first declaring some as global, and then using a wildcard to\n\t# declare the others as local.  Some other loaders cannot do this.  Check\n\t# by constructing a (very) simple shared library and inspecting its\n\t# symbols.\n\tif test \"x$VERSIONED_SYMS\" != \"x\"\n\tthen\n\t\tAC_MSG_CHECKING(if wildcards can be used to selectively omit symbols)\n\t\tWILDCARD_SYMS=no\n\n\t\t# make sources\n\t\trm -f conftest.*\n\n\t\tcat >conftest.ver <<EOF\nmodule_1.0 {\nglobal:\n\tglobalf1;\nlocal:\n\tlocalf1;\n};\nmodule_2.0 {\nglobal:\n\tglobalf2;\nlocal:\n\tlocalf2;\n\t_*;\n} module_1.0;\nsubmodule_1.0 {\nglobal:\n\tsubglobalf1;\n\t_ismissing;\nlocal:\n\tsublocalf1;\n};\nsubmodule_2.0 {\nglobal:\n\tsubglobalf2;\nlocal:\n\tsublocalf2;\n\t_*;\n} submodule_1.0;\nEOF\n\t\tcat >conftest.$ac_ext <<EOF\n#line __oline__ \"configure\"\nint\t_ismissing(void) { return 1; }\nint\t_localf1(void) { return 1; }\nint\t_localf2(void) { return 2; }\nint\tglobalf1(void) { return 1; }\nint\tglobalf2(void) { return 2; }\nint\t_sublocalf1(void) { return 1; }\nint\t_sublocalf2(void) { return 2; }\nint\tsubglobalf1(void) { return 1; }\nint\tsubglobalf2(void) { return 2; }\nEOF\n\t\tcat >conftest.mk <<EOF\nCC=${CC}\nCFLAGS=${CFLAGS}\nCPPFLAGS=${CPPFLAGS}\nLDFLAGS=${LDFLAGS}\nLIBS=${LIBS}\nVERSIONED_SYMS=${VERSIONED_SYMS}\nRESULTING_SYMS=conftest.ver\nMK_SHARED_LIB=${MK_SHARED_LIB}\nconftest.so: conftest.$ac_cv_objext\n\t\t\\$(MK_SHARED_LIB) conftest.$ac_cv_objext\nEOF\n\n\t\t# compile source, make library\n\t\tif make -f conftest.mk 2>&AC_FD_CC >/dev/null\n\t\tthen\n\t\t\t# test for missing symbol in either Data or Text section\n\t\t\tcf_missing=\"`nm -P conftest.so 2>&AC_FD_CC |${FGREP-fgrep} _ismissing | ${EGREP-egrep} '[[ \t]][[DT]][[ \t]]'`\"\n\t\t\ttest -n \"$cf_missing\" && WILDCARD_SYMS=yes\n\t\tfi\n\t\tAC_MSG_RESULT($WILDCARD_SYMS)\n\t\trm -f conftest.*\n\tfi\nfi\nAC_SUBST(RESULTING_SYMS)\nAC_SUBST(VERSIONED_SYMS)\nAC_SUBST(WILDCARD_SYMS)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_WITH_X11_RGB version: 2 updated: 2019/12/31 08:53:54\ndnl ---------------\ndnl Handle configure option \"--with-x11-rgb\", setting these shell\ndnl variables:\ndnl\ndnl $RGB_PATH is the option value, used for finding the X11 rgb file.\ndnl $no_x11_rgb is a \"#\" (comment) if \"--without-x11-rgb\" is given.\ndnl\ndnl Most Linux's use this:\ndnl \t/usr/share/X11/rgb.txt\ndnl Debian uses this:\ndnl \t/etc/X11/rgb.txt\ndnl DragonFlyBSD ports uses this:\ndnl \t/usr/pkg/lib/X11/rgb.txt\ndnl FreeBSD ports use these:\ndnl \t/usr/local/lib/X11/rgb.txt\ndnl \t/usr/local/share/X11/rgb.txt\ndnl Mandriva has these:\ndnl \t/usr/lib/X11/rgb.txt\ndnl \t/usr/lib64/X11/rgb.txt\ndnl NetBSD has these\ndnl \t/usr/X11R7/lib/X11/rgb.txt\ndnl OpenSolaris uses\ndnl \t32-bit:\ndnl \t/usr/X11/etc/X11/rgb.txt\ndnl \t/usr/X11/share/X11/rgb.txt\ndnl \t/usr/X11/lib/X11/rgb.txt\ndnl OSX uses\ndnl\t\t/opt/local/share/X11/rgb.txt (MacPorts)\ndnl\t\t/opt/X11/share/X11/rgb.txt (non-ports)\ndnl\t64-bit:\ndnl \t/usr/X11/etc/X11/rgb.txt\ndnl \t/usr/X11/share/X11/rgb.txt (perhaps)\ndnl \t/usr/X11/lib/amd64/X11/rgb.txt\ndnl Solaris10 uses (in this order):\ndnl \t/usr/openwin/lib/X11/rgb.txt\ndnl \t/usr/X11/lib/X11/rgb.txt\nAC_DEFUN([CF_WITH_X11_RGB],[\nAC_MSG_CHECKING(for X11 rgb file)\nAC_ARG_WITH(x11-rgb,\n\t[  --with-x11-rgb=FILE   file containing X11 rgb information (EPREFIX/lib/X11/rgb.txt)],\n\t[RGB_PATH=$withval],\n\t[RGB_PATH=auto])\n\nif test \"x[$]RGB_PATH\" = xauto\nthen\n\tRGB_PATH='${exec_prefix}/lib/X11/rgb.txt'\n\tfor cf_path in \\\n\t\t/opt/local/share/X11/rgb.txt \\\n\t\t/opt/X11/share/X11/rgb.txt \\\n\t\t/usr/share/X11/rgb.txt \\\n\t\t/usr/X11/share/X11/rgb.txt \\\n\t\t/usr/X11/lib/X11/rgb.txt \\\n\t\t/usr/lib/X11/rgb.txt \\\n\t\t/etc/X11/rgb.txt \\\n\t\t/usr/pkg/lib/X11/rgb.txt \\\n\t\t/usr/X11R7/lib/X11/rgb.txt \\\n\t\t/usr/X11R6/lib/X11/rgb.txt \\\n\t\t/usr/X11R5/lib/X11/rgb.txt \\\n\t\t/usr/X11R4/lib/X11/rgb.txt \\\n\t\t/usr/local/lib/X11/rgb.txt \\\n\t\t/usr/local/share/X11/rgb.txt \\\n\t\t/usr/lib64/X11/rgb.txt\n\tdo\n\t\tif test -f \"$cf_path\" ; then\n\t\t\tRGB_PATH=\"$cf_path\"\n\t\t\tbreak\n\t\tfi\n\tdone\nelse\n\tcf_path=$RGB_PATH\n\tCF_PATH_SYNTAX(cf_path)\nfi\n\nAC_MSG_RESULT($RGB_PATH)\nAC_SUBST(RGB_PATH)\nAC_DEFINE_UNQUOTED(RGB_PATH,\"$cf_path\",[Define to the full pathname of rgb.txt])\n\nno_x11_rgb=\nif test \"$RGB_PATH\" = no\nthen\n\tno_x11_rgb=\"#\"\nfi\nAC_SUBST(no_x11_rgb)\n])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF_XOPEN_SOURCE version: 62 updated: 2022/10/02 19:55:56\ndnl ---------------\ndnl Try to get _XOPEN_SOURCE defined properly that we can use POSIX functions,\ndnl or adapt to the vendor's definitions to get equivalent functionality,\ndnl without losing the common non-POSIX features.\ndnl\ndnl Parameters:\ndnl\t$1 is the nominal value for _XOPEN_SOURCE\ndnl\t$2 is the nominal value for _POSIX_C_SOURCE\nAC_DEFUN([CF_XOPEN_SOURCE],[\nAC_REQUIRE([AC_CANONICAL_HOST])\nAC_REQUIRE([CF_POSIX_VISIBLE])\n\nif test \"$cf_cv_posix_visible\" = no; then\n\ncf_XOPEN_SOURCE=ifelse([$1],,500,[$1])\ncf_POSIX_C_SOURCE=ifelse([$2],,199506L,[$2])\ncf_xopen_source=\n\ncase \"$host_os\" in\n(aix[[4-7]]*)\n\tcf_xopen_source=\"-D_ALL_SOURCE\"\n\t;;\n(msys)\n\tcf_XOPEN_SOURCE=600\n\t;;\n(darwin[[0-8]].*)\n\tcf_xopen_source=\"-D_APPLE_C_SOURCE\"\n\t;;\n(darwin*)\n\tcf_xopen_source=\"-D_DARWIN_C_SOURCE\"\n\tcf_XOPEN_SOURCE=\n\t;;\n(freebsd*|dragonfly*|midnightbsd*)\n\t# 5.x headers associate\n\t#\t_XOPEN_SOURCE=600 with _POSIX_C_SOURCE=200112L\n\t#\t_XOPEN_SOURCE=500 with _POSIX_C_SOURCE=199506L\n\tcf_POSIX_C_SOURCE=200112L\n\tcf_XOPEN_SOURCE=600\n\tcf_xopen_source=\"-D_BSD_TYPES -D__BSD_VISIBLE -D_POSIX_C_SOURCE=$cf_POSIX_C_SOURCE -D_XOPEN_SOURCE=$cf_XOPEN_SOURCE\"\n\t;;\n(hpux11*)\n\tcf_xopen_source=\"-D_HPUX_SOURCE -D_XOPEN_SOURCE=500\"\n\t;;\n(hpux*)\n\tcf_xopen_source=\"-D_HPUX_SOURCE\"\n\t;;\n(irix[[56]].*)\n\tcf_xopen_source=\"-D_SGI_SOURCE\"\n\tcf_XOPEN_SOURCE=\n\t;;\n(linux*gnu|linux*gnuabi64|linux*gnuabin32|linux*gnueabi|linux*gnueabihf|linux*gnux32|uclinux*|gnu*|mint*|k*bsd*-gnu|cygwin)\n\tCF_GNU_SOURCE($cf_XOPEN_SOURCE)\n\t;;\n(minix*)\n\tcf_xopen_source=\"-D_NETBSD_SOURCE\" # POSIX.1-2001 features are ifdef'd with this...\n\t;;\n(mirbsd*)\n\t# setting _XOPEN_SOURCE or _POSIX_SOURCE breaks <sys/select.h> and other headers which use u_int / u_short types\n\tcf_XOPEN_SOURCE=\n\tCF_POSIX_C_SOURCE($cf_POSIX_C_SOURCE)\n\t;;\n(netbsd*)\n\tcf_xopen_source=\"-D_NETBSD_SOURCE\" # setting _XOPEN_SOURCE breaks IPv6 for lynx on NetBSD 1.6, breaks xterm, is not needed for ncursesw\n\t;;\n(openbsd[[6-9]]*)\n\t# OpenBSD 6.x has broken locale support, both compile-time and runtime.\n\t# see https://www.mail-archive.com/bugs@openbsd.org/msg13200.html\n\t# Abusing the conformance level is a workaround.\n\tAC_MSG_WARN(this system does not provide usable locale support)\n\tcf_xopen_source=\"-D_BSD_SOURCE\"\n\tcf_XOPEN_SOURCE=700\n\t;;\n(openbsd[[4-5]]*)\n\t# setting _XOPEN_SOURCE lower than 500 breaks g++ compile with wchar.h, needed for ncursesw\n\tcf_xopen_source=\"-D_BSD_SOURCE\"\n\tcf_XOPEN_SOURCE=600\n\t;;\n(openbsd*)\n\t# setting _XOPEN_SOURCE breaks xterm on OpenBSD 2.8, is not needed for ncursesw\n\t;;\n(osf[[45]]*)\n\tcf_xopen_source=\"-D_OSF_SOURCE\"\n\t;;\n(nto-qnx*)\n\tcf_xopen_source=\"-D_QNX_SOURCE\"\n\t;;\n(sco*)\n\t# setting _XOPEN_SOURCE breaks Lynx on SCO Unix / OpenServer\n\t;;\n(solaris2.*)\n\tcf_xopen_source=\"-D__EXTENSIONS__\"\n\tcf_cv_xopen_source=broken\n\t;;\n(sysv4.2uw2.*) # Novell/SCO UnixWare 2.x (tested on 2.1.2)\n\tcf_XOPEN_SOURCE=\n\tcf_POSIX_C_SOURCE=\n\t;;\n(*)\n\tCF_TRY_XOPEN_SOURCE\n\tcf_save_xopen_cppflags=\"$CPPFLAGS\"\n\tCF_POSIX_C_SOURCE($cf_POSIX_C_SOURCE)\n\t# Some of these niche implementations use copy/paste, double-check...\n\tCF_VERBOSE(checking if _POSIX_C_SOURCE inteferes)\n\tAC_TRY_COMPILE(CF__XOPEN_SOURCE_HEAD,CF__XOPEN_SOURCE_BODY,,[\n\t\tAC_MSG_WARN(_POSIX_C_SOURCE definition is not usable)\n\t\tCPPFLAGS=\"$cf_save_xopen_cppflags\"])\n\t;;\nesac\n\nif test -n \"$cf_xopen_source\" ; then\n\tCF_APPEND_CFLAGS($cf_xopen_source,true)\nfi\n\ndnl In anything but the default case, we may have system-specific setting\ndnl which is still not guaranteed to provide all of the entrypoints that\ndnl _XOPEN_SOURCE would yield.\nif test -n \"$cf_XOPEN_SOURCE\" && test -z \"$cf_cv_xopen_source\" ; then\n\tAC_MSG_CHECKING(if _XOPEN_SOURCE really is set)\n\tAC_TRY_COMPILE([#include <stdlib.h>],[\n#ifndef _XOPEN_SOURCE\nmake an error\n#endif],\n\t[cf_XOPEN_SOURCE_set=yes],\n\t[cf_XOPEN_SOURCE_set=no])\n\tAC_MSG_RESULT($cf_XOPEN_SOURCE_set)\n\tif test \"$cf_XOPEN_SOURCE_set\" = yes\n\tthen\n\t\tAC_TRY_COMPILE([#include <stdlib.h>],[\n#if (_XOPEN_SOURCE - 0) < $cf_XOPEN_SOURCE\nmake an error\n#endif],\n\t\t[cf_XOPEN_SOURCE_set_ok=yes],\n\t\t[cf_XOPEN_SOURCE_set_ok=no])\n\t\tif test \"$cf_XOPEN_SOURCE_set_ok\" = no\n\t\tthen\n\t\t\tAC_MSG_WARN(_XOPEN_SOURCE is lower than requested)\n\t\tfi\n\telse\n\t\tCF_TRY_XOPEN_SOURCE\n\tfi\nfi\nfi # cf_cv_posix_visible\n])\ndnl ---------------------------------------------------------------------------\ndnl CF__SED_TRIMBLANKS version: 1 updated: 2021/01/02 09:31:20\ndnl ------------------\ndnl Trim something using sed, then trim extra whitespace\ndnl $1 = extra parameters, e.g., in CF_STRIP_G_OPT\ndefine([CF__SED_TRIMBLANKS],[sed ifelse($1,,,[$1] )-e 's%[[\t]]% %g' -e 's% [[ ]]*% %g' -e 's%^ %%' -e 's% [$]%%'])dnl\ndnl ---------------------------------------------------------------------------\ndnl CF__XOPEN_SOURCE_BODY version: 1 updated: 2022/09/10 15:17:35\ndnl ---------------------\ndnl body of test when test-compiling for _XOPEN_SOURCE check\ndefine([CF__XOPEN_SOURCE_BODY],\n[\n#ifndef _XOPEN_SOURCE\nmake an error\n#endif\n])\ndnl ---------------------------------------------------------------------------\ndnl CF__XOPEN_SOURCE_HEAD version: 1 updated: 2022/09/10 15:17:03\ndnl ---------------------\ndnl headers to include when test-compiling for _XOPEN_SOURCE check\ndefine([CF__XOPEN_SOURCE_HEAD],\n[\n#include <stdlib.h>\n#include <string.h>\n#include <sys/types.h>\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}