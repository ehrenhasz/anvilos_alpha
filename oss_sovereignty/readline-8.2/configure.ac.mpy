{
  "module_name": "configure.ac",
  "hash_id": "7e2a34a4443c006534b70277370c62374f87bbdac029ce3a12bc262dbd7aabc8",
  "original_prompt": "Ingested from readline-8.2/configure.ac",
  "human_readable_source": "dnl\ndnl Configure script for readline library\ndnl\ndnl report bugs to chet@po.cwru.edu\ndnl\ndnl Process this file with autoconf to produce a configure script.\n\n# Copyright (C) 1987-2022 Free Software Foundation, Inc.\n\n#   This program is free software: you can redistribute it and/or modify\n#   it under the terms of the GNU General Public License as published by\n#   the Free Software Foundation, either version 3 of the License, or\n#   (at your option) any later version.\n\n#   This program is distributed in the hope that it will be useful,\n#   but WITHOUT ANY WARRANTY; without even the implied warranty of\n#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#   GNU General Public License for more details.\n\n#   You should have received a copy of the GNU General Public License\n#   along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nAC_REVISION([for Readline 8.2, version 2.97])\n\nAC_INIT(readline, 8.2, bug-readline@gnu.org)\n\ndnl make sure we are using a recent autoconf version\nAC_PREREQ(2.69)\n\nAC_CONFIG_SRCDIR(readline.h)\nAC_CONFIG_AUX_DIR(./support)\nAC_CONFIG_HEADERS(config.h)\n\ndnl update the value of RL_READLINE_VERSION in readline.h when this changes\nLIBVERSION=8.2\n\nAC_CANONICAL_HOST\nAC_CANONICAL_BUILD\n\ndnl configure defaults\nopt_curses=no\nopt_shared_termcap_lib=no\n\ndnl arguments to configure\nAC_ARG_WITH(curses, AS_HELP_STRING([--with-curses], [use the curses library instead of the termcap library]), opt_curses=$withval)\nAC_ARG_WITH(shared-termcap-library, AS_HELP_STRING([--with-shared-termcap-library], [link the readline shared library against the termcap/curses shared library [[default=NO]]]), opt_shared_termcap_lib=$withval)\n\nif test \"$opt_curses\" = \"yes\"; then\n\tprefer_curses=yes\nfi\n\ndnl option parsing for optional features\nopt_multibyte=yes\nopt_static_libs=yes\nopt_shared_libs=yes\nopt_install_examples=yes\nopt_bracketed_paste_default=yes\n\nAC_ARG_ENABLE(multibyte, AS_HELP_STRING([--enable-multibyte], [enable multibyte characters if OS supports them]), opt_multibyte=$enableval)\nAC_ARG_ENABLE(shared, AS_HELP_STRING([--enable-shared], [build shared libraries [[default=YES]]]), opt_shared_libs=$enableval)\nAC_ARG_ENABLE(static, AS_HELP_STRING([--enable-static], [build static libraries [[default=YES]]]), opt_static_libs=$enableval)\nAC_ARG_ENABLE(install-examples, AS_HELP_STRING([--disable-install-examples], [don't install examples [[default=install]]]), opt_install_examples=$enableval)\n\nAC_ARG_ENABLE(bracketed-paste-default, AS_HELP_STRING([--disable-bracketed-paste-default], [disable bracketed paste by default [[default=enable]]]), opt_bracketed_paste_default=$enableval)\n\nif test $opt_multibyte = no; then\nAC_DEFINE(NO_MULTIBYTE_SUPPORT)\nfi\n\nif test $opt_bracketed_paste_default = yes; then\n\tBRACKETED_PASTE='-DBRACKETED_PASTE_DEFAULT=1'\nelse\n\tBRACKETED_PASTE='-DBRACKETED_PASTE_DEFAULT=0'\nfi\nAC_SUBST(BRACKETED_PASTE)\n\ndnl load up the cross-building cache file -- add more cases and cache\ndnl files as necessary\n\ndnl Note that host and target machine are the same, and different than the\ndnl build machine.\n\nCROSS_COMPILE=\nif test \"x$cross_compiling\" = \"xyes\"; then\n    case \"${host}\" in\n    *-cygwin*)\n        cross_cache=${srcdir}/cross-build/cygwin.cache\n        ;;\n    *-mingw*)\n        cross_cache=${srcdir}/cross-build/mingw.cache\n        ;;\n    i[[3456]]86-*-beos*)\n        cross_cache=${srcdir}/cross-build/x86-beos.cache\n        ;;\n    *)  echo \"configure: cross-compiling for $host is not supported\" >&2\n        ;;\n    esac\n    if test -n \"${cross_cache}\" && test -r \"${cross_cache}\"; then\n        echo \"loading cross-build cache file ${cross_cache}\"\n        . ${cross_cache}\n    fi\n    unset cross_cache\n    CROSS_COMPILE='-DCROSS_COMPILING'\n    AC_SUBST(CROSS_COMPILE)\nfi\n\necho \"\"\necho \"Beginning configuration for readline-$LIBVERSION for ${host_cpu}-${host_vendor}-${host_os}\"\necho \"\"\n\n# We want these before the checks, so the checks can modify their values.\ntest -z \"$CFLAGS\" && want_auto_cflags=1\n\nAC_PROG_MAKE_SET\nAC_PROG_CC\nAC_USE_SYSTEM_EXTENSIONS\n\n# If we're using gcc and the user hasn't specified CFLAGS, add -O2 to CFLAGS\nif test -n \"$want_auto_cflags\" ; then\n\tAUTO_CFLAGS=\"-g ${GCC:+-O2}\"\n\tSTYLE_CFLAGS=\"${GCC:+-Wno-parentheses} ${GCC:+-Wno-format-security} ${GCC:+-Wno-tautological-constant-out-of-range-compare}\"\nfi\n\nAC_PROG_GCC_TRADITIONAL\nAC_PROG_INSTALL\nAC_CHECK_TOOL(AR, ar)\ndnl Set default for ARFLAGS, since autoconf does not have a macro for it.\ndnl This allows people to set it when running configure or make\ntest -n \"$ARFLAGS\" || ARFLAGS=\"cr\"\nAC_PROG_RANLIB\n\nMAKE_SHELL=/bin/sh\nAC_SUBST(MAKE_SHELL)\n\ndnl include files for gettext\n\nm4_include([m4/codeset.m4])\n\nAC_C_CONST\nAC_C_INLINE\nAC_C_PROTOTYPES\nAC_C_CHAR_UNSIGNED\nAC_C_VOLATILE\n\nAC_TYPE_SIZE_T\nAC_CHECK_TYPE(ssize_t, int)\n\nAC_HEADER_STAT\nAC_HEADER_DIRENT\n\nAC_CHECK_FUNCS(fcntl gettimeofday kill lstat pselect readlink select setitimer)\nAC_CHECK_FUNCS(fnmatch memmove putenv setenv setlocale \\\n\t\tstrcasecmp strpbrk sysconf tcgetattr vsnprintf)\nAC_CHECK_FUNCS(isascii isxdigit)\nAC_CHECK_FUNCS(getpwent getpwnam getpwuid)\n\nAC_FUNC_CHOWN\nAC_FUNC_STRCOLL\n\nAC_CHECK_HEADERS(fcntl.h unistd.h stdlib.h varargs.h stdarg.h stdbool.h \\\n\t\tstring.h strings.h \\\n\t\tlimits.h locale.h pwd.h memory.h termcap.h termios.h termio.h)\nAC_CHECK_HEADERS(sys/ioctl.h sys/pte.h sys/stream.h sys/select.h \\\n\t\tsys/time.h sys/file.h)\n\nAC_CHECK_HEADERS(sys/ptem.h,,,\n[[\n#if HAVE_SYS_STREAM_H\n#  include <sys/stream.h>\n#endif\n]])\n\nAC_SYS_LARGEFILE\n\nBASH_SYS_SIGNAL_VINTAGE\nBASH_SYS_REINSTALL_SIGHANDLERS\n\nBASH_FUNC_POSIX_SETJMP\nBASH_FUNC_LSTAT\nBASH_FUNC_STRCOLL\n\nBASH_CHECK_GETPW_FUNCS\n\nAC_HEADER_TIOCGWINSZ\n\nBASH_TYPE_SIG_ATOMIC_T\n\nBASH_HAVE_TIOCSTAT\nBASH_HAVE_FIONREAD\nBASH_CHECK_SPEED_T\nBASH_STRUCT_WINSIZE\nBASH_STRUCT_DIRENT_D_INO\nBASH_STRUCT_DIRENT_D_FILENO\nBASH_STRUCT_TIMEVAL\n\nAC_CHECK_HEADERS(libaudit.h)\nAC_CHECK_DECLS([AUDIT_USER_TTY],,, [[#include <linux/audit.h>]])\n\ndnl yuck\ncase \"$host_os\" in\naix*)   prefer_curses=yes ;;\nesac\nBASH_CHECK_LIB_TERMCAP\nif test \"$TERMCAP_LIB\" = \"./lib/termcap/libtermcap.a\"; then\n\tif test \"$prefer_curses\" = yes; then\n\t\tTERMCAP_LIB=-lcurses\n\telse\n\t\tTERMCAP_LIB=-ltermcap\t#default\n\tfi\nfi\n# Windows ncurses installation\nif test \"$TERMCAP_LIB\" = \"-lncurses\"; then\n\tAC_CHECK_HEADERS(ncurses/termcap.h)\nfi\ncase \"$opt_shared_termcap_lib\" in\n[[Yy]][[Ee]][[Ss]])\tSHARED_TERMCAP=\"$TERMCAP_LIB\" ;;\n-l*)\t\tSHARED_TERMCAP=\"$opt_shared_termcap_lib\" ;;\nesac\n\ncase \"$TERMCAP_LIB\" in\n-ltinfo)  TERMCAP_PKG_CONFIG_LIB=tinfo ;;\n-lcurses) TERMCAP_PKG_CONFIG_LIB=ncurses ;;\n-lncurses) TERMCAP_PKG_CONFIG_LIB=ncurses ;;\n-ltermcap) TERMCAP_PKG_CONFIG_LIB=termcap ;;\n*) TERMCAP_PKG_CONFIG_LIB=termcap ;;\nesac\n\nBASH_CHECK_MULTIBYTE\n\ncase \"$host_cpu\" in\n*cray*)\tLOCAL_CFLAGS=-DCRAY ;;\n*s390*) LOCAL_CFLAGS=-fsigned-char ;;\nesac\n\ncase \"$host_os\" in\nisc*)\tLOCAL_CFLAGS=-Disc386 ;;\nhpux*)\tLOCAL_CFLAGS=\"-DTGETENT_BROKEN -DTGETFLAG_BROKEN\" ;;\nesac\n\n# shared library configuration section\n#\n# Shared object configuration section.  These values are generated by\n# ${srcdir}/support/shobj-conf\n#\nif test -f ${srcdir}/support/shobj-conf; then\n        AC_MSG_CHECKING(configuration for building shared libraries)\n        eval `TERMCAP_LIB=$TERMCAP_LIB ${CONFIG_SHELL-/bin/sh} ${srcdir}/support/shobj-conf -C \"${CC}\" -c ${host_cpu} -o ${host_os} -v ${host_vendor}`\n\n\t# SHARED_TERMCAP is set only if opt_shared_termcap_library is set\n\tcase \"$SHLIB_LIBS\" in\n\t*curses*|*tinfo*)\t;;\n\t*termcap*|*termlib*)\t;;\t# common aliases\n\t*)\t\tSHLIB_LIBS=\"$SHLIB_LIBS $SHARED_TERMCAP\" ;;\n\tesac\n\t\n        AC_SUBST(SHOBJ_CC)\n        AC_SUBST(SHOBJ_CFLAGS)\n        AC_SUBST(SHOBJ_LD)\n        AC_SUBST(SHOBJ_LDFLAGS)\n\tAC_SUBST(SHOBJ_XLDFLAGS)\n        AC_SUBST(SHOBJ_LIBS)\n        AC_SUBST(SHOBJ_STATUS)\n\tAC_SUBST(SHLIB_STATUS)\n\tAC_SUBST(SHLIB_XLDFLAGS)\n\tAC_SUBST(SHLIB_DOT)\n\tAC_SUBST(SHLIB_LIBPREF)\n\tAC_SUBST(SHLIB_LIBSUFF)\n\tAC_SUBST(SHLIB_LIBVERSION)\n\tAC_SUBST(SHLIB_DLLVERSION)\n\tAC_SUBST(SHLIB_LIBS)\n        AC_MSG_RESULT($SHLIB_STATUS)\n\n\t# SHLIB_STATUS is either `supported' or `unsupported'.  If it's\n\t# `unsupported', turn off any default shared library building\n\tif test \"$SHLIB_STATUS\" = 'unsupported'; then\n\t\topt_shared_libs=no\n\tfi\n\n\t# shared library versioning\n\t# quoted for m4 so I can use character classes\n\tSHLIB_MAJOR=[`expr \"$LIBVERSION\" : '\\([0-9]\\)\\..*'`]\n\tSHLIB_MINOR=[`expr \"$LIBVERSION\" : '[0-9]\\.\\([0-9]\\).*'`]\n\tAC_SUBST(SHLIB_MAJOR)\n\tAC_SUBST(SHLIB_MINOR)\nfi\n\nif test \"$opt_static_libs\" = \"yes\"; then\n\tSTATIC_TARGET=static\n\tSTATIC_INSTALL_TARGET=install-static\nfi\nif test \"$opt_shared_libs\" = \"yes\"; then\n\tSHARED_TARGET=shared\n\tSHARED_INSTALL_TARGET=install-shared\nfi\n\nAC_SUBST(STATIC_TARGET)\nAC_SUBST(SHARED_TARGET)\nAC_SUBST(STATIC_INSTALL_TARGET)\nAC_SUBST(SHARED_INSTALL_TARGET)\n\nif test \"$opt_install_examples\" = \"yes\"; then\n\tEXAMPLES_INSTALL_TARGET=install-examples\nfi\nAC_SUBST(EXAMPLES_INSTALL_TARGET)\n\ncase \"$build_os\" in\nmsdosdjgpp*)\tBUILD_DIR=`pwd.exe` ;;\t# to prevent //d/path/file\n*)\t\tBUILD_DIR=`pwd` ;;\nesac\n\ncase \"$BUILD_DIR\" in\n*\\ *)\tBUILD_DIR=`echo \"$BUILD_DIR\" | sed 's: :\\\\\\\\ :g'` ;;\n*)\t;;\nesac\n\nAC_SUBST(BUILD_DIR)\n\n# CFLAGS=${CFLAGS-\"$AUTO_CFLAGS\"}\nif test -n \"$want_auto_cflags\"; then\n\tCFLAGS=\"$AUTO_CFLAGS\"\nfi\nCFLAGS=\"$CFLAGS $STYLE_CFLAGS\"\n\nAC_SUBST(CFLAGS)\nAC_SUBST(LOCAL_CFLAGS)\nAC_SUBST(LOCAL_LDFLAGS)\nAC_SUBST(LOCAL_DEFS)\n\nAC_SUBST(AR)\nAC_SUBST(ARFLAGS)\n\nAC_SUBST(host_cpu)\nAC_SUBST(host_os)\n\nAC_SUBST(LIBVERSION)\n\nAC_SUBST(TERMCAP_LIB)\nAC_SUBST(TERMCAP_PKG_CONFIG_LIB)\n\nAC_CONFIG_FILES([Makefile doc/Makefile examples/Makefile shlib/Makefile readline.pc history.pc])\n\ndnl Makefile uses this timestamp file to record whether config.h is up to date.\nAC_CONFIG_COMMANDS([stamp-h], [echo > stamp-h])\n\nAC_OUTPUT\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}