{
  "module_name": "mkdist",
  "hash_id": "5aeb8874334c01a0341cf5bf885a0fca438f9d69c8cb6a9533fe3e764b899d85",
  "original_prompt": "Ingested from readline-8.2/support/mkdist",
  "human_readable_source": "#! /bin/bash -\n#\n# mkdist - make a distribution directory from a master manifest file\n#\n# usage: mkdist [-m manifest] [-s srcdir] [-r rootname] [-t] [-v] version\n#\n# SRCDIR defaults to src\n# MANIFEST defaults to $SRCDIR/MANIFEST\n#\n# Chet Ramey\n# chet@po.cwru.edu\n\n# Copyright (C) 1996-2002 Free Software Foundation, Inc.\n#\n#   This program is free software: you can redistribute it and/or modify\n#   it under the terms of the GNU General Public License as published by\n#   the Free Software Foundation, either version 3 of the License, or\n#   (at your option) any later version.\n#\n#   This program is distributed in the hope that it will be useful,\n#   but WITHOUT ANY WARRANTY; without even the implied warranty of\n#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#   GNU General Public License for more details.\n#\n#   You should have received a copy of the GNU General Public License\n#   along with this program.  If not, see <http://www.gnu.org/licenses/>.\n#\n\nSRCDIR=src\nROOTNAME=bash\n\nusage()\n{\n\techo usage: mkdist [-m manifest] [-s srcdir] [-r rootname] [-t] [-v] version 1>&2\n\texit 2\n}\n\nvmsg()\n{\n\tif [ -n \"$verbose\" ]; then\n\t\techo mkdist: \"$@\"\n\tfi\n}\n\nwhile getopts m:s:r:tv name\ndo\n\tcase $name in\n\tm)\tMANIFEST=$OPTARG ;;\n\ts)\tSRCDIR=$OPTARG ;;\n\tr)\tROOTNAME=$OPTARG ;;\n\tt)\tmaketar=yes ;;\n\tv)\tverbose=yes ;;\n\t?)\tusage ;;\n\tesac\ndone\n\n: ${MANIFEST:=$SRCDIR/MANIFEST}\n\nvmsg using $MANIFEST\n\nshift $(( $OPTIND - 1 ))\n\nif [ $# -lt 1 ]; then\n\tusage\nfi\n\nversion=$1\nnewdir=${ROOTNAME}-$version\n\ntarfile=${newdir}.tar\n\nvmsg creating distribution for $ROOTNAME version $version in $newdir\n\nif [ ! -d $newdir ]; then\n\tmkdir $newdir || { echo $0: cannot make directory $newdir 1>&2 ; exit 1; }\nfi\n\ndirmode=755\nfilmode=644\n\nwhile read fname type mode rest\ndo\n\t[ -z \"$fname\" ] && continue\n\n\tcase \"$fname\" in\n\t\\#*)\tcontinue ;;\n\tesac\n\n\tcase \"$type\" in\n\td)\tmkdir $newdir/$fname ;;\n\tf)\tcp -p $SRCDIR/$fname $newdir/$fname ;;\n\tF)\tcp $SRCDIR/$fname $newdir/$fname ;;\n\ts)\tln -s $mode $newdir/$fname ; mode= ;;\t\t# symlink\n\tl)\tln $mode $newdir/$fname ; mode= ;;\t\t# hard link\n\tc)\tcp $SRCDIR/$mode $newdir/$fname ; mode=$filmode ;;\t# copy to new name\n\t*)\techo \"unknown file type $type\" 1>&2 ;;\n\tesac\n\n\t# allow trailing comments\n\tcase \"$mode\" in\n\t\\#*)\tmode= ;;\n\tesac\n\n\tif [ -n \"$mode\" ]; then\n\t\tchmod $mode $newdir/$fname\n\telif [ \"$type\" = \"f\" ]; then\n\t\tchmod $filmode $newdir/$fname\n\telif [ \"$type\" = \"d\" ]; then\n\t\tchmod $dirmode $newdir/$fname\n\tfi\n\ndone < $MANIFEST\n\n# cut off the `-alpha' in something like `2.0-alpha', leaving just the\n# numeric version\n#version=${version%%-*}\n\n#case \"$version\" in\n#*.*.*)\tvers=${version%.*} ;;\n#*.*)\tvers=${version} ;;\n#esac\n\n#echo $vers > $newdir/.distribution\n\n#case \"$version\" in\n#*.*.*)\tplevel=${version##*.} ;;\n#*)\tplevel=0 ;;\n#esac\n#[ -z \"$plevel\" ] && plevel=0\n#echo ${plevel} > $newdir/.patchlevel\n\nvmsg $newdir created\n\nif [ -n \"$maketar\" ]; then\n\ttar cf ${tarfile} $newdir\n\tgzip $tarfile\n\tvmsg ${tarfile}.gz created\nfi\n\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}