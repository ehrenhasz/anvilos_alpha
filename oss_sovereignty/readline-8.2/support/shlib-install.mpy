{
  "module_name": "shlib-install",
  "hash_id": "7a62b79e5852369f42696058b6a695cf36f58de0f695c5be03d968f797dbfe78",
  "original_prompt": "Ingested from readline-8.2/support/shlib-install",
  "human_readable_source": "#! /bin/sh\n#\n# shlib-install - install a shared library and do any necessary host-specific\n#\t\t  post-installation configuration (like ldconfig)\n#\n# usage: shlib-install [-D] -O host_os [-V host_vendor] -d installation-dir [-b bin-dir] -i install-prog [-U] library\n#\n# Chet Ramey\n# chet@po.cwru.edu\n\n#\n# defaults\n#\nINSTALLDIR=/usr/local/lib\nLDCONFIG=ldconfig\n\nPROGNAME=`basename $0`\nUSAGE=\"$PROGNAME [-D] -O host_os [-V host_vendor] -d installation-dir [-b bin-dir] -i install-prog [-U] library\"\n\n# process options - should use getopts\n\nwhile [ $# -gt 0 ]; do\n\tcase \"$1\" in\n\t-O)\tshift; host_os=\"$1\"; shift ;;\n\t-V)\tshift; host_vendor=\"$1\"; shift ;;\n\t-d)\tshift; INSTALLDIR=\"$1\"; shift ;;\n\t-b)\tshift; BINDIR=\"$1\" ; shift ;;\n\t-i)\tshift; INSTALLPROG=\"$1\" ; shift ;;\n\t-D)\techo=echo ; shift ;;\n\t-U)\tuninstall=true ; shift ;;\n\t-*)\techo \"$USAGE\" >&2 ; exit 2;;\n\t*)\tbreak ;;\n\tesac\ndone\n\n# set install target name\nLIBNAME=\"$1\"\n\nif [ -z \"$LIBNAME\" ]; then\n\techo \"$USAGE\" >&2\n\texit 2\nfi\n\nOLDSUFF=old\nMV=mv\nRM=\"rm -f\"\nLN=\"ln -s\"\n\n# pre-install\n\nif [ -z \"$uninstall\" ]; then\n\t${echo} $RM ${INSTALLDIR}/${LIBNAME}.${OLDSUFF}\n\tif [ -f \"$INSTALLDIR/$LIBNAME\" ]; then\n\t\t${echo} $MV $INSTALLDIR/$LIBNAME ${INSTALLDIR}/${LIBNAME}.${OLDSUFF}\n\tfi\nfi\n\n# install/uninstall\n\nif [ -z \"$uninstall\" ] ; then\n\t${echo} eval ${INSTALLPROG} $LIBNAME ${INSTALLDIR}/${LIBNAME}\nelse\n\t${echo} ${RM} ${INSTALLDIR}/${LIBNAME}\nfi\n\n# post-install/uninstall\n\n# HP-UX and Darwin/MacOS X require that a shared library have execute permission\n# Linux does, too, and ldd warns about it.  Solaris doesn't seem to mind,\n# but ldd still warns about it.\n# Cygwin installs both a dll (which must go in $BINDIR) and an implicit\n# link library (in $libdir)\ncase \"$host_os\" in\nhpux*|darwin*|macosx*|linux*|solaris2*)\n\tif [ -z \"$uninstall\" ]; then\n\t\tchmod 755 ${INSTALLDIR}/${LIBNAME}\n\tfi ;;\ncygwin*|mingw*)\n\tIMPLIBNAME=`echo ${LIBNAME} \\\n\t\t| sed -e 's,^cyg,lib,' -e 's,[0-9]*.dll$,.dll.a,'`\n\tif [ -z \"$uninstall\" ]; then\n\t\t${echo} $RM ${BINDIR}/${LIBNAME}.${OLDSUFF}\n\t\tif [ -f \"$BINDIR/$LIBNAME\" ]; then\n\t\t\t${echo} $MV $BINDIR/$LIBNAME $BINDIR/$LIBNAME.$OLDSUFF\n\t\tfi\n\t\t${echo} $MV ${INSTALLDIR}/${LIBNAME} ${BINDIR}/${LIBNAME}\n\t\t${echo} chmod a+x ${BINDIR}/${LIBNAME}\n\t\t${echo} eval ${INSTALLPROG} ${LIBNAME}.a \\\n\t\t\t${INSTALLDIR}/${IMPLIBNAME}\n\telse\n\t\t${echo} ${RM} ${BINDIR}/${LIBNAME}\n\t\t${echo} ${RM} ${INSTALLDIR}/${IMPLIBNAME}\n\tfi ;;\n\n*)\t;;\nesac\n\ncase \"$LIBNAME\" in\n*.*.[0-9].[0-9])\t# libname.so.M.N\n\tLINK2=`echo $LIBNAME | sed 's:\\(.*\\..*\\.[0-9]\\)\\.[0-9]:\\1:'`\t# libname.so.M\n\tLINK1=`echo $LIBNAME | sed 's:\\(.*\\..*\\)\\.[0-9]\\.[0-9]:\\1:'`\t# libname.so\n\t;;\n*.*.[0-9])\t\t# libname.so.M\n\tLINK1=`echo $LIBNAME | sed 's:\\(.*\\..*\\)\\.[0-9]:\\1:'`\t\t# libname.so\n\t;;\n*.[0-9])\t\t# libname.M\n\tLINK1=`echo $LIBNAME | sed 's:\\(.*\\)\\.[0-9]:\\1:'`\t\t# libname\n\t;;\n*.[0-9].[0-9].dylib)\t# libname.M.N.dylib\n\tLINK2=`echo $LIBNAME | sed 's:\\(.*\\.[0-9]\\)\\.[0-9]:\\1:'`\t# libname.M.dylib\n\tLINK1=`echo $LIBNAME | sed 's:\\(.*\\)\\.[0-9]\\.[0-9]:\\1:'`\t# libname.dylib\nesac\n\nINSTALL_LINK1='${echo} cd $INSTALLDIR && ${echo} ${LN} $LIBNAME $LINK1'\nINSTALL_LINK2='${echo} cd $INSTALLDIR && ${echo} ${LN} $LIBNAME $LINK2'\n\n#\n# Create symlinks to the installed library.  This section is incomplete.\n#\ncase \"$host_os-$host_vendor\" in\n*linux*|freebsd*|dragonfly*)\n\t# libname.so.M -> libname.so.M.N\n\t${echo} ${RM} ${INSTALLDIR}/$LINK2\n\tif [ -z \"$uninstall\" ]; then\n\t\teval $INSTALL_LINK2\n\tfi\n\n\t# libname.so -> libname.so.M\n\t${echo} ${RM} ${INSTALLDIR}/$LINK1\n\tif [ -z \"$uninstall\" ]; then\n\t\t${echo} cd $INSTALLDIR && ${echo} ${LN} $LINK2 $LINK1\n\tfi\n\t;;\n\nbsdi4*|*gnu*|darwin*|macosx*|netbsd*|mirbsd*)\n\t# libname.so.M -> libname.so.M.N\n\t${echo} ${RM} ${INSTALLDIR}/$LINK2\n\tif [ -z \"$uninstall\" ]; then\n\t\teval $INSTALL_LINK2\n\tfi\n\n\t# libname.so -> libname.so.M.N\n\t${echo} ${RM} ${INSTALLDIR}/$LINK1\n\tif [ -z \"$uninstall\" ]; then\n\t\teval $INSTALL_LINK1\n\tfi\n\t;;\n\nsolaris2*|aix4.[2-9]*|aix[5-9]*|osf*|irix[56]*|sysv[45]*|dgux*|interix*)\n\t# libname.so -> libname.so.M\n\t${echo} ${RM} ${INSTALLDIR}/$LINK1\n\tif [ -z \"$uninstall\" ]; then\n\t\teval $INSTALL_LINK1\n\tfi\n\t;;\n\nhpux1*)\n\t# libname.sl -> libname.M\n\t${echo} ${RM} ${INSTALLDIR}/$LINK1.sl\n\tif [ -z \"$uninstall\" ]; then\n\t\teval $INSTALL_LINK1\n\tfi\n\t;;\n\ncygwin*|mingw*)\n\t# Links to .dlls don't work.  Hence shobj-conf used DLLVERSION.dll\n\t# instead of so.SHLIB_MAJOR.SHLIB_MINOR.  The postinstall above\n\t# took care of everything else.\n\t;;\n\n*)\t;;\nesac\n\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}