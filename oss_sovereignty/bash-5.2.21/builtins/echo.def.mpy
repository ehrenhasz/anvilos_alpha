{
  "module_name": "echo.def",
  "hash_id": "0d33905656a5902bc0f783b8a419b1c52f3e09331b6d367cf076fa0bd8da6a6f",
  "original_prompt": "Ingested from bash-5.2.21/builtins/echo.def",
  "human_readable_source": "This file is echo.def, from which is created echo.c.\nIt implements the builtin \"echo\" in Bash.\n\nCopyright (C) 1987-2018 Free Software Foundation, Inc.\n\nThis file is part of GNU Bash, the Bourne Again SHell.\n\nBash is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nBash is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with Bash.  If not, see <http://www.gnu.org/licenses/>.\n\n$PRODUCES echo.c\n#include <config.h>\n\n#if defined (HAVE_UNISTD_H)\n#  include <unistd.h>\n#endif\n\n#include \"../bashansi.h\"\n\n#include <stdio.h>\n#include \"../shell.h\"\n\n#include \"common.h\"\n\n$BUILTIN echo\n$FUNCTION echo_builtin\n$DEPENDS_ON V9_ECHO\n$SHORT_DOC echo [-neE] [arg ...]\nWrite arguments to the standard output.\n\nDisplay the ARGs, separated by a single space character and followed by a\nnewline, on the standard output.\n\nOptions:\n  -n\tdo not append a newline\n  -e\tenable interpretation of the following backslash escapes\n  -E\texplicitly suppress interpretation of backslash escapes\n\n`echo' interprets the following backslash-escaped characters:\n  \\a\talert (bell)\n  \\b\tbackspace\n  \\c\tsuppress further output\n  \\e\tescape character\n  \\E\tescape character\n  \\f\tform feed\n  \\n\tnew line\n  \\r\tcarriage return\n  \\t\thorizontal tab\n  \\v\tvertical tab\n  \\\\\tbackslash\n  \\0nnn\tthe character whose ASCII code is NNN (octal).  NNN can be\n\t\t0 to 3 octal digits\n  \\xHH\tthe eight-bit character whose value is HH (hexadecimal).  HH\n\t\tcan be one or two hex digits\n  \\uHHHH\tthe Unicode character whose value is the hexadecimal value HHHH.\n\t\tHHHH can be one to four hex digits.\n  \\UHHHHHHHH the Unicode character whose value is the hexadecimal value\n\t\tHHHHHHHH. HHHHHHHH can be one to eight hex digits.\n\nExit Status:\nReturns success unless a write error occurs.\n$END\n\n$BUILTIN echo\n$FUNCTION echo_builtin\n$DEPENDS_ON !V9_ECHO\n$SHORT_DOC echo [-n] [arg ...]\nWrite arguments to the standard output.\n\nDisplay the ARGs on the standard output followed by a newline.\n\nOptions:\n  -n\tdo not append a newline\n\nExit Status:\nReturns success unless a write error occurs.\n$END\n\n#if defined (V9_ECHO)\n#  define VALID_ECHO_OPTIONS \"neE\"\n#else /* !V9_ECHO */\n#  define VALID_ECHO_OPTIONS \"n\"\n#endif /* !V9_ECHO */\n\n/* System V machines already have a /bin/sh with a v9 behaviour.  We\n   give Bash the identical behaviour for these machines so that the\n   existing system shells won't barf.  Regrettably, the SUS v2 has\n   standardized the Sys V echo behavior.  This variable is external\n   so that we can have a `shopt' variable to control it at runtime. */\n#if defined (DEFAULT_ECHO_TO_XPG) || defined (STRICT_POSIX)\nint xpg_echo = 1;\n#else\nint xpg_echo = 0;\n#endif /* DEFAULT_ECHO_TO_XPG */\n\n/* Print the words in LIST to standard output.  If the first word is\n   `-n', then don't print a trailing newline.  We also support the\n   echo syntax from Version 9 Unix systems. */\nint\necho_builtin (list)\n     WORD_LIST *list;\n{\n  int display_return, do_v9, i, len;\n  char *temp, *s;\n\n  do_v9 = xpg_echo;\n  display_return = 1;\n\n  if (posixly_correct && xpg_echo)\n    goto just_echo;\n\n  for (; list && (temp = list->word->word) && *temp == '-'; list = list->next)\n    {\n      /* If it appears that we are handling options, then make sure that\n\t all of the options specified are actually valid.  Otherwise, the\n\t string should just be echoed. */\n      temp++;\n\n      for (i = 0; temp[i]; i++)\n\t{\n\t  if (strchr (VALID_ECHO_OPTIONS, temp[i]) == 0)\n\t    break;\n\t}\n\n      /* echo - and echo -<nonopt> both mean to just echo the arguments. */\n      if (*temp == 0 || temp[i])\n\tbreak;\n\n      /* All of the options in TEMP are valid options to ECHO.\n\t Handle them. */\n      while (i = *temp++)\n\t{\n\t  switch (i)\n\t    {\n\t    case 'n':\n\t      display_return = 0;\n\t      break;\n#if defined (V9_ECHO)\n\t    case 'e':\n\t      do_v9 = 1;\n\t      break;\n\t    case 'E':\n\t      do_v9 = 0;\n\t      break;\n#endif /* V9_ECHO */\n\t    default:\n\t      goto just_echo;\t/* XXX */\n\t    }\n\t}\n    }\n\njust_echo:\n\n  clearerr (stdout);\t/* clear error before writing and testing success */\n\n  while (list)\n    {\n      i = len = 0;\n      temp = do_v9 ? ansicstr (list->word->word, STRLEN (list->word->word), 1, &i, &len)\n\t\t   : list->word->word;\n      if (temp)\n\t{\n\t  if (do_v9)\n\t    {\n\t      for (s = temp; len > 0; len--)\n\t\tputchar (*s++);\n\t    }\n\t  else\t    \n\t    printf (\"%s\", temp);\n#if defined (SunOS5)\n\t  fflush (stdout);\t/* Fix for bug in SunOS 5.5 printf(3) */\n#endif\n\t}\n      QUIT;\n      if (do_v9 && temp)\n\tfree (temp);\n      list = list->next;\n      if (i)\n\t{\n\t  display_return = 0;\n\t  break;\n\t}\n      if (list)\n\tputchar(' ');\n      QUIT;\n    }\n\n  if (display_return)\n    putchar ('\\n');\n\n  return (sh_chkwrite (EXECUTION_SUCCESS));\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}