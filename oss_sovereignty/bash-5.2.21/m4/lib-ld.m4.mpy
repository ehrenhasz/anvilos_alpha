{
  "module_name": "lib-ld.m4",
  "hash_id": "1853227a1333dbe00df777f4a0abd0aa4584e21f72e329b0efa63b2b4a9c19b0",
  "original_prompt": "Ingested from bash-5.2.21/m4/lib-ld.m4",
  "human_readable_source": "# lib-ld.m4 serial 9\ndnl Copyright (C) 1996-2003, 2009-2019 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\n\ndnl Subroutines of libtool.m4,\ndnl with replacements s/_*LT_PATH/AC_LIB_PROG/ and s/lt_/acl_/ to avoid\ndnl collision with libtool.m4.\n\ndnl From libtool-2.4. Sets the variable with_gnu_ld to yes or no.\nAC_DEFUN([AC_LIB_PROG_LD_GNU],\n[AC_CACHE_CHECK([if the linker ($LD) is GNU ld], [acl_cv_prog_gnu_ld],\n[# I'd rather use --version here, but apparently some GNU lds only accept -v.\ncase `$LD -v 2>&1 </dev/null` in\n*GNU* | *'with BFD'*)\n  acl_cv_prog_gnu_ld=yes\n  ;;\n*)\n  acl_cv_prog_gnu_ld=no\n  ;;\nesac])\nwith_gnu_ld=$acl_cv_prog_gnu_ld\n])\n\ndnl From libtool-2.4. Sets the variable LD.\nAC_DEFUN([AC_LIB_PROG_LD],\n[AC_REQUIRE([AC_PROG_CC])dnl\nAC_REQUIRE([AC_CANONICAL_HOST])dnl\n\nAC_ARG_WITH([gnu-ld],\n    [AS_HELP_STRING([--with-gnu-ld],\n        [assume the C compiler uses GNU ld [default=no]])],\n    [test \"$withval\" = no || with_gnu_ld=yes],\n    [with_gnu_ld=no])dnl\n\n# Prepare PATH_SEPARATOR.\n# The user is always right.\nif test \"${PATH_SEPARATOR+set}\" != set; then\n  # Determine PATH_SEPARATOR by trying to find /bin/sh in a PATH which\n  # contains only /bin. Note that ksh looks also at the FPATH variable,\n  # so we have to set that as well for the test.\n  PATH_SEPARATOR=:\n  (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 \\\n    && { (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 \\\n           || PATH_SEPARATOR=';'\n       }\nfi\n\nif test -n \"$LD\"; then\n  AC_MSG_CHECKING([for ld])\nelif test \"$GCC\" = yes; then\n  AC_MSG_CHECKING([for ld used by $CC])\nelif test \"$with_gnu_ld\" = yes; then\n  AC_MSG_CHECKING([for GNU ld])\nelse\n  AC_MSG_CHECKING([for non-GNU ld])\nfi\nif test -n \"$LD\"; then\n  # Let the user override the test with a path.\n  :\nelse\n  AC_CACHE_VAL([acl_cv_path_LD],\n  [\n    acl_cv_path_LD= # Final result of this test\n    ac_prog=ld # Program to search in $PATH\n    if test \"$GCC\" = yes; then\n      # Check if gcc -print-prog-name=ld gives a path.\n      case $host in\n        *-*-mingw*)\n          # gcc leaves a trailing carriage return which upsets mingw\n          acl_output=`($CC -print-prog-name=ld) 2>&5 | tr -d '\\015'` ;;\n        *)\n          acl_output=`($CC -print-prog-name=ld) 2>&5` ;;\n      esac\n      case $acl_output in\n        # Accept absolute paths.\n        [[\\\\/]]* | ?:[[\\\\/]]*)\n          re_direlt='/[[^/]][[^/]]*/\\.\\./'\n          # Canonicalize the pathname of ld\n          acl_output=`echo \"$acl_output\" | sed 's%\\\\\\\\%/%g'`\n          while echo \"$acl_output\" | grep \"$re_direlt\" > /dev/null 2>&1; do\n            acl_output=`echo $acl_output | sed \"s%$re_direlt%/%\"`\n          done\n          # Got the pathname. No search in PATH is needed.\n          acl_cv_path_LD=\"$acl_output\"\n          ac_prog=\n          ;;\n        \"\")\n          # If it fails, then pretend we aren't using GCC.\n          ;;\n        *)\n          # If it is relative, then search for the first ld in PATH.\n          with_gnu_ld=unknown\n          ;;\n      esac\n    fi\n    if test -n \"$ac_prog\"; then\n      # Search for $ac_prog in $PATH.\n      acl_save_ifs=\"$IFS\"; IFS=$PATH_SEPARATOR\n      for ac_dir in $PATH; do\n        IFS=\"$acl_save_ifs\"\n        test -z \"$ac_dir\" && ac_dir=.\n        if test -f \"$ac_dir/$ac_prog\" || test -f \"$ac_dir/$ac_prog$ac_exeext\"; then\n          acl_cv_path_LD=\"$ac_dir/$ac_prog\"\n          # Check to see if the program is GNU ld.  I'd rather use --version,\n          # but apparently some variants of GNU ld only accept -v.\n          # Break only if it was the GNU/non-GNU ld that we prefer.\n          case `\"$acl_cv_path_LD\" -v 2>&1 </dev/null` in\n            *GNU* | *'with BFD'*)\n              test \"$with_gnu_ld\" != no && break\n              ;;\n            *)\n              test \"$with_gnu_ld\" != yes && break\n              ;;\n          esac\n        fi\n      done\n      IFS=\"$acl_save_ifs\"\n    fi\n    case $host in\n      *-*-aix*)\n        AC_COMPILE_IFELSE(\n          [AC_LANG_SOURCE(\n             [[#if defined __powerpc64__ || defined _ARCH_PPC64\n                int ok;\n               #else\n                error fail\n               #endif\n             ]])],\n          [# The compiler produces 64-bit code. Add option '-b64' so that the\n           # linker groks 64-bit object files.\n           case \"$acl_cv_path_LD \" in\n             *\" -b64 \"*) ;;\n             *) acl_cv_path_LD=\"$acl_cv_path_LD -b64\" ;;\n           esac\n          ], [])\n        ;;\n      sparc64-*-netbsd*)\n        AC_COMPILE_IFELSE(\n          [AC_LANG_SOURCE(\n             [[#if defined __sparcv9 || defined __arch64__\n                int ok;\n               #else\n                error fail\n               #endif\n             ]])],\n          [],\n          [# The compiler produces 32-bit code. Add option '-m elf32_sparc'\n           # so that the linker groks 32-bit object files.\n           case \"$acl_cv_path_LD \" in\n             *\" -m elf32_sparc \"*) ;;\n             *) acl_cv_path_LD=\"$acl_cv_path_LD -m elf32_sparc\" ;;\n           esac\n          ])\n        ;;\n    esac\n  ])\n  LD=\"$acl_cv_path_LD\"\nfi\nif test -n \"$LD\"; then\n  AC_MSG_RESULT([$LD])\nelse\n  AC_MSG_RESULT([no])\n  AC_MSG_ERROR([no acceptable ld found in \\$PATH])\nfi\nAC_LIB_PROG_LD_GNU\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}