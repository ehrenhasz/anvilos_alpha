{
  "module_name": "gettext.m4",
  "hash_id": "f79b6f3ecabd76bed503bbf9469350b95a7e93e521b24463f2d15a1959421892",
  "original_prompt": "Ingested from bash-5.2.21/m4/gettext.m4",
  "human_readable_source": "# gettext.m4 serial 69 (gettext-0.19.9)\ndnl Copyright (C) 1995-2014, 2016, 2018-2019, 2021 Free Software Foundation, Inc.\ndnl This file is free software; the Free Software Foundation\ndnl gives unlimited permission to copy and/or distribute it,\ndnl with or without modifications, as long as this notice is preserved.\ndnl\ndnl This file can be used in projects which are not available under\ndnl the GNU General Public License or the GNU Library General Public\ndnl License but which still want to provide support for the GNU gettext\ndnl functionality.\ndnl Please note that the actual code of the GNU gettext library is covered\ndnl by the GNU Library General Public License, and the rest of the GNU\ndnl gettext package is covered by the GNU General Public License.\ndnl They are *not* in the public domain.\n\ndnl Authors:\ndnl   Ulrich Drepper <drepper@cygnus.com>, 1995-2000.\ndnl   Bruno Haible <haible@clisp.cons.org>, 2000-2006, 2008-2010.\ndnl\ndnl Modified for bash use by Chet Ramey <chet.ramey@case.edu>, 2021\n\ndnl Macro to add for using GNU gettext.\n\ndnl Usage: BASH_GNU_GETTEXT([INTLSYMBOL], [NEEDSYMBOL], [INTLDIR]).\ndnl INTLSYMBOL can be one of 'external', 'no-libtool', 'use-libtool'. The\ndnl    default (if it is not specified or empty) is 'no-libtool'.\ndnl    INTLSYMBOL should be 'external' for packages with no intl directory,\ndnl    and 'no-libtool' or 'use-libtool' for packages with an intl directory.\ndnl    If INTLSYMBOL is 'use-libtool', then a libtool library\ndnl    $(top_builddir)/intl/libintl.la will be created (shared and/or static,\ndnl    depending on --{enable,disable}-{shared,static} and on the presence of\ndnl    AM-DISABLE-SHARED). If INTLSYMBOL is 'no-libtool', a static library\ndnl    $(top_builddir)/intl/libintl.a will be created.\ndnl If NEEDSYMBOL is specified and is 'need-ngettext', then GNU gettext\ndnl    implementations (in libc or libintl) without the ngettext() function\ndnl    will be ignored.  If NEEDSYMBOL is specified and is\ndnl    'need-formatstring-macros', then GNU gettext implementations that don't\ndnl    support the ISO C 99 <inttypes.h> formatstring macros will be ignored.\ndnl INTLDIR is used to find the intl libraries.  If empty,\ndnl    the value '$(top_builddir)/intl/' is used.\ndnl\ndnl The result of the configuration is one of three cases:\ndnl 1) GNU gettext, as included in the intl subdirectory, will be compiled\ndnl    and used.\ndnl    Catalog format: GNU --> install in $(datadir)\ndnl    Catalog extension: .mo after installation, .gmo in source tree\ndnl 2) GNU gettext has been found in the system's C library.\ndnl    Catalog format: GNU --> install in $(datadir)\ndnl    Catalog extension: .mo after installation, .gmo in source tree\ndnl 3) No internationalization, always use English msgid.\ndnl    Catalog format: none\ndnl    Catalog extension: none\ndnl If INTLSYMBOL is 'external', only cases 2 and 3 can occur.\ndnl The use of .gmo is historical (it was needed to avoid overwriting the\ndnl GNU format catalogs when building on a platform with an X/Open gettext),\ndnl but we keep it in order not to force irrelevant filename changes on the\ndnl maintainers.\ndnl\nAC_DEFUN([BASH_GNU_GETTEXT],\n[\n  dnl Argument checking.\n  ifelse([$1], [], , [ifelse([$1], [external], , [ifelse([$1], [no-libtool], , [ifelse([$1], [use-libtool], ,\n    [errprint([ERROR: invalid first argument to AM_GNU_GETTEXT\n])])])])])\n  ifelse([$2], [], , [ifelse([$2], [need-ngettext], , [ifelse([$2], [need-formatstring-macros], ,\n    [errprint([ERROR: invalid second argument to AM_GNU_GETTEXT\n])])])])\n  define([gt_included_intl],\n    ifelse([$1], [external],\n      ifdef([AM_GNU_GETTEXT_][INTL_SUBDIR], [yes], [no]),\n      [yes]))\n  define([gt_libtool_suffix_prefix], ifelse([$1], [use-libtool], [l], []))\n  gt_NEEDS_INIT\n  AM_GNU_GETTEXT_NEED([$2])\n\n  AC_REQUIRE([AM_PO_SUBDIRS])dnl\n  ifelse(gt_included_intl, yes, [\n    AC_REQUIRE([AM_INTL_SUBDIR])dnl\n  ])\n\n  dnl Prerequisites of AC_LIB_LINKFLAGS_BODY.\n  AC_REQUIRE([AC_LIB_PREPARE_PREFIX])\n  AC_REQUIRE([AC_LIB_RPATH])\n\n  dnl Sometimes libintl requires libiconv, so first search for libiconv.\n  dnl Ideally we would do this search only after the\n  dnl      if test \"$USE_NLS\" = \"yes\"; then\n  dnl        if { eval \"gt_val=\\$$gt_func_gnugettext_libc\"; test \"$gt_val\" != \"yes\"; }; then\n  dnl tests. But if configure.in invokes AM_ICONV after AM_GNU_GETTEXT\n  dnl the configure script would need to contain the same shell code\n  dnl again, outside any 'if'. There are two solutions:\n  dnl - Invoke AM_ICONV_LINKFLAGS_BODY here, outside any 'if'.\n  dnl - Control the expansions in more detail using AC_PROVIDE_IFELSE.\n  dnl Since AC_PROVIDE_IFELSE is not documented, we avoid it.\n  ifelse(gt_included_intl, yes, , [\n    AC_REQUIRE([AM_ICONV_LINKFLAGS_BODY])\n  ])\n\n  dnl Sometimes, on Mac OS X, libintl requires linking with CoreFoundation.\n  gt_INTL_MACOSX\n\n  dnl Set USE_NLS.\n  AC_REQUIRE([AM_NLS])\n\n  ifelse(gt_included_intl, yes, [\n    BUILD_INCLUDED_LIBINTL=no\n    USE_INCLUDED_LIBINTL=no\n  ])\n  LIBINTL=\n  LTLIBINTL=\n  POSUB=\n\n  dnl Add a version number to the cache macros.\n  case \" $gt_needs \" in\n    *\" need-formatstring-macros \"*) gt_api_version=3 ;;\n    *\" need-ngettext \"*) gt_api_version=2 ;;\n    *) gt_api_version=1 ;;\n  esac\n  gt_func_gnugettext_libc=\"gt_cv_func_gnugettext${gt_api_version}_libc\"\n  gt_func_gnugettext_libintl=\"gt_cv_func_gnugettext${gt_api_version}_libintl\"\n\n  dnl If we use NLS figure out what method\n  if test \"$USE_NLS\" = \"yes\"; then\n    gt_use_preinstalled_gnugettext=no\n    ifelse(gt_included_intl, yes, [\n      AC_MSG_CHECKING([whether included gettext is requested])\n      AC_ARG_WITH([included-gettext],\n        [  --with-included-gettext use the GNU gettext library included here],\n        nls_cv_force_use_gnu_gettext=$withval,\n        nls_cv_force_use_gnu_gettext=no)\n      AC_MSG_RESULT([$nls_cv_force_use_gnu_gettext])\n\n      nls_cv_use_gnu_gettext=\"$nls_cv_force_use_gnu_gettext\"\n      if test \"$nls_cv_force_use_gnu_gettext\" != \"yes\"; then\n    ])\n        dnl User does not insist on using GNU NLS library.  Figure out what\n        dnl to use.  If GNU gettext is available we use this.  Else we have\n        dnl to fall back to GNU NLS library.\n\n        if test $gt_api_version -ge 3; then\n          gt_revision_test_code='\n#ifndef __GNU_GETTEXT_SUPPORTED_REVISION\n#define __GNU_GETTEXT_SUPPORTED_REVISION(major) ((major) == 0 ? 0 : -1)\n#endif\nchangequote(,)dnl\ntypedef int array [2 * (__GNU_GETTEXT_SUPPORTED_REVISION(0) >= 1) - 1];\nchangequote([,])dnl\n'\n        else\n          gt_revision_test_code=\n        fi\n        if test $gt_api_version -ge 2; then\n          gt_expression_test_code=' + * ngettext (\"\", \"\", 0)'\n        else\n          gt_expression_test_code=\n        fi\n\n        AC_CACHE_CHECK([for GNU gettext in libc], [$gt_func_gnugettext_libc],\n         [AC_LINK_IFELSE(\n            [AC_LANG_PROGRAM(\n               [[\n#include <libintl.h>\n#ifndef __GNU_GETTEXT_SUPPORTED_REVISION\nextern int _nl_msg_cat_cntr;\nextern int *_nl_domain_bindings;\n#define __GNU_GETTEXT_SYMBOL_EXPRESSION (_nl_msg_cat_cntr + *_nl_domain_bindings)\n#else\n#define __GNU_GETTEXT_SYMBOL_EXPRESSION 0\n#endif\n$gt_revision_test_code\n               ]],\n               [[\nbindtextdomain (\"\", \"\");\nreturn * gettext (\"\")$gt_expression_test_code + __GNU_GETTEXT_SYMBOL_EXPRESSION\n               ]])],\n            [eval \"$gt_func_gnugettext_libc=yes\"],\n            [eval \"$gt_func_gnugettext_libc=no\"])])\n\n        if { eval \"gt_val=\\$$gt_func_gnugettext_libc\"; test \"$gt_val\" != \"yes\"; }; then\n          dnl Sometimes libintl requires libiconv, so first search for libiconv.\n          ifelse(gt_included_intl, yes, , [\n            AM_ICONV_LINK\n          ])\n          dnl Search for libintl and define LIBINTL, LTLIBINTL and INCINTL\n          dnl accordingly. Don't use AC_LIB_LINKFLAGS_BODY([intl],[iconv])\n          dnl because that would add \"-liconv\" to LIBINTL and LTLIBINTL\n          dnl even if libiconv doesn't exist.\n          AC_LIB_LINKFLAGS_BODY([intl])\n          AC_CACHE_CHECK([for GNU gettext in libintl],\n            [$gt_func_gnugettext_libintl],\n           [gt_save_CPPFLAGS=\"$CPPFLAGS\"\n            CPPFLAGS=\"$CPPFLAGS $INCINTL\"\n            gt_save_LIBS=\"$LIBS\"\n            LIBS=\"$LIBS $LIBINTL\"\n            dnl Now see whether libintl exists and does not depend on libiconv.\n            AC_LINK_IFELSE(\n              [AC_LANG_PROGRAM(\n                 [[\n#include <libintl.h>\n#ifndef __GNU_GETTEXT_SUPPORTED_REVISION\nextern int _nl_msg_cat_cntr;\nextern\n#ifdef __cplusplus\n\"C\"\n#endif\nconst char *_nl_expand_alias (const char *);\n#define __GNU_GETTEXT_SYMBOL_EXPRESSION (_nl_msg_cat_cntr + *_nl_expand_alias (\"\"))\n#else\n#define __GNU_GETTEXT_SYMBOL_EXPRESSION 0\n#endif\n$gt_revision_test_code\n                 ]],\n                 [[\nbindtextdomain (\"\", \"\");\nreturn * gettext (\"\")$gt_expression_test_code + __GNU_GETTEXT_SYMBOL_EXPRESSION\n                 ]])],\n              [eval \"$gt_func_gnugettext_libintl=yes\"],\n              [eval \"$gt_func_gnugettext_libintl=no\"])\n            dnl Now see whether libintl exists and depends on libiconv.\n            if { eval \"gt_val=\\$$gt_func_gnugettext_libintl\"; test \"$gt_val\" != yes; } && test -n \"$LIBICONV\"; then\n              LIBS=\"$LIBS $LIBICONV\"\n              AC_LINK_IFELSE(\n                [AC_LANG_PROGRAM(\n                   [[\n#include <libintl.h>\n#ifndef __GNU_GETTEXT_SUPPORTED_REVISION\nextern int _nl_msg_cat_cntr;\nextern\n#ifdef __cplusplus\n\"C\"\n#endif\nconst char *_nl_expand_alias (const char *);\n#define __GNU_GETTEXT_SYMBOL_EXPRESSION (_nl_msg_cat_cntr + *_nl_expand_alias (\"\"))\n#else\n#define __GNU_GETTEXT_SYMBOL_EXPRESSION 0\n#endif\n$gt_revision_test_code\n                   ]],\n                   [[\nbindtextdomain (\"\", \"\");\nreturn * gettext (\"\")$gt_expression_test_code + __GNU_GETTEXT_SYMBOL_EXPRESSION\n                   ]])],\n                [LIBINTL=\"$LIBINTL $LIBICONV\"\n                 LTLIBINTL=\"$LTLIBINTL $LTLIBICONV\"\n                 eval \"$gt_func_gnugettext_libintl=yes\"\n                ])\n            fi\n            CPPFLAGS=\"$gt_save_CPPFLAGS\"\n            LIBS=\"$gt_save_LIBS\"])\n        fi\n\n        dnl If an already present or preinstalled GNU gettext() is found,\n        dnl use it.  But if this macro is used in GNU gettext, and GNU\n        dnl gettext is already preinstalled in libintl, we update this\n        dnl libintl.  (Cf. the install rule in intl/Makefile.in.)\n        if { eval \"gt_val=\\$$gt_func_gnugettext_libc\"; test \"$gt_val\" = \"yes\"; } \\\n           || { { eval \"gt_val=\\$$gt_func_gnugettext_libintl\"; test \"$gt_val\" = \"yes\"; } \\\n                && test \"$PACKAGE\" != gettext-runtime \\\n                && test \"$PACKAGE\" != gettext-tools; }; then\n          gt_use_preinstalled_gnugettext=yes\n        else\n          dnl Reset the values set by searching for libintl.\n          LIBINTL=\n          LTLIBINTL=\n          INCINTL=\n        fi\n\n    ifelse(gt_included_intl, yes, [\n        if test \"$gt_use_preinstalled_gnugettext\" != \"yes\"; then\n          dnl GNU gettext is not found in the C library.\n          dnl Fall back on included GNU gettext library.\n          nls_cv_use_gnu_gettext=yes\n        fi\n      fi\n\n      if test \"$nls_cv_use_gnu_gettext\" = \"yes\"; then\n        dnl Mark actions used to generate GNU NLS library.\n        BUILD_INCLUDED_LIBINTL=yes\n        USE_INCLUDED_LIBINTL=yes\n        LIBINTL=\"ifelse([$3],[],\\${top_builddir}/intl,[$3])/libintl.[]gt_libtool_suffix_prefix[]a $LIBICONV $LIBTHREAD\"\n        LTLIBINTL=\"ifelse([$3],[],\\${top_builddir}/intl,[$3])/libintl.[]gt_libtool_suffix_prefix[]a $LTLIBICONV $LTLIBTHREAD\"\n        LIBS=`echo \" $LIBS \" | sed -e 's/ -lintl / /' -e 's/^ //' -e 's/ $//'`\n      fi\n\n      CATOBJEXT=\n      if test \"$gt_use_preinstalled_gnugettext\" = \"yes\" \\\n         || test \"$nls_cv_use_gnu_gettext\" = \"yes\"; then\n        dnl Mark actions to use GNU gettext tools.\n        CATOBJEXT=.gmo\n      fi\n    ])\n\n    if test -n \"$INTL_MACOSX_LIBS\"; then\n      if test \"$gt_use_preinstalled_gnugettext\" = \"yes\" \\\n         || test \"$nls_cv_use_gnu_gettext\" = \"yes\"; then\n        dnl Some extra flags are needed during linking.\n        LIBINTL=\"$LIBINTL $INTL_MACOSX_LIBS\"\n        LTLIBINTL=\"$LTLIBINTL $INTL_MACOSX_LIBS\"\n      fi\n    fi\n\n    if test \"$gt_use_preinstalled_gnugettext\" = \"yes\" \\\n       || test \"$nls_cv_use_gnu_gettext\" = \"yes\"; then\n      AC_DEFINE([ENABLE_NLS], [1],\n        [Define to 1 if translation of program messages to the user's native language\n   is requested.])\n    else\n      USE_NLS=no\n    fi\n  fi\n\n  AC_MSG_CHECKING([whether to use NLS])\n  AC_MSG_RESULT([$USE_NLS])\n  if test \"$USE_NLS\" = \"yes\"; then\n    AC_MSG_CHECKING([where the gettext function comes from])\n    if test \"$gt_use_preinstalled_gnugettext\" = \"yes\"; then\n      if { eval \"gt_val=\\$$gt_func_gnugettext_libintl\"; test \"$gt_val\" = \"yes\"; }; then\n        gt_source=\"external libintl\"\n      else\n        gt_source=\"libc\"\n      fi\n    else\n      gt_source=\"included intl directory\"\n    fi\n    AC_MSG_RESULT([$gt_source])\n  fi\n\n  if test \"$USE_NLS\" = \"yes\"; then\n\n    if test \"$gt_use_preinstalled_gnugettext\" = \"yes\"; then\n      if { eval \"gt_val=\\$$gt_func_gnugettext_libintl\"; test \"$gt_val\" = \"yes\"; }; then\n        AC_MSG_CHECKING([how to link with libintl])\n        AC_MSG_RESULT([$LIBINTL])\n        AC_LIB_APPENDTOVAR([CPPFLAGS], [$INCINTL])\n      fi\n\n      dnl For backward compatibility. Some packages may be using this.\n      AC_DEFINE([HAVE_GETTEXT], [1],\n       [Define if the GNU gettext() function is already present or preinstalled.])\n      AC_DEFINE([HAVE_DCGETTEXT], [1],\n       [Define if the GNU dcgettext() function is already present or preinstalled.])\n    fi\n\n    dnl We need to process the po/ directory.\n    POSUB=po\n  fi\n\n  ifelse(gt_included_intl, yes, [\n    dnl If this is used in GNU gettext we have to set BUILD_INCLUDED_LIBINTL\n    dnl to 'yes' because some of the testsuite requires it.\n    if test \"$PACKAGE\" = gettext-runtime || test \"$PACKAGE\" = gettext-tools; then\n      BUILD_INCLUDED_LIBINTL=yes\n    fi\n\n    dnl Make all variables we use known to autoconf.\n    AC_SUBST([BUILD_INCLUDED_LIBINTL])\n    AC_SUBST([USE_INCLUDED_LIBINTL])\n    AC_SUBST([CATOBJEXT])\n\n    dnl For backward compatibility. Some configure.ins may be using this.\n    nls_cv_header_intl=\n    nls_cv_header_libgt=\n\n    dnl For backward compatibility. Some Makefiles may be using this.\n    DATADIRNAME=share\n    AC_SUBST([DATADIRNAME])\n\n    dnl For backward compatibility. Some Makefiles may be using this.\n    INSTOBJEXT=.mo\n    AC_SUBST([INSTOBJEXT])\n\n    dnl For backward compatibility. Some Makefiles may be using this.\n    GENCAT=gencat\n    AC_SUBST([GENCAT])\n\n    dnl For backward compatibility. Some Makefiles may be using this.\n    INTLOBJS=\n    if test \"$USE_INCLUDED_LIBINTL\" = yes; then\n      INTLOBJS=\"\\$(GETTOBJS)\"\n    fi\n    AC_SUBST([INTLOBJS])\n\n    dnl Enable libtool support if the surrounding package wishes it.\n    INTL_LIBTOOL_SUFFIX_PREFIX=gt_libtool_suffix_prefix\n    AC_SUBST([INTL_LIBTOOL_SUFFIX_PREFIX])\n  ])\n\n  dnl For backward compatibility. Some Makefiles may be using this.\n  INTLLIBS=\"$LIBINTL\"\n  AC_SUBST([INTLLIBS])\n\n  dnl Make all documented variables known to autoconf.\n  AC_SUBST([LIBINTL])\n  AC_SUBST([LTLIBINTL])\n  AC_SUBST([POSUB])\n])\n\n\ndnl gt_NEEDS_INIT ensures that the gt_needs variable is initialized.\nm4_define([gt_NEEDS_INIT],\n[\n  m4_divert_text([DEFAULTS], [gt_needs=])\n  m4_define([gt_NEEDS_INIT], [])\n])\n\n\ndnl Usage: AM_GNU_GETTEXT_NEED([NEEDSYMBOL])\nAC_DEFUN([AM_GNU_GETTEXT_NEED],\n[\n  m4_divert_text([INIT_PREPARE], [gt_needs=\"$gt_needs $1\"])\n])\n\n\ndnl Usage: AM_GNU_GETTEXT_VERSION([gettext-version])\nAC_DEFUN([AM_GNU_GETTEXT_VERSION], [])\n\n\ndnl Usage: AM_GNU_GETTEXT_REQUIRE_VERSION([gettext-version])\nAC_DEFUN([AM_GNU_GETTEXT_REQUIRE_VERSION], [])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}