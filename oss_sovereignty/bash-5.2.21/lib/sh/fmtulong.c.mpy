{
  "module_name": "fmtulong.c",
  "hash_id": "5b0da65c5c2bd29763c906a4a99810fa4c84cd729d3168df244b02debbadb4f0",
  "original_prompt": "Ingested from bash-5.2.21/lib/sh/fmtulong.c",
  "human_readable_source": " \n\n \n\n#ifdef HAVE_CONFIG_H\n#  include <config.h>\n#endif\n\n#if defined (HAVE_UNISTD_H)\n#  include <unistd.h>\n#endif\n\n#if defined (HAVE_LIMITS_H)\n#  include <limits.h>\n#endif\n\n#include <bashansi.h>\n#ifdef HAVE_STDDEF_H\n#  include <stddef.h>\n#endif\n\n#ifdef HAVE_STDINT_H\n#  include <stdint.h>\n#endif\n#ifdef HAVE_INTTYPES_H\n#  include <inttypes.h>\n#endif\n#include <chartypes.h>\n#include <errno.h>\n\n#include <bashintl.h>\n\n#include \"stdc.h\"\n\n#include <typemax.h>\n\n#ifndef errno\nextern int errno;\n#endif\n\n#define x_digs  \"0123456789abcdef\"\n#define X_digs  \"0123456789ABCDEF\"\n\n \n#define FMTCHAR(x) \\\n  ((x) < 10) ? (x) + '0' \\\n\t     : (((x) < 36) ? (x) - 10 + 'a' \\\n\t\t\t   : (((x) < 62) ? (x) - 36 + 'A' \\\n\t\t\t\t\t : (((x) == 62) ? '@' : '_')))\n\n#ifndef FL_PREFIX\n#  define FL_PREFIX\t0x01\t \n#  define FL_ADDBASE\t0x02\t \n#  define FL_HEXUPPER\t0x04\t \n#  define FL_UNSIGNED\t0x08\t \n#endif\n\n#ifndef LONG\n#  define LONG\tlong\n#  define UNSIGNED_LONG unsigned long\n#endif\n\n \nchar *\nfmtulong (ui, base, buf, len, flags)\n     UNSIGNED_LONG ui;\n     int base;\n     char *buf;\n     size_t len;\n     int flags;\n{\n  char *p;\n  int sign;\n  LONG si;\n\n  if (base == 0)\n    base = 10;\n\n  if (base < 2 || base > 64)\n    {\n#if 1\n       \n      strncpy (buf, _(\"invalid base\"), len - 1);\n      buf[len-1] = '\\0';\n      errno = EINVAL;\n      return (p = buf);\n#else\n      base = 10;\n#endif\n    }\n\n  sign = 0;\n  if ((flags & FL_UNSIGNED) == 0 && (LONG)ui < 0)\n    {\n      ui = -ui;\n      sign = '-';\n    }\n\n  p = buf + len - 2;\n  p[1] = '\\0';\n\n   \n  switch (base)\n    {\n    case 10:\n      if (ui < 10)\n\t{\n\t  *p-- = TOCHAR (ui);\n\t  break;\n\t}\n       \n      if ((LONG)ui < 0)\n\t{\n\t  *p-- = TOCHAR (ui % 10);\n\t  si = ui / 10;\n\t}\n      else\n        si = ui;\n      do\n\t*p-- = TOCHAR (si % 10);\n      while (si /= 10);\n      break;\n\n    case 8:\n      do\n\t*p-- = TOCHAR (ui & 7);\n      while (ui >>= 3);\n      break;\n\n    case 16:\n      do\n\t*p-- = (flags & FL_HEXUPPER) ? X_digs[ui & 15] : x_digs[ui & 15];\n      while (ui >>= 4);\n      break;\n\n    case 2:\n      do\n\t*p-- = TOCHAR (ui & 1);\n      while (ui >>= 1);\n      break;\n\n    default:\n      do\n\t*p-- = FMTCHAR (ui % base);\n      while (ui /= base);\n      break;\n    }\n\n  if ((flags & FL_PREFIX) && (base == 8 || base == 16))\n    {\n      if (base == 16)\n\t{\n\t  *p-- = (flags & FL_HEXUPPER) ? 'X' : 'x';\n\t  *p-- = '0';\n\t}\n      else if (p[1] != '0')\n\t*p-- = '0';\n    }\n  else if ((flags & FL_ADDBASE) && base != 10)\n    {\n      *p-- = '#';\n      *p-- = TOCHAR (base % 10);\n      if (base > 10)\n        *p-- = TOCHAR (base / 10);\n    }\n\n  if (sign)\n    *p-- = '-';\n\n  return (p + 1);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}