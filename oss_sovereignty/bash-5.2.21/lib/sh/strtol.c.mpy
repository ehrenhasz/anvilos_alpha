{
  "module_name": "strtol.c",
  "hash_id": "466fb341e417f6f48c50f626701ef6de6c757844ff46b32a14727922bb2e8752",
  "original_prompt": "Ingested from bash-5.2.21/lib/sh/strtol.c",
  "human_readable_source": " \n\n \n\n#include <config.h>\n\n#if !HAVE_STRTOL\n\n#include <chartypes.h>\n#include <errno.h>\n\n#ifndef errno\nextern int errno;\n#endif\n\n#ifndef __set_errno\n#  define __set_errno(Val) errno = (Val)\n#endif\n\n#ifdef HAVE_LIMITS_H\n#  include <limits.h>\n#endif\n\n#include <typemax.h>\n\n#include <stdc.h>\n#include <bashansi.h>\n\n#ifndef NULL\n#  define NULL 0\n#endif\n\n \n#ifndef UNSIGNED\n#  define UNSIGNED 0\n#  define INT LONG int\n#else\n#  define INT unsigned LONG int\n#endif\n\n#if UNSIGNED\n#  ifdef QUAD\n#    define strtol strtoull\n#  else\n#    define strtol strtoul\n#  endif\n#else\n#  ifdef QUAD\n#    define strtol strtoll\n#  endif\n#endif\n\n \n\n#ifdef QUAD\n#  define LONG long long\n#  define STRTOL_LONG_MIN LLONG_MIN\n#  define STRTOL_LONG_MAX LLONG_MAX\n#  define STRTOL_ULONG_MAX ULLONG_MAX\n#else\t \n#  define LONG long\n#  define STRTOL_LONG_MIN LONG_MIN\n#  define STRTOL_LONG_MAX LONG_MAX\n#  define STRTOL_ULONG_MAX ULONG_MAX\n#endif\n\n \n\nINT\nstrtol (nptr, endptr, base)\n     const char *nptr;\n     char **endptr;\n     int base;\n{\n  int negative;\n  register unsigned LONG int cutoff;\n  register unsigned int cutlim;\n  register unsigned LONG int i;\n  register const char *s;\n  register unsigned char c;\n  const char *save, *end;\n  int overflow;\n\n  if (base < 0 || base == 1 || base > 36)\n    {\n      __set_errno (EINVAL);\n      return 0;\n    }\n\n  save = s = nptr;\n\n   \n  while (ISSPACE ((unsigned char)*s))\n    ++s;\n  if (*s == '\\0')\n    goto noconv;\n\n   \n  if (*s == '-' || *s == '+')\n    {\n      negative = (*s == '-');\n      ++s;\n    }\n  else\n    negative = 0;\n\n   \n  if (*s == '0')\n    {\n      if ((base == 0 || base == 16) && TOUPPER ((unsigned char) s[1]) == 'X')\n\t{\n\t  s += 2;\n\t  base = 16;\n\t}\n      else if (base == 0)\n\tbase = 8;\n    }\n  else if (base == 0)\n    base = 10;\n\n   \n  save = s;\n\n  end = NULL;\n\n  cutoff = STRTOL_ULONG_MAX / (unsigned LONG int) base;\n  cutlim = STRTOL_ULONG_MAX % (unsigned LONG int) base;\n\n  overflow = 0;\n  i = 0;\n  c = *s;\n  if (sizeof (long int) != sizeof (LONG int))\n    {\n      unsigned long int j = 0;\n      unsigned long int jmax = ULONG_MAX / base;\n\n      for (;c != '\\0'; c = *++s)\n\t{\n\t  if (s == end)\n\t    break;\n\t  if (DIGIT (c))\n\t    c -= '0';\n\t  else if (ISALPHA (c))\n\t    c = TOUPPER (c) - 'A' + 10;\n\t  else\n\t    break;\n\n\t  if ((int) c >= base)\n\t    break;\n\t   \n\t  else if (j >= jmax)\n\t    {\n\t       \n\t      i = (unsigned LONG int) j;\n\t      goto use_long;\n\t    }\n\t  else\n\t    j = j * (unsigned long int) base + c;\n\t}\n\n      i = (unsigned LONG int) j;\n    }\n  else\n    for (;c != '\\0'; c = *++s)\n      {\n\tif (s == end)\n\t  break;\n\tif (DIGIT (c))\n\t  c -= '0';\n\telse if (ISALPHA (c))\n\t  c = TOUPPER (c) - 'A' + 10;\n\telse\n\t  break;\n\tif ((int) c >= base)\n\t  break;\n\t \n\tif (i > cutoff || (i == cutoff && c > cutlim))\n\t  overflow = 1;\n\telse\n\t  {\n\t  use_long:\n\t    i *= (unsigned LONG int) base;\n\t    i += c;\n\t  }\n      }\n\n   \n  if (s == save)\n    goto noconv;\n\n   \n  if (endptr != NULL)\n    *endptr = (char *) s;\n\n#if !UNSIGNED\n   \n  if (overflow == 0\n      && i > (negative\n\t      ? -((unsigned LONG int) (STRTOL_LONG_MIN + 1)) + 1\n\t      : (unsigned LONG int) STRTOL_LONG_MAX))\n    overflow = 1;\n#endif\n\n  if (overflow)\n    {\n      __set_errno (ERANGE);\n#if UNSIGNED\n      return STRTOL_ULONG_MAX;\n#else\n      return negative ? STRTOL_LONG_MIN : STRTOL_LONG_MAX;\n#endif\n    }\n\n   \n  return negative ? -i : i;\n\nnoconv:\n   \n  if (endptr != NULL)\n    {\n      if (save - nptr >= 2 && TOUPPER ((unsigned char) save[-1]) == 'X' && save[-2] == '0')\n\t*endptr = (char *) &save[-1];\n      else\n\t \n\t*endptr = (char *) nptr;\n    }\n\n  return 0L;\n}\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}