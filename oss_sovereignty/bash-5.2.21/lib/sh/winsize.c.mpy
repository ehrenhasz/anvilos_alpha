{
  "module_name": "winsize.c",
  "hash_id": "36cb4ed05b4b30825f9b2e68976dda0146806502d3d6a0d41853ba6807edb513",
  "original_prompt": "Ingested from bash-5.2.21/lib/sh/winsize.c",
  "human_readable_source": " \n\n \n\n#include \"config.h\"\n\n#include <stdc.h>\n\n#include \"bashtypes.h\"\n\n#if defined (HAVE_UNISTD_H)\n#  include <unistd.h>\n#endif\n\n#include <sys/ioctl.h>\n\n \n\n#if 0\n#if defined (GWINSZ_IN_SYS_IOCTL) && !defined (TIOCGWINSZ)\n#  include <sys/ioctl.h>\n#endif  \n#endif\n\n#if defined (STRUCT_WINSIZE_IN_TERMIOS) && !defined (STRUCT_WINSIZE_IN_SYS_IOCTL)\n#  include <termios.h>\n#endif  \n\n \n#if !defined (STRUCT_WINSIZE_IN_TERMIOS) && !defined (STRUCT_WINSIZE_IN_SYS_IOCTL)\n#  if defined (HAVE_SYS_STREAM_H)\n#    include <sys/stream.h>\n#  endif  \n#  if defined (HAVE_SYS_PTEM_H)  \n#    include <sys/ptem.h>\n#    define _IO_PTEM_H           \n#  endif  \n#  if defined (HAVE_SYS_PTE_H)   \n#    include <sys/pte.h>\n#  endif  \n#endif  \n\n#include <stdio.h>\n\n \n#define input_tty() (shell_tty != -1) ? shell_tty : fileno (stderr)\n\n#if !defined (errno)\nextern int errno;\n#endif  \n\nextern int shell_tty;\n\n#if defined (READLINE)\n \nextern int interactive_shell;\nextern int no_line_editing;\nextern int bash_readline_initialized;\nextern void rl_set_screen_size PARAMS((int, int));\n#endif\nextern void sh_set_lines_and_columns PARAMS((int, int));\n\nvoid\nget_new_window_size (from_sig, rp, cp)\n     int from_sig;\n     int *rp, *cp;\n{\n#if defined (TIOCGWINSZ)\n  struct winsize win;\n  int tty;\n\n  tty = input_tty ();\n  if (tty >= 0 && (ioctl (tty, TIOCGWINSZ, &win) == 0) &&\n      win.ws_row > 0 && win.ws_col > 0)\n    {\n      sh_set_lines_and_columns (win.ws_row, win.ws_col);\n#if defined (READLINE)\n      if ((interactive_shell && no_line_editing == 0) || bash_readline_initialized)\n\trl_set_screen_size (win.ws_row, win.ws_col);\n#endif\n      if (rp)\n\t*rp = win.ws_row;\n      if (cp)\n\t*cp = win.ws_col;\n    }\n#endif\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}