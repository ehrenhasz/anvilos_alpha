{
  "module_name": "ufuncs.c",
  "hash_id": "6ff69b6ff1932859b4ba0e11fcac0b3a925857a17e50e9e2365b94027d634aea",
  "original_prompt": "Ingested from bash-5.2.21/lib/sh/ufuncs.c",
  "human_readable_source": " \n\n \n\n#include \"config.h\"\n\n#include \"bashtypes.h\"\n\n#include \"posixtime.h\"\n\n#if defined (HAVE_UNISTD_H)\n#include <unistd.h>\n#endif\n\n#include <errno.h>\n#if !defined (errno)\nextern int errno;\n#endif  \n\n#if defined (HAVE_SELECT)\n#  include \"posixselect.h\"\n#  include \"quit.h\"\n#  include \"trap.h\"\n#  include \"stat-time.h\"\n#endif\n\n \n\n#if defined (HAVE_SETITIMER)\nunsigned int\nfalarm(secs, usecs)\n     unsigned int secs, usecs;\n{\n  struct itimerval it, oit;\n\n  it.it_interval.tv_sec = 0;\n  it.it_interval.tv_usec = 0;\n\n  it.it_value.tv_sec = secs;\n  it.it_value.tv_usec = usecs;\n\n  if (setitimer(ITIMER_REAL, &it, &oit) < 0)\n    return (-1);\t\t \n\n   \n  if (oit.it_value.tv_usec)\n    oit.it_value.tv_sec++;\n  return (oit.it_value.tv_sec);\n}\n#else\nint\nfalarm (secs, usecs)\n     unsigned int secs, usecs;\n{\n  if (secs == 0 && usecs == 0)\n    return (alarm (0));\n\n  if (secs == 0 || usecs >= 500000)\n    {\n      secs++;\n      usecs = 0;\n    }\n  return (alarm (secs));\n}\n#endif  \n\n \n\n#if defined (HAVE_TIMEVAL) && (defined (HAVE_SELECT) || defined (HAVE_PSELECT))\nint\nfsleep(sec, usec)\n     unsigned int sec, usec;\n{\n  int e, r;\n  sigset_t blocked_sigs, prevmask;\n#if defined (HAVE_PSELECT)\n  struct timespec ts;\n#else\n  struct timeval tv;\n#endif\n\n  sigemptyset (&blocked_sigs);\n#  if defined (SIGCHLD)\n  sigaddset (&blocked_sigs, SIGCHLD);\n#  endif\n\n#if defined (HAVE_PSELECT)\n  ts.tv_sec = sec;\n  ts.tv_nsec = usec * 1000;\n#else\n  sigemptyset (&prevmask);\n  tv.tv_sec = sec;\n  tv.tv_usec = usec;\n#endif  \n\n  do\n    {\n#if defined (HAVE_PSELECT)\n      r = pselect(0, (fd_set *)0, (fd_set *)0, (fd_set *)0, &ts, &blocked_sigs);\n#else\n      sigprocmask (SIG_SETMASK, &blocked_sigs, &prevmask);\n      r = select(0, (fd_set *)0, (fd_set *)0, (fd_set *)0, &tv);\n      sigprocmask (SIG_SETMASK, &prevmask, NULL);\n#endif\n      e = errno;\n      if (r < 0 && errno == EINTR)\n\treturn -1;\t\t \n      errno = e;\n    }\n  while (r < 0 && errno == EINTR);\n\n  return r;\n}\n#else  \nint\nfsleep(sec, usec)\n     long sec, usec;\n{\n  if (usec >= 500000)\t \n   sec++;\n  return (sleep(sec));\n}\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}