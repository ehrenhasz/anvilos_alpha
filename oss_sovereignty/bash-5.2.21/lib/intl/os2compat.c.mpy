{
  "module_name": "os2compat.c",
  "hash_id": "57dfcfb99efce4afd3ee587b305111e01ac5d7387c491ffb2280aeae67703b2c",
  "original_prompt": "Ingested from bash-5.2.21/lib/intl/os2compat.c",
  "human_readable_source": " \n\n \n\n#define OS2_AWARE\n#ifdef HAVE_CONFIG_H\n#include <config.h>\n#endif\n\n#include <stdlib.h>\n#include <string.h>\n#include <sys/param.h>\n\n \nextern unsigned long DosScanEnv (const unsigned char *pszName, unsigned char **ppszValue);\n\nchar *\n_nl_getenv (const char *name)\n{\n  unsigned char *value;\n  if (DosScanEnv (name, &value))\n    return NULL;\n  else\n    return value;\n}\n\n \nchar libintl_nl_default_dirname[MAXPATHLEN+1];\n\nchar *_nlos2_libdir = NULL;\nchar *_nlos2_localealiaspath = NULL;\nchar *_nlos2_localedir = NULL;\n\nstatic __attribute__((constructor)) void\nnlos2_initialize ()\n{\n  char *root = getenv (\"UNIXROOT\");\n  char *gnulocaledir = getenv (\"GNULOCALEDIR\");\n\n  _nlos2_libdir = gnulocaledir;\n  if (!_nlos2_libdir)\n    {\n      if (root)\n        {\n          size_t sl = strlen (root);\n          _nlos2_libdir = (char *) malloc (sl + strlen (LIBDIR) + 1);\n          memcpy (_nlos2_libdir, root, sl);\n          memcpy (_nlos2_libdir + sl, LIBDIR, strlen (LIBDIR) + 1);\n        }\n      else\n        _nlos2_libdir = LIBDIR;\n    }\n\n  _nlos2_localealiaspath = gnulocaledir;\n  if (!_nlos2_localealiaspath)\n    {\n      if (root)\n        {\n          size_t sl = strlen (root);\n          _nlos2_localealiaspath = (char *) malloc (sl + strlen (LOCALE_ALIAS_PATH) + 1);\n          memcpy (_nlos2_localealiaspath, root, sl);\n          memcpy (_nlos2_localealiaspath + sl, LOCALE_ALIAS_PATH, strlen (LOCALE_ALIAS_PATH) + 1);\n        }\n     else\n        _nlos2_localealiaspath = LOCALE_ALIAS_PATH;\n    }\n\n  _nlos2_localedir = gnulocaledir;\n  if (!_nlos2_localedir)\n    {\n      if (root)\n        {\n          size_t sl = strlen (root);\n          _nlos2_localedir = (char *) malloc (sl + strlen (LOCALEDIR) + 1);\n          memcpy (_nlos2_localedir, root, sl);\n          memcpy (_nlos2_localedir + sl, LOCALEDIR, strlen (LOCALEDIR) + 1);\n        }\n      else\n        _nlos2_localedir = LOCALEDIR;\n    }\n\n  if (strlen (_nlos2_localedir) <= MAXPATHLEN)\n    strcpy (libintl_nl_default_dirname, _nlos2_localedir);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}