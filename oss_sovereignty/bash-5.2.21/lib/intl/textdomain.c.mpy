{
  "module_name": "textdomain.c",
  "hash_id": "23f476236c9c9494d8ce390f4b065e44f3a62ae6f076057f7ad8b724c4aa64cb",
  "original_prompt": "Ingested from bash-5.2.21/lib/intl/textdomain.c",
  "human_readable_source": " \n\n \n\n#ifdef HAVE_CONFIG_H\n# include <config.h>\n#endif\n\n#include <stdlib.h>\n#include <string.h>\n\n#ifdef _LIBC\n# include <libintl.h>\n#else\n# include \"libgnuintl.h\"\n#endif\n#include \"gettextP.h\"\n\n#ifdef _LIBC\n \n# include <bits/libc-lock.h>\n#else\n \n# define __libc_rwlock_define(CLASS, NAME)\n# define __libc_rwlock_wrlock(NAME)\n# define __libc_rwlock_unlock(NAME)\n#endif\n\n \n#if !defined _LIBC\n# define _nl_default_default_domain libintl_nl_default_default_domain\n# define _nl_current_default_domain libintl_nl_current_default_domain\n#endif\n\n \n\n \nextern const char _nl_default_default_domain[] attribute_hidden;\n\n \nextern const char *_nl_current_default_domain attribute_hidden;\n\n\n \n#ifdef _LIBC\n# define TEXTDOMAIN __textdomain\n# ifndef strdup\n#  define strdup(str) __strdup (str)\n# endif\n#else\n# define TEXTDOMAIN libintl_textdomain\n#endif\n\n \n__libc_rwlock_define (extern, _nl_state_lock attribute_hidden)\n\n \nchar *\nTEXTDOMAIN (domainname)\n     const char *domainname;\n{\n  char *new_domain;\n  char *old_domain;\n\n   \n  if (domainname == NULL)\n    return (char *) _nl_current_default_domain;\n\n  __libc_rwlock_wrlock (_nl_state_lock);\n\n  old_domain = (char *) _nl_current_default_domain;\n\n   \n  if (domainname[0] == '\\0'\n      || strcmp (domainname, _nl_default_default_domain) == 0)\n    {\n      _nl_current_default_domain = _nl_default_default_domain;\n      new_domain = (char *) _nl_current_default_domain;\n    }\n  else if (strcmp (domainname, old_domain) == 0)\n     \n    new_domain = old_domain;\n  else\n    {\n       \n#if defined _LIBC || defined HAVE_STRDUP\n      new_domain = strdup (domainname);\n#else\n      size_t len = strlen (domainname) + 1;\n      new_domain = (char *) malloc (len);\n      if (new_domain != NULL)\n\tmemcpy (new_domain, domainname, len);\n#endif\n\n      if (new_domain != NULL)\n\t_nl_current_default_domain = new_domain;\n    }\n\n   \n  if (new_domain != NULL)\n    {\n      ++_nl_msg_cat_cntr;\n\n      if (old_domain != new_domain && old_domain != _nl_default_default_domain)\n\tfree (old_domain);\n    }\n\n  __libc_rwlock_unlock (_nl_state_lock);\n\n  return new_domain;\n}\n\n#ifdef _LIBC\n \nweak_alias (__textdomain, textdomain);\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}