{
  "module_name": "x386-alloca.s",
  "hash_id": "645a6a188b7c31f8c1854c3815ec1d41cd1ad5d9d6c0a5185d915fdaa65d6bf5",
  "original_prompt": "Ingested from bash-5.2.21/lib/malloc/x386-alloca.s",
  "human_readable_source": ";; alloca386.s 1.2\n;; GNU-compatible stack allocation function for Xenix/386.\n;; Written by Chip Salzenberg at ComDev.\n;; Last modified 90/01/11\n;;> Is your alloca clearly better than the one in i386-alloca.s?  I haven't\n;;> looked at either.\n;;\n;;They're different because Xenix/386 has a different assembler.  SCO\n;;Xenix has the Microsoft C compiler and the Microsoft macro assembler,\n;;called \"masm\".  MASM's assembler syntax is quite different from AT&T's\n;;in all sorts of ways.  Xenix people can't use the AT&T version.\n;;-- \n;;Chip Salzenberg at ComDev/TCT     <chip@tct.uucp>, <uunet!ateng!tct!chip>\n\n\tTITLE   $alloca386\n\n\t.386\nDGROUP\tGROUP\tCONST, _BSS, _DATA\n_DATA\tSEGMENT  DWORD USE32 PUBLIC 'DATA'\n_DATA      ENDS\n_BSS\tSEGMENT  DWORD USE32 PUBLIC 'BSS'\n_BSS      ENDS\nCONST\tSEGMENT  DWORD USE32 PUBLIC 'CONST'\nCONST      ENDS\n_TEXT\tSEGMENT  DWORD USE32 PUBLIC 'CODE'\n\tASSUME   CS: _TEXT, DS: DGROUP, SS: DGROUP, ES: DGROUP\n\n\tPUBLIC  _alloca\n_alloca PROC NEAR\n\n; Get argument.\n\tpop     edx             ; edx -> return address\n\tpop     eax             ; eax = amount to allocate\n\n; Validate allocation amount.\n\tadd     eax,3\n\tand     eax,not 3\n\tcmp     eax,0\n\tjg      aa_size_ok\n\tmov     eax,4\naa_size_ok:\n\n; Allocate stack space.\n\tmov     ecx,esp         ; ecx -> old stack pointer\n\tsub     esp,eax         ; perform allocation\n\tmov     eax,esp         ; eax -> new stack pointer\n\n; Copy the three saved register variables from old stack top to new stack top.\n; They may not be there.  So we waste twelve bytes.  Big fat hairy deal.\n\tpush    DWORD PTR 8[ecx]\n\tpush    DWORD PTR 4[ecx]\n\tpush    DWORD PTR 0[ecx]\n\n; Push something so the caller can pop it off.\n\tpush    eax\n\n; Return to caller.\n\tjmp     edx\n\n_alloca ENDP\n\n_TEXT   ENDS\n\tEND\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}