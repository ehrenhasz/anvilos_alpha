{
  "module_name": "fixlinks",
  "hash_id": "0096f778a58403e5f986728ab5368a078300c692b588c3536c6aada12e5c7255",
  "original_prompt": "Ingested from bash-5.2.21/support/fixlinks",
  "human_readable_source": "#! /bin/sh\n#\n# fixlinks - make symlinks in the bash source tree so that there is\n#\t     exactly one version of any given source file.\n#\n# Copyright (C) 1996-2002 Free Software Foundation, Inc.\n#\n#   This program is free software: you can redistribute it and/or modify\n#   it under the terms of the GNU General Public License as published by\n#   the Free Software Foundation, either version 3 of the License, or\n#   (at your option) any later version.\n#\n#   This program is distributed in the hope that it will be useful,\n#   but WITHOUT ANY WARRANTY; without even the implied warranty of\n#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#   GNU General Public License for more details.\n#\n#   You should have received a copy of the GNU General Public License\n#   along with this program.  If not, see <http://www.gnu.org/licenses/>.\n#\n\nSRCDIR=.\nwhile [ $# -gt 0 ]; do\n\tcase \"$1\" in\n\t-s)\tshift; SRCDIR=$1 ;;\n\t-u)\tunfix=yes ;;\n\t-h)\thardlinks=yes ;;\n\t-*)\techo \"$0: $1: bad option\" 1>&2\n\t\techo \"$0: usage: $0 [-hu] [-s srcdir] [linkmap]\" 1>&2\n\t\texit 1;;\n\t*)\tbreak ;;\n\tesac\n\tshift\ndone\n\nif [ ! -d $SRCDIR/builtins ]; then\n\techo \"$0: must be run with valid -s argument or from source directory\" 1>&2\n\texit 1\nfi\n\nif [ $# -eq 0 ]; then\n\tlinkfile=$SRCDIR/support/SYMLINKS\nelse\n\tlinkfile=$1\t\nfi\n\nif [ ! -f \"$linkfile\" ]; then\n\techo \"$0: symlink map file \\`$linkfile' does not exist\"\n\texit 1\nfi\n\nrm_ltmp=false\nLINKTEMP=`mktemp -t linktmp.XXXXXXXX 2>/dev/null`\nif [ -z \"$LINKTEMP\" ]; then\n\t: ${TMPDIR:=/tmp}\n\tLINKTEMP=${TMPDIR}/linktmp.$$\n\trm_ltmp=true\nfi\n\n$rm_ltmp && rm -f ${LINKTEMP}\n# if the user specified hard links, then do that.  otherwise, try to use\n# symlinks if they're present\nif [ -n \"$hardlinks\" ]; then\n\tLN=ln\nelif (ln -s /dev/null ${LINKTEMP}) >/dev/null 2>&1; then\n\tLN=\"ln -s\"\nelse\n\tLN=ln\nfi\nrm -f ${LINKTEMP}\n\nwhile read name target\ndo\n\tcase \"$name\" in\n\t\\#*)\tcontinue;;\n\tesac\n\n\trm -f $name\n\tcase \"$unfix\" in\n\tyes)\tdirname=`expr \"$name\" ':' '^\\(.*\\)/[^/]*'`\n\t\t[ -z \"$dirname\" ] && dirname=.\n\t\tcp $dirname/$target $name\n\t\techo $target copied to $name ;;\n\t*)\t$LN $target $name ; echo \"$name -> $target\" ;;\n\tesac\n\ndone < $linkfile\n\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}