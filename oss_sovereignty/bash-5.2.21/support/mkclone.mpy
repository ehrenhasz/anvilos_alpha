{
  "module_name": "mkclone",
  "hash_id": "462de7020cb3577cf483b60e787c21e4b98d5d99f53a2a1d9ccd4bf68c7177e4",
  "original_prompt": "Ingested from bash-5.2.21/support/mkclone",
  "human_readable_source": "#! /bin/bash\n#\n# mkclone - symlink every file appearing in $src/MANIFEST to a corresponding\n#\t    file in the target directory ($1).  Directories specified in\n#\t    MANIFEST are created in the target directory\n#\n# Copyright (C) 1996-2002 Free Software Foundation, Inc.\n#\n#   This program is free software: you can redistribute it and/or modify\n#   it under the terms of the GNU General Public License as published by\n#   the Free Software Foundation, either version 3 of the License, or\n#   (at your option) any later version.\n#\n#   This program is distributed in the hope that it will be useful,\n#   but WITHOUT ANY WARRANTY; without even the implied warranty of\n#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#   GNU General Public License for more details.\n#\n#   You should have received a copy of the GNU General Public License\n#   along with this program.  If not, see <http://www.gnu.org/licenses/>.\n#\nprog=`basename $0`\n\nSRCDIR=src\n\nUSAGE=\"usage: $prog [-m manifest] [-s srcdir] [-v] [-d] [-h] target\"\nwhile getopts dhm:s:v opt\ndo\n\tcase \"$opt\" in\n\tm)\tMANIFEST=$OPTARG ;;\n\ts)\tSRCDIR=$OPTARG ;;\n\tv)\tverbose=y ;;\n\td)\tECHO=echo debug=y ;;\n\th)\thardlinks=y ;;\n\t?)\techo $USAGE >&2\n\t\texit 2;;\n\tesac\ndone\n\n: ${MANIFEST:=${SRCDIR}/MANIFEST}\n\n[ -n \"$debug\" ] && verbose=\n\nshift $(( $OPTIND - 1 ))\n\nif [ $# -lt 1 ]; then\n\techo $USAGE >&2\n        exit 2\nfi\n\nif [ ! -f $MANIFEST ]; then\n\techo \"$prog: $MANIFEST: no such file or directory\" >&2\n\techo \"$prog: must be run with valid -s argument or from source directory\" >&2\n\texit 1\nfi\n\nrm_ltmp=false\nLINKTEMP=`mktemp -t linktmp.XXXXXXXX 2>/dev/null`\nif [ -z \"$LINKTEMP\" ]; then\n\t: ${TMPDIR:=/tmp}\n\tLINKTEMP=${TMPDIR}/linktmp.$$\n\trm_ltmp=true\nfi\n\n$rm_ltmp && rm -f ${LINKTEMP}\n# if the user specified hard links, then do that.  otherwise, try to use\n# symlinks if they're present\nif [ -n \"$hardlinks\" ]; then\n\tLN=ln\nelif (ln -s /dev/null ${LINKTEMP}) >/dev/null 2>&1; then\n\tLN=\"ln -s\"\nelse\n\tLN=ln\nfi\nrm -f ${LINKTEMP}\n\nTARGET=$1\n\nif [ ! -d \"$TARGET\" ]; then\n\tmkdir \"$TARGET\"\nfi\n\necho \"${prog}: creating clone of bash source tree (from $SRCDIR) in $TARGET\"\n\ncd \"$TARGET\" || { echo \"${prog}: cannot cd to $TARGET\" >&2 ; exit 1; }\n\nwhile read fname type mode\ndo\n\t[ -z \"$fname\" ] && continue\n\n\tcase \"$fname\" in\n\t\\#*)\tcontinue ;;\n\tesac\n\n\tcase \"$type\" in\n\td)\t[ -n \"$verbose\" ] && echo mkdir $fname\n\t\t$ECHO mkdir $fname ;;\t\t# already in $TARGET\n\tf)\tfn=${fname##*/}\n\t\tcase \"$fname\" in\n\t\t*/*)\tdn=${fname%/*} ;;\n\t\t*)\tdn=. ;;\n\t\tesac\n\t\tif [ -n \"$verbose\" ] || [ -n \"$debug\" ]; then\n\t\t\techo \"( cd $dn && $LN $SRCDIR/$fname $fn )\"\n\t\tfi\n\t\t[ -z \"$debug\" ] && ( cd $dn && $LN $SRCDIR/$fname $fn )\n\t\t;;\n\t*)\techo \"${prog}: ${fname}: unknown file type $type\" 1>&2 ;;\n\tesac\ndone < $MANIFEST\n\n# special\nSPECIAL=\"parser-built y.tab.c y.tab.h\"\n\nrm -f $SPECIAL\nfor sf in $SPECIAL\ndo\n\t[ -n \"$verbose\" ] && echo cp -p $SRCDIR/$sf $TARGET\n\t$ECHO cp -p $SRCDIR/$sf $TARGET\ndone\n\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}