{
  "module_name": "rlvers.sh",
  "hash_id": "6d56fca71d72efc861b959ace3900d6a6c0d0e56679ae36308ceed95fa666687",
  "original_prompt": "Ingested from bash-5.2.21/support/rlvers.sh",
  "human_readable_source": "#! /bin/sh\n#\n# rlvers.sh -- run a program that prints out the readline version number\n#\t       using locally-installed readline libraries\n#\n\n# Copyright (C) 1996-2002 Free Software Foundation, Inc.\n#\n#   This program is free software: you can redistribute it and/or modify\n#   it under the terms of the GNU General Public License as published by\n#   the Free Software Foundation, either version 3 of the License, or\n#   (at your option) any later version.\n#\n#   This program is distributed in the hope that it will be useful,\n#   but WITHOUT ANY WARRANTY; without even the implied warranty of\n#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#   GNU General Public License for more details.\n#\n#   You should have received a copy of the GNU General Public License\n#   along with this program.  If not, see <http://www.gnu.org/licenses/>.\n#\n\nPROGNAME=`basename $0`\n\n: ${TMPDIR:=/tmp}\nTDIR=$TMPDIR/rlvers\n\n# defaults\nCC=cc\nRL_LIBDIR=/usr/local/lib\nRL_INCDIR=/usr/local/include\n\nTERMCAP_LIB=\"-ltermcap\"\n\n# cannot rely on the presence of getopts\nwhile [ $# -gt 0 ]; do\n\tcase \"$1\" in\n\t-C)\tshift ; CC=\"$1\"; shift ;;\n\t-I)\tshift ; RL_INCDIR=\"$1\" ; shift ;;\n\t-L)\tshift ; RL_LIBDIR=\"$1\" ; shift ;;\n\t-T)\tshift ; TERMCAP_LIB=\"$1\" ; shift ;;\n\t-v)\tshift ; verbose=y ;;\n\t--)\tshift ; break ;;\n\t*)\techo \"${PROGNAME}: usage: $PROGNAME [-C compiler] [-L libdir] [-v]\" >&2 ; exit 2;;\n\tesac\ndone\n\n# if someone happened to install examples/rlversion, use it (it's not\n# installed by default)\nif test -f ${RL_LIBDIR}/rlversion ; then\n\tif [ -n \"$verbose\" ]; then\n\t\techo \"${PROGNAME}: using installed rlversion from ${RL_LIBDIR}/rlversion\"\n\tfi\n\tv=`${RL_LIBDIR}/rlversion 2>/dev/null`\n\tcase \"$v\" in\n\tunknown | \"\")\techo 0 ;;\n\t*)\t\techo \"$v\" ;;\n\tesac\n\texit 0\nfi\n\nif [ -n \"$verbose\" ]; then\n\techo \"${PROGNAME}: using ${RL_LIBDIR} to find libreadline\"\n\techo \"${PROGNAME}: attempting program compilation\"\nfi\n\n# make $TDIR mode 0700\nmkdir $TDIR || {\n\techo \"${PROGNAME}: ${TDIR}: file exists\" >&2\n\techo 0\n\texit 1\n}\nchmod 700 $TDIR\n\ntrap 'rm -f $TDIR/rlvers $TDIR/rlvers.? ; rmdir $TDIR' 0 1 2 3 6 15\n\ncat > $TDIR/rlvers.c << EOF\n#include <stdio.h>\nextern char *rl_library_version;\n\nmain()\n{\n\tprintf(\"%s\\n\", rl_library_version ? rl_library_version : \"0\");\n\texit(0);\n}\nEOF\n\nopwd=`pwd`\n\ncd $TDIR || {\n\techo \"${PROGNAME}: cannot cd to $TDIR\" >&2\n\techo 0\n\texit 1\n}\n\t\nif eval ${CC} -L${RL_LIBDIR} -I${RL_INCDIR} -o $TDIR/rlvers $TDIR/rlvers.c -lreadline ${TERMCAP_LIB};\nthen\n\tv=`$TDIR/rlvers`\nelse\n\tif [ -n \"$verbose\" ] ; then\n\t\techo \"${PROGNAME}: compilation failed: status $?\"\n\t\techo \"${PROGNAME}: using version 0\"\n\tfi\n\tv=0\nfi\n\ncase \"$v\" in\nunknown | \"\")\techo 0 ;;\n*)\t\techo \"$v\" ;;\nesac\n\ncd $opwd\nexit 0\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}