{
  "module_name": "keygen-convert.sh",
  "hash_id": "1ca1491aba3fc79d0723f069d8e6a0e79f30fb8c072884840ec7d65e7c03c14f",
  "original_prompt": "Ingested from openssh-9.6p1/regress/keygen-convert.sh",
  "human_readable_source": "#\t$OpenBSD: keygen-convert.sh,v 1.6 2021/07/24 02:57:28 dtucker Exp $\n#\tPlaced in the Public Domain.\n\ntid=\"convert keys\"\n\ncat > $OBJ/askpass <<EOD\n#!/bin/sh\necho hunter2\nEOD\nchmod u+x $OBJ/askpass\n\nif ${SSHKEYGEN} -? 2>&1 | grep \"ssh-keygen -e\" >/dev/null; then\n\ttest_import_export=1\nfi\n\nfor t in ${SSH_KEYTYPES}; do\n\t# generate user key for agent\n\ttrace \"generating $t key\"\n\trm -f $OBJ/$t-key\n\t${SSHKEYGEN} -q -N \"\" -t $t -f $OBJ/$t-key\n\n\tif test \"x$test_import_export\" = \"x1\"; then\n\t\ttrace \"export $t private to rfc4716 public\"\n\t\t${SSHKEYGEN} -q -e -f $OBJ/$t-key >$OBJ/$t-key-rfc || \\\n\t\t    fail \"export $t private to rfc4716 public\"\n\n\t\ttrace \"export $t public to rfc4716 public\"\n\t\t${SSHKEYGEN} -q -e -f $OBJ/$t-key.pub >$OBJ/$t-key-rfc.pub || \\\n\t\t    fail \"$t public to rfc4716 public\"\n\n\t\tcmp $OBJ/$t-key-rfc $OBJ/$t-key-rfc.pub || \\\n\t\t    fail \"$t rfc4716 exports differ between public and private\"\n\n\t\ttrace \"import $t rfc4716 public\"\n\t\t${SSHKEYGEN} -q -i -f $OBJ/$t-key-rfc >$OBJ/$t-rfc-imported || \\\n\t\t    fail \"$t import rfc4716 public\"\n\n\t\tcut -f1,2 -d \" \" $OBJ/$t-key.pub >$OBJ/$t-key-nocomment.pub\n\t\tcmp $OBJ/$t-key-nocomment.pub $OBJ/$t-rfc-imported || \\\n\t\t    fail \"$t imported differs from original\"\n\tfi\n\n\ttrace \"set passphrase $t\"\n\t${SSHKEYGEN} -q -p -P '' -N 'hunter2' -f $OBJ/$t-key >/dev/null || \\\n\t    fail \"$t set passphrase failed\"\n\n\ttrace \"export $t to public with passphrase\"\n\tSSH_ASKPASS=$OBJ/askpass SSH_ASKPASS_REQUIRE=force \\\n\t    ${SSHKEYGEN} -y -f $OBJ/$t-key >$OBJ/$t-key-nocomment.pub\n\tcmp $OBJ/$t-key.pub $OBJ/$t-key-nocomment.pub || \\\n\t    fail \"$t exported pubkey differs from generated\"\n\n\trm -f $OBJ/$t-key $OBJ/$t-key.pub $OBJ/$t-key-rfc $OBJ/$t-key-rfc.pub \\\n\t    $OBJ/$t-rfc-imported $OBJ/$t-key-nocomment.pub\ndone\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}