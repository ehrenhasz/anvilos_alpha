{
  "module_name": "test_ptimeout.c",
  "hash_id": "0d651325ae48caaa65846289d3b0b88ef77a736e99ea9f74785ba58f6aa75d65",
  "original_prompt": "Ingested from openssh-9.6p1/regress/unittests/misc/test_ptimeout.c",
  "human_readable_source": " \n \n\n#include \"includes.h\"\n\n#include <sys/types.h>\n#include <stdio.h>\n#ifdef HAVE_STDINT_H\n# include <stdint.h>\n#endif\n#include <stdlib.h>\n#include <string.h>\n#ifdef HAVE_POLL_H\n# include <poll.h>\n#endif\n#include <time.h>\n\n#include \"../test_helper/test_helper.h\"\n\n#include \"log.h\"\n#include \"misc.h\"\n\nvoid test_ptimeout(void);\n\nvoid\ntest_ptimeout(void)\n{\n\tstruct timespec pt, *ts;\n\n\tTEST_START(\"ptimeout_init\");\n\tptimeout_init(&pt);\n\tASSERT_PTR_EQ(ptimeout_get_tsp(&pt), NULL);\n\tASSERT_INT_EQ(ptimeout_get_ms(&pt), -1);\n\tTEST_DONE();\n\n\tTEST_START(\"ptimeout_deadline_sec\");\n\tptimeout_deadline_sec(&pt, 100);\n\tptimeout_deadline_sec(&pt, 200);\n\tASSERT_INT_EQ(ptimeout_get_ms(&pt), 100 * 1000);\n\tts = ptimeout_get_tsp(&pt);\n\tASSERT_PTR_NE(ts, NULL);\n\tASSERT_LONG_EQ(ts->tv_nsec, 0);\n\tASSERT_LONG_EQ(ts->tv_sec, 100);\n\tTEST_DONE();\n\n\tTEST_START(\"ptimeout_deadline_ms\");\n\tptimeout_deadline_ms(&pt, 50123);\n\tptimeout_deadline_ms(&pt, 50500);\n\tASSERT_INT_EQ(ptimeout_get_ms(&pt), 50123);\n\tts = ptimeout_get_tsp(&pt);\n\tASSERT_PTR_NE(ts, NULL);\n\tASSERT_LONG_EQ(ts->tv_nsec, 123 * 1000000);\n\tASSERT_LONG_EQ(ts->tv_sec, 50);\n\tTEST_DONE();\n\n\tTEST_START(\"ptimeout zero\");\n\tptimeout_init(&pt);\n\tptimeout_deadline_ms(&pt, 0);\n\tASSERT_INT_EQ(ptimeout_get_ms(&pt), 0);\n\tts = ptimeout_get_tsp(&pt);\n\tASSERT_PTR_NE(ts, NULL);\n\tASSERT_LONG_EQ(ts->tv_nsec, 0);\n\tASSERT_LONG_EQ(ts->tv_sec, 0);\n\tTEST_DONE();\n\n\tTEST_START(\"ptimeout_deadline_monotime\");\n\tptimeout_init(&pt);\n\tptimeout_deadline_monotime(&pt, monotime() + 100);\n\tASSERT_INT_GT(ptimeout_get_ms(&pt), 50000);\n\tASSERT_INT_LT(ptimeout_get_ms(&pt), 200000);\n\tts = ptimeout_get_tsp(&pt);\n\tASSERT_PTR_NE(ts, NULL);\n\tASSERT_LONG_GT(ts->tv_sec, 50);\n\tASSERT_LONG_LT(ts->tv_sec, 200);\n\tTEST_DONE();\n\n\tTEST_START(\"ptimeout_deadline_monotime past\");\n\tptimeout_init(&pt);\n\tptimeout_deadline_monotime(&pt, monotime() + 100);\n\tptimeout_deadline_monotime(&pt, monotime() - 100);\n\tASSERT_INT_EQ(ptimeout_get_ms(&pt), 0);\n\tts = ptimeout_get_tsp(&pt);\n\tASSERT_PTR_NE(ts, NULL);\n\tASSERT_LONG_EQ(ts->tv_nsec, 0);\n\tASSERT_LONG_EQ(ts->tv_sec, 0);\n\tTEST_DONE();\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}