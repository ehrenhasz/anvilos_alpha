{
  "module_name": "Makefile",
  "hash_id": "17d525ded7d1ca0294af2433ee14cc6453f1fef5a6264a6bd596f83eaa43534b",
  "original_prompt": "Ingested from openssh-9.6p1/regress/Makefile",
  "human_readable_source": "#\t$OpenBSD: Makefile,v 1.131 2023/12/18 14:50:08 djm Exp $\n\ntests:\t\tprep file-tests t-exec unit\n\nREGRESS_TARGETS=\tt1 t2 t3 t4 t5 t6 t7 t8 t9 t10 t11 t12\n\n# File based tests\nfile-tests: $(REGRESS_TARGETS)\n\n# Interop tests are not run by default\ninterop interop-tests: t-exec-interop\n\nextra extra-tests: t-extra\n\nprep:\n\ttest \"x${USE_VALGRIND}\" = \"x\" || mkdir -p $(OBJ)/valgrind-out\n\nclean:\n\tfor F in $(CLEANFILES); do rm -f $(OBJ)$$F; done\n\trm -rf $(OBJ).putty\n\trm -rf $(OBJ).dropbear\n\ndistclean:\tclean\n\nLTESTS= \tconnect \\\n\t\tproxy-connect \\\n\t\tsshfp-connect \\\n\t\tconnect-privsep \\\n\t\tconnect-uri \\\n\t\tproto-version \\\n\t\tproto-mismatch \\\n\t\texit-status \\\n\t\texit-status-signal \\\n\t\tenvpass \\\n\t\ttransfer \\\n\t\tbanner \\\n\t\trekey \\\n\t\tdhgex \\\n\t\tstderr-data \\\n\t\tstderr-after-eof \\\n\t\tbroken-pipe \\\n\t\ttry-ciphers \\\n\t\tyes-head \\\n\t\tlogin-timeout \\\n\t\tagent \\\n\t\tagent-getpeereid \\\n\t\tagent-timeout \\\n\t\tagent-ptrace \\\n\t\tagent-subprocess \\\n\t\tkeyscan \\\n\t\tkeygen-change \\\n\t\tkeygen-comment \\\n\t\tkeygen-convert \\\n\t\tkeygen-knownhosts \\\n\t\tkeygen-moduli \\\n\t\tkeygen-sshfp \\\n\t\tkey-options \\\n\t\tscp \\\n\t\tscp3 \\\n\t\tscp-uri \\\n\t\tsftp \\\n\t\tsftp-chroot \\\n\t\tsftp-cmds \\\n\t\tsftp-badcmds \\\n\t\tsftp-batch \\\n\t\tsftp-glob \\\n\t\tsftp-perm \\\n\t\tsftp-uri \\\n\t\treconfigure \\\n\t\tdynamic-forward \\\n\t\tforwarding \\\n\t\tmultiplex \\\n\t\treexec \\\n\t\tbrokenkeys \\\n\t\tsshcfgparse \\\n\t\tcfgparse \\\n\t\tcfgmatch \\\n\t\tcfgmatchlisten \\\n\t\tpercent \\\n\t\taddrmatch \\\n\t\tlocalcommand \\\n\t\tforcecommand \\\n\t\tportnum \\\n\t\tkeytype \\\n\t\tkextype \\\n\t\tcert-hostkey \\\n\t\tcert-userkey \\\n\t\thost-expand \\\n\t\tkeys-command \\\n\t\tforward-control \\\n\t\tintegrity \\\n\t\tkrl \\\n\t\tmultipubkey \\\n\t\tlimit-keytype \\\n\t\thostkey-agent \\\n\t\thostkey-rotate \\\n\t\tprincipals-command \\\n\t\tcert-file \\\n\t\tcfginclude \\\n\t\tservcfginclude \\\n\t\tallow-deny-users \\\n\t\tauthinfo \\\n\t\tsshsig \\\n\t\tknownhosts \\\n\t\tknownhosts-command \\\n\t\tagent-restrict \\\n\t\thostbased \\\n\t\tchannel-timeout \\\n\t\tconnection-timeout \\\n\t\tmatch-subsystem \\\n\t\tagent-pkcs11-restrict \\\n\t\tagent-pkcs11-cert\n\nINTEROP_TESTS=\tputty-transfer putty-ciphers putty-kex conch-ciphers\nINTEROP_TESTS+=\tdropbear-ciphers dropbear-kex\n#INTEROP_TESTS+=ssh-com ssh-com-client ssh-com-keygen ssh-com-sftp\n\nEXTRA_TESTS=\tagent-pkcs11\n#EXTRA_TESTS+= \tcipher-speed\n\nUSERNAME=\t\t${LOGNAME}\nCLEANFILES=\t*.core actual agent-key.* authorized_keys_${USERNAME} \\\n\t\tauthorized_keys_${USERNAME}.* \\\n\t\tauthorized_principals_${USERNAME} \\\n\t\tbanner.in banner.out cert_host_key* cert_user_key* \\\n\t\tcopy.1 copy.2 data ed25519-agent ed25519-agent* \\\n\t\ted25519-agent.pub ed25519 ed25519.pub empty.in \\\n\t\texpect failed-regress.log failed-ssh.log failed-sshd.log \\\n\t\thkr.* host.ecdsa-sha2-nistp256 host.ecdsa-sha2-nistp384 \\\n\t\thost.ecdsa-sha2-nistp521 host.ssh-dss host.ssh-ed25519 \\\n\t\thost.ssh-rsa host_ca_key* host_krl_* host_revoked_* key.* \\\n\t\tkey.dsa-* key.ecdsa-* key.ed25519-512 \\\n\t\tkey.ed25519-512.pub key.rsa-* keys-command-args kh.* askpass \\\n\t\tknown_hosts known_hosts-cert known_hosts.* krl-* ls.copy \\\n\t\tmodpipe netcat no_identity_config \\\n\t\tpidfile putty.rsa2 ready regress.log remote_pid \\\n\t\trevoked-* rsa rsa-agent rsa-agent.pub rsa.pub rsa_ssh2_cr.prv \\\n\t\trsa_ssh2_crnl.prv scp-ssh-wrapper.exe \\\n\t\tscp-ssh-wrapper.scp setuid-allowed sftp-server.log \\\n\t\tsftp-server.sh sftp.log ssh-log-wrapper.sh ssh.log \\\n\t\tssh-agent.log ssh-add.log slow-sftp-server.sh \\\n\t\tssh-rsa_oldfmt knownhosts_command \\\n\t\tssh_config ssh_config.* ssh_proxy ssh_proxy_bak \\\n\t\tssh_proxy_* sshd.log sshd_config sshd_config.* \\\n\t\tsshd_config.* sshd_proxy sshd_proxy.* sshd_proxy_bak \\\n\t\tsshd_proxy_orig t10.out t10.out.pub t12.out t12.out.pub \\\n\t\tt2.out t3.out t6.out1 t6.out2 t7.out t7.out.pub \\\n\t\tt8.out t8.out.pub t9.out t9.out.pub \\\n\t\ttimestamp testdata user_*key* user_ca* user_key*\n\n# Enable all malloc(3) randomisations and checks\nTEST_ENV=      \"MALLOC_OPTIONS=CFGJRSUX\"\n\nTEST_SSH_SSHKEYGEN?=ssh-keygen\n\nCPPFLAGS=-I..\n\nt1:\n\t${TEST_SSH_SSHKEYGEN} -if ${.CURDIR}/rsa_ssh2.prv | diff - ${.CURDIR}/rsa_openssh.prv\n\ttr '\\n' '\\r' <${.CURDIR}/rsa_ssh2.prv > ${.OBJDIR}/rsa_ssh2_cr.prv\n\t${TEST_SSH_SSHKEYGEN} -if ${.OBJDIR}/rsa_ssh2_cr.prv | diff - ${.CURDIR}/rsa_openssh.prv\n\tawk '{print $$0 \"\\r\"}' ${.CURDIR}/rsa_ssh2.prv > ${.OBJDIR}/rsa_ssh2_crnl.prv\n\t${TEST_SSH_SSHKEYGEN} -if ${.OBJDIR}/rsa_ssh2_crnl.prv | diff - ${.CURDIR}/rsa_openssh.prv\n\nt2:\n\tcat ${.CURDIR}/rsa_openssh.prv > $(OBJ)/t2.out\n\tchmod 600 $(OBJ)/t2.out\n\t${TEST_SSH_SSHKEYGEN} -yf $(OBJ)/t2.out | diff - ${.CURDIR}/rsa_openssh.pub\n\nt3:\n\t${TEST_SSH_SSHKEYGEN} -ef ${.CURDIR}/rsa_openssh.pub >$(OBJ)/t3.out\n\t${TEST_SSH_SSHKEYGEN} -if $(OBJ)/t3.out | diff - ${.CURDIR}/rsa_openssh.pub\n\nt4:\n\t${TEST_SSH_SSHKEYGEN} -E md5 -lf ${.CURDIR}/rsa_openssh.pub |\\\n\t\tawk '{print $$2}' | diff - ${.CURDIR}/t4.ok\n\nt5:\n\t${TEST_SSH_SSHKEYGEN} -Bf ${.CURDIR}/rsa_openssh.pub |\\\n\t\tawk '{print $$2}' | diff - ${.CURDIR}/t5.ok\n\nt6:\n\t${TEST_SSH_SSHKEYGEN} -if ${.CURDIR}/dsa_ssh2.prv > $(OBJ)/t6.out1\n\t${TEST_SSH_SSHKEYGEN} -if ${.CURDIR}/dsa_ssh2.pub > $(OBJ)/t6.out2\n\tchmod 600 $(OBJ)/t6.out1\n\t${TEST_SSH_SSHKEYGEN} -yf $(OBJ)/t6.out1 | diff - $(OBJ)/t6.out2\n\n$(OBJ)/t7.out:\n\t${TEST_SSH_SSHKEYGEN} -q -t rsa -N '' -f $@\n\nt7: $(OBJ)/t7.out\n\t${TEST_SSH_SSHKEYGEN} -lf $(OBJ)/t7.out > /dev/null\n\t${TEST_SSH_SSHKEYGEN} -Bf $(OBJ)/t7.out > /dev/null\n\n$(OBJ)/t8.out:\n\t${TEST_SSH_SSHKEYGEN} -q -t dsa -N '' -f $@\n\nt8: $(OBJ)/t8.out\n\t${TEST_SSH_SSHKEYGEN} -lf $(OBJ)/t8.out > /dev/null\n\t${TEST_SSH_SSHKEYGEN} -Bf $(OBJ)/t8.out > /dev/null\n\n$(OBJ)/t9.out:\n\t! ${TEST_SSH_SSH} -Q key-plain | grep ecdsa >/dev/null || \\\n\t${TEST_SSH_SSHKEYGEN} -q -t ecdsa -N '' -f $@\n\nt9: $(OBJ)/t9.out\n\t! ${TEST_SSH_SSH} -Q key-plain | grep ecdsa >/dev/null || \\\n\t${TEST_SSH_SSHKEYGEN} -lf $(OBJ)/t9.out > /dev/null\n\t! ${TEST_SSH_SSH} -Q key-plain | grep ecdsa >/dev/null || \\\n\t${TEST_SSH_SSHKEYGEN} -Bf $(OBJ)/t9.out > /dev/null\n\n\n$(OBJ)/t10.out:\n\t${TEST_SSH_SSHKEYGEN} -q -t ed25519 -N '' -f $@\n\nt10: $(OBJ)/t10.out\n\t${TEST_SSH_SSHKEYGEN} -lf $(OBJ)/t10.out > /dev/null\n\t${TEST_SSH_SSHKEYGEN} -Bf $(OBJ)/t10.out > /dev/null\n\nt11:\n\t${TEST_SSH_SSHKEYGEN} -E sha256 -lf ${.CURDIR}/rsa_openssh.pub |\\\n\t\tawk '{print $$2}' | diff - ${.CURDIR}/t11.ok\n\n$(OBJ)/t12.out:\n\t${TEST_SSH_SSHKEYGEN} -q -t ed25519 -N '' -C 'test-comment-1234' -f $@\n\nt12: $(OBJ)/t12.out\n\t${TEST_SSH_SSHKEYGEN} -lf $(OBJ)/t12.out.pub | grep test-comment-1234 >/dev/null\n\nt-exec:\t${LTESTS:=.sh}\n\t@if [ \"x$?\" = \"x\" ]; then exit 0; fi; \\\n\t_started=\"\"; test -z \"${LTESTS_FROM}\" && _started=1 ;\\\n\tfor TEST in \"\"$?; do \\\n\t\tif [ -z \"$$_started\" ] ; then \\\n\t\t\tif [ \"x$$TEST\" = \"x${LTESTS_FROM}.sh\" ]; then \\\n\t\t\t\t_started=1; \\\n\t\t\telse \\\n\t\t\t\tcontinue; \\\n\t\t\tfi ; \\\n\t\tfi ; \\\n\t\tskip=no; \\\n\t\tfor t in \"\"$${SKIP_LTESTS}; do \\\n\t\t\tif [ \"x$${t}.sh\" = \"x$${TEST}\" ]; then skip=yes; fi; \\\n\t\tdone; \\\n\t\tif [ \"x$${skip}\" = \"xno\" ]; then \\\n\t\t\techo \"run test $${TEST}\" ... 1>&2; \\\n\t\t\t(env SUDO=\"${SUDO}\" TEST_ENV=${TEST_ENV} ${TEST_SHELL} ${.CURDIR}/test-exec.sh ${.OBJDIR} ${.CURDIR}/$${TEST}) || exit $$?; \\\n\t\telse \\\n\t\t\techo skip test $${TEST} 1>&2; \\\n\t\tfi; \\\n\tdone\n\nt-exec-interop:\t${INTEROP_TESTS:=.sh}\n\t@if [ \"x$?\" = \"x\" ]; then exit 0; fi; \\\n\tfor TEST in \"\"$?; do \\\n\t\techo \"run test $${TEST}\" ... 1>&2; \\\n\t\t(env SUDO=\"${SUDO}\" TEST_ENV=${TEST_ENV} ${TEST_SHELL} ${.CURDIR}/test-exec.sh ${.OBJDIR} ${.CURDIR}/$${TEST}) || exit $$?; \\\n\tdone\n\nt-extra:\t${EXTRA_TESTS:=.sh}\n\t@if [ \"x$?\" = \"x\" ]; then exit 0; fi; \\\n\tfor TEST in \"\"$?; do \\\n\t\techo \"run test $${TEST}\" ... 1>&2; \\\n\t\t(env SUDO=\"${SUDO}\" TEST_ENV=${TEST_ENV} ${TEST_SHELL} ${.CURDIR}/test-exec.sh ${.OBJDIR} ${.CURDIR}/$${TEST}) || exit $$?; \\\n\tdone\n\n# Not run by default\ninterop: ${INTEROP_TARGETS}\n\n# Unit tests, built by top-level Makefile\nunit:\n\tset -e ; if test -z \"${SKIP_UNIT}\" ; then \\\n\t\tV=\"\" ; \\\n\t\ttest \"x${USE_VALGRIND}\" = \"x\" || \\\n\t\t    V=${.CURDIR}/valgrind-unit.sh ; \\\n\t\t $$V ${.OBJDIR}/unittests/sshbuf/test_sshbuf ; \\\n\t\t $$V ${.OBJDIR}/unittests/sshkey/test_sshkey \\\n\t\t\t-d ${.CURDIR}/unittests/sshkey/testdata ; \\\n\t\t$$V ${.OBJDIR}/unittests/sshsig/test_sshsig \\\n\t\t\t-d ${.CURDIR}/unittests/sshsig/testdata ; \\\n\t\t$$V ${.OBJDIR}/unittests/authopt/test_authopt \\\n\t\t\t-d ${.CURDIR}/unittests/authopt/testdata ; \\\n\t\t$$V ${.OBJDIR}/unittests/bitmap/test_bitmap ; \\\n\t\t$$V ${.OBJDIR}/unittests/conversion/test_conversion ; \\\n\t\t$$V ${.OBJDIR}/unittests/kex/test_kex ; \\\n\t\t$$V ${.OBJDIR}/unittests/hostkeys/test_hostkeys \\\n\t\t\t-d ${.CURDIR}/unittests/hostkeys/testdata ; \\\n\t\t$$V ${.OBJDIR}/unittests/match/test_match ; \\\n\t\t$$V ${.OBJDIR}/unittests/misc/test_misc ; \\\n\t\tif test \"x${TEST_SSH_UTF8}\" = \"xyes\"  ; then \\\n\t\t\t$$V ${.OBJDIR}/unittests/utf8/test_utf8 ; \\\n\t\tfi \\\n\tfi\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}