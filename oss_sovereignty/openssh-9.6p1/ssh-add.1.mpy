{
  "module_name": "ssh-add.1",
  "hash_id": "1db26a08ce6b7085ad60bd994bae82072b4fd5e22c91cb29d2e3835e9685d752",
  "original_prompt": "Ingested from openssh-9.6p1/ssh-add.1",
  "human_readable_source": ".\\\"\t$OpenBSD: ssh-add.1,v 1.85 2023/12/18 14:46:56 djm Exp $\n.\\\"\n.\\\" Author: Tatu Ylonen <ylo@cs.hut.fi>\n.\\\" Copyright (c) 1995 Tatu Ylonen <ylo@cs.hut.fi>, Espoo, Finland\n.\\\"                    All rights reserved\n.\\\"\n.\\\" As far as I am concerned, the code I have written for this software\n.\\\" can be used freely for any purpose.  Any derived versions of this\n.\\\" software must be clearly marked as such, and if the derived work is\n.\\\" incompatible with the protocol description in the RFC file, it must be\n.\\\" called by a name other than \"ssh\" or \"Secure Shell\".\n.\\\"\n.\\\"\n.\\\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.\n.\\\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.\n.\\\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.\n.\\\"\n.\\\" Redistribution and use in source and binary forms, with or without\n.\\\" modification, are permitted provided that the following conditions\n.\\\" are met:\n.\\\" 1. Redistributions of source code must retain the above copyright\n.\\\"    notice, this list of conditions and the following disclaimer.\n.\\\" 2. Redistributions in binary form must reproduce the above copyright\n.\\\"    notice, this list of conditions and the following disclaimer in the\n.\\\"    documentation and/or other materials provided with the distribution.\n.\\\"\n.\\\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR\n.\\\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n.\\\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n.\\\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,\n.\\\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n.\\\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n.\\\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n.\\\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n.\\\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n.\\\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n.\\\"\n.Dd $Mdocdate: December 18 2023 $\n.Dt SSH-ADD 1\n.Os\n.Sh NAME\n.Nm ssh-add\n.Nd adds private key identities to the OpenSSH authentication agent\n.Sh SYNOPSIS\n.Nm ssh-add\n.Op Fl cCDdKkLlqvXx\n.Op Fl E Ar fingerprint_hash\n.Op Fl H Ar hostkey_file\n.Op Fl h Ar destination_constraint\n.Op Fl S Ar provider\n.Op Fl t Ar life\n.Op Ar\n.Nm ssh-add\n.Fl s Ar pkcs11\n.Op Fl vC\n.Op Ar certificate ...\n.Nm ssh-add\n.Fl e Ar pkcs11\n.Nm ssh-add\n.Fl T\n.Ar pubkey ...\n.Sh DESCRIPTION\n.Nm\nadds private key identities to the authentication agent,\n.Xr ssh-agent 1 .\nWhen run without arguments, it adds the files\n.Pa ~/.ssh/id_rsa ,\n.Pa ~/.ssh/id_ecdsa ,\n.Pa ~/.ssh/id_ecdsa_sk ,\n.Pa ~/.ssh/id_ed25519 ,\n.Pa ~/.ssh/id_ed25519_sk ,\nand\n.Pa ~/.ssh/id_dsa .\nAfter loading a private key,\n.Nm\nwill try to load corresponding certificate information from the\nfilename obtained by appending\n.Pa -cert.pub\nto the name of the private key file.\nAlternative file names can be given on the command line.\n.Pp\nIf any file requires a passphrase,\n.Nm\nasks for the passphrase from the user.\nThe passphrase is read from the user's tty.\n.Nm\nretries the last passphrase if multiple identity files are given.\n.Pp\nThe authentication agent must be running and the\n.Ev SSH_AUTH_SOCK\nenvironment variable must contain the name of its socket for\n.Nm\nto work.\n.Pp\nThe options are as follows:\n.Bl -tag -width Ds\n.It Fl c\nIndicates that added identities should be subject to confirmation before\nbeing used for authentication.\nConfirmation is performed by\n.Xr ssh-askpass 1 .\nSuccessful confirmation is signaled by a zero exit status from\n.Xr ssh-askpass 1 ,\nrather than text entered into the requester.\n.It Fl C\nWhen loading keys into or deleting keys from the agent, process\ncertificates only and skip plain keys.\n.It Fl D\nDeletes all identities from the agent.\n.It Fl d\nInstead of adding identities, removes identities from the agent.\nIf\n.Nm\nhas been run without arguments, the keys for the default identities and\ntheir corresponding certificates will be removed.\nOtherwise, the argument list will be interpreted as a list of paths to\npublic key files to specify keys and certificates to be removed from the agent.\nIf no public key is found at a given path,\n.Nm\nwill append\n.Pa .pub\nand retry.\nIf the argument list consists of\n.Dq -\nthen\n.Nm\nwill read public keys to be removed from standard input.\n.It Fl E Ar fingerprint_hash\nSpecifies the hash algorithm used when displaying key fingerprints.\nValid options are:\n.Dq md5\nand\n.Dq sha256 .\nThe default is\n.Dq sha256 .\n.It Fl e Ar pkcs11\nRemove keys provided by the PKCS#11 shared library\n.Ar pkcs11 .\n.It Fl H Ar hostkey_file\nSpecifies a known hosts file to look up hostkeys when using\ndestination-constrained keys via the\n.Fl h\nflag.\nThis option may be specified multiple times to allow multiple files to be\nsearched.\nIf no files are specified,\n.Nm\nwill use the default\n.Xr ssh_config 5\nknown hosts files:\n.Pa ~/.ssh/known_hosts ,\n.Pa ~/.ssh/known_hosts2 ,\n.Pa /etc/ssh/ssh_known_hosts ,\nand\n.Pa /etc/ssh/ssh_known_hosts2 .\n.It Fl h Ar destination_constraint\nWhen adding keys, constrain them to be usable only through specific hosts or to\nspecific destinations.\n.Pp\nDestination constraints of the form\n.Sq [user@]dest-hostname\npermit use of the key only from the origin host (the one running\n.Xr ssh-agent 1 )\nto the listed destination host, with optional user name.\n.Pp\nConstraints of the form\n.Sq src-hostname>[user@]dst-hostname\nallow a key available on a forwarded\n.Xr ssh-agent 1\nto be used through a particular host (as specified by\n.Sq src-hostname )\nto authenticate to a further host,\nspecified by\n.Sq dst-hostname .\n.Pp\nMultiple destination constraints may be added when loading keys.\nWhen attempting authentication with a key that has destination constraints,\nthe whole connection path, including\n.Xr ssh-agent 1\nforwarding, is tested against those constraints and each\nhop must be permitted for the attempt to succeed.\nFor example, if key is forwarded to a remote host,\n.Sq host-b ,\nand is attempting authentication to another host,\n.Sq host-c ,\nthen the operation will be successful only if\n.Sq host-b\nwas permitted from the origin host and the subsequent\n.Sq host-b>host-c\nhop is also permitted by destination constraints.\n.Pp\nHosts are identified by their host keys, and are looked up from known hosts\nfiles by\n.Nm .\nWildcards patterns may be used for hostnames and certificate host\nkeys are supported.\nBy default, keys added by\n.Nm\nare not destination constrained.\n.Pp\nDestination constraints were added in OpenSSH release 8.9.\nSupport in both the remote SSH client and server is required when using\ndestination-constrained keys over a forwarded\n.Xr ssh-agent 1\nchannel.\n.Pp\nIt is also important to note that destination constraints can only be\nenforced by\n.Xr ssh-agent 1\nwhen a key is used, or when it is forwarded by a\n.Sy cooperating\n.Xr ssh 1 .\nSpecifically, it does not prevent an attacker with access to a remote\n.Ev SSH_AUTH_SOCK\nfrom forwarding it again and using it on a different host (but only to\na permitted destination).\n.It Fl K\nLoad resident keys from a FIDO authenticator.\n.It Fl k\nWhen loading keys into or deleting keys from the agent, process plain private\nkeys only and skip certificates.\n.It Fl L\nLists public key parameters of all identities currently represented\nby the agent.\n.It Fl l\nLists fingerprints of all identities currently represented by the agent.\n.It Fl q\nBe quiet after a successful operation.\n.It Fl S Ar provider\nSpecifies a path to a library that will be used when adding\nFIDO authenticator-hosted keys, overriding the default of using the\ninternal USB HID support.\n.It Fl s Ar pkcs11\nAdd keys provided by the PKCS#11 shared library\n.Ar pkcs11 .\nCertificate files may optionally be listed as command-line arguments.\nIf these are present, then they will be loaded into the agent using any\ncorresponding private keys loaded from the PKCS#11 token.\n.It Fl T Ar pubkey ...\nTests whether the private keys that correspond to the specified\n.Ar pubkey\nfiles are usable by performing sign and verify operations on each.\n.It Fl t Ar life\nSet a maximum lifetime when adding identities to an agent.\nThe lifetime may be specified in seconds or in a time format\nspecified in\n.Xr sshd_config 5 .\n.It Fl v\nVerbose mode.\nCauses\n.Nm\nto print debugging messages about its progress.\nThis is helpful in debugging problems.\nMultiple\n.Fl v\noptions increase the verbosity.\nThe maximum is 3.\n.It Fl X\nUnlock the agent.\n.It Fl x\nLock the agent with a password.\n.El\n.Sh ENVIRONMENT\n.Bl -tag -width Ds\n.It Ev \"DISPLAY\", \"SSH_ASKPASS\" and \"SSH_ASKPASS_REQUIRE\"\nIf\n.Nm\nneeds a passphrase, it will read the passphrase from the current\nterminal if it was run from a terminal.\nIf\n.Nm\ndoes not have a terminal associated with it but\n.Ev DISPLAY\nand\n.Ev SSH_ASKPASS\nare set, it will execute the program specified by\n.Ev SSH_ASKPASS\n(by default\n.Dq ssh-askpass )\nand open an X11 window to read the passphrase.\nThis is particularly useful when calling\n.Nm\nfrom a\n.Pa .xsession\nor related script.\n.Pp\n.Ev SSH_ASKPASS_REQUIRE\nallows further control over the use of an askpass program.\nIf this variable is set to\n.Dq never\nthen\n.Nm\nwill never attempt to use one.\nIf it is set to\n.Dq prefer ,\nthen\n.Nm\nwill prefer to use the askpass program instead of the TTY when requesting\npasswords.\nFinally, if the variable is set to\n.Dq force ,\nthen the askpass program will be used for all passphrase input regardless\nof whether\n.Ev DISPLAY\nis set.\n.It Ev SSH_AUTH_SOCK\nIdentifies the path of a\n.Ux Ns -domain\nsocket used to communicate with the agent.\n.It Ev SSH_SK_PROVIDER\nSpecifies a path to a library that will be used when loading any\nFIDO authenticator-hosted keys, overriding the default of using\nthe built-in USB HID support.\n.El\n.Sh FILES\n.Bl -tag -width Ds -compact\n.It Pa ~/.ssh/id_dsa\n.It Pa ~/.ssh/id_ecdsa\n.It Pa ~/.ssh/id_ecdsa_sk\n.It Pa ~/.ssh/id_ed25519\n.It Pa ~/.ssh/id_ed25519_sk\n.It Pa ~/.ssh/id_rsa\nContains the DSA, ECDSA, authenticator-hosted ECDSA, Ed25519,\nauthenticator-hosted Ed25519 or RSA authentication identity of the user.\n.El\n.Pp\nIdentity files should not be readable by anyone but the user.\nNote that\n.Nm\nignores identity files if they are accessible by others.\n.Sh EXIT STATUS\nExit status is 0 on success, 1 if the specified command fails,\nand 2 if\n.Nm\nis unable to contact the authentication agent.\n.Sh SEE ALSO\n.Xr ssh 1 ,\n.Xr ssh-agent 1 ,\n.Xr ssh-askpass 1 ,\n.Xr ssh-keygen 1 ,\n.Xr sshd 8\n.Sh AUTHORS\nOpenSSH is a derivative of the original and free\nssh 1.2.12 release by Tatu Ylonen.\nAaron Campbell, Bob Beck, Markus Friedl, Niels Provos,\nTheo de Raadt and Dug Song\nremoved many bugs, re-added newer features and\ncreated OpenSSH.\nMarkus Friedl contributed the support for SSH\nprotocol versions 1.5 and 2.0.\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}