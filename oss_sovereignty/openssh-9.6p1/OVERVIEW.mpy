{
  "module_name": "OVERVIEW",
  "hash_id": "e316829db4e08ef17fc6d3b0c20a992de0f936043a28fbcf8840e28247ab0827",
  "original_prompt": "Ingested from openssh-9.6p1/OVERVIEW",
  "human_readable_source": "[Note: This file has not been updated for OpenSSH versions after\nOpenSSH-1.2 and should be considered OBSOLETE.  It has been left in\nthe distribution because some of its information may still be useful\nto developers.]\n\nThis document is intended for those who wish to read the ssh source\ncode.  This tries to give an overview of the structure of the code.\n\nCopyright (c) 1995 Tatu Ylonen <ylo@cs.hut.fi>\nUpdated 17 Nov 1995.\nUpdated 19 Oct 1999 for OpenSSH-1.2\nUpdated 20 May 2001 note obsolete for > OpenSSH-1.2\n\nThe software consists of ssh (client), sshd (server), scp, sdist, and\nthe auxiliary programs ssh-keygen, ssh-agent, ssh-add, and\nmake-ssh-known-hosts.  The main program for each of these is in a .c\nfile with the same name.\n\nThere are some subsystems/abstractions that are used by a number of\nthese programs.\n\n  Buffer manipulation routines\n\n    - These provide an arbitrary size buffer, where data can be appended.\n      Data can be consumed from either end.  The code is used heavily\n      throughout ssh.  The buffer manipulation functions are in\n      sshbuf*.c (header sshbuf.h).\n\n  Compression Library\n\n    - Ssh uses the GNU GZIP compression library (ZLIB).\n\n  Encryption/Decryption\n\n    - Ssh contains several encryption algorithms.  These are all\n      accessed through the cipher.h interface.  The interface code is\n      in cipher.c, and the implementations are either in libc or\n      LibreSSL.\n\n  Multiple Precision Integer Library\n\n    - Uses the LibreSSL BIGNUM sublibrary.\n\n  Random Numbers\n\n    - Uses arc4random() and such.\n\n  RSA key generation, encryption, decryption\n\n    - Ssh uses the RSA routines in libssl.\n\n  RSA key files\n\n    - RSA keys are stored in files with a special format.  The code to\n      read/write these files is in authfile.c.  The files are normally\n      encrypted with a passphrase.  The functions to read passphrases\n      are in readpass.c (the same code is used to read passwords).\n\n  Binary packet protocol\n\n    - The ssh binary packet protocol is implemented in packet.c.  The\n      code in packet.c does not concern itself with packet types or their\n      execution; it contains code to build packets, to receive them and\n      extract data from them, and the code to compress and/or encrypt\n      packets.\n\n    - The code in packet.c calls the buffer manipulation routines\n      (buffer.c, bufaux.c), compression routines (zlib), and the\n      encryption routines.\n\n  X11, TCP/IP, and Agent forwarding\n\n    - Code for various types of channel forwarding is in channels.c.\n      The file defines a generic framework for arbitrary communication\n      channels inside the secure channel, and uses this framework to\n      implement X11 forwarding, TCP/IP forwarding, and authentication\n      agent forwarding.\n      The new, Protocol 1.5, channel close implementation is in nchan.c\n\n  Authentication agent\n\n    - Code to communicate with the authentication agent is in authfd.c.\n\n  Authentication methods\n\n    - Code for various authentication methods resides in auth-*.c\n      (auth-passwd.c, auth-rh-rsa.c, auth-rhosts.c, auth-rsa.c).  This\n      code is linked into the server.  The routines also manipulate\n      known hosts files using code in hostfile.c.  Code in canohost.c\n      is used to retrieve the canonical host name of the remote host.\n      Code in match.c is used to match host names.\n\n    - In the client end, authentication code is in sshconnect.c.  It\n      reads Passwords/passphrases using code in readpass.c.  It reads\n      RSA key files with authfile.c.  It communicates the\n      authentication agent using authfd.c.\n\n  The ssh client\n\n    - The client main program is in ssh.c.  It first parses arguments\n      and reads configuration (readconf.c), then calls ssh_connect (in\n      sshconnect.c) to open a connection to the server (possibly via a\n      proxy), and performs authentication (ssh_login in sshconnect.c).\n      It then makes any pty, forwarding, etc. requests.  It may call\n      code in ttymodes.c to encode current tty modes.  Finally it\n      calls client_loop in clientloop.c.  This does the real work for\n      the session.\n\n  Pseudo-tty manipulation and tty modes\n\n    - Code to allocate and use a pseudo tty is in pty.c.  Code to\n      encode and set terminal modes is in ttymodes.c.\n\n  Logging in (updating utmp, lastlog, etc.)\n\n    - The code to do things that are done when a user logs in are in\n      login.c.  This includes things such as updating the utmp, wtmp,\n      and lastlog files.  Some of the code is in sshd.c.\n\n  Writing to the system log and terminal\n\n    - The programs use the functions fatal(), log(), debug(), error()\n      in many places to write messages to system log or user's\n      terminal.  The implementation that logs to system log is in\n      log-server.c; it is used in the server program.  The other\n      programs use an implementation that sends output to stderr; it\n      is in log-client.c.  The definitions are in ssh.h.\n\n  The sshd server (daemon)\n\n    - The sshd daemon starts by processing arguments and reading the\n      configuration file (servconf.c).  It then reads the host key,\n      starts listening for connections, and generates the server key.\n      The server key will be regenerated every hour by an alarm.\n\n    - When the server receives a connection, it forks, disables the\n      regeneration alarm, and starts communicating with the client.\n      They first perform identification string exchange, then\n      negotiate encryption, then perform authentication, preparatory\n      operations, and finally the server enters the normal session\n      mode by calling server_loop in serverloop.c.  This does the real\n      work, calling functions in other modules.\n\n    - The code for the server is in sshd.c.  It contains a lot of\n      stuff, including:\n\t- server main program\n\t- waiting for connections\n\t- processing new connection\n\t- authentication\n\t- preparatory operations\n\t- building up the execution environment for the user program\n\t- starting the user program.\n\n  Auxiliary files\n\n    - There are several other files in the distribution that contain\n      various auxiliary routines:\n\tssh.h\t     the main header file for ssh (various definitions)\n\tuidswap.c    uid-swapping\n\txmalloc.c    \"safe\" malloc routines\n\n$OpenBSD: OVERVIEW,v 1.15 2018/10/23 05:56:35 djm Exp $\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}