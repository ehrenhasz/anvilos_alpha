{
  "module_name": "kernel-genhd-flags.m4",
  "hash_id": "63ee85486e90d9219f44299dd274681b9cd420bebc0f51a7232b832417d24720",
  "original_prompt": "Ingested from zfs-2.2.2/config/kernel-genhd-flags.m4",
  "human_readable_source": "dnl #\ndnl # 5.17 API change,\ndnl #\ndnl # GENHD_FL_EXT_DEVT flag removed\ndnl # GENHD_FL_NO_PART_SCAN renamed GENHD_FL_NO_PART\ndnl #\nAC_DEFUN([ZFS_AC_KERNEL_SRC_GENHD_FLAGS], [\n\n\tZFS_LINUX_TEST_SRC([genhd_fl_ext_devt], [\n\t\t#include <linux/blkdev.h>\n\t], [\n\t\tint flags __attribute__ ((unused)) = GENHD_FL_EXT_DEVT;\n\t])\n\n\tZFS_LINUX_TEST_SRC([genhd_fl_no_part], [\n\t\t#include <linux/blkdev.h>\n\t], [\n\t\tint flags __attribute__ ((unused)) = GENHD_FL_NO_PART;\n\t])\n\n\tZFS_LINUX_TEST_SRC([genhd_fl_no_part_scan], [\n\t\t#include <linux/blkdev.h>\n\t], [\n\t\tint flags __attribute__ ((unused)) = GENHD_FL_NO_PART_SCAN;\n\t])\n])\n\nAC_DEFUN([ZFS_AC_KERNEL_GENHD_FLAGS], [\n\n\tAC_MSG_CHECKING([whether GENHD_FL_EXT_DEVT flag is available])\n\tZFS_LINUX_TEST_RESULT([genhd_fl_ext_devt], [\n\t\tAC_MSG_RESULT(yes)\n\t\tAC_DEFINE(ZFS_GENHD_FL_EXT_DEVT, GENHD_FL_EXT_DEVT,\n\t\t    [GENHD_FL_EXT_DEVT flag is available])\n\t], [\n\t\tAC_MSG_RESULT(no)\n\t\tAC_DEFINE(ZFS_GENHD_FL_EXT_DEVT, 0,\n\t\t    [GENHD_FL_EXT_DEVT flag is not available])\n\t])\n\n\tAC_MSG_CHECKING([whether GENHD_FL_NO_PART flag is available])\n\tZFS_LINUX_TEST_RESULT([genhd_fl_no_part], [\n\t\tAC_MSG_RESULT(yes)\n\t\tAC_DEFINE(ZFS_GENHD_FL_NO_PART, GENHD_FL_NO_PART,\n\t\t    [GENHD_FL_NO_PART flag is available])\n\t], [\n\t\tAC_MSG_RESULT(no)\n\n\t\tAC_MSG_CHECKING([whether GENHD_FL_NO_PART_SCAN flag is available])\n\t\tZFS_LINUX_TEST_RESULT([genhd_fl_no_part_scan], [\n\t\t\tAC_MSG_RESULT(yes)\n\t\t\tAC_DEFINE(ZFS_GENHD_FL_NO_PART, GENHD_FL_NO_PART_SCAN,\n\t\t\t    [GENHD_FL_NO_PART_SCAN flag is available])\n\t\t], [\n\t\t\tZFS_LINUX_TEST_ERROR([GENHD_FL_NO_PART|GENHD_FL_NO_PART_SCAN])\n\t\t])\n\t])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}