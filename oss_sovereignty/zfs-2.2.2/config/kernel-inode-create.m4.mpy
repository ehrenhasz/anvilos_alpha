{
  "module_name": "kernel-inode-create.m4",
  "hash_id": "24eafff275c19ad3e3490f30be456aaff55e3aecca8e21decb4b6f7add20ee33",
  "original_prompt": "Ingested from zfs-2.2.2/config/kernel-inode-create.m4",
  "human_readable_source": "AC_DEFUN([ZFS_AC_KERNEL_SRC_CREATE], [\n\tdnl #\n\tdnl # 6.3 API change\n\tdnl # The first arg is changed to struct mnt_idmap *\n\tdnl #\n\tZFS_LINUX_TEST_SRC([create_mnt_idmap], [\n\t\t#include <linux/fs.h>\n\t\t#include <linux/sched.h>\n\n\t\tint inode_create(struct mnt_idmap *idmap,\n\t\t    struct inode *inode ,struct dentry *dentry,\n\t\t    umode_t umode, bool flag) { return 0; }\n\n\t\tstatic const struct inode_operations\n\t\t\tiops __attribute__ ((unused)) = {\n\t\t\t.create         = inode_create,\n\t\t};\n\t],[])\n\n\tdnl #\n\tdnl # 5.12 API change that added the struct user_namespace* arg\n\tdnl # to the front of this function type's arg list.\n\tdnl #\n\tZFS_LINUX_TEST_SRC([create_userns], [\n\t\t#include <linux/fs.h>\n\t\t#include <linux/sched.h>\n\n\t\tint inode_create(struct user_namespace *userns,\n\t\t    struct inode *inode ,struct dentry *dentry,\n\t\t    umode_t umode, bool flag) { return 0; }\n\n\t\tstatic const struct inode_operations\n\t\t\tiops __attribute__ ((unused)) = {\n\t\t\t.create\t\t= inode_create,\n\t\t};\n\t],[])\n\n\tdnl #\n\tdnl # 3.6 API change\n\tdnl #\n\tZFS_LINUX_TEST_SRC([create_flags], [\n\t\t#include <linux/fs.h>\n\t\t#include <linux/sched.h>\n\n\t\tint inode_create(struct inode *inode ,struct dentry *dentry,\n\t\t    umode_t umode, bool flag) { return 0; }\n\n\t\tstatic const struct inode_operations\n\t\t    iops __attribute__ ((unused)) = {\n\t\t\t.create\t\t= inode_create,\n\t\t};\n\t],[])\n])\n\nAC_DEFUN([ZFS_AC_KERNEL_CREATE], [\n\tAC_MSG_CHECKING([whether iops->create() takes struct mnt_idmap*])\n\tZFS_LINUX_TEST_RESULT([create_mnt_idmap], [\n\t\tAC_MSG_RESULT(yes)\n\t\tAC_DEFINE(HAVE_IOPS_CREATE_IDMAP, 1,\n\t\t   [iops->create() takes struct mnt_idmap*])\n\t],[\n\t\tAC_MSG_RESULT(no)\n\n\t\tAC_MSG_CHECKING([whether iops->create() takes struct user_namespace*])\n\t\tZFS_LINUX_TEST_RESULT([create_userns], [\n\t\t\tAC_MSG_RESULT(yes)\n\t\t\tAC_DEFINE(HAVE_IOPS_CREATE_USERNS, 1,\n\t\t\t   [iops->create() takes struct user_namespace*])\n\t\t],[\n\t\t\tAC_MSG_RESULT(no)\n\n\t\t\tAC_MSG_CHECKING([whether iops->create() passes flags])\n\t\t\tZFS_LINUX_TEST_RESULT([create_flags], [\n\t\t\t\tAC_MSG_RESULT(yes)\n\t\t\t],[\n\t\t\t\tZFS_LINUX_TEST_ERROR([iops->create()])\n\t\t\t])\n\t\t])\n\t])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}