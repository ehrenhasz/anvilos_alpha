{
  "module_name": "kernel-put-link.m4",
  "hash_id": "87f7e58435ff58129afe9d9ce9b93ffc9e87c1b37686524e2b3fd64aaf73bfbc",
  "original_prompt": "Ingested from zfs-2.2.2/config/kernel-put-link.m4",
  "human_readable_source": "dnl #\ndnl # Supported symlink APIs\ndnl #\nAC_DEFUN([ZFS_AC_KERNEL_SRC_PUT_LINK], [\n\tZFS_LINUX_TEST_SRC([put_link_cookie], [\n\t\t#include <linux/fs.h>\n\t\tvoid put_link(struct inode *ip, void *cookie)\n\t\t    { return; }\n\t\tstatic struct inode_operations\n\t\t    iops __attribute__ ((unused)) = {\n\t\t\t.put_link = put_link,\n\t\t};\n\t],[])\n\n\tZFS_LINUX_TEST_SRC([put_link_nameidata], [\n\t\t#include <linux/fs.h>\n\t\tvoid put_link(struct dentry *de, struct\n\t\t    nameidata *nd, void *ptr) { return; }\n\t\tstatic struct inode_operations\n\t\t    iops __attribute__ ((unused)) = {\n\t\t\t.put_link = put_link,\n\t\t};\n\t],[])\n])\n\nAC_DEFUN([ZFS_AC_KERNEL_PUT_LINK], [\n\tdnl #\n\tdnl # 4.5 API change\n\tdnl # get_link() uses delayed done, there is no put_link() interface.\n\tdnl # This check initially uses the inode_operations_get_link result\n\tdnl #\n\tZFS_LINUX_TEST_RESULT([inode_operations_get_link], [\n\t\tAC_DEFINE(HAVE_PUT_LINK_DELAYED, 1, [iops->put_link() delayed])\n\t],[\n\t\tdnl #\n\t\tdnl # 4.2 API change\n\t\tdnl # This kernel retired the nameidata structure.\n\t\tdnl #\n\t\tAC_MSG_CHECKING([whether iops->put_link() passes cookie])\n\t\tZFS_LINUX_TEST_RESULT([put_link_cookie], [\n\t\t\tAC_MSG_RESULT(yes)\n\t\t\tAC_DEFINE(HAVE_PUT_LINK_COOKIE, 1,\n\t\t\t    [iops->put_link() cookie])\n\t\t],[\n\t\t\tAC_MSG_RESULT(no)\n\n\t\t\tdnl #\n\t\t\tdnl # 2.6.32 API\n\t\t\tdnl #\n\t\t\tAC_MSG_CHECKING(\n\t\t\t    [whether iops->put_link() passes nameidata])\n\t\t\tZFS_LINUX_TEST_RESULT([put_link_nameidata], [\n\t\t\t\tAC_MSG_RESULT(yes)\n\t\t\t\tAC_DEFINE(HAVE_PUT_LINK_NAMEIDATA, 1,\n\t\t\t\t    [iops->put_link() nameidata])\n\t\t\t],[\n\t\t\t\tZFS_LINUX_TEST_ERROR([put_link])\n\t\t\t])\n\t\t])\n\t])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}