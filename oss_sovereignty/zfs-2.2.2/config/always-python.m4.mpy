{
  "module_name": "always-python.m4",
  "hash_id": "85663606ddaeb54f7f76424aab23d8d54309f5ec8f092f288e47a82049b3a14e",
  "original_prompt": "Ingested from zfs-2.2.2/config/always-python.m4",
  "human_readable_source": "dnl #\ndnl # The majority of the python scripts are written to be compatible\ndnl # with Python 3.6. This option is intended to\ndnl # to provide a method to specify the default system version, and\ndnl # set the PYTHON environment variable accordingly.\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_ALWAYS_PYTHON], [\n\tAC_ARG_WITH([python],\n\t\tAS_HELP_STRING([--with-python[=VERSION]],\n\t\t[default system python version @<:@default=check@:>@]),\n\t\t[with_python=$withval],\n\t\t[with_python=check])\n\n\tAS_CASE([$with_python],\n\t\t[check], [AC_CHECK_PROGS([PYTHON], [python3], [:])],\n\t\t[3*], [PYTHON=\"python${with_python}\"],\n\t\t[*python3*], [PYTHON=\"${with_python}\"],\n\t\t[no], [PYTHON=\":\"],\n\t\t[AC_MSG_ERROR([Unknown --with-python value '$with_python'])]\n\t)\n\n\tdnl #\n\tdnl # Minimum supported Python versions for utilities: Python 3.6\n\tdnl #\n\tAM_PATH_PYTHON([], [], [:])\n\tAS_IF([test -z \"$PYTHON_VERSION\"], [\n\t\tPYTHON_VERSION=$(echo ${PYTHON##*/} | tr -cd 0-9.)\n\t])\n\tPYTHON_MINOR=${PYTHON_VERSION#*\\.}\n\n\tAS_CASE([$PYTHON_VERSION],\n\t\t[3.*], [\n\t\t\tAS_IF([test $PYTHON_MINOR -lt 6],\n\t\t\t\t[AC_MSG_ERROR(\"Python >= 3.6 is required\")])\n\t\t],\n\t\t[:|2|3], [],\n\t\t[PYTHON_VERSION=3]\n\t)\n\n\tAM_CONDITIONAL([USING_PYTHON], [test \"$PYTHON\" != :])\n\tAC_SUBST([PYTHON_SHEBANG], [python3])\n\n\tdnl #\n\tdnl # Request that packages be built for a specific Python version.\n\tdnl #\n\tAS_IF([test \"x$with_python\" != xcheck], [\n\t\tPYTHON_PKG_VERSION=$(echo $PYTHON_VERSION | tr -d .)\n\t\tDEFINE_PYTHON_PKG_VERSION='--define \"__use_python_pkg_version '${PYTHON_PKG_VERSION}'\"'\n\t\tDEFINE_PYTHON_VERSION='--define \"__use_python '${PYTHON}'\"'\n\t], [\n\t\tDEFINE_PYTHON_VERSION=''\n\t\tDEFINE_PYTHON_PKG_VERSION=''\n\t])\n\n\tAC_SUBST(DEFINE_PYTHON_VERSION)\n\tAC_SUBST(DEFINE_PYTHON_PKG_VERSION)\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}