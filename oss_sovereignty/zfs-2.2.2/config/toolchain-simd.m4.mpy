{
  "module_name": "toolchain-simd.m4",
  "hash_id": "5e940b0072409682780ccfc415ba869360202352f6100e530ef5020595c2e3a8",
  "original_prompt": "Ingested from zfs-2.2.2/config/toolchain-simd.m4",
  "human_readable_source": "dnl #\ndnl # Checks if host toolchain supports SIMD instructions\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_ALWAYS_TOOLCHAIN_SIMD], [\n\tcase \"$host_cpu\" in\n\t\tamd64 | x86_64 | x86 | i686)\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE2\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE3\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSSE3\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE4_1\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE4_2\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX2\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512F\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512CD\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512DQ\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512BW\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512IFMA\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512VBMI\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512PF\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512ER\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512VL\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AES\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_PCLMULQDQ\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_MOVBE\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_XSAVE\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_XSAVEOPT\n\t\t\tZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_XSAVES\n\t\t\t;;\n\tesac\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE], [\n\tAC_MSG_CHECKING([whether host toolchain supports SSE])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"xorps %xmm0, %xmm1\");\n\t\t}\n\t]])], [\n\t\tAC_DEFINE([HAVE_SSE], 1, [Define if host toolchain supports SSE])\n\t\tAC_MSG_RESULT([yes])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE2\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE2], [\n\tAC_MSG_CHECKING([whether host toolchain supports SSE2])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"pxor %xmm0, %xmm1\");\n\t\t}\n\t]])], [\n\t\tAC_DEFINE([HAVE_SSE2], 1, [Define if host toolchain supports SSE2])\n\t\tAC_MSG_RESULT([yes])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE3\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE3], [\n\tAC_MSG_CHECKING([whether host toolchain supports SSE3])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([[\n\t\tvoid main()\n\t\t{\n\t\t\tchar v[16];\n\t\t\t__asm__ __volatile__(\"lddqu %0,%%xmm0\" :: \"m\"(v[0]));\n\t\t}\n\t]])], [\n\t\tAC_DEFINE([HAVE_SSE3], 1, [Define if host toolchain supports SSE3])\n\t\tAC_MSG_RESULT([yes])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSSE3\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSSE3], [\n\tAC_MSG_CHECKING([whether host toolchain supports SSSE3])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"pshufb %xmm0,%xmm1\");\n\t\t}\n\t]])], [\n\t\tAC_DEFINE([HAVE_SSSE3], 1, [Define if host toolchain supports SSSE3])\n\t\tAC_MSG_RESULT([yes])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE4_1\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE4_1], [\n\tAC_MSG_CHECKING([whether host toolchain supports SSE4.1])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"pmaxsb %xmm0,%xmm1\");\n\t\t}\n\t]])], [\n\t\tAC_DEFINE([HAVE_SSE4_1], 1, [Define if host toolchain supports SSE4.1])\n\t\tAC_MSG_RESULT([yes])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE4_2\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_SSE4_2], [\n\tAC_MSG_CHECKING([whether host toolchain supports SSE4.2])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"pcmpgtq %xmm0, %xmm1\");\n\t\t}\n\t]])], [\n\t\tAC_DEFINE([HAVE_SSE4_2], 1, [Define if host toolchain supports SSE4.2])\n\t\tAC_MSG_RESULT([yes])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([[\n\t\tvoid main()\n\t\t{\n\t\t\tchar v[32];\n\t\t\t__asm__ __volatile__(\"vmovdqa %0,%%ymm0\" :: \"m\"(v[0]));\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX], 1, [Define if host toolchain supports AVX])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX2\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX2], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX2])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vpshufb %ymm0,%ymm1,%ymm2\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX2], 1, [Define if host toolchain supports AVX2])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512F\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512F], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX512F])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vpandd %zmm0,%zmm1,%zmm2\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX512F], 1, [Define if host toolchain supports AVX512F])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512CD\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512CD], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX512CD])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vplzcntd %zmm0,%zmm1\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX512CD], 1, [Define if host toolchain supports AVX512CD])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512DQ\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512DQ], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX512DQ])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vandpd %zmm0,%zmm1,%zmm2\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX512DQ], 1, [Define if host toolchain supports AVX512DQ])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512BW\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512BW], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX512BW])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vpshufb %zmm0,%zmm1,%zmm2\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX512BW], 1, [Define if host toolchain supports AVX512BW])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512IFMA\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512IFMA], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX512IFMA])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vpmadd52luq %zmm0,%zmm1,%zmm2\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX512IFMA], 1, [Define if host toolchain supports AVX512IFMA])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512VBMI\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512VBMI], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX512VBMI])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vpermb %zmm0,%zmm1,%zmm2\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX512VBMI], 1, [Define if host toolchain supports AVX512VBMI])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512PF\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512PF], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX512PF])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vgatherpf0dps (%rsi,%zmm0,4){%k1}\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX512PF], 1, [Define if host toolchain supports AVX512PF])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512ER\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512ER], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX512ER])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vexp2pd %zmm0,%zmm1\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX512ER], 1, [Define if host toolchain supports AVX512ER])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512VL\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AVX512VL], [\n\tAC_MSG_CHECKING([whether host toolchain supports AVX512VL])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"vpabsq %zmm0,%zmm1\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AVX512VL], 1, [Define if host toolchain supports AVX512VL])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AES\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_AES], [\n\tAC_MSG_CHECKING([whether host toolchain supports AES])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"aesenc %xmm0, %xmm1\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_AES], 1, [Define if host toolchain supports AES])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_PCLMULQDQ\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_PCLMULQDQ], [\n\tAC_MSG_CHECKING([whether host toolchain supports PCLMULQDQ])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"pclmulqdq %0, %%xmm0, %%xmm1\" :: \"i\"(0));\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_PCLMULQDQ], 1, [Define if host toolchain supports PCLMULQDQ])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_MOVBE\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_MOVBE], [\n\tAC_MSG_CHECKING([whether host toolchain supports MOVBE])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t\t__asm__ __volatile__(\"movbe 0(%eax), %eax\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_MOVBE], 1, [Define if host toolchain supports MOVBE])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_XSAVE\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_XSAVE], [\n\tAC_MSG_CHECKING([whether host toolchain supports XSAVE])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t  char b[4096] __attribute__ ((aligned (64)));\n\t\t  __asm__ __volatile__(\"xsave %[b]\\n\" : : [b] \"m\" (*b) : \"memory\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_XSAVE], 1, [Define if host toolchain supports XSAVE])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_XSAVEOPT\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_XSAVEOPT], [\n\tAC_MSG_CHECKING([whether host toolchain supports XSAVEOPT])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t  char b[4096] __attribute__ ((aligned (64)));\n\t\t  __asm__ __volatile__(\"xsaveopt %[b]\\n\" : : [b] \"m\" (*b) : \"memory\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_XSAVEOPT], 1, [Define if host toolchain supports XSAVEOPT])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n\ndnl #\ndnl # ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_XSAVES\ndnl #\nAC_DEFUN([ZFS_AC_CONFIG_TOOLCHAIN_CAN_BUILD_XSAVES], [\n\tAC_MSG_CHECKING([whether host toolchain supports XSAVES])\n\n\tAC_LINK_IFELSE([AC_LANG_SOURCE([\n\t[\n\t\tvoid main()\n\t\t{\n\t\t  char b[4096] __attribute__ ((aligned (64)));\n\t\t  __asm__ __volatile__(\"xsaves %[b]\\n\" : : [b] \"m\" (*b) : \"memory\");\n\t\t}\n\t]])], [\n\t\tAC_MSG_RESULT([yes])\n\t\tAC_DEFINE([HAVE_XSAVES], 1, [Define if host toolchain supports XSAVES])\n\t], [\n\t\tAC_MSG_RESULT([no])\n\t])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}