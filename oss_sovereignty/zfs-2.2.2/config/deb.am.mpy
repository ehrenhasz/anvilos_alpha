{
  "module_name": "deb.am",
  "hash_id": "5ed9f0da02c805b21a9578f6a272363c1ee44592485dba5a81c41ceac2676caf",
  "original_prompt": "Ingested from zfs-2.2.2/config/deb.am",
  "human_readable_source": "PHONY += deb-kmod deb-dkms deb-utils deb deb-local native-deb-local \\\n\tnative-deb-utils native-deb-kmod native-deb\n\nnative-deb-local:\n\t@(if test \"${HAVE_DPKGBUILD}\" = \"no\"; then \\\n\t\techo -e \"\\n\" \\\n\t\"*** Required util ${DPKGBUILD} missing.  Please install the\\n\" \\\n\t\"*** package for your distribution which provides ${DPKGBUILD},\\n\" \\\n\t\"*** re-run configure, and try again.\\n\"; \\\n\t\texit 1; \\\n\tfi)\n\ndeb-local: native-deb-local\n\t@(if test \"${HAVE_ALIEN}\" = \"no\"; then \\\n\t\techo -e \"\\n\" \\\n\t\"*** Required util ${ALIEN} missing.  Please install the\\n\" \\\n\t\"*** package for your distribution which provides ${ALIEN},\\n\" \\\n\t\"*** re-run configure, and try again.\\n\"; \\\n\t\texit 1; \\\n\tfi; \\\n        if test \"${ALIEN_MAJOR}\" = \"8\" && \\\n           test \"${ALIEN_MINOR}\" = \"95\"; then \\\n        if test \"${ALIEN_POINT}\" = \"1\" || \\\n           test \"${ALIEN_POINT}\" = \"2\" || \\\n           test \"${ALIEN_POINT}\" = \"3\"; then \\\n                /bin/echo -e \"\\n\" \\\n        \"*** Installed version of ${ALIEN} is known to be broken;\\n\" \\\n        \"*** attempting to generate debs will fail! See\\n\" \\\n        \"*** https://github.com/openzfs/zfs/issues/11650 for details.\\n\"; \\\n                exit 1; \\\n        fi; \\\n        fi)\n\ndeb-kmod: deb-local rpm-kmod\n\tname=${PACKAGE}; \\\n\tversion=${VERSION}-${RELEASE}; \\\n\tarch=`$(RPM) -qp $${name}-kmod-$${version}.src.rpm --qf %{arch} | tail -1`; \\\n\tdebarch=`$(DPKG) --print-architecture`; \\\n\tpkg1=kmod-$${name}*$${version}.$${arch}.rpm; \\\n\tfakeroot $(ALIEN) --bump=0 --scripts --to-deb --target=$$debarch $$pkg1 || exit 1; \\\n\t$(RM) $$pkg1\n\n\ndeb-dkms: deb-local rpm-dkms\n\tname=${PACKAGE}; \\\n\tversion=${VERSION}-${RELEASE}; \\\n\tarch=`$(RPM) -qp $${name}-dkms-$${version}.src.rpm --qf %{arch} | tail -1`; \\\n\tdebarch=`$(DPKG) --print-architecture`; \\\n\tpkg1=$${name}-dkms-$${version}.$${arch}.rpm; \\\n\tfakeroot $(ALIEN) --bump=0 --scripts --to-deb --target=$$debarch $$pkg1 || exit 1; \\\n\t$(RM) $$pkg1\n\ndeb-utils: deb-local rpm-utils-initramfs\n\tname=${PACKAGE}; \\\n\tversion=${VERSION}-${RELEASE}; \\\n\tarch=`$(RPM) -qp $${name}-$${version}.src.rpm --qf %{arch} | tail -1`; \\\n\tdebarch=`$(DPKG) --print-architecture`; \\\n\tpkg1=$${name}-$${version}.$${arch}.rpm; \\\n\tpkg2=libnvpair3-$${version}.$${arch}.rpm; \\\n\tpkg3=libuutil3-$${version}.$${arch}.rpm; \\\n\tpkg4=libzfs5-$${version}.$${arch}.rpm; \\\n\tpkg5=libzpool5-$${version}.$${arch}.rpm; \\\n\tpkg6=libzfs5-devel-$${version}.$${arch}.rpm; \\\n\tpkg7=$${name}-test-$${version}.$${arch}.rpm; \\\n\tpkg8=$${name}-dracut-$${version}.noarch.rpm; \\\n\tpkg9=$${name}-initramfs-$${version}.$${arch}.rpm; \\\n\tpkg10=`ls python3-pyzfs-$${version}.noarch.rpm 2>/dev/null`; \\\n\tpkg11=`ls pam_zfs_key-$${version}.$${arch}.rpm 2>/dev/null`; \\\n## Arguments need to be passed to dh_shlibdeps. Alien provides no mechanism\n## to do this, so we install a shim onto the path which calls the real\n## dh_shlibdeps with the required arguments.\n\tpath_prepend=`mktemp -d /tmp/intercept.XXXXXX`; \\\n\techo \"#!$(SHELL)\" > $${path_prepend}/dh_shlibdeps; \\\n\techo \"`which dh_shlibdeps` -- \\\n\t -xlibuutil3linux -xlibnvpair3linux -xlibzfs5linux -xlibzpool5linux\" \\\n\t >> $${path_prepend}/dh_shlibdeps; \\\n## These -x arguments are passed to dpkg-shlibdeps, which exclude the\n## Debianized packages from the auto-generated dependencies of the new debs,\n## which should NOT be mixed with the alien-generated debs created here\n\tchmod +x $${path_prepend}/dh_shlibdeps; \\\n\tenv \"PATH=$${path_prepend}:$${PATH}\" \\\n\tfakeroot $(ALIEN) --bump=0 --scripts --to-deb --target=$$debarch \\\n\t    $$pkg1 $$pkg2 $$pkg3 $$pkg4 $$pkg5 $$pkg6 $$pkg7 \\\n\t    $$pkg8 $$pkg9 $$pkg10 $$pkg11 || exit 1; \\\n\t$(RM) $${path_prepend}/dh_shlibdeps; \\\n\trmdir $${path_prepend}; \\\n\t$(RM) $$pkg1 $$pkg2 $$pkg3 $$pkg4 $$pkg5 $$pkg6 $$pkg7 \\\n\t    $$pkg8 $$pkg9 $$pkg10 $$pkg11;\n\ndeb: deb-kmod deb-dkms deb-utils\n\ndebian:\n\tcp -r contrib/debian debian; chmod +x debian/rules;\n\nnative-deb-utils: native-deb-local debian\n\tcp contrib/debian/control debian/control; \\\n\t$(DPKGBUILD) -b -rfakeroot -us -uc;\n\nnative-deb-kmod: native-deb-local debian\n\tsh scripts/make_gitrev.sh; \\\n\tfakeroot debian/rules override_dh_binary-modules;\n\nnative-deb: native-deb-utils native-deb-kmod\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}