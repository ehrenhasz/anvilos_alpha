{
  "module_name": "user-systemd.m4",
  "hash_id": "aced0b6c56fe67ead0a52564ac586c46a6109dd2f4c95602e67f8378bb03185a",
  "original_prompt": "Ingested from zfs-2.2.2/config/user-systemd.m4",
  "human_readable_source": "AC_DEFUN([ZFS_AC_CONFIG_USER_SYSTEMD], [\n\tAC_ARG_ENABLE(systemd,\n\t\tAS_HELP_STRING([--enable-systemd],\n\t\t[install systemd unit/preset files [[default: yes]]]),\n\t\t[enable_systemd=$enableval],\n\t\t[enable_systemd=check])\n\n\tAC_ARG_WITH(systemdunitdir,\n\t\tAS_HELP_STRING([--with-systemdunitdir=DIR],\n\t\t[install systemd unit files in dir [[/usr/lib/systemd/system]]]),\n\t\tsystemdunitdir=$withval,systemdunitdir=/usr/lib/systemd/system)\n\n\tAC_ARG_WITH(systemdpresetdir,\n\t\tAS_HELP_STRING([--with-systemdpresetdir=DIR],\n\t\t[install systemd preset files in dir [[/usr/lib/systemd/system-preset]]]),\n\t\tsystemdpresetdir=$withval,systemdpresetdir=/usr/lib/systemd/system-preset)\n\n\tAC_ARG_WITH(systemdmodulesloaddir,\n\t\tAS_HELP_STRING([--with-systemdmodulesloaddir=DIR],\n\t\t[install systemd module load files into dir [[/usr/lib/modules-load.d]]]),\n\t\tsystemdmodulesloaddir=$withval,systemdmodulesloaddir=/usr/lib/modules-load.d)\n\n\tAC_ARG_WITH(systemdgeneratordir,\n\t\tAS_HELP_STRING([--with-systemdgeneratordir=DIR],\n\t\t[install systemd generators in dir [[/usr/lib/systemd/system-generators]]]),\n\t\tsystemdgeneratordir=$withval,systemdgeneratordir=/usr/lib/systemd/system-generators)\n\n\tAS_IF([test \"x$enable_systemd\" = xcheck], [\n\t\tAS_IF([systemctl --version >/dev/null 2>&1],\n\t\t\t[enable_systemd=yes],\n\t\t\t[enable_systemd=no])\n\t])\n\n\tAC_MSG_CHECKING(for systemd support)\n\tAC_MSG_RESULT([$enable_systemd])\n\n\tAS_IF([test \"x$enable_systemd\" = xyes], [\n\t\tDEFINE_SYSTEMD='--with systemd --define \"_unitdir $(systemdunitdir)\" --define \"_presetdir $(systemdpresetdir)\" --define \"_generatordir $(systemdgeneratordir)\"'\n\t\tmodulesloaddir=$systemdmodulesloaddir\n\t],[\n\t\tDEFINE_SYSTEMD='--without systemd'\n\t])\n\n\tZFS_INIT_SYSTEMD=$enable_systemd\n\tZFS_WANT_MODULES_LOAD_D=$enable_systemd\n\n\tAC_SUBST(DEFINE_SYSTEMD)\n\tAC_SUBST(systemdunitdir)\n\tAC_SUBST(systemdpresetdir)\n\tAC_SUBST(systemdgeneratordir)\n\tAC_SUBST(modulesloaddir)\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}