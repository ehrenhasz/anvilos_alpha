{
  "module_name": "kernel-encode-fh-inode.m4",
  "hash_id": "d54c95763716896b367410182805987e418afdcfec0a432bc9579e8a9902d7e2",
  "original_prompt": "Ingested from zfs-2.2.2/config/kernel-encode-fh-inode.m4",
  "human_readable_source": "dnl #\ndnl # 3.5.0 API change\ndnl # torvalds/linux@b0b0382bb4904965a9e9fca77ad87514dfda0d1c changed the\ndnl # ->encode_fh() callback to pass the child inode and its parents inode\ndnl # rather than a dentry and a boolean saying whether we want the parent.\ndnl #\nAC_DEFUN([ZFS_AC_KERNEL_SRC_ENCODE_FH_WITH_INODE], [\n\tZFS_LINUX_TEST_SRC([export_operations_encode_fh], [\n\t\t#include <linux/exportfs.h>\n\t\tint encode_fh(struct inode *inode, __u32 *fh, int *max_len,\n\t\t              struct inode *parent) { return 0; }\n\t\tstatic struct export_operations eops __attribute__ ((unused))={\n\t\t\t.encode_fh = encode_fh,\n\t\t};\n\t],[])\n])\n\nAC_DEFUN([ZFS_AC_KERNEL_ENCODE_FH_WITH_INODE], [\n\tAC_MSG_CHECKING([whether eops->encode_fh() wants inode])\n\tZFS_LINUX_TEST_RESULT([export_operations_encode_fh], [\n\t\tAC_MSG_RESULT(yes)\n\t\tAC_DEFINE(HAVE_ENCODE_FH_WITH_INODE, 1,\n\t\t    [eops->encode_fh() wants child and parent inodes])\n\t],[\n\t\tAC_MSG_RESULT(no)\n\t])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}