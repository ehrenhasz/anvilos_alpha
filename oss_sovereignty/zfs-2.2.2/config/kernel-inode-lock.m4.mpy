{
  "module_name": "kernel-inode-lock.m4",
  "hash_id": "5aaa43b3d76d3c5627071b6619c03706b856d22ed135a3cd3c626384c10320c3",
  "original_prompt": "Ingested from zfs-2.2.2/config/kernel-inode-lock.m4",
  "human_readable_source": "dnl #\ndnl # 4.7 API change\ndnl # i_mutex is changed to i_rwsem. Instead of directly using\ndnl # i_mutex/i_rwsem, we should use inode_lock() and inode_lock_shared()\ndnl # We test inode_lock_shared because inode_lock is introduced earlier.\ndnl #\nAC_DEFUN([ZFS_AC_KERNEL_SRC_INODE_LOCK], [\n\tZFS_LINUX_TEST_SRC([inode_lock], [\n\t\t#include <linux/fs.h>\n\t],[\n\t\tstruct inode *inode = NULL;\n\t\tinode_lock_shared(inode);\n\t])\n])\n\nAC_DEFUN([ZFS_AC_KERNEL_INODE_LOCK], [\n\tAC_MSG_CHECKING([whether inode_lock_shared() exists])\n\tZFS_LINUX_TEST_RESULT([inode_lock], [\n\t\tAC_MSG_RESULT(yes)\n\t\tAC_DEFINE(HAVE_INODE_LOCK_SHARED, 1, [yes])\n\t],[\n\t\tAC_MSG_RESULT(no)\n\t])\n])\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}