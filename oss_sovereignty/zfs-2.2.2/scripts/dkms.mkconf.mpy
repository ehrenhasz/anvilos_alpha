{
  "module_name": "dkms.mkconf",
  "hash_id": "9ffd2208fdaad4bb2d335af70871526d12ef370ce6dc6e235fa5d08fb147ee3d",
  "original_prompt": "Ingested from zfs-2.2.2/scripts/dkms.mkconf",
  "human_readable_source": "#!/bin/sh\n\nPROG=$0\n\npkgcfg=/etc/sysconfig/zfs\n\nwhile getopts \"n:v:c:f:\" opt; do\n\tcase $opt in\n\t\tn) pkgname=$OPTARG  ;;\n\t\tv) pkgver=$OPTARG   ;;\n\t\tc) pkgcfg=$OPTARG   ;;\n\t\tf) filename=$OPTARG ;;\n    *) err=1            ;;\n\tesac\ndone\n\nif [ -z \"${pkgname}\" ] || [ -z \"${pkgver}\" ] || [ -z \"${filename}\" ] ||\n    [ -n \"${err}\" ]; then\n\techo \"Usage: $PROG -n <pkgname> -v <pkgver> -c <pkgcfg> -f <filename>\"\n\texit 1\nfi\n\nexec cat >\"${filename}\" <<EOF\nPACKAGE_NAME=\"${pkgname}\"\nPACKAGE_VERSION=\"${pkgver}\"\nPACKAGE_CONFIG=\"${pkgcfg}\"\nNO_WEAK_MODULES=\"yes\"\nPRE_BUILD=\"configure\n  --prefix=/usr\n  --with-config=kernel\n  --with-linux=\\$(\n    if [ -e \"\\${kernel_source_dir/%build/source}\" ]\n    then\n      echo \"\\${kernel_source_dir/%build/source}\"\n    else\n      echo \"\\${kernel_source_dir}\"\n    fi\n  )\n  --with-linux-obj=\"\\${kernel_source_dir}\"\n  \\$(\n    [[ -n \\\"\\${ICP_ROOT}\\\" ]] && \\\\\n    {\n      echo --with-qat=\\\"\\${ICP_ROOT}\\\"\n    }\n  )\n  \\$(\n    [[ -r \\${PACKAGE_CONFIG} ]] \\\\\n    && source \\${PACKAGE_CONFIG} \\\\\n    && shopt -q -s extglob \\\\\n    && \\\\\n    {\n      if [[ \\${ZFS_DKMS_ENABLE_DEBUG,,} == @(y|yes) ]]\n      then\n        echo --enable-debug\n      fi\n      if [[ \\${ZFS_DKMS_ENABLE_DEBUGINFO,,} == @(y|yes) ]]\n      then\n        echo --enable-debuginfo\n      fi\n    }\n  )\n\"\nPOST_BUILD=\"scripts/dkms.postbuild\n  -n \\${PACKAGE_NAME}\n  -v \\${PACKAGE_VERSION}\n  -a \\${arch}\n  -k \\${kernelver}\n  -t \\${dkms_tree}\n\"\nAUTOINSTALL=\"yes\"\nMAKE[0]=\"make\"\nSTRIP[0]=\"\\$(\n  [[ -r \\${PACKAGE_CONFIG} ]] \\\\\n  && source \\${PACKAGE_CONFIG} \\\\\n  && shopt -q -s extglob \\\\\n  && [[ \\${ZFS_DKMS_DISABLE_STRIP,,} == @(y|yes) ]] \\\\\n  && echo -n no\n)\"\nSTRIP[1]=\"\\${STRIP[0]}\"\nBUILT_MODULE_NAME[0]=\"zfs\"\nBUILT_MODULE_LOCATION[0]=\"module/\"\nDEST_MODULE_LOCATION[0]=\"/extra\"\nBUILT_MODULE_NAME[1]=\"spl\"\nBUILT_MODULE_LOCATION[1]=\"module/\"\nDEST_MODULE_LOCATION[1]=\"/extra\"\nEOF\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}