{
  "module_name": "zfs-share.in",
  "hash_id": "5133a7526cbbd823796f2cab594014be811a8dd5647d95df59c8f2441f82664b",
  "original_prompt": "Ingested from zfs-2.2.2/etc/init.d/zfs-share.in",
  "human_readable_source": "#!@DEFAULT_INIT_SHELL@\n# shellcheck disable=SC2154\n#\n# zfs-share     This script will network share zfs filesystems and volumes.\n#\n# chkconfig:    2345 30 99\n# description:  Run the `zfs share -a` or `zfs unshare -a` commands\n#               for controlling iSCSI, NFS, or CIFS network shares.\n# probe: true\n#\n### BEGIN INIT INFO\n# Provides:          zfs-share\n# Required-Start:    $local_fs $network $remote_fs zfs-mount\n# Required-Stop:     $local_fs $network $remote_fs zfs-mount\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Should-Start:      iscsi iscsitarget istgt scst @DEFAULT_INIT_NFS_SERVER@ samba samba4 zfs-mount zfs-zed\n# Should-Stop:       iscsi iscsitarget istgt scst @DEFAULT_INIT_NFS_SERVER@ samba samba4 zfs-mount zfs-zed\n# Short-Description: Network share ZFS datasets and volumes.\n# Description:       Run the `zfs share -a` or `zfs unshare -a` commands\n#                    for controlling iSCSI, NFS, or CIFS network shares.\n### END INIT INFO\n#\n# Released under the 2-clause BSD license.\n#\n# This script is based on debian/zfsutils.zfs.init from the\n# Debian GNU/kFreeBSD zfsutils 8.1-3 package, written by Aurelien Jarno.\n\n# Source the common init script\n. @sysconfdir@/zfs/zfs-functions\n\n# ----------------------------------------------------\n\ndo_depend()\n{\n\tafter sysfs zfs-mount zfs-zed\n\tkeyword -lxc -openvz -prefix -vserver\n}\n\ndo_start()\n{\n\tcheck_boolean \"$ZFS_SHARE\" || exit 0\n\n\tcheck_module_loaded \"zfs\" || exit 0\n\n\tzfs_action \"Sharing ZFS filesystems\" \"$ZFS\" share -a\n}\n\ndo_stop()\n{\n\tcheck_boolean \"$ZFS_UNSHARE\" || exit 0\n\n\tcheck_module_loaded \"zfs\" || exit 0\n\n\tzfs_action \"Unsharing ZFS filesystems\" \"$ZFS\" unshare -a\n}\n\n# ----------------------------------------------------\n\nif [ ! -e /sbin/openrc-run ]; then\n\tcase \"$1\" in\n\t\tstart)\n\t\t\tdo_start\n\t\t\t;;\n\t\tstop)\n\t\t\tdo_stop\n\t\t\t;;\n\t\tforce-reload|reload|restart|status)\n\t\t\t# no-op\n\t\t\t;;\n\t\t*)\n\t\t\t[ -n \"$1\" ] && echo \"Error: Unknown command $1.\"\n\t\t\techo \"Usage: $0 {start|stop}\"\n\t\t\texit 3\n\t\t\t;;\n\tesac\n\n\texit $?\nelse\n\t# Create wrapper functions since Gentoo don't use the case part.\n\tdepend() { do_depend; }\n\tstart() { do_start; }\n\tstop() { do_stop; }\nfi\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}