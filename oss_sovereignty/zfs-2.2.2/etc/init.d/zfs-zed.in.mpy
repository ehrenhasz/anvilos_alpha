{
  "module_name": "zfs-zed.in",
  "hash_id": "ec8f2cac3e69938e19544ed1ec5b53793db312911e74aed45e6f79f557d77758",
  "original_prompt": "Ingested from zfs-2.2.2/etc/init.d/zfs-zed.in",
  "human_readable_source": "#!@DEFAULT_INIT_SHELL@\n# shellcheck disable=SC2154\n#\n# zfs-zed\n#\n# chkconfig:    2345 29 99\n# description:  This script will start and stop the ZFS Event Daemon.\n# probe: true\n#\n### BEGIN INIT INFO\n# Provides:          zfs-zed\n# Required-Start:    zfs-mount\n# Required-Stop:     zfs-mount\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# X-Stop-After:      zfs-share\n# Short-Description: ZFS Event Daemon\n# Description:       zed monitors ZFS events. When a zevent is posted, zed\n#                    will run any scripts that have been enabled for the\n#                    corresponding zevent class.\n### END INIT INFO\n#\n# Released under the 2-clause BSD license.\n#\n# This script is based on debian/zfsutils.zfs.init from the\n# Debian GNU/kFreeBSD zfsutils 8.1-3 package, written by Aurelien Jarno.\n\n# Source the common init script\n. @sysconfdir@/zfs/zfs-functions\n\nZED_NAME=\"zed\"\nZED_PIDFILE=\"@runstatedir@/$ZED_NAME.pid\"\n\n# shellcheck disable=SC2034\nextra_started_commands=\"reload\"\n\n# Exit if the package is not installed\n[ -x \"$ZED\" ] || exit 0\n\n# ----------------------------------------------------\n\ndo_depend()\n{\n\tafter zfs-mount localmount\n}\n\ndo_start()\n{\n\tcheck_module_loaded \"zfs\" || exit 0\n\n\tZED_ARGS=\"$ZED_ARGS -p $ZED_PIDFILE\"\n\n\tzfs_action \"Starting ZFS Event Daemon\" zfs_daemon_start \\\n\t    \"$ZED_PIDFILE\" \"$ZED\" \"$ZED_ARGS\"\n\treturn \"$?\"\n}\n\ndo_stop()\n{\n\tlocal pools\n\tcheck_module_loaded \"zfs\" || exit 0\n\n\tzfs_action \"Stopping ZFS Event Daemon\" zfs_daemon_stop \\\n\t   \"$ZED_PIDFILE\" \"$ZED\" \"$ZED_NAME\" || return \"$?\"\n\n\t# Let's see if we have any pools imported\n\tpools=$(\"$ZPOOL\" list -H -oname)\n\tif [ -z \"$pools\" ]\n\tthen\n\t\t# No pools imported, it is/should be safe/possible to\n\t\t# unload modules.\n\t\tzfs_action \"Unloading modules\" rmmod zfs spl\n\t\treturn \"$?\"\n\tfi\n}\n\ndo_status()\n{\n\tcheck_module_loaded \"zfs\" || exit 0\n\n\tzfs_daemon_status \"$ZED_PIDFILE\" \"$ZED\" \"$ZED_NAME\"\n\treturn \"$?\"\n}\n\ndo_reload()\n{\n\tcheck_module_loaded \"zfs\" || exit 0\n\n\tzfs_action \"Reloading ZFS Event Daemon\" zfs_daemon_reload \\\n\t    \"$ZED_PIDFILE\" \"$ZED_NAME\"\n\treturn \"$?\"\n}\n\n# ----------------------------------------------------\n\nif [ ! -e /sbin/openrc-run ]; then\n\tcase \"$1\" in\n\t\tstart)\n\t\t\tdo_start\n\t\t\t;;\n\t\tstop)\n\t\t\tdo_stop\n\t\t\t;;\n\t\tstatus)\n\t\t\tdo_status\n\t\t\t;;\n\t\treload|force-reload)\n\t\t\tdo_reload\n\t\t\t;;\n\t\trestart)\n\t\t\tdo_stop\n\t\t\tdo_start\n\t\t\t;;\n\t\t*)\n\t\t\t[ -n \"$1\" ] && echo \"Error: Unknown command $1.\"\n\t\t\techo \"Usage: $0 {start|stop|status|reload|restart}\"\n\t\t\texit 1\n\t\t\t;;\n\tesac\n\n\texit $?\nelse\n\t# Create wrapper functions since Gentoo don't use the case part.\n\tdepend() { do_depend; }\n\tstart() { do_start; }\n\tstop() { do_stop; }\n\tstatus() { do_status; }\n\treload() { do_reload; }\nfi\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}