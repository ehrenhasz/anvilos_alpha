{
  "module_name": "zvol_impl.h",
  "hash_id": "3671c2f4c7c323390707fdcf9fed9f71bc27d1d959e54ea8b714c1e2e927edd5",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/zvol_impl.h",
  "human_readable_source": " \n\n#ifndef\t_SYS_ZVOL_IMPL_H\n#define\t_SYS_ZVOL_IMPL_H\n\n#include <sys/zfs_context.h>\n\n#define\tZVOL_RDONLY\t0x1\n \n#define\tZVOL_WRITTEN_TO\t0x2\n\n#define\tZVOL_DUMPIFIED\t0x4\n\n#define\tZVOL_EXCL\t0x8\n\n \ntypedef struct zvol_state {\n\tchar\t\t\tzv_name[MAXNAMELEN];\t \n\tuint64_t\t\tzv_volsize;\t\t \n\tuint64_t\t\tzv_volblocksize;\t \n\tobjset_t\t\t*zv_objset;\t \n\tuint32_t\t\tzv_flags;\t \n\tuint32_t\t\tzv_open_count;\t \n\tuint32_t\t\tzv_changed;\t \n\tuint32_t\t\tzv_volmode;\t \n\tzilog_t\t\t\t*zv_zilog;\t \n\tzfs_rangelock_t\t\tzv_rangelock;\t \n\tdnode_t\t\t\t*zv_dn;\t\t \n\tdataset_kstats_t\tzv_kstat;\t \n\tlist_node_t\t\tzv_next;\t \n\tuint64_t\t\tzv_hash;\t \n\tstruct hlist_node\tzv_hlink;\t \n\tkmutex_t\t\tzv_state_lock;\t \n\tatomic_t\t\tzv_suspend_ref;\t \n\tkrwlock_t\t\tzv_suspend_lock;\t \n\tstruct zvol_state_os\t*zv_zso;\t \n} zvol_state_t;\n\n\nextern krwlock_t zvol_state_lock;\n#define\tZVOL_HT_SIZE\t1024\nextern struct hlist_head *zvol_htable;\n#define\tZVOL_HT_HEAD(hash)\t(&zvol_htable[(hash) & (ZVOL_HT_SIZE-1)])\nextern zil_replay_func_t *const zvol_replay_vector[TX_MAX_TYPE];\n\nextern unsigned int zvol_volmode;\nextern unsigned int zvol_inhibit_dev;\n\n \nzvol_state_t *zvol_find_by_name_hash(const char *name,\n    uint64_t hash, int mode);\nint zvol_first_open(zvol_state_t *zv, boolean_t readonly);\nuint64_t zvol_name_hash(const char *name);\nvoid zvol_remove_minors_impl(const char *name);\nvoid zvol_last_close(zvol_state_t *zv);\nvoid zvol_insert(zvol_state_t *zv);\nvoid zvol_log_truncate(zvol_state_t *zv, dmu_tx_t *tx, uint64_t off,\n    uint64_t len, boolean_t sync);\nvoid zvol_log_write(zvol_state_t *zv, dmu_tx_t *tx, uint64_t offset,\n    uint64_t size, int sync);\nint zvol_get_data(void *arg, uint64_t arg2, lr_write_t *lr, char *buf,\n    struct lwb *lwb, zio_t *zio);\nint zvol_init_impl(void);\nvoid zvol_fini_impl(void);\nvoid zvol_wait_close(zvol_state_t *zv);\n\n \nvoid zvol_os_free(zvol_state_t *zv);\nvoid zvol_os_rename_minor(zvol_state_t *zv, const char *newname);\nint zvol_os_create_minor(const char *name);\nint zvol_os_update_volsize(zvol_state_t *zv, uint64_t volsize);\nboolean_t zvol_os_is_zvol(const char *path);\nvoid zvol_os_clear_private(zvol_state_t *zv);\nvoid zvol_os_set_disk_ro(zvol_state_t *zv, int flags);\nvoid zvol_os_set_capacity(zvol_state_t *zv, uint64_t capacity);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}