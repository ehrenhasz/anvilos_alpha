{
  "module_name": "xvattr.h",
  "hash_id": "887771851459f8e2701e39a186a377e51bd5b938ed6632d107c6149d47d4c6ab",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/xvattr.h",
  "human_readable_source": " \n\n \n\n \n \n\n \n\n#ifndef _SYS_XVATTR_H\n#define\t_SYS_XVATTR_H\n\n#include <sys/vnode.h>\n#include <sys/string.h>\n\n#define\tAV_SCANSTAMP_SZ\t32\t\t \n\n \ntypedef struct xoptattr {\n\tinode_timespec_t xoa_createtime;\t \n\tuint8_t\t\txoa_archive;\n\tuint8_t\t\txoa_system;\n\tuint8_t\t\txoa_readonly;\n\tuint8_t\t\txoa_hidden;\n\tuint8_t\t\txoa_nounlink;\n\tuint8_t\t\txoa_immutable;\n\tuint8_t\t\txoa_appendonly;\n\tuint8_t\t\txoa_nodump;\n\tuint8_t\t\txoa_opaque;\n\tuint8_t\t\txoa_av_quarantined;\n\tuint8_t\t\txoa_av_modified;\n\tuint8_t\t\txoa_av_scanstamp[AV_SCANSTAMP_SZ];\n\tuint8_t\t\txoa_reparse;\n\tuint64_t\txoa_generation;\n\tuint8_t\t\txoa_offline;\n\tuint8_t\t\txoa_sparse;\n\tuint8_t\t\txoa_projinherit;\n\tuint64_t\txoa_projid;\n} xoptattr_t;\n\n \n\n#define\tXVA_MAPSIZE\t3\t\t \n#define\tXVA_MAGIC\t0x78766174\t \n\n \ntypedef struct xvattr {\n\tvattr_t\t\txva_vattr;\t \n\tuint32_t\txva_magic;\t \n\tuint32_t\txva_mapsize;\t \n\tuint32_t\t*xva_rtnattrmapp;\t \n\tuint32_t\txva_reqattrmap[XVA_MAPSIZE];\t \n\tuint32_t\txva_rtnattrmap[XVA_MAPSIZE];\t \n\txoptattr_t\txva_xoptattrs;\t \n} xvattr_t;\n\n \n#define\tXAT0_INDEX\t0LL\t\t \n#define\tXAT0_CREATETIME\t0x00000001\t \n#define\tXAT0_ARCHIVE\t0x00000002\t \n#define\tXAT0_SYSTEM\t0x00000004\t \n#define\tXAT0_READONLY\t0x00000008\t \n#define\tXAT0_HIDDEN\t0x00000010\t \n#define\tXAT0_NOUNLINK\t0x00000020\t \n#define\tXAT0_IMMUTABLE\t0x00000040\t \n#define\tXAT0_APPENDONLY\t0x00000080\t \n#define\tXAT0_NODUMP\t0x00000100\t \n#define\tXAT0_OPAQUE\t0x00000200\t \n#define\tXAT0_AV_QUARANTINED\t0x00000400\t \n#define\tXAT0_AV_MODIFIED\t0x00000800\t \n#define\tXAT0_AV_SCANSTAMP\t0x00001000\t \n#define\tXAT0_REPARSE\t0x00002000\t \n#define\tXAT0_GEN\t0x00004000\t \n#define\tXAT0_OFFLINE\t0x00008000\t \n#define\tXAT0_SPARSE\t0x00010000\t \n#define\tXAT0_PROJINHERIT\t0x00020000\t \n#define\tXAT0_PROJID\t0x00040000\t \n\n#define\tXAT0_ALL_ATTRS\t(XAT0_CREATETIME|XAT0_ARCHIVE|XAT0_SYSTEM| \\\n    XAT0_READONLY|XAT0_HIDDEN|XAT0_NOUNLINK|XAT0_IMMUTABLE|XAT0_APPENDONLY| \\\n    XAT0_NODUMP|XAT0_OPAQUE|XAT0_AV_QUARANTINED|  XAT0_AV_MODIFIED| \\\n    XAT0_AV_SCANSTAMP|XAT0_REPARSE|XATO_GEN|XAT0_OFFLINE|XAT0_SPARSE| \\\n    XAT0_PROJINHERIT | XAT0_PROJID)\n\n \n#define\tXVA_MASK\t\t0xffffffff\t \n#define\tXVA_SHFT\t\t32\t\t \n\n \n#define\tXVA_INDEX(attr)\t\t((uint32_t)(((attr) >> XVA_SHFT) & XVA_MASK))\n#define\tXVA_ATTRBIT(attr)\t((uint32_t)((attr) & XVA_MASK))\n\n \n#define\tXAT_CREATETIME\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_CREATETIME)\n#define\tXAT_ARCHIVE\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_ARCHIVE)\n#define\tXAT_SYSTEM\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_SYSTEM)\n#define\tXAT_READONLY\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_READONLY)\n#define\tXAT_HIDDEN\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_HIDDEN)\n#define\tXAT_NOUNLINK\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_NOUNLINK)\n#define\tXAT_IMMUTABLE\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_IMMUTABLE)\n#define\tXAT_APPENDONLY\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_APPENDONLY)\n#define\tXAT_NODUMP\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_NODUMP)\n#define\tXAT_OPAQUE\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_OPAQUE)\n#define\tXAT_AV_QUARANTINED\t((XAT0_INDEX << XVA_SHFT) | XAT0_AV_QUARANTINED)\n#define\tXAT_AV_MODIFIED\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_AV_MODIFIED)\n#define\tXAT_AV_SCANSTAMP\t((XAT0_INDEX << XVA_SHFT) | XAT0_AV_SCANSTAMP)\n#define\tXAT_REPARSE\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_REPARSE)\n#define\tXAT_GEN\t\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_GEN)\n#define\tXAT_OFFLINE\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_OFFLINE)\n#define\tXAT_SPARSE\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_SPARSE)\n#define\tXAT_PROJINHERIT\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_PROJINHERIT)\n#define\tXAT_PROJID\t\t((XAT0_INDEX << XVA_SHFT) | XAT0_PROJID)\n\n \n#define\tXVA_RTNATTRMAP(xvap)\t((xvap)->xva_rtnattrmapp)\n\n \n#define\tXVA_SET_REQ(xvap, attr)\t\t\t\t\t\\\n\tASSERT((xvap)->xva_vattr.va_mask & AT_XVATTR);\t\t\\\n\tASSERT((xvap)->xva_magic == XVA_MAGIC);\t\t\t\\\n\t(xvap)->xva_reqattrmap[XVA_INDEX(attr)] |= XVA_ATTRBIT(attr)\n \n#define\tXVA_CLR_REQ(xvap, attr)\t\t\t\t\t\\\n\tASSERT((xvap)->xva_vattr.va_mask & AT_XVATTR);\t\t\\\n\tASSERT((xvap)->xva_magic == XVA_MAGIC);\t\t\t\\\n\t(xvap)->xva_reqattrmap[XVA_INDEX(attr)] &= ~XVA_ATTRBIT(attr)\n\n \n#define\tXVA_SET_RTN(xvap, attr)\t\t\t\t\t\\\n\tASSERT((xvap)->xva_vattr.va_mask & AT_XVATTR);\t\t\\\n\tASSERT((xvap)->xva_magic == XVA_MAGIC);\t\t\t\\\n\t(XVA_RTNATTRMAP(xvap))[XVA_INDEX(attr)] |= XVA_ATTRBIT(attr)\n\n \n#define\tXVA_ISSET_REQ(xvap, attr)\t\t\t\t\t\\\n\t((((xvap)->xva_vattr.va_mask & AT_XVATTR) &&\t\t\t\\\n\t\t((xvap)->xva_magic == XVA_MAGIC) &&\t\t\t\\\n\t\t((xvap)->xva_mapsize > XVA_INDEX(attr))) ?\t\t\\\n\t((xvap)->xva_reqattrmap[XVA_INDEX(attr)] & XVA_ATTRBIT(attr)) :\t0)\n\n \n#define\tXVA_ISSET_RTN(xvap, attr)\t\t\t\t\t\\\n\t((((xvap)->xva_vattr.va_mask & AT_XVATTR) &&\t\t\t\\\n\t\t((xvap)->xva_magic == XVA_MAGIC) &&\t\t\t\\\n\t\t((xvap)->xva_mapsize > XVA_INDEX(attr))) ?\t\t\\\n\t((XVA_RTNATTRMAP(xvap))[XVA_INDEX(attr)] & XVA_ATTRBIT(attr)) : 0)\n\n \nstatic inline void\nxva_init(xvattr_t *xvap)\n{\n\tmemset(xvap, 0, sizeof (xvattr_t));\n\txvap->xva_mapsize = XVA_MAPSIZE;\n\txvap->xva_magic = XVA_MAGIC;\n\txvap->xva_vattr.va_mask = ATTR_XVATTR;\n\txvap->xva_rtnattrmapp = &(xvap->xva_rtnattrmap)[0];\n}\n\n \nstatic inline xoptattr_t *\nxva_getxoptattr(xvattr_t *xvap)\n{\n\txoptattr_t *xoap = NULL;\n\tif (xvap->xva_vattr.va_mask & AT_XVATTR)\n\t\t\txoap = &xvap->xva_xoptattrs;\n\treturn (xoap);\n}\n\n#define\tMODEMASK\t07777\t\t \n#define\tPERMMASK\t00777\t\t \n\n \n#define\tV_ACE_MASK\t0x1\t \n#define\tV_APPEND\t0x2\t \n\n \n\ntypedef struct vsecattr {\n\tuint_t\t\tvsa_mask;\t \n\tint\t\tvsa_aclcnt;\t \n\tvoid\t\t*vsa_aclentp;\t \n\tint\t\tvsa_dfaclcnt;\t \n\tvoid\t\t*vsa_dfaclentp;\t \n\tsize_t\t\tvsa_aclentsz;\t \n\tuint_t\t\tvsa_aclflags;\t \n} vsecattr_t;\n\n \n#define\tVSA_ACL\t\t\t0x0001\n#define\tVSA_ACLCNT\t\t0x0002\n#define\tVSA_DFACL\t\t0x0004\n#define\tVSA_DFACLCNT\t\t0x0008\n#define\tVSA_ACE\t\t\t0x0010\n#define\tVSA_ACECNT\t\t0x0020\n#define\tVSA_ACE_ALLTYPES\t0x0040\n#define\tVSA_ACE_ACLFLAGS\t0x0080\t \n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}