{
  "module_name": "zcp.h",
  "hash_id": "17ba18e179bede7ac80ed60dbe6b9649753c684797ffa1f9beca102ae2699dcf",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/zcp.h",
  "human_readable_source": " \n\n \n\n#ifndef _SYS_ZCP_H\n#define\t_SYS_ZCP_H\n\n#include <sys/dmu_tx.h>\n#include <sys/dsl_pool.h>\n\n#include <sys/lua/lua.h>\n#include <sys/lua/lualib.h>\n#include <sys/lua/lauxlib.h>\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n#define\tZCP_RUN_INFO_KEY \"runinfo\"\n\nextern uint64_t zfs_lua_max_instrlimit;\nextern uint64_t zfs_lua_max_memlimit;\n\nint zcp_argerror(lua_State *, int, const char *, ...);\n\nint zcp_eval(const char *, const char *, boolean_t, uint64_t, uint64_t,\n    nvpair_t *, nvlist_t *);\n\nint zcp_load_list_lib(lua_State *);\n\nint zcp_load_synctask_lib(lua_State *, boolean_t);\n\ntypedef void (zcp_cleanup_t)(void *);\ntypedef struct zcp_cleanup_handler {\n\tzcp_cleanup_t *zch_cleanup_func;\n\tvoid *zch_cleanup_arg;\n\tlist_node_t zch_node;\n} zcp_cleanup_handler_t;\n\ntypedef struct zcp_alloc_arg {\n\tboolean_t\taa_must_succeed;\n\tint64_t\t\taa_alloc_remaining;\n\tint64_t\t\taa_alloc_limit;\n} zcp_alloc_arg_t;\n\ntypedef struct zcp_run_info {\n\tdsl_pool_t\t*zri_pool;\n\n\t \n\tint\t\tzri_space_used;\n\n\t \n\tcred_t\t\t*zri_cred;\n\tproc_t\t\t*zri_proc;\n\n\t \n\tdmu_tx_t\t*zri_tx;\n\n\t \n\tuint64_t\tzri_maxinstrs;\n\n\t \n\tuint64_t\tzri_curinstrs;\n\n\t \n\tboolean_t\tzri_timed_out;\n\n\t \n\tboolean_t\tzri_canceled;\n\n\t \n\tboolean_t\tzri_sync;\n\n\t \n\tlist_t\t\tzri_cleanup_handlers;\n\n\t \n\tlua_State\t*zri_state;\n\n\t \n\tzcp_alloc_arg_t\t*zri_allocargs;\n\n\t \n\tnvlist_t\t*zri_outnvl;\n\n\t \n\tnvlist_t\t*zri_new_zvols;\n\n\t \n\tint\t\tzri_result;\n} zcp_run_info_t;\n\nzcp_run_info_t *zcp_run_info(lua_State *);\nzcp_cleanup_handler_t *zcp_register_cleanup(lua_State *, zcp_cleanup_t, void *);\nvoid zcp_deregister_cleanup(lua_State *, zcp_cleanup_handler_t *);\nvoid zcp_cleanup(lua_State *);\n\n \ntypedef struct zcp_arg {\n\t \n\tconst char *za_name;\n\n\t \n\tconst int za_lua_type;\n} zcp_arg_t;\n\nvoid zcp_parse_args(lua_State *, const char *, const zcp_arg_t *,\n    const zcp_arg_t *);\nint zcp_nvlist_to_lua(lua_State *, nvlist_t *, char *, int);\nint zcp_dataset_hold_error(lua_State *, dsl_pool_t *, const char *, int);\nstruct dsl_dataset *zcp_dataset_hold(lua_State *, dsl_pool_t *,\n    const char *, const void *);\n\ntypedef int (zcp_lib_func_t)(lua_State *);\ntypedef struct zcp_lib_info {\n\tconst char *name;\n\tzcp_lib_func_t *func;\n\tconst zcp_arg_t pargs[4];\n\tconst zcp_arg_t kwargs[2];\n} zcp_lib_info_t;\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}