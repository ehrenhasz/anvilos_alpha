{
  "module_name": "zfs_fuid.h",
  "hash_id": "c7e3165106695282127fac12f588305e2bf08df45800f09dd49579ac5ebaf222",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/zfs_fuid.h",
  "human_readable_source": " \n \n\n#ifndef\t_SYS_FS_ZFS_FUID_H\n#define\t_SYS_FS_ZFS_FUID_H\n\n#ifdef _KERNEL\n#include <sys/sid.h>\n#include <sys/dmu.h>\n#include <sys/zfs_vfsops.h>\n#endif\n#include <sys/avl.h>\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\ntypedef enum {\n\tZFS_OWNER,\n\tZFS_GROUP,\n\tZFS_ACE_USER,\n\tZFS_ACE_GROUP\n} zfs_fuid_type_t;\n\n \n#define\tFUID_SIZE_ESTIMATE(z) ((z)->z_fuid_size + (SPA_MINBLOCKSIZE << 1))\n\n#define\tFUID_INDEX(x)\t((x) >> 32)\n#define\tFUID_RID(x)\t((x) & 0xffffffff)\n#define\tFUID_ENCODE(idx, rid) (((uint64_t)(idx) << 32) | (rid))\n \n\n \ntypedef struct zfs_fuid {\n\tlist_node_t \tz_next;\n\tuint64_t \tz_id;\t\t \n\tuint64_t\tz_domidx;\t \n\tuint64_t\tz_logfuid;\t \n} zfs_fuid_t;\n\n \ntypedef struct zfs_fuid_domain {\n\tlist_node_t\tz_next;\n\tuint64_t\tz_domidx;\t \n\tconst char\t*z_domain;\t \n} zfs_fuid_domain_t;\n\n \ntypedef struct zfs_fuid_info {\n\tlist_t\tz_fuids;\n\tlist_t\tz_domains;\n\tuint64_t z_fuid_owner;\n\tuint64_t z_fuid_group;\n\tchar **z_domain_table;   \n\tuint32_t z_fuid_cnt;\t \n\tuint32_t z_domain_cnt;\t \n\tsize_t\tz_domain_str_sz;  \n} zfs_fuid_info_t;\n\n#ifdef _KERNEL\nstruct znode;\nextern uid_t zfs_fuid_map_id(zfsvfs_t *, uint64_t, cred_t *, zfs_fuid_type_t);\nextern void zfs_fuid_node_add(zfs_fuid_info_t **, const char *, uint32_t,\n    uint64_t, uint64_t, zfs_fuid_type_t);\nextern void zfs_fuid_destroy(zfsvfs_t *);\nextern uint64_t zfs_fuid_create_cred(zfsvfs_t *, zfs_fuid_type_t,\n    cred_t *, zfs_fuid_info_t **);\nextern uint64_t zfs_fuid_create(zfsvfs_t *, uint64_t, cred_t *, zfs_fuid_type_t,\n    zfs_fuid_info_t **);\nextern void zfs_fuid_map_ids(struct znode *zp, cred_t *cr,\n    uid_t *uid, uid_t *gid);\nextern zfs_fuid_info_t *zfs_fuid_info_alloc(void);\nextern void zfs_fuid_info_free(zfs_fuid_info_t *);\nextern boolean_t zfs_groupmember(zfsvfs_t *, uint64_t, cred_t *);\nvoid zfs_fuid_sync(zfsvfs_t *, dmu_tx_t *);\nextern const char *zfs_fuid_find_by_idx(zfsvfs_t *zfsvfs, uint32_t idx);\nextern void zfs_fuid_txhold(zfsvfs_t *zfsvfs, dmu_tx_t *tx);\nextern int zfs_id_to_fuidstr(zfsvfs_t *zfsvfs, const char *domain, uid_t rid,\n    char *buf, size_t len, boolean_t addok);\n#endif\n\nconst char *zfs_fuid_idx_domain(avl_tree_t *, uint32_t);\nvoid zfs_fuid_avl_tree_create(avl_tree_t *, avl_tree_t *);\nuint64_t zfs_fuid_table_load(objset_t *, uint64_t, avl_tree_t *, avl_tree_t *);\nvoid zfs_fuid_table_destroy(avl_tree_t *, avl_tree_t *);\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}