{
  "module_name": "txg.h",
  "hash_id": "dc02422396e97a1afa5829f56428c8a6a6a27a4cc45aea4b163761aa2f7787c5",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/txg.h",
  "human_readable_source": " \n \n \n\n#ifndef _SYS_TXG_H\n#define\t_SYS_TXG_H\n\n#include <sys/spa.h>\n#include <sys/zfs_context.h>\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n#define\tTXG_CONCURRENT_STATES\t3\t \n#define\tTXG_SIZE\t\t4\t\t \n#define\tTXG_MASK\t\t(TXG_SIZE - 1)\t \n#define\tTXG_INITIAL\t\tTXG_SIZE\t \n#define\tTXG_IDX\t\t\t(txg & TXG_MASK)\n#define\tTXG_UNKNOWN\t\t0\n\n \n#define\tTXG_DEFER_SIZE\t\t2\n\ntypedef struct tx_cpu tx_cpu_t;\n\ntypedef struct txg_handle {\n\ttx_cpu_t\t*th_cpu;\n\tuint64_t\tth_txg;\n} txg_handle_t;\n\ntypedef struct txg_node {\n\tstruct txg_node\t*tn_next[TXG_SIZE];\n\tuint8_t\t\ttn_member[TXG_SIZE];\n} txg_node_t;\n\ntypedef struct txg_list {\n\tkmutex_t\ttl_lock;\n\tsize_t\t\ttl_offset;\n\tspa_t\t\t*tl_spa;\n\ttxg_node_t\t*tl_head[TXG_SIZE];\n} txg_list_t;\n\nstruct dsl_pool;\n\nextern void txg_init(struct dsl_pool *dp, uint64_t txg);\nextern void txg_fini(struct dsl_pool *dp);\nextern void txg_sync_start(struct dsl_pool *dp);\nextern void txg_sync_stop(struct dsl_pool *dp);\nextern uint64_t txg_hold_open(struct dsl_pool *dp, txg_handle_t *txghp);\nextern void txg_rele_to_quiesce(txg_handle_t *txghp);\nextern void txg_rele_to_sync(txg_handle_t *txghp);\nextern void txg_register_callbacks(txg_handle_t *txghp, list_t *tx_callbacks);\n\nextern void txg_delay(struct dsl_pool *dp, uint64_t txg, hrtime_t delta,\n    hrtime_t resolution);\nextern void txg_kick(struct dsl_pool *dp, uint64_t txg);\n\n \nextern void txg_wait_synced(struct dsl_pool *dp, uint64_t txg);\n\n \nextern boolean_t txg_wait_synced_sig(struct dsl_pool *dp, uint64_t txg);\n\n \nextern void txg_wait_open(struct dsl_pool *dp, uint64_t txg,\n    boolean_t should_quiesce);\n\n \nextern boolean_t txg_stalled(struct dsl_pool *dp);\n\n \nextern boolean_t txg_sync_waiting(struct dsl_pool *dp);\n\nextern void txg_verify(spa_t *spa, uint64_t txg);\n\n \nextern void txg_wait_callbacks(struct dsl_pool *dp);\n\n \n\n#define\tTXG_CLEAN(txg)\t((txg) - 1)\n\nextern void txg_list_create(txg_list_t *tl, spa_t *spa, size_t offset);\nextern void txg_list_destroy(txg_list_t *tl);\nextern boolean_t txg_list_empty(txg_list_t *tl, uint64_t txg);\nextern boolean_t txg_all_lists_empty(txg_list_t *tl);\nextern boolean_t txg_list_add(txg_list_t *tl, void *p, uint64_t txg);\nextern boolean_t txg_list_add_tail(txg_list_t *tl, void *p, uint64_t txg);\nextern void *txg_list_remove(txg_list_t *tl, uint64_t txg);\nextern void *txg_list_remove_this(txg_list_t *tl, void *p, uint64_t txg);\nextern boolean_t txg_list_member(txg_list_t *tl, void *p, uint64_t txg);\nextern void *txg_list_head(txg_list_t *tl, uint64_t txg);\nextern void *txg_list_next(txg_list_t *tl, void *p, uint64_t txg);\n\n \nextern uint_t zfs_txg_timeout;\n\n\n#ifdef ZFS_DEBUG\n#define\tTXG_VERIFY(spa, txg)\t\ttxg_verify(spa, txg)\n#else\n#define\tTXG_VERIFY(spa, txg)\n#endif\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}