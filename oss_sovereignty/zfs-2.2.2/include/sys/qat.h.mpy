{
  "module_name": "qat.h",
  "hash_id": "0d251c2ff3169324c51c1acffe510173f1e3cb134eb64df7a578806641c3e17e",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/qat.h",
  "human_readable_source": " \n\n#ifndef\t_SYS_QAT_H\n#define\t_SYS_QAT_H\n\ntypedef enum qat_compress_dir {\n\tQAT_DECOMPRESS = 0,\n\tQAT_COMPRESS = 1,\n} qat_compress_dir_t;\n\ntypedef enum qat_encrypt_dir {\n\tQAT_DECRYPT = 0,\n\tQAT_ENCRYPT = 1,\n} qat_encrypt_dir_t;\n\n\n#if defined(_KERNEL) && defined(HAVE_QAT)\n#include <sys/zio.h>\n#include <sys/crypto/api.h>\n#include \"cpa.h\"\n#include \"dc/cpa_dc.h\"\n#include \"lac/cpa_cy_sym.h\"\n\n \n#define\tQAT_MIN_BUF_SIZE\t(4*1024)\n#define\tQAT_MAX_BUF_SIZE\t(128*1024)\n\n \ntypedef struct qat_stats {\n\t \n\tkstat_named_t comp_requests;\n\t \n\tkstat_named_t comp_total_in_bytes;\n\t \n\tkstat_named_t comp_total_out_bytes;\n\t \n\tkstat_named_t decomp_requests;\n\t \n\tkstat_named_t decomp_total_in_bytes;\n\t \n\tkstat_named_t decomp_total_out_bytes;\n\t \n\tkstat_named_t dc_fails;\n\n\t \n\tkstat_named_t encrypt_requests;\n\t \n\tkstat_named_t encrypt_total_in_bytes;\n\t \n\tkstat_named_t encrypt_total_out_bytes;\n\t \n\tkstat_named_t decrypt_requests;\n\t \n\tkstat_named_t decrypt_total_in_bytes;\n\t \n\tkstat_named_t decrypt_total_out_bytes;\n\t \n\tkstat_named_t crypt_fails;\n\n\t \n\tkstat_named_t cksum_requests;\n\t \n\tkstat_named_t cksum_total_in_bytes;\n\t \n\tkstat_named_t cksum_fails;\n} qat_stats_t;\n\n#define\tQAT_STAT_INCR(stat, val) \\\n\tatomic_add_64(&qat_stats.stat.value.ui64, (val))\n#define\tQAT_STAT_BUMP(stat) \\\n\tQAT_STAT_INCR(stat, 1)\n\nextern qat_stats_t qat_stats;\nextern int zfs_qat_compress_disable;\nextern int zfs_qat_checksum_disable;\nextern int zfs_qat_encrypt_disable;\n\n \nstatic inline struct page *\nqat_mem_to_page(void *addr)\n{\n\tif (!is_vmalloc_addr(addr))\n\t\treturn (virt_to_page(addr));\n\n\treturn (vmalloc_to_page(addr));\n}\n\nCpaStatus qat_mem_alloc_contig(void **pp_mem_addr, Cpa32U size_bytes);\nvoid qat_mem_free_contig(void **pp_mem_addr);\n#define\tQAT_PHYS_CONTIG_ALLOC(pp_mem_addr, size_bytes)\t\\\n\tqat_mem_alloc_contig((void *)(pp_mem_addr), (size_bytes))\n#define\tQAT_PHYS_CONTIG_FREE(p_mem_addr)\t\\\n\tqat_mem_free_contig((void *)&(p_mem_addr))\n\nextern int qat_dc_init(void);\nextern void qat_dc_fini(void);\nextern int qat_cy_init(void);\nextern void qat_cy_fini(void);\nextern int qat_init(void);\nextern void qat_fini(void);\n\n \n#define\tCPA_STATUS_INCOMPRESSIBLE\t\t(-127)\n\nextern boolean_t qat_dc_use_accel(size_t s_len);\nextern boolean_t qat_crypt_use_accel(size_t s_len);\nextern boolean_t qat_checksum_use_accel(size_t s_len);\nextern int qat_compress(qat_compress_dir_t dir, char *src, int src_len,\n    char *dst, int dst_len, size_t *c_len);\nextern int qat_crypt(qat_encrypt_dir_t dir, uint8_t *src_buf, uint8_t *dst_buf,\n    uint8_t *aad_buf, uint32_t aad_len, uint8_t *iv_buf, uint8_t *digest_buf,\n    crypto_key_t *key, uint64_t crypt, uint32_t enc_len);\nextern int qat_checksum(uint64_t cksum, uint8_t *buf, uint64_t size,\n    zio_cksum_t *zcp);\n#else\n#define\tCPA_STATUS_SUCCESS\t\t\t0\n#define\tCPA_STATUS_INCOMPRESSIBLE\t\t(-127)\n#define\tqat_init()\n#define\tqat_fini()\n#define\tqat_dc_use_accel(s_len)\t\t\t((void) sizeof (s_len), 0)\n#define\tqat_crypt_use_accel(s_len)\t\t((void) sizeof (s_len), 0)\n#define\tqat_checksum_use_accel(s_len)\t\t((void) sizeof (s_len), 0)\n#define\tqat_compress(dir, s, sl, d, dl, cl)\t\t\t\\\n\t((void) sizeof (dir), (void) sizeof (s), (void) sizeof (sl), \\\n\t    (void) sizeof (d), (void) sizeof (dl), (void) sizeof (cl), 0)\n#define\tqat_crypt(dir, s, d, a, al, i, db, k, c, el)\t\t\\\n\t((void) sizeof (dir), (void) sizeof (s), (void) sizeof (d), \\\n\t    (void) sizeof (a),  (void) sizeof (al), (void) sizeof (i), \\\n\t    (void) sizeof (db), (void) sizeof (k), (void) sizeof (c), \\\n\t    (void) sizeof (el), 0)\n#define\tqat_checksum(c, buf, s, z)\t\t\t\t\\\n\t((void) sizeof (c), (void) sizeof (buf), (void) sizeof (s), \\\n\t    (void) sizeof (z), 0)\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}