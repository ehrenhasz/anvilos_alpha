{
  "module_name": "brt_impl.h",
  "hash_id": "9f939ba1b04258e460c35046e12124e7a17c34fb622aec3c24ab4ae0d3db4c52",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/brt_impl.h",
  "human_readable_source": " \n \n\n#ifndef _SYS_BRT_IMPL_H\n#define\t_SYS_BRT_IMPL_H\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n \n#define\tBRT_OBJECT_VDEV_PREFIX\t\"com.fudosecurity:brt:vdev:\"\n\n \n#define\tBRT_RANGESIZE\t(16 * 1024 * 1024)\n_Static_assert(BRT_RANGESIZE / SPA_MINBLOCKSIZE <= UINT16_MAX,\n\t\"BRT_RANGESIZE is too large.\");\n \n#define\tBRT_BLOCKSIZE\t(32 * 1024)\n#define\tBRT_RANGESIZE_TO_NBLOCKS(size)\t\t\t\t\t\\\n\t(((size) - 1) / BRT_BLOCKSIZE / sizeof (uint16_t) + 1)\n\n#define\tBRT_LITTLE_ENDIAN\t0\n#define\tBRT_BIG_ENDIAN\t\t1\n#ifdef _ZFS_LITTLE_ENDIAN\n#define\tBRT_NATIVE_BYTEORDER\t\tBRT_LITTLE_ENDIAN\n#define\tBRT_NON_NATIVE_BYTEORDER\tBRT_BIG_ENDIAN\n#else\n#define\tBRT_NATIVE_BYTEORDER\t\tBRT_BIG_ENDIAN\n#define\tBRT_NON_NATIVE_BYTEORDER\tBRT_LITTLE_ENDIAN\n#endif\n\ntypedef struct brt_vdev_phys {\n\tuint64_t\tbvp_mos_entries;\n\tuint64_t\tbvp_size;\n\tuint64_t\tbvp_byteorder;\n\tuint64_t\tbvp_totalcount;\n\tuint64_t\tbvp_rangesize;\n\tuint64_t\tbvp_usedspace;\n\tuint64_t\tbvp_savedspace;\n} brt_vdev_phys_t;\n\ntypedef struct brt_vdev {\n\t \n\tuint64_t\tbv_vdevid;\n\t \n\tboolean_t\tbv_initiated;\n\t \n\tuint64_t\tbv_mos_brtvdev;\n\t \n\tuint64_t\tbv_mos_entries;\n\t \n\tavl_tree_t\tbv_tree;\n\t \n\tboolean_t\tbv_need_byteswap;\n\t \n\tuint64_t\tbv_size;\n\t \n\tuint16_t\t*bv_entcount;\n\t \n\tuint64_t\tbv_totalcount;\n\t \n\tuint64_t\tbv_usedspace;\n\t \n\tuint64_t\tbv_savedspace;\n\t \n\tboolean_t\tbv_meta_dirty;\n\t \n\tboolean_t\tbv_entcount_dirty;\n\t \n\tulong_t\t\t*bv_bitmap;\n\tuint64_t\tbv_nblocks;\n} brt_vdev_t;\n\n \ntypedef struct brt {\n\tkrwlock_t\tbrt_lock;\n\tspa_t\t\t*brt_spa;\n#define\tbrt_mos\t\tbrt_spa->spa_meta_objset\n\tuint64_t\tbrt_rangesize;\n\tuint64_t\tbrt_usedspace;\n\tuint64_t\tbrt_savedspace;\n\tavl_tree_t\tbrt_pending_tree[TXG_SIZE];\n\tkmutex_t\tbrt_pending_lock[TXG_SIZE];\n\t \n\tuint64_t\tbrt_nentries;\n\tbrt_vdev_t\t*brt_vdevs;\n\tuint64_t\tbrt_nvdevs;\n} brt_t;\n\n \n#define\tBRT_KEY_WORDS\t(1)\n\n \ntypedef struct brt_entry {\n\tuint64_t\tbre_offset;\n\tuint64_t\tbre_refcount;\n\tavl_node_t\tbre_node;\n} brt_entry_t;\n\ntypedef struct brt_pending_entry {\n\tblkptr_t\tbpe_bp;\n\tint\t\tbpe_count;\n\tavl_node_t\tbpe_node;\n} brt_pending_entry_t;\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}