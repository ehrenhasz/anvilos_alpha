{
  "module_name": "arc_impl.h",
  "hash_id": "4872e3244578cc73ad8197bf731829a4d08c2dd71a817a04f9b5fd5e2b3881f7",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/arc_impl.h",
  "human_readable_source": " \n \n\n#ifndef _SYS_ARC_IMPL_H\n#define\t_SYS_ARC_IMPL_H\n\n#include <sys/arc.h>\n#include <sys/multilist.h>\n#include <sys/zio_crypt.h>\n#include <sys/zthr.h>\n#include <sys/aggsum.h>\n#include <sys/wmsum.h>\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n \n\ntypedef struct arc_state {\n\t \n\tmultilist_t arcs_list[ARC_BUFC_NUMTYPES];\n\t \n\tarc_state_type_t arcs_state;\n\t \n\tzfs_refcount_t arcs_size[ARC_BUFC_NUMTYPES] ____cacheline_aligned;\n\t \n\tzfs_refcount_t arcs_esize[ARC_BUFC_NUMTYPES];\n\t \n\twmsum_t arcs_hits[ARC_BUFC_NUMTYPES];\n} arc_state_t;\n\ntypedef struct arc_callback arc_callback_t;\n\nstruct arc_callback {\n\tvoid\t\t\t*acb_private;\n\tarc_read_done_func_t\t*acb_done;\n\tarc_buf_t\t\t*acb_buf;\n\tboolean_t\t\tacb_encrypted;\n\tboolean_t\t\tacb_compressed;\n\tboolean_t\t\tacb_noauth;\n\tboolean_t\t\tacb_nobuf;\n\tboolean_t\t\tacb_wait;\n\tint\t\t\tacb_wait_error;\n\tkmutex_t\t\tacb_wait_lock;\n\tkcondvar_t\t\tacb_wait_cv;\n\tzbookmark_phys_t\tacb_zb;\n\tzio_t\t\t\t*acb_zio_dummy;\n\tzio_t\t\t\t*acb_zio_head;\n\tarc_callback_t\t\t*acb_prev;\n\tarc_callback_t\t\t*acb_next;\n};\n\ntypedef struct arc_write_callback arc_write_callback_t;\n\nstruct arc_write_callback {\n\tvoid\t\t\t*awcb_private;\n\tarc_write_done_func_t\t*awcb_ready;\n\tarc_write_done_func_t\t*awcb_children_ready;\n\tarc_write_done_func_t\t*awcb_done;\n\tarc_buf_t\t\t*awcb_buf;\n};\n\n \ntypedef struct l1arc_buf_hdr {\n\t \n\tarc_state_t\t\t*b_state;\n\tmultilist_node_t\tb_arc_node;\n\n\t \n\tclock_t\t\t\tb_arc_access;\n\tuint32_t\t\tb_mru_hits;\n\tuint32_t\t\tb_mru_ghost_hits;\n\tuint32_t\t\tb_mfu_hits;\n\tuint32_t\t\tb_mfu_ghost_hits;\n\tuint8_t\t\t\tb_byteswap;\n\tarc_buf_t\t\t*b_buf;\n\n\t \n\tzfs_refcount_t\t\tb_refcnt;\n\n\tarc_callback_t\t\t*b_acb;\n\tabd_t\t\t\t*b_pabd;\n\n#ifdef ZFS_DEBUG\n\tzio_cksum_t\t\t*b_freeze_cksum;\n\tkmutex_t\t\tb_freeze_lock;\n#endif\n} l1arc_buf_hdr_t;\n\ntypedef enum l2arc_dev_hdr_flags_t {\n\tL2ARC_DEV_HDR_EVICT_FIRST = (1 << 0)\t \n} l2arc_dev_hdr_flags_t;\n\n \ntypedef struct l2arc_log_blkptr {\n\t \n\tuint64_t\tlbp_daddr;\n\t \n\tuint64_t\tlbp_payload_asize;\n\t \n\tuint64_t\tlbp_payload_start;\n\t \n\tuint64_t\tlbp_prop;\n\tzio_cksum_t\tlbp_cksum;\t \n} l2arc_log_blkptr_t;\n\n \ntypedef struct l2arc_dev_hdr_phys {\n\tuint64_t\tdh_magic;\t \n\tuint64_t\tdh_version;\t \n\n\t \n\tuint64_t\tdh_spa_guid;\n\tuint64_t\tdh_vdev_guid;\n\tuint64_t\tdh_log_entries;\t\t \n\tuint64_t\tdh_evict;\t\t \n\tuint64_t\tdh_flags;\t\t \n\t \n\tuint64_t\tdh_start;\t\t \n\tuint64_t\tdh_end;\t\t\t \n\t \n\tl2arc_log_blkptr_t\tdh_start_lbps[2];\n\t \n\tuint64_t\tdh_lb_asize;\t\t \n\tuint64_t\tdh_lb_count;\t\t \n\t \n\tuint64_t\t\tdh_trim_action_time;\n\tuint64_t\t\tdh_trim_state;\n\tconst uint64_t\t\tdh_pad[30];\t \n\tzio_eck_t\t\tdh_tail;\n} l2arc_dev_hdr_phys_t;\n_Static_assert(sizeof (l2arc_dev_hdr_phys_t) == SPA_MINBLOCKSIZE,\n\t\"l2arc_dev_hdr_phys_t wrong size\");\n\n \ntypedef struct l2arc_log_ent_phys {\n\tdva_t\t\t\tle_dva;\t\t \n\tuint64_t\t\tle_birth;\t \n\t \n\tuint64_t\t\tle_prop;\n\tuint64_t\t\tle_daddr;\t \n\tuint64_t\t\tle_complevel;\n\t \n\tconst uint64_t\t\tle_pad[2];\t \n} l2arc_log_ent_phys_t;\n\n#define\tL2ARC_LOG_BLK_MAX_ENTRIES\t(1022)\n\n \ntypedef struct l2arc_log_blk_phys {\n\tuint64_t\t\tlb_magic;\t \n\t \n\tl2arc_log_blkptr_t\tlb_prev_lbp;\t \n\t \n\tuint64_t\t\tlb_pad[7];\n\t \n\tl2arc_log_ent_phys_t\tlb_entries[L2ARC_LOG_BLK_MAX_ENTRIES];\n} l2arc_log_blk_phys_t;\t\t\t\t \n\n \n_Static_assert(IS_P2ALIGNED(sizeof (l2arc_log_blk_phys_t),\n    1ULL << SPA_MINBLOCKSHIFT), \"l2arc_log_blk_phys_t misaligned\");\n_Static_assert(sizeof (l2arc_log_blk_phys_t) >= SPA_MINBLOCKSIZE,\n\t\"l2arc_log_blk_phys_t too small\");\n_Static_assert(sizeof (l2arc_log_blk_phys_t) <= SPA_MAXBLOCKSIZE,\n\t\"l2arc_log_blk_phys_t too big\");\n\n \ntypedef struct l2arc_lb_abd_buf {\n\tabd_t\t\t*abd;\n\tlist_node_t\tnode;\n} l2arc_lb_abd_buf_t;\n\n \ntypedef struct l2arc_lb_ptr_buf {\n\tl2arc_log_blkptr_t\t*lb_ptr;\n\tlist_node_t\t\tnode;\n} l2arc_lb_ptr_buf_t;\n\n \n#define\tL2BLK_GET_LSIZE(field)\t\\\n\tBF64_GET_SB((field), 0, SPA_LSIZEBITS, SPA_MINBLOCKSHIFT, 1)\n#define\tL2BLK_SET_LSIZE(field, x)\t\\\n\tBF64_SET_SB((field), 0, SPA_LSIZEBITS, SPA_MINBLOCKSHIFT, 1, x)\n#define\tL2BLK_GET_PSIZE(field)\t\\\n\tBF64_GET_SB((field), 16, SPA_PSIZEBITS, SPA_MINBLOCKSHIFT, 1)\n#define\tL2BLK_SET_PSIZE(field, x)\t\\\n\tBF64_SET_SB((field), 16, SPA_PSIZEBITS, SPA_MINBLOCKSHIFT, 1, x)\n#define\tL2BLK_GET_COMPRESS(field)\t\\\n\tBF64_GET((field), 32, SPA_COMPRESSBITS)\n#define\tL2BLK_SET_COMPRESS(field, x)\t\\\n\tBF64_SET((field), 32, SPA_COMPRESSBITS, x)\n#define\tL2BLK_GET_PREFETCH(field)\tBF64_GET((field), 39, 1)\n#define\tL2BLK_SET_PREFETCH(field, x)\tBF64_SET((field), 39, 1, x)\n#define\tL2BLK_GET_CHECKSUM(field)\tBF64_GET((field), 40, 8)\n#define\tL2BLK_SET_CHECKSUM(field, x)\tBF64_SET((field), 40, 8, x)\n \n#define\tL2BLK_GET_TYPE(field)\t\t(BF64_GET((field), 48, 8) - 1)\n#define\tL2BLK_SET_TYPE(field, x)\tBF64_SET((field), 48, 8, (x) + 1)\n#define\tL2BLK_GET_PROTECTED(field)\tBF64_GET((field), 56, 1)\n#define\tL2BLK_SET_PROTECTED(field, x)\tBF64_SET((field), 56, 1, x)\n#define\tL2BLK_GET_STATE(field)\t\tBF64_GET((field), 57, 4)\n#define\tL2BLK_SET_STATE(field, x)\tBF64_SET((field), 57, 4, x)\n\n#define\tPTR_SWAP(x, y)\t\t\\\n\tdo {\t\t\t\\\n\t\tvoid *tmp = (x);\\\n\t\tx = y;\t\t\\\n\t\ty = tmp;\t\\\n\t} while (0)\n\n#define\tL2ARC_DEV_HDR_MAGIC\t0x5a46534341434845LLU\t \n#define\tL2ARC_LOG_BLK_MAGIC\t0x4c4f47424c4b4844LLU\t \n\n \ntypedef struct l2arc_dev {\n\tvdev_t\t\t\t*l2ad_vdev;\t \n\tspa_t\t\t\t*l2ad_spa;\t \n\tuint64_t\t\tl2ad_hand;\t \n\tuint64_t\t\tl2ad_start;\t \n\tuint64_t\t\tl2ad_end;\t \n\tboolean_t\t\tl2ad_first;\t \n\tboolean_t\t\tl2ad_writing;\t \n\tkmutex_t\t\tl2ad_mtx;\t \n\tlist_t\t\t\tl2ad_buflist;\t \n\tlist_node_t\t\tl2ad_node;\t \n\tzfs_refcount_t\t\tl2ad_alloc;\t \n\t \n\tl2arc_dev_hdr_phys_t\t*l2ad_dev_hdr;\t \n\tuint64_t\t\tl2ad_dev_hdr_asize;  \n\tl2arc_log_blk_phys_t\tl2ad_log_blk;\t \n\tint\t\t\tl2ad_log_ent_idx;  \n\t \n\tuint64_t\t\tl2ad_log_blk_payload_asize;\n\t \n\tuint64_t\t\tl2ad_log_blk_payload_start;\n\t \n\tboolean_t\t\tl2ad_rebuild;\n\tboolean_t\t\tl2ad_rebuild_cancel;\n\tboolean_t\t\tl2ad_rebuild_began;\n\tuint64_t\t\tl2ad_log_entries;    \n\tuint64_t\t\tl2ad_evict;\t  \n\t \n\tlist_t\t\t\tl2ad_lbptr_list;\n\t \n\tzfs_refcount_t\t\tl2ad_lb_asize;\n\t \n\tzfs_refcount_t\t\tl2ad_lb_count;\n\tboolean_t\t\tl2ad_trim_all;  \n} l2arc_dev_t;\n\n \ntypedef struct arc_buf_hdr_crypt {\n\tabd_t\t\t\t*b_rabd;\t \n\n\t \n\tuint64_t\t\tb_dsobj;\n\n\tdmu_object_type_t\tb_ot;\t\t \n\n\t \n\tuint8_t\t\t\tb_salt[ZIO_DATA_SALT_LEN];\n\tuint8_t\t\t\tb_iv[ZIO_DATA_IV_LEN];\n\n\t \n\tuint8_t\t\t\tb_mac[ZIO_DATA_MAC_LEN];\n} arc_buf_hdr_crypt_t;\n\ntypedef struct l2arc_buf_hdr {\n\t \n\tl2arc_dev_t\t\t*b_dev;\t\t \n\tuint64_t\t\tb_daddr;\t \n\tuint32_t\t\tb_hits;\n\tarc_state_type_t\tb_arcs_state;\n\tlist_node_t\t\tb_l2node;\n} l2arc_buf_hdr_t;\n\ntypedef struct l2arc_write_callback {\n\tl2arc_dev_t\t*l2wcb_dev;\t\t \n\tarc_buf_hdr_t\t*l2wcb_head;\t\t \n\t \n\tlist_t\t\tl2wcb_abd_list;\n} l2arc_write_callback_t;\n\nstruct arc_buf_hdr {\n\t \n\tdva_t\t\t\tb_dva;\n\tuint64_t\t\tb_birth;\n\n\tarc_buf_contents_t\tb_type;\n\tuint8_t\t\t\tb_complevel;\n\tuint8_t\t\t\tb_reserved1;  \n\tuint16_t\t\tb_reserved2;  \n\tarc_buf_hdr_t\t\t*b_hash_next;\n\tarc_flags_t\t\tb_flags;\n\n\t \n\tuint16_t\t\tb_psize;\n\n\t \n\tuint16_t\t\tb_lsize;\t \n\tuint64_t\t\tb_spa;\t\t \n\n\t \n\tl2arc_buf_hdr_t\t\tb_l2hdr;\n\t \n\tl1arc_buf_hdr_t\t\tb_l1hdr;\n\t \n\tarc_buf_hdr_crypt_t b_crypt_hdr;\n};\n\ntypedef struct arc_stats {\n\t \n\tkstat_named_t arcstat_hits;\n\t \n\tkstat_named_t arcstat_iohits;\n\t \n\tkstat_named_t arcstat_misses;\n\t \n\tkstat_named_t arcstat_demand_data_hits;\n\tkstat_named_t arcstat_demand_data_iohits;\n\tkstat_named_t arcstat_demand_data_misses;\n\t \n\tkstat_named_t arcstat_demand_metadata_hits;\n\tkstat_named_t arcstat_demand_metadata_iohits;\n\tkstat_named_t arcstat_demand_metadata_misses;\n\t \n\tkstat_named_t arcstat_prefetch_data_hits;\n\tkstat_named_t arcstat_prefetch_data_iohits;\n\tkstat_named_t arcstat_prefetch_data_misses;\n\t \n\tkstat_named_t arcstat_prefetch_metadata_hits;\n\tkstat_named_t arcstat_prefetch_metadata_iohits;\n\tkstat_named_t arcstat_prefetch_metadata_misses;\n\tkstat_named_t arcstat_mru_hits;\n\tkstat_named_t arcstat_mru_ghost_hits;\n\tkstat_named_t arcstat_mfu_hits;\n\tkstat_named_t arcstat_mfu_ghost_hits;\n\tkstat_named_t arcstat_uncached_hits;\n\tkstat_named_t arcstat_deleted;\n\t \n\tkstat_named_t arcstat_mutex_miss;\n\t \n\tkstat_named_t arcstat_access_skip;\n\t \n\tkstat_named_t arcstat_evict_skip;\n\t \n\tkstat_named_t arcstat_evict_not_enough;\n\tkstat_named_t arcstat_evict_l2_cached;\n\tkstat_named_t arcstat_evict_l2_eligible;\n\tkstat_named_t arcstat_evict_l2_eligible_mfu;\n\tkstat_named_t arcstat_evict_l2_eligible_mru;\n\tkstat_named_t arcstat_evict_l2_ineligible;\n\tkstat_named_t arcstat_evict_l2_skip;\n\tkstat_named_t arcstat_hash_elements;\n\tkstat_named_t arcstat_hash_elements_max;\n\tkstat_named_t arcstat_hash_collisions;\n\tkstat_named_t arcstat_hash_chains;\n\tkstat_named_t arcstat_hash_chain_max;\n\tkstat_named_t arcstat_meta;\n\tkstat_named_t arcstat_pd;\n\tkstat_named_t arcstat_pm;\n\tkstat_named_t arcstat_c;\n\tkstat_named_t arcstat_c_min;\n\tkstat_named_t arcstat_c_max;\n\tkstat_named_t arcstat_size;\n\t \n\tkstat_named_t arcstat_compressed_size;\n\t \n\tkstat_named_t arcstat_uncompressed_size;\n\t \n\tkstat_named_t arcstat_overhead_size;\n\t \n\tkstat_named_t arcstat_hdr_size;\n\t \n\tkstat_named_t arcstat_data_size;\n\t \n\tkstat_named_t arcstat_metadata_size;\n\t \n\tkstat_named_t arcstat_dbuf_size;\n\t \n\tkstat_named_t arcstat_dnode_size;\n\t \n\tkstat_named_t arcstat_bonus_size;\n#if defined(COMPAT_FREEBSD11)\n\t \n\tkstat_named_t arcstat_other_size;\n#endif\n\n\t \n\tkstat_named_t arcstat_anon_size;\n\tkstat_named_t arcstat_anon_data;\n\tkstat_named_t arcstat_anon_metadata;\n\t \n\tkstat_named_t arcstat_anon_evictable_data;\n\t \n\tkstat_named_t arcstat_anon_evictable_metadata;\n\t \n\tkstat_named_t arcstat_mru_size;\n\tkstat_named_t arcstat_mru_data;\n\tkstat_named_t arcstat_mru_metadata;\n\t \n\tkstat_named_t arcstat_mru_evictable_data;\n\t \n\tkstat_named_t arcstat_mru_evictable_metadata;\n\t \n\tkstat_named_t arcstat_mru_ghost_size;\n\tkstat_named_t arcstat_mru_ghost_data;\n\tkstat_named_t arcstat_mru_ghost_metadata;\n\t \n\tkstat_named_t arcstat_mru_ghost_evictable_data;\n\t \n\tkstat_named_t arcstat_mru_ghost_evictable_metadata;\n\t \n\tkstat_named_t arcstat_mfu_size;\n\tkstat_named_t arcstat_mfu_data;\n\tkstat_named_t arcstat_mfu_metadata;\n\t \n\tkstat_named_t arcstat_mfu_evictable_data;\n\t \n\tkstat_named_t arcstat_mfu_evictable_metadata;\n\t \n\tkstat_named_t arcstat_mfu_ghost_size;\n\tkstat_named_t arcstat_mfu_ghost_data;\n\tkstat_named_t arcstat_mfu_ghost_metadata;\n\t \n\tkstat_named_t arcstat_mfu_ghost_evictable_data;\n\t \n\tkstat_named_t arcstat_mfu_ghost_evictable_metadata;\n\t \n\tkstat_named_t arcstat_uncached_size;\n\tkstat_named_t arcstat_uncached_data;\n\tkstat_named_t arcstat_uncached_metadata;\n\t \n\tkstat_named_t arcstat_uncached_evictable_data;\n\t \n\tkstat_named_t arcstat_uncached_evictable_metadata;\n\tkstat_named_t arcstat_l2_hits;\n\tkstat_named_t arcstat_l2_misses;\n\t \n\tkstat_named_t arcstat_l2_prefetch_asize;\n\tkstat_named_t arcstat_l2_mru_asize;\n\tkstat_named_t arcstat_l2_mfu_asize;\n\t \n\tkstat_named_t arcstat_l2_bufc_data_asize;\n\tkstat_named_t arcstat_l2_bufc_metadata_asize;\n\tkstat_named_t arcstat_l2_feeds;\n\tkstat_named_t arcstat_l2_rw_clash;\n\tkstat_named_t arcstat_l2_read_bytes;\n\tkstat_named_t arcstat_l2_write_bytes;\n\tkstat_named_t arcstat_l2_writes_sent;\n\tkstat_named_t arcstat_l2_writes_done;\n\tkstat_named_t arcstat_l2_writes_error;\n\tkstat_named_t arcstat_l2_writes_lock_retry;\n\tkstat_named_t arcstat_l2_evict_lock_retry;\n\tkstat_named_t arcstat_l2_evict_reading;\n\tkstat_named_t arcstat_l2_evict_l1cached;\n\tkstat_named_t arcstat_l2_free_on_write;\n\tkstat_named_t arcstat_l2_abort_lowmem;\n\tkstat_named_t arcstat_l2_cksum_bad;\n\tkstat_named_t arcstat_l2_io_error;\n\tkstat_named_t arcstat_l2_lsize;\n\tkstat_named_t arcstat_l2_psize;\n\tkstat_named_t arcstat_l2_hdr_size;\n\t \n\tkstat_named_t arcstat_l2_log_blk_writes;\n\t \n\tkstat_named_t arcstat_l2_log_blk_avg_asize;\n\t \n\tkstat_named_t arcstat_l2_log_blk_asize;\n\t \n\tkstat_named_t arcstat_l2_log_blk_count;\n\t \n\tkstat_named_t arcstat_l2_data_to_meta_ratio;\n\t \n\tkstat_named_t arcstat_l2_rebuild_success;\n\t \n\tkstat_named_t arcstat_l2_rebuild_abort_unsupported;\n\t \n\tkstat_named_t arcstat_l2_rebuild_abort_io_errors;\n\t \n\tkstat_named_t arcstat_l2_rebuild_abort_dh_errors;\n\t \n\tkstat_named_t arcstat_l2_rebuild_abort_cksum_lb_errors;\n\t \n\tkstat_named_t arcstat_l2_rebuild_abort_lowmem;\n\t \n\tkstat_named_t arcstat_l2_rebuild_size;\n\t \n\tkstat_named_t arcstat_l2_rebuild_asize;\n\t \n\tkstat_named_t arcstat_l2_rebuild_bufs;\n\t \n\tkstat_named_t arcstat_l2_rebuild_bufs_precached;\n\t \n\tkstat_named_t arcstat_l2_rebuild_log_blks;\n\tkstat_named_t arcstat_memory_throttle_count;\n\tkstat_named_t arcstat_memory_direct_count;\n\tkstat_named_t arcstat_memory_indirect_count;\n\tkstat_named_t arcstat_memory_all_bytes;\n\tkstat_named_t arcstat_memory_free_bytes;\n\tkstat_named_t arcstat_memory_available_bytes;\n\tkstat_named_t arcstat_no_grow;\n\tkstat_named_t arcstat_tempreserve;\n\tkstat_named_t arcstat_loaned_bytes;\n\tkstat_named_t arcstat_prune;\n\tkstat_named_t arcstat_meta_used;\n\tkstat_named_t arcstat_dnode_limit;\n\tkstat_named_t arcstat_async_upgrade_sync;\n\t \n\tkstat_named_t arcstat_predictive_prefetch;\n\t \n\tkstat_named_t arcstat_demand_hit_predictive_prefetch;\n\t \n\tkstat_named_t arcstat_demand_iohit_predictive_prefetch;\n\t \n\tkstat_named_t arcstat_prescient_prefetch;\n\t \n\tkstat_named_t arcstat_demand_hit_prescient_prefetch;\n\t \n\tkstat_named_t arcstat_demand_iohit_prescient_prefetch;\n\tkstat_named_t arcstat_need_free;\n\tkstat_named_t arcstat_sys_free;\n\tkstat_named_t arcstat_raw_size;\n\tkstat_named_t arcstat_cached_only_in_progress;\n\tkstat_named_t arcstat_abd_chunk_waste_size;\n} arc_stats_t;\n\ntypedef struct arc_sums {\n\twmsum_t arcstat_hits;\n\twmsum_t arcstat_iohits;\n\twmsum_t arcstat_misses;\n\twmsum_t arcstat_demand_data_hits;\n\twmsum_t arcstat_demand_data_iohits;\n\twmsum_t arcstat_demand_data_misses;\n\twmsum_t arcstat_demand_metadata_hits;\n\twmsum_t arcstat_demand_metadata_iohits;\n\twmsum_t arcstat_demand_metadata_misses;\n\twmsum_t arcstat_prefetch_data_hits;\n\twmsum_t arcstat_prefetch_data_iohits;\n\twmsum_t arcstat_prefetch_data_misses;\n\twmsum_t arcstat_prefetch_metadata_hits;\n\twmsum_t arcstat_prefetch_metadata_iohits;\n\twmsum_t arcstat_prefetch_metadata_misses;\n\twmsum_t arcstat_mru_hits;\n\twmsum_t arcstat_mru_ghost_hits;\n\twmsum_t arcstat_mfu_hits;\n\twmsum_t arcstat_mfu_ghost_hits;\n\twmsum_t arcstat_uncached_hits;\n\twmsum_t arcstat_deleted;\n\twmsum_t arcstat_mutex_miss;\n\twmsum_t arcstat_access_skip;\n\twmsum_t arcstat_evict_skip;\n\twmsum_t arcstat_evict_not_enough;\n\twmsum_t arcstat_evict_l2_cached;\n\twmsum_t arcstat_evict_l2_eligible;\n\twmsum_t arcstat_evict_l2_eligible_mfu;\n\twmsum_t arcstat_evict_l2_eligible_mru;\n\twmsum_t arcstat_evict_l2_ineligible;\n\twmsum_t arcstat_evict_l2_skip;\n\twmsum_t arcstat_hash_collisions;\n\twmsum_t arcstat_hash_chains;\n\taggsum_t arcstat_size;\n\twmsum_t arcstat_compressed_size;\n\twmsum_t arcstat_uncompressed_size;\n\twmsum_t arcstat_overhead_size;\n\twmsum_t arcstat_hdr_size;\n\twmsum_t arcstat_data_size;\n\twmsum_t arcstat_metadata_size;\n\twmsum_t arcstat_dbuf_size;\n\twmsum_t arcstat_dnode_size;\n\twmsum_t arcstat_bonus_size;\n\twmsum_t arcstat_l2_hits;\n\twmsum_t arcstat_l2_misses;\n\twmsum_t arcstat_l2_prefetch_asize;\n\twmsum_t arcstat_l2_mru_asize;\n\twmsum_t arcstat_l2_mfu_asize;\n\twmsum_t arcstat_l2_bufc_data_asize;\n\twmsum_t arcstat_l2_bufc_metadata_asize;\n\twmsum_t arcstat_l2_feeds;\n\twmsum_t arcstat_l2_rw_clash;\n\twmsum_t arcstat_l2_read_bytes;\n\twmsum_t arcstat_l2_write_bytes;\n\twmsum_t arcstat_l2_writes_sent;\n\twmsum_t arcstat_l2_writes_done;\n\twmsum_t arcstat_l2_writes_error;\n\twmsum_t arcstat_l2_writes_lock_retry;\n\twmsum_t arcstat_l2_evict_lock_retry;\n\twmsum_t arcstat_l2_evict_reading;\n\twmsum_t arcstat_l2_evict_l1cached;\n\twmsum_t arcstat_l2_free_on_write;\n\twmsum_t arcstat_l2_abort_lowmem;\n\twmsum_t arcstat_l2_cksum_bad;\n\twmsum_t arcstat_l2_io_error;\n\twmsum_t arcstat_l2_lsize;\n\twmsum_t arcstat_l2_psize;\n\taggsum_t arcstat_l2_hdr_size;\n\twmsum_t arcstat_l2_log_blk_writes;\n\twmsum_t arcstat_l2_log_blk_asize;\n\twmsum_t arcstat_l2_log_blk_count;\n\twmsum_t arcstat_l2_rebuild_success;\n\twmsum_t arcstat_l2_rebuild_abort_unsupported;\n\twmsum_t arcstat_l2_rebuild_abort_io_errors;\n\twmsum_t arcstat_l2_rebuild_abort_dh_errors;\n\twmsum_t arcstat_l2_rebuild_abort_cksum_lb_errors;\n\twmsum_t arcstat_l2_rebuild_abort_lowmem;\n\twmsum_t arcstat_l2_rebuild_size;\n\twmsum_t arcstat_l2_rebuild_asize;\n\twmsum_t arcstat_l2_rebuild_bufs;\n\twmsum_t arcstat_l2_rebuild_bufs_precached;\n\twmsum_t arcstat_l2_rebuild_log_blks;\n\twmsum_t arcstat_memory_throttle_count;\n\twmsum_t arcstat_memory_direct_count;\n\twmsum_t arcstat_memory_indirect_count;\n\twmsum_t arcstat_prune;\n\twmsum_t arcstat_meta_used;\n\twmsum_t arcstat_async_upgrade_sync;\n\twmsum_t arcstat_predictive_prefetch;\n\twmsum_t arcstat_demand_hit_predictive_prefetch;\n\twmsum_t arcstat_demand_iohit_predictive_prefetch;\n\twmsum_t arcstat_prescient_prefetch;\n\twmsum_t arcstat_demand_hit_prescient_prefetch;\n\twmsum_t arcstat_demand_iohit_prescient_prefetch;\n\twmsum_t arcstat_raw_size;\n\twmsum_t arcstat_cached_only_in_progress;\n\twmsum_t arcstat_abd_chunk_waste_size;\n} arc_sums_t;\n\ntypedef struct arc_evict_waiter {\n\tlist_node_t aew_node;\n\tkcondvar_t aew_cv;\n\tuint64_t aew_count;\n} arc_evict_waiter_t;\n\n#define\tARCSTAT(stat)\t(arc_stats.stat.value.ui64)\n\n#define\tARCSTAT_INCR(stat, val) \\\n\twmsum_add(&arc_sums.stat, (val))\n\n#define\tARCSTAT_BUMP(stat)\tARCSTAT_INCR(stat, 1)\n#define\tARCSTAT_BUMPDOWN(stat)\tARCSTAT_INCR(stat, -1)\n\n#define\tarc_no_grow\tARCSTAT(arcstat_no_grow)  \n#define\tarc_meta\tARCSTAT(arcstat_meta)\t \n#define\tarc_pd\t\tARCSTAT(arcstat_pd)\t \n#define\tarc_pm\t\tARCSTAT(arcstat_pm)\t \n#define\tarc_c\t\tARCSTAT(arcstat_c)\t \n#define\tarc_c_min\tARCSTAT(arcstat_c_min)\t \n#define\tarc_c_max\tARCSTAT(arcstat_c_max)\t \n#define\tarc_sys_free\tARCSTAT(arcstat_sys_free)  \n\n#define\tarc_anon\t(&ARC_anon)\n#define\tarc_mru\t\t(&ARC_mru)\n#define\tarc_mru_ghost\t(&ARC_mru_ghost)\n#define\tarc_mfu\t\t(&ARC_mfu)\n#define\tarc_mfu_ghost\t(&ARC_mfu_ghost)\n#define\tarc_l2c_only\t(&ARC_l2c_only)\n#define\tarc_uncached\t(&ARC_uncached)\n\nextern taskq_t *arc_prune_taskq;\nextern arc_stats_t arc_stats;\nextern arc_sums_t arc_sums;\nextern hrtime_t arc_growtime;\nextern boolean_t arc_warm;\nextern uint_t arc_grow_retry;\nextern uint_t arc_no_grow_shift;\nextern uint_t arc_shrink_shift;\nextern kmutex_t arc_prune_mtx;\nextern list_t arc_prune_list;\nextern arc_state_t\tARC_mfu;\nextern arc_state_t\tARC_mru;\nextern uint_t zfs_arc_pc_percent;\nextern uint_t arc_lotsfree_percent;\nextern uint64_t zfs_arc_min;\nextern uint64_t zfs_arc_max;\n\nextern void arc_reduce_target_size(int64_t to_free);\nextern boolean_t arc_reclaim_needed(void);\nextern void arc_kmem_reap_soon(void);\nextern void arc_wait_for_eviction(uint64_t, boolean_t);\n\nextern void arc_lowmem_init(void);\nextern void arc_lowmem_fini(void);\nextern int arc_memory_throttle(spa_t *spa, uint64_t reserve, uint64_t txg);\nextern uint64_t arc_free_memory(void);\nextern int64_t arc_available_memory(void);\nextern void arc_tuning_update(boolean_t);\nextern void arc_register_hotplug(void);\nextern void arc_unregister_hotplug(void);\n\nextern int param_set_arc_u64(ZFS_MODULE_PARAM_ARGS);\nextern int param_set_arc_int(ZFS_MODULE_PARAM_ARGS);\nextern int param_set_arc_min(ZFS_MODULE_PARAM_ARGS);\nextern int param_set_arc_max(ZFS_MODULE_PARAM_ARGS);\n\n \nboolean_t l2arc_log_blkptr_valid(l2arc_dev_t *dev,\n    const l2arc_log_blkptr_t *lbp);\n\n \nvoid l2arc_dev_hdr_update(l2arc_dev_t *dev);\nl2arc_dev_t *l2arc_vdev_get(vdev_t *vd);\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}