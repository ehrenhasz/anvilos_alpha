{
  "module_name": "rrwlock.h",
  "hash_id": "51dce2eb7986a6e0395f32624dafcc247aacb00c51c6340c5cbe587ff8a73fdd",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/rrwlock.h",
  "human_readable_source": " \n \n \n\n#ifndef\t_SYS_RR_RW_LOCK_H\n#define\t_SYS_RR_RW_LOCK_H\n\n\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n#include <sys/inttypes.h>\n#include <sys/zfs_context.h>\n#include <sys/zfs_refcount.h>\n\nextern uint_t rrw_tsd_key;\n\n \ntypedef struct rrwlock {\n\tkmutex_t\trr_lock;\n\tkcondvar_t\trr_cv;\n\tkthread_t\t*rr_writer;\n\tzfs_refcount_t\trr_anon_rcount;\n\tzfs_refcount_t\trr_linked_rcount;\n\tboolean_t\trr_writer_wanted;\n\tboolean_t\trr_track_all;\n} rrwlock_t;\n\n \nvoid rrw_init(rrwlock_t *rrl, boolean_t track_all);\nvoid rrw_destroy(rrwlock_t *rrl);\nvoid rrw_enter(rrwlock_t *rrl, krw_t rw, const void *tag);\nvoid rrw_enter_read(rrwlock_t *rrl, const void *tag);\nvoid rrw_enter_read_prio(rrwlock_t *rrl, const void *tag);\nvoid rrw_enter_write(rrwlock_t *rrl);\nvoid rrw_exit(rrwlock_t *rrl, const void *tag);\nboolean_t rrw_held(rrwlock_t *rrl, krw_t rw);\nvoid rrw_tsd_destroy(void *arg);\n\n#define\tRRW_READ_HELD(x)\trrw_held(x, RW_READER)\n#define\tRRW_WRITE_HELD(x)\trrw_held(x, RW_WRITER)\n#define\tRRW_LOCK_HELD(x) \\\n\t(rrw_held(x, RW_WRITER) || rrw_held(x, RW_READER))\n\n \n#define\tRRM_NUM_LOCKS\t\t17\ntypedef struct rrmlock {\n\trrwlock_t\tlocks[RRM_NUM_LOCKS];\n} rrmlock_t;\n\nvoid rrm_init(rrmlock_t *rrl, boolean_t track_all);\nvoid rrm_destroy(rrmlock_t *rrl);\nvoid rrm_enter(rrmlock_t *rrl, krw_t rw, const void *tag);\nvoid rrm_enter_read(rrmlock_t *rrl, const void *tag);\nvoid rrm_enter_write(rrmlock_t *rrl);\nvoid rrm_exit(rrmlock_t *rrl, const void *tag);\nboolean_t rrm_held(rrmlock_t *rrl, krw_t rw);\n\n#define\tRRM_READ_HELD(x)\trrm_held(x, RW_READER)\n#define\tRRM_WRITE_HELD(x)\trrm_held(x, RW_WRITER)\n#define\tRRM_LOCK_HELD(x) \\\n\t(rrm_held(x, RW_WRITER) || rrm_held(x, RW_READER))\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}