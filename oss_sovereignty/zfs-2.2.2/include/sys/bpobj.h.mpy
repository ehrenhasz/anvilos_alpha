{
  "module_name": "bpobj.h",
  "hash_id": "89ae1e6af37dcffe4c270cc2519b527bc17f5b5000026c12578b1d20496d8ad5",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/bpobj.h",
  "human_readable_source": " \n \n\n#ifndef\t_SYS_BPOBJ_H\n#define\t_SYS_BPOBJ_H\n\n#include <sys/dmu.h>\n#include <sys/spa.h>\n#include <sys/txg.h>\n#include <sys/zio.h>\n#include <sys/zfs_context.h>\n#include <sys/bplist.h>\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\ntypedef struct bpobj_phys {\n\t \n\tuint64_t\tbpo_num_blkptrs;\n\tuint64_t\tbpo_bytes;\n\tuint64_t\tbpo_comp;\n\tuint64_t\tbpo_uncomp;\n\tuint64_t\tbpo_subobjs;\n\tuint64_t\tbpo_num_subobjs;\n\tuint64_t\tbpo_num_freed;\n} bpobj_phys_t;\n\n#define\tBPOBJ_SIZE_V0\t(2 * sizeof (uint64_t))\n#define\tBPOBJ_SIZE_V1\t(4 * sizeof (uint64_t))\n#define\tBPOBJ_SIZE_V2\t(6 * sizeof (uint64_t))\n\ntypedef struct bpobj {\n\tkmutex_t\tbpo_lock;\n\tobjset_t\t*bpo_os;\n\tuint64_t\tbpo_object;\n\tuint32_t\tbpo_epb;\n\tuint8_t\t\tbpo_havecomp;\n\tuint8_t\t\tbpo_havesubobj;\n\tuint8_t\t\tbpo_havefreed;\n\tbpobj_phys_t\t*bpo_phys;\n\tdmu_buf_t\t*bpo_dbuf;\n\tdmu_buf_t\t*bpo_cached_dbuf;\n} bpobj_t;\n\ntypedef int bpobj_itor_t(void *arg, const blkptr_t *bp, boolean_t bp_freed,\n    dmu_tx_t *tx);\n\nuint64_t bpobj_alloc(objset_t *mos, int blocksize, dmu_tx_t *tx);\nuint64_t bpobj_alloc_empty(objset_t *os, int blocksize, dmu_tx_t *tx);\nvoid bpobj_free(objset_t *os, uint64_t obj, dmu_tx_t *tx);\nvoid bpobj_decr_empty(objset_t *os, dmu_tx_t *tx);\n\nint bpobj_open(bpobj_t *bpo, objset_t *mos, uint64_t object);\nvoid bpobj_close(bpobj_t *bpo);\nboolean_t bpobj_is_open(const bpobj_t *bpo);\n\nint bpobj_iterate(bpobj_t *bpo, bpobj_itor_t func, void *arg, dmu_tx_t *tx);\nint bpobj_iterate_nofree(bpobj_t *bpo, bpobj_itor_t func, void *, uint64_t *);\nint livelist_bpobj_iterate_from_nofree(bpobj_t *bpo, bpobj_itor_t func,\n    void *arg, int64_t start);\n\nvoid bpobj_enqueue_subobj(bpobj_t *bpo, uint64_t subobj, dmu_tx_t *tx);\nvoid bpobj_prefetch_subobj(bpobj_t *bpo, uint64_t subobj);\nvoid bpobj_enqueue(bpobj_t *bpo, const blkptr_t *bp, boolean_t bp_freed,\n    dmu_tx_t *tx);\n\nint bpobj_space(bpobj_t *bpo,\n    uint64_t *usedp, uint64_t *compp, uint64_t *uncompp);\nint bpobj_space_range(bpobj_t *bpo, uint64_t mintxg, uint64_t maxtxg,\n    uint64_t *usedp, uint64_t *compp, uint64_t *uncompp);\nboolean_t bpobj_is_empty(bpobj_t *bpo);\n\nint bplist_append_cb(void *arg, const blkptr_t *bp, boolean_t bp_freed,\n    dmu_tx_t *tx);\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}