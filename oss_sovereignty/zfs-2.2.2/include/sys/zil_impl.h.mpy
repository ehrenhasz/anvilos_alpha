{
  "module_name": "zil_impl.h",
  "hash_id": "1b88e5886768dc81e9a3defd1bbbfa9f1f6aa7ec5a305a3eeba74c27b816dc78",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/zil_impl.h",
  "human_readable_source": " \n \n\n \n\n#ifndef\t_SYS_ZIL_IMPL_H\n#define\t_SYS_ZIL_IMPL_H\n\n#include <sys/zil.h>\n#include <sys/dmu_objset.h>\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n \ntypedef enum {\n    LWB_STATE_NEW,\n    LWB_STATE_OPENED,\n    LWB_STATE_CLOSED,\n    LWB_STATE_READY,\n    LWB_STATE_ISSUED,\n    LWB_STATE_WRITE_DONE,\n    LWB_STATE_FLUSH_DONE,\n    LWB_NUM_STATES\n} lwb_state_t;\n\n \ntypedef struct lwb {\n\tzilog_t\t\t*lwb_zilog;\t \n\tblkptr_t\tlwb_blk;\t \n\tboolean_t\tlwb_slim;\t \n\tboolean_t\tlwb_slog;\t \n\tint\t\tlwb_error;\t \n\tint\t\tlwb_nmax;\t \n\tint\t\tlwb_nused;\t \n\tint\t\tlwb_nfilled;\t \n\tint\t\tlwb_sz;\t\t \n\tlwb_state_t\tlwb_state;\t \n\tchar\t\t*lwb_buf;\t \n\tzio_t\t\t*lwb_child_zio;\t \n\tzio_t\t\t*lwb_write_zio;\t \n\tzio_t\t\t*lwb_root_zio;\t \n\thrtime_t\tlwb_issued_timestamp;  \n\tuint64_t\tlwb_issued_txg;\t \n\tuint64_t\tlwb_alloc_txg;\t \n\tuint64_t\tlwb_max_txg;\t \n\tlist_node_t\tlwb_node;\t \n\tlist_node_t\tlwb_issue_node;\t \n\tlist_t\t\tlwb_itxs;\t \n\tlist_t\t\tlwb_waiters;\t \n\tavl_tree_t\tlwb_vdev_tree;\t \n\tkmutex_t\tlwb_vdev_lock;\t \n} lwb_t;\n\n \ntypedef struct zil_commit_waiter {\n\tkcondvar_t\tzcw_cv;\t\t \n\tkmutex_t\tzcw_lock;\t \n\tlist_node_t\tzcw_node;\t \n\tlwb_t\t\t*zcw_lwb;\t \n\tboolean_t\tzcw_done;\t \n\tint\t\tzcw_zio_error;\t \n} zil_commit_waiter_t;\n\n \ntypedef struct itxs {\n\tlist_t\t\ti_sync_list;\t \n\tavl_tree_t\ti_async_tree;\t \n} itxs_t;\n\ntypedef struct itxg {\n\tkmutex_t\titxg_lock;\t \n\tuint64_t\titxg_txg;\t \n\titxs_t\t\t*itxg_itxs;\t \n} itxg_t;\n\n \ntypedef struct itx_async_node {\n\tuint64_t\tia_foid;\t \n\tlist_t\t\tia_list;\t \n\tavl_node_t\tia_node;\t \n} itx_async_node_t;\n\n \ntypedef struct zil_vdev_node {\n\tuint64_t\tzv_vdev;\t \n\tavl_node_t\tzv_node;\t \n} zil_vdev_node_t;\n\n#define\tZIL_PREV_BLKS 16\n\n \nstruct zilog {\n\tkmutex_t\tzl_lock;\t \n\tstruct dsl_pool\t*zl_dmu_pool;\t \n\tspa_t\t\t*zl_spa;\t \n\tconst zil_header_t *zl_header;\t \n\tobjset_t\t*zl_os;\t\t \n\tzil_get_data_t\t*zl_get_data;\t \n\tlwb_t\t\t*zl_last_lwb_opened;  \n\thrtime_t\tzl_last_lwb_latency;  \n\tuint64_t\tzl_lr_seq;\t \n\tuint64_t\tzl_commit_lr_seq;  \n\tuint64_t\tzl_destroy_txg;\t \n\tuint64_t\tzl_replayed_seq[TXG_SIZE];  \n\tuint64_t\tzl_replaying_seq;  \n\tuint32_t\tzl_suspend;\t \n\tkcondvar_t\tzl_cv_suspend;\t \n\tuint8_t\t\tzl_suspending;\t \n\tuint8_t\t\tzl_keep_first;\t \n\tuint8_t\t\tzl_replay;\t \n\tuint8_t\t\tzl_stop_sync;\t \n\tkmutex_t\tzl_issuer_lock;\t \n\tuint8_t\t\tzl_logbias;\t \n\tuint8_t\t\tzl_sync;\t \n\tint\t\tzl_parse_error;\t \n\tuint64_t\tzl_parse_blk_seq;  \n\tuint64_t\tzl_parse_lr_seq;  \n\tuint64_t\tzl_parse_blk_count;  \n\tuint64_t\tzl_parse_lr_count;  \n\titxg_t\t\tzl_itxg[TXG_SIZE];  \n\tlist_t\t\tzl_itx_commit_list;  \n\tuint64_t\tzl_cur_used;\t \n\tlist_t\t\tzl_lwb_list;\t \n\tavl_tree_t\tzl_bp_tree;\t \n\tclock_t\t\tzl_replay_time;\t \n\tuint64_t\tzl_replay_blks;\t \n\tzil_header_t\tzl_old_header;\t \n\tuint_t\t\tzl_prev_blks[ZIL_PREV_BLKS];  \n\tuint_t\t\tzl_prev_rotor;\t \n\ttxg_node_t\tzl_dirty_link;\t \n\tuint64_t\tzl_dirty_max_txg;  \n\n\tkmutex_t\tzl_lwb_io_lock;  \n\tuint64_t\tzl_lwb_inflight[TXG_SIZE];  \n\tkcondvar_t\tzl_lwb_io_cv;\t \n\tuint64_t\tzl_lwb_max_issued_txg;  \n\n\t \n\tuint64_t\tzl_max_block_size;\n\n\t \n\tzil_sums_t *zl_sums;\n};\n\ntypedef struct zil_bp_node {\n\tdva_t\t\tzn_dva;\n\tavl_node_t\tzn_node;\n} zil_bp_node_t;\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}