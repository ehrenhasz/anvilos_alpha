{
  "module_name": "zfs_ioctl.h",
  "hash_id": "86b888ccfe8d829b9611144d5d3a8a22eec40393c2792db20e2e350e14018d26",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/zfs_ioctl.h",
  "human_readable_source": " \n \n\n#ifndef\t_SYS_ZFS_IOCTL_H\n#define\t_SYS_ZFS_IOCTL_H\n\n#include <sys/cred.h>\n#include <sys/dmu.h>\n#include <sys/zio.h>\n#include <sys/dsl_deleg.h>\n#include <sys/spa.h>\n#include <sys/zfs_stat.h>\n\n#ifdef _KERNEL\n#include <sys/nvpair.h>\n#endif\t \n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n \n\n \n#define\tZFS_SNAPDIR_HIDDEN\t\t0\n#define\tZFS_SNAPDIR_VISIBLE\t\t1\n\n \n#define\tZFS_SNAPDEV_HIDDEN\t\t0\n#define\tZFS_SNAPDEV_VISIBLE\t\t1\n \n#define\tZFS_ACLTYPE_OFF\t\t\t0\n#define\tZFS_ACLTYPE_POSIX\t\t1\n#define\tZFS_ACLTYPE_NFSV4\t\t2\n\n \n\n \ntypedef enum drr_headertype {\n\tDMU_SUBSTREAM = 0x1,\n\tDMU_COMPOUNDSTREAM = 0x2\n} drr_headertype_t;\n\n#define\tDMU_GET_STREAM_HDRTYPE(vi)\tBF64_GET((vi), 0, 2)\n#define\tDMU_SET_STREAM_HDRTYPE(vi, x)\tBF64_SET((vi), 0, 2, x)\n\n#define\tDMU_GET_FEATUREFLAGS(vi)\tBF64_GET((vi), 2, 30)\n#define\tDMU_SET_FEATUREFLAGS(vi, x)\tBF64_SET((vi), 2, 30, x)\n\n \n\n#define\tDMU_BACKUP_FEATURE_DEDUP\t\t(1 << 0)\n#define\tDMU_BACKUP_FEATURE_DEDUPPROPS\t\t(1 << 1)\n#define\tDMU_BACKUP_FEATURE_SA_SPILL\t\t(1 << 2)\n \n#define\tDMU_BACKUP_FEATURE_EMBED_DATA\t\t(1 << 16)\n#define\tDMU_BACKUP_FEATURE_LZ4\t\t\t(1 << 17)\n \n#define\tDMU_BACKUP_FEATURE_LARGE_BLOCKS\t\t(1 << 19)\n#define\tDMU_BACKUP_FEATURE_RESUMING\t\t(1 << 20)\n#define\tDMU_BACKUP_FEATURE_REDACTED\t\t(1 << 21)\n#define\tDMU_BACKUP_FEATURE_COMPRESSED\t\t(1 << 22)\n#define\tDMU_BACKUP_FEATURE_LARGE_DNODE\t\t(1 << 23)\n#define\tDMU_BACKUP_FEATURE_RAW\t\t\t(1 << 24)\n#define\tDMU_BACKUP_FEATURE_ZSTD\t\t\t(1 << 25)\n#define\tDMU_BACKUP_FEATURE_HOLDS\t\t(1 << 26)\n \n#define\tDMU_BACKUP_FEATURE_SWITCH_TO_LARGE_BLOCKS (1 << 27)\n \n \n\n \n#define\tDMU_BACKUP_FEATURE_MASK\t(DMU_BACKUP_FEATURE_SA_SPILL | \\\n    DMU_BACKUP_FEATURE_EMBED_DATA | DMU_BACKUP_FEATURE_LZ4 | \\\n    DMU_BACKUP_FEATURE_RESUMING | DMU_BACKUP_FEATURE_LARGE_BLOCKS | \\\n    DMU_BACKUP_FEATURE_COMPRESSED | DMU_BACKUP_FEATURE_LARGE_DNODE | \\\n    DMU_BACKUP_FEATURE_RAW | DMU_BACKUP_FEATURE_HOLDS | \\\n    DMU_BACKUP_FEATURE_REDACTED | DMU_BACKUP_FEATURE_SWITCH_TO_LARGE_BLOCKS | \\\n    DMU_BACKUP_FEATURE_ZSTD)\n\n \n#define\tDMU_STREAM_SUPPORTED(x)\t(!((x) & ~DMU_BACKUP_FEATURE_MASK))\n\ntypedef enum dmu_send_resume_token_version {\n\tZFS_SEND_RESUME_TOKEN_VERSION = 1\n} dmu_send_resume_token_version_t;\n\n \n\n#define\tDMU_BACKUP_MAGIC 0x2F5bacbacULL\n\n \n#define\tDRR_FLAG_CLONE\t\t(1<<0)\n#define\tDRR_FLAG_CI_DATA\t(1<<1)\n \n#define\tDRR_FLAG_FREERECORDS\t(1<<2)\n \n#define\tDRR_FLAG_SPILL_BLOCK\t(1<<3)\n\n \n#define\tDRR_CHECKSUM_DEDUP\t(1<<0)  \n#define\tDRR_RAW_BYTESWAP\t(1<<1)\n#define\tDRR_OBJECT_SPILL\t(1<<2)  \n#define\tDRR_SPILL_UNMODIFIED\t(1<<2)  \n\n#define\tDRR_IS_DEDUP_CAPABLE(flags)\t((flags) & DRR_CHECKSUM_DEDUP)\n#define\tDRR_IS_RAW_BYTESWAPPED(flags)\t((flags) & DRR_RAW_BYTESWAP)\n#define\tDRR_OBJECT_HAS_SPILL(flags)\t((flags) & DRR_OBJECT_SPILL)\n#define\tDRR_SPILL_IS_UNMODIFIED(flags)\t((flags) & DRR_SPILL_UNMODIFIED)\n\n \n#define\tDRR_WRITE_COMPRESSED(drrw)\t((drrw)->drr_compressiontype != 0)\n#define\tDRR_WRITE_PAYLOAD_SIZE(drrw) \\\n\t(DRR_WRITE_COMPRESSED(drrw) ? (drrw)->drr_compressed_size : \\\n\t(drrw)->drr_logical_size)\n#define\tDRR_SPILL_PAYLOAD_SIZE(drrs) \\\n\t((drrs)->drr_compressed_size ? \\\n\t(drrs)->drr_compressed_size : (drrs)->drr_length)\n#define\tDRR_OBJECT_PAYLOAD_SIZE(drro) \\\n\t((drro)->drr_raw_bonuslen != 0 ? \\\n\t(drro)->drr_raw_bonuslen : P2ROUNDUP((drro)->drr_bonuslen, 8))\n\n \n\n \nstruct drr_begin {\n\tuint64_t drr_magic;\n\tuint64_t drr_versioninfo;  \n\tuint64_t drr_creation_time;\n\tdmu_objset_type_t drr_type;\n\tuint32_t drr_flags;\n\tuint64_t drr_toguid;\n\tuint64_t drr_fromguid;\n\tchar drr_toname[MAXNAMELEN];\n};\n\ntypedef struct dmu_replay_record {\n\tenum {\n\t\tDRR_BEGIN, DRR_OBJECT, DRR_FREEOBJECTS,\n\t\tDRR_WRITE, DRR_FREE, DRR_END, DRR_WRITE_BYREF,\n\t\tDRR_SPILL, DRR_WRITE_EMBEDDED, DRR_OBJECT_RANGE, DRR_REDACT,\n\t\tDRR_NUMTYPES\n\t} drr_type;\n\tuint32_t drr_payloadlen;\n\tunion {\n\t\tstruct drr_begin drr_begin;\n\t\tstruct drr_end {\n\t\t\tzio_cksum_t drr_checksum;\n\t\t\tuint64_t drr_toguid;\n\t\t} drr_end;\n\t\tstruct drr_object {\n\t\t\tuint64_t drr_object;\n\t\t\tdmu_object_type_t drr_type;\n\t\t\tdmu_object_type_t drr_bonustype;\n\t\t\tuint32_t drr_blksz;\n\t\t\tuint32_t drr_bonuslen;\n\t\t\tuint8_t drr_checksumtype;\n\t\t\tuint8_t drr_compress;\n\t\t\tuint8_t drr_dn_slots;\n\t\t\tuint8_t drr_flags;\n\t\t\tuint32_t drr_raw_bonuslen;\n\t\t\tuint64_t drr_toguid;\n\t\t\t \n\t\t\tuint8_t drr_indblkshift;\n\t\t\tuint8_t drr_nlevels;\n\t\t\tuint8_t drr_nblkptr;\n\t\t\tuint8_t drr_pad[5];\n\t\t\tuint64_t drr_maxblkid;\n\t\t\t \n\t\t} drr_object;\n\t\tstruct drr_freeobjects {\n\t\t\tuint64_t drr_firstobj;\n\t\t\tuint64_t drr_numobjs;\n\t\t\tuint64_t drr_toguid;\n\t\t} drr_freeobjects;\n\t\tstruct drr_write {\n\t\t\tuint64_t drr_object;\n\t\t\tdmu_object_type_t drr_type;\n\t\t\tuint32_t drr_pad;\n\t\t\tuint64_t drr_offset;\n\t\t\tuint64_t drr_logical_size;\n\t\t\tuint64_t drr_toguid;\n\t\t\tuint8_t drr_checksumtype;\n\t\t\tuint8_t drr_flags;\n\t\t\tuint8_t drr_compressiontype;\n\t\t\tuint8_t drr_pad2[5];\n\t\t\t \n\t\t\tddt_key_t drr_key;\n\t\t\t \n\t\t\tuint64_t drr_compressed_size;\n\t\t\t \n\t\t\tuint8_t drr_salt[ZIO_DATA_SALT_LEN];\n\t\t\tuint8_t drr_iv[ZIO_DATA_IV_LEN];\n\t\t\tuint8_t drr_mac[ZIO_DATA_MAC_LEN];\n\t\t\t \n\t\t} drr_write;\n\t\tstruct drr_free {\n\t\t\tuint64_t drr_object;\n\t\t\tuint64_t drr_offset;\n\t\t\tuint64_t drr_length;\n\t\t\tuint64_t drr_toguid;\n\t\t} drr_free;\n\t\tstruct drr_write_byref {\n\t\t\t \n\t\t\tuint64_t drr_object;\n\t\t\tuint64_t drr_offset;\n\t\t\tuint64_t drr_length;\n\t\t\tuint64_t drr_toguid;\n\t\t\t \n\t\t\tuint64_t drr_refguid;\n\t\t\tuint64_t drr_refobject;\n\t\t\tuint64_t drr_refoffset;\n\t\t\t \n\t\t\tuint8_t drr_checksumtype;\n\t\t\tuint8_t drr_flags;\n\t\t\tuint8_t drr_pad2[6];\n\t\t\tddt_key_t drr_key;  \n\t\t} drr_write_byref;\n\t\tstruct drr_spill {\n\t\t\tuint64_t drr_object;\n\t\t\tuint64_t drr_length;\n\t\t\tuint64_t drr_toguid;\n\t\t\tuint8_t drr_flags;\n\t\t\tuint8_t drr_compressiontype;\n\t\t\tuint8_t drr_pad[6];\n\t\t\t \n\t\t\tuint64_t drr_compressed_size;\n\t\t\tuint8_t drr_salt[ZIO_DATA_SALT_LEN];\n\t\t\tuint8_t drr_iv[ZIO_DATA_IV_LEN];\n\t\t\tuint8_t drr_mac[ZIO_DATA_MAC_LEN];\n\t\t\tdmu_object_type_t drr_type;\n\t\t\t \n\t\t} drr_spill;\n\t\tstruct drr_write_embedded {\n\t\t\tuint64_t drr_object;\n\t\t\tuint64_t drr_offset;\n\t\t\t \n\t\t\tuint64_t drr_length;\n\t\t\tuint64_t drr_toguid;\n\t\t\tuint8_t drr_compression;\n\t\t\tuint8_t drr_etype;\n\t\t\tuint8_t drr_pad[6];\n\t\t\tuint32_t drr_lsize;  \n\t\t\tuint32_t drr_psize;  \n\t\t\t \n\t\t} drr_write_embedded;\n\t\tstruct drr_object_range {\n\t\t\tuint64_t drr_firstobj;\n\t\t\tuint64_t drr_numslots;\n\t\t\tuint64_t drr_toguid;\n\t\t\tuint8_t drr_salt[ZIO_DATA_SALT_LEN];\n\t\t\tuint8_t drr_iv[ZIO_DATA_IV_LEN];\n\t\t\tuint8_t drr_mac[ZIO_DATA_MAC_LEN];\n\t\t\tuint8_t drr_flags;\n\t\t\tuint8_t drr_pad[3];\n\t\t} drr_object_range;\n\t\tstruct drr_redact {\n\t\t\tuint64_t drr_object;\n\t\t\tuint64_t drr_offset;\n\t\t\tuint64_t drr_length;\n\t\t\tuint64_t drr_toguid;\n\t\t} drr_redact;\n\n\t\t \n\t\tstruct drr_checksum {\n\t\t\tuint64_t drr_pad[34];\n\t\t\t \n\t\t\tzio_cksum_t drr_checksum;\n\t\t} drr_checksum;\n\t} drr_u;\n} dmu_replay_record_t;\n\n \ntypedef enum diff_type {\n\tDDR_NONE = 0x1,\n\tDDR_INUSE = 0x2,\n\tDDR_FREE = 0x4\n} diff_type_t;\n\n \ntypedef struct dmu_diff_record {\n\tuint64_t ddr_type;\n\tuint64_t ddr_first;\n\tuint64_t ddr_last;\n} dmu_diff_record_t;\n\ntypedef struct zinject_record {\n\tuint64_t\tzi_objset;\n\tuint64_t\tzi_object;\n\tuint64_t\tzi_start;\n\tuint64_t\tzi_end;\n\tuint64_t\tzi_guid;\n\tuint32_t\tzi_level;\n\tuint32_t\tzi_error;\n\tuint64_t\tzi_type;\n\tuint32_t\tzi_freq;\n\tuint32_t\tzi_failfast;\n\tchar\t\tzi_func[MAXNAMELEN];\n\tuint32_t\tzi_iotype;\n\tint32_t\t\tzi_duration;\n\tuint64_t\tzi_timer;\n\tuint64_t\tzi_nlanes;\n\tuint32_t\tzi_cmd;\n\tuint32_t\tzi_dvas;\n} zinject_record_t;\n\n#define\tZINJECT_NULL\t\t0x1\n#define\tZINJECT_FLUSH_ARC\t0x2\n#define\tZINJECT_UNLOAD_SPA\t0x4\n#define\tZINJECT_CALC_RANGE\t0x8\n\n#define\tZEVENT_NONE\t\t0x0\n#define\tZEVENT_NONBLOCK\t\t0x1\n#define\tZEVENT_SIZE\t\t1024\n\n#define\tZEVENT_SEEK_START\t0\n#define\tZEVENT_SEEK_END\t\tUINT64_MAX\n\n \n#define\tZI_PERCENTAGE_MIN\t4294UL\n#define\tZI_PERCENTAGE_MAX\tUINT32_MAX\n\n#define\tZI_NO_DVA\t\t(-1)\n\ntypedef enum zinject_type {\n\tZINJECT_UNINITIALIZED,\n\tZINJECT_DATA_FAULT,\n\tZINJECT_DEVICE_FAULT,\n\tZINJECT_LABEL_FAULT,\n\tZINJECT_IGNORED_WRITES,\n\tZINJECT_PANIC,\n\tZINJECT_DELAY_IO,\n\tZINJECT_DECRYPT_FAULT,\n} zinject_type_t;\n\ntypedef struct zfs_share {\n\tuint64_t\tz_exportdata;\n\tuint64_t\tz_sharedata;\n\tuint64_t\tz_sharetype;\t \n\tuint64_t\tz_sharemax;   \n} zfs_share_t;\n\n \ntypedef enum zfs_case {\n\tZFS_CASE_SENSITIVE,\n\tZFS_CASE_INSENSITIVE,\n\tZFS_CASE_MIXED\n} zfs_case_t;\n\n \ntypedef struct zfs_cmd {\n\tchar\t\tzc_name[MAXPATHLEN];\t \n\tuint64_t\tzc_nvlist_src;\t\t \n\tuint64_t\tzc_nvlist_src_size;\n\tuint64_t\tzc_nvlist_dst;\t\t \n\tuint64_t\tzc_nvlist_dst_size;\n\tboolean_t\tzc_nvlist_dst_filled;\t \n\tint\t\tzc_pad2;\n\n\t \n\tuint64_t\tzc_history;\t\t \n\tchar\t\tzc_value[MAXPATHLEN * 2];\n\tchar\t\tzc_string[MAXNAMELEN];\n\tuint64_t\tzc_guid;\n\tuint64_t\tzc_nvlist_conf;\t\t \n\tuint64_t\tzc_nvlist_conf_size;\n\tuint64_t\tzc_cookie;\n\tuint64_t\tzc_objset_type;\n\tuint64_t\tzc_perm_action;\n\tuint64_t\tzc_history_len;\n\tuint64_t\tzc_history_offset;\n\tuint64_t\tzc_obj;\n\tuint64_t\tzc_iflags;\t\t \n\tzfs_share_t\tzc_share;\n\tdmu_objset_stats_t zc_objset_stats;\n\tstruct drr_begin zc_begin_record;\n\tzinject_record_t zc_inject_record;\n\tuint32_t\tzc_defer_destroy;\n\tuint32_t\tzc_flags;\n\tuint64_t\tzc_action_handle;\n\tint\t\tzc_cleanup_fd;\n\tuint8_t\t\tzc_simple;\n\tuint8_t\t\tzc_pad[3];\t\t \n\tuint64_t\tzc_sendobj;\n\tuint64_t\tzc_fromobj;\n\tuint64_t\tzc_createtxg;\n\tzfs_stat_t\tzc_stat;\n\tuint64_t\tzc_zoneid;\n} zfs_cmd_t;\n\ntypedef struct zfs_useracct {\n\tchar zu_domain[256];\n\tuid_t zu_rid;\n\tuint32_t zu_pad;\n\tuint64_t zu_space;\n} zfs_useracct_t;\n\n#define\tZFSDEV_MAX_MINOR\t(1 << 16)\n\n#define\tZPOOL_EXPORT_AFTER_SPLIT 0x1\n\n#ifdef _KERNEL\nstruct objset;\nstruct zfsvfs;\n\ntypedef struct zfs_creat {\n\tnvlist_t\t*zct_zplprops;\n\tnvlist_t\t*zct_props;\n} zfs_creat_t;\n\nextern int zfs_secpolicy_snapshot_perms(const char *, cred_t *);\nextern int zfs_secpolicy_rename_perms(const char *, const char *, cred_t *);\nextern int zfs_secpolicy_destroy_perms(const char *, cred_t *);\nextern void zfs_unmount_snap(const char *);\nextern void zfs_destroy_unmount_origin(const char *);\nextern int getzfsvfs_impl(struct objset *, struct zfsvfs **);\nextern int getzfsvfs(const char *, struct zfsvfs **);\n\nenum zfsdev_state_type {\n\tZST_ONEXIT,\n\tZST_ZEVENT,\n\tZST_ALL,\n};\n\n \ntypedef struct zfsdev_state {\n\tstruct zfsdev_state\t*zs_next;\t \n\tminor_t\t\t\tzs_minor;\t \n\tvoid\t\t\t*zs_onexit;\t \n\tvoid\t\t\t*zs_zevent;\t \n} zfsdev_state_t;\n\nextern void *zfsdev_get_state(minor_t minor, enum zfsdev_state_type which);\nextern int zfsdev_getminor(zfs_file_t *fp, minor_t *minorp);\n\nextern uint_t zfs_fsyncer_key;\nextern uint_t zfs_allow_log_key;\n\n#endif\t \n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}