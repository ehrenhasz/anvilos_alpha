{
  "module_name": "sa.h",
  "hash_id": "bdac95f336dafdd95bbacdc78be68c0646f59ed635b1c20c6aee48c1b7c1337e",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/sa.h",
  "human_readable_source": " \n \n\n#ifndef\t_SYS_SA_H\n#define\t_SYS_SA_H\n\n#include <sys/dmu.h>\n\n \n\ntypedef enum sa_bswap_type {\n\tSA_UINT64_ARRAY,\n\tSA_UINT32_ARRAY,\n\tSA_UINT16_ARRAY,\n\tSA_UINT8_ARRAY,\n\tSA_ACL,\n} sa_bswap_type_t;\n\ntypedef uint16_t\tsa_attr_type_t;\n\n \ntypedef struct sa_attr_reg {\n\tconst char \t\t*sa_name;\t \n\tuint16_t \t\tsa_length;\n\tsa_bswap_type_t\t\tsa_byteswap;\t \n\tsa_attr_type_t \t\tsa_attr;  \n} sa_attr_reg_t;\n\n\ntypedef void (sa_data_locator_t)(void **, uint32_t *, uint32_t,\n    boolean_t, void *userptr);\n\n \ntypedef struct sa_bulk_attr {\n\tvoid\t\t\t*sa_data;\n\tsa_data_locator_t\t*sa_data_func;\n\tuint16_t\t\tsa_length;\n\tsa_attr_type_t\t\tsa_attr;\n\t \n\tvoid \t\t\t*sa_addr;\n\tuint16_t\t\tsa_buftype;\n\tuint16_t\t\tsa_size;\n} sa_bulk_attr_t;\n\n \n#define\tSA_ATTR_MAX_LEN UINT16_MAX\n\n \n\n#define\tSA_ADD_BULK_ATTR(b, idx, attr, func, data, len) \\\n{ \\\n\tASSERT3U(len, <=, SA_ATTR_MAX_LEN); \\\n\tb[idx].sa_attr = attr;\\\n\tb[idx].sa_data_func = func; \\\n\tb[idx].sa_data = data; \\\n\tb[idx++].sa_length = len; \\\n}\n\ntypedef struct sa_os sa_os_t;\n\ntypedef enum sa_handle_type {\n\tSA_HDL_SHARED,\n\tSA_HDL_PRIVATE\n} sa_handle_type_t;\n\nstruct sa_handle;\ntypedef void *sa_lookup_tab_t;\ntypedef struct sa_handle sa_handle_t;\n\ntypedef void (sa_update_cb_t)(sa_handle_t *, dmu_tx_t *tx);\n\nint sa_handle_get(objset_t *, uint64_t, void *userp,\n    sa_handle_type_t, sa_handle_t **);\nint sa_handle_get_from_db(objset_t *, dmu_buf_t *, void *userp,\n    sa_handle_type_t, sa_handle_t **);\nvoid sa_handle_destroy(sa_handle_t *);\nint sa_buf_hold(objset_t *, uint64_t, const void *, dmu_buf_t **);\nvoid sa_buf_rele(dmu_buf_t *, const void *);\nint sa_lookup(sa_handle_t *, sa_attr_type_t, void *buf, uint32_t buflen);\nint sa_update(sa_handle_t *, sa_attr_type_t, void *buf,\n    uint32_t buflen, dmu_tx_t *);\nint sa_remove(sa_handle_t *, sa_attr_type_t, dmu_tx_t *);\nint sa_bulk_lookup(sa_handle_t *, sa_bulk_attr_t *, int count);\nint sa_bulk_lookup_locked(sa_handle_t *, sa_bulk_attr_t *, int count);\nint sa_bulk_update(sa_handle_t *, sa_bulk_attr_t *, int count, dmu_tx_t *);\nint sa_size(sa_handle_t *, sa_attr_type_t, int *);\nvoid sa_object_info(sa_handle_t *, dmu_object_info_t *);\nvoid sa_object_size(sa_handle_t *, uint32_t *, u_longlong_t *);\nvoid *sa_get_userdata(sa_handle_t *);\nvoid sa_set_userp(sa_handle_t *, void *);\ndmu_buf_t *sa_get_db(sa_handle_t *);\nuint64_t sa_handle_object(sa_handle_t *);\nboolean_t sa_attr_would_spill(sa_handle_t *, sa_attr_type_t, int size);\nvoid sa_spill_rele(sa_handle_t *);\nvoid sa_register_update_callback(objset_t *, sa_update_cb_t *);\nint sa_setup(objset_t *, uint64_t, const sa_attr_reg_t *, int,\n    sa_attr_type_t **);\nvoid sa_tear_down(objset_t *);\nint sa_replace_all_by_template(sa_handle_t *, sa_bulk_attr_t *,\n    int, dmu_tx_t *);\nint sa_replace_all_by_template_locked(sa_handle_t *, sa_bulk_attr_t *,\n    int, dmu_tx_t *);\nboolean_t sa_enabled(objset_t *);\nvoid sa_cache_init(void);\nvoid sa_cache_fini(void);\nint sa_set_sa_object(objset_t *, uint64_t);\nint sa_hdrsize(void *);\nvoid sa_handle_lock(sa_handle_t *);\nvoid sa_handle_unlock(sa_handle_t *);\n\n#ifdef _KERNEL\nint sa_lookup_uio(sa_handle_t *, sa_attr_type_t, zfs_uio_t *);\nint sa_add_projid(sa_handle_t *, dmu_tx_t *, uint64_t);\n#endif\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}