{
  "module_name": "dsl_deadlist.h",
  "hash_id": "3e753eed2ddab2c54544b99a5a2632fdd561bf32cec390520a6d8b7e9854a437",
  "original_prompt": "Ingested from zfs-2.2.2/include/sys/dsl_deadlist.h",
  "human_readable_source": " \n \n\n#ifndef\t_SYS_DSL_DEADLIST_H\n#define\t_SYS_DSL_DEADLIST_H\n\n#include <sys/bpobj.h>\n#include <sys/zfs_context.h>\n#include <sys/zthr.h>\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\nstruct dmu_buf;\nstruct dsl_pool;\nstruct dsl_dataset;\n\ntypedef struct dsl_deadlist_phys {\n\tuint64_t dl_used;\n\tuint64_t dl_comp;\n\tuint64_t dl_uncomp;\n\tuint64_t dl_pad[37];  \n} dsl_deadlist_phys_t;\n\ntypedef struct dsl_deadlist {\n\tobjset_t *dl_os;\n\tuint64_t dl_object;\n\tavl_tree_t dl_tree;  \n\tavl_tree_t dl_cache;  \n\tboolean_t dl_havetree;\n\tboolean_t dl_havecache;\n\tstruct dmu_buf *dl_dbuf;\n\tdsl_deadlist_phys_t *dl_phys;\n\tkmutex_t dl_lock;\n\n\t \n\tbpobj_t dl_bpobj;\n\tboolean_t dl_oldfmt;\n} dsl_deadlist_t;\n\ntypedef struct dsl_deadlist_cache_entry {\n\tavl_node_t dlce_node;\n\tuint64_t dlce_mintxg;\n\tuint64_t dlce_bpobj;\n\tuint64_t dlce_bytes;\n\tuint64_t dlce_comp;\n\tuint64_t dlce_uncomp;\n} dsl_deadlist_cache_entry_t;\n\ntypedef struct dsl_deadlist_entry {\n\tavl_node_t dle_node;\n\tuint64_t dle_mintxg;\n\tbpobj_t dle_bpobj;\n} dsl_deadlist_entry_t;\n\ntypedef struct livelist_condense_entry {\n\tstruct dsl_dataset *ds;\n\tdsl_deadlist_entry_t *first;\n\tdsl_deadlist_entry_t *next;\n\tboolean_t syncing;\n\tboolean_t cancelled;\n} livelist_condense_entry_t;\n\nextern uint64_t zfs_livelist_max_entries;\nextern int zfs_livelist_min_percent_shared;\n\ntypedef int deadlist_iter_t(void *args, dsl_deadlist_entry_t *dle);\n\nvoid dsl_deadlist_open(dsl_deadlist_t *dl, objset_t *os, uint64_t object);\nvoid dsl_deadlist_close(dsl_deadlist_t *dl);\nvoid dsl_deadlist_iterate(dsl_deadlist_t *dl, deadlist_iter_t func, void *arg);\nuint64_t dsl_deadlist_alloc(objset_t *os, dmu_tx_t *tx);\nvoid dsl_deadlist_free(objset_t *os, uint64_t dlobj, dmu_tx_t *tx);\nvoid dsl_deadlist_insert(dsl_deadlist_t *dl, const blkptr_t *bp,\n    boolean_t free, dmu_tx_t *tx);\nint dsl_deadlist_insert_alloc_cb(void *arg, const blkptr_t *bp, dmu_tx_t *tx);\nint dsl_deadlist_insert_free_cb(void *arg, const blkptr_t *bp, dmu_tx_t *tx);\nvoid dsl_deadlist_add_key(dsl_deadlist_t *dl, uint64_t mintxg, dmu_tx_t *tx);\nvoid dsl_deadlist_remove_key(dsl_deadlist_t *dl, uint64_t mintxg, dmu_tx_t *tx);\nvoid dsl_deadlist_remove_entry(dsl_deadlist_t *dl, uint64_t mintxg,\ndmu_tx_t *tx);\ndsl_deadlist_entry_t *dsl_deadlist_first(dsl_deadlist_t *dl);\ndsl_deadlist_entry_t *dsl_deadlist_last(dsl_deadlist_t *dl);\nuint64_t dsl_deadlist_clone(dsl_deadlist_t *dl, uint64_t maxtxg,\n    uint64_t mrs_obj, dmu_tx_t *tx);\nvoid dsl_deadlist_space(dsl_deadlist_t *dl,\n    uint64_t *usedp, uint64_t *compp, uint64_t *uncompp);\nvoid dsl_deadlist_space_range(dsl_deadlist_t *dl,\n    uint64_t mintxg, uint64_t maxtxg,\n    uint64_t *usedp, uint64_t *compp, uint64_t *uncompp);\nvoid dsl_deadlist_merge(dsl_deadlist_t *dl, uint64_t obj, dmu_tx_t *tx);\nvoid dsl_deadlist_move_bpobj(dsl_deadlist_t *dl, bpobj_t *bpo, uint64_t mintxg,\n    dmu_tx_t *tx);\nboolean_t dsl_deadlist_is_open(dsl_deadlist_t *dl);\nint dsl_process_sub_livelist(bpobj_t *bpobj, struct bplist *to_free,\n    zthr_t *t, uint64_t *size);\nvoid dsl_deadlist_clear_entry(dsl_deadlist_entry_t *dle, dsl_deadlist_t *dl,\n    dmu_tx_t *tx);\nvoid dsl_deadlist_discard_tree(dsl_deadlist_t *dl);\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}