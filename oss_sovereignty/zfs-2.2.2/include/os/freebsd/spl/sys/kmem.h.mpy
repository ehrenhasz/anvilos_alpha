{
  "module_name": "kmem.h",
  "hash_id": "789dade07156e128ce81e67d32d403ef3176c3a780b623da10de8891aedbc3e9",
  "original_prompt": "Ingested from zfs-2.2.2/include/os/freebsd/spl/sys/kmem.h",
  "human_readable_source": " \n\n#ifndef _OPENSOLARIS_SYS_KMEM_H_\n#define\t_OPENSOLARIS_SYS_KMEM_H_\n\n#ifdef _KERNEL\n#include <sys/param.h>\n#include <sys/malloc.h>\n#include <sys/vmem.h>\n#include <sys/counter.h>\n\n#include <vm/uma.h>\n#include <vm/vm.h>\n#include <vm/vm_extern.h>\n\nMALLOC_DECLARE(M_SOLARIS);\n\n#define\tPOINTER_IS_VALID(p)\t(!((uintptr_t)(p) & 0x3))\n#define\tPOINTER_INVALIDATE(pp)\t(*(pp) = (void *)((uintptr_t)(*(pp)) | 0x1))\n\n#define\tKM_SLEEP\t\tM_WAITOK\n#define\tKM_PUSHPAGE\t\tM_WAITOK\n#define\tKM_NOSLEEP\t\tM_NOWAIT\n#define\tKM_NORMALPRI\t\t0\n#define\tKMC_NODEBUG\t\tUMA_ZONE_NODUMP\n\ntypedef struct vmem vmem_t;\n\nextern char\t*kmem_asprintf(const char *, ...)\n    __attribute__((format(printf, 1, 2)));\nextern char *kmem_vasprintf(const char *fmt, va_list ap)\n    __attribute__((format(printf, 1, 0)));\n\nextern int kmem_scnprintf(char *restrict str, size_t size,\n    const char *restrict fmt, ...);\n\ntypedef struct kmem_cache {\n\tchar\t\tkc_name[32];\n#if !defined(KMEM_DEBUG)\n\tuma_zone_t\tkc_zone;\n#else\n\tsize_t\t\tkc_size;\n#endif\n\tint\t\t(*kc_constructor)(void *, void *, int);\n\tvoid\t\t(*kc_destructor)(void *, void *);\n\tvoid\t\t*kc_private;\n} kmem_cache_t;\n\nextern uint64_t spl_kmem_cache_inuse(kmem_cache_t *cache);\nextern uint64_t spl_kmem_cache_entry_size(kmem_cache_t *cache);\n\n__attribute__((malloc, alloc_size(1)))\nvoid *zfs_kmem_alloc(size_t size, int kmflags);\nvoid zfs_kmem_free(void *buf, size_t size);\nuint64_t kmem_size(void);\nkmem_cache_t *kmem_cache_create(const char *name, size_t bufsize, size_t align,\n    int (*constructor)(void *, void *, int), void (*destructor)(void *, void *),\n    void (*reclaim)(void *) __unused, void *private, vmem_t *vmp, int cflags);\nvoid kmem_cache_destroy(kmem_cache_t *cache);\n__attribute__((malloc))\nvoid *kmem_cache_alloc(kmem_cache_t *cache, int flags);\nvoid kmem_cache_free(kmem_cache_t *cache, void *buf);\nboolean_t kmem_cache_reap_active(void);\nvoid kmem_cache_reap_soon(kmem_cache_t *);\nvoid kmem_reap(void);\nint kmem_debugging(void);\nvoid *calloc(size_t n, size_t s);\n\n\n#define\tkmem_cache_reap_now kmem_cache_reap_soon\n#define\tfreemem\t\t\t\tvm_free_count()\n#define\tminfree\t\t\t\tvm_cnt.v_free_min\n#define\tkmem_alloc(size, kmflags)\tzfs_kmem_alloc((size), (kmflags))\n#define\tkmem_zalloc(size, kmflags)\t\t\t\t\\\n\tzfs_kmem_alloc((size), (kmflags) | M_ZERO)\n#define\tkmem_free(buf, size)\t\tzfs_kmem_free((buf), (size))\n\n#endif\t \n\n#ifdef _STANDALONE\n \ntypedef int kmem_cache_t;\n#endif  \n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}