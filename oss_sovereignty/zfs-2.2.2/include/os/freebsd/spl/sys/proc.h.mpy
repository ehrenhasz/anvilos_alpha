{
  "module_name": "proc.h",
  "hash_id": "00281d2c65e5f1b352ed39508ba49d39bc002b55ff04103e99679fbe089fff14",
  "original_prompt": "Ingested from zfs-2.2.2/include/os/freebsd/spl/sys/proc.h",
  "human_readable_source": " \n\n#ifndef _OPENSOLARIS_SYS_PROC_H_\n#define\t_OPENSOLARIS_SYS_PROC_H_\n\n#include <sys/param.h>\n#include <sys/kthread.h>\n#include_next <sys/proc.h>\n#include <sys/stdint.h>\n#include <sys/smp.h>\n#include <sys/sched.h>\n#include <sys/lock.h>\n#include <sys/mutex.h>\n#include <sys/unistd.h>\n#include <sys/kmem.h>\n#include <sys/malloc.h>\n\n#ifdef _KERNEL\n#define\tCPU\t\tcurcpu\n#define\tminclsyspri\tPRIBIO\n#define\tdefclsyspri minclsyspri\n#define\tmaxclsyspri\tPVM\n#define\tmax_ncpus\t(mp_maxid + 1)\n#define\tboot_max_ncpus\t(mp_maxid + 1)\n\n#define\tTS_RUN\t0\n\n#define\tp0\tproc0\n\n#define\tt_tid\ttd_tid\n\ntypedef\tshort\t\tpri_t;\ntypedef\tstruct thread\t_kthread;\ntypedef\tstruct thread\tkthread_t;\ntypedef struct thread\t*kthread_id_t;\ntypedef struct proc\tproc_t;\n\nextern proc_t *system_proc;\n\nstatic __inline kthread_t *\ndo_thread_create(caddr_t stk, size_t stksize, void (*proc)(void *), void *arg,\n    size_t len, proc_t *pp, int state, pri_t pri, const char *name)\n{\n\tkthread_t *td = NULL;\n\tproc_t **ppp;\n\tint error;\n\n\t \n\tASSERT(stk == NULL);\n\tASSERT(len == 0);\n\tASSERT(state == TS_RUN);\n\n\tif (pp == &p0)\n\t\tppp = &system_proc;\n\telse\n\t\tppp = &pp;\n\terror = kproc_kthread_add(proc, arg, ppp, &td, RFSTOPPED,\n\t    stksize / PAGE_SIZE, \"zfskern\", \"%s\", name);\n\tif (error == 0) {\n\t\tthread_lock(td);\n\t\tsched_prio(td, pri);\n\t\tsched_add(td, SRQ_BORING);\n#if __FreeBSD_version < 1300068\n\t\tthread_unlock(td);\n#endif\n\t}\n\treturn (td);\n}\n\n#define\tthread_create_named(name, stk, stksize, proc, arg, len,\t\\\n    pp, state, pri) \\\n\tdo_thread_create(stk, stksize, proc, arg, len, pp, state, pri, name)\n#define\tthread_create(stk, stksize, proc, arg, len, pp, state, pri) \\\n\tdo_thread_create(stk, stksize, proc, arg, len, pp, state, pri, #proc)\n#define\tthread_exit()\tkthread_exit()\n\nint\turead(proc_t *, void *, size_t, uintptr_t);\nint\tuwrite(proc_t *, void *, size_t, uintptr_t);\n\nstatic inline boolean_t\nzfs_proc_is_caller(proc_t *p)\n{\n\treturn (p == curproc);\n}\n\n#endif\t \n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}