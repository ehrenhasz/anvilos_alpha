{
  "module_name": "zfs_ioctl_compat.h",
  "hash_id": "49a779299f7dcd16df73a6fcace787553190171c1987b8d94e7df4ce40c21481",
  "original_prompt": "Ingested from zfs-2.2.2/include/os/freebsd/zfs/sys/zfs_ioctl_compat.h",
  "human_readable_source": " \n \n\n#ifndef\t_SYS_ZFS_IOCTL_COMPAT_H\n#define\t_SYS_ZFS_IOCTL_COMPAT_H\n\n#include <sys/cred.h>\n#include <sys/dmu.h>\n#include <sys/zio.h>\n#include <sys/dsl_deleg.h>\n#include <sys/zfs_ioctl.h>\n\n#ifdef _KERNEL\n#include <sys/nvpair.h>\n#endif   \n\n \n#define\tZFS_LEGACY_SUPPORT\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n \n\n \n#define\tZFS_IOCVER_UNDEF\t-1\n#define\tZFS_IOCVER_NONE\t\t0\n#define\tZFS_IOCVER_DEADMAN\t1\n#define\tZFS_IOCVER_LZC\t\t2\n#define\tZFS_IOCVER_ZCMD\t\t3\n#define\tZFS_IOCVER_EDBP\t\t4\n#define\tZFS_IOCVER_RESUME\t5\n#define\tZFS_IOCVER_INLANES\t6\n#define\tZFS_IOCVER_PAD\t\t7\n#define\tZFS_IOCVER_LEGACY\tZFS_IOCVER_PAD\n#define\tZFS_IOCVER_OZFS\t\t15\n\n \n#define\tZFS_CMD_COMPAT_NONE\t0\n#define\tZFS_CMD_COMPAT_V15\t1\n#define\tZFS_CMD_COMPAT_V28\t2\n#define\tZFS_CMD_COMPAT_DEADMAN\t3\n#define\tZFS_CMD_COMPAT_LZC\t4\n#define\tZFS_CMD_COMPAT_ZCMD\t5\n#define\tZFS_CMD_COMPAT_EDBP\t6\n#define\tZFS_CMD_COMPAT_RESUME\t7\n#define\tZFS_CMD_COMPAT_INLANES\t8\n#define\tZFS_CMD_COMPAT_LEGACY\t9\n\n#define\tZFS_IOC_COMPAT_PASS\t254\n#define\tZFS_IOC_COMPAT_FAIL\t255\n\n#define\tZFS_IOCREQ(ioreq)\t((ioreq) & 0xff)\n\ntypedef struct zfs_iocparm {\n\tuint32_t\tzfs_ioctl_version;\n\tuint64_t\tzfs_cmd;\n\tuint64_t\tzfs_cmd_size;\n} zfs_iocparm_t;\n\n\n#ifdef ZFS_LEGACY_SUPPORT\n#define\tLEGACY_MAXPATHLEN 1024\n#define\tLEGACY_MAXNAMELEN 256\n\n \ntypedef struct zfs_cmd_legacy {\n\tchar\t\tzc_name[LEGACY_MAXPATHLEN];\t \n\tuint64_t\tzc_nvlist_src;\t\t \n\tuint64_t\tzc_nvlist_src_size;\n\tuint64_t\tzc_nvlist_dst;\t\t \n\tuint64_t\tzc_nvlist_dst_size;\n\tboolean_t\tzc_nvlist_dst_filled;\t \n\tint\t\tzc_pad2;\n\n\t \n\tuint64_t\tzc_history;\t\t \n\tchar\t\tzc_value[LEGACY_MAXPATHLEN * 2];\n\tchar\t\tzc_string[LEGACY_MAXNAMELEN];\n\tuint64_t\tzc_guid;\n\tuint64_t\tzc_nvlist_conf;\t\t \n\tuint64_t\tzc_nvlist_conf_size;\n\tuint64_t\tzc_cookie;\n\tuint64_t\tzc_objset_type;\n\tuint64_t\tzc_perm_action;\n\tuint64_t\tzc_history_len;\n\tuint64_t\tzc_history_offset;\n\tuint64_t\tzc_obj;\n\tuint64_t\tzc_iflags;\t\t \n\tzfs_share_t\tzc_share;\n\tuint64_t\tzc_jailid;\n\tdmu_objset_stats_t zc_objset_stats;\n\tdmu_replay_record_t zc_begin_record;\n\tzinject_record_t zc_inject_record;\n\tuint32_t\tzc_defer_destroy;\n\tuint32_t\tzc_flags;\n\tuint64_t\tzc_action_handle;\n\tint\t\tzc_cleanup_fd;\n\tuint8_t\t\tzc_simple;\n\tuint8_t\t\tzc_pad3[3];\n\tboolean_t\tzc_resumable;\n\tuint32_t\tzc_pad4;\n\tuint64_t\tzc_sendobj;\n\tuint64_t\tzc_fromobj;\n\tuint64_t\tzc_createtxg;\n\tzfs_stat_t\tzc_stat;\n} zfs_cmd_legacy_t;\n#endif\n\n\n#ifdef _KERNEL\nint zfs_ioctl_compat_pre(zfs_cmd_t *, int *, const int);\nvoid zfs_ioctl_compat_post(zfs_cmd_t *, const int, const int);\nnvlist_t *zfs_ioctl_compat_innvl(zfs_cmd_t *, nvlist_t *, const int,\n    const int);\nnvlist_t *zfs_ioctl_compat_outnvl(zfs_cmd_t *, nvlist_t *, const int,\n    const int);\n#endif\t \n#ifdef ZFS_LEGACY_SUPPORT\nint zfs_ioctl_legacy_to_ozfs(int request);\nint zfs_ioctl_ozfs_to_legacy(int request);\nvoid zfs_cmd_legacy_to_ozfs(zfs_cmd_legacy_t *src, zfs_cmd_t *dst);\nvoid zfs_cmd_ozfs_to_legacy(zfs_cmd_t *src, zfs_cmd_legacy_t *dst);\n#endif\n\nvoid zfs_cmd_compat_put(zfs_cmd_t *, caddr_t, const int, const int);\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}