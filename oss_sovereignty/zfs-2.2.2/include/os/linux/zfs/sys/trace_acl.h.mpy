{
  "module_name": "trace_acl.h",
  "hash_id": "aa733fb2ba54028f8b46367049bf04fc883c43044dc48816019cfe843391a702",
  "original_prompt": "Ingested from zfs-2.2.2/include/os/linux/zfs/sys/trace_acl.h",
  "human_readable_source": " \n\n#if defined(_KERNEL)\n#if defined(HAVE_DECLARE_EVENT_CLASS)\n\n#undef TRACE_SYSTEM\n#define\tTRACE_SYSTEM zfs\n\n#undef TRACE_SYSTEM_VAR\n#define\tTRACE_SYSTEM_VAR zfs_acl\n\n#if !defined(_TRACE_ACL_H) || defined(TRACE_HEADER_MULTI_READ)\n#define\t_TRACE_ACL_H\n\n#include <linux/tracepoint.h>\n#include <linux/vfs_compat.h>\n#include <sys/types.h>\n\n \n \nDECLARE_EVENT_CLASS(zfs_ace_class,\n\tTP_PROTO(znode_t *zn, zfs_ace_hdr_t *ace, uint32_t mask_matched),\n\tTP_ARGS(zn, ace, mask_matched),\n\tTP_STRUCT__entry(\n\t    __field(uint64_t,\t\tz_id)\n\t    __field(uint8_t,\t\tz_unlinked)\n\t    __field(uint8_t,\t\tz_atime_dirty)\n\t    __field(uint8_t,\t\tz_zn_prefetch)\n\t    __field(uint_t,\t\tz_blksz)\n\t    __field(uint_t,\t\tz_seq)\n\t    __field(uint64_t,\t\tz_mapcnt)\n\t    __field(uint64_t,\t\tz_size)\n\t    __field(uint64_t,\t\tz_pflags)\n\t    __field(uint32_t,\t\tz_sync_cnt)\n\t    __field(uint32_t,\t\tz_sync_writes_cnt)\n\t    __field(uint32_t,\t\tz_async_writes_cnt)\n\t    __field(mode_t,\t\tz_mode)\n\t    __field(boolean_t,\t\tz_is_sa)\n\t    __field(boolean_t,\t\tz_is_ctldir)\n\n\t    __field(uint32_t,\t\ti_uid)\n\t    __field(uint32_t,\t\ti_gid)\n\t    __field(unsigned long,\ti_ino)\n\t    __field(unsigned int,\ti_nlink)\n\t    __field(loff_t,\t\ti_size)\n\t    __field(unsigned int,\ti_blkbits)\n\t    __field(unsigned short,\ti_bytes)\n\t    __field(umode_t,\t\ti_mode)\n\t    __field(__u32,\t\ti_generation)\n\n\t    __field(uint16_t,\t\tz_type)\n\t    __field(uint16_t,\t\tz_flags)\n\t    __field(uint32_t,\t\tz_access_mask)\n\n\t    __field(uint32_t,\t\tmask_matched)\n\t),\n\tTP_fast_assign(\n\t    __entry->z_id\t\t= zn->z_id;\n\t    __entry->z_unlinked\t\t= zn->z_unlinked;\n\t    __entry->z_atime_dirty\t= zn->z_atime_dirty;\n\t    __entry->z_zn_prefetch\t= zn->z_zn_prefetch;\n\t    __entry->z_blksz\t\t= zn->z_blksz;\n\t    __entry->z_seq\t\t= zn->z_seq;\n\t    __entry->z_mapcnt\t\t= zn->z_mapcnt;\n\t    __entry->z_size\t\t= zn->z_size;\n\t    __entry->z_pflags\t\t= zn->z_pflags;\n\t    __entry->z_sync_cnt\t\t= zn->z_sync_cnt;\n\t    __entry->z_sync_writes_cnt\t= zn->z_sync_writes_cnt;\n\t    __entry->z_async_writes_cnt\t= zn->z_async_writes_cnt;\n\t    __entry->z_mode\t\t= zn->z_mode;\n\t    __entry->z_is_sa\t\t= zn->z_is_sa;\n\t    __entry->z_is_ctldir\t= zn->z_is_ctldir;\n\n\t    __entry->i_uid\t\t= KUID_TO_SUID(ZTOI(zn)->i_uid);\n\t    __entry->i_gid\t\t= KGID_TO_SGID(ZTOI(zn)->i_gid);\n\t    __entry->i_ino\t\t= zn->z_inode.i_ino;\n\t    __entry->i_nlink\t\t= zn->z_inode.i_nlink;\n\t    __entry->i_size\t\t= zn->z_inode.i_size;\n\t    __entry->i_blkbits\t\t= zn->z_inode.i_blkbits;\n\t    __entry->i_bytes\t\t= zn->z_inode.i_bytes;\n\t    __entry->i_mode\t\t= zn->z_inode.i_mode;\n\t    __entry->i_generation\t= zn->z_inode.i_generation;\n\n\t    __entry->z_type\t\t= ace->z_type;\n\t    __entry->z_flags\t\t= ace->z_flags;\n\t    __entry->z_access_mask\t= ace->z_access_mask;\n\n\t    __entry->mask_matched\t= mask_matched;\n\t),\n\tTP_printk(\"zn { id %llu unlinked %u atime_dirty %u \"\n\t    \"zn_prefetch %u blksz %u seq %u \"\n\t    \"mapcnt %llu size %llu pflags %llu \"\n\t    \"sync_cnt %u sync_writes_cnt %u async_writes_cnt %u \"\n\t    \"mode 0x%x is_sa %d is_ctldir %d \"\n\t    \"inode { uid %u gid %u ino %lu nlink %u size %lli \"\n\t    \"blkbits %u bytes %u mode 0x%x generation %x } } \"\n\t    \"ace { type %u flags %u access_mask %u } mask_matched %u\",\n\t    __entry->z_id, __entry->z_unlinked, __entry->z_atime_dirty,\n\t    __entry->z_zn_prefetch, __entry->z_blksz,\n\t    __entry->z_seq, __entry->z_mapcnt, __entry->z_size,\n\t    __entry->z_pflags, __entry->z_sync_cnt,\n\t    __entry->z_sync_writes_cnt, __entry->z_async_writes_cnt,\n\t    __entry->z_mode, __entry->z_is_sa, __entry->z_is_ctldir,\n\t    __entry->i_uid, __entry->i_gid, __entry->i_ino, __entry->i_nlink,\n\t    __entry->i_size, __entry->i_blkbits,\n\t    __entry->i_bytes, __entry->i_mode, __entry->i_generation,\n\t    __entry->z_type, __entry->z_flags, __entry->z_access_mask,\n\t    __entry->mask_matched)\n);\n \n\n#define\tDEFINE_ACE_EVENT(name) \\\nDEFINE_EVENT(zfs_ace_class, name, \\\n    TP_PROTO(znode_t *zn, zfs_ace_hdr_t *ace, uint32_t mask_matched), \\\n    TP_ARGS(zn, ace, mask_matched))\nDEFINE_ACE_EVENT(zfs_zfs__ace__denies);\nDEFINE_ACE_EVENT(zfs_zfs__ace__allows);\n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#undef TRACE_INCLUDE_FILE\n#define\tTRACE_INCLUDE_PATH sys\n#define\tTRACE_INCLUDE_FILE trace_acl\n#include <trace/define_trace.h>\n\n#else\n\nDEFINE_DTRACE_PROBE3(zfs__ace__denies);\nDEFINE_DTRACE_PROBE3(zfs__ace__allows);\nDEFINE_DTRACE_PROBE(zfs__fastpath__execute__access__miss);\n\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}