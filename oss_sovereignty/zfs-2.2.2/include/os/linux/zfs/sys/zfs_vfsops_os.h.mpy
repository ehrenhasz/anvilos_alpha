{
  "module_name": "zfs_vfsops_os.h",
  "hash_id": "fa2ab6b80ceb814bca2d1300046aada1b09818da6330de34aa1db236ddbe8c25",
  "original_prompt": "Ingested from zfs-2.2.2/include/os/linux/zfs/sys/zfs_vfsops_os.h",
  "human_readable_source": " \n \n\n#ifndef\t_SYS_FS_ZFS_VFSOPS_H\n#define\t_SYS_FS_ZFS_VFSOPS_H\n\n#include <sys/dataset_kstats.h>\n#include <sys/isa_defs.h>\n#include <sys/types32.h>\n#include <sys/list.h>\n#include <sys/vfs.h>\n#include <sys/zil.h>\n#include <sys/sa.h>\n#include <sys/rrwlock.h>\n#include <sys/dsl_dataset.h>\n#include <sys/zfs_ioctl.h>\n#include <sys/objlist.h>\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\ntypedef struct zfsvfs zfsvfs_t;\nstruct znode;\n\nextern int zfs_bclone_enabled;\n\n \ntypedef struct vfs {\n\tstruct zfsvfs\t*vfs_data;\n\tchar\t\t*vfs_mntpoint;\t \n\tuint64_t\tvfs_xattr;\n\tboolean_t\tvfs_readonly;\n\tboolean_t\tvfs_do_readonly;\n\tboolean_t\tvfs_setuid;\n\tboolean_t\tvfs_do_setuid;\n\tboolean_t\tvfs_exec;\n\tboolean_t\tvfs_do_exec;\n\tboolean_t\tvfs_devices;\n\tboolean_t\tvfs_do_devices;\n\tboolean_t\tvfs_do_xattr;\n\tboolean_t\tvfs_atime;\n\tboolean_t\tvfs_do_atime;\n\tboolean_t\tvfs_relatime;\n\tboolean_t\tvfs_do_relatime;\n\tboolean_t\tvfs_nbmand;\n\tboolean_t\tvfs_do_nbmand;\n} vfs_t;\n\ntypedef struct zfs_mnt {\n\tconst char\t*mnt_osname;\t \n\tchar\t\t*mnt_data;\t \n} zfs_mnt_t;\n\nstruct zfsvfs {\n\tvfs_t\t\t*z_vfs;\t\t \n\tstruct super_block *z_sb;\t \n\tstruct zfsvfs\t*z_parent;\t \n\tobjset_t\t*z_os;\t\t \n\tuint64_t\tz_flags;\t \n\tuint64_t\tz_root;\t\t \n\tuint64_t\tz_unlinkedobj;\t \n\tuint64_t\tz_max_blksz;\t \n\tuint64_t\tz_fuid_obj;\t \n\tuint64_t\tz_fuid_size;\t \n\tavl_tree_t\tz_fuid_idx;\t \n\tavl_tree_t\tz_fuid_domain;\t \n\tkrwlock_t\tz_fuid_lock;\t \n\tboolean_t\tz_fuid_loaded;\t \n\tboolean_t\tz_fuid_dirty;    \n\tstruct zfs_fuid_info\t*z_fuid_replay;  \n\tzilog_t\t\t*z_log;\t\t \n\tuint_t\t\tz_acl_mode;\t \n\tuint_t\t\tz_acl_inherit;\t \n\tuint_t\t\tz_acl_type;\t \n\tzfs_case_t\tz_case;\t\t \n\tboolean_t\tz_utf8;\t\t \n\tint\t\tz_norm;\t\t \n\tboolean_t\tz_relatime;\t \n\tboolean_t\tz_unmounted;\t \n\trrmlock_t\tz_teardown_lock;\n\tkrwlock_t\tz_teardown_inactive_lock;\n\tlist_t\t\tz_all_znodes;\t \n\tunsigned long\tz_rollback_time;  \n\tunsigned long\tz_snap_defer_time;  \n\tkmutex_t\tz_znodes_lock;\t \n\tarc_prune_t\t*z_arc_prune;\t \n\tstruct inode\t*z_ctldir;\t \n\tboolean_t\tz_show_ctldir;\t \n\tboolean_t\tz_issnap;\t \n\tboolean_t\tz_use_fuids;\t \n\tboolean_t\tz_replay;\t \n\tboolean_t\tz_use_sa;\t \n\tboolean_t\tz_xattr_sa;\t \n\tboolean_t\tz_draining;\t \n\tboolean_t\tz_drain_cancel;  \n\tuint64_t\tz_version;\t \n\tuint64_t\tz_shares_dir;\t \n\tdataset_kstats_t\tz_kstat;\t \n\tkmutex_t\tz_lock;\n\tuint64_t\tz_userquota_obj;\n\tuint64_t\tz_groupquota_obj;\n\tuint64_t\tz_userobjquota_obj;\n\tuint64_t\tz_groupobjquota_obj;\n\tuint64_t\tz_projectquota_obj;\n\tuint64_t\tz_projectobjquota_obj;\n\tuint64_t\tz_replay_eof;\t \n\tsa_attr_type_t\t*z_attr_table;\t \n\tuint64_t\tz_hold_size;\t \n\tavl_tree_t\t*z_hold_trees;\t \n\tkmutex_t\t*z_hold_locks;\t \n\ttaskqid_t\tz_drain_task;\t \n};\n\n#define\tZFS_TEARDOWN_INIT(zfsvfs)\t\t\\\n\trrm_init(&(zfsvfs)->z_teardown_lock, B_FALSE)\n\n#define\tZFS_TEARDOWN_DESTROY(zfsvfs)\t\t\\\n\trrm_destroy(&(zfsvfs)->z_teardown_lock)\n\n#define\tZFS_TEARDOWN_ENTER_READ(zfsvfs, tag)\t\\\n\trrm_enter_read(&(zfsvfs)->z_teardown_lock, tag);\n\n#define\tZFS_TEARDOWN_EXIT_READ(zfsvfs, tag)\t\\\n\trrm_exit(&(zfsvfs)->z_teardown_lock, tag)\n\n#define\tZFS_TEARDOWN_ENTER_WRITE(zfsvfs, tag)\t\\\n\trrm_enter(&(zfsvfs)->z_teardown_lock, RW_WRITER, tag)\n\n#define\tZFS_TEARDOWN_EXIT_WRITE(zfsvfs)\t\t\\\n\trrm_exit(&(zfsvfs)->z_teardown_lock, tag)\n\n#define\tZFS_TEARDOWN_EXIT(zfsvfs, tag)\t\t\\\n\trrm_exit(&(zfsvfs)->z_teardown_lock, tag)\n\n#define\tZFS_TEARDOWN_READ_HELD(zfsvfs)\t\t\\\n\tRRM_READ_HELD(&(zfsvfs)->z_teardown_lock)\n\n#define\tZFS_TEARDOWN_WRITE_HELD(zfsvfs)\t\t\\\n\tRRM_WRITE_HELD(&(zfsvfs)->z_teardown_lock)\n\n#define\tZFS_TEARDOWN_HELD(zfsvfs)\t\t\\\n\tRRM_LOCK_HELD(&(zfsvfs)->z_teardown_lock)\n\n#define\tZSB_XATTR\t0x0001\t\t \n\n \n#define\tZFS_LINK_MAX\t\t((1U << 31) - 1U)\n\n \ntypedef struct zfid_short {\n\tuint16_t\tzf_len;\n\tuint8_t\t\tzf_object[6];\t\t \n\tuint8_t\t\tzf_gen[4];\t\t \n} zfid_short_t;\n\n \ntypedef struct zfid_long {\n\tzfid_short_t\tz_fid;\n\tuint8_t\t\tzf_setid[6];\t\t \n\tuint8_t\t\tzf_setgen[4];\t\t \n} zfid_long_t;\n\n#define\tSHORT_FID_LEN\t(sizeof (zfid_short_t) - sizeof (uint16_t))\n#define\tLONG_FID_LEN\t(sizeof (zfid_long_t) - sizeof (uint16_t))\n\nextern void zfs_init(void);\nextern void zfs_fini(void);\n\nextern int zfs_suspend_fs(zfsvfs_t *zfsvfs);\nextern int zfs_resume_fs(zfsvfs_t *zfsvfs, struct dsl_dataset *ds);\nextern int zfs_end_fs(zfsvfs_t *zfsvfs, struct dsl_dataset *ds);\nextern void zfs_exit_fs(zfsvfs_t *zfsvfs);\nextern int zfs_set_version(zfsvfs_t *zfsvfs, uint64_t newvers);\nextern int zfsvfs_create(const char *name, boolean_t readony, zfsvfs_t **zfvp);\nextern int zfsvfs_create_impl(zfsvfs_t **zfvp, zfsvfs_t *zfsvfs, objset_t *os);\nextern void zfsvfs_free(zfsvfs_t *zfsvfs);\nextern int zfs_check_global_label(const char *dsname, const char *hexsl);\n\nextern boolean_t zfs_is_readonly(zfsvfs_t *zfsvfs);\nextern int zfs_domount(struct super_block *sb, zfs_mnt_t *zm, int silent);\nextern void zfs_preumount(struct super_block *sb);\nextern int zfs_umount(struct super_block *sb);\nextern int zfs_remount(struct super_block *sb, int *flags, zfs_mnt_t *zm);\nextern int zfs_statvfs(struct inode *ip, struct kstatfs *statp);\nextern int zfs_vget(struct super_block *sb, struct inode **ipp, fid_t *fidp);\nextern int zfs_prune(struct super_block *sb, unsigned long nr_to_scan,\n    int *objects);\nextern int zfs_get_temporary_prop(dsl_dataset_t *ds, zfs_prop_t zfs_prop,\n    uint64_t *val, char *setpoint);\n\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}