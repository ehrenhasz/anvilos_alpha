{
  "module_name": "trace_zil.h",
  "hash_id": "82e85f171330a93da344a092f0a151b16aab14bd55e7414d73d0fca3e4e766c0",
  "original_prompt": "Ingested from zfs-2.2.2/include/os/linux/zfs/sys/trace_zil.h",
  "human_readable_source": " \n\n#if defined(_KERNEL)\n#if defined(HAVE_DECLARE_EVENT_CLASS)\n\n#undef TRACE_SYSTEM\n#define\tTRACE_SYSTEM zfs\n\n#undef TRACE_SYSTEM_VAR\n#define\tTRACE_SYSTEM_VAR zfs_zil\n\n#if !defined(_TRACE_ZIL_H) || defined(TRACE_HEADER_MULTI_READ)\n#define\t_TRACE_ZIL_H\n\n#include <linux/tracepoint.h>\n#include <sys/types.h>\n\n#define\tZILOG_TP_STRUCT_ENTRY\t\t\t\t\t\t    \\\n\t\t__field(uint64_t,\tzl_lr_seq)\t\t\t    \\\n\t\t__field(uint64_t,\tzl_commit_lr_seq)\t\t    \\\n\t\t__field(uint64_t,\tzl_destroy_txg)\t\t\t    \\\n\t\t__field(uint64_t,\tzl_replaying_seq)\t\t    \\\n\t\t__field(uint32_t,\tzl_suspend)\t\t\t    \\\n\t\t__field(uint8_t,\tzl_suspending)\t\t\t    \\\n\t\t__field(uint8_t,\tzl_keep_first)\t\t\t    \\\n\t\t__field(uint8_t,\tzl_replay)\t\t\t    \\\n\t\t__field(uint8_t,\tzl_stop_sync)\t\t\t    \\\n\t\t__field(uint8_t,\tzl_logbias)\t\t\t    \\\n\t\t__field(uint8_t,\tzl_sync)\t\t\t    \\\n\t\t__field(int,\t\tzl_parse_error)\t\t\t    \\\n\t\t__field(uint64_t,\tzl_parse_blk_seq)\t\t    \\\n\t\t__field(uint64_t,\tzl_parse_lr_seq)\t\t    \\\n\t\t__field(uint64_t,\tzl_parse_blk_count)\t\t    \\\n\t\t__field(uint64_t,\tzl_parse_lr_count)\t\t    \\\n\t\t__field(uint64_t,\tzl_cur_used)\t\t\t    \\\n\t\t__field(clock_t,\tzl_replay_time)\t\t\t    \\\n\t\t__field(uint64_t,\tzl_replay_blks)\n\n#define\tZILOG_TP_FAST_ASSIGN\t\t\t\t\t\t    \\\n\t\t__entry->zl_lr_seq\t\t= zilog->zl_lr_seq;\t    \\\n\t\t__entry->zl_commit_lr_seq\t= zilog->zl_commit_lr_seq;  \\\n\t\t__entry->zl_destroy_txg\t= zilog->zl_destroy_txg;\t    \\\n\t\t__entry->zl_replaying_seq\t= zilog->zl_replaying_seq;  \\\n\t\t__entry->zl_suspend\t\t= zilog->zl_suspend;\t    \\\n\t\t__entry->zl_suspending\t= zilog->zl_suspending;\t\t    \\\n\t\t__entry->zl_keep_first\t= zilog->zl_keep_first;\t\t    \\\n\t\t__entry->zl_replay\t\t= zilog->zl_replay;\t    \\\n\t\t__entry->zl_stop_sync\t= zilog->zl_stop_sync;\t\t    \\\n\t\t__entry->zl_logbias\t\t= zilog->zl_logbias;\t    \\\n\t\t__entry->zl_sync\t\t= zilog->zl_sync;\t    \\\n\t\t__entry->zl_parse_error\t= zilog->zl_parse_error;\t    \\\n\t\t__entry->zl_parse_blk_seq\t= zilog->zl_parse_blk_seq;  \\\n\t\t__entry->zl_parse_lr_seq\t= zilog->zl_parse_lr_seq;   \\\n\t\t__entry->zl_parse_blk_count\t= zilog->zl_parse_blk_count;\\\n\t\t__entry->zl_parse_lr_count\t= zilog->zl_parse_lr_count; \\\n\t\t__entry->zl_cur_used\t= zilog->zl_cur_used;\t\t    \\\n\t\t__entry->zl_replay_time\t= zilog->zl_replay_time;\t    \\\n\t\t__entry->zl_replay_blks\t= zilog->zl_replay_blks;\n\n#define\tZILOG_TP_PRINTK_FMT\t\t\t\t\t\t    \\\n\t\"zl { lr_seq %llu commit_lr_seq %llu destroy_txg %llu \"\t\t    \\\n\t\"replaying_seq %llu suspend %u suspending %u keep_first %u \"\t    \\\n\t\"replay %u stop_sync %u logbias %u sync %u \"\t\t\t    \\\n\t\"parse_error %u parse_blk_seq %llu parse_lr_seq %llu \"\t\t    \\\n\t\"parse_blk_count %llu parse_lr_count %llu \"\t\t\t    \\\n\t\"cur_used %llu replay_time %lu replay_blks %llu }\"\n\n#define\tZILOG_TP_PRINTK_ARGS\t\t\t\t\t\t    \\\n\t    __entry->zl_lr_seq, __entry->zl_commit_lr_seq,\t\t    \\\n\t    __entry->zl_destroy_txg, __entry->zl_replaying_seq,\t\t    \\\n\t    __entry->zl_suspend, __entry->zl_suspending,\t\t    \\\n\t    __entry->zl_keep_first, __entry->zl_replay,\t\t\t    \\\n\t    __entry->zl_stop_sync, __entry->zl_logbias, __entry->zl_sync,   \\\n\t    __entry->zl_parse_error, __entry->zl_parse_blk_seq,\t\t    \\\n\t    __entry->zl_parse_lr_seq, __entry->zl_parse_blk_count,\t    \\\n\t    __entry->zl_parse_lr_count, __entry->zl_cur_used,\t\t    \\\n\t    __entry->zl_replay_time, __entry->zl_replay_blks\n\n#define\tITX_TP_STRUCT_ENTRY\t\t\t\t\t\t    \\\n\t\t__field(itx_wr_state_t,\titx_wr_state)\t\t\t    \\\n\t\t__field(uint8_t,\titx_sync)\t\t\t    \\\n\t\t__field(zil_callback_t,\titx_callback)\t\t\t    \\\n\t\t__field(void *,\t\titx_callback_data)\t\t    \\\n\t\t__field(uint64_t,\titx_oid)\t\t\t    \\\n\t\t\t\t\t\t\t\t\t    \\\n\t\t__field(uint64_t,\tlrc_txtype)\t\t\t    \\\n\t\t__field(uint64_t,\tlrc_reclen)\t\t\t    \\\n\t\t__field(uint64_t,\tlrc_txg)\t\t\t    \\\n\t\t__field(uint64_t,\tlrc_seq)\n\n#define\tITX_TP_FAST_ASSIGN\t\t\t\t\t\t    \\\n\t\t__entry->itx_wr_state\t\t= itx->itx_wr_state;\t    \\\n\t\t__entry->itx_sync\t\t= itx->itx_sync;\t    \\\n\t\t__entry->itx_callback\t\t= itx->itx_callback;\t    \\\n\t\t__entry->itx_callback_data\t= itx->itx_callback_data;   \\\n\t\t__entry->itx_oid\t\t= itx->itx_oid;\t\t    \\\n\t\t\t\t\t\t\t\t\t    \\\n\t\t__entry->lrc_txtype\t\t= itx->itx_lr.lrc_txtype;   \\\n\t\t__entry->lrc_reclen\t\t= itx->itx_lr.lrc_reclen;   \\\n\t\t__entry->lrc_txg\t\t= itx->itx_lr.lrc_txg;\t    \\\n\t\t__entry->lrc_seq\t\t= itx->itx_lr.lrc_seq;\n\n#define\tITX_TP_PRINTK_FMT\t\t\t\t\t\t    \\\n\t\"itx { wr_state %u sync %u callback %p callback_data %p oid %llu\"   \\\n\t\" { txtype %llu reclen %llu txg %llu seq %llu } }\"\n\n#define\tITX_TP_PRINTK_ARGS\t\t\t\t\t\t    \\\n\t    __entry->itx_wr_state, __entry->itx_sync, __entry->itx_callback,\\\n\t    __entry->itx_callback_data, __entry->itx_oid,\t\t    \\\n\t    __entry->lrc_txtype, __entry->lrc_reclen, __entry->lrc_txg,\t    \\\n\t    __entry->lrc_seq\n\n#define\tZCW_TP_STRUCT_ENTRY\t\t\t\t\t\t    \\\n\t\t__field(lwb_t *,\tzcw_lwb)\t\t\t    \\\n\t\t__field(boolean_t,\tzcw_done)\t\t\t    \\\n\t\t__field(int,\t\tzcw_zio_error)\t\t\t    \\\n\n#define\tZCW_TP_FAST_ASSIGN\t\t\t\t\t\t    \\\n\t\t__entry->zcw_lwb\t\t= zcw->zcw_lwb;\t\t    \\\n\t\t__entry->zcw_done\t\t= zcw->zcw_done;\t    \\\n\t\t__entry->zcw_zio_error\t\t= zcw->zcw_zio_error;\n\n#define\tZCW_TP_PRINTK_FMT\t\t\t\t\t\t    \\\n\t\"zcw { lwb %p done %u error %u }\"\n\n#define\tZCW_TP_PRINTK_ARGS\t\t\t\t\t\t    \\\n\t    __entry->zcw_lwb, __entry->zcw_done, __entry->zcw_zio_error\n\n \n\n#if defined(__clang__)\n#pragma clang diagnostic push\n#pragma clang diagnostic ignored \"-Wordered-compare-function-pointers\"\n#endif\n \nDECLARE_EVENT_CLASS(zfs_zil_process_itx_class,\n\tTP_PROTO(zilog_t *zilog, itx_t *itx),\n\tTP_ARGS(zilog, itx),\n\tTP_STRUCT__entry(\n\t    ZILOG_TP_STRUCT_ENTRY\n\t    ITX_TP_STRUCT_ENTRY\n\t),\n\tTP_fast_assign(\n\t    ZILOG_TP_FAST_ASSIGN\n\t    ITX_TP_FAST_ASSIGN\n\t),\n\tTP_printk(\n\t    ZILOG_TP_PRINTK_FMT \" \" ITX_TP_PRINTK_FMT,\n\t    ZILOG_TP_PRINTK_ARGS, ITX_TP_PRINTK_ARGS)\n);\n \n#if defined(__clang__)\n#pragma clang diagnostic pop\n#endif\n\n#define\tDEFINE_ZIL_PROCESS_ITX_EVENT(name) \\\nDEFINE_EVENT(zfs_zil_process_itx_class, name, \\\n    TP_PROTO(zilog_t *zilog, itx_t *itx), \\\n    TP_ARGS(zilog, itx))\nDEFINE_ZIL_PROCESS_ITX_EVENT(zfs_zil__process__commit__itx);\nDEFINE_ZIL_PROCESS_ITX_EVENT(zfs_zil__process__normal__itx);\n\n \n \nDECLARE_EVENT_CLASS(zfs_zil_commit_io_error_class,\n\tTP_PROTO(zilog_t *zilog, zil_commit_waiter_t *zcw),\n\tTP_ARGS(zilog, zcw),\n\tTP_STRUCT__entry(\n\t    ZILOG_TP_STRUCT_ENTRY\n\t    ZCW_TP_STRUCT_ENTRY\n\t),\n\tTP_fast_assign(\n\t    ZILOG_TP_FAST_ASSIGN\n\t    ZCW_TP_FAST_ASSIGN\n\t),\n\tTP_printk(\n\t    ZILOG_TP_PRINTK_FMT \" \" ZCW_TP_PRINTK_FMT,\n\t    ZILOG_TP_PRINTK_ARGS, ZCW_TP_PRINTK_ARGS)\n);\n\n#define\tDEFINE_ZIL_COMMIT_IO_ERROR_EVENT(name) \\\nDEFINE_EVENT(zfs_zil_commit_io_error_class, name, \\\n    TP_PROTO(zilog_t *zilog, zil_commit_waiter_t *zcw), \\\n    TP_ARGS(zilog, zcw))\nDEFINE_ZIL_COMMIT_IO_ERROR_EVENT(zfs_zil__commit__io__error);\n\n \n \nDECLARE_EVENT_CLASS(zfs_zil_block_size_class,\n\tTP_PROTO(zilog_t *zilog, uint64_t res, uint64_t s1),\n\tTP_ARGS(zilog, res, s1),\n\tTP_STRUCT__entry(\n\t    ZILOG_TP_STRUCT_ENTRY\n\t    __field(uint64_t, res)\n\t    __field(uint64_t, s1)\n\t),\n\tTP_fast_assign(\n\t    ZILOG_TP_FAST_ASSIGN\n\t    __entry->res = res;\n\t    __entry->s1 = s1;\n\t),\n\tTP_printk(\n\t    ZILOG_TP_PRINTK_FMT \" res %llu s1 %llu\",\n\t    ZILOG_TP_PRINTK_ARGS, __entry->res, __entry->s1)\n);\n\n#define\tDEFINE_ZIL_BLOCK_SIZE_EVENT(name) \\\nDEFINE_EVENT(zfs_zil_block_size_class, name, \\\n    TP_PROTO(zilog_t *zilog, uint64_t res, uint64_t s1), \\\n    TP_ARGS(zilog, res, s1))\nDEFINE_ZIL_BLOCK_SIZE_EVENT(zfs_zil__block__size);\n\n#endif  \n\n#undef TRACE_INCLUDE_PATH\n#undef TRACE_INCLUDE_FILE\n#define\tTRACE_INCLUDE_PATH sys\n#define\tTRACE_INCLUDE_FILE trace_zil\n#include <trace/define_trace.h>\n\n#else\n\nDEFINE_DTRACE_PROBE2(zil__process__commit__itx);\nDEFINE_DTRACE_PROBE2(zil__process__normal__itx);\nDEFINE_DTRACE_PROBE2(zil__commit__io__error);\nDEFINE_DTRACE_PROBE3(zil__block__size);\n\n#endif  \n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}