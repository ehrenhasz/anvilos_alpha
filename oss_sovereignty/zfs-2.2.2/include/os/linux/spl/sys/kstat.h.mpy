{
  "module_name": "kstat.h",
  "hash_id": "36bdc7c84355d338a36a109a52b232ef5fc2efbe99caa2681db3d3780b775de1",
  "original_prompt": "Ingested from zfs-2.2.2/include/os/linux/spl/sys/kstat.h",
  "human_readable_source": " \n\n#ifndef _SPL_KSTAT_H\n#define\t_SPL_KSTAT_H\n\n#include <linux/module.h>\n#include <sys/types.h>\n#include <sys/time.h>\n#include <sys/kmem.h>\n#include <sys/mutex.h>\n#include <sys/proc.h>\n\n#define\tKSTAT_STRLEN\t\t255\n#define\tKSTAT_RAW_MAX\t\t(128*1024)\n\n \n\n#define\tKSTAT_TYPE_RAW\t\t0  \n#define\tKSTAT_TYPE_NAMED\t1  \n#define\tKSTAT_TYPE_INTR\t\t2  \n#define\tKSTAT_TYPE_IO\t\t3  \n#define\tKSTAT_TYPE_TIMER\t4  \n#define\tKSTAT_NUM_TYPES\t\t5\n\n#define\tKSTAT_DATA_CHAR\t\t0\n#define\tKSTAT_DATA_INT32\t1\n#define\tKSTAT_DATA_UINT32\t2\n#define\tKSTAT_DATA_INT64\t3\n#define\tKSTAT_DATA_UINT64\t4\n#define\tKSTAT_DATA_LONG\t\t5\n#define\tKSTAT_DATA_ULONG\t6\n#define\tKSTAT_DATA_STRING\t7\n#define\tKSTAT_NUM_DATAS\t\t8\n\n#define\tKSTAT_INTR_HARD\t\t0\n#define\tKSTAT_INTR_SOFT\t\t1\n#define\tKSTAT_INTR_WATCHDOG\t2\n#define\tKSTAT_INTR_SPURIOUS\t3\n#define\tKSTAT_INTR_MULTSVC\t4\n#define\tKSTAT_NUM_INTRS\t\t5\n\n#define\tKSTAT_FLAG_VIRTUAL\t0x01\n#define\tKSTAT_FLAG_VAR_SIZE\t0x02\n#define\tKSTAT_FLAG_WRITABLE\t0x04\n#define\tKSTAT_FLAG_PERSISTENT\t0x08\n#define\tKSTAT_FLAG_DORMANT\t0x10\n#define\tKSTAT_FLAG_INVALID\t0x20\n#define\tKSTAT_FLAG_LONGSTRINGS\t0x40\n#define\tKSTAT_FLAG_NO_HEADERS\t0x80\n\n#define\tKS_MAGIC\t\t0x9d9d9d9d\n\n \n#define\tKSTAT_READ\t\t0\n#define\tKSTAT_WRITE\t\t1\n\nstruct kstat_s;\ntypedef struct kstat_s kstat_t;\n\ntypedef int kid_t;\t\t\t\t \ntypedef int kstat_update_t(struct kstat_s *, int);  \n\ntypedef struct kstat_module {\n\tchar ksm_name[KSTAT_STRLEN];\t\t \n\tstruct list_head ksm_module_list;\t \n\tstruct list_head ksm_kstat_list;\t \n\tstruct proc_dir_entry *ksm_proc;\t \n} kstat_module_t;\n\ntypedef struct kstat_raw_ops {\n\tint (*headers)(char *buf, size_t size);\n\tint (*data)(char *buf, size_t size, void *data);\n\tvoid *(*addr)(kstat_t *ksp, loff_t index);\n} kstat_raw_ops_t;\n\ntypedef struct kstat_proc_entry {\n\tchar\tkpe_name[KSTAT_STRLEN];\t\t \n\tchar\tkpe_module[KSTAT_STRLEN];\t \n\tkstat_module_t\t\t*kpe_owner;\t \n\tstruct list_head\tkpe_list;\t \n\tstruct proc_dir_entry\t*kpe_proc;\t \n} kstat_proc_entry_t;\n\nstruct kstat_s {\n\tint\t\tks_magic;\t\t \n\tkid_t\t\tks_kid;\t\t\t \n\thrtime_t\tks_crtime;\t\t \n\thrtime_t\tks_snaptime;\t\t \n\tint\t\tks_instance;\t\t \n\tchar\t\tks_class[KSTAT_STRLEN];  \n\tuchar_t\t\tks_type;\t\t \n\tuchar_t\t\tks_flags;\t\t \n\tvoid\t\t*ks_data;\t\t \n\tuint_t\t\tks_ndata;\t\t \n\tsize_t\t\tks_data_size;\t\t \n\tkstat_update_t\t*ks_update;\t\t \n\tvoid\t\t*ks_private;\t\t \n\tkmutex_t\tks_private_lock;\t \n\tkmutex_t\t*ks_lock;\t\t \n\tkstat_raw_ops_t\tks_raw_ops;\t\t \n\tchar\t\t*ks_raw_buf;\t\t \n\tsize_t\t\tks_raw_bufsize;\t\t \n\tkstat_proc_entry_t\tks_proc;\t \n};\n\ntypedef struct kstat_named_s {\n\tchar\tname[KSTAT_STRLEN];\t \n\tuchar_t\tdata_type;\t\t \n\tunion {\n\t\tchar c[16];\t \n\t\tint32_t\ti32;\t \n\t\tuint32_t ui32;\t \n\t\tint64_t i64;\t \n\t\tuint64_t ui64;\t \n\t\tlong l;\t\t \n\t\tulong_t ul;\t \n\t\tstruct {\n\t\t\tunion {\n\t\t\t\tchar *ptr;\t \n\t\t\t\tchar __pad[8];\t \n\t\t\t} addr;\n\t\t\tuint32_t len;\t\t \n\t\t} string;\n\t} value;\n} kstat_named_t;\n\n#define\tKSTAT_NAMED_STR_PTR(knptr) ((knptr)->value.string.addr.ptr)\n#define\tKSTAT_NAMED_STR_BUFLEN(knptr) ((knptr)->value.string.len)\n\n#ifdef HAVE_PROC_OPS_STRUCT\ntypedef struct proc_ops kstat_proc_op_t;\n#else\ntypedef struct file_operations kstat_proc_op_t;\n#endif\n\ntypedef struct kstat_intr {\n\tuint_t intrs[KSTAT_NUM_INTRS];\n} kstat_intr_t;\n\ntypedef struct kstat_io {\n\tu_longlong_t\tnread;\t\t \n\tu_longlong_t\tnwritten;\t \n\tuint_t\t\treads;\t\t \n\tuint_t\t\twrites;\t\t \n\thrtime_t\twtime;\t\t \n\thrtime_t\twlentime;\t \n\thrtime_t\twlastupdate;\t \n\thrtime_t\trtime;\t\t \n\thrtime_t\trlentime;\t \n\thrtime_t\trlastupdate;\t \n\tuint_t\t\twcnt;\t\t \n\tuint_t\t\trcnt;\t\t \n} kstat_io_t;\n\ntypedef struct kstat_timer {\n\tchar\t\tname[KSTAT_STRLEN];  \n\tu_longlong_t\tnum_events;\t  \n\thrtime_t\telapsed_time;\t  \n\thrtime_t\tmin_time;\t  \n\thrtime_t\tmax_time;\t  \n\thrtime_t\tstart_time;\t  \n\thrtime_t\tstop_time;\t  \n} kstat_timer_t;\n\nint spl_kstat_init(void);\nvoid spl_kstat_fini(void);\n\nextern void __kstat_set_raw_ops(kstat_t *ksp,\n    int (*headers)(char *buf, size_t size),\n    int (*data)(char *buf, size_t size, void *data),\n    void* (*addr)(kstat_t *ksp, loff_t index));\n\nextern kstat_t *__kstat_create(const char *ks_module, int ks_instance,\n    const char *ks_name, const char *ks_class, uchar_t ks_type,\n    uint_t ks_ndata, uchar_t ks_flags);\n\nextern void kstat_proc_entry_init(kstat_proc_entry_t *kpep,\n    const char *module, const char *name);\nextern void kstat_proc_entry_delete(kstat_proc_entry_t *kpep);\nextern void kstat_proc_entry_install(kstat_proc_entry_t *kpep, mode_t mode,\n    const kstat_proc_op_t *file_ops, void *data);\n\nextern void __kstat_install(kstat_t *ksp);\nextern void __kstat_delete(kstat_t *ksp);\n\n#define\tkstat_set_raw_ops(k, h, d, a) \\\n    __kstat_set_raw_ops(k, h, d, a)\n#define\tkstat_create(m, i, n, c, t, s, f) \\\n    __kstat_create(m, i, n, c, t, s, f)\n\n#define\tkstat_install(k)\t\t__kstat_install(k)\n#define\tkstat_delete(k)\t\t\t__kstat_delete(k)\n\n#endif   \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}