{
  "module_name": "libzutil.h",
  "hash_id": "f5ff30e37f449573619ac8a50594123ba74bb202c42b8fb8e622a430f5fefb4a",
  "original_prompt": "Ingested from zfs-2.2.2/include/libzutil.h",
  "human_readable_source": " \n \n\n#ifndef\t_LIBZUTIL_H\n#define\t_LIBZUTIL_H extern __attribute__((visibility(\"default\")))\n\n#include <sys/nvpair.h>\n#include <sys/fs/zfs.h>\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n \n#define\tDISK_LABEL_WAIT\t\t(30 * 1000)   \n\n\n \ntypedef nvlist_t *refresh_config_func_t(void *, nvlist_t *);\n\ntypedef int pool_active_func_t(void *, const char *, uint64_t, boolean_t *);\n\ntypedef const struct pool_config_ops {\n\trefresh_config_func_t\t*pco_refresh_config;\n\tpool_active_func_t\t*pco_pool_active;\n} pool_config_ops_t;\n\n \n_LIBZUTIL_H pool_config_ops_t libzfs_config_ops;\n_LIBZUTIL_H pool_config_ops_t libzpool_config_ops;\n\ntypedef enum lpc_error {\n\tLPC_SUCCESS = 0,\t \n\tLPC_BADCACHE = 2000,\t \n\tLPC_BADPATH,\t \n\tLPC_NOMEM,\t \n\tLPC_EACCESS,\t \n\tLPC_UNKNOWN\n} lpc_error_t;\n\ntypedef struct importargs {\n\tchar **path;\t\t \n\tint paths;\t\t \n\tconst char *poolname;\t \n\tuint64_t guid;\t\t \n\tconst char *cachefile;\t \n\tboolean_t can_be_active;  \n\tboolean_t scan;\t\t \n\tnvlist_t *policy;\t \n} importargs_t;\n\ntypedef struct libpc_handle {\n\tint lpc_error;\n\tboolean_t lpc_printerr;\n\tboolean_t lpc_open_access_error;\n\tboolean_t lpc_desc_active;\n\tchar lpc_desc[1024];\n\tpool_config_ops_t *lpc_ops;\n\tvoid *lpc_lib_handle;\n} libpc_handle_t;\n\n_LIBZUTIL_H const char *libpc_error_description(libpc_handle_t *);\n_LIBZUTIL_H nvlist_t *zpool_search_import(libpc_handle_t *, importargs_t *);\n_LIBZUTIL_H int zpool_find_config(libpc_handle_t *, const char *, nvlist_t **,\n    importargs_t *);\n\n_LIBZUTIL_H const char * const * zpool_default_search_paths(size_t *count);\n_LIBZUTIL_H int zpool_read_label(int, nvlist_t **, int *);\n_LIBZUTIL_H int zpool_label_disk_wait(const char *, int);\n\nstruct udev_device;\n\n_LIBZUTIL_H int zfs_device_get_devid(struct udev_device *, char *, size_t);\n_LIBZUTIL_H int zfs_device_get_physical(struct udev_device *, char *, size_t);\n\n_LIBZUTIL_H void update_vdev_config_dev_strs(nvlist_t *);\n\n \n#define\tDISK_ROOT\t\"/dev\"\n#define\tUDISK_ROOT\t\"/dev/disk\"\n#define\tZVOL_ROOT\t\"/dev/zvol\"\n\n_LIBZUTIL_H int zfs_append_partition(char *path, size_t max_len);\n_LIBZUTIL_H int zfs_resolve_shortname(const char *name, char *path,\n    size_t pathlen);\n\n_LIBZUTIL_H char *zfs_strip_partition(const char *);\n_LIBZUTIL_H const char *zfs_strip_path(const char *);\n\n_LIBZUTIL_H int zfs_strcmp_pathname(const char *, const char *, int);\n\n_LIBZUTIL_H boolean_t zfs_dev_is_dm(const char *);\n_LIBZUTIL_H boolean_t zfs_dev_is_whole_disk(const char *);\n_LIBZUTIL_H int zfs_dev_flush(int);\n_LIBZUTIL_H char *zfs_get_underlying_path(const char *);\n_LIBZUTIL_H char *zfs_get_enclosure_sysfs_path(const char *);\n\n_LIBZUTIL_H boolean_t is_mpath_whole_disk(const char *);\n\n_LIBZUTIL_H boolean_t zfs_isnumber(const char *);\n\n \nenum zfs_nicenum_format {\n\tZFS_NICENUM_1024 = 0,\n\tZFS_NICENUM_BYTES = 1,\n\tZFS_NICENUM_TIME = 2,\n\tZFS_NICENUM_RAW = 3,\n\tZFS_NICENUM_RAWTIME = 4\n};\n\n \n_LIBZUTIL_H void zfs_nicebytes(uint64_t, char *, size_t);\n_LIBZUTIL_H void zfs_nicenum(uint64_t, char *, size_t);\n_LIBZUTIL_H void zfs_nicenum_format(uint64_t, char *, size_t,\n    enum zfs_nicenum_format);\n_LIBZUTIL_H void zfs_nicetime(uint64_t, char *, size_t);\n_LIBZUTIL_H void zfs_niceraw(uint64_t, char *, size_t);\n\n#define\tnicenum(num, buf, size)\tzfs_nicenum(num, buf, size)\n\n_LIBZUTIL_H void zpool_dump_ddt(const ddt_stat_t *, const ddt_histogram_t *);\n_LIBZUTIL_H int zpool_history_unpack(char *, uint64_t, uint64_t *, nvlist_t ***,\n    uint_t *);\n\nstruct zfs_cmd;\n\n \n#define\tANSI_BLACK\t\"\\033[0;30m\"\n#define\tANSI_RED\t\"\\033[0;31m\"\n#define\tANSI_GREEN\t\"\\033[0;32m\"\n#define\tANSI_YELLOW\t\"\\033[0;33m\"\n#define\tANSI_BLUE\t\"\\033[0;34m\"\n#define\tANSI_BOLD_BLUE\t\"\\033[1;34m\"  \n#define\tANSI_MAGENTA\t\"\\033[0;35m\"\n#define\tANSI_CYAN\t\"\\033[0;36m\"\n#define\tANSI_GRAY\t\"\\033[0;37m\"\n\n#define\tANSI_RESET\t\"\\033[0m\"\n#define\tANSI_BOLD\t\"\\033[1m\"\n\n_LIBZUTIL_H int use_color(void);\n_LIBZUTIL_H void color_start(const char *color);\n_LIBZUTIL_H void color_end(void);\n_LIBZUTIL_H int printf_color(const char *color, const char *format, ...);\n\n_LIBZUTIL_H const char *zfs_basename(const char *path);\n_LIBZUTIL_H ssize_t zfs_dirnamelen(const char *path);\n#ifdef __linux__\nextern char **environ;\n_LIBZUTIL_H void zfs_setproctitle_init(int argc, char *argv[], char *envp[]);\n_LIBZUTIL_H void zfs_setproctitle(const char *fmt, ...);\n#else\n#define\tzfs_setproctitle(fmt, ...)\tsetproctitle(fmt, ##__VA_ARGS__)\n#define\tzfs_setproctitle_init(x, y, z)\t((void)0)\n#endif\n\n \ntypedef int (*pool_vdev_iter_f)(void *, nvlist_t *, void *);\nint for_each_vdev_cb(void *zhp, nvlist_t *nv, pool_vdev_iter_f func,\n    void *data);\nint for_each_vdev_in_nvlist(nvlist_t *nvroot, pool_vdev_iter_f func,\n    void *data);\nvoid update_vdevs_config_dev_sysfs_path(nvlist_t *config);\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}