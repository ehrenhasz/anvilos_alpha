{
  "module_name": "vdev_id.conf.5",
  "hash_id": "cfd651c35d08a4c2ed5df48799663713ec53cc1ba0bfb2a1237ec2cad2036d79",
  "original_prompt": "Ingested from zfs-2.2.2/man/man5/vdev_id.conf.5",
  "human_readable_source": ".\\\"\n.\\\" This file and its contents are supplied under the terms of the\n.\\\" Common Development and Distribution License (\"CDDL\"), version 1.0.\n.\\\" You may only use this file in accordance with the terms of version\n.\\\" 1.0 of the CDDL.\n.\\\"\n.\\\" A full copy of the text of the CDDL should have accompanied this\n.\\\" source.  A copy of the CDDL is also available via the Internet at\n.\\\" http://www.illumos.org/license/CDDL.\n.\\\"\n.Dd May 26, 2021\n.Dt VDEV_ID.CONF 5\n.Os\n.\n.Sh NAME\n.Nm vdev_id.conf\n.Nd configuration file for vdev_id(8)\n.Sh DESCRIPTION\n.Nm\nis the configuration file for\n.Xr vdev_id 8 .\nIt controls the default behavior of\n.Xr vdev_id 8\nwhile it is mapping a disk device name to an alias.\n.Pp\nThe\n.Nm\nfile uses a simple format consisting of a keyword followed by one or\nmore values on a single line.\nAny line not beginning with a recognized keyword is ignored.\nComments may optionally begin with a hash character.\n.Pp\nThe following keywords and values are used.\n.Bl -tag -width \"-h\"\n.It Sy alias Ar name Ar devlink\nMaps a device link in the\n.Pa /dev\ndirectory hierarchy to a new device name.\nThe udev rule defining the device link must have run prior to\n.Xr vdev_id 8 .\nA defined alias takes precedence over a topology-derived name, but the\ntwo naming methods can otherwise coexist.\nFor example, one might name drives in a JBOD with the\n.Sy sas_direct\ntopology while naming an internal L2ARC device with an alias.\n.Pp\n.Ar name\nis the name of the link to the device that will by created under\n.Pa /dev/disk/by-vdev .\n.Pp\n.Ar devlink\nis the name of the device link that has already been\ndefined by udev.\nThis may be an absolute path or the base filename.\n.\n.It Sy channel [ Ns Ar pci_slot ] Ar port Ar name\nMaps a physical path to a channel name (typically representing a single\ndisk enclosure).\n.\n.It Sy enclosure_symlinks Sy yes Ns | Ns Sy no\nAdditionally create\n.Pa /dev/by-enclosure\nsymlinks to the disk enclosure\n.Em sg\ndevices using the naming scheme from\n.Pa vdev_id.conf .\n.Sy enclosure_symlinks\nis only allowed for\n.Sy sas_direct\nmode.\n.\n.It Sy enclosure_symlinks_prefix Ar prefix\nSpecify the prefix for the enclosure symlinks in the form\n.Pa /dev/by-enclosure/ Ns Ao Ar prefix Ac Ns - Ns Ao Ar channel Ac Ns Aq Ar num\n.Pp\nDefaults to\n.Dq Em enc .\n.\n.It Sy slot Ar prefix Ar new Op Ar channel\nMaps a disk slot number as reported by the operating system to an\nalternative slot number.\nIf the\n.Ar channel\nparameter is specified\nthen the mapping is only applied to slots in the named channel,\notherwise the mapping is applied to all channels.\nThe first-specified\n.Ar slot\nrule that can match a slot takes precedence.\nTherefore a channel-specific mapping for a given slot should generally appear\nbefore a generic mapping for the same slot.\nIn this way a custom mapping may be applied to a particular channel\nand a default mapping applied to the others.\n.\n.It Sy multipath Sy yes Ns | Ns Sy no\nSpecifies whether\n.Xr vdev_id 8\nwill handle only dm-multipath devices.\nIf set to\n.Sy yes\nthen\n.Xr vdev_id 8\nwill examine the first running component disk of a dm-multipath\ndevice as provided by the driver command to determine the physical path.\n.\n.It Sy topology Sy sas_direct Ns | Ns Sy sas_switch Ns | Ns Sy scsi\nIdentifies a physical topology that governs how physical paths are\nmapped to channels:\n.Bl -tag -compact -width \"sas_direct and scsi\"\n.It Sy sas_direct No and Sy scsi\nchannels are uniquely identified by a PCI slot and HBA port number\n.It Sy sas_switch\nchannels are uniquely identified by a SAS switch port number\n.El\n.\n.It Sy phys_per_port Ar num\nSpecifies the number of PHY devices associated with a SAS HBA port or SAS\nswitch port.\n.Xr vdev_id 8\ninternally uses this value to determine which HBA or switch port a\ndevice is connected to.\nThe default is\n.Sy 4 .\n.\n.It Sy slot Sy bay Ns | Ns Sy phy Ns | Ns Sy port Ns | Ns Sy id Ns | Ns Sy lun Ns | Ns Sy ses\nSpecifies from which element of a SAS identifier the slot number is\ntaken.\nThe default is\n.Sy bay :\n.Bl -tag -compact -width \"port\"\n.It Sy bay\nread the slot number from the bay identifier.\n.It Sy phy\nread the slot number from the phy identifier.\n.It Sy port\nuse the SAS port as the slot number.\n.It Sy id\nuse the scsi id as the slot number.\n.It Sy lun\nuse the scsi lun as the slot number.\n.It Sy ses\nuse the SCSI Enclosure Services (SES) enclosure device slot number,\nas reported by\n.Xr sg_ses 8 .\nIntended for use only on systems where\n.Sy bay\nis unsupported,\nnoting that\n.Sy port\nand\n.Sy id\nmay be unstable across disk replacement.\n.El\n.El\n.\n.Sh FILES\n.Bl -tag -width \"-v v\"\n.It Pa /etc/zfs/vdev_id.conf\nThe configuration file for\n.Xr vdev_id 8 .\n.El\n.\n.Sh EXAMPLES\nA non-multipath configuration with direct-attached SAS enclosures and an\narbitrary slot re-mapping:\n.Bd -literal -compact -offset Ds\nmultipath     no\ntopology      sas_direct\nphys_per_port 4\nslot          bay\n\n#       PCI_SLOT HBA PORT  CHANNEL NAME\nchannel 85:00.0  1         A\nchannel 85:00.0  0         B\nchannel 86:00.0  1         C\nchannel 86:00.0  0         D\n\n# Custom mapping for Channel A\n\n#    Linux      Mapped\n#    Slot       Slot      Channel\nslot 1          7         A\nslot 2          10        A\nslot 3          3         A\nslot 4          6         A\n\n# Default mapping for B, C, and D\n\nslot 1          4\nslot 2          2\nslot 3          1\nslot 4          3\n.Ed\n.Pp\nA SAS-switch topology.\nNote, that the\n.Ar channel\nkeyword takes only two arguments in this example:\n.Bd -literal -compact -offset Ds\ntopology      sas_switch\n\n#       SWITCH PORT  CHANNEL NAME\nchannel 1            A\nchannel 2            B\nchannel 3            C\nchannel 4            D\n.Ed\n.Pp\nA multipath configuration.\nNote that channel names have multiple definitions - one per physical path:\n.Bd -literal -compact -offset Ds\nmultipath yes\n\n#       PCI_SLOT HBA PORT  CHANNEL NAME\nchannel 85:00.0  1         A\nchannel 85:00.0  0         B\nchannel 86:00.0  1         A\nchannel 86:00.0  0         B\n.Ed\n.Pp\nA configuration with enclosure_symlinks enabled:\n.Bd -literal -compact -offset Ds\nmultipath yes\nenclosure_symlinks yes\n\n#          PCI_ID      HBA PORT     CHANNEL NAME\nchannel    05:00.0     1            U\nchannel    05:00.0     0            L\nchannel    06:00.0     1            U\nchannel    06:00.0     0            L\n.Ed\nIn addition to the disks symlinks, this configuration will create:\n.Bd -literal -compact -offset Ds\n/dev/by-enclosure/enc-L0\n/dev/by-enclosure/enc-L1\n/dev/by-enclosure/enc-U0\n/dev/by-enclosure/enc-U1\n.Ed\n.Pp\nA configuration using device link aliases:\n.Bd -literal -compact -offset Ds\n#     by-vdev\n#     name     fully qualified or base name of device link\nalias d1       /dev/disk/by-id/wwn-0x5000c5002de3b9ca\nalias d2       wwn-0x5000c5002def789e\n.Ed\n.\n.Sh SEE ALSO\n.Xr vdev_id 8\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}