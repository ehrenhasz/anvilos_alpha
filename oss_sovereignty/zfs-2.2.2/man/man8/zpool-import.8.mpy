{
  "module_name": "zpool-import.8",
  "hash_id": "4330ad139656546d2253b33a12ca5c65eba9e2bf3ea47e3e11e27a91ea84ff44",
  "original_prompt": "Ingested from zfs-2.2.2/man/man8/zpool-import.8",
  "human_readable_source": ".\\\"\n.\\\" CDDL HEADER START\n.\\\"\n.\\\" The contents of this file are subject to the terms of the\n.\\\" Common Development and Distribution License (the \"License\").\n.\\\" You may not use this file except in compliance with the License.\n.\\\"\n.\\\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE\n.\\\" or https://opensource.org/licenses/CDDL-1.0.\n.\\\" See the License for the specific language governing permissions\n.\\\" and limitations under the License.\n.\\\"\n.\\\" When distributing Covered Code, include this CDDL HEADER in each\n.\\\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.\n.\\\" If applicable, add the following below this CDDL HEADER, with the\n.\\\" fields enclosed by brackets \"[]\" replaced with your own identifying\n.\\\" information: Portions Copyright [yyyy] [name of copyright owner]\n.\\\"\n.\\\" CDDL HEADER END\n.\\\"\n.\\\" Copyright (c) 2007, Sun Microsystems, Inc. All Rights Reserved.\n.\\\" Copyright (c) 2012, 2018 by Delphix. All rights reserved.\n.\\\" Copyright (c) 2012 Cyril Plisko. All Rights Reserved.\n.\\\" Copyright (c) 2017 Datto Inc.\n.\\\" Copyright (c) 2018 George Melikov. All Rights Reserved.\n.\\\" Copyright 2017 Nexenta Systems, Inc.\n.\\\" Copyright (c) 2017 Open-E, Inc. All Rights Reserved.\n.\\\"\n.Dd March 16, 2022\n.Dt ZPOOL-IMPORT 8\n.Os\n.\n.Sh NAME\n.Nm zpool-import\n.Nd import ZFS storage pools or list available pools\n.Sh SYNOPSIS\n.Nm zpool\n.Cm import\n.Op Fl D\n.Oo Fl d Ar dir Ns | Ns Ar device Oc Ns \u2026\n.Nm zpool\n.Cm import\n.Fl a\n.Op Fl DflmN\n.Op Fl F Op Fl nTX\n.Op Fl -rewind-to-checkpoint\n.Op Fl c Ar cachefile Ns | Ns Fl d Ar dir Ns | Ns Ar device\n.Op Fl o Ar mntopts\n.Oo Fl o Ar property Ns = Ns Ar value Oc Ns \u2026\n.Op Fl R Ar root\n.Nm zpool\n.Cm import\n.Op Fl Dflmt\n.Op Fl F Op Fl nTX\n.Op Fl -rewind-to-checkpoint\n.Op Fl c Ar cachefile Ns | Ns Fl d Ar dir Ns | Ns Ar device\n.Op Fl o Ar mntopts\n.Oo Fl o Ar property Ns = Ns Ar value Oc Ns \u2026\n.Op Fl R Ar root\n.Op Fl s\n.Ar pool Ns | Ns Ar id\n.Op Ar newpool\n.\n.Sh DESCRIPTION\n.Bl -tag -width Ds\n.It Xo\n.Nm zpool\n.Cm import\n.Op Fl D\n.Oo Fl d Ar dir Ns | Ns Ar device Oc Ns \u2026\n.Xc\nLists pools available to import.\nIf the\n.Fl d\nor\n.Fl c\noptions are not specified, this command searches for devices using libblkid\non Linux and geom on\n.Fx .\nThe\n.Fl d\noption can be specified multiple times, and all directories are searched.\nIf the device appears to be part of an exported pool, this command displays a\nsummary of the pool with the name of the pool, a numeric identifier, as well as\nthe vdev layout and current health of the device for each device or file.\nDestroyed pools, pools that were previously destroyed with the\n.Nm zpool Cm destroy\ncommand, are not listed unless the\n.Fl D\noption is specified.\n.Pp\nThe numeric identifier is unique, and can be used instead of the pool name when\nmultiple exported pools of the same name are available.\n.Bl -tag -width Ds\n.It Fl c Ar cachefile\nReads configuration from the given\n.Ar cachefile\nthat was created with the\n.Sy cachefile\npool property.\nThis\n.Ar cachefile\nis used instead of searching for devices.\n.It Fl d Ar dir Ns | Ns Ar device\nUses\n.Ar device\nor searches for devices or files in\n.Ar dir .\nThe\n.Fl d\noption can be specified multiple times.\n.It Fl D\nLists destroyed pools only.\n.El\n.It Xo\n.Nm zpool\n.Cm import\n.Fl a\n.Op Fl DflmN\n.Op Fl F Op Fl nTX\n.Op Fl c Ar cachefile Ns | Ns Fl d Ar dir Ns | Ns Ar device\n.Op Fl o Ar mntopts\n.Oo Fl o Ar property Ns = Ns Ar value Oc Ns \u2026\n.Op Fl R Ar root\n.Op Fl s\n.Xc\nImports all pools found in the search directories.\nIdentical to the previous command, except that all pools with a sufficient\nnumber of devices available are imported.\nDestroyed pools, pools that were previously destroyed with the\n.Nm zpool Cm destroy\ncommand, will not be imported unless the\n.Fl D\noption is specified.\n.Bl -tag -width Ds\n.It Fl a\nSearches for and imports all pools found.\n.It Fl c Ar cachefile\nReads configuration from the given\n.Ar cachefile\nthat was created with the\n.Sy cachefile\npool property.\nThis\n.Ar cachefile\nis used instead of searching for devices.\n.It Fl d Ar dir Ns | Ns Ar device\nUses\n.Ar device\nor searches for devices or files in\n.Ar dir .\nThe\n.Fl d\noption can be specified multiple times.\nThis option is incompatible with the\n.Fl c\noption.\n.It Fl D\nImports destroyed pools only.\nThe\n.Fl f\noption is also required.\n.It Fl f\nForces import, even if the pool appears to be potentially active.\n.It Fl F\nRecovery mode for a non-importable pool.\nAttempt to return the pool to an importable state by discarding the last few\ntransactions.\nNot all damaged pools can be recovered by using this option.\nIf successful, the data from the discarded transactions is irretrievably lost.\nThis option is ignored if the pool is importable or already imported.\n.It Fl l\nIndicates that this command will request encryption keys for all encrypted\ndatasets it attempts to mount as it is bringing the pool online.\nNote that if any datasets have a\n.Sy keylocation\nof\n.Sy prompt\nthis command will block waiting for the keys to be entered.\nWithout this flag\nencrypted datasets will be left unavailable until the keys are loaded.\n.It Fl m\nAllows a pool to import when there is a missing log device.\nRecent transactions can be lost because the log device will be discarded.\n.It Fl n\nUsed with the\n.Fl F\nrecovery option.\nDetermines whether a non-importable pool can be made importable again, but does\nnot actually perform the pool recovery.\nFor more details about pool recovery mode, see the\n.Fl F\noption, above.\n.It Fl N\nImport the pool without mounting any file systems.\n.It Fl o Ar mntopts\nComma-separated list of mount options to use when mounting datasets within the\npool.\nSee\n.Xr zfs 8\nfor a description of dataset properties and mount options.\n.It Fl o Ar property Ns = Ns Ar value\nSets the specified property on the imported pool.\nSee the\n.Xr zpoolprops 7\nmanual page for more information on the available pool properties.\n.It Fl R Ar root\nSets the\n.Sy cachefile\nproperty to\n.Sy none\nand the\n.Sy altroot\nproperty to\n.Ar root .\n.It Fl -rewind-to-checkpoint\nRewinds pool to the checkpointed state.\nOnce the pool is imported with this flag there is no way to undo the rewind.\nAll changes and data that were written after the checkpoint are lost!\nThe only exception is when the\n.Sy readonly\nmounting option is enabled.\nIn this case, the checkpointed state of the pool is opened and an\nadministrator can see how the pool would look like if they were\nto fully rewind.\n.It Fl s\nScan using the default search path, the libblkid cache will not be\nconsulted.\nA custom search path may be specified by setting the\n.Sy ZPOOL_IMPORT_PATH\nenvironment variable.\n.It Fl X\nUsed with the\n.Fl F\nrecovery option.\nDetermines whether extreme measures to find a valid txg should take place.\nThis allows the pool to\nbe rolled back to a txg which is no longer guaranteed to be consistent.\nPools imported at an inconsistent txg may contain uncorrectable checksum errors.\nFor more details about pool recovery mode, see the\n.Fl F\noption, above.\nWARNING: This option can be extremely hazardous to the\nhealth of your pool and should only be used as a last resort.\n.It Fl T\nSpecify the txg to use for rollback.\nImplies\n.Fl FX .\nFor more details\nabout pool recovery mode, see the\n.Fl X\noption, above.\nWARNING: This option can be extremely hazardous to the\nhealth of your pool and should only be used as a last resort.\n.El\n.It Xo\n.Nm zpool\n.Cm import\n.Op Fl Dflmt\n.Op Fl F Op Fl nTX\n.Op Fl c Ar cachefile Ns | Ns Fl d Ar dir Ns | Ns Ar device\n.Op Fl o Ar mntopts\n.Oo Fl o Ar property Ns = Ns Ar value Oc Ns \u2026\n.Op Fl R Ar root\n.Op Fl s\n.Ar pool Ns | Ns Ar id\n.Op Ar newpool\n.Xc\nImports a specific pool.\nA pool can be identified by its name or the numeric identifier.\nIf\n.Ar newpool\nis specified, the pool is imported using the name\n.Ar newpool .\nOtherwise, it is imported with the same name as its exported name.\n.Pp\nIf a device is removed from a system without running\n.Nm zpool Cm export\nfirst, the device appears as potentially active.\nIt cannot be determined if this was a failed export, or whether the device is\nreally in use from another host.\nTo import a pool in this state, the\n.Fl f\noption is required.\n.Bl -tag -width Ds\n.It Fl c Ar cachefile\nReads configuration from the given\n.Ar cachefile\nthat was created with the\n.Sy cachefile\npool property.\nThis\n.Ar cachefile\nis used instead of searching for devices.\n.It Fl d Ar dir Ns | Ns Ar device\nUses\n.Ar device\nor searches for devices or files in\n.Ar dir .\nThe\n.Fl d\noption can be specified multiple times.\nThis option is incompatible with the\n.Fl c\noption.\n.It Fl D\nImports destroyed pool.\nThe\n.Fl f\noption is also required.\n.It Fl f\nForces import, even if the pool appears to be potentially active.\n.It Fl F\nRecovery mode for a non-importable pool.\nAttempt to return the pool to an importable state by discarding the last few\ntransactions.\nNot all damaged pools can be recovered by using this option.\nIf successful, the data from the discarded transactions is irretrievably lost.\nThis option is ignored if the pool is importable or already imported.\n.It Fl l\nIndicates that this command will request encryption keys for all encrypted\ndatasets it attempts to mount as it is bringing the pool online.\nNote that if any datasets have a\n.Sy keylocation\nof\n.Sy prompt\nthis command will block waiting for the keys to be entered.\nWithout this flag\nencrypted datasets will be left unavailable until the keys are loaded.\n.It Fl m\nAllows a pool to import when there is a missing log device.\nRecent transactions can be lost because the log device will be discarded.\n.It Fl n\nUsed with the\n.Fl F\nrecovery option.\nDetermines whether a non-importable pool can be made importable again, but does\nnot actually perform the pool recovery.\nFor more details about pool recovery mode, see the\n.Fl F\noption, above.\n.It Fl o Ar mntopts\nComma-separated list of mount options to use when mounting datasets within the\npool.\nSee\n.Xr zfs 8\nfor a description of dataset properties and mount options.\n.It Fl o Ar property Ns = Ns Ar value\nSets the specified property on the imported pool.\nSee the\n.Xr zpoolprops 7\nmanual page for more information on the available pool properties.\n.It Fl R Ar root\nSets the\n.Sy cachefile\nproperty to\n.Sy none\nand the\n.Sy altroot\nproperty to\n.Ar root .\n.It Fl s\nScan using the default search path, the libblkid cache will not be\nconsulted.\nA custom search path may be specified by setting the\n.Sy ZPOOL_IMPORT_PATH\nenvironment variable.\n.It Fl X\nUsed with the\n.Fl F\nrecovery option.\nDetermines whether extreme measures to find a valid txg should take place.\nThis allows the pool to\nbe rolled back to a txg which is no longer guaranteed to be consistent.\nPools imported at an inconsistent txg may contain uncorrectable\nchecksum errors.\nFor more details about pool recovery mode, see the\n.Fl F\noption, above.\nWARNING: This option can be extremely hazardous to the\nhealth of your pool and should only be used as a last resort.\n.It Fl T\nSpecify the txg to use for rollback.\nImplies\n.Fl FX .\nFor more details\nabout pool recovery mode, see the\n.Fl X\noption, above.\n.Em WARNING :\nThis option can be extremely hazardous to the\nhealth of your pool and should only be used as a last resort.\n.It Fl t\nUsed with\n.Ar newpool .\nSpecifies that\n.Ar newpool\nis temporary.\nTemporary pool names last until export.\nEnsures that the original pool name will be used\nin all label updates and therefore is retained upon export.\nWill also set\n.Fl o Sy cachefile Ns = Ns Sy none\nwhen not explicitly specified.\n.El\n.El\n.\n.Sh EXAMPLES\n.\\\" These are, respectively, examples 9 from zpool.8\n.\\\" Make sure to update them bidirectionally\n.Ss Example 9 : No Importing a ZFS Storage Pool\nThe following command displays available pools, and then imports the pool\n.Ar tank\nfor use on the system.\nThe results from this command are similar to the following:\n.Bd -literal -compact -offset Ds\n.No # Nm zpool Cm import\n  pool: tank\n    id: 15451357997522795478\n state: ONLINE\naction: The pool can be imported using its name or numeric identifier.\nconfig:\n\n        tank        ONLINE\n          mirror    ONLINE\n            sda     ONLINE\n            sdb     ONLINE\n\n.No # Nm zpool Cm import Ar tank\n.Ed\n.\n.Sh SEE ALSO\n.Xr zpool-export 8 ,\n.Xr zpool-list 8 ,\n.Xr zpool-status 8\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}