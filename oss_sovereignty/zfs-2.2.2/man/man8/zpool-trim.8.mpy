{
  "module_name": "zpool-trim.8",
  "hash_id": "111fb1a0534ff01a06ee814ccd61ef36986b3bec38c9aa9c7322e0b730e959ca",
  "original_prompt": "Ingested from zfs-2.2.2/man/man8/zpool-trim.8",
  "human_readable_source": ".\\\"\n.\\\" CDDL HEADER START\n.\\\"\n.\\\" The contents of this file are subject to the terms of the\n.\\\" Common Development and Distribution License (the \"License\").\n.\\\" You may not use this file except in compliance with the License.\n.\\\"\n.\\\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE\n.\\\" or https://opensource.org/licenses/CDDL-1.0.\n.\\\" See the License for the specific language governing permissions\n.\\\" and limitations under the License.\n.\\\"\n.\\\" When distributing Covered Code, include this CDDL HEADER in each\n.\\\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.\n.\\\" If applicable, add the following below this CDDL HEADER, with the\n.\\\" fields enclosed by brackets \"[]\" replaced with your own identifying\n.\\\" information: Portions Copyright [yyyy] [name of copyright owner]\n.\\\"\n.\\\" CDDL HEADER END\n.\\\"\n.\\\" Copyright (c) 2007, Sun Microsystems, Inc. All Rights Reserved.\n.\\\" Copyright (c) 2012, 2018 by Delphix. All rights reserved.\n.\\\" Copyright (c) 2012 Cyril Plisko. All Rights Reserved.\n.\\\" Copyright (c) 2017 Datto Inc.\n.\\\" Copyright (c) 2018 George Melikov. All Rights Reserved.\n.\\\" Copyright 2017 Nexenta Systems, Inc.\n.\\\" Copyright (c) 2017 Open-E, Inc. All Rights Reserved.\n.\\\"\n.Dd May 27, 2021\n.Dt ZPOOL-TRIM 8\n.Os\n.\n.Sh NAME\n.Nm zpool-trim\n.Nd initiate TRIM of free space in ZFS storage pool\n.Sh SYNOPSIS\n.Nm zpool\n.Cm trim\n.Op Fl dw\n.Op Fl r Ar rate\n.Op Fl c Ns | Ns Fl s\n.Ar pool\n.Oo Ar device Ns Oc Ns \u2026\n.\n.Sh DESCRIPTION\nInitiates an immediate on-demand TRIM operation for all of the free space in\na pool.\nThis operation informs the underlying storage devices of all blocks\nin the pool which are no longer allocated and allows thinly provisioned\ndevices to reclaim the space.\n.Pp\nA manual on-demand TRIM operation can be initiated irrespective of the\n.Sy autotrim\npool property setting.\nSee the documentation for the\n.Sy autotrim\nproperty above for the types of vdev devices which can be trimmed.\n.Bl -tag -width Ds\n.It Fl d , -secure\nCauses a secure TRIM to be initiated.\nWhen performing a secure TRIM, the\ndevice guarantees that data stored on the trimmed blocks has been erased.\nThis requires support from the device and is not supported by all SSDs.\n.It Fl r , -rate Ar rate\nControls the rate at which the TRIM operation progresses.\nWithout this\noption TRIM is executed as quickly as possible.\nThe rate, expressed in bytes\nper second, is applied on a per-vdev basis and may be set differently for\neach leaf vdev.\n.It Fl c , -cancel\nCancel trimming on the specified devices, or all eligible devices if none\nare specified.\nIf one or more target devices are invalid or are not currently being\ntrimmed, the command will fail and no cancellation will occur on any device.\n.It Fl s , -suspend\nSuspend trimming on the specified devices, or all eligible devices if none\nare specified.\nIf one or more target devices are invalid or are not currently being\ntrimmed, the command will fail and no suspension will occur on any device.\nTrimming can then be resumed by running\n.Nm zpool Cm trim\nwith no flags on the relevant target devices.\n.It Fl w , -wait\nWait until the devices are done being trimmed before returning.\n.El\n.Sh PERIODIC TRIM\nOn machines using systemd, trim timers can be enabled on a per-pool basis.\n.Nm weekly\nand\n.Nm monthly\ntimer units are provided.\n.Bl -tag -width Ds\n.It Xo\n.Xc\n.Nm systemctl\n.Cm enable\n.Cm zfs-trim-\\fIweekly\\fB@\\fIrpool\\fB.timer\n.Cm --now\n.It Xo\n.Xc\n.Nm systemctl\n.Cm enable\n.Cm zfs-trim-\\fImonthly\\fB@\\fIotherpool\\fB.timer\n.Cm --now\n.El\n.\n.Sh SEE ALSO\n.Xr systemd.timer 5 ,\n.Xr zpoolprops 7 ,\n.Xr zpool-initialize 8 ,\n.Xr zpool-wait 8\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}