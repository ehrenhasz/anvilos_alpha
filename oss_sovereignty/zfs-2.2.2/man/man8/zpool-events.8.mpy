{
  "module_name": "zpool-events.8",
  "hash_id": "7547251e90177489b0fc8572bb22b8bc5f85f52d318516369fc64da99b4a57bc",
  "original_prompt": "Ingested from zfs-2.2.2/man/man8/zpool-events.8",
  "human_readable_source": ".\\\"\n.\\\" CDDL HEADER START\n.\\\"\n.\\\" The contents of this file are subject to the terms of the\n.\\\" Common Development and Distribution License (the \"License\").\n.\\\" You may not use this file except in compliance with the License.\n.\\\"\n.\\\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE\n.\\\" or https://opensource.org/licenses/CDDL-1.0.\n.\\\" See the License for the specific language governing permissions\n.\\\" and limitations under the License.\n.\\\"\n.\\\" When distributing Covered Code, include this CDDL HEADER in each\n.\\\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.\n.\\\" If applicable, add the following below this CDDL HEADER, with the\n.\\\" fields enclosed by brackets \"[]\" replaced with your own identifying\n.\\\" information: Portions Copyright [yyyy] [name of copyright owner]\n.\\\"\n.\\\" CDDL HEADER END\n.\\\"\n.\\\" Copyright (c) 2007, Sun Microsystems, Inc. All Rights Reserved.\n.\\\" Copyright (c) 2012, 2018 by Delphix. All rights reserved.\n.\\\" Copyright (c) 2012 Cyril Plisko. All Rights Reserved.\n.\\\" Copyright (c) 2017 Datto Inc.\n.\\\" Copyright (c) 2018 George Melikov. All Rights Reserved.\n.\\\" Copyright 2017 Nexenta Systems, Inc.\n.\\\" Copyright (c) 2017 Open-E, Inc. All Rights Reserved.\n.\\\"\n.Dd July 11, 2023\n.Dt ZPOOL-EVENTS 8\n.Os\n.\n.Sh NAME\n.Nm zpool-events\n.Nd list recent events generated by kernel\n.Sh SYNOPSIS\n.Nm zpool\n.Cm events\n.Op Fl vHf\n.Op Ar pool\n.Nm zpool\n.Cm events\n.Fl c\n.\n.Sh DESCRIPTION\nLists all recent events generated by the ZFS kernel modules.\nThese events are consumed by the\n.Xr zed 8\nand used to automate administrative tasks such as replacing a failed device\nwith a hot spare.\nFor more information about the subclasses and event payloads\nthat can be generated see\n.Sx EVENTS\nand the following sections.\n.\n.Sh OPTIONS\n.Bl -tag -compact -width Ds\n.It Fl c\nClear all previous events.\n.It Fl f\nFollow mode.\n.It Fl H\nScripted mode.\nDo not display headers, and separate fields by a\nsingle tab instead of arbitrary space.\n.It Fl v\nPrint the entire payload for each event.\n.El\n.\n.Sh EVENTS\nThese are the different event subclasses.\nThe full event name would be\n.Sy ereport.fs.zfs.\\& Ns Em SUBCLASS ,\nbut only the last part is listed here.\n.Pp\n.Bl -tag -compact -width \"vdev.bad_guid_sum\"\n.It Sy checksum\nIssued when a checksum error has been detected.\n.It Sy io\nIssued when there is an I/O error in a vdev in the pool.\n.It Sy data\nIssued when there have been data errors in the pool.\n.It Sy deadman\nIssued when an I/O request is determined to be \"hung\", this can be caused\nby lost completion events due to flaky hardware or drivers.\nSee\n.Sy zfs_deadman_failmode\nin\n.Xr zfs 4\nfor additional information regarding \"hung\" I/O detection and configuration.\n.It Sy delay\nIssued when a completed I/O request exceeds the maximum allowed time\nspecified by the\n.Sy zio_slow_io_ms\nmodule parameter.\nThis can be an indicator of problems with the underlying storage device.\nThe number of delay events is ratelimited by the\n.Sy zfs_slow_io_events_per_second\nmodule parameter.\n.It Sy config\nIssued every time a vdev change have been done to the pool.\n.It Sy zpool\nIssued when a pool cannot be imported.\n.It Sy zpool.destroy\nIssued when a pool is destroyed.\n.It Sy zpool.export\nIssued when a pool is exported.\n.It Sy zpool.import\nIssued when a pool is imported.\n.It Sy zpool.reguid\nIssued when a REGUID (new unique identifier for the pool have been regenerated)\nhave been detected.\n.It Sy vdev.unknown\nIssued when the vdev is unknown.\nSuch as trying to clear device errors on a vdev that have failed/been kicked\nfrom the system/pool and is no longer available.\n.It Sy vdev.open_failed\nIssued when a vdev could not be opened (because it didn't exist for example).\n.It Sy vdev.corrupt_data\nIssued when corrupt data have been detected on a vdev.\n.It Sy vdev.no_replicas\nIssued when there are no more replicas to sustain the pool.\nThis would lead to the pool being\n.Em DEGRADED .\n.It Sy vdev.bad_guid_sum\nIssued when a missing device in the pool have been detected.\n.It Sy vdev.too_small\nIssued when the system (kernel) have removed a device, and ZFS\nnotices that the device isn't there any more.\nThis is usually followed by a\n.Sy probe_failure\nevent.\n.It Sy vdev.bad_label\nIssued when the label is OK but invalid.\n.It Sy vdev.bad_ashift\nIssued when the ashift alignment requirement has increased.\n.It Sy vdev.remove\nIssued when a vdev is detached from a mirror (or a spare detached from a\nvdev where it have been used to replace a failed drive - only works if\nthe original drive have been re-added).\n.It Sy vdev.clear\nIssued when clearing device errors in a pool.\nSuch as running\n.Nm zpool Cm clear\non a device in the pool.\n.It Sy vdev.check\nIssued when a check to see if a given vdev could be opened is started.\n.It Sy vdev.spare\nIssued when a spare have kicked in to replace a failed device.\n.It Sy vdev.autoexpand\nIssued when a vdev can be automatically expanded.\n.It Sy io_failure\nIssued when there is an I/O failure in a vdev in the pool.\n.It Sy probe_failure\nIssued when a probe fails on a vdev.\nThis would occur if a vdev\nhave been kicked from the system outside of ZFS (such as the kernel\nhave removed the device).\n.It Sy log_replay\nIssued when the intent log cannot be replayed.\nThe can occur in the case of a missing or damaged log device.\n.It Sy resilver.start\nIssued when a resilver is started.\n.It Sy resilver.finish\nIssued when the running resilver have finished.\n.It Sy scrub.start\nIssued when a scrub is started on a pool.\n.It Sy scrub.finish\nIssued when a pool has finished scrubbing.\n.It Sy scrub.abort\nIssued when a scrub is aborted on a pool.\n.It Sy scrub.resume\nIssued when a scrub is resumed on a pool.\n.It Sy scrub.paused\nIssued when a scrub is paused on a pool.\n.It Sy bootfs.vdev.attach\n.El\n.\n.Sh PAYLOADS\nThis is the payload (data, information) that accompanies an\nevent.\n.Pp\nFor\n.Xr zed 8 ,\nthese are set to uppercase and prefixed with\n.Sy ZEVENT_ .\n.Pp\n.Bl -tag -compact -width \"vdev_cksum_errors\"\n.It Sy pool\nPool name.\n.It Sy pool_failmode\nFailmode -\n.Sy wait ,\n.Sy continue ,\nor\n.Sy panic .\nSee the\n.Sy failmode\nproperty in\n.Xr zpoolprops 7\nfor more information.\n.It Sy pool_guid\nThe GUID of the pool.\n.It Sy pool_context\nThe load state for the pool (0=none, 1=open, 2=import, 3=tryimport, 4=recover\n5=error).\n.It Sy vdev_guid\nThe GUID of the vdev in question (the vdev failing or operated upon with\n.Nm zpool Cm clear ,\netc.).\n.It Sy vdev_type\nType of vdev -\n.Sy disk ,\n.Sy file ,\n.Sy mirror ,\netc.\nSee the\n.Sy Virtual Devices\nsection of\n.Xr zpoolconcepts 7\nfor more information on possible values.\n.It Sy vdev_path\nFull path of the vdev, including any\n.Em -partX .\n.It Sy vdev_devid\nID of vdev (if any).\n.It Sy vdev_fru\nPhysical FRU location.\n.It Sy vdev_state\nState of vdev (0=uninitialized, 1=closed, 2=offline, 3=removed, 4=failed to\nopen, 5=faulted, 6=degraded, 7=healthy).\n.It Sy vdev_ashift\nThe ashift value of the vdev.\n.It Sy vdev_complete_ts\nThe time the last I/O request completed for the specified vdev.\n.It Sy vdev_delta_ts\nThe time since the last I/O request completed for the specified vdev.\n.It Sy vdev_spare_paths\nList of spares, including full path and any\n.Em -partX .\n.It Sy vdev_spare_guids\nGUID(s) of spares.\n.It Sy vdev_read_errors\nHow many read errors that have been detected on the vdev.\n.It Sy vdev_write_errors\nHow many write errors that have been detected on the vdev.\n.It Sy vdev_cksum_errors\nHow many checksum errors that have been detected on the vdev.\n.It Sy parent_guid\nGUID of the vdev parent.\n.It Sy parent_type\nType of parent.\nSee\n.Sy vdev_type .\n.It Sy parent_path\nPath of the vdev parent (if any).\n.It Sy parent_devid\nID of the vdev parent (if any).\n.It Sy zio_objset\nThe object set number for a given I/O request.\n.It Sy zio_object\nThe object number for a given I/O request.\n.It Sy zio_level\nThe indirect level for the block.\nLevel 0 is the lowest level and includes data blocks.\nValues > 0 indicate metadata blocks at the appropriate level.\n.It Sy zio_blkid\nThe block ID for a given I/O request.\n.It Sy zio_err\nThe error number for a failure when handling a given I/O request,\ncompatible with\n.Xr errno 3\nwith the value of\n.Sy EBADE\nused to indicate a ZFS checksum error.\n.It Sy zio_offset\nThe offset in bytes of where to write the I/O request for the specified vdev.\n.It Sy zio_size\nThe size in bytes of the I/O request.\n.It Sy zio_flags\nThe current flags describing how the I/O request should be handled.\nSee the\n.Sy I/O FLAGS\nsection for the full list of I/O flags.\n.It Sy zio_stage\nThe current stage of the I/O in the pipeline.\nSee the\n.Sy I/O STAGES\nsection for a full list of all the I/O stages.\n.It Sy zio_pipeline\nThe valid pipeline stages for the I/O.\nSee the\n.Sy I/O STAGES\nsection for a full list of all the I/O stages.\n.It Sy zio_delay\nThe time elapsed (in nanoseconds) waiting for the block layer to complete the\nI/O request.\nUnlike\n.Sy zio_delta ,\nthis does not include any vdev queuing time and is\ntherefore solely a measure of the block layer performance.\n.It Sy zio_timestamp\nThe time when a given I/O request was submitted.\n.It Sy zio_delta\nThe time required to service a given I/O request.\n.It Sy prev_state\nThe previous state of the vdev.\n.It Sy cksum_algorithm\nChecksum algorithm used.\nSee\n.Xr zfsprops 7\nfor more information on the available checksum algorithms.\n.It Sy cksum_byteswap\nWhether or not the data is byteswapped.\n.It Sy bad_ranges\n.No [\\& Ns Ar start , end )\npairs of corruption offsets.\nOffsets are always aligned on a 64-bit boundary,\nand can include some gaps of non-corruption.\n(See\n.Sy bad_ranges_min_gap )\n.It Sy bad_ranges_min_gap\nIn order to bound the size of the\n.Sy bad_ranges\narray, gaps of non-corruption\nless than or equal to\n.Sy bad_ranges_min_gap\nbytes have been merged with\nadjacent corruption.\nAlways at least 8 bytes, since corruption is detected on a 64-bit word basis.\n.It Sy bad_range_sets\nThis array has one element per range in\n.Sy bad_ranges .\nEach element contains\nthe count of bits in that range which were clear in the good data and set\nin the bad data.\n.It Sy bad_range_clears\nThis array has one element per range in\n.Sy bad_ranges .\nEach element contains\nthe count of bits for that range which were set in the good data and clear in\nthe bad data.\n.It Sy bad_set_bits\nIf this field exists, it is an array of\n.Pq Ar bad data No & ~( Ns Ar good data ) ;\nthat is, the bits set in the bad data which are cleared in the good data.\nEach element corresponds a byte whose offset is in a range in\n.Sy bad_ranges ,\nand the array is ordered by offset.\nThus, the first element is the first byte in the first\n.Sy bad_ranges\nrange, and the last element is the last byte in the last\n.Sy bad_ranges\nrange.\n.It Sy bad_cleared_bits\nLike\n.Sy bad_set_bits ,\nbut contains\n.Pq Ar good data No & ~( Ns Ar bad data ) ;\nthat is, the bits set in the good data which are cleared in the bad data.\n.El\n.\n.Sh I/O STAGES\nThe ZFS I/O pipeline is comprised of various stages which are defined below.\nThe individual stages are used to construct these basic I/O\noperations: Read, Write, Free, Claim, and Ioctl.\nThese stages may be\nset on an event to describe the life cycle of a given I/O request.\n.Pp\n.TS\ntab(:);\nl l l .\nStage:Bit Mask:Operations\n_:_:_\nZIO_STAGE_OPEN:0x00000001:RWFCI\n\nZIO_STAGE_READ_BP_INIT:0x00000002:R----\nZIO_STAGE_WRITE_BP_INIT:0x00000004:-W---\nZIO_STAGE_FREE_BP_INIT:0x00000008:--F--\nZIO_STAGE_ISSUE_ASYNC:0x00000010:RWF--\nZIO_STAGE_WRITE_COMPRESS:0x00000020:-W---\n\nZIO_STAGE_ENCRYPT:0x00000040:-W---\nZIO_STAGE_CHECKSUM_GENERATE:0x00000080:-W---\n\nZIO_STAGE_NOP_WRITE:0x00000100:-W---\n\nZIO_STAGE_BRT_FREE:0x00000200:--F--\n\nZIO_STAGE_DDT_READ_START:0x00000400:R----\nZIO_STAGE_DDT_READ_DONE:0x00000800:R----\nZIO_STAGE_DDT_WRITE:0x00001000:-W---\nZIO_STAGE_DDT_FREE:0x00002000:--F--\n\nZIO_STAGE_GANG_ASSEMBLE:0x00004000:RWFC-\nZIO_STAGE_GANG_ISSUE:0x00008000:RWFC-\n\nZIO_STAGE_DVA_THROTTLE:0x00010000:-W---\nZIO_STAGE_DVA_ALLOCATE:0x00020000:-W---\nZIO_STAGE_DVA_FREE:0x00040000:--F--\nZIO_STAGE_DVA_CLAIM:0x00080000:---C-\n\nZIO_STAGE_READY:0x00100000:RWFCI\n\nZIO_STAGE_VDEV_IO_START:0x00200000:RW--I\nZIO_STAGE_VDEV_IO_DONE:0x00400000:RW--I\nZIO_STAGE_VDEV_IO_ASSESS:0x00800000:RW--I\n\nZIO_STAGE_CHECKSUM_VERIFY:0x01000000:R----\n\nZIO_STAGE_DONE:0x02000000:RWFCI\n.TE\n.\n.Sh I/O FLAGS\nEvery I/O request in the pipeline contains a set of flags which describe its\nfunction and are used to govern its behavior.\nThese flags will be set in an event as a\n.Sy zio_flags\npayload entry.\n.Pp\n.TS\ntab(:);\nl l .\nFlag:Bit Mask\n_:_\nZIO_FLAG_DONT_AGGREGATE:0x00000001\nZIO_FLAG_IO_REPAIR:0x00000002\nZIO_FLAG_SELF_HEAL:0x00000004\nZIO_FLAG_RESILVER:0x00000008\nZIO_FLAG_SCRUB:0x00000010\nZIO_FLAG_SCAN_THREAD:0x00000020\nZIO_FLAG_PHYSICAL:0x00000040\n\nZIO_FLAG_CANFAIL:0x00000080\nZIO_FLAG_SPECULATIVE:0x00000100\nZIO_FLAG_CONFIG_WRITER:0x00000200\nZIO_FLAG_DONT_RETRY:0x00000400\nZIO_FLAG_NODATA:0x00001000\nZIO_FLAG_INDUCE_DAMAGE:0x00002000\n\nZIO_FLAG_IO_ALLOCATING:0x00004000\nZIO_FLAG_IO_RETRY:0x00008000\nZIO_FLAG_PROBE:0x00010000\nZIO_FLAG_TRYHARD:0x00020000\nZIO_FLAG_OPTIONAL:0x00040000\n\nZIO_FLAG_DONT_QUEUE:0x00080000\nZIO_FLAG_DONT_PROPAGATE:0x00100000\nZIO_FLAG_IO_BYPASS:0x00200000\nZIO_FLAG_IO_REWRITE:0x00400000\nZIO_FLAG_RAW_COMPRESS:0x00800000\nZIO_FLAG_RAW_ENCRYPT:0x01000000\n\nZIO_FLAG_GANG_CHILD:0x02000000\nZIO_FLAG_DDT_CHILD:0x04000000\nZIO_FLAG_GODFATHER:0x08000000\nZIO_FLAG_NOPWRITE:0x10000000\nZIO_FLAG_REEXECUTED:0x20000000\nZIO_FLAG_DELEGATED:0x40000000\nZIO_FLAG_FASTWRITE:0x80000000\n.TE\n.\n.Sh SEE ALSO\n.Xr zfs 4 ,\n.Xr zed 8 ,\n.Xr zpool-wait 8\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}