{
  "module_name": "zfs.8",
  "hash_id": "cba3fa0ef19d95477a9d02fffc7fe2ce04b1fd4073b8b45f7b1634f809d99e2c",
  "original_prompt": "Ingested from zfs-2.2.2/man/man8/zfs.8",
  "human_readable_source": ".\\\"\n.\\\" CDDL HEADER START\n.\\\"\n.\\\" The contents of this file are subject to the terms of the\n.\\\" Common Development and Distribution License (the \"License\").\n.\\\" You may not use this file except in compliance with the License.\n.\\\"\n.\\\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE\n.\\\" or https://opensource.org/licenses/CDDL-1.0.\n.\\\" See the License for the specific language governing permissions\n.\\\" and limitations under the License.\n.\\\"\n.\\\" When distributing Covered Code, include this CDDL HEADER in each\n.\\\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.\n.\\\" If applicable, add the following below this CDDL HEADER, with the\n.\\\" fields enclosed by brackets \"[]\" replaced with your own identifying\n.\\\" information: Portions Copyright [yyyy] [name of copyright owner]\n.\\\"\n.\\\" CDDL HEADER END\n.\\\"\n.\\\" Copyright (c) 2009 Sun Microsystems, Inc. All Rights Reserved.\n.\\\" Copyright 2011 Joshua M. Clulow <josh@sysmgr.org>\n.\\\" Copyright (c) 2011, 2019 by Delphix. All rights reserved.\n.\\\" Copyright (c) 2011, Pawel Jakub Dawidek <pjd@FreeBSD.org>\n.\\\" Copyright (c) 2012, Glen Barber <gjb@FreeBSD.org>\n.\\\" Copyright (c) 2012, Bryan Drewery <bdrewery@FreeBSD.org>\n.\\\" Copyright (c) 2013, Steven Hartland <smh@FreeBSD.org>\n.\\\" Copyright (c) 2013 by Saso Kiselkov. All rights reserved.\n.\\\" Copyright (c) 2014, Joyent, Inc. All rights reserved.\n.\\\" Copyright (c) 2014 by Adam Stevko. All rights reserved.\n.\\\" Copyright (c) 2014 Integros [integros.com]\n.\\\" Copyright (c) 2014, Xin LI <delphij@FreeBSD.org>\n.\\\" Copyright (c) 2014-2015, The FreeBSD Foundation, All Rights Reserved.\n.\\\" Copyright (c) 2016 Nexenta Systems, Inc. All Rights Reserved.\n.\\\" Copyright 2019 Richard Laager. All rights reserved.\n.\\\" Copyright 2018 Nexenta Systems, Inc.\n.\\\" Copyright 2019 Joyent, Inc.\n.\\\"\n.Dd May 12, 2022\n.Dt ZFS 8\n.Os\n.\n.Sh NAME\n.Nm zfs\n.Nd configure ZFS datasets\n.Sh SYNOPSIS\n.Nm\n.Fl ?V\n.Nm\n.Cm version\n.Nm\n.Cm subcommand\n.Op Ar arguments\n.\n.Sh DESCRIPTION\nThe\n.Nm\ncommand configures ZFS datasets within a ZFS storage pool, as described in\n.Xr zpool 8 .\nA dataset is identified by a unique path within the ZFS namespace:\n.Pp\n.D1 Ar pool Ns Oo Sy / Ns Ar component Oc Ns Sy / Ns Ar component\n.Pp\nfor example:\n.Pp\n.Dl rpool/var/log\n.Pp\nThe maximum length of a dataset name is\n.Sy ZFS_MAX_DATASET_NAME_LEN No - 1\nASCII characters (currently 255) satisfying\n.Sy [A-Za-z_.:/ -] .\nAdditionally snapshots are allowed to contain a single\n.Sy @\ncharacter, while bookmarks are allowed to contain a single\n.Sy #\ncharacter.\n.Sy /\nis used as separator between components.\nThe maximum amount of nesting allowed in a path is\n.Sy zfs_max_dataset_nesting\nlevels deep.\nZFS tunables\n.Pq Sy zfs_*\nare explained in\n.Xr zfs 4 .\n.Pp\nA dataset can be one of the following:\n.Bl -tag -offset Ds -width \"file system\"\n.It Sy file system\nCan be mounted within the standard system namespace and behaves like other file\nsystems.\nWhile ZFS file systems are designed to be POSIX-compliant, known issues exist\nthat prevent compliance in some cases.\nApplications that depend on standards conformance might fail due to non-standard\nbehavior when checking file system free space.\n.It Sy volume\nA logical volume exported as a raw or block device.\nThis type of dataset should only be used when a block device is required.\nFile systems are typically used in most environments.\n.It Sy snapshot\nA read-only version of a file system or volume at a given point in time.\nIt is specified as\n.Ar filesystem Ns @ Ns Ar name\nor\n.Ar volume Ns @ Ns Ar name .\n.It Sy bookmark\nMuch like a\n.Sy snapshot ,\nbut without the hold on on-disk data.\nIt can be used as the source of a send (but not for a receive).\nIt is specified as\n.Ar filesystem Ns # Ns Ar name\nor\n.Ar volume Ns # Ns Ar name .\n.El\n.Pp\nSee\n.Xr zfsconcepts 7\nfor details.\n.\n.Ss Properties\nProperties are divided into two types: native properties and user-defined\n.Pq or Qq user\nproperties.\nNative properties either export internal statistics or control ZFS behavior.\nIn addition, native properties are either editable or read-only.\nUser properties have no effect on ZFS behavior, but you can use them to annotate\ndatasets in a way that is meaningful in your environment.\nFor more information about properties, see\n.Xr zfsprops 7 .\n.\n.Ss Encryption\nEnabling the\n.Sy encryption\nfeature allows for the creation of encrypted filesystems and volumes.\nZFS will encrypt file and zvol data, file attributes, ACLs, permission bits,\ndirectory listings, FUID mappings, and\n.Sy userused Ns / Ns Sy groupused Ns / Ns Sy projectused\ndata.\nFor an overview of encryption, see\n.Xr zfs-load-key 8 .\n.\n.Sh SUBCOMMANDS\nAll subcommands that modify state are logged persistently to the pool in their\noriginal form.\n.Bl -tag -width \"\"\n.It Nm Fl ?\nDisplays a help message.\n.It Xo\n.Nm\n.Fl V , -version\n.Xc\n.It Xo\n.Nm\n.Cm version\n.Xc\nDisplays the software version of the\n.Nm\nuserland utility and the zfs kernel module.\n.El\n.\n.Ss Dataset Management\n.Bl -tag -width \"\"\n.It Xr zfs-list 8\nLists the property information for the given datasets in tabular form.\n.It Xr zfs-create 8\nCreates a new ZFS file system or volume.\n.It Xr zfs-destroy 8\nDestroys the given dataset(s), snapshot(s), or bookmark.\n.It Xr zfs-rename 8\nRenames the given dataset (filesystem or snapshot).\n.It Xr zfs-upgrade 8\nManage upgrading the on-disk version of filesystems.\n.El\n.\n.Ss Snapshots\n.Bl -tag -width \"\"\n.It Xr zfs-snapshot 8\nCreates snapshots with the given names.\n.It Xr zfs-rollback 8\nRoll back the given dataset to a previous snapshot.\n.It Xr zfs-hold 8 Ns / Ns Xr zfs-release 8\nAdd or remove a hold reference to the specified snapshot or snapshots.\nIf a hold exists on a snapshot, attempts to destroy that snapshot by using the\n.Nm zfs Cm destroy\ncommand return\n.Sy EBUSY .\n.It Xr zfs-diff 8\nDisplay the difference between a snapshot of a given filesystem and another\nsnapshot of that filesystem from a later time or the current contents of the\nfilesystem.\n.El\n.\n.Ss Clones\n.Bl -tag -width \"\"\n.It Xr zfs-clone 8\nCreates a clone of the given snapshot.\n.It Xr zfs-promote 8\nPromotes a clone file system to no longer be dependent on its\n.Qq origin\nsnapshot.\n.El\n.\n.Ss Send & Receive\n.Bl -tag -width \"\"\n.It Xr zfs-send 8\nGenerate a send stream, which may be of a filesystem, and may be incremental\nfrom a bookmark.\n.It Xr zfs-receive 8\nCreates a snapshot whose contents are as specified in the stream provided on\nstandard input.\nIf a full stream is received, then a new file system is created as well.\nStreams are created using the\n.Xr zfs-send 8\nsubcommand, which by default creates a full stream.\n.It Xr zfs-bookmark 8\nCreates a new bookmark of the given snapshot or bookmark.\nBookmarks mark the point in time when the snapshot was created, and can be used\nas the incremental source for a\n.Nm zfs Cm send\ncommand.\n.It Xr zfs-redact 8\nGenerate a new redaction bookmark.\nThis feature can be used to allow clones of a filesystem to be made available on\na remote system, in the case where their parent need not (or needs to not) be\nusable.\n.El\n.\n.Ss Properties\n.Bl -tag -width \"\"\n.It Xr zfs-get 8\nDisplays properties for the given datasets.\n.It Xr zfs-set 8\nSets the property or list of properties to the given value(s) for each dataset.\n.It Xr zfs-inherit 8\nClears the specified property, causing it to be inherited from an ancestor,\nrestored to default if no ancestor has the property set, or with the\n.Fl S\noption reverted to the received value if one exists.\n.El\n.\n.Ss Quotas\n.Bl -tag -width \"\"\n.It Xr zfs-userspace 8 Ns / Ns Xr zfs-groupspace 8 Ns / Ns Xr zfs-projectspace 8\nDisplays space consumed by, and quotas on, each user, group, or project\nin the specified filesystem or snapshot.\n.It Xr zfs-project 8\nList, set, or clear project ID and/or inherit flag on the files or directories.\n.El\n.\n.Ss Mountpoints\n.Bl -tag -width \"\"\n.It Xr zfs-mount 8\nDisplays all ZFS file systems currently mounted, or mount ZFS filesystem\non a path described by its\n.Sy mountpoint\nproperty.\n.It Xr zfs-unmount 8\nUnmounts currently mounted ZFS file systems.\n.El\n.\n.Ss Shares\n.Bl -tag -width \"\"\n.It Xr zfs-share 8\nShares available ZFS file systems.\n.It Xr zfs-unshare 8\nUnshares currently shared ZFS file systems.\n.El\n.\n.Ss Delegated Administration\n.Bl -tag -width \"\"\n.It Xr zfs-allow 8\nDelegate permissions on the specified filesystem or volume.\n.It Xr zfs-unallow 8\nRemove delegated permissions on the specified filesystem or volume.\n.El\n.\n.Ss Encryption\n.Bl -tag -width \"\"\n.It Xr zfs-change-key 8\nAdd or change an encryption key on the specified dataset.\n.It Xr zfs-load-key 8\nLoad the key for the specified encrypted dataset, enabling access.\n.It Xr zfs-unload-key 8\nUnload a key for the specified dataset,\nremoving the ability to access the dataset.\n.El\n.\n.Ss Channel Programs\n.Bl -tag -width \"\"\n.It Xr zfs-program 8\nExecute ZFS administrative operations\nprogrammatically via a Lua script-language channel program.\n.El\n.\n.Ss Jails\n.Bl -tag -width \"\"\n.It Xr zfs-jail 8\nAttaches a filesystem to a jail.\n.It Xr zfs-unjail 8\nDetaches a filesystem from a jail.\n.El\n.\n.Ss Waiting\n.Bl -tag -width \"\"\n.It Xr zfs-wait 8\nWait for background activity in a filesystem to complete.\n.El\n.\n.Sh EXIT STATUS\nThe\n.Nm\nutility exits\n.Sy 0\non success,\n.Sy 1\nif an error occurs, and\n.Sy 2\nif invalid command line options were specified.\n.\n.Sh EXAMPLES\n.\\\" Examples 1, 4, 6, 7, 11, 14, 16 are shared with zfs-set.8.\n.\\\" Examples 1, 10 are shared with zfs-create.8.\n.\\\" Examples 2, 3, 10, 15 are also shared with zfs-snapshot.8.\n.\\\" Examples 3, 10, 15 are shared with zfs-destroy.8.\n.\\\" Examples 5 are shared with zfs-list.8.\n.\\\" Examples 8 are shared with zfs-rollback.8.\n.\\\" Examples 9, 10 are shared with zfs-clone.8.\n.\\\" Examples 10 are also shared with zfs-promote.8.\n.\\\" Examples 10, 15 also are shared with zfs-rename.8.\n.\\\" Examples 12, 13 are shared with zfs-send.8.\n.\\\" Examples 12, 13 are also shared with zfs-receive.8.\n.\\\" Examples 17, 18, 19, 20, 21 are shared with zfs-allow.8.\n.\\\" Examples 22 are shared with zfs-diff.8.\n.\\\" Examples 23 are shared with zfs-bookmark.8.\n.\\\" Make sure to update them omnidirectionally\n.Ss Example 1 : No Creating a ZFS File System Hierarchy\nThe following commands create a file system named\n.Ar pool/home\nand a file system named\n.Ar pool/home/bob .\nThe mount point\n.Pa /export/home\nis set for the parent file system, and is automatically inherited by the child\nfile system.\n.Dl # Nm zfs Cm create Ar pool/home\n.Dl # Nm zfs Cm set Sy mountpoint Ns = Ns Ar /export/home pool/home\n.Dl # Nm zfs Cm create Ar pool/home/bob\n.\n.Ss Example 2 : No Creating a ZFS Snapshot\nThe following command creates a snapshot named\n.Ar yesterday .\nThis snapshot is mounted on demand in the\n.Pa .zfs/snapshot\ndirectory at the root of the\n.Ar pool/home/bob\nfile system.\n.Dl # Nm zfs Cm snapshot Ar pool/home/bob Ns @ Ns Ar yesterday\n.\n.Ss Example 3 : No Creating and Destroying Multiple Snapshots\nThe following command creates snapshots named\n.Ar yesterday No of Ar pool/home\nand all of its descendent file systems.\nEach snapshot is mounted on demand in the\n.Pa .zfs/snapshot\ndirectory at the root of its file system.\nThe second command destroys the newly created snapshots.\n.Dl # Nm zfs Cm snapshot Fl r Ar pool/home Ns @ Ns Ar yesterday\n.Dl # Nm zfs Cm destroy Fl r Ar pool/home Ns @ Ns Ar yesterday\n.\n.Ss Example 4 : No Disabling and Enabling File System Compression\nThe following command disables the\n.Sy compression\nproperty for all file systems under\n.Ar pool/home .\nThe next command explicitly enables\n.Sy compression\nfor\n.Ar pool/home/anne .\n.Dl # Nm zfs Cm set Sy compression Ns = Ns Sy off Ar pool/home\n.Dl # Nm zfs Cm set Sy compression Ns = Ns Sy on Ar pool/home/anne\n.\n.Ss Example 5 : No Listing ZFS Datasets\nThe following command lists all active file systems and volumes in the system.\nSnapshots are displayed if\n.Sy listsnaps Ns = Ns Sy on .\nThe default is\n.Sy off .\nSee\n.Xr zpoolprops 7\nfor more information on pool properties.\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm list\nNAME                      USED  AVAIL  REFER  MOUNTPOINT\npool                      450K   457G    18K  /pool\npool/home                 315K   457G    21K  /export/home\npool/home/anne             18K   457G    18K  /export/home/anne\npool/home/bob             276K   457G   276K  /export/home/bob\n.Ed\n.\n.Ss Example 6 : No Setting a Quota on a ZFS File System\nThe following command sets a quota of 50 Gbytes for\n.Ar pool/home/bob :\n.Dl # Nm zfs Cm set Sy quota Ns = Ns Ar 50G pool/home/bob\n.\n.Ss Example 7 : No Listing ZFS Properties\nThe following command lists all properties for\n.Ar pool/home/bob :\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm get Sy all Ar pool/home/bob\nNAME           PROPERTY              VALUE                  SOURCE\npool/home/bob  type                  filesystem             -\npool/home/bob  creation              Tue Jul 21 15:53 2009  -\npool/home/bob  used                  21K                    -\npool/home/bob  available             20.0G                  -\npool/home/bob  referenced            21K                    -\npool/home/bob  compressratio         1.00x                  -\npool/home/bob  mounted               yes                    -\npool/home/bob  quota                 20G                    local\npool/home/bob  reservation           none                   default\npool/home/bob  recordsize            128K                   default\npool/home/bob  mountpoint            /pool/home/bob         default\npool/home/bob  sharenfs              off                    default\npool/home/bob  checksum              on                     default\npool/home/bob  compression           on                     local\npool/home/bob  atime                 on                     default\npool/home/bob  devices               on                     default\npool/home/bob  exec                  on                     default\npool/home/bob  setuid                on                     default\npool/home/bob  readonly              off                    default\npool/home/bob  zoned                 off                    default\npool/home/bob  snapdir               hidden                 default\npool/home/bob  acltype               off                    default\npool/home/bob  aclmode               discard                default\npool/home/bob  aclinherit            restricted             default\npool/home/bob  canmount              on                     default\npool/home/bob  xattr                 on                     default\npool/home/bob  copies                1                      default\npool/home/bob  version               4                      -\npool/home/bob  utf8only              off                    -\npool/home/bob  normalization         none                   -\npool/home/bob  casesensitivity       sensitive              -\npool/home/bob  vscan                 off                    default\npool/home/bob  nbmand                off                    default\npool/home/bob  sharesmb              off                    default\npool/home/bob  refquota              none                   default\npool/home/bob  refreservation        none                   default\npool/home/bob  primarycache          all                    default\npool/home/bob  secondarycache        all                    default\npool/home/bob  usedbysnapshots       0                      -\npool/home/bob  usedbydataset         21K                    -\npool/home/bob  usedbychildren        0                      -\npool/home/bob  usedbyrefreservation  0                      -\n.Ed\n.Pp\nThe following command gets a single property value:\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm get Fl H o Sy value compression Ar pool/home/bob\non\n.Ed\n.Pp\nThe following command lists all properties with local settings for\n.Ar pool/home/bob :\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm get Fl r s Sy local Fl o Sy name , Ns Sy property , Ns Sy value all Ar pool/home/bob\nNAME           PROPERTY              VALUE\npool/home/bob  quota                 20G\npool/home/bob  compression           on\n.Ed\n.\n.Ss Example 8 : No Rolling Back a ZFS File System\nThe following command reverts the contents of\n.Ar pool/home/anne\nto the snapshot named\n.Ar yesterday ,\ndeleting all intermediate snapshots:\n.Dl # Nm zfs Cm rollback Fl r Ar pool/home/anne Ns @ Ns Ar yesterday\n.\n.Ss Example 9 : No Creating a ZFS Clone\nThe following command creates a writable file system whose initial contents are\nthe same as\n.Ar pool/home/bob@yesterday .\n.Dl # Nm zfs Cm clone Ar pool/home/bob@yesterday pool/clone\n.\n.Ss Example 10 : No Promoting a ZFS Clone\nThe following commands illustrate how to test out changes to a file system, and\nthen replace the original file system with the changed one, using clones, clone\npromotion, and renaming:\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm create Ar pool/project/production\n  populate /pool/project/production with data\n.No # Nm zfs Cm snapshot Ar pool/project/production Ns @ Ns Ar today\n.No # Nm zfs Cm clone Ar pool/project/production@today pool/project/beta\n  make changes to /pool/project/beta and test them\n.No # Nm zfs Cm promote Ar pool/project/beta\n.No # Nm zfs Cm rename Ar pool/project/production pool/project/legacy\n.No # Nm zfs Cm rename Ar pool/project/beta pool/project/production\n  once the legacy version is no longer needed, it can be destroyed\n.No # Nm zfs Cm destroy Ar pool/project/legacy\n.Ed\n.\n.Ss Example 11 : No Inheriting ZFS Properties\nThe following command causes\n.Ar pool/home/bob No and Ar pool/home/anne\nto inherit the\n.Sy checksum\nproperty from their parent.\n.Dl # Nm zfs Cm inherit Sy checksum Ar pool/home/bob pool/home/anne\n.\n.Ss Example 12 : No Remotely Replicating ZFS Data\nThe following commands send a full stream and then an incremental stream to a\nremote machine, restoring them into\n.Em poolB/received/fs@a\nand\n.Em poolB/received/fs@b ,\nrespectively.\n.Em poolB\nmust contain the file system\n.Em poolB/received ,\nand must not initially contain\n.Em poolB/received/fs .\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm send Ar pool/fs@a |\n.No \"   \" Nm ssh Ar host Nm zfs Cm receive Ar poolB/received/fs Ns @ Ns Ar a\n.No # Nm zfs Cm send Fl i Ar a pool/fs@b |\n.No \"   \" Nm ssh Ar host Nm zfs Cm receive Ar poolB/received/fs\n.Ed\n.\n.Ss Example 13 : No Using the Nm zfs Cm receive Fl d No Option\nThe following command sends a full stream of\n.Ar poolA/fsA/fsB@snap\nto a remote machine, receiving it into\n.Ar poolB/received/fsA/fsB@snap .\nThe\n.Ar fsA/fsB@snap\nportion of the received snapshot's name is determined from the name of the sent\nsnapshot.\n.Ar poolB\nmust contain the file system\n.Ar poolB/received .\nIf\n.Ar poolB/received/fsA\ndoes not exist, it is created as an empty file system.\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm send Ar poolA/fsA/fsB@snap |\n.No \"   \" Nm ssh Ar host Nm zfs Cm receive Fl d Ar poolB/received\n.Ed\n.\n.Ss Example 14 : No Setting User Properties\nThe following example sets the user-defined\n.Ar com.example : Ns Ar department\nproperty for a dataset:\n.Dl # Nm zfs Cm set Ar com.example : Ns Ar department Ns = Ns Ar 12345 tank/accounting\n.\n.Ss Example 15 : No Performing a Rolling Snapshot\nThe following example shows how to maintain a history of snapshots with a\nconsistent naming scheme.\nTo keep a week's worth of snapshots, the user destroys the oldest snapshot,\nrenames the remaining snapshots, and then creates a new snapshot, as follows:\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm destroy Fl r Ar pool/users@7daysago\n.No # Nm zfs Cm rename Fl r Ar pool/users@6daysago No @ Ns Ar 7daysago\n.No # Nm zfs Cm rename Fl r Ar pool/users@5daysago No @ Ns Ar 6daysago\n.No # Nm zfs Cm rename Fl r Ar pool/users@4daysago No @ Ns Ar 5daysago\n.No # Nm zfs Cm rename Fl r Ar pool/users@3daysago No @ Ns Ar 4daysago\n.No # Nm zfs Cm rename Fl r Ar pool/users@2daysago No @ Ns Ar 3daysago\n.No # Nm zfs Cm rename Fl r Ar pool/users@yesterday No @ Ns Ar 2daysago\n.No # Nm zfs Cm rename Fl r Ar pool/users@today No @ Ns Ar yesterday\n.No # Nm zfs Cm snapshot Fl r Ar pool/users Ns @ Ns Ar today\n.Ed\n.\n.Ss Example 16 : No Setting sharenfs Property Options on a ZFS File System\nThe following commands show how to set\n.Sy sharenfs\nproperty options to enable read-write\naccess for a set of IP addresses and to enable root access for system\n.Qq neo\non the\n.Ar tank/home\nfile system:\n.Dl # Nm zfs Cm set Sy sharenfs Ns = Ns ' Ns Ar rw Ns =@123.123.0.0/16:[::1],root= Ns Ar neo Ns ' tank/home\n.Pp\nIf you are using DNS for host name resolution,\nspecify the fully-qualified hostname.\n.\n.Ss Example 17 : No Delegating ZFS Administration Permissions on a ZFS Dataset\nThe following example shows how to set permissions so that user\n.Ar cindys\ncan create, destroy, mount, and take snapshots on\n.Ar tank/cindys .\nThe permissions on\n.Ar tank/cindys\nare also displayed.\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm allow Sy cindys create , Ns Sy destroy , Ns Sy mount , Ns Sy snapshot Ar tank/cindys\n.No # Nm zfs Cm allow Ar tank/cindys\n---- Permissions on tank/cindys --------------------------------------\nLocal+Descendent permissions:\n        user cindys create,destroy,mount,snapshot\n.Ed\n.Pp\nBecause the\n.Ar tank/cindys\nmount point permission is set to 755 by default, user\n.Ar cindys\nwill be unable to mount file systems under\n.Ar tank/cindys .\nAdd an ACE similar to the following syntax to provide mount point access:\n.Dl # Cm chmod No A+user : Ns Ar cindys Ns :add_subdirectory:allow Ar /tank/cindys\n.\n.Ss Example 18 : No Delegating Create Time Permissions on a ZFS Dataset\nThe following example shows how to grant anyone in the group\n.Ar staff\nto create file systems in\n.Ar tank/users .\nThis syntax also allows staff members to destroy their own file systems, but not\ndestroy anyone else's file system.\nThe permissions on\n.Ar tank/users\nare also displayed.\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm allow Ar staff Sy create , Ns Sy mount Ar tank/users\n.No # Nm zfs Cm allow Fl c Sy destroy Ar tank/users\n.No # Nm zfs Cm allow Ar tank/users\n---- Permissions on tank/users ---------------------------------------\nPermission sets:\n        destroy\nLocal+Descendent permissions:\n        group staff create,mount\n.Ed\n.\n.Ss Example 19 : No Defining and Granting a Permission Set on a ZFS Dataset\nThe following example shows how to define and grant a permission set on the\n.Ar tank/users\nfile system.\nThe permissions on\n.Ar tank/users\nare also displayed.\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm allow Fl s No @ Ns Ar pset Sy create , Ns Sy destroy , Ns Sy snapshot , Ns Sy mount Ar tank/users\n.No # Nm zfs Cm allow staff No @ Ns Ar pset tank/users\n.No # Nm zfs Cm allow Ar tank/users\n---- Permissions on tank/users ---------------------------------------\nPermission sets:\n        @pset create,destroy,mount,snapshot\nLocal+Descendent permissions:\n        group staff @pset\n.Ed\n.\n.Ss Example 20 : No Delegating Property Permissions on a ZFS Dataset\nThe following example shows to grant the ability to set quotas and reservations\non the\n.Ar users/home\nfile system.\nThe permissions on\n.Ar users/home\nare also displayed.\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm allow Ar cindys Sy quota , Ns Sy reservation Ar users/home\n.No # Nm zfs Cm allow Ar users/home\n---- Permissions on users/home ---------------------------------------\nLocal+Descendent permissions:\n        user cindys quota,reservation\ncindys% zfs set quota=10G users/home/marks\ncindys% zfs get quota users/home/marks\nNAME              PROPERTY  VALUE  SOURCE\nusers/home/marks  quota     10G    local\n.Ed\n.\n.Ss Example 21 : No Removing ZFS Delegated Permissions on a ZFS Dataset\nThe following example shows how to remove the snapshot permission from the\n.Ar staff\ngroup on the\n.Sy tank/users\nfile system.\nThe permissions on\n.Sy tank/users\nare also displayed.\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm unallow Ar staff Sy snapshot Ar tank/users\n.No # Nm zfs Cm allow Ar tank/users\n---- Permissions on tank/users ---------------------------------------\nPermission sets:\n        @pset create,destroy,mount,snapshot\nLocal+Descendent permissions:\n        group staff @pset\n.Ed\n.\n.Ss Example 22 : No Showing the differences between a snapshot and a ZFS Dataset\nThe following example shows how to see what has changed between a prior\nsnapshot of a ZFS dataset and its current state.\nThe\n.Fl F\noption is used to indicate type information for the files affected.\n.Bd -literal -compact -offset Ds\n.No # Nm zfs Cm diff Fl F Ar tank/test@before tank/test\nM       /       /tank/test/\nM       F       /tank/test/linked      (+1)\nR       F       /tank/test/oldname -> /tank/test/newname\n-       F       /tank/test/deleted\n+       F       /tank/test/created\nM       F       /tank/test/modified\n.Ed\n.\n.Ss Example 23 : No Creating a bookmark\nThe following example creates a bookmark to a snapshot.\nThis bookmark can then be used instead of a snapshot in send streams.\n.Dl # Nm zfs Cm bookmark Ar rpool Ns @ Ns Ar snapshot rpool Ns # Ns Ar bookmark\n.\n.Ss Example 24 : No Setting Sy sharesmb No Property Options on a ZFS File System\nThe following example show how to share SMB filesystem through ZFS.\nNote that a user and their password must be given.\n.Dl # Nm smbmount Ar //127.0.0.1/share_tmp /mnt/tmp Fl o No user=workgroup/turbo,password=obrut,uid=1000\n.Pp\nMinimal\n.Pa /etc/samba/smb.conf\nconfiguration is required, as follows.\n.Pp\nSamba will need to bind to the loopback interface for the ZFS utilities to\ncommunicate with Samba.\nThis is the default behavior for most Linux distributions.\n.Pp\nSamba must be able to authenticate a user.\nThis can be done in a number of ways\n.Pq Xr passwd 5 , LDAP , Xr smbpasswd 5 , &c.\\& .\nHow to do this is outside the scope of this document \u2013 refer to\n.Xr smb.conf 5\nfor more information.\n.Pp\nSee the\n.Sx USERSHARES\nsection for all configuration options,\nin case you need to modify any options of the share afterwards.\nDo note that any changes done with the\n.Xr net 8\ncommand will be undone if the share is ever unshared (like via a reboot).\n.\n.Sh ENVIRONMENT VARIABLES\n.Bl -tag -width \"ZFS_MODULE_TIMEOUT\"\n.It Sy ZFS_COLOR\nUse ANSI color in\n.Nm zfs Cm diff\nand\n.Nm zfs Cm list\noutput.\n.It Sy ZFS_MOUNT_HELPER\nCause\n.Nm zfs Cm mount\nto use\n.Xr mount 8\nto mount ZFS datasets.\nThis option is provided for backwards compatibility with older ZFS versions.\n.\n.It Sy ZFS_SET_PIPE_MAX\nTells\n.Nm zfs\nto set the maximum pipe size for sends/recieves.\nDisabled by default on Linux\ndue to an unfixed deadlock in Linux's pipe size handling code.\n.\n.\\\" Shared with zpool.8\n.It Sy ZFS_MODULE_TIMEOUT\nTime, in seconds, to wait for\n.Pa /dev/zfs\nto appear.\nDefaults to\n.Sy 10 ,\nmax\n.Sy 600 Pq 10 minutes .\nIf\n.Pf < Sy 0 ,\nwait forever; if\n.Sy 0 ,\ndon't wait.\n.El\n.\n.Sh INTERFACE STABILITY\n.Sy Committed .\n.\n.Sh SEE ALSO\n.Xr attr 1 ,\n.Xr gzip 1 ,\n.Xr ssh 1 ,\n.Xr chmod 2 ,\n.Xr fsync 2 ,\n.Xr stat 2 ,\n.Xr write 2 ,\n.Xr acl 5 ,\n.Xr attributes 5 ,\n.Xr exports 5 ,\n.Xr zfsconcepts 7 ,\n.Xr zfsprops 7 ,\n.Xr exportfs 8 ,\n.Xr mount 8 ,\n.Xr net 8 ,\n.Xr selinux 8 ,\n.Xr zfs-allow 8 ,\n.Xr zfs-bookmark 8 ,\n.Xr zfs-change-key 8 ,\n.Xr zfs-clone 8 ,\n.Xr zfs-create 8 ,\n.Xr zfs-destroy 8 ,\n.Xr zfs-diff 8 ,\n.Xr zfs-get 8 ,\n.Xr zfs-groupspace 8 ,\n.Xr zfs-hold 8 ,\n.Xr zfs-inherit 8 ,\n.Xr zfs-jail 8 ,\n.Xr zfs-list 8 ,\n.Xr zfs-load-key 8 ,\n.Xr zfs-mount 8 ,\n.Xr zfs-program 8 ,\n.Xr zfs-project 8 ,\n.Xr zfs-projectspace 8 ,\n.Xr zfs-promote 8 ,\n.Xr zfs-receive 8 ,\n.Xr zfs-redact 8 ,\n.Xr zfs-release 8 ,\n.Xr zfs-rename 8 ,\n.Xr zfs-rollback 8 ,\n.Xr zfs-send 8 ,\n.Xr zfs-set 8 ,\n.Xr zfs-share 8 ,\n.Xr zfs-snapshot 8 ,\n.Xr zfs-unallow 8 ,\n.Xr zfs-unjail 8 ,\n.Xr zfs-unload-key 8 ,\n.Xr zfs-unmount 8 ,\n.Xr zfs-unshare 8 ,\n.Xr zfs-upgrade 8 ,\n.Xr zfs-userspace 8 ,\n.Xr zfs-wait 8 ,\n.Xr zpool 8\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}