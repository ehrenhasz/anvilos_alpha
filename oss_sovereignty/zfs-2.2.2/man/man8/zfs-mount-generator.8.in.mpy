{
  "module_name": "zfs-mount-generator.8.in",
  "hash_id": "2ee711996d11d969f85c61dbfe485169a1b53b744bde8a17a86cdb3aa095f295",
  "original_prompt": "Ingested from zfs-2.2.2/man/man8/zfs-mount-generator.8.in",
  "human_readable_source": ".\\\"\n.\\\" Copyright 2018 Antonio Russo <antonio.e.russo@gmail.com>\n.\\\" Copyright 2019 Kjeld Schouten-Lebbing <kjeld@schouten-lebbing.nl>\n.\\\" Copyright 2020 InsanePrawn <insane.prawny@gmail.com>\n.\\\"\n.\\\" Permission is hereby granted, free of charge, to any person obtaining\n.\\\" a copy of this software and associated documentation files (the\n.\\\" \"Software\"), to deal in the Software without restriction, including\n.\\\" without limitation the rights to use, copy, modify, merge, publish,\n.\\\" distribute, sublicense, and/or sell copies of the Software, and to\n.\\\" permit persons to whom the Software is furnished to do so, subject to\n.\\\" the following conditions:\n.\\\"\n.\\\" The above copyright notice and this permission notice shall be\n.\\\" included in all copies or substantial portions of the Software.\n.\\\"\n.\\\" THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n.\\\" EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n.\\\" MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n.\\\" NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n.\\\" LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n.\\\" OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n.\\\" WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n.\\\"\n.Dd May 31, 2021\n.Dt ZFS-MOUNT-GENERATOR 8\n.Os\n.\n.Sh NAME\n.Nm zfs-mount-generator\n.Nd generate systemd mount units for ZFS filesystems\n.Sh SYNOPSIS\n.Pa @systemdgeneratordir@/zfs-mount-generator\n.\n.Sh DESCRIPTION\n.Nm\nis a\n.Xr systemd.generator 7\nthat generates native\n.Xr systemd.mount 5\nunits for configured ZFS datasets.\n.\n.Ss Properties\n.Bl -tag -compact -width \"org.openzfs.systemd:required-by=unit[ unit]\u2026\"\n.It Sy mountpoint Ns =\n.No Skipped if Sy legacy No or Sy none .\n.\n.It Sy canmount Ns =\n.No Skipped if Sy off .\n.No Skipped if only Sy noauto\ndatasets exist for a given mountpoint and there's more than one.\n.No Datasets with Sy yes No take precedence over ones with Sy noauto No for the same mountpoint .\n.No Sets logical Em noauto No flag if Sy noauto .\nEncryption roots always generate\n.Sy zfs-load-key@ Ns Ar root Ns Sy .service ,\neven if\n.Sy off .\n.\n.It Sy atime Ns = , Sy relatime Ns = , Sy devices Ns = , Sy exec Ns = , Sy readonly Ns = , Sy setuid Ns = , Sy nbmand Ns =\nUsed to generate mount options equivalent to\n.Nm zfs Cm mount .\n.\n.It Sy encroot Ns = , Sy keylocation Ns =\nIf the dataset is an encryption root, its mount unit will bind to\n.Sy zfs-load-key@ Ns Ar root Ns Sy .service ,\nwith additional dependencies as follows:\n.Bl -tag -compact -offset Ds -width \"keylocation=https://URL (et al.)\"\n.It Sy keylocation Ns = Ns Sy prompt\nNone, uses\n.Xr systemd-ask-password 1\n.It Sy keylocation Ns = Ns Sy https:// Ns Ar URL Pq et al.\\&\n.Sy Wants Ns = , Sy After Ns = : Pa network-online.target\n.It Sy keylocation Ns = Ns Sy file:// Ns < Ns Ar path Ns >\n.Sy RequiresMountsFor Ns = Ns Ar path\n.El\n.\nThe service also uses the same\n.Sy Wants Ns = ,\n.Sy After Ns = ,\n.Sy Requires Ns = , No and\n.Sy RequiresMountsFor Ns = ,\nas the mount unit.\n.\n.It Sy org.openzfs.systemd:requires Ns = Ns Pa path Ns Oo \" \" Ns Pa path Oc Ns \u2026\n.No Sets Sy Requires Ns = for the mount- and key-loading unit.\n.\n.It Sy org.openzfs.systemd:requires-mounts-for Ns = Ns Pa path Ns Oo \" \" Ns Pa path Oc Ns \u2026\n.No Sets Sy RequiresMountsFor Ns = for the mount- and key-loading unit.\n.\n.It Sy org.openzfs.systemd:before Ns = Ns Pa unit Ns Oo \" \" Ns Pa unit Oc Ns \u2026\n.No Sets Sy Before Ns = for the mount unit.\n.\n.It Sy org.openzfs.systemd:after Ns = Ns Pa unit Ns Oo \" \" Ns Pa unit Oc Ns \u2026\n.No Sets Sy After Ns = for the mount unit.\n.\n.It Sy org.openzfs.systemd:wanted-by Ns = Ns Pa unit Ns Oo \" \" Ns Pa unit Oc Ns \u2026\n.No Sets logical Em noauto No flag (see below) .\n.No If not Sy none , No sets Sy WantedBy Ns = for the mount unit.\n.It Sy org.openzfs.systemd:required-by Ns = Ns Pa unit Ns Oo \" \" Ns Pa unit Oc Ns \u2026\n.No Sets logical Em noauto No flag (see below) .\n.No If not Sy none , No sets Sy RequiredBy Ns = for the mount unit.\n.\n.It Sy org.openzfs.systemd:nofail Ns = Ns (unset) Ns | Ns Sy on Ns | Ns Sy off\nWaxes or wanes strength of default reverse dependencies of the mount unit, see\nbelow.\n.\n.It Sy org.openzfs.systemd:ignore Ns = Ns Sy on Ns | Ns Sy off\n.No Skip if Sy on .\n.No Defaults to Sy off .\n.El\n.\n.Ss Unit Ordering And Dependencies\nAdditionally, unless the pool the dataset resides on\nis imported at generation time, both units gain\n.Sy Wants Ns = Ns Pa zfs-import.target\nand\n.Sy After Ns = Ns Pa zfs-import.target .\n.Pp\nAdditionally, unless the logical\n.Em noauto\nflag is set, the mount unit gains a reverse-dependency for\n.Pa local-fs.target\nof strength\n.Bl -tag -compact -offset Ds -width \"(unset)\"\n.It (unset)\n.Sy WantedBy Ns = No + Sy Before Ns =\n.It Sy on\n.Sy WantedBy Ns =\n.It Sy off\n.Sy RequiredBy Ns = No + Sy Before Ns =\n.El\n.\n.Ss Cache File\nBecause ZFS pools may not be available very early in the boot process,\ninformation on ZFS mountpoints must be stored separately.\nThe output of\n.Dl Nm zfs Cm list Fl Ho Ar name , Ns Aq every property above in order\nfor datasets that should be mounted by systemd should be kept at\n.Pa @sysconfdir@/zfs/zfs-list.cache/ Ns Ar poolname ,\nand, if writeable, will be kept synchronized for the entire pool by the\n.Pa history_event-zfs-list-cacher.sh\nZEDLET, if enabled\n.Pq see Xr zed 8 .\n.\n.Sh ENVIRONMENT\nIf the\n.Sy ZFS_DEBUG\nenvironment variable is nonzero\n.Pq or unset and Pa /proc/cmdline No contains Qq Sy debug ,\nprint summary accounting information at the end.\n.\n.Sh EXAMPLES\nTo begin, enable tracking for the pool:\n.Dl # Nm touch Pa @sysconfdir@/zfs/zfs-list.cache/ Ns Ar poolname\nThen enable the tracking ZEDLET:\n.Dl # Nm ln Fl s Pa @zfsexecdir@/zed.d/history_event-zfs-list-cacher.sh @sysconfdir@/zfs/zed.d\n.Dl # Nm systemctl Cm enable Pa zfs-zed.service\n.Dl # Nm systemctl Cm restart Pa zfs-zed.service\n.Pp\nIf no history event is in the queue,\ninject one to ensure the ZEDLET runs to refresh the cache file\nby setting a monitored property somewhere on the pool:\n.Dl # Nm zfs Cm set Sy relatime Ns = Ns Sy off Ar poolname/dset\n.Dl # Nm zfs Cm inherit Sy relatime Ar poolname/dset\n.Pp\nTo test the generator output:\n.Dl $ Nm mkdir Pa /tmp/zfs-mount-generator\n.Dl $ Nm @systemdgeneratordir@/zfs-mount-generator Pa /tmp/zfs-mount-generator\n.\nIf the generated units are satisfactory, instruct\n.Nm systemd\nto re-run all generators:\n.Dl # Nm systemctl daemon-reload\n.\n.Sh SEE ALSO\n.Xr systemd.mount 5 ,\n.Xr systemd.target 5 ,\n.Xr zfs 5 ,\n.Xr systemd.generator 7 ,\n.Xr systemd.special 7 ,\n.Xr zed 8 ,\n.Xr zpool-events 8\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}