{
  "module_name": "zpool_influxdb.8",
  "hash_id": "6b41584ae14bfb6ea3425893356e61ce283407a2bd6b719a6cd49035d186f52a",
  "original_prompt": "Ingested from zfs-2.2.2/man/man8/zpool_influxdb.8",
  "human_readable_source": ".\\\"\n.\\\" CDDL HEADER START\n.\\\"\n.\\\" The contents of this file are subject to the terms of the\n.\\\" Common Development and Distribution License (the \"License\").\n.\\\" You may not use this file except in compliance with the License.\n.\\\"\n.\\\" You can obtain a copy of the license at\n.\\\" https://opensource.org/licenses/CDDL-1.0\n.\\\" See the License for the specific language governing permissions\n.\\\" and limitations under the License.\n.\\\"\n.\\\" When distributing Covered Code, include this CDDL HEADER in each\n.\\\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.\n.\\\" If applicable, add the following below this CDDL HEADER, with the\n.\\\" fields enclosed by brackets \"[]\" replaced with your own identifying\n.\\\" information: Portions Copyright [yyyy] [name of copyright owner]\n.\\\"\n.\\\" CDDL HEADER END\n.\\\"\n.\\\" Copyright 2020 Richard Elling\n.\\\"\n.Dd May 26, 2021\n.Dt ZPOOL_INFLUXDB 8\n.Os\n.\n.Sh NAME\n.Nm zpool_influxdb\n.Nd collect ZFS pool statistics in InfluxDB line protocol format\n.Sh SYNOPSIS\n.Nm\n.Op Fl e Ns | Ns Fl -execd\n.Op Fl n Ns | Ns Fl -no-histogram\n.Op Fl s Ns | Ns Fl -sum-histogram-buckets\n.Op Fl t Ns | Ns Fl -tags Ar key Ns = Ns Ar value Ns Oo , Ns Ar key Ns = Ns Ar value Oc Ns \u2026\n.Op Ar pool\n.\n.Sh DESCRIPTION\n.Nm\nproduces InfluxDB-line-protocol-compatible metrics from zpools.\nLike the\n.Nm zpool\ncommand,\n.Nm\nreads the current pool status and statistics.\nUnlike the\n.Nm zpool\ncommand which is intended for humans,\n.Nm\nformats the output in the InfluxDB line protocol.\nThe expected use is as a plugin to a\nmetrics collector or aggregator, such as Telegraf.\n.Pp\nBy default,\n.Nm\nprints pool metrics and status in the InfluxDB line protocol format.\nAll pools are printed, similar to the\n.Nm zpool Cm status\ncommand.\nProviding a pool name restricts the output to the named pool.\n.\n.Sh OPTIONS\n.Bl -tag -width \"-e, --execd\"\n.It Fl e , -execd\nRun in daemon mode compatible with Telegraf's\n.Nm execd\nplugin.\nIn this mode, the pools are sampled every time a\nnewline appears on the standard input.\n.It Fl n , -no-histogram\nDo not print latency and I/O size histograms.\nThis can reduce the total\namount of data, but one should consider the value brought by the insights\nthat latency and I/O size distributions provide.\nThe resulting values\nare suitable for graphing with Grafana's heatmap plugin.\n.It Fl s , -sum-histogram-buckets\nAccumulates bucket values.\nBy default, the values are not accumulated and the raw data appears as shown by\n.Nm zpool Cm iostat .\nThis works well for Grafana's heatmap plugin.\nSumming the buckets produces output similar to Prometheus histograms.\n.It Fl t , Fl -tags Ar key Ns = Ns Ar value Ns Oo , Ns Ar key Ns = Ns Ar value Oc Ns \u2026\nAdds specified tags to the tag set.\nNo sanity checking is performed.\nSee the InfluxDB Line Protocol format documentation for details on escaping\nspecial characters used in tags.\n.It Fl h , -help\nPrint a usage summary.\n.El\n.\n.Sh SEE ALSO\n.Xr zpool-iostat 8 ,\n.Xr zpool-status 8 ,\n.Lk https://github.com/influxdata/influxdb \"InfluxDB\" ,\n.Lk https://github.com/influxdata/telegraf \"Telegraf\" ,\n.Lk https://grafana.com \"Grafana\" ,\n.Lk https://prometheus.io \"Prometheus\"\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}