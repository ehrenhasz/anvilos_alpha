{
  "module_name": "zpoolprops.7",
  "hash_id": "62e6808dabeb15696748e0b9b0b3ec67b7ba42a7ff8761f1f93ac042ec88d4da",
  "original_prompt": "Ingested from zfs-2.2.2/man/man7/zpoolprops.7",
  "human_readable_source": ".\\\"\n.\\\" CDDL HEADER START\n.\\\"\n.\\\" The contents of this file are subject to the terms of the\n.\\\" Common Development and Distribution License (the \"License\").\n.\\\" You may not use this file except in compliance with the License.\n.\\\"\n.\\\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE\n.\\\" or https://opensource.org/licenses/CDDL-1.0.\n.\\\" See the License for the specific language governing permissions\n.\\\" and limitations under the License.\n.\\\"\n.\\\" When distributing Covered Code, include this CDDL HEADER in each\n.\\\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.\n.\\\" If applicable, add the following below this CDDL HEADER, with the\n.\\\" fields enclosed by brackets \"[]\" replaced with your own identifying\n.\\\" information: Portions Copyright [yyyy] [name of copyright owner]\n.\\\"\n.\\\" CDDL HEADER END\n.\\\"\n.\\\" Copyright (c) 2007, Sun Microsystems, Inc. All Rights Reserved.\n.\\\" Copyright (c) 2012, 2018 by Delphix. All rights reserved.\n.\\\" Copyright (c) 2012 Cyril Plisko. All Rights Reserved.\n.\\\" Copyright (c) 2017 Datto Inc.\n.\\\" Copyright (c) 2018 George Melikov. All Rights Reserved.\n.\\\" Copyright 2017 Nexenta Systems, Inc.\n.\\\" Copyright (c) 2017 Open-E, Inc. All Rights Reserved.\n.\\\" Copyright (c) 2021, Colm Buckley <colm@tuatha.org>\n.\\\" Copyright (c) 2023, Klara Inc.\n.\\\"\n.Dd April 18, 2023\n.Dt ZPOOLPROPS 7\n.Os\n.\n.Sh NAME\n.Nm zpoolprops\n.Nd properties of ZFS storage pools\n.\n.Sh DESCRIPTION\nEach pool has several properties associated with it.\nSome properties are read-only statistics while others are configurable and\nchange the behavior of the pool.\n.Pp\nUser properties have no effect on ZFS behavior.\nUse them to annotate pools in a way that is meaningful in your environment.\nFor more information about user properties, see the\n.Sx User Properties\nsection.\n.Pp\nThe following are read-only properties:\n.Bl -tag -width \"unsupported@guid\"\n.It Sy allocated\nAmount of storage used within the pool.\nSee\n.Sy fragmentation\nand\n.Sy free\nfor more information.\n.It Sy bcloneratio\nThe ratio of the total amount of storage that would be required to store all\nthe cloned blocks without cloning to the actual storage used.\nThe\n.Sy bcloneratio\nproperty is calculated as:\n.Pp\n.Sy ( ( bclonesaved + bcloneused ) * 100 ) / bcloneused\n.It Sy bclonesaved\nThe amount of additional storage that would be required if block cloning\nwas not used.\n.It Sy bcloneused\nThe amount of storage used by cloned blocks.\n.It Sy capacity\nPercentage of pool space used.\nThis property can also be referred to by its shortened column name,\n.Sy cap .\n.It Sy expandsize\nAmount of uninitialized space within the pool or device that can be used to\nincrease the total capacity of the pool.\nOn whole-disk vdevs, this is the space beyond the end of the GPT \u2013\ntypically occurring when a LUN is dynamically expanded\nor a disk replaced with a larger one.\nOn partition vdevs, this is the space appended to the partition after it was\nadded to the pool \u2013 most likely by resizing it in-place.\nThe space can be claimed for the pool by bringing it online with\n.Sy autoexpand=on\nor using\n.Nm zpool Cm online Fl e .\n.It Sy fragmentation\nThe amount of fragmentation in the pool.\nAs the amount of space\n.Sy allocated\nincreases, it becomes more difficult to locate\n.Sy free\nspace.\nThis may result in lower write performance compared to pools with more\nunfragmented free space.\n.It Sy free\nThe amount of free space available in the pool.\nBy contrast, the\n.Xr zfs 8\n.Sy available\nproperty describes how much new data can be written to ZFS filesystems/volumes.\nThe zpool\n.Sy free\nproperty is not generally useful for this purpose, and can be substantially more\nthan the zfs\n.Sy available\nspace.\nThis discrepancy is due to several factors, including raidz parity;\nzfs reservation, quota, refreservation, and refquota properties; and space set\naside by\n.Sy spa_slop_shift\n(see\n.Xr zfs 4\nfor more information).\n.It Sy freeing\nAfter a file system or snapshot is destroyed, the space it was using is\nreturned to the pool asynchronously.\n.Sy freeing\nis the amount of space remaining to be reclaimed.\nOver time\n.Sy freeing\nwill decrease while\n.Sy free\nincreases.\n.It Sy guid\nA unique identifier for the pool.\n.It Sy health\nThe current health of the pool.\nHealth can be one of\n.Sy ONLINE , DEGRADED , FAULTED , OFFLINE, REMOVED , UNAVAIL .\n.It Sy leaked\nSpace not released while\n.Sy freeing\ndue to corruption, now permanently leaked into the pool.\n.It Sy load_guid\nA unique identifier for the pool.\nUnlike the\n.Sy guid\nproperty, this identifier is generated every time we load the pool (i.e. does\nnot persist across imports/exports) and never changes while the pool is loaded\n(even if a\n.Sy reguid\noperation takes place).\n.It Sy size\nTotal size of the storage pool.\n.It Sy unsupported@ Ns Em guid\nInformation about unsupported features that are enabled on the pool.\nSee\n.Xr zpool-features 7\nfor details.\n.El\n.Pp\nThe space usage properties report actual physical space available to the\nstorage pool.\nThe physical space can be different from the total amount of space that any\ncontained datasets can actually use.\nThe amount of space used in a raidz configuration depends on the characteristics\nof the data being written.\nIn addition, ZFS reserves some space for internal accounting that the\n.Xr zfs 8\ncommand takes into account, but the\n.Nm\ncommand does not.\nFor non-full pools of a reasonable size, these effects should be invisible.\nFor small pools, or pools that are close to being completely full, these\ndiscrepancies may become more noticeable.\n.Pp\nThe following property can be set at creation time and import time:\n.Bl -tag -width Ds\n.It Sy altroot\nAlternate root directory.\nIf set, this directory is prepended to any mount points within the pool.\nThis can be used when examining an unknown pool where the mount points cannot be\ntrusted, or in an alternate boot environment, where the typical paths are not\nvalid.\n.Sy altroot\nis not a persistent property.\nIt is valid only while the system is up.\nSetting\n.Sy altroot\ndefaults to using\n.Sy cachefile Ns = Ns Sy none ,\nthough this may be overridden using an explicit setting.\n.El\n.Pp\nThe following property can be set only at import time:\n.Bl -tag -width Ds\n.It Sy readonly Ns = Ns Sy on Ns | Ns Sy off\nIf set to\n.Sy on ,\nthe pool will be imported in read-only mode.\nThis property can also be referred to by its shortened column name,\n.Sy rdonly .\n.El\n.Pp\nThe following properties can be set at creation time and import time, and later\nchanged with the\n.Nm zpool Cm set\ncommand:\n.Bl -tag -width Ds\n.It Sy ashift Ns = Ns Ar ashift\nPool sector size exponent, to the power of\n.Sy 2\n(internally referred to as\n.Sy ashift ) .\nValues from 9 to 16, inclusive, are valid; also, the\nvalue 0 (the default) means to auto-detect using the kernel's block\nlayer and a ZFS internal exception list.\nI/O operations will be aligned to the specified size boundaries.\nAdditionally, the minimum (disk)\nwrite size will be set to the specified size, so this represents a\nspace/performance trade-off.\nFor optimal performance, the pool sector size should be greater than\nor equal to the sector size of the underlying disks.\nThe typical case for setting this property is when\nperformance is important and the underlying disks use 4KiB sectors but\nreport 512B sectors to the OS (for compatibility reasons); in that\ncase, set\n.Sy ashift Ns = Ns Sy 12\n(which is\n.Sy 1<<12 No = Sy 4096 ) .\nWhen set, this property is\nused as the default hint value in subsequent vdev operations (add,\nattach and replace).\nChanging this value will not modify any existing\nvdev, not even on disk replacement; however it can be used, for\ninstance, to replace a dying 512B sectors disk with a newer 4KiB\nsectors device: this will probably result in bad performance but at the\nsame time could prevent loss of data.\n.It Sy autoexpand Ns = Ns Sy on Ns | Ns Sy off\nControls automatic pool expansion when the underlying LUN is grown.\nIf set to\n.Sy on ,\nthe pool will be resized according to the size of the expanded device.\nIf the device is part of a mirror or raidz then all devices within that\nmirror/raidz group must be expanded before the new space is made available to\nthe pool.\nThe default behavior is\n.Sy off .\nThis property can also be referred to by its shortened column name,\n.Sy expand .\n.It Sy autoreplace Ns = Ns Sy on Ns | Ns Sy off\nControls automatic device replacement.\nIf set to\n.Sy off ,\ndevice replacement must be initiated by the administrator by using the\n.Nm zpool Cm replace\ncommand.\nIf set to\n.Sy on ,\nany new device, found in the same physical location as a device that previously\nbelonged to the pool, is automatically formatted and replaced.\nThe default behavior is\n.Sy off .\nThis property can also be referred to by its shortened column name,\n.Sy replace .\nAutoreplace can also be used with virtual disks (like device\nmapper) provided that you use the /dev/disk/by-vdev paths setup by\nvdev_id.conf.\nSee the\n.Xr vdev_id 8\nmanual page for more details.\nAutoreplace and autoonline require the ZFS Event Daemon be configured and\nrunning.\nSee the\n.Xr zed 8\nmanual page for more details.\n.It Sy autotrim Ns = Ns Sy on Ns | Ns Sy off\nWhen set to\n.Sy on\nspace which has been recently freed, and is no longer allocated by the pool,\nwill be periodically trimmed.\nThis allows block device vdevs which support\nBLKDISCARD, such as SSDs, or file vdevs on which the underlying file system\nsupports hole-punching, to reclaim unused blocks.\nThe default value for this property is\n.Sy off .\n.Pp\nAutomatic TRIM does not immediately reclaim blocks after a free.\nInstead, it will optimistically delay allowing smaller ranges to be aggregated\ninto a few larger ones.\nThese can then be issued more efficiently to the storage.\nTRIM on L2ARC devices is enabled by setting\n.Sy l2arc_trim_ahead > 0 .\n.Pp\nBe aware that automatic trimming of recently freed data blocks can put\nsignificant stress on the underlying storage devices.\nThis will vary depending of how well the specific device handles these commands.\nFor lower-end devices it is often possible to achieve most of the benefits\nof automatic trimming by running an on-demand (manual) TRIM periodically\nusing the\n.Nm zpool Cm trim\ncommand.\n.It Sy bootfs Ns = Ns Sy (unset) Ns | Ns Ar pool Ns Op / Ns Ar dataset\nIdentifies the default bootable dataset for the root pool.\nThis property is expected to be set mainly by the installation and upgrade\nprograms.\nNot all Linux distribution boot processes use the bootfs property.\n.It Sy cachefile Ns = Ns Ar path Ns | Ns Sy none\nControls the location of where the pool configuration is cached.\nDiscovering all pools on system startup requires a cached copy of the\nconfiguration data that is stored on the root file system.\nAll pools in this cache are automatically imported when the system boots.\nSome environments, such as install and clustering, need to cache this\ninformation in a different location so that pools are not automatically\nimported.\nSetting this property caches the pool configuration in a different location that\ncan later be imported with\n.Nm zpool Cm import Fl c .\nSetting it to the value\n.Sy none\ncreates a temporary pool that is never cached, and the\n.Qq\n.Pq empty string\nuses the default location.\n.Pp\nMultiple pools can share the same cache file.\nBecause the kernel destroys and recreates this file when pools are added and\nremoved, care should be taken when attempting to access this file.\nWhen the last pool using a\n.Sy cachefile\nis exported or destroyed, the file will be empty.\n.It Sy comment Ns = Ns Ar text\nA text string consisting of printable ASCII characters that will be stored\nsuch that it is available even if the pool becomes faulted.\nAn administrator can provide additional information about a pool using this\nproperty.\n.It Sy compatibility Ns = Ns Sy off Ns | Ns Sy legacy Ns | Ns Ar file Ns Oo , Ns Ar file Oc Ns \u2026\nSpecifies that the pool maintain compatibility with specific feature sets.\nWhen set to\n.Sy off\n(or unset) compatibility is disabled (all features may be enabled); when set to\n.Sy legacy Ns\nno features may be enabled.\nWhen set to a comma-separated list of filenames\n(each filename may either be an absolute path, or relative to\n.Pa /etc/zfs/compatibility.d\nor\n.Pa /usr/share/zfs/compatibility.d )\nthe lists of requested features are read from those files, separated by\nwhitespace and/or commas.\nOnly features present in all files may be enabled.\n.Pp\nSee\n.Xr zpool-features 7 ,\n.Xr zpool-create 8\nand\n.Xr zpool-upgrade 8\nfor more information on the operation of compatibility feature sets.\n.It Sy dedupditto Ns = Ns Ar number\nThis property is deprecated and no longer has any effect.\n.It Sy delegation Ns = Ns Sy on Ns | Ns Sy off\nControls whether a non-privileged user is granted access based on the dataset\npermissions defined on the dataset.\nSee\n.Xr zfs 8\nfor more information on ZFS delegated administration.\n.It Sy failmode Ns = Ns Sy wait Ns | Ns Sy continue Ns | Ns Sy panic\nControls the system behavior in the event of catastrophic pool failure.\nThis condition is typically a result of a loss of connectivity to the underlying\nstorage device(s) or a failure of all devices within the pool.\nThe behavior of such an event is determined as follows:\n.Bl -tag -width \"continue\"\n.It Sy wait\nBlocks all I/O access until the device connectivity is recovered and the errors\nare cleared with\n.Nm zpool Cm clear .\nThis is the default behavior.\n.It Sy continue\nReturns\n.Er EIO\nto any new write I/O requests but allows reads to any of the remaining healthy\ndevices.\nAny write requests that have yet to be committed to disk would be blocked.\n.It Sy panic\nPrints out a message to the console and generates a system crash dump.\n.El\n.It Sy feature@ Ns Ar feature_name Ns = Ns Sy enabled\nThe value of this property is the current state of\n.Ar feature_name .\nThe only valid value when setting this property is\n.Sy enabled\nwhich moves\n.Ar feature_name\nto the enabled state.\nSee\n.Xr zpool-features 7\nfor details on feature states.\n.It Sy listsnapshots Ns = Ns Sy on Ns | Ns Sy off\nControls whether information about snapshots associated with this pool is\noutput when\n.Nm zfs Cm list\nis run without the\n.Fl t\noption.\nThe default value is\n.Sy off .\nThis property can also be referred to by its shortened name,\n.Sy listsnaps .\n.It Sy multihost Ns = Ns Sy on Ns | Ns Sy off\nControls whether a pool activity check should be performed during\n.Nm zpool Cm import .\nWhen a pool is determined to be active it cannot be imported, even with the\n.Fl f\noption.\nThis property is intended to be used in failover configurations\nwhere multiple hosts have access to a pool on shared storage.\n.Pp\nMultihost provides protection on import only.\nIt does not protect against an\nindividual device being used in multiple pools, regardless of the type of vdev.\nSee the discussion under\n.Nm zpool Cm create .\n.Pp\nWhen this property is on, periodic writes to storage occur to show the pool is\nin use.\nSee\n.Sy zfs_multihost_interval\nin the\n.Xr zfs 4\nmanual page.\nIn order to enable this property each host must set a unique hostid.\nSee\n.Xr genhostid 1\n.Xr zgenhostid 8\n.Xr spl 4\nfor additional details.\nThe default value is\n.Sy off .\n.It Sy version Ns = Ns Ar version\nThe current on-disk version of the pool.\nThis can be increased, but never decreased.\nThe preferred method of updating pools is with the\n.Nm zpool Cm upgrade\ncommand, though this property can be used when a specific version is needed for\nbackwards compatibility.\nOnce feature flags are enabled on a pool this property will no longer have a\nvalue.\n.El\n.\n.Ss User Properties\nIn addition to the standard native properties, ZFS supports arbitrary user\nproperties.\nUser properties have no effect on ZFS behavior, but applications or\nadministrators can use them to annotate pools.\n.Pp\nUser property names must contain a colon\n.Pq Qq Sy \\&:\ncharacter to distinguish them from native properties.\nThey may contain lowercase letters, numbers, and the following punctuation\ncharacters: colon\n.Pq Qq Sy \\&: ,\ndash\n.Pq Qq Sy - ,\nperiod\n.Pq Qq Sy \\&. ,\nand underscore\n.Pq Qq Sy _ .\nThe expected convention is that the property name is divided into two portions\nsuch as\n.Ar module : Ns Ar property ,\nbut this namespace is not enforced by ZFS.\nUser property names can be at most 256 characters, and cannot begin with a dash\n.Pq Qq Sy - .\n.Pp\nWhen making programmatic use of user properties, it is strongly suggested to use\na reversed DNS domain name for the\n.Ar module\ncomponent of property names to reduce the chance that two\nindependently-developed packages use the same property name for different\npurposes.\n.Pp\nThe values of user properties are arbitrary strings and\nare never validated.\nAll of the commands that operate on properties\n.Po Nm zpool Cm list ,\n.Nm zpool Cm get ,\n.Nm zpool Cm set ,\nand so forth\n.Pc\ncan be used to manipulate both native properties and user properties.\nUse\n.Nm zpool Cm set Ar name Ns =\nto clear a user property.\nProperty values are limited to 8192 bytes.\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}