{
  "module_name": "libnvpair.c",
  "hash_id": "bc95ca385e21c1ab3ca787ba8400943dbf4d78ea404f0f714a7f9a2942141459",
  "original_prompt": "Ingested from zfs-2.2.2/lib/libnvpair/libnvpair.c",
  "human_readable_source": " \n \n\n#include <unistd.h>\n#include <string.h>\n#include <libintl.h>\n#include <sys/types.h>\n#include <sys/inttypes.h>\n#include <stdarg.h>\n#include \"libnvpair.h\"\n\n \n\n \n\n#define\tDEFINEOP(opname, vtype) \\\n\tstruct { \\\n\t\tint (*op)(struct nvlist_prtctl *, void *, nvlist_t *, \\\n\t\t    const char *, vtype); \\\n\t\tvoid *arg; \\\n\t} opname\n\n#define\tDEFINEARROP(opname, vtype) \\\n\tstruct { \\\n\t\tint (*op)(struct nvlist_prtctl *, void *, nvlist_t *, \\\n\t\t    const char *, vtype, uint_t); \\\n\t\tvoid *arg; \\\n\t} opname\n\nstruct nvlist_printops {\n\tDEFINEOP(print_boolean, int);\n\tDEFINEOP(print_boolean_value, boolean_t);\n\tDEFINEOP(print_byte, uchar_t);\n\tDEFINEOP(print_int8, int8_t);\n\tDEFINEOP(print_uint8, uint8_t);\n\tDEFINEOP(print_int16, int16_t);\n\tDEFINEOP(print_uint16, uint16_t);\n\tDEFINEOP(print_int32, int32_t);\n\tDEFINEOP(print_uint32, uint32_t);\n\tDEFINEOP(print_int64, int64_t);\n\tDEFINEOP(print_uint64, uint64_t);\n\tDEFINEOP(print_double, double);\n\tDEFINEOP(print_string, const char *);\n\tDEFINEOP(print_hrtime, hrtime_t);\n\tDEFINEOP(print_nvlist, nvlist_t *);\n\tDEFINEARROP(print_boolean_array, boolean_t *);\n\tDEFINEARROP(print_byte_array, uchar_t *);\n\tDEFINEARROP(print_int8_array, int8_t *);\n\tDEFINEARROP(print_uint8_array, uint8_t *);\n\tDEFINEARROP(print_int16_array, int16_t *);\n\tDEFINEARROP(print_uint16_array, uint16_t *);\n\tDEFINEARROP(print_int32_array, int32_t *);\n\tDEFINEARROP(print_uint32_array, uint32_t *);\n\tDEFINEARROP(print_int64_array, int64_t *);\n\tDEFINEARROP(print_uint64_array, uint64_t *);\n\tDEFINEARROP(print_string_array, const char **);\n\tDEFINEARROP(print_nvlist_array, nvlist_t **);\n};\n\nstruct nvlist_prtctl {\n\tFILE *nvprt_fp;\t\t\t \n\tenum nvlist_indent_mode nvprt_indent_mode;  \n\tint nvprt_indent;\t\t \n\tint nvprt_indentinc;\t\t \n\tconst char *nvprt_nmfmt;\t \n\tconst char *nvprt_eomfmt;\t \n\tconst char *nvprt_btwnarrfmt;\t \n\tint nvprt_btwnarrfmt_nl;\t \n\tstruct nvlist_printops *nvprt_dfltops;\n\tstruct nvlist_printops *nvprt_custops;\n};\n\n#define\tDFLTPRTOP(pctl, type) \\\n\t((pctl)->nvprt_dfltops->print_##type.op)\n\n#define\tDFLTPRTOPARG(pctl, type) \\\n\t((pctl)->nvprt_dfltops->print_##type.arg)\n\n#define\tCUSTPRTOP(pctl, type) \\\n\t((pctl)->nvprt_custops->print_##type.op)\n\n#define\tCUSTPRTOPARG(pctl, type) \\\n\t((pctl)->nvprt_custops->print_##type.arg)\n\n#define\tRENDER(pctl, type, nvl, name, val) \\\n\t{ \\\n\t\tint done = 0; \\\n\t\tif ((pctl)->nvprt_custops && CUSTPRTOP(pctl, type)) { \\\n\t\t\tdone = CUSTPRTOP(pctl, type)(pctl, \\\n\t\t\t    CUSTPRTOPARG(pctl, type), nvl, name, val); \\\n\t\t} \\\n\t\tif (!done) { \\\n\t\t\t(void) DFLTPRTOP(pctl, type)(pctl, \\\n\t\t\t    DFLTPRTOPARG(pctl, type), nvl, name, val); \\\n\t\t} \\\n\t\t(void) fprintf(pctl->nvprt_fp, \"%s\", pctl->nvprt_eomfmt); \\\n\t}\n\n#define\tARENDER(pctl, type, nvl, name, arrp, count) \\\n\t{ \\\n\t\tint done = 0; \\\n\t\tif ((pctl)->nvprt_custops && CUSTPRTOP(pctl, type)) { \\\n\t\t\tdone = CUSTPRTOP(pctl, type)(pctl, \\\n\t\t\t    CUSTPRTOPARG(pctl, type), nvl, name, arrp, count); \\\n\t\t} \\\n\t\tif (!done) { \\\n\t\t\t(void) DFLTPRTOP(pctl, type)(pctl, \\\n\t\t\t    DFLTPRTOPARG(pctl, type), nvl, name, arrp, count); \\\n\t\t} \\\n\t\t(void) fprintf(pctl->nvprt_fp, \"%s\", pctl->nvprt_eomfmt); \\\n\t}\n\nstatic void nvlist_print_with_indent(nvlist_t *, nvlist_prtctl_t);\n\n \n\nstatic void\nindent(nvlist_prtctl_t pctl, int onemore)\n{\n\tint depth;\n\n\tswitch (pctl->nvprt_indent_mode) {\n\tcase NVLIST_INDENT_ABS:\n\t\t(void) fprintf(pctl->nvprt_fp, \"%*s\",\n\t\t    pctl->nvprt_indent + onemore * pctl->nvprt_indentinc, \"\");\n\t\tbreak;\n\n\tcase NVLIST_INDENT_TABBED:\n\t\tdepth = pctl->nvprt_indent + onemore;\n\t\twhile (depth-- > 0)\n\t\t\t(void) fprintf(pctl->nvprt_fp, \"\\t\");\n\t}\n}\n\n \n\n \n\n#define\tNVLIST_PRTFUNC(type_and_variant, vtype, ptype, vfmt) \\\nstatic int \\\nnvprint_##type_and_variant(nvlist_prtctl_t pctl, void *private, \\\n    nvlist_t *nvl, const char *name, vtype value) \\\n{ \\\n\t(void) private; \\\n\t(void) nvl; \\\n\tFILE *fp = pctl->nvprt_fp; \\\n\tindent(pctl, 1); \\\n\t(void) fprintf(fp, pctl->nvprt_nmfmt, name); \\\n\t(void) fprintf(fp, vfmt, (ptype)value); \\\n\treturn (1); \\\n}\n\n \n#if defined(__GNUC__) && !defined(__clang__) && \\\n\tdefined(ZFS_UBSAN_ENABLED) && defined(HAVE_FORMAT_OVERFLOW)\n#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wformat-overflow\"\n#endif\nNVLIST_PRTFUNC(boolean, int, int, \"%d\")\nNVLIST_PRTFUNC(boolean_value, boolean_t, int, \"%d\")\nNVLIST_PRTFUNC(byte, uchar_t, uchar_t, \"0x%2.2x\")\nNVLIST_PRTFUNC(int8, int8_t, int, \"%d\")\nNVLIST_PRTFUNC(uint8, uint8_t, uint8_t, \"0x%x\")\nNVLIST_PRTFUNC(int16, int16_t, int16_t, \"%d\")\nNVLIST_PRTFUNC(uint16, uint16_t, uint16_t, \"0x%x\")\nNVLIST_PRTFUNC(int32, int32_t, int32_t, \"%d\")\nNVLIST_PRTFUNC(uint32, uint32_t, uint32_t, \"0x%x\")\nNVLIST_PRTFUNC(int64, int64_t, longlong_t, \"%lld\")\nNVLIST_PRTFUNC(uint64, uint64_t, u_longlong_t, \"0x%llx\")\nNVLIST_PRTFUNC(double, double, double, \"0x%f\")\nNVLIST_PRTFUNC(string, const char *, const char *, \"%s\")\nNVLIST_PRTFUNC(hrtime, hrtime_t, hrtime_t, \"0x%llx\")\n#if defined(__GNUC__) && !defined(__clang__) && \\\n\tdefined(ZFS_UBSAN_ENABLED) && defined(HAVE_FORMAT_OVERFLOW)\n#pragma GCC diagnostic pop\n#endif\n\n \n\n#define\tNVLIST_ARRPRTFUNC(type_and_variant, vtype, ptype, vfmt) \\\nstatic int \\\nnvaprint_##type_and_variant(nvlist_prtctl_t pctl, void *private, \\\n    nvlist_t *nvl, const char *name, vtype *valuep, uint_t count) \\\n{ \\\n\t(void) private; \\\n\t(void) nvl; \\\n\tFILE *fp = pctl->nvprt_fp; \\\n\tuint_t i; \\\n\tfor (i = 0; i < count; i++) { \\\n\t\tif (i == 0 || pctl->nvprt_btwnarrfmt_nl) { \\\n\t\t\tindent(pctl, 1); \\\n\t\t\t(void) fprintf(fp, pctl->nvprt_nmfmt, name); \\\n\t\t\tif (pctl->nvprt_btwnarrfmt_nl) \\\n\t\t\t\t(void) fprintf(fp, \"[%d]: \", i); \\\n\t\t} \\\n\t\tif (i != 0) \\\n\t\t\t(void) fprintf(fp, \"%s\", pctl->nvprt_btwnarrfmt); \\\n\t\t(void) fprintf(fp, vfmt, (ptype)valuep[i]); \\\n\t} \\\n\treturn (1); \\\n}\n\nNVLIST_ARRPRTFUNC(boolean_array, boolean_t, boolean_t, \"%d\")\nNVLIST_ARRPRTFUNC(byte_array, uchar_t, uchar_t, \"0x%2.2x\")\nNVLIST_ARRPRTFUNC(int8_array, int8_t, int8_t, \"%d\")\nNVLIST_ARRPRTFUNC(uint8_array, uint8_t, uint8_t, \"0x%x\")\nNVLIST_ARRPRTFUNC(int16_array, int16_t, int16_t, \"%d\")\nNVLIST_ARRPRTFUNC(uint16_array, uint16_t, uint16_t, \"0x%x\")\nNVLIST_ARRPRTFUNC(int32_array, int32_t, int32_t, \"%d\")\nNVLIST_ARRPRTFUNC(uint32_array, uint32_t, uint32_t, \"0x%x\")\nNVLIST_ARRPRTFUNC(int64_array, int64_t, longlong_t, \"%lld\")\nNVLIST_ARRPRTFUNC(uint64_array, uint64_t, u_longlong_t, \"0x%llx\")\nNVLIST_ARRPRTFUNC(string_array, const char *, const char *, \"%s\")\n\nstatic int\nnvprint_nvlist(nvlist_prtctl_t pctl, void *private,\n    nvlist_t *nvl, const char *name, nvlist_t *value)\n{\n\t(void) private, (void) nvl;\n\tFILE *fp = pctl->nvprt_fp;\n\n\tindent(pctl, 1);\n\t(void) fprintf(fp, \"%s = (embedded nvlist)\\n\", name);\n\n\tpctl->nvprt_indent += pctl->nvprt_indentinc;\n\tnvlist_print_with_indent(value, pctl);\n\tpctl->nvprt_indent -= pctl->nvprt_indentinc;\n\n\tindent(pctl, 1);\n\t(void) fprintf(fp, \"(end %s)\\n\", name);\n\n\treturn (1);\n}\n\nstatic int\nnvaprint_nvlist_array(nvlist_prtctl_t pctl, void *private,\n    nvlist_t *nvl, const char *name, nvlist_t **valuep, uint_t count)\n{\n\t(void) private, (void) nvl;\n\tFILE *fp = pctl->nvprt_fp;\n\tuint_t i;\n\n\tindent(pctl, 1);\n\t(void) fprintf(fp, \"%s = (array of embedded nvlists)\\n\", name);\n\n\tfor (i = 0; i < count; i++) {\n\t\tindent(pctl, 1);\n\t\t(void) fprintf(fp, \"(start %s[%d])\\n\", name, i);\n\n\t\tpctl->nvprt_indent += pctl->nvprt_indentinc;\n\t\tnvlist_print_with_indent(valuep[i], pctl);\n\t\tpctl->nvprt_indent -= pctl->nvprt_indentinc;\n\n\t\tindent(pctl, 1);\n\t\t(void) fprintf(fp, \"(end %s[%d])\\n\", name, i);\n\t}\n\n\treturn (1);\n}\n\n \n\nvoid\nnvlist_prtctl_setdest(nvlist_prtctl_t pctl, FILE *fp)\n{\n\tpctl->nvprt_fp = fp;\n}\n\nFILE *\nnvlist_prtctl_getdest(nvlist_prtctl_t pctl)\n{\n\treturn (pctl->nvprt_fp);\n}\n\n\nvoid\nnvlist_prtctl_setindent(nvlist_prtctl_t pctl, enum nvlist_indent_mode mode,\n    int start, int inc)\n{\n\tif (mode < NVLIST_INDENT_ABS || mode > NVLIST_INDENT_TABBED)\n\t\tmode = NVLIST_INDENT_TABBED;\n\n\tif (start < 0)\n\t\tstart = 0;\n\n\tif (inc < 0)\n\t\tinc = 1;\n\n\tpctl->nvprt_indent_mode = mode;\n\tpctl->nvprt_indent = start;\n\tpctl->nvprt_indentinc = inc;\n}\n\nvoid\nnvlist_prtctl_doindent(nvlist_prtctl_t pctl, int onemore)\n{\n\tindent(pctl, onemore);\n}\n\n\nvoid\nnvlist_prtctl_setfmt(nvlist_prtctl_t pctl, enum nvlist_prtctl_fmt which,\n    const char *fmt)\n{\n\tswitch (which) {\n\tcase NVLIST_FMT_MEMBER_NAME:\n\t\tif (fmt == NULL)\n\t\t\tfmt = \"%s = \";\n\t\tpctl->nvprt_nmfmt = fmt;\n\t\tbreak;\n\n\tcase NVLIST_FMT_MEMBER_POSTAMBLE:\n\t\tif (fmt == NULL)\n\t\t\tfmt = \"\\n\";\n\t\tpctl->nvprt_eomfmt = fmt;\n\t\tbreak;\n\n\tcase NVLIST_FMT_BTWN_ARRAY:\n\t\tif (fmt == NULL) {\n\t\t\tpctl->nvprt_btwnarrfmt = \" \";\n\t\t\tpctl->nvprt_btwnarrfmt_nl = 0;\n\t\t} else {\n\t\t\tpctl->nvprt_btwnarrfmt = fmt;\n\t\t\tpctl->nvprt_btwnarrfmt_nl = (strstr(fmt, \"\\n\") != NULL);\n\t\t}\n\t\tbreak;\n\n\tdefault:\n\t\tbreak;\n\t}\n}\n\n\nvoid\nnvlist_prtctl_dofmt(nvlist_prtctl_t pctl, enum nvlist_prtctl_fmt which, ...)\n{\n\tFILE *fp = pctl->nvprt_fp;\n\tva_list ap;\n\tconst char *name;\n\n\tva_start(ap, which);\n\n\tswitch (which) {\n\tcase NVLIST_FMT_MEMBER_NAME:\n\t\tname = va_arg(ap, const char *);\n\t\t(void) fprintf(fp, pctl->nvprt_nmfmt, name);\n\t\tbreak;\n\n\tcase NVLIST_FMT_MEMBER_POSTAMBLE:\n\t\t(void) fprintf(fp, \"%s\", pctl->nvprt_eomfmt);\n\t\tbreak;\n\n\tcase NVLIST_FMT_BTWN_ARRAY:\n\t\t(void) fprintf(fp, \"%s\", pctl->nvprt_btwnarrfmt);\n\t\tbreak;\n\n\tdefault:\n\t\tbreak;\n\t}\n\n\tva_end(ap);\n}\n\n \n\n#define\tNVLIST_PRINTCTL_REPLACE(type, vtype) \\\nvoid \\\nnvlist_prtctlop_##type(nvlist_prtctl_t pctl, \\\n    int (*func)(nvlist_prtctl_t, void *, nvlist_t *, const char *, vtype), \\\n    void *private) \\\n{ \\\n\tCUSTPRTOP(pctl, type) = func; \\\n\tCUSTPRTOPARG(pctl, type) = private; \\\n}\n\nNVLIST_PRINTCTL_REPLACE(boolean, int)\nNVLIST_PRINTCTL_REPLACE(boolean_value, boolean_t)\nNVLIST_PRINTCTL_REPLACE(byte, uchar_t)\nNVLIST_PRINTCTL_REPLACE(int8, int8_t)\nNVLIST_PRINTCTL_REPLACE(uint8, uint8_t)\nNVLIST_PRINTCTL_REPLACE(int16, int16_t)\nNVLIST_PRINTCTL_REPLACE(uint16, uint16_t)\nNVLIST_PRINTCTL_REPLACE(int32, int32_t)\nNVLIST_PRINTCTL_REPLACE(uint32, uint32_t)\nNVLIST_PRINTCTL_REPLACE(int64, int64_t)\nNVLIST_PRINTCTL_REPLACE(uint64, uint64_t)\nNVLIST_PRINTCTL_REPLACE(double, double)\nNVLIST_PRINTCTL_REPLACE(string, const char *)\nNVLIST_PRINTCTL_REPLACE(hrtime, hrtime_t)\nNVLIST_PRINTCTL_REPLACE(nvlist, nvlist_t *)\n\n#define\tNVLIST_PRINTCTL_AREPLACE(type, vtype) \\\nvoid \\\nnvlist_prtctlop_##type(nvlist_prtctl_t pctl, \\\n    int (*func)(nvlist_prtctl_t, void *, nvlist_t *, const char *, vtype, \\\n    uint_t), void *private) \\\n{ \\\n\tCUSTPRTOP(pctl, type) = func; \\\n\tCUSTPRTOPARG(pctl, type) = private; \\\n}\n\nNVLIST_PRINTCTL_AREPLACE(boolean_array, boolean_t *)\nNVLIST_PRINTCTL_AREPLACE(byte_array, uchar_t *)\nNVLIST_PRINTCTL_AREPLACE(int8_array, int8_t *)\nNVLIST_PRINTCTL_AREPLACE(uint8_array, uint8_t *)\nNVLIST_PRINTCTL_AREPLACE(int16_array, int16_t *)\nNVLIST_PRINTCTL_AREPLACE(uint16_array, uint16_t *)\nNVLIST_PRINTCTL_AREPLACE(int32_array, int32_t *)\nNVLIST_PRINTCTL_AREPLACE(uint32_array, uint32_t *)\nNVLIST_PRINTCTL_AREPLACE(int64_array, int64_t *)\nNVLIST_PRINTCTL_AREPLACE(uint64_array, uint64_t *)\nNVLIST_PRINTCTL_AREPLACE(string_array, const char **)\nNVLIST_PRINTCTL_AREPLACE(nvlist_array, nvlist_t **)\n\n \n\n\nstatic const struct nvlist_printops defprtops =\n{\n\t{ nvprint_boolean, NULL },\n\t{ nvprint_boolean_value, NULL },\n\t{ nvprint_byte, NULL },\n\t{ nvprint_int8, NULL },\n\t{ nvprint_uint8, NULL },\n\t{ nvprint_int16, NULL },\n\t{ nvprint_uint16, NULL },\n\t{ nvprint_int32, NULL },\n\t{ nvprint_uint32, NULL },\n\t{ nvprint_int64, NULL },\n\t{ nvprint_uint64, NULL },\n\t{ nvprint_double, NULL },\n\t{ nvprint_string, NULL },\n\t{ nvprint_hrtime, NULL },\n\t{ nvprint_nvlist, NULL },\n\t{ nvaprint_boolean_array, NULL },\n\t{ nvaprint_byte_array, NULL },\n\t{ nvaprint_int8_array, NULL },\n\t{ nvaprint_uint8_array, NULL },\n\t{ nvaprint_int16_array, NULL },\n\t{ nvaprint_uint16_array, NULL },\n\t{ nvaprint_int32_array, NULL },\n\t{ nvaprint_uint32_array, NULL },\n\t{ nvaprint_int64_array, NULL },\n\t{ nvaprint_uint64_array, NULL },\n\t{ nvaprint_string_array, NULL },\n\t{ nvaprint_nvlist_array, NULL },\n};\n\nstatic void\nprtctl_defaults(FILE *fp, struct nvlist_prtctl *pctl,\n    struct nvlist_printops *ops)\n{\n\tpctl->nvprt_fp = fp;\n\tpctl->nvprt_indent_mode = NVLIST_INDENT_TABBED;\n\tpctl->nvprt_indent = 0;\n\tpctl->nvprt_indentinc = 1;\n\tpctl->nvprt_nmfmt = \"%s = \";\n\tpctl->nvprt_eomfmt = \"\\n\";\n\tpctl->nvprt_btwnarrfmt = \" \";\n\tpctl->nvprt_btwnarrfmt_nl = 0;\n\n\tpctl->nvprt_dfltops = (struct nvlist_printops *)&defprtops;\n\tpctl->nvprt_custops = ops;\n}\n\nnvlist_prtctl_t\nnvlist_prtctl_alloc(void)\n{\n\tstruct nvlist_prtctl *pctl;\n\tstruct nvlist_printops *ops;\n\n\tif ((pctl = malloc(sizeof (*pctl))) == NULL)\n\t\treturn (NULL);\n\n\tif ((ops = calloc(1, sizeof (*ops))) == NULL) {\n\t\tfree(pctl);\n\t\treturn (NULL);\n\t}\n\n\tprtctl_defaults(stdout, pctl, ops);\n\n\treturn (pctl);\n}\n\nvoid\nnvlist_prtctl_free(nvlist_prtctl_t pctl)\n{\n\tif (pctl != NULL) {\n\t\tfree(pctl->nvprt_custops);\n\t\tfree(pctl);\n\t}\n}\n\n \n\n \nstatic void\nnvlist_print_with_indent(nvlist_t *nvl, nvlist_prtctl_t pctl)\n{\n\tFILE *fp = pctl->nvprt_fp;\n\tconst char *name;\n\tuint_t nelem;\n\tnvpair_t *nvp;\n\n\tif (nvl == NULL)\n\t\treturn;\n\n\tindent(pctl, 0);\n\t(void) fprintf(fp, \"nvlist version: %d\\n\", NVL_VERSION(nvl));\n\n\tnvp = nvlist_next_nvpair(nvl, NULL);\n\n\twhile (nvp) {\n\t\tdata_type_t type = nvpair_type(nvp);\n\n\t\tname = nvpair_name(nvp);\n\t\tnelem = 0;\n\n\t\tswitch (type) {\n\t\tcase DATA_TYPE_BOOLEAN: {\n\t\t\tRENDER(pctl, boolean, nvl, name, 1);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_BOOLEAN_VALUE: {\n\t\t\tboolean_t val;\n\t\t\t(void) nvpair_value_boolean_value(nvp, &val);\n\t\t\tRENDER(pctl, boolean_value, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_BYTE: {\n\t\t\tuchar_t val;\n\t\t\t(void) nvpair_value_byte(nvp, &val);\n\t\t\tRENDER(pctl, byte, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_INT8: {\n\t\t\tint8_t val;\n\t\t\t(void) nvpair_value_int8(nvp, &val);\n\t\t\tRENDER(pctl, int8, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_UINT8: {\n\t\t\tuint8_t val;\n\t\t\t(void) nvpair_value_uint8(nvp, &val);\n\t\t\tRENDER(pctl, uint8, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_INT16: {\n\t\t\tint16_t val;\n\t\t\t(void) nvpair_value_int16(nvp, &val);\n\t\t\tRENDER(pctl, int16, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_UINT16: {\n\t\t\tuint16_t val;\n\t\t\t(void) nvpair_value_uint16(nvp, &val);\n\t\t\tRENDER(pctl, uint16, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_INT32: {\n\t\t\tint32_t val;\n\t\t\t(void) nvpair_value_int32(nvp, &val);\n\t\t\tRENDER(pctl, int32, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_UINT32: {\n\t\t\tuint32_t val;\n\t\t\t(void) nvpair_value_uint32(nvp, &val);\n\t\t\tRENDER(pctl, uint32, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_INT64: {\n\t\t\tint64_t val;\n\t\t\t(void) nvpair_value_int64(nvp, &val);\n\t\t\tRENDER(pctl, int64, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_UINT64: {\n\t\t\tuint64_t val;\n\t\t\t(void) nvpair_value_uint64(nvp, &val);\n\t\t\tRENDER(pctl, uint64, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_DOUBLE: {\n\t\t\tdouble val;\n\t\t\t(void) nvpair_value_double(nvp, &val);\n\t\t\tRENDER(pctl, double, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_STRING: {\n\t\t\tconst char *val;\n\t\t\t(void) nvpair_value_string(nvp, &val);\n\t\t\tRENDER(pctl, string, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_BOOLEAN_ARRAY: {\n\t\t\tboolean_t *val;\n\t\t\t(void) nvpair_value_boolean_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, boolean_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_BYTE_ARRAY: {\n\t\t\tuchar_t *val;\n\t\t\t(void) nvpair_value_byte_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, byte_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_INT8_ARRAY: {\n\t\t\tint8_t *val;\n\t\t\t(void) nvpair_value_int8_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, int8_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_UINT8_ARRAY: {\n\t\t\tuint8_t *val;\n\t\t\t(void) nvpair_value_uint8_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, uint8_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_INT16_ARRAY: {\n\t\t\tint16_t *val;\n\t\t\t(void) nvpair_value_int16_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, int16_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_UINT16_ARRAY: {\n\t\t\tuint16_t *val;\n\t\t\t(void) nvpair_value_uint16_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, uint16_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_INT32_ARRAY: {\n\t\t\tint32_t *val;\n\t\t\t(void) nvpair_value_int32_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, int32_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_UINT32_ARRAY: {\n\t\t\tuint32_t *val;\n\t\t\t(void) nvpair_value_uint32_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, uint32_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_INT64_ARRAY: {\n\t\t\tint64_t *val;\n\t\t\t(void) nvpair_value_int64_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, int64_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_UINT64_ARRAY: {\n\t\t\tuint64_t *val;\n\t\t\t(void) nvpair_value_uint64_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, uint64_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_STRING_ARRAY: {\n\t\t\tconst char **val;\n\t\t\t(void) nvpair_value_string_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, string_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_HRTIME: {\n\t\t\thrtime_t val;\n\t\t\t(void) nvpair_value_hrtime(nvp, &val);\n\t\t\tRENDER(pctl, hrtime, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_NVLIST: {\n\t\t\tnvlist_t *val;\n\t\t\t(void) nvpair_value_nvlist(nvp, &val);\n\t\t\tRENDER(pctl, nvlist, nvl, name, val);\n\t\t\tbreak;\n\t\t}\n\t\tcase DATA_TYPE_NVLIST_ARRAY: {\n\t\t\tnvlist_t **val;\n\t\t\t(void) nvpair_value_nvlist_array(nvp, &val, &nelem);\n\t\t\tARENDER(pctl, nvlist_array, nvl, name, val, nelem);\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t\t(void) fprintf(fp, \" unknown data type (%d)\", type);\n\t\t\tbreak;\n\t\t}\n\t\tnvp = nvlist_next_nvpair(nvl, nvp);\n\t}\n}\n\nvoid\nnvlist_print(FILE *fp, nvlist_t *nvl)\n{\n\tstruct nvlist_prtctl pc;\n\n\tprtctl_defaults(fp, &pc, NULL);\n\tnvlist_print_with_indent(nvl, &pc);\n}\n\nvoid\nnvlist_prt(nvlist_t *nvl, nvlist_prtctl_t pctl)\n{\n\tnvlist_print_with_indent(nvl, pctl);\n}\n\n#define\tNVP(elem, type, vtype, ptype, format) { \\\n\tvtype\tvalue; \\\n\\\n\t(void) nvpair_value_##type(elem, &value); \\\n\t(void) printf(\"%*s%s: \" format \"\\n\", indent, \"\", \\\n\t    nvpair_name(elem), (ptype)value); \\\n}\n\n#define\tNVPA(elem, type, vtype, ptype, format) { \\\n\tuint_t\ti, count; \\\n\tvtype\t*value;  \\\n\\\n\t(void) nvpair_value_##type(elem, &value, &count); \\\n\tfor (i = 0; i < count; i++) { \\\n\t\t(void) printf(\"%*s%s[%d]: \" format \"\\n\", indent, \"\", \\\n\t\t    nvpair_name(elem), i, (ptype)value[i]); \\\n\t} \\\n}\n\n \nvoid\ndump_nvlist(nvlist_t *list, int indent)\n{\n\tnvpair_t\t*elem = NULL;\n\tboolean_t\tbool_value;\n\tnvlist_t\t*nvlist_value;\n\tnvlist_t\t**nvlist_array_value;\n\tuint_t\t\ti, count;\n\n\tif (list == NULL) {\n\t\treturn;\n\t}\n\n\twhile ((elem = nvlist_next_nvpair(list, elem)) != NULL) {\n\t\tswitch (nvpair_type(elem)) {\n\t\tcase DATA_TYPE_BOOLEAN:\n\t\t\t(void) printf(\"%*s%s\\n\", indent, \"\", nvpair_name(elem));\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_BOOLEAN_VALUE:\n\t\t\t(void) nvpair_value_boolean_value(elem, &bool_value);\n\t\t\t(void) printf(\"%*s%s: %s\\n\", indent, \"\",\n\t\t\t    nvpair_name(elem), bool_value ? \"true\" : \"false\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_BYTE:\n\t\t\tNVP(elem, byte, uchar_t, int, \"%u\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_INT8:\n\t\t\tNVP(elem, int8, int8_t, int, \"%d\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_UINT8:\n\t\t\tNVP(elem, uint8, uint8_t, int, \"%u\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_INT16:\n\t\t\tNVP(elem, int16, int16_t, int, \"%d\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_UINT16:\n\t\t\tNVP(elem, uint16, uint16_t, int, \"%u\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_INT32:\n\t\t\tNVP(elem, int32, int32_t, long, \"%ld\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_UINT32:\n\t\t\tNVP(elem, uint32, uint32_t, ulong_t, \"%lu\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_INT64:\n\t\t\tNVP(elem, int64, int64_t, longlong_t, \"%lld\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_UINT64:\n\t\t\tNVP(elem, uint64, uint64_t, u_longlong_t, \"%llu\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_STRING:\n\t\t\tNVP(elem, string, const char *, const char *, \"'%s'\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_BYTE_ARRAY:\n\t\t\tNVPA(elem, byte_array, uchar_t, int, \"%u\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_INT8_ARRAY:\n\t\t\tNVPA(elem, int8_array, int8_t, int, \"%d\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_UINT8_ARRAY:\n\t\t\tNVPA(elem, uint8_array, uint8_t, int, \"%u\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_INT16_ARRAY:\n\t\t\tNVPA(elem, int16_array, int16_t, int, \"%d\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_UINT16_ARRAY:\n\t\t\tNVPA(elem, uint16_array, uint16_t, int, \"%u\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_INT32_ARRAY:\n\t\t\tNVPA(elem, int32_array, int32_t, long, \"%ld\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_UINT32_ARRAY:\n\t\t\tNVPA(elem, uint32_array, uint32_t, ulong_t, \"%lu\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_INT64_ARRAY:\n\t\t\tNVPA(elem, int64_array, int64_t, longlong_t, \"%lld\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_UINT64_ARRAY:\n\t\t\tNVPA(elem, uint64_array, uint64_t, u_longlong_t,\n\t\t\t    \"%llu\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_STRING_ARRAY:\n\t\t\tNVPA(elem, string_array, const char *, const char *,\n\t\t\t    \"'%s'\");\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_NVLIST:\n\t\t\t(void) nvpair_value_nvlist(elem, &nvlist_value);\n\t\t\t(void) printf(\"%*s%s:\\n\", indent, \"\",\n\t\t\t    nvpair_name(elem));\n\t\t\tdump_nvlist(nvlist_value, indent + 4);\n\t\t\tbreak;\n\n\t\tcase DATA_TYPE_NVLIST_ARRAY:\n\t\t\t(void) nvpair_value_nvlist_array(elem,\n\t\t\t    &nvlist_array_value, &count);\n\t\t\tfor (i = 0; i < count; i++) {\n\t\t\t\t(void) printf(\"%*s%s[%u]:\\n\", indent, \"\",\n\t\t\t\t    nvpair_name(elem), i);\n\t\t\t\tdump_nvlist(nvlist_array_value[i], indent + 4);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\t(void) printf(dgettext(TEXT_DOMAIN, \"bad config type \"\n\t\t\t    \"%d for %s\\n\"), nvpair_type(elem),\n\t\t\t    nvpair_name(elem));\n\t\t}\n\t}\n}\n\n \n\n \nint\nnvpair_value_match_regex(nvpair_t *nvp, int ai,\n    const char *value, regex_t *value_regex, const char **ep)\n{\n\tconst char\t*evalue;\n\tuint_t\t\ta_len;\n\tint\t\tsr;\n\n\tif (ep)\n\t\t*ep = NULL;\n\n\tif ((nvp == NULL) || (value == NULL))\n\t\treturn (-1);\t\t \n\n\t \n\tif ((nvpair_type_is_array(nvp) && (ai < 0)) ||\n\t    (!nvpair_type_is_array(nvp) && (ai >= 0)))\n\t\treturn (-1);\t\t \n\n\t \n\tif ((nvpair_type(nvp) != DATA_TYPE_STRING) &&\n\t    (nvpair_type(nvp) != DATA_TYPE_STRING_ARRAY)) {\n\t\tvalue += strspn(value, \" \\t\");\n\t\tevalue = value + strcspn(value, \" \\t\");\n\t\tif (*evalue) {\n\t\t\tif (ep)\n\t\t\t\t*ep = evalue;\n\t\t\treturn (-1);\t \n\t\t}\n\t}\n\n\tsr = EOF;\n\tswitch (nvpair_type(nvp)) {\n\tcase DATA_TYPE_STRING: {\n\t\tconst char *val;\n\n\t\t \n\t\tif (nvpair_value_string(nvp, &val) == 0) {\n\t\t\tif (value_regex) {\n\t\t\t\tif (regexec(value_regex, val,\n\t\t\t\t    (size_t)0, NULL, 0) == 0)\n\t\t\t\t\treturn (1);\t \n\t\t\t} else {\n\t\t\t\tif (strcmp(value, val) == 0)\n\t\t\t\t\treturn (1);\t \n\t\t\t}\n\t\t}\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_STRING_ARRAY: {\n\t\tconst char **val_array;\n\n\t\t \n\t\tif ((nvpair_value_string_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len)) {\n\t\t\tif (value_regex) {\n\t\t\t\tif (regexec(value_regex, val_array[ai],\n\t\t\t\t    (size_t)0, NULL, 0) == 0)\n\t\t\t\t\treturn (1);\n\t\t\t} else {\n\t\t\t\tif (strcmp(value, val_array[ai]) == 0)\n\t\t\t\t\treturn (1);\n\t\t\t}\n\t\t}\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_BYTE: {\n\t\tuchar_t val, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%c\", &val_arg);\n\t\tif ((sr == 1) && (nvpair_value_byte(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_BYTE_ARRAY: {\n\t\tuchar_t *val_array, val_arg;\n\n\n\t\t \n\t\tsr = sscanf(value, \"%c\", &val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_byte_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_INT8: {\n\t\tint8_t val, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi8, &val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_int8(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_INT8_ARRAY: {\n\t\tint8_t *val_array, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi8, &val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_int8_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_UINT8: {\n\t\tuint8_t val, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi8, (int8_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_uint8(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_UINT8_ARRAY: {\n\t\tuint8_t *val_array, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi8, (int8_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_uint8_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_INT16: {\n\t\tint16_t val, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi16, &val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_int16(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_INT16_ARRAY: {\n\t\tint16_t *val_array, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi16, &val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_int16_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_UINT16: {\n\t\tuint16_t val, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi16, (int16_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_uint16(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_UINT16_ARRAY: {\n\t\tuint16_t *val_array, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi16, (int16_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_uint16_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_INT32: {\n\t\tint32_t val, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi32, &val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_int32(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_INT32_ARRAY: {\n\t\tint32_t *val_array, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi32, &val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_int32_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_UINT32: {\n\t\tuint32_t val, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi32, (int32_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_uint32(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_UINT32_ARRAY: {\n\t\tuint32_t *val_array, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi32, (int32_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_uint32_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_INT64: {\n\t\tint64_t val, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi64, &val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_int64(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_INT64_ARRAY: {\n\t\tint64_t *val_array, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi64, &val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_int64_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_UINT64: {\n\t\tuint64_t val_arg, val;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi64, (int64_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_uint64(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_UINT64_ARRAY: {\n\t\tuint64_t *val_array, val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi64, (int64_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_uint64_array(nvp, &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_BOOLEAN_VALUE: {\n\t\tint32_t val_arg;\n\t\tboolean_t val;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi32, (int32_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_boolean_value(nvp, &val) == 0) &&\n\t\t    (val == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_BOOLEAN_ARRAY: {\n\t\tboolean_t *val_array;\n\t\tint32_t val_arg;\n\n\t\t \n\t\tsr = sscanf(value, \"%\"SCNi32, (int32_t *)&val_arg);\n\t\tif ((sr == 1) &&\n\t\t    (nvpair_value_boolean_array(nvp,\n\t\t    &val_array, &a_len) == 0) &&\n\t\t    (ai < a_len) &&\n\t\t    (val_array[ai] == val_arg))\n\t\t\treturn (1);\n\t\tbreak;\n\t}\n\tcase DATA_TYPE_HRTIME:\n\tcase DATA_TYPE_NVLIST:\n\tcase DATA_TYPE_NVLIST_ARRAY:\n\tcase DATA_TYPE_BOOLEAN:\n\tcase DATA_TYPE_DOUBLE:\n\tcase DATA_TYPE_UNKNOWN:\n\tdefault:\n\t\t \n\t\treturn (-1);\t\t \n\t}\n\n\t \n\tif (sr != 1) {\n\t\tif (ep)\n\t\t\t*ep = value;\n\t\treturn (-1);\t\t \n\t}\n\n\treturn (0);\t\t\t \n}\n\nint\nnvpair_value_match(nvpair_t *nvp, int ai, const char *value, const char **ep)\n{\n\treturn (nvpair_value_match_regex(nvp, ai, value, NULL, ep));\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}