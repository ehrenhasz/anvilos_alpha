{
  "module_name": "dklabel.h",
  "hash_id": "07c11f8d239a6cdb27a7584ecbac92072f2e8a94478ad8f5a37a37e0257452ff",
  "original_prompt": "Ingested from zfs-2.2.2/lib/libspl/include/sys/dklabel.h",
  "human_readable_source": " \n \n\n#ifndef _SYS_DKLABEL_H\n#define\t_SYS_DKLABEL_H\n\n\n\n#include <sys/isa_defs.h>\n#include <sys/types32.h>\n\n#ifdef\t__cplusplus\nextern \"C\" {\n#endif\n\n \n#define\tDKL_MAGIC\t0xDABE\t\t \n#define\tFKL_MAGIC\t0xff\t\t \n\n#if defined(_SUNOS_VTOC_16)\n#define\tNDKMAP\t\t16\t\t \n#define\tDK_LABEL_LOC\t1\t\t \n#elif defined(_SUNOS_VTOC_8)\n#define\tNDKMAP\t\t8\t\t \n#define\tDK_LABEL_LOC\t0\t\t \n#else\n#error \"No VTOC format defined.\"\n#endif\n\n#define\tLEN_DKL_ASCII\t128\t\t \n#define\tLEN_DKL_VVOL\t8\t\t \n#define\tDK_LABEL_SIZE\t512\t\t \n#define\tDK_MAX_BLOCKS\t0x7fffffff\t \n\n \n#define\tDK_ACYL\t\t2\n\n \n\n \nstruct dk_map {\n\tuint64_t\tdkl_cylno;\t \n\tuint64_t\tdkl_nblk;\t \n\t\t\t\t\t \n};\n\n \nstruct dk_map32 {\n\tdaddr32_t\tdkl_cylno;\t \n\tdaddr32_t\tdkl_nblk;\t \n\t\t\t\t\t \n};\n\n \nstruct dk_map2 {\n\tuint16_t\tp_tag;\t\t \n\tuint16_t\tp_flag;\t\t \n};\n\nstruct dkl_partition    {\n\tuint16_t\tp_tag;\t\t \n\tuint16_t\tp_flag;\t\t \n\tdaddr32_t\tp_start;\t \n\tint32_t\t\tp_size;\t\t \n};\n\n\n \n\nstruct dk_vtoc {\n#if defined(_SUNOS_VTOC_16)\n\tuint32_t v_bootinfo[3];\t\t \n\tuint32_t v_sanity;\t\t \n\tuint32_t v_version;\t\t \n\tchar    v_volume[LEN_DKL_VVOL];\t \n\tuint16_t v_sectorsz;\t\t \n\tuint16_t v_nparts;\t\t \n\tuint32_t v_reserved[10];\t \n\tstruct dkl_partition v_part[NDKMAP];\t \n\ttime32_t timestamp[NDKMAP];\t \n\tchar    v_asciilabel[LEN_DKL_ASCII];\t \n#elif defined(_SUNOS_VTOC_8)\n\tuint32_t\tv_version;\t\t \n\tchar\t\tv_volume[LEN_DKL_VVOL];\t \n\tuint16_t\tv_nparts;\t\t \n\tstruct dk_map2\tv_part[NDKMAP];\t\t \n\tuint32_t\tv_bootinfo[3];\t\t \n\tuint32_t\tv_sanity;\t\t \n\tuint32_t\tv_reserved[10];\t\t \n\ttime32_t\tv_timestamp[NDKMAP];\t \n#else\n#error \"No VTOC format defined.\"\n#endif\n};\n\n \n#if defined(_SUNOS_VTOC_16)\n#define\tLEN_DKL_PAD\t(DK_LABEL_SIZE - \\\n\t\t\t    ((sizeof (struct dk_vtoc) + \\\n\t\t\t    (4 * sizeof (uint32_t)) + \\\n\t\t\t    (12 * sizeof (uint16_t)) + \\\n\t\t\t    (2 * (sizeof (uint16_t))))))\n#elif defined(_SUNOS_VTOC_8)\n#define\tLEN_DKL_PAD\t(DK_LABEL_SIZE \\\n\t\t\t    - ((LEN_DKL_ASCII) + \\\n\t\t\t    (sizeof (struct dk_vtoc)) + \\\n\t\t\t    (sizeof (struct dk_map32)  * NDKMAP) + \\\n\t\t\t    (14 * (sizeof (uint16_t))) + \\\n\t\t\t    (2 * (sizeof (uint16_t)))))\n#else\n#error \"No VTOC format defined.\"\n#endif\n\n\nstruct dk_label {\n#if defined(_SUNOS_VTOC_16)\n\tstruct  dk_vtoc dkl_vtoc;\t \n\tuint32_t\tdkl_pcyl;\t \n\tuint32_t\tdkl_ncyl;\t \n\tuint16_t\tdkl_acyl;\t \n\tuint16_t\tdkl_bcyl;\t \n\tuint32_t\tdkl_nhead;\t \n\tuint32_t\tdkl_nsect;\t \n\tuint16_t\tdkl_intrlv;\t \n\tuint16_t\tdkl_skew;\t \n\tuint16_t\tdkl_apc;\t \n\tuint16_t\tdkl_rpm;\t \n\tuint16_t\tdkl_write_reinstruct;\t \n\tuint16_t\tdkl_read_reinstruct;\t \n\tuint16_t\tdkl_extra[4];\t \n\tchar\t\tdkl_pad[LEN_DKL_PAD];\t \n#elif defined(_SUNOS_VTOC_8)\n\tchar\t\tdkl_asciilabel[LEN_DKL_ASCII];  \n\tstruct dk_vtoc\tdkl_vtoc;\t \n\tuint16_t\tdkl_write_reinstruct;\t \n\tuint16_t\tdkl_read_reinstruct;\t \n\tchar\t\tdkl_pad[LEN_DKL_PAD];  \n\tuint16_t\tdkl_rpm;\t \n\tuint16_t\tdkl_pcyl;\t \n\tuint16_t\tdkl_apc;\t \n\tuint16_t\tdkl_obs1;\t \n\tuint16_t\tdkl_obs2;\t \n\tuint16_t\tdkl_intrlv;\t \n\tuint16_t\tdkl_ncyl;\t \n\tuint16_t\tdkl_acyl;\t \n\tuint16_t\tdkl_nhead;\t \n\tuint16_t\tdkl_nsect;\t \n\tuint16_t\tdkl_obs3;\t \n\tuint16_t\tdkl_obs4;\t \n\tstruct dk_map32\tdkl_map[NDKMAP];  \n#else\n#error \"No VTOC format defined.\"\n#endif\n\tuint16_t\tdkl_magic;\t \n\tuint16_t\tdkl_cksum;\t \n};\n\n#if defined(_SUNOS_VTOC_16)\n#define\tdkl_asciilabel\tdkl_vtoc.v_asciilabel\n#define\tv_timestamp\ttimestamp\n\n#elif defined(_SUNOS_VTOC_8)\n\n \n#define\tdkl_gap1\tdkl_obs1\t \n#define\tdkl_gap2\tdkl_obs2\t \n#define\tdkl_bhead\tdkl_obs3\t \n#define\tdkl_ppart\tdkl_obs4\t \n#else\n#error \"No VTOC format defined.\"\n#endif\n\nstruct fk_label {\t\t\t \n\tuchar_t  fkl_type;\n\tuchar_t  fkl_magich;\n\tuchar_t  fkl_magicl;\n\tuchar_t  filler;\n};\n\n \n#define\tDK_DEVID_BLKSIZE\t(512)\n#define\tDK_DEVID_SIZE\t\t(DK_DEVID_BLKSIZE - ((sizeof (uchar_t) * 7)))\n#define\tDK_DEVID_REV_MSB\t(0)\n#define\tDK_DEVID_REV_LSB\t(1)\n\nstruct dk_devid {\n\tuchar_t\tdkd_rev_hi;\t\t\t \n\tuchar_t\tdkd_rev_lo;\t\t\t \n\tuchar_t\tdkd_flags;\t\t\t \n\tuchar_t\tdkd_devid[DK_DEVID_SIZE];\t \n\tuchar_t\tdkd_checksum3;\t\t\t \n\tuchar_t\tdkd_checksum2;\n\tuchar_t\tdkd_checksum1;\n\tuchar_t\tdkd_checksum0;\t\t\t \n};\n\n#define\tDKD_GETCHKSUM(dkd)\t((dkd)->dkd_checksum3 << 24) + \\\n\t\t\t\t((dkd)->dkd_checksum2 << 16) + \\\n\t\t\t\t((dkd)->dkd_checksum1 << 8)  + \\\n\t\t\t\t((dkd)->dkd_checksum0)\n\n#define\tDKD_FORMCHKSUM(c, dkd)\t(dkd)->dkd_checksum3 = hibyte(hiword((c))); \\\n\t\t\t\t(dkd)->dkd_checksum2 = lobyte(hiword((c))); \\\n\t\t\t\t(dkd)->dkd_checksum1 = hibyte(loword((c))); \\\n\t\t\t\t(dkd)->dkd_checksum0 = lobyte(loword((c)));\n#ifdef\t__cplusplus\n}\n#endif\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}