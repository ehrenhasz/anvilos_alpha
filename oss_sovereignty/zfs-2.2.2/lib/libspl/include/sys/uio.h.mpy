{
  "module_name": "uio.h",
  "hash_id": "a78c6de9384449d3e11ef553cd2f37888ebb8120ee446c56b56681e60944cc7d",
  "original_prompt": "Ingested from zfs-2.2.2/lib/libspl/include/sys/uio.h",
  "human_readable_source": " \n \n\n \n \n\n \n\n#ifndef\t_LIBSPL_SYS_UIO_H\n#define\t_LIBSPL_SYS_UIO_H\n\n#include <sys/types.h>\n#include_next <sys/uio.h>\n\n#ifdef __APPLE__\n#include <sys/_types/_iovec_t.h>\n#endif\n\n#include <stdint.h>\ntypedef struct iovec iovec_t;\n\n#if defined(__linux__) || defined(__APPLE__)\ntypedef enum zfs_uio_rw {\n\tUIO_READ =\t0,\n\tUIO_WRITE =\t1,\n} zfs_uio_rw_t;\n\ntypedef enum zfs_uio_seg {\n\tUIO_USERSPACE =\t0,\n\tUIO_SYSSPACE =\t1,\n} zfs_uio_seg_t;\n\n#elif defined(__FreeBSD__)\ntypedef enum uio_seg  zfs_uio_seg_t;\n#endif\n\ntypedef struct zfs_uio {\n\tstruct iovec\t*uio_iov;\t \n\tint\t\tuio_iovcnt;\t \n\toffset_t\tuio_loffset;\t \n\tzfs_uio_seg_t\tuio_segflg;\t \n\tuint16_t\tuio_fmode;\t \n\tuint16_t\tuio_extflg;\t \n\tssize_t\t\tuio_resid;\t \n} zfs_uio_t;\n\n#define\tzfs_uio_segflg(uio)\t\t(uio)->uio_segflg\n#define\tzfs_uio_offset(uio)\t\t(uio)->uio_loffset\n#define\tzfs_uio_resid(uio)\t\t(uio)->uio_resid\n#define\tzfs_uio_iovcnt(uio)\t\t(uio)->uio_iovcnt\n#define\tzfs_uio_iovlen(uio, idx)\t(uio)->uio_iov[(idx)].iov_len\n#define\tzfs_uio_iovbase(uio, idx)\t(uio)->uio_iov[(idx)].iov_base\n\nstatic inline void\nzfs_uio_iov_at_index(zfs_uio_t *uio, uint_t idx, void **base, uint64_t *len)\n{\n\t*base = zfs_uio_iovbase(uio, idx);\n\t*len = zfs_uio_iovlen(uio, idx);\n}\n\nstatic inline void\nzfs_uio_advance(zfs_uio_t *uio, size_t size)\n{\n\tuio->uio_resid -= size;\n\tuio->uio_loffset += size;\n}\n\nstatic inline offset_t\nzfs_uio_index_at_offset(zfs_uio_t *uio, offset_t off, uint_t *vec_idx)\n{\n\t*vec_idx = 0;\n\twhile (*vec_idx < (uint_t)zfs_uio_iovcnt(uio) &&\n\t    off >= (offset_t)zfs_uio_iovlen(uio, *vec_idx)) {\n\t\toff -= zfs_uio_iovlen(uio, *vec_idx);\n\t\t(*vec_idx)++;\n\t}\n\n\treturn (off);\n}\n\n#endif\t \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}