{
  "module_name": "zfs_ids_to_path.c",
  "hash_id": "2e06750e7206dad644cec2c1a0ae53141871ccc69f17daf5d889f63559414c2f",
  "original_prompt": "Ingested from zfs-2.2.2/cmd/zfs_ids_to_path.c",
  "human_readable_source": " \n \n#include <libintl.h>\n#include <unistd.h>\n#include <sys/types.h>\n#include <stdint.h>\n#include <libzfs.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <errno.h>\n\nlibzfs_handle_t *g_zfs;\n\nstatic void\nusage(int err)\n{\n\tfprintf(stderr, \"Usage: zfs_ids_to_path [-v] <pool> <objset id> \"\n\t    \"<object id>\\n\");\n\texit(err);\n}\n\nint\nmain(int argc, char **argv)\n{\n\tboolean_t verbose = B_FALSE;\n\tint c;\n\twhile ((c = getopt(argc, argv, \"v\")) != -1) {\n\t\tswitch (c) {\n\t\tcase 'v':\n\t\t\tverbose = B_TRUE;\n\t\t\tbreak;\n\t\t}\n\t}\n\targc -= optind;\n\targv += optind;\n\n\tif (argc != 3) {\n\t\t(void) fprintf(stderr, \"Incorrect number of arguments: %d\\n\",\n\t\t    argc);\n\t\tusage(1);\n\t}\n\n\tuint64_t objset, object;\n\tif (sscanf(argv[1], \"%llu\", (u_longlong_t *)&objset) != 1) {\n\t\t(void) fprintf(stderr, \"Invalid objset id: %s\\n\", argv[1]);\n\t\tusage(2);\n\t}\n\tif (sscanf(argv[2], \"%llu\", (u_longlong_t *)&object) != 1) {\n\t\t(void) fprintf(stderr, \"Invalid object id: %s\\n\", argv[2]);\n\t\tusage(3);\n\t}\n\tif ((g_zfs = libzfs_init()) == NULL) {\n\t\t(void) fprintf(stderr, \"%s\\n\", libzfs_error_init(errno));\n\t\treturn (4);\n\t}\n\tzpool_handle_t *pool = zpool_open(g_zfs, argv[0]);\n\tif (pool == NULL) {\n\t\tfprintf(stderr, \"Could not open pool %s\\n\", argv[0]);\n\t\tlibzfs_fini(g_zfs);\n\t\treturn (5);\n\t}\n\n\tchar pathname[PATH_MAX * 2];\n\tif (verbose) {\n\t\tzpool_obj_to_path_ds(pool, objset, object, pathname,\n\t\t    sizeof (pathname));\n\t} else {\n\t\tzpool_obj_to_path(pool, objset, object, pathname,\n\t\t    sizeof (pathname));\n\t}\n\tprintf(\"%s\\n\", pathname);\n\tzpool_close(pool);\n\tlibzfs_fini(g_zfs);\n\treturn (0);\n}\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}