{
  "module_name": "autogen.sh",
  "hash_id": "d20bf9492523382bec6050b22a66d4c532d246009d44d97317df5ec25f5b732f",
  "original_prompt": "Ingested from zfs-2.2.2/autogen.sh",
  "human_readable_source": "#!/bin/sh\n[ \"${0%/*}\" = \"$0\" ] || cd \"${0%/*}\" || exit\n\n# %reldir%/%canon_reldir% (%D%/%C%) only appeared in automake 1.14, but RHEL/CentOS 7 has 1.13.4\n# This is an (overly) simplistic preprocessor that papers around this for the duration of the generation step,\n# and can be removed once support for CentOS 7 is dropped\nautomake --version | awk '{print $NF; exit}' | (\n\tIFS=. read -r AM_MAJ AM_MIN _\n\t[ \"$AM_MAJ\" -gt 1 ] || [ \"$AM_MIN\" -ge 14 ]\n) || {\n\tprocess_root() {\n\t\troot=\"$1\"; shift\n\n\t\tgrep -q '%[CD]%' \"$root/Makefile.am\" || return\n\t\tfind \"$root\" -name Makefile.am \"$@\" | while read -r dir; do\n\t\t\tdir=\"${dir%/Makefile.am}\"\n\t\t\tgrep -q '%[CD]%' \"$dir/Makefile.am\" || continue\n\n\t\t\treldir=\"${dir#\"$root\"}\"\n\t\t\treldir=\"${reldir#/}\"\n\n\t\t\tcanon_reldir=\"$(printf '%s' \"$reldir\" | tr -C 'a-zA-Z0-9@_' '_')\"\n\n\t\t\treldir_slash=\"$reldir/\"\n\t\t\tcanon_reldir_slash=\"${canon_reldir}_\"\n\t\t\t[ -z \"$reldir\" ] && reldir_slash=\n\t\t\t[ -z \"$reldir\" ] && canon_reldir_slash=\n\n\t\t\techo \"$dir/Makefile.am\" >&3\n\t\t\tsed -i~ -e \"s:%D%/:$reldir_slash:g\"       -e \"s:%D%:$reldir:g\" \\\n\t\t\t        -e \"s:%C%_:$canon_reldir_slash:g\" -e \"s:%C%:$canon_reldir:g\" \"$dir/Makefile.am\"\n\t\tdone 3>>\"$substituted_files\"\n\t}\n\n\trollback() {\n\t\twhile read -r f; do\n\t\t\tmv \"$f~\" \"$f\"\n\t\tdone < \"$substituted_files\"\n\t\trm -f \"$substituted_files\"\n\t}\n\n\n\techo \"Automake <1.14; papering over missing %reldir%/%canon_reldir% support\" >&2\n\n\tsubstituted_files=\"$(mktemp)\"\n\ttrap rollback EXIT\n\n\troots=\"$(sed '/Makefile$/!d;/module/d;s:^\\s*:./:;s:/Makefile::;/^\\.$/d' configure.ac)\"\n\n\tIFS=\"\n\"\n\tfor root in $roots; do\n\t\troot=\"${root#./}\"\n\t\tprocess_root \"$root\"\n\tdone\n\n\tset -f\n\t# shellcheck disable=SC2086,SC2046\n\tprocess_root . $(printf '!\\n-path\\n%s/*\\n' $roots)\n}\n\nautoreconf -fiv && rm -rf autom4te.cache\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}