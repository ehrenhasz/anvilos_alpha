{
  "module_name": "vdev_raidz_math_avx512f.c",
  "hash_id": "bc02f3fe6078942413ff6124e7fd851579eb4f6f3615465d253fc01ca683d5f3",
  "original_prompt": "Ingested from zfs-2.2.2/module/zfs/vdev_raidz_math_avx512f.c",
  "human_readable_source": " \n \n\n#include <sys/isa_defs.h>\n\n#if defined(__x86_64) && defined(HAVE_AVX512F)\n\n#include <sys/types.h>\n#include <sys/simd.h>\n#include <sys/debug.h>\n\n#ifdef __linux__\n#define\t__asm __asm__ __volatile__\n#endif\n\n#define\t_REG_CNT(_0, _1, _2, _3, _4, _5, _6, _7, N, ...) N\n#define\tREG_CNT(r...) _REG_CNT(r, 8, 7, 6, 5, 4, 3, 2, 1)\n\n#define\tVR0_(REG, ...) \"zmm\"#REG\n#define\tVR1_(_1, REG, ...) \"zmm\"#REG\n#define\tVR2_(_1, _2, REG, ...) \"zmm\"#REG\n#define\tVR3_(_1, _2, _3, REG, ...) \"zmm\"#REG\n#define\tVR4_(_1, _2, _3, _4, REG, ...) \"zmm\"#REG\n#define\tVR5_(_1, _2, _3, _4, _5, REG, ...) \"zmm\"#REG\n#define\tVR6_(_1, _2, _3, _4, _5, _6, REG, ...) \"zmm\"#REG\n#define\tVR7_(_1, _2, _3, _4, _5, _6, _7, REG, ...) \"zmm\"#REG\n\n#define\tVR0(r...) VR0_(r)\n#define\tVR1(r...) VR1_(r)\n#define\tVR2(r...) VR2_(r, 1)\n#define\tVR3(r...) VR3_(r, 1, 2)\n#define\tVR4(r...) VR4_(r, 1, 2)\n#define\tVR5(r...) VR5_(r, 1, 2, 3)\n#define\tVR6(r...) VR6_(r, 1, 2, 3, 4)\n#define\tVR7(r...) VR7_(r, 1, 2, 3, 4, 5)\n\n#define\tVRy0_(REG, ...) \"ymm\"#REG\n#define\tVRy1_(_1, REG, ...) \"ymm\"#REG\n#define\tVRy2_(_1, _2, REG, ...) \"ymm\"#REG\n#define\tVRy3_(_1, _2, _3, REG, ...) \"ymm\"#REG\n#define\tVRy4_(_1, _2, _3, _4, REG, ...) \"ymm\"#REG\n#define\tVRy5_(_1, _2, _3, _4, _5, REG, ...) \"ymm\"#REG\n#define\tVRy6_(_1, _2, _3, _4, _5, _6, REG, ...) \"ymm\"#REG\n#define\tVRy7_(_1, _2, _3, _4, _5, _6, _7, REG, ...) \"ymm\"#REG\n\n#define\tVRy0(r...) VRy0_(r)\n#define\tVRy1(r...) VRy1_(r)\n#define\tVRy2(r...) VRy2_(r, 1)\n#define\tVRy3(r...) VRy3_(r, 1, 2)\n#define\tVRy4(r...) VRy4_(r, 1, 2)\n#define\tVRy5(r...) VRy5_(r, 1, 2, 3)\n#define\tVRy6(r...) VRy6_(r, 1, 2, 3, 4)\n#define\tVRy7(r...) VRy7_(r, 1, 2, 3, 4, 5)\n\n#define\tR_01(REG1, REG2, ...) REG1, REG2\n#define\t_R_23(_0, _1, REG2, REG3, ...) REG2, REG3\n#define\tR_23(REG...) _R_23(REG, 1, 2, 3)\n\n#define\tELEM_SIZE 64\n\ntypedef struct v {\n\tuint8_t b[ELEM_SIZE] __attribute__((aligned(ELEM_SIZE)));\n} v_t;\n\n\n#define\tXOR_ACC(src, r...)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\t\\\n\t\t__asm(\t\t\t\t\t\t\t\\\n\t\t    \"vpxorq 0x00(%[SRC]), %%\" VR0(r)\", %%\" VR0(r) \"\\n\"\t\\\n\t\t    \"vpxorq 0x40(%[SRC]), %%\" VR1(r)\", %%\" VR1(r) \"\\n\"\t\\\n\t\t    \"vpxorq 0x80(%[SRC]), %%\" VR2(r)\", %%\" VR2(r) \"\\n\"\t\\\n\t\t    \"vpxorq 0xc0(%[SRC]), %%\" VR3(r)\", %%\" VR3(r) \"\\n\"\t\\\n\t\t    : : [SRC] \"r\" (src));\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n}\n\n#define\tXOR(r...)\t\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\t\\\n\tcase 8:\t\t\t\t\t\t\t\t\\\n\t\t__asm(\t\t\t\t\t\t\t\\\n\t\t    \"vpxorq %\" VR0(r) \", %\" VR4(r)\", %\" VR4(r) \"\\n\"\t\\\n\t\t    \"vpxorq %\" VR1(r) \", %\" VR5(r)\", %\" VR5(r) \"\\n\"\t\\\n\t\t    \"vpxorq %\" VR2(r) \", %\" VR6(r)\", %\" VR6(r) \"\\n\"\t\\\n\t\t    \"vpxorq %\" VR3(r) \", %\" VR7(r)\", %\" VR7(r));\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\t\\\n\t\t__asm(\t\t\t\t\t\t\t\\\n\t\t    \"vpxorq %\" VR0(r) \", %\" VR2(r)\", %\" VR2(r) \"\\n\"\t\\\n\t\t    \"vpxorq %\" VR1(r) \", %\" VR3(r)\", %\" VR3(r));\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n}\n\n\n#define\tZERO(r...)\tXOR(r, r)\n\n\n#define\tCOPY(r...) \t\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\t\\\n\tcase 8:\t\t\t\t\t\t\t\t\\\n\t\t__asm(\t\t\t\t\t\t\t\\\n\t\t    \"vmovdqa64 %\" VR0(r) \", %\" VR4(r) \"\\n\"\t\t\\\n\t\t    \"vmovdqa64 %\" VR1(r) \", %\" VR5(r) \"\\n\"\t\t\\\n\t\t    \"vmovdqa64 %\" VR2(r) \", %\" VR6(r) \"\\n\"\t\t\\\n\t\t    \"vmovdqa64 %\" VR3(r) \", %\" VR7(r));\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\t\\\n\t\t__asm(\t\t\t\t\t\t\t\\\n\t\t    \"vmovdqa64 %\" VR0(r) \", %\" VR2(r) \"\\n\"\t\t\\\n\t\t    \"vmovdqa64 %\" VR1(r) \", %\" VR3(r));\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n}\n\n#define\tLOAD(src, r...) \t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\t\\\n\t\t__asm(\t\t\t\t\t\t\t\\\n\t\t    \"vmovdqa64 0x00(%[SRC]), %%\" VR0(r) \"\\n\"\t\t\\\n\t\t    \"vmovdqa64 0x40(%[SRC]), %%\" VR1(r) \"\\n\"\t\t\\\n\t\t    \"vmovdqa64 0x80(%[SRC]), %%\" VR2(r) \"\\n\"\t\t\\\n\t\t    \"vmovdqa64 0xc0(%[SRC]), %%\" VR3(r) \"\\n\"\t\t\\\n\t\t    : : [SRC] \"r\" (src));\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n}\n\n#define\tSTORE(dst, r...)   \t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\t\\\n\t\t__asm(\t\t\t\t\t\t\t\\\n\t\t    \"vmovdqa64 %%\" VR0(r) \", 0x00(%[DST])\\n\"\t\t\\\n\t\t    \"vmovdqa64 %%\" VR1(r) \", 0x40(%[DST])\\n\"\t\t\\\n\t\t    \"vmovdqa64 %%\" VR2(r) \", 0x80(%[DST])\\n\"\t\t\\\n\t\t    \"vmovdqa64 %%\" VR3(r) \", 0xc0(%[DST])\\n\"\t\t\\\n\t\t    : : [DST] \"r\" (dst));\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n}\n\n#define\tMUL2_SETUP() \t\t\t\t\t\t\t\\\n{   \t\t\t\t\t\t\t\t\t\\\n\t__asm(\"vmovq %0,   %%xmm31\" :: \"r\"(0x1d1d1d1d1d1d1d1d));\t\\\n\t__asm(\"vpbroadcastq %xmm31, %zmm31\");\t\t\t\t\\\n\t__asm(\"vmovq %0,   %%xmm30\" :: \"r\"(0x8080808080808080));\t\\\n\t__asm(\"vpbroadcastq %xmm30, %zmm30\");\t\t\t\t\\\n\t__asm(\"vmovq %0,   %%xmm29\" :: \"r\"(0xfefefefefefefefe));\t\\\n\t__asm(\"vpbroadcastq %xmm29, %zmm29\");\t\t\t\t\\\n}\n\n#define\t_MUL2(r...) \t\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tswitch\t(REG_CNT(r)) {\t\t\t\t\t\t\\\n\tcase 2:\t\t\t\t\t\t\t\t\\\n\t\t__asm(\t\t\t\t\t\t\t\\\n\t\t    \"vpandq   %\" VR0(r)\", %zmm30, %zmm26\\n\"\t\t\\\n\t\t    \"vpandq   %\" VR1(r)\", %zmm30, %zmm25\\n\"\t\t\\\n\t\t    \"vpsrlq   $7, %zmm26, %zmm28\\n\"\t\t\t\\\n\t\t    \"vpsrlq   $7, %zmm25, %zmm27\\n\"\t\t\t\\\n\t\t    \"vpsllq   $1, %zmm26, %zmm26\\n\"\t\t\t\\\n\t\t    \"vpsllq   $1, %zmm25, %zmm25\\n\"\t\t\t\\\n\t\t    \"vpsubq   %zmm28, %zmm26, %zmm26\\n\"\t\t\t\\\n\t\t    \"vpsubq   %zmm27, %zmm25, %zmm25\\n\"\t\t\t\\\n\t\t    \"vpsllq   $1, %\" VR0(r)\", %\" VR0(r) \"\\n\"\t\t\\\n\t\t    \"vpsllq   $1, %\" VR1(r)\", %\" VR1(r) \"\\n\"\t\t\\\n\t\t    \"vpandq   %zmm26, %zmm31, %zmm26\\n\" \t\t\\\n\t\t    \"vpandq   %zmm25, %zmm31, %zmm25\\n\" \t\t\\\n\t\t    \"vpternlogd $0x6c,%zmm29, %zmm26, %\" VR0(r) \"\\n\"\t\\\n\t\t    \"vpternlogd $0x6c,%zmm29, %zmm25, %\" VR1(r));\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\t\\\n\t\tVERIFY(0);\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n}\n\n#define\tMUL2(r...)\t\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\t\\\n\t    _MUL2(R_01(r));\t\t\t\t\t\t\\\n\t    _MUL2(R_23(r));\t\t\t\t\t\t\\\n\t    break;\t\t\t\t\t\t\t\\\n\tcase 2:\t\t\t\t\t\t\t\t\\\n\t    _MUL2(r);\t\t\t\t\t\t\t\\\n\t    break;\t\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n}\n\n#define\tMUL4(r...)\t\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tMUL2(r);\t\t\t\t\t\t\t\\\n\tMUL2(r);\t\t\t\t\t\t\t\\\n}\n\n\n \n\n#define\t_mul_x2_in\t21, 22\n#define\t_mul_x2_acc\t23, 24\n\n#define\t_MUL_PARAM(x, in, acc)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tif (x & 0x01) {\tCOPY(in, acc); } else { ZERO(acc); }\t\t\\\n\tif (x & 0xfe) { MUL2(in); }\t\t\t\t\t\\\n\tif (x & 0x02) { XOR(in, acc); }\t\t\t\t\t\\\n\tif (x & 0xfc) { MUL2(in); }\t\t\t\t\t\\\n\tif (x & 0x04) { XOR(in, acc); }\t\t\t\t\t\\\n\tif (x & 0xf8) { MUL2(in); }\t\t\t\t\t\\\n\tif (x & 0x08) { XOR(in, acc); }\t\t\t\t\t\\\n\tif (x & 0xf0) { MUL2(in); }\t\t\t\t\t\\\n\tif (x & 0x10) { XOR(in, acc); }\t\t\t\t\t\\\n\tif (x & 0xe0) { MUL2(in); }\t\t\t\t\t\\\n\tif (x & 0x20) { XOR(in, acc); }\t\t\t\t\t\\\n\tif (x & 0xc0) { MUL2(in); }\t\t\t\t\t\\\n\tif (x & 0x40) { XOR(in, acc); }\t\t\t\t\t\\\n\tif (x & 0x80) { MUL2(in); XOR(in, acc); }\t\t\t\\\n}\n\n#define\tMUL_x2_DEFINE(x)\t\t\t\t\t\t\\\nstatic void \t\t\t\t\t\t\t\t\\\nmul_x2_ ## x(void) { _MUL_PARAM(x, _mul_x2_in, _mul_x2_acc); }\n\n\nMUL_x2_DEFINE(0); MUL_x2_DEFINE(1); MUL_x2_DEFINE(2); MUL_x2_DEFINE(3);\nMUL_x2_DEFINE(4); MUL_x2_DEFINE(5); MUL_x2_DEFINE(6); MUL_x2_DEFINE(7);\nMUL_x2_DEFINE(8); MUL_x2_DEFINE(9); MUL_x2_DEFINE(10); MUL_x2_DEFINE(11);\nMUL_x2_DEFINE(12); MUL_x2_DEFINE(13); MUL_x2_DEFINE(14); MUL_x2_DEFINE(15);\nMUL_x2_DEFINE(16); MUL_x2_DEFINE(17); MUL_x2_DEFINE(18); MUL_x2_DEFINE(19);\nMUL_x2_DEFINE(20); MUL_x2_DEFINE(21); MUL_x2_DEFINE(22); MUL_x2_DEFINE(23);\nMUL_x2_DEFINE(24); MUL_x2_DEFINE(25); MUL_x2_DEFINE(26); MUL_x2_DEFINE(27);\nMUL_x2_DEFINE(28); MUL_x2_DEFINE(29); MUL_x2_DEFINE(30); MUL_x2_DEFINE(31);\nMUL_x2_DEFINE(32); MUL_x2_DEFINE(33); MUL_x2_DEFINE(34); MUL_x2_DEFINE(35);\nMUL_x2_DEFINE(36); MUL_x2_DEFINE(37); MUL_x2_DEFINE(38); MUL_x2_DEFINE(39);\nMUL_x2_DEFINE(40); MUL_x2_DEFINE(41); MUL_x2_DEFINE(42); MUL_x2_DEFINE(43);\nMUL_x2_DEFINE(44); MUL_x2_DEFINE(45); MUL_x2_DEFINE(46); MUL_x2_DEFINE(47);\nMUL_x2_DEFINE(48); MUL_x2_DEFINE(49); MUL_x2_DEFINE(50); MUL_x2_DEFINE(51);\nMUL_x2_DEFINE(52); MUL_x2_DEFINE(53); MUL_x2_DEFINE(54); MUL_x2_DEFINE(55);\nMUL_x2_DEFINE(56); MUL_x2_DEFINE(57); MUL_x2_DEFINE(58); MUL_x2_DEFINE(59);\nMUL_x2_DEFINE(60); MUL_x2_DEFINE(61); MUL_x2_DEFINE(62); MUL_x2_DEFINE(63);\nMUL_x2_DEFINE(64); MUL_x2_DEFINE(65); MUL_x2_DEFINE(66); MUL_x2_DEFINE(67);\nMUL_x2_DEFINE(68); MUL_x2_DEFINE(69); MUL_x2_DEFINE(70); MUL_x2_DEFINE(71);\nMUL_x2_DEFINE(72); MUL_x2_DEFINE(73); MUL_x2_DEFINE(74); MUL_x2_DEFINE(75);\nMUL_x2_DEFINE(76); MUL_x2_DEFINE(77); MUL_x2_DEFINE(78); MUL_x2_DEFINE(79);\nMUL_x2_DEFINE(80); MUL_x2_DEFINE(81); MUL_x2_DEFINE(82); MUL_x2_DEFINE(83);\nMUL_x2_DEFINE(84); MUL_x2_DEFINE(85); MUL_x2_DEFINE(86); MUL_x2_DEFINE(87);\nMUL_x2_DEFINE(88); MUL_x2_DEFINE(89); MUL_x2_DEFINE(90); MUL_x2_DEFINE(91);\nMUL_x2_DEFINE(92); MUL_x2_DEFINE(93); MUL_x2_DEFINE(94); MUL_x2_DEFINE(95);\nMUL_x2_DEFINE(96); MUL_x2_DEFINE(97); MUL_x2_DEFINE(98); MUL_x2_DEFINE(99);\nMUL_x2_DEFINE(100); MUL_x2_DEFINE(101); MUL_x2_DEFINE(102); MUL_x2_DEFINE(103);\nMUL_x2_DEFINE(104); MUL_x2_DEFINE(105); MUL_x2_DEFINE(106); MUL_x2_DEFINE(107);\nMUL_x2_DEFINE(108); MUL_x2_DEFINE(109); MUL_x2_DEFINE(110); MUL_x2_DEFINE(111);\nMUL_x2_DEFINE(112); MUL_x2_DEFINE(113); MUL_x2_DEFINE(114); MUL_x2_DEFINE(115);\nMUL_x2_DEFINE(116); MUL_x2_DEFINE(117); MUL_x2_DEFINE(118); MUL_x2_DEFINE(119);\nMUL_x2_DEFINE(120); MUL_x2_DEFINE(121); MUL_x2_DEFINE(122); MUL_x2_DEFINE(123);\nMUL_x2_DEFINE(124); MUL_x2_DEFINE(125); MUL_x2_DEFINE(126); MUL_x2_DEFINE(127);\nMUL_x2_DEFINE(128); MUL_x2_DEFINE(129); MUL_x2_DEFINE(130); MUL_x2_DEFINE(131);\nMUL_x2_DEFINE(132); MUL_x2_DEFINE(133); MUL_x2_DEFINE(134); MUL_x2_DEFINE(135);\nMUL_x2_DEFINE(136); MUL_x2_DEFINE(137); MUL_x2_DEFINE(138); MUL_x2_DEFINE(139);\nMUL_x2_DEFINE(140); MUL_x2_DEFINE(141); MUL_x2_DEFINE(142); MUL_x2_DEFINE(143);\nMUL_x2_DEFINE(144); MUL_x2_DEFINE(145); MUL_x2_DEFINE(146); MUL_x2_DEFINE(147);\nMUL_x2_DEFINE(148); MUL_x2_DEFINE(149); MUL_x2_DEFINE(150); MUL_x2_DEFINE(151);\nMUL_x2_DEFINE(152); MUL_x2_DEFINE(153); MUL_x2_DEFINE(154); MUL_x2_DEFINE(155);\nMUL_x2_DEFINE(156); MUL_x2_DEFINE(157); MUL_x2_DEFINE(158); MUL_x2_DEFINE(159);\nMUL_x2_DEFINE(160); MUL_x2_DEFINE(161); MUL_x2_DEFINE(162); MUL_x2_DEFINE(163);\nMUL_x2_DEFINE(164); MUL_x2_DEFINE(165); MUL_x2_DEFINE(166); MUL_x2_DEFINE(167);\nMUL_x2_DEFINE(168); MUL_x2_DEFINE(169); MUL_x2_DEFINE(170); MUL_x2_DEFINE(171);\nMUL_x2_DEFINE(172); MUL_x2_DEFINE(173); MUL_x2_DEFINE(174); MUL_x2_DEFINE(175);\nMUL_x2_DEFINE(176); MUL_x2_DEFINE(177); MUL_x2_DEFINE(178); MUL_x2_DEFINE(179);\nMUL_x2_DEFINE(180); MUL_x2_DEFINE(181); MUL_x2_DEFINE(182); MUL_x2_DEFINE(183);\nMUL_x2_DEFINE(184); MUL_x2_DEFINE(185); MUL_x2_DEFINE(186); MUL_x2_DEFINE(187);\nMUL_x2_DEFINE(188); MUL_x2_DEFINE(189); MUL_x2_DEFINE(190); MUL_x2_DEFINE(191);\nMUL_x2_DEFINE(192); MUL_x2_DEFINE(193); MUL_x2_DEFINE(194); MUL_x2_DEFINE(195);\nMUL_x2_DEFINE(196); MUL_x2_DEFINE(197); MUL_x2_DEFINE(198); MUL_x2_DEFINE(199);\nMUL_x2_DEFINE(200); MUL_x2_DEFINE(201); MUL_x2_DEFINE(202); MUL_x2_DEFINE(203);\nMUL_x2_DEFINE(204); MUL_x2_DEFINE(205); MUL_x2_DEFINE(206); MUL_x2_DEFINE(207);\nMUL_x2_DEFINE(208); MUL_x2_DEFINE(209); MUL_x2_DEFINE(210); MUL_x2_DEFINE(211);\nMUL_x2_DEFINE(212); MUL_x2_DEFINE(213); MUL_x2_DEFINE(214); MUL_x2_DEFINE(215);\nMUL_x2_DEFINE(216); MUL_x2_DEFINE(217); MUL_x2_DEFINE(218); MUL_x2_DEFINE(219);\nMUL_x2_DEFINE(220); MUL_x2_DEFINE(221); MUL_x2_DEFINE(222); MUL_x2_DEFINE(223);\nMUL_x2_DEFINE(224); MUL_x2_DEFINE(225); MUL_x2_DEFINE(226); MUL_x2_DEFINE(227);\nMUL_x2_DEFINE(228); MUL_x2_DEFINE(229); MUL_x2_DEFINE(230); MUL_x2_DEFINE(231);\nMUL_x2_DEFINE(232); MUL_x2_DEFINE(233); MUL_x2_DEFINE(234); MUL_x2_DEFINE(235);\nMUL_x2_DEFINE(236); MUL_x2_DEFINE(237); MUL_x2_DEFINE(238); MUL_x2_DEFINE(239);\nMUL_x2_DEFINE(240); MUL_x2_DEFINE(241); MUL_x2_DEFINE(242); MUL_x2_DEFINE(243);\nMUL_x2_DEFINE(244); MUL_x2_DEFINE(245); MUL_x2_DEFINE(246); MUL_x2_DEFINE(247);\nMUL_x2_DEFINE(248); MUL_x2_DEFINE(249); MUL_x2_DEFINE(250); MUL_x2_DEFINE(251);\nMUL_x2_DEFINE(252); MUL_x2_DEFINE(253); MUL_x2_DEFINE(254); MUL_x2_DEFINE(255);\n\n\ntypedef void (*mul_fn_ptr_t)(void);\n\nstatic const mul_fn_ptr_t __attribute__((aligned(256)))\ngf_x2_mul_fns[256] = {\n\tmul_x2_0, mul_x2_1, mul_x2_2, mul_x2_3, mul_x2_4, mul_x2_5,\n\tmul_x2_6, mul_x2_7, mul_x2_8, mul_x2_9, mul_x2_10, mul_x2_11,\n\tmul_x2_12, mul_x2_13, mul_x2_14, mul_x2_15, mul_x2_16, mul_x2_17,\n\tmul_x2_18, mul_x2_19, mul_x2_20, mul_x2_21, mul_x2_22, mul_x2_23,\n\tmul_x2_24, mul_x2_25, mul_x2_26, mul_x2_27, mul_x2_28, mul_x2_29,\n\tmul_x2_30, mul_x2_31, mul_x2_32, mul_x2_33, mul_x2_34, mul_x2_35,\n\tmul_x2_36, mul_x2_37, mul_x2_38, mul_x2_39, mul_x2_40, mul_x2_41,\n\tmul_x2_42, mul_x2_43, mul_x2_44, mul_x2_45, mul_x2_46, mul_x2_47,\n\tmul_x2_48, mul_x2_49, mul_x2_50, mul_x2_51, mul_x2_52, mul_x2_53,\n\tmul_x2_54, mul_x2_55, mul_x2_56, mul_x2_57, mul_x2_58, mul_x2_59,\n\tmul_x2_60, mul_x2_61, mul_x2_62, mul_x2_63, mul_x2_64, mul_x2_65,\n\tmul_x2_66, mul_x2_67, mul_x2_68, mul_x2_69, mul_x2_70, mul_x2_71,\n\tmul_x2_72, mul_x2_73, mul_x2_74, mul_x2_75, mul_x2_76, mul_x2_77,\n\tmul_x2_78, mul_x2_79, mul_x2_80, mul_x2_81, mul_x2_82, mul_x2_83,\n\tmul_x2_84, mul_x2_85, mul_x2_86, mul_x2_87, mul_x2_88, mul_x2_89,\n\tmul_x2_90, mul_x2_91, mul_x2_92, mul_x2_93, mul_x2_94, mul_x2_95,\n\tmul_x2_96, mul_x2_97, mul_x2_98, mul_x2_99, mul_x2_100, mul_x2_101,\n\tmul_x2_102, mul_x2_103, mul_x2_104, mul_x2_105, mul_x2_106, mul_x2_107,\n\tmul_x2_108, mul_x2_109, mul_x2_110, mul_x2_111, mul_x2_112, mul_x2_113,\n\tmul_x2_114, mul_x2_115, mul_x2_116, mul_x2_117, mul_x2_118, mul_x2_119,\n\tmul_x2_120, mul_x2_121, mul_x2_122, mul_x2_123, mul_x2_124, mul_x2_125,\n\tmul_x2_126, mul_x2_127, mul_x2_128, mul_x2_129, mul_x2_130, mul_x2_131,\n\tmul_x2_132, mul_x2_133, mul_x2_134, mul_x2_135, mul_x2_136, mul_x2_137,\n\tmul_x2_138, mul_x2_139, mul_x2_140, mul_x2_141, mul_x2_142, mul_x2_143,\n\tmul_x2_144, mul_x2_145, mul_x2_146, mul_x2_147, mul_x2_148, mul_x2_149,\n\tmul_x2_150, mul_x2_151, mul_x2_152, mul_x2_153, mul_x2_154, mul_x2_155,\n\tmul_x2_156, mul_x2_157, mul_x2_158, mul_x2_159, mul_x2_160, mul_x2_161,\n\tmul_x2_162, mul_x2_163, mul_x2_164, mul_x2_165, mul_x2_166, mul_x2_167,\n\tmul_x2_168, mul_x2_169, mul_x2_170, mul_x2_171, mul_x2_172, mul_x2_173,\n\tmul_x2_174, mul_x2_175, mul_x2_176, mul_x2_177, mul_x2_178, mul_x2_179,\n\tmul_x2_180, mul_x2_181, mul_x2_182, mul_x2_183, mul_x2_184, mul_x2_185,\n\tmul_x2_186, mul_x2_187, mul_x2_188, mul_x2_189, mul_x2_190, mul_x2_191,\n\tmul_x2_192, mul_x2_193, mul_x2_194, mul_x2_195, mul_x2_196, mul_x2_197,\n\tmul_x2_198, mul_x2_199, mul_x2_200, mul_x2_201, mul_x2_202, mul_x2_203,\n\tmul_x2_204, mul_x2_205, mul_x2_206, mul_x2_207, mul_x2_208, mul_x2_209,\n\tmul_x2_210, mul_x2_211, mul_x2_212, mul_x2_213, mul_x2_214, mul_x2_215,\n\tmul_x2_216, mul_x2_217, mul_x2_218, mul_x2_219, mul_x2_220, mul_x2_221,\n\tmul_x2_222, mul_x2_223, mul_x2_224, mul_x2_225, mul_x2_226, mul_x2_227,\n\tmul_x2_228, mul_x2_229, mul_x2_230, mul_x2_231, mul_x2_232, mul_x2_233,\n\tmul_x2_234, mul_x2_235, mul_x2_236, mul_x2_237, mul_x2_238, mul_x2_239,\n\tmul_x2_240, mul_x2_241, mul_x2_242, mul_x2_243, mul_x2_244, mul_x2_245,\n\tmul_x2_246, mul_x2_247, mul_x2_248, mul_x2_249, mul_x2_250, mul_x2_251,\n\tmul_x2_252, mul_x2_253, mul_x2_254, mul_x2_255\n};\n\n#define\tMUL(c, r...) \t\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\t\\\n\t\tCOPY(R_01(r), _mul_x2_in);\t\t\t\t\\\n\t\tgf_x2_mul_fns[c]();\t\t\t\t\t\\\n\t\tCOPY(_mul_x2_acc, R_01(r));\t\t\t\t\\\n\t\tCOPY(R_23(r), _mul_x2_in);\t\t\t\t\\\n\t\tgf_x2_mul_fns[c]();\t\t\t\t\t\\\n\t\tCOPY(_mul_x2_acc, R_23(r));\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\t\\\n\t\tVERIFY(0);\t\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\t\\\n}\n\n\n#define\traidz_math_begin()\tkfpu_begin()\n#define\traidz_math_end()\tkfpu_end()\n\n\n#define\tSYN_STRIDE\t\t4\n\n#define\tZERO_STRIDE\t\t4\n#define\tZERO_DEFINE()\t\t{}\n#define\tZERO_D\t\t\t0, 1, 2, 3\n\n#define\tCOPY_STRIDE\t\t4\n#define\tCOPY_DEFINE()\t\t{}\n#define\tCOPY_D\t\t\t0, 1, 2, 3\n\n#define\tADD_STRIDE\t\t4\n#define\tADD_DEFINE()\t\t{}\n#define\tADD_D \t\t\t0, 1, 2, 3\n\n#define\tMUL_STRIDE\t\t4\n#define\tMUL_DEFINE() \t\tMUL2_SETUP()\n#define\tMUL_D\t\t\t0, 1, 2, 3\n\n#define\tGEN_P_STRIDE\t\t4\n#define\tGEN_P_DEFINE()\t\t{}\n#define\tGEN_P_P\t\t\t0, 1, 2, 3\n\n#define\tGEN_PQ_STRIDE\t\t4\n#define\tGEN_PQ_DEFINE() \t{}\n#define\tGEN_PQ_D\t\t0, 1, 2, 3\n#define\tGEN_PQ_C\t\t4, 5, 6, 7\n\n#define\tGEN_PQR_STRIDE\t\t4\n#define\tGEN_PQR_DEFINE() \t{}\n#define\tGEN_PQR_D\t\t0, 1, 2, 3\n#define\tGEN_PQR_C\t\t4, 5, 6, 7\n\n#define\tSYN_Q_DEFINE()\t\t{}\n#define\tSYN_Q_D\t\t\t0, 1, 2, 3\n#define\tSYN_Q_X\t\t\t4, 5, 6, 7\n\n#define\tSYN_R_DEFINE()\t\t{}\n#define\tSYN_R_D\t\t\t0, 1, 2, 3\n#define\tSYN_R_X\t\t\t4, 5, 6, 7\n\n#define\tSYN_PQ_DEFINE() \t{}\n#define\tSYN_PQ_D\t\t0, 1, 2, 3\n#define\tSYN_PQ_X\t\t4, 5, 6, 7\n\n#define\tREC_PQ_STRIDE\t\t4\n#define\tREC_PQ_DEFINE()\t\tMUL2_SETUP()\n#define\tREC_PQ_X\t\t0, 1, 2, 3\n#define\tREC_PQ_Y\t\t4, 5, 6, 7\n#define\tREC_PQ_T\t\t8, 9, 10, 11\n\n#define\tSYN_PR_DEFINE() \t{}\n#define\tSYN_PR_D\t\t0, 1, 2, 3\n#define\tSYN_PR_X\t\t4, 5, 6, 7\n\n#define\tREC_PR_STRIDE\t\t4\n#define\tREC_PR_DEFINE() \tMUL2_SETUP()\n#define\tREC_PR_X\t\t0, 1, 2, 3\n#define\tREC_PR_Y\t\t4, 5, 6, 7\n#define\tREC_PR_T\t\t8, 9, 10, 11\n\n#define\tSYN_QR_DEFINE() \t{}\n#define\tSYN_QR_D\t\t0, 1, 2, 3\n#define\tSYN_QR_X\t\t4, 5, 6, 7\n\n#define\tREC_QR_STRIDE\t\t4\n#define\tREC_QR_DEFINE() \tMUL2_SETUP()\n#define\tREC_QR_X\t\t0, 1, 2, 3\n#define\tREC_QR_Y\t\t4, 5, 6, 7\n#define\tREC_QR_T\t\t8, 9, 10, 11\n\n#define\tSYN_PQR_DEFINE() \t{}\n#define\tSYN_PQR_D\t\t0, 1, 2, 3\n#define\tSYN_PQR_X\t\t4, 5, 6, 7\n\n#define\tREC_PQR_STRIDE\t\t4\n#define\tREC_PQR_DEFINE() \tMUL2_SETUP()\n#define\tREC_PQR_X\t\t0, 1, 2, 3\n#define\tREC_PQR_Y\t\t4, 5, 6, 7\n#define\tREC_PQR_Z\t\t8, 9, 10, 11\n#define\tREC_PQR_XS\t\t12, 13, 14, 15\n#define\tREC_PQR_YS\t\t16, 17, 18, 19\n\n\n#include <sys/vdev_raidz_impl.h>\n#include \"vdev_raidz_math_impl.h\"\n\nDEFINE_GEN_METHODS(avx512f);\nDEFINE_REC_METHODS(avx512f);\n\nstatic boolean_t\nraidz_will_avx512f_work(void)\n{\n\treturn (kfpu_allowed() && zfs_avx_available() &&\n\t    zfs_avx2_available() && zfs_avx512f_available());\n}\n\nconst raidz_impl_ops_t vdev_raidz_avx512f_impl = {\n\t.init = NULL,\n\t.fini = NULL,\n\t.gen = RAIDZ_GEN_METHODS(avx512f),\n\t.rec = RAIDZ_REC_METHODS(avx512f),\n\t.is_supported = &raidz_will_avx512f_work,\n\t.name = \"avx512f\"\n};\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}