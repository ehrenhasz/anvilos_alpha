{
  "module_name": "vdev_raidz_math_powerpc_altivec_common.h",
  "hash_id": "f3edb9453cc2d33070ebc185511b363ef41982165d30601cbecc0f90b3eee2a5",
  "original_prompt": "Ingested from zfs-2.2.2/module/zfs/vdev_raidz_math_powerpc_altivec_common.h",
  "human_readable_source": " \n \n\n#include <sys/types.h>\n#include <sys/simd.h>\n\n#define\t_REG_CNT(_0, _1, _2, _3, _4, _5, _6, _7, N, ...) N\n#define\tREG_CNT(r...) _REG_CNT(r, 8, 7, 6, 5, 4, 3, 2, 1)\n\n#define\tVR0_(REG, ...) \"%[w\"#REG\"]\"\n#define\tVR1_(_1, REG, ...) \"%[w\"#REG\"]\"\n#define\tVR2_(_1, _2, REG, ...) \"%[w\"#REG\"]\"\n#define\tVR3_(_1, _2, _3, REG, ...) \"%[w\"#REG\"]\"\n#define\tVR4_(_1, _2, _3, _4, REG, ...) \"%[w\"#REG\"]\"\n#define\tVR5_(_1, _2, _3, _4, _5, REG, ...) \"%[w\"#REG\"]\"\n#define\tVR6_(_1, _2, _3, _4, _5, _6, REG, ...) \"%[w\"#REG\"]\"\n#define\tVR7_(_1, _2, _3, _4, _5, _6, _7, REG, ...) \"%[w\"#REG\"]\"\n\n \n\n#define\tVR0(r...) VR0_(r)\n#define\tVR1(r...) VR1_(r)\n#define\tVR2(r...) VR2_(r, 36)\n#define\tVR3(r...) VR3_(r, 36, 35)\n#define\tVR4(r...) VR4_(r, 36, 35, 34, 33)\n#define\tVR5(r...) VR5_(r, 36, 35, 34, 33, 32)\n#define\tVR6(r...) VR6_(r, 36, 35, 34, 33, 32, 31)\n#define\tVR7(r...) VR7_(r, 36, 35, 34, 33, 32, 31, 30)\n\n#define\tVR(X) \"%[w\"#X\"]\"\n\n#define\tRVR0_(REG, ...) [w##REG] \"v\" (w##REG)\n#define\tRVR1_(_1, REG, ...) [w##REG] \"v\" (w##REG)\n#define\tRVR2_(_1, _2, REG, ...) [w##REG] \"v\" (w##REG)\n#define\tRVR3_(_1, _2, _3, REG, ...) [w##REG] \"v\" (w##REG)\n#define\tRVR4_(_1, _2, _3, _4, REG, ...) [w##REG] \"v\" (w##REG)\n#define\tRVR5_(_1, _2, _3, _4, _5, REG, ...) [w##REG] \"v\" (w##REG)\n#define\tRVR6_(_1, _2, _3, _4, _5, _6, REG, ...) [w##REG] \"v\" (w##REG)\n#define\tRVR7_(_1, _2, _3, _4, _5, _6, _7, REG, ...) [w##REG] \"v\" (w##REG)\n\n#define\tRVR0(r...) RVR0_(r)\n#define\tRVR1(r...) RVR1_(r)\n#define\tRVR2(r...) RVR2_(r, 36)\n#define\tRVR3(r...) RVR3_(r, 36, 35)\n#define\tRVR4(r...) RVR4_(r, 36, 35, 34, 33)\n#define\tRVR5(r...) RVR5_(r, 36, 35, 34, 33, 32)\n#define\tRVR6(r...) RVR6_(r, 36, 35, 34, 33, 32, 31)\n#define\tRVR7(r...) RVR7_(r, 36, 35, 34, 33, 32, 31, 30)\n\n#define\tRVR(X) [w##X] \"v\" (w##X)\n\n#define\tWVR0_(REG, ...) [w##REG] \"=v\" (w##REG)\n#define\tWVR1_(_1, REG, ...) [w##REG] \"=v\" (w##REG)\n#define\tWVR2_(_1, _2, REG, ...) [w##REG] \"=v\" (w##REG)\n#define\tWVR3_(_1, _2, _3, REG, ...) [w##REG] \"=v\" (w##REG)\n#define\tWVR4_(_1, _2, _3, _4, REG, ...) [w##REG] \"=v\" (w##REG)\n#define\tWVR5_(_1, _2, _3, _4, _5, REG, ...) [w##REG] \"=v\" (w##REG)\n#define\tWVR6_(_1, _2, _3, _4, _5, _6, REG, ...) [w##REG] \"=v\" (w##REG)\n#define\tWVR7_(_1, _2, _3, _4, _5, _6, _7, REG, ...) [w##REG] \"=v\" (w##REG)\n\n#define\tWVR0(r...) WVR0_(r)\n#define\tWVR1(r...) WVR1_(r)\n#define\tWVR2(r...) WVR2_(r, 36)\n#define\tWVR3(r...) WVR3_(r, 36, 35)\n#define\tWVR4(r...) WVR4_(r, 36, 35, 34, 33)\n#define\tWVR5(r...) WVR5_(r, 36, 35, 34, 33, 32)\n#define\tWVR6(r...) WVR6_(r, 36, 35, 34, 33, 32, 31)\n#define\tWVR7(r...) WVR7_(r, 36, 35, 34, 33, 32, 31, 30)\n\n#define\tWVR(X) [w##X] \"=v\" (w##X)\n\n#define\tUVR0_(REG, ...) [w##REG] \"+&v\" (w##REG)\n#define\tUVR1_(_1, REG, ...) [w##REG] \"+&v\" (w##REG)\n#define\tUVR2_(_1, _2, REG, ...) [w##REG] \"+&v\" (w##REG)\n#define\tUVR3_(_1, _2, _3, REG, ...) [w##REG] \"+&v\" (w##REG)\n#define\tUVR4_(_1, _2, _3, _4, REG, ...) [w##REG] \"+&v\" (w##REG)\n#define\tUVR5_(_1, _2, _3, _4, _5, REG, ...) [w##REG] \"+&v\" (w##REG)\n#define\tUVR6_(_1, _2, _3, _4, _5, _6, REG, ...) [w##REG] \"+&v\" (w##REG)\n#define\tUVR7_(_1, _2, _3, _4, _5, _6, _7, REG, ...) [w##REG] \"+&v\" (w##REG)\n\n#define\tUVR0(r...) UVR0_(r)\n#define\tUVR1(r...) UVR1_(r)\n#define\tUVR2(r...) UVR2_(r, 36)\n#define\tUVR3(r...) UVR3_(r, 36, 35)\n#define\tUVR4(r...) UVR4_(r, 36, 35, 34, 33)\n#define\tUVR5(r...) UVR5_(r, 36, 35, 34, 33, 32)\n#define\tUVR6(r...) UVR6_(r, 36, 35, 34, 33, 32, 31)\n#define\tUVR7(r...) UVR7_(r, 36, 35, 34, 33, 32, 31, 30)\n\n#define\tUVR(X) [w##X] \"+&v\" (w##X)\n\n#define\tR_01(REG1, REG2, ...) REG1, REG2\n#define\t_R_23(_0, _1, REG2, REG3, ...) REG2, REG3\n#define\tR_23(REG...) _R_23(REG, 1, 2, 3)\n\n#define\tZFS_ASM_BUG()\tASSERT(0)\n\n#define\tOFFSET(ptr, val)\t(((unsigned char *)(ptr))+val)\n\nextern const uint8_t gf_clmul_mod_lt[4*256][16];\n\n#define\tELEM_SIZE 16\n\ntypedef struct v {\n\tuint8_t b[ELEM_SIZE] __attribute__((aligned(ELEM_SIZE)));\n} v_t;\n\n#define\tXOR_ACC(src, r...)\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\\\n\tcase 8:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"lvx 21,0,%[SRC0]\\n\"\t\t\t\t\\\n\t\t\"lvx 20,0,%[SRC1]\\n\"\t\t\t\t\\\n\t\t\"lvx 19,0,%[SRC2]\\n\"\t\t\t\t\\\n\t\t\"lvx 18,0,%[SRC3]\\n\"\t\t\t\t\\\n\t\t\"vxor \" VR0(r) \",\" VR0(r) \",21\\n\"\t\t\\\n\t\t\"vxor \" VR1(r) \",\" VR1(r) \",20\\n\"\t\t\\\n\t\t\"vxor \" VR2(r) \",\" VR2(r) \",19\\n\"\t\t\\\n\t\t\"vxor \" VR3(r) \",\" VR3(r) \",18\\n\"\t\t\\\n\t\t\"lvx 21,0,%[SRC4]\\n\"\t\t\t\t\\\n\t\t\"lvx 20,0,%[SRC5]\\n\"\t\t\t\t\\\n\t\t\"lvx 19,0,%[SRC6]\\n\"\t\t\t\t\\\n\t\t\"lvx 18,0,%[SRC7]\\n\"\t\t\t\t\\\n\t\t\"vxor \" VR4(r) \",\" VR4(r) \",21\\n\"\t\t\\\n\t\t\"vxor \" VR5(r) \",\" VR5(r) \",20\\n\"\t\t\\\n\t\t\"vxor \" VR6(r) \",\" VR6(r) \",19\\n\"\t\t\\\n\t\t\"vxor \" VR7(r) \",\" VR7(r) \",18\\n\"\t\t\\\n\t\t:\tUVR0(r), UVR1(r), UVR2(r), UVR3(r),\t\\\n\t\t\tUVR4(r), UVR5(r), UVR6(r), UVR7(r)\t\\\n\t\t:\t[SRC0] \"r\" ((OFFSET(src, 0))),\t\t\\\n\t\t[SRC1] \"r\" ((OFFSET(src, 16))),\t\t\t\\\n\t\t[SRC2] \"r\" ((OFFSET(src, 32))),\t\t\t\\\n\t\t[SRC3] \"r\" ((OFFSET(src, 48))),\t\t\t\\\n\t\t[SRC4] \"r\" ((OFFSET(src, 64))),\t\t\t\\\n\t\t[SRC5] \"r\" ((OFFSET(src, 80))),\t\t\t\\\n\t\t[SRC6] \"r\" ((OFFSET(src, 96))),\t\t\t\\\n\t\t[SRC7] \"r\" ((OFFSET(src, 112)))\t\t\t\\\n\t\t:\t\"v18\", \"v19\", \"v20\", \"v21\");\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"lvx 21,0,%[SRC0]\\n\"\t\t\t\t\\\n\t\t\"lvx 20,0,%[SRC1]\\n\"\t\t\t\t\\\n\t\t\"lvx 19,0,%[SRC2]\\n\"\t\t\t\t\\\n\t\t\"lvx 18,0,%[SRC3]\\n\"\t\t\t\t\\\n\t\t\"vxor \" VR0(r) \",\" VR0(r) \",21\\n\"\t\t\\\n\t\t\"vxor \" VR1(r) \",\" VR1(r) \",20\\n\"\t\t\\\n\t\t\"vxor \" VR2(r) \",\" VR2(r) \",19\\n\"\t\t\\\n\t\t\"vxor \" VR3(r) \",\" VR3(r) \",18\\n\"\t\t\\\n\t\t:\tUVR0(r), UVR1(r), UVR2(r), UVR3(r)\t\\\n\t\t:\t[SRC0] \"r\" ((OFFSET(src, 0))),\t\t\\\n\t\t[SRC1] \"r\" ((OFFSET(src, 16))),\t\t\t\\\n\t\t[SRC2] \"r\" ((OFFSET(src, 32))),\t\t\t\\\n\t\t[SRC3] \"r\" ((OFFSET(src, 48)))\t\t\t\\\n\t\t:\t\"v18\", \"v19\", \"v20\", \"v21\");\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 2:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"lvx 21,0,%[SRC0]\\n\"\t\t\t\t\\\n\t\t\"lvx 20,0,%[SRC1]\\n\"\t\t\t\t\\\n\t\t\"vxor \" VR0(r) \",\" VR0(r) \",21\\n\"\t\t\\\n\t\t\"vxor \" VR1(r) \",\" VR1(r) \",20\\n\"\t\t\\\n\t\t:\tUVR0(r), UVR1(r)\t\t\t\\\n\t\t:\t[SRC0] \"r\" ((OFFSET(src, 0))),\t\t\\\n\t\t[SRC1] \"r\" ((OFFSET(src, 16)))\t\t\t\\\n\t\t:\t\"v20\", \"v21\");\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\\\n\t\tZFS_ASM_BUG();\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n}\n\n#define\tXOR(r...)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\\\n\tcase 8:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"vxor \" VR4(r) \",\" VR4(r) \",\" VR0(r) \"\\n\"\t\\\n\t\t\"vxor \" VR5(r) \",\" VR5(r) \",\" VR1(r) \"\\n\"\t\\\n\t\t\"vxor \" VR6(r) \",\" VR6(r) \",\" VR2(r) \"\\n\"\t\\\n\t\t\"vxor \" VR7(r) \",\" VR7(r) \",\" VR3(r) \"\\n\"\t\\\n\t\t:\tUVR4(r), UVR5(r), UVR6(r), UVR7(r)\t\\\n\t\t:\tRVR0(r), RVR1(r), RVR2(r), RVR3(r));\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"vxor \" VR2(r) \",\" VR2(r) \",\" VR0(r) \"\\n\"\t\\\n\t\t\"vxor \" VR3(r) \",\" VR3(r) \",\" VR1(r) \"\\n\"\t\\\n\t\t:\tUVR2(r), UVR3(r)\t\t\t\\\n\t\t:\tRVR0(r), RVR1(r));\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\\\n\t\tZFS_ASM_BUG();\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n}\n\n#define\tZERO(r...)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\\\n\tcase 8:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"vxor \" VR0(r) \",\" VR0(r) \",\" VR0(r) \"\\n\"\t\\\n\t\t\"vxor \" VR1(r) \",\" VR1(r) \",\" VR1(r) \"\\n\"\t\\\n\t\t\"vxor \" VR2(r) \",\" VR2(r) \",\" VR2(r) \"\\n\"\t\\\n\t\t\"vxor \" VR3(r) \",\" VR3(r) \",\" VR3(r) \"\\n\"\t\\\n\t\t\"vxor \" VR4(r) \",\" VR4(r) \",\" VR4(r) \"\\n\"\t\\\n\t\t\"vxor \" VR5(r) \",\" VR5(r) \",\" VR5(r) \"\\n\"\t\\\n\t\t\"vxor \" VR6(r) \",\" VR6(r) \",\" VR6(r) \"\\n\"\t\\\n\t\t\"vxor \" VR7(r) \",\" VR7(r) \",\" VR7(r) \"\\n\"\t\\\n\t\t:\tWVR0(r), WVR1(r), WVR2(r), WVR3(r),\t\\\n\t\t\tWVR4(r), WVR5(r), WVR6(r), WVR7(r));\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"vxor \" VR0(r) \",\" VR0(r) \",\" VR0(r) \"\\n\"\t\\\n\t\t\"vxor \" VR1(r) \",\" VR1(r) \",\" VR1(r) \"\\n\"\t\\\n\t\t\"vxor \" VR2(r) \",\" VR2(r) \",\" VR2(r) \"\\n\"\t\\\n\t\t\"vxor \" VR3(r) \",\" VR3(r) \",\" VR3(r) \"\\n\"\t\\\n\t\t:\tWVR0(r), WVR1(r), WVR2(r), WVR3(r));\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 2:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"vxor \" VR0(r) \",\" VR0(r) \",\" VR0(r) \"\\n\"\t\\\n\t\t\"vxor \" VR1(r) \",\" VR1(r) \",\" VR1(r) \"\\n\"\t\\\n\t\t:\tWVR0(r), WVR1(r));\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\\\n\t\tZFS_ASM_BUG();\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n}\n\n#define\tCOPY(r...)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\\\n\tcase 8:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"vor \" VR4(r) \",\" VR0(r) \",\" VR0(r) \"\\n\"\t\\\n\t\t\"vor \" VR5(r) \",\" VR1(r) \",\" VR1(r) \"\\n\"\t\\\n\t\t\"vor \" VR6(r) \",\" VR2(r) \",\" VR2(r) \"\\n\"\t\\\n\t\t\"vor \" VR7(r) \",\" VR3(r) \",\" VR3(r) \"\\n\"\t\\\n\t\t:\tWVR4(r), WVR5(r), WVR6(r), WVR7(r)\t\\\n\t\t:\tRVR0(r), RVR1(r), RVR2(r), RVR3(r));\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"vor \" VR2(r) \",\" VR0(r) \",\" VR0(r) \"\\n\"\t\\\n\t\t\"vor \" VR3(r) \",\" VR1(r) \",\" VR1(r) \"\\n\"\t\\\n\t\t:\tWVR2(r), WVR3(r)\t\t\t\\\n\t\t:\tRVR0(r), RVR1(r));\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\\\n\t\tZFS_ASM_BUG();\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n}\n\n#define\tLOAD(src, r...)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\\\n\tcase 8:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"lvx \" VR0(r) \" ,0,%[SRC0]\\n\"\t\t\t\\\n\t\t\"lvx \" VR1(r) \" ,0,%[SRC1]\\n\"\t\t\t\\\n\t\t\"lvx \" VR2(r) \" ,0,%[SRC2]\\n\"\t\t\t\\\n\t\t\"lvx \" VR3(r) \" ,0,%[SRC3]\\n\"\t\t\t\\\n\t\t\"lvx \" VR4(r) \" ,0,%[SRC4]\\n\"\t\t\t\\\n\t\t\"lvx \" VR5(r) \" ,0,%[SRC5]\\n\"\t\t\t\\\n\t\t\"lvx \" VR6(r) \" ,0,%[SRC6]\\n\"\t\t\t\\\n\t\t\"lvx \" VR7(r) \" ,0,%[SRC7]\\n\"\t\t\t\\\n\t\t:\tWVR0(r), WVR1(r), WVR2(r), WVR3(r),\t\\\n\t\t\tWVR4(r), WVR5(r), WVR6(r), WVR7(r)\t\\\n\t\t:\t[SRC0] \"r\" ((OFFSET(src, 0))),\t\t\\\n\t\t[SRC1] \"r\" ((OFFSET(src, 16))),\t\t\t\\\n\t\t[SRC2] \"r\" ((OFFSET(src, 32))),\t\t\t\\\n\t\t[SRC3] \"r\" ((OFFSET(src, 48))),\t\t\t\\\n\t\t[SRC4] \"r\" ((OFFSET(src, 64))),\t\t\t\\\n\t\t[SRC5] \"r\" ((OFFSET(src, 80))),\t\t\t\\\n\t\t[SRC6] \"r\" ((OFFSET(src, 96))),\t\t\t\\\n\t\t[SRC7] \"r\" ((OFFSET(src, 112))));\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"lvx \" VR0(r) \" ,0,%[SRC0]\\n\"\t\t\t\\\n\t\t\"lvx \" VR1(r) \" ,0,%[SRC1]\\n\"\t\t\t\\\n\t\t\"lvx \" VR2(r) \" ,0,%[SRC2]\\n\"\t\t\t\\\n\t\t\"lvx \" VR3(r) \" ,0,%[SRC3]\\n\"\t\t\t\\\n\t\t:\tWVR0(r), WVR1(r), WVR2(r), WVR3(r)\t\\\n\t\t:\t[SRC0] \"r\" ((OFFSET(src, 0))),\t\t\\\n\t\t[SRC1] \"r\" ((OFFSET(src, 16))),\t\t\t\\\n\t\t[SRC2] \"r\" ((OFFSET(src, 32))),\t\t\t\\\n\t\t[SRC3] \"r\" ((OFFSET(src, 48))));\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 2:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"lvx \" VR0(r) \" ,0,%[SRC0]\\n\"\t\t\t\\\n\t\t\"lvx \" VR1(r) \" ,0,%[SRC1]\\n\"\t\t\t\\\n\t\t:\tWVR0(r), WVR1(r)\t\t\t\\\n\t\t:\t[SRC0] \"r\" ((OFFSET(src, 0))),\t\t\\\n\t\t[SRC1] \"r\" ((OFFSET(src, 16))));\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\\\n\t\tZFS_ASM_BUG();\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n}\n\n#define\tSTORE(dst, r...)\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\\\n\tcase 8:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"stvx \" VR0(r) \" ,0,%[DST0]\\n\"\t\t\t\\\n\t\t\"stvx \" VR1(r) \" ,0,%[DST1]\\n\"\t\t\t\\\n\t\t\"stvx \" VR2(r) \" ,0,%[DST2]\\n\"\t\t\t\\\n\t\t\"stvx \" VR3(r) \" ,0,%[DST3]\\n\"\t\t\t\\\n\t\t\"stvx \" VR4(r) \" ,0,%[DST4]\\n\"\t\t\t\\\n\t\t\"stvx \" VR5(r) \" ,0,%[DST5]\\n\"\t\t\t\\\n\t\t\"stvx \" VR6(r) \" ,0,%[DST6]\\n\"\t\t\t\\\n\t\t\"stvx \" VR7(r) \" ,0,%[DST7]\\n\"\t\t\t\\\n\t\t: :\t[DST0] \"r\" ((OFFSET(dst, 0))),\t\t\\\n\t\t[DST1] \"r\" ((OFFSET(dst, 16))),\t\t\t\\\n\t\t[DST2] \"r\" ((OFFSET(dst, 32))),\t\t\t\\\n\t\t[DST3] \"r\" ((OFFSET(dst, 48))),\t\t\t\\\n\t\t[DST4] \"r\" ((OFFSET(dst, 64))),\t\t\t\\\n\t\t[DST5] \"r\" ((OFFSET(dst, 80))),\t\t\t\\\n\t\t[DST6] \"r\" ((OFFSET(dst, 96))),\t\t\t\\\n\t\t[DST7] \"r\" ((OFFSET(dst, 112))),\t\t\\\n\t\tRVR0(r), RVR1(r), RVR2(r), RVR3(r),\t\t\\\n\t\tRVR4(r), RVR5(r), RVR6(r), RVR7(r)\t\t\\\n\t\t:\t\"memory\");\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"stvx \" VR0(r) \" ,0,%[DST0]\\n\"\t\t\t\\\n\t\t\"stvx \" VR1(r) \" ,0,%[DST1]\\n\"\t\t\t\\\n\t\t\"stvx \" VR2(r) \" ,0,%[DST2]\\n\"\t\t\t\\\n\t\t\"stvx \" VR3(r) \" ,0,%[DST3]\\n\"\t\t\t\\\n\t\t: :\t[DST0] \"r\" ((OFFSET(dst, 0))),\t\t\\\n\t\t[DST1] \"r\" ((OFFSET(dst, 16))),\t\t\t\\\n\t\t[DST2] \"r\" ((OFFSET(dst, 32))),\t\t\t\\\n\t\t[DST3] \"r\" ((OFFSET(dst, 48))),\t\t\t\\\n\t\tRVR0(r), RVR1(r), RVR2(r), RVR3(r)\t\t\\\n\t\t: \"memory\");\t\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 2:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"stvx \" VR0(r) \" ,0,%[DST0]\\n\"\t\t\t\\\n\t\t\"stvx \" VR1(r) \" ,0,%[DST1]\\n\"\t\t\t\\\n\t\t: :\t[DST0] \"r\" ((OFFSET(dst, 0))),\t\t\\\n\t\t[DST1] \"r\" ((OFFSET(dst, 16))),\t\t\t\\\n\t\tRVR0(r), RVR1(r) : \"memory\");\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\\\n\t\tZFS_ASM_BUG();\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n}\n\n \n#define\t_00\t\"17\"\n#define\t_1d\t\"16\"\n#define\t_temp0\t\"19\"\n#define\t_temp1\t\"18\"\n\n#define\tMUL2_SETUP()\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\t__asm__ __volatile__(\t\t\t\t\t\\\n\t\t\"vspltisb \" VR(16) \",14\\n\"\t\t\t\\\n\t\t\"vspltisb \" VR(17) \",15\\n\"\t\t\t\\\n\t\t\"vaddubm \" VR(16) \",\" VR(17) \",\" VR(16) \"\\n\"\t\\\n\t\t\"vxor \" VR(17) \",\" VR(17) \",\" VR(17) \"\\n\"\t\\\n\t\t:\tWVR(16), WVR(17));\t\t\t\\\n}\n\n#define\tMUL2(r...)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"vcmpgtsb 19,\" VR(17) \",\" VR0(r) \"\\n\"\t\t\\\n\t\t\"vcmpgtsb 18,\" VR(17) \",\" VR1(r) \"\\n\"\t\t\\\n\t\t\"vcmpgtsb 21,\" VR(17) \",\" VR2(r) \"\\n\"\t\t\\\n\t\t\"vcmpgtsb 20,\" VR(17) \",\" VR3(r) \"\\n\"\t\t\\\n\t\t\"vand 19,19,\" VR(16) \"\\n\"\t\t\t\\\n\t\t\"vand 18,18,\" VR(16) \"\\n\"\t\t\t\\\n\t\t\"vand 21,21,\" VR(16) \"\\n\"\t\t\t\\\n\t\t\"vand 20,20,\" VR(16) \"\\n\"\t\t\t\\\n\t\t\"vaddubm \" VR0(r) \",\" VR0(r) \",\" VR0(r) \"\\n\"\t\\\n\t\t\"vaddubm \" VR1(r) \",\" VR1(r) \",\" VR1(r) \"\\n\"\t\\\n\t\t\"vaddubm \" VR2(r) \",\" VR2(r) \",\" VR2(r) \"\\n\"\t\\\n\t\t\"vaddubm \" VR3(r) \",\" VR3(r) \",\" VR3(r) \"\\n\"\t\\\n\t\t\"vxor \" VR0(r) \",19,\" VR0(r) \"\\n\"\t\t\\\n\t\t\"vxor \" VR1(r) \",18,\" VR1(r) \"\\n\"\t\t\\\n\t\t\"vxor \" VR2(r) \",21,\" VR2(r) \"\\n\"\t\t\\\n\t\t\"vxor \" VR3(r) \",20,\" VR3(r) \"\\n\"\t\t\\\n\t\t:\tUVR0(r), UVR1(r), UVR2(r), UVR3(r)\t\\\n\t\t:\tRVR(17), RVR(16)\t\t\t\\\n\t\t:\t\"v18\", \"v19\", \"v20\", \"v21\");\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 2:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t\"vcmpgtsb 19,\" VR(17) \",\" VR0(r) \"\\n\"\t\t\\\n\t\t\"vcmpgtsb 18,\" VR(17) \",\" VR1(r) \"\\n\"\t\t\\\n\t\t\"vand 19,19,\" VR(16) \"\\n\"\t\t\t\\\n\t\t\"vand 18,18,\" VR(16) \"\\n\"\t\t\t\\\n\t\t\"vaddubm \" VR0(r) \",\" VR0(r) \",\" VR0(r) \"\\n\"\t\\\n\t\t\"vaddubm \" VR1(r) \",\" VR1(r) \",\" VR1(r) \"\\n\"\t\\\n\t\t\"vxor \" VR0(r) \",19,\" VR0(r) \"\\n\"\t\t\\\n\t\t\"vxor \" VR1(r) \",18,\" VR1(r) \"\\n\"\t\t\\\n\t\t:\tUVR0(r), UVR1(r)\t\t\t\\\n\t\t:\tRVR(17), RVR(16)\t\t\t\\\n\t\t:\t\"v18\", \"v19\");\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\\\n\t\tZFS_ASM_BUG();\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n}\n\n#define\tMUL4(r...)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tMUL2(r);\t\t\t\t\t\t\\\n\tMUL2(r);\t\t\t\t\t\t\\\n}\n\n \n#define\t_0f\t\t\"15\"\n#define\t_a_save\t\t\"14\"\n#define\t_b_save\t\t\"13\"\n#define\t_lt_mod_a\t\"12\"\n#define\t_lt_clmul_a\t\"11\"\n#define\t_lt_mod_b\t\"10\"\n#define\t_lt_clmul_b\t\"15\"\n\n#define\t_MULx2(c, r...)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\\\n\tcase 2:\t\t\t\t\t\t\t\\\n\t\t__asm__ __volatile__(\t\t\t\t\\\n\t\t \t\t\t\\\n\t\t\"vspltisb 15,15\\n\"\t\t\t\t\\\n\t\t\"lvx 10,0,%[lt0]\\n\"\t\t\t\t\\\n\t\t\"lvx 11,0,%[lt1]\\n\"\t\t\t\t\\\n\t\t \t\t\t\t\\\n\t\t\"vand 14,\" VR0(r) \",15\\n\"\t\t\t\\\n\t\t\"vand 13,\" VR1(r) \",15\\n\"\t\t\t\\\n\t\t\"vspltisb 15,4\\n\"\t\t\t\t\\\n\t\t\"vsrab \" VR0(r) \",\" VR0(r) \",15\\n\"\t\t\\\n\t\t\"vsrab \" VR1(r) \",\" VR1(r) \",15\\n\"\t\t\\\n\t\t\t\t\t\t\t\t\\\n\t\t\"vperm 12,10,10,\" VR0(r) \"\\n\"\t\t\t\\\n\t\t\"vperm 10,10,10,\" VR1(r) \"\\n\"\t\t\t\\\n\t\t\"vperm 15,11,11,\" VR0(r) \"\\n\"\t\t\t\\\n\t\t\"vperm 11,11,11,\" VR1(r) \"\\n\"\t\t\t\\\n\t\t\t\t\t\t\t\t\\\n\t\t\"vxor \" VR0(r) \",15,12\\n\"\t\t\t\\\n\t\t\"vxor \" VR1(r) \",11,10\\n\"\t\t\t\\\n\t\t \t\t\t\\\n\t\t\"lvx 10,0,%[lt2]\\n\"\t\t\t\t\\\n\t\t\"lvx 15,0,%[lt3]\\n\"\t\t\t\t\\\n\t\t \t\t\t\t\\\n\t\t\"vperm 12,10,10,14\\n\"\t\t\t\t\\\n\t\t\"vperm 10,10,10,13\\n\"\t\t\t\t\\\n\t\t\"vperm 11,15,15,14\\n\"\t\t\t\t\\\n\t\t\"vperm 15,15,15,13\\n\"\t\t\t\t\\\n\t\t\t\t\t\t\t\t\\\n\t\t\"vxor \" VR0(r) \",\" VR0(r) \",12\\n\"\t\t\\\n\t\t\"vxor \" VR1(r) \",\" VR1(r) \",10\\n\"\t\t\\\n\t\t\"vxor \" VR0(r) \",\" VR0(r) \",11\\n\"\t\t\\\n\t\t\"vxor \" VR1(r) \",\" VR1(r) \",15\\n\"\t\t\\\n\t\t: UVR0(r), UVR1(r)\t\t\t\t\\\n\t\t: [lt0] \"r\" (&(gf_clmul_mod_lt[4*(c)+0][0])),\t\\\n\t\t[lt1] \"r\" (&(gf_clmul_mod_lt[4*(c)+1][0])),\t\\\n\t\t[lt2] \"r\" (&(gf_clmul_mod_lt[4*(c)+2][0])),\t\\\n\t\t[lt3] \"r\" (&(gf_clmul_mod_lt[4*(c)+3][0]))\t\\\n\t\t: \"v10\", \"v11\", \"v12\", \"v13\", \"v14\", \"v15\");\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\\\n\t\tZFS_ASM_BUG();\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n}\n\n#define\tMUL(c, r...)\t\t\t\t\t\t\\\n{\t\t\t\t\t\t\t\t\\\n\tswitch (REG_CNT(r)) {\t\t\t\t\t\\\n\tcase 4:\t\t\t\t\t\t\t\\\n\t\t_MULx2(c, R_23(r));\t\t\t\t\\\n\t\t_MULx2(c, R_01(r));\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tcase 2:\t\t\t\t\t\t\t\\\n\t\t_MULx2(c, R_01(r));\t\t\t\t\\\n\t\tbreak;\t\t\t\t\t\t\\\n\tdefault:\t\t\t\t\t\t\\\n\t\tZFS_ASM_BUG();\t\t\t\t\t\\\n\t}\t\t\t\t\t\t\t\\\n}\n\n#define\traidz_math_begin()\tkfpu_begin()\n#define\traidz_math_end()\tkfpu_end()\n\n \n#if 0 \n#define\tGEN_X_DEFINE_0_3()\t\\\nregister unsigned char w0 asm(\"0\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w1 asm(\"1\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w2 asm(\"2\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w3 asm(\"3\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_4_5()\t\\\nregister unsigned char w4 asm(\"4\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w5 asm(\"5\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_6_7()\t\\\nregister unsigned char w6 asm(\"6\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w7 asm(\"7\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_8_9()\t\\\nregister unsigned char w8 asm(\"8\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w9 asm(\"9\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_10_11()\t\\\nregister unsigned char w10 asm(\"10\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w11 asm(\"11\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_12_15()\t\\\nregister unsigned char w12 asm(\"12\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w13 asm(\"13\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w14 asm(\"14\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w15 asm(\"15\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_16()\t\\\nregister unsigned char w16 asm(\"16\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_17()\t\\\nregister unsigned char w17 asm(\"17\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_18_21()\t\\\nregister unsigned char w18 asm(\"18\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w19 asm(\"19\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w20 asm(\"20\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w21 asm(\"21\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_22_23()\t\\\nregister unsigned char w22 asm(\"22\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w23 asm(\"23\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_24_27()\t\\\nregister unsigned char w24 asm(\"24\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w25 asm(\"25\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w26 asm(\"26\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w27 asm(\"27\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_28_30()\t\\\nregister unsigned char w28 asm(\"28\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w29 asm(\"29\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w30 asm(\"30\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_31()\t\\\nregister unsigned char w31 asm(\"31\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_32()\t\\\nregister unsigned char w32 asm(\"31\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_33_36()\t\\\nregister unsigned char w33 asm(\"31\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w34 asm(\"31\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w35 asm(\"31\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w36 asm(\"31\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_37_38()\t\\\nregister unsigned char w37 asm(\"31\") __attribute__((vector_size(16)));\t\\\nregister unsigned char w38 asm(\"31\") __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_ALL()\t\\\n\tGEN_X_DEFINE_0_3()\t\\\n\tGEN_X_DEFINE_4_5()\t\\\n\tGEN_X_DEFINE_6_7()\t\\\n\tGEN_X_DEFINE_8_9()\t\\\n\tGEN_X_DEFINE_10_11()\t\\\n\tGEN_X_DEFINE_12_15()\t\\\n\tGEN_X_DEFINE_16()\t\\\n\tGEN_X_DEFINE_17()\t\\\n\tGEN_X_DEFINE_18_21()\t\\\n\tGEN_X_DEFINE_22_23()\t\\\n\tGEN_X_DEFINE_24_27()\t\\\n\tGEN_X_DEFINE_28_30()\t\\\n\tGEN_X_DEFINE_31()\t\\\n\tGEN_X_DEFINE_32()\t\\\n\tGEN_X_DEFINE_33_36() \t\\\n\tGEN_X_DEFINE_37_38()\n#else\n#define\tGEN_X_DEFINE_0_3()\t\\\n\tunsigned char w0 __attribute__((vector_size(16)));\t\\\n\tunsigned char w1 __attribute__((vector_size(16)));\t\\\n\tunsigned char w2 __attribute__((vector_size(16)));\t\\\n\tunsigned char w3 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_4_5()\t\\\n\tunsigned char w4 __attribute__((vector_size(16)));\t\\\n\tunsigned char w5 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_6_7()\t\\\n\tunsigned char w6 __attribute__((vector_size(16)));\t\\\n\tunsigned char w7 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_8_9()\t\\\n\tunsigned char w8 __attribute__((vector_size(16)));\t\\\n\tunsigned char w9 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_10_11()\t\\\n\tunsigned char w10 __attribute__((vector_size(16)));\t\\\n\tunsigned char w11 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_12_15()\t\\\n\tunsigned char w12 __attribute__((vector_size(16)));\t\\\n\tunsigned char w13 __attribute__((vector_size(16)));\t\\\n\tunsigned char w14 __attribute__((vector_size(16)));\t\\\n\tunsigned char w15 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_16()\t\\\n\tunsigned char w16 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_17()\t\\\n\tunsigned char w17 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_18_21()\t\\\n\tunsigned char w18 __attribute__((vector_size(16)));\t\\\n\tunsigned char w19 __attribute__((vector_size(16)));\t\\\n\tunsigned char w20 __attribute__((vector_size(16)));\t\\\n\tunsigned char w21 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_22_23()\t\\\n\tunsigned char w22 __attribute__((vector_size(16)));\t\\\n\tunsigned char w23 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_24_27()\t\\\n\tunsigned char w24 __attribute__((vector_size(16)));\t\\\n\tunsigned char w25 __attribute__((vector_size(16)));\t\\\n\tunsigned char w26 __attribute__((vector_size(16)));\t\\\n\tunsigned char w27 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_28_30()\t\\\n\tunsigned char w28 __attribute__((vector_size(16)));\t\\\n\tunsigned char w29 __attribute__((vector_size(16)));\t\\\n\tunsigned char w30 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_31()\t\\\n\tunsigned char w31 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_32()\t\\\n\tunsigned char w32 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_33_36()\t\\\n\tunsigned char w33 __attribute__((vector_size(16)));\t\\\n\tunsigned char w34 __attribute__((vector_size(16)));\t\\\n\tunsigned char w35 __attribute__((vector_size(16)));\t\\\n\tunsigned char w36 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_37_38()\t\\\n\tunsigned char w37 __attribute__((vector_size(16)));\t\\\n\tunsigned char w38 __attribute__((vector_size(16)));\n#define\tGEN_X_DEFINE_ALL()\t\\\n\tGEN_X_DEFINE_0_3()\t\\\n\tGEN_X_DEFINE_4_5()\t\\\n\tGEN_X_DEFINE_6_7()\t\\\n\tGEN_X_DEFINE_8_9()\t\\\n\tGEN_X_DEFINE_10_11()\t\\\n\tGEN_X_DEFINE_12_15()\t\\\n\tGEN_X_DEFINE_16()\t\\\n\tGEN_X_DEFINE_17()\t\\\n\tGEN_X_DEFINE_18_21()\t\\\n\tGEN_X_DEFINE_22_23()\t\\\n\tGEN_X_DEFINE_24_27()\t\\\n\tGEN_X_DEFINE_28_30()\t\\\n\tGEN_X_DEFINE_31()\t\\\n\tGEN_X_DEFINE_32()\t\\\n\tGEN_X_DEFINE_33_36()\t\\\n\tGEN_X_DEFINE_37_38()\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}