{
  "module_name": "fnvpair.c",
  "hash_id": "eeda74980caf484c95f7349da979a71f3cb03b38f1c9fc5814004ff9cbe63533",
  "original_prompt": "Ingested from zfs-2.2.2/module/nvpair/fnvpair.c",
  "human_readable_source": " \n\n \n\n#include <sys/nvpair.h>\n#include <sys/kmem.h>\n#include <sys/debug.h>\n#include <sys/param.h>\n#ifndef _KERNEL\n#include <stdlib.h>\n#endif\n\n \n\nnvlist_t *\nfnvlist_alloc(void)\n{\n\tnvlist_t *nvl;\n\tVERIFY0(nvlist_alloc(&nvl, NV_UNIQUE_NAME, KM_SLEEP));\n\treturn (nvl);\n}\n\nvoid\nfnvlist_free(nvlist_t *nvl)\n{\n\tnvlist_free(nvl);\n}\n\nsize_t\nfnvlist_size(nvlist_t *nvl)\n{\n\tsize_t size;\n\tVERIFY0(nvlist_size(nvl, &size, NV_ENCODE_NATIVE));\n\treturn (size);\n}\n\n \nchar *\nfnvlist_pack(nvlist_t *nvl, size_t *sizep)\n{\n\tchar *packed = 0;\n\tVERIFY3U(nvlist_pack(nvl, &packed, sizep, NV_ENCODE_NATIVE,\n\t    KM_SLEEP), ==, 0);\n\treturn (packed);\n}\n\nvoid\nfnvlist_pack_free(char *pack, size_t size)\n{\n#ifdef _KERNEL\n\tkmem_free(pack, size);\n#else\n\t(void) size;\n\tfree(pack);\n#endif\n}\n\nnvlist_t *\nfnvlist_unpack(char *buf, size_t buflen)\n{\n\tnvlist_t *rv;\n\tVERIFY0(nvlist_unpack(buf, buflen, &rv, KM_SLEEP));\n\treturn (rv);\n}\n\nnvlist_t *\nfnvlist_dup(const nvlist_t *nvl)\n{\n\tnvlist_t *rv;\n\tVERIFY0(nvlist_dup(nvl, &rv, KM_SLEEP));\n\treturn (rv);\n}\n\nvoid\nfnvlist_merge(nvlist_t *dst, nvlist_t *src)\n{\n\tVERIFY0(nvlist_merge(dst, src, KM_SLEEP));\n}\n\nsize_t\nfnvlist_num_pairs(nvlist_t *nvl)\n{\n\tsize_t count = 0;\n\tnvpair_t *pair;\n\n\tfor (pair = nvlist_next_nvpair(nvl, 0); pair != NULL;\n\t    pair = nvlist_next_nvpair(nvl, pair))\n\t\tcount++;\n\treturn (count);\n}\n\nvoid\nfnvlist_add_boolean(nvlist_t *nvl, const char *name)\n{\n\tVERIFY0(nvlist_add_boolean(nvl, name));\n}\n\nvoid\nfnvlist_add_boolean_value(nvlist_t *nvl, const char *name, boolean_t val)\n{\n\tVERIFY0(nvlist_add_boolean_value(nvl, name, val));\n}\n\nvoid\nfnvlist_add_byte(nvlist_t *nvl, const char *name, uchar_t val)\n{\n\tVERIFY0(nvlist_add_byte(nvl, name, val));\n}\n\nvoid\nfnvlist_add_int8(nvlist_t *nvl, const char *name, int8_t val)\n{\n\tVERIFY0(nvlist_add_int8(nvl, name, val));\n}\n\nvoid\nfnvlist_add_uint8(nvlist_t *nvl, const char *name, uint8_t val)\n{\n\tVERIFY0(nvlist_add_uint8(nvl, name, val));\n}\n\nvoid\nfnvlist_add_int16(nvlist_t *nvl, const char *name, int16_t val)\n{\n\tVERIFY0(nvlist_add_int16(nvl, name, val));\n}\n\nvoid\nfnvlist_add_uint16(nvlist_t *nvl, const char *name, uint16_t val)\n{\n\tVERIFY0(nvlist_add_uint16(nvl, name, val));\n}\n\nvoid\nfnvlist_add_int32(nvlist_t *nvl, const char *name, int32_t val)\n{\n\tVERIFY0(nvlist_add_int32(nvl, name, val));\n}\n\nvoid\nfnvlist_add_uint32(nvlist_t *nvl, const char *name, uint32_t val)\n{\n\tVERIFY0(nvlist_add_uint32(nvl, name, val));\n}\n\nvoid\nfnvlist_add_int64(nvlist_t *nvl, const char *name, int64_t val)\n{\n\tVERIFY0(nvlist_add_int64(nvl, name, val));\n}\n\nvoid\nfnvlist_add_uint64(nvlist_t *nvl, const char *name, uint64_t val)\n{\n\tVERIFY0(nvlist_add_uint64(nvl, name, val));\n}\n\nvoid\nfnvlist_add_string(nvlist_t *nvl, const char *name, const char *val)\n{\n\tVERIFY0(nvlist_add_string(nvl, name, val));\n}\n\nvoid\nfnvlist_add_nvlist(nvlist_t *nvl, const char *name, nvlist_t *val)\n{\n\tVERIFY0(nvlist_add_nvlist(nvl, name, val));\n}\n\nvoid\nfnvlist_add_nvpair(nvlist_t *nvl, nvpair_t *pair)\n{\n\tVERIFY0(nvlist_add_nvpair(nvl, pair));\n}\n\nvoid\nfnvlist_add_boolean_array(nvlist_t *nvl, const char *name,\n    const boolean_t *val, uint_t n)\n{\n\tVERIFY0(nvlist_add_boolean_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_byte_array(nvlist_t *nvl, const char *name, const uchar_t *val,\n    uint_t n)\n{\n\tVERIFY0(nvlist_add_byte_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_int8_array(nvlist_t *nvl, const char *name, const int8_t *val,\n    uint_t n)\n{\n\tVERIFY0(nvlist_add_int8_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_uint8_array(nvlist_t *nvl, const char *name, const uint8_t *val,\n    uint_t n)\n{\n\tVERIFY0(nvlist_add_uint8_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_int16_array(nvlist_t *nvl, const char *name, const int16_t *val,\n    uint_t n)\n{\n\tVERIFY0(nvlist_add_int16_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_uint16_array(nvlist_t *nvl, const char *name,\n    const uint16_t *val, uint_t n)\n{\n\tVERIFY0(nvlist_add_uint16_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_int32_array(nvlist_t *nvl, const char *name, const int32_t *val,\n    uint_t n)\n{\n\tVERIFY0(nvlist_add_int32_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_uint32_array(nvlist_t *nvl, const char *name,\n    const uint32_t *val, uint_t n)\n{\n\tVERIFY0(nvlist_add_uint32_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_int64_array(nvlist_t *nvl, const char *name, const int64_t *val,\n    uint_t n)\n{\n\tVERIFY0(nvlist_add_int64_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_uint64_array(nvlist_t *nvl, const char *name,\n    const uint64_t *val, uint_t n)\n{\n\tVERIFY0(nvlist_add_uint64_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_string_array(nvlist_t *nvl, const char *name,\n    const char * const *val, uint_t n)\n{\n\tVERIFY0(nvlist_add_string_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_add_nvlist_array(nvlist_t *nvl, const char *name,\n    const nvlist_t * const *val, uint_t n)\n{\n\tVERIFY0(nvlist_add_nvlist_array(nvl, name, val, n));\n}\n\nvoid\nfnvlist_remove(nvlist_t *nvl, const char *name)\n{\n\tVERIFY0(nvlist_remove_all(nvl, name));\n}\n\nvoid\nfnvlist_remove_nvpair(nvlist_t *nvl, nvpair_t *pair)\n{\n\tVERIFY0(nvlist_remove_nvpair(nvl, pair));\n}\n\nnvpair_t *\nfnvlist_lookup_nvpair(nvlist_t *nvl, const char *name)\n{\n\tnvpair_t *rv;\n\tVERIFY0(nvlist_lookup_nvpair(nvl, name, &rv));\n\treturn (rv);\n}\n\n \nboolean_t\nfnvlist_lookup_boolean(const nvlist_t *nvl, const char *name)\n{\n\treturn (nvlist_lookup_boolean(nvl, name) == 0);\n}\n\nboolean_t\nfnvlist_lookup_boolean_value(const nvlist_t *nvl, const char *name)\n{\n\tboolean_t rv;\n\tVERIFY0(nvlist_lookup_boolean_value(nvl, name, &rv));\n\treturn (rv);\n}\n\nuchar_t\nfnvlist_lookup_byte(const nvlist_t *nvl, const char *name)\n{\n\tuchar_t rv;\n\tVERIFY0(nvlist_lookup_byte(nvl, name, &rv));\n\treturn (rv);\n}\n\nint8_t\nfnvlist_lookup_int8(const nvlist_t *nvl, const char *name)\n{\n\tint8_t rv;\n\tVERIFY0(nvlist_lookup_int8(nvl, name, &rv));\n\treturn (rv);\n}\n\nint16_t\nfnvlist_lookup_int16(const nvlist_t *nvl, const char *name)\n{\n\tint16_t rv;\n\tVERIFY0(nvlist_lookup_int16(nvl, name, &rv));\n\treturn (rv);\n}\n\nint32_t\nfnvlist_lookup_int32(const nvlist_t *nvl, const char *name)\n{\n\tint32_t rv;\n\tVERIFY0(nvlist_lookup_int32(nvl, name, &rv));\n\treturn (rv);\n}\n\nint64_t\nfnvlist_lookup_int64(const nvlist_t *nvl, const char *name)\n{\n\tint64_t rv;\n\tVERIFY0(nvlist_lookup_int64(nvl, name, &rv));\n\treturn (rv);\n}\n\nuint8_t\nfnvlist_lookup_uint8(const nvlist_t *nvl, const char *name)\n{\n\tuint8_t rv;\n\tVERIFY0(nvlist_lookup_uint8(nvl, name, &rv));\n\treturn (rv);\n}\n\nuint16_t\nfnvlist_lookup_uint16(const nvlist_t *nvl, const char *name)\n{\n\tuint16_t rv;\n\tVERIFY0(nvlist_lookup_uint16(nvl, name, &rv));\n\treturn (rv);\n}\n\nuint32_t\nfnvlist_lookup_uint32(const nvlist_t *nvl, const char *name)\n{\n\tuint32_t rv;\n\tVERIFY0(nvlist_lookup_uint32(nvl, name, &rv));\n\treturn (rv);\n}\n\nuint64_t\nfnvlist_lookup_uint64(const nvlist_t *nvl, const char *name)\n{\n\tuint64_t rv;\n\tVERIFY0(nvlist_lookup_uint64(nvl, name, &rv));\n\treturn (rv);\n}\n\nconst char *\nfnvlist_lookup_string(const nvlist_t *nvl, const char *name)\n{\n\tconst char *rv;\n\tVERIFY0(nvlist_lookup_string(nvl, name, &rv));\n\treturn (rv);\n}\n\nnvlist_t *\nfnvlist_lookup_nvlist(nvlist_t *nvl, const char *name)\n{\n\tnvlist_t *rv;\n\tVERIFY0(nvlist_lookup_nvlist(nvl, name, &rv));\n\treturn (rv);\n}\nboolean_t *\nfnvlist_lookup_boolean_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tboolean_t *rv;\n\tVERIFY0(nvlist_lookup_boolean_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nuchar_t *\nfnvlist_lookup_byte_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tuchar_t *rv;\n\tVERIFY0(nvlist_lookup_byte_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nint8_t *\nfnvlist_lookup_int8_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tint8_t *rv;\n\tVERIFY0(nvlist_lookup_int8_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nuint8_t *\nfnvlist_lookup_uint8_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tuint8_t *rv;\n\tVERIFY0(nvlist_lookup_uint8_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nint16_t *\nfnvlist_lookup_int16_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tint16_t *rv;\n\tVERIFY0(nvlist_lookup_int16_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nuint16_t *\nfnvlist_lookup_uint16_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tuint16_t *rv;\n\tVERIFY0(nvlist_lookup_uint16_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nint32_t *\nfnvlist_lookup_int32_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tint32_t *rv;\n\tVERIFY0(nvlist_lookup_int32_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nuint32_t *\nfnvlist_lookup_uint32_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tuint32_t *rv;\n\tVERIFY0(nvlist_lookup_uint32_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nint64_t *\nfnvlist_lookup_int64_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tint64_t *rv;\n\tVERIFY0(nvlist_lookup_int64_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nuint64_t *\nfnvlist_lookup_uint64_array(nvlist_t *nvl, const char *name, uint_t *n)\n{\n\tuint64_t *rv;\n\tVERIFY0(nvlist_lookup_uint64_array(nvl, name, &rv, n));\n\treturn (rv);\n}\n\nboolean_t\nfnvpair_value_boolean_value(const nvpair_t *nvp)\n{\n\tboolean_t rv;\n\tVERIFY0(nvpair_value_boolean_value(nvp, &rv));\n\treturn (rv);\n}\n\nuchar_t\nfnvpair_value_byte(const nvpair_t *nvp)\n{\n\tuchar_t rv;\n\tVERIFY0(nvpair_value_byte(nvp, &rv));\n\treturn (rv);\n}\n\nint8_t\nfnvpair_value_int8(const nvpair_t *nvp)\n{\n\tint8_t rv;\n\tVERIFY0(nvpair_value_int8(nvp, &rv));\n\treturn (rv);\n}\n\nint16_t\nfnvpair_value_int16(const nvpair_t *nvp)\n{\n\tint16_t rv;\n\tVERIFY0(nvpair_value_int16(nvp, &rv));\n\treturn (rv);\n}\n\nint32_t\nfnvpair_value_int32(const nvpair_t *nvp)\n{\n\tint32_t rv;\n\tVERIFY0(nvpair_value_int32(nvp, &rv));\n\treturn (rv);\n}\n\nint64_t\nfnvpair_value_int64(const nvpair_t *nvp)\n{\n\tint64_t rv;\n\tVERIFY0(nvpair_value_int64(nvp, &rv));\n\treturn (rv);\n}\n\nuint8_t\nfnvpair_value_uint8(const nvpair_t *nvp)\n{\n\tuint8_t rv;\n\tVERIFY0(nvpair_value_uint8(nvp, &rv));\n\treturn (rv);\n}\n\nuint16_t\nfnvpair_value_uint16(const nvpair_t *nvp)\n{\n\tuint16_t rv;\n\tVERIFY0(nvpair_value_uint16(nvp, &rv));\n\treturn (rv);\n}\n\nuint32_t\nfnvpair_value_uint32(const nvpair_t *nvp)\n{\n\tuint32_t rv;\n\tVERIFY0(nvpair_value_uint32(nvp, &rv));\n\treturn (rv);\n}\n\nuint64_t\nfnvpair_value_uint64(const nvpair_t *nvp)\n{\n\tuint64_t rv;\n\tVERIFY0(nvpair_value_uint64(nvp, &rv));\n\treturn (rv);\n}\n\nconst char *\nfnvpair_value_string(const nvpair_t *nvp)\n{\n\tconst char *rv;\n\tVERIFY0(nvpair_value_string(nvp, &rv));\n\treturn (rv);\n}\n\nnvlist_t *\nfnvpair_value_nvlist(nvpair_t *nvp)\n{\n\tnvlist_t *rv;\n\tVERIFY0(nvpair_value_nvlist(nvp, &rv));\n\treturn (rv);\n}\n\n#if defined(_KERNEL)\n\nEXPORT_SYMBOL(fnvlist_alloc);\nEXPORT_SYMBOL(fnvlist_free);\nEXPORT_SYMBOL(fnvlist_size);\nEXPORT_SYMBOL(fnvlist_pack);\nEXPORT_SYMBOL(fnvlist_pack_free);\nEXPORT_SYMBOL(fnvlist_unpack);\nEXPORT_SYMBOL(fnvlist_dup);\nEXPORT_SYMBOL(fnvlist_merge);\n\nEXPORT_SYMBOL(fnvlist_add_nvpair);\nEXPORT_SYMBOL(fnvlist_add_boolean);\nEXPORT_SYMBOL(fnvlist_add_boolean_value);\nEXPORT_SYMBOL(fnvlist_add_byte);\nEXPORT_SYMBOL(fnvlist_add_int8);\nEXPORT_SYMBOL(fnvlist_add_uint8);\nEXPORT_SYMBOL(fnvlist_add_int16);\nEXPORT_SYMBOL(fnvlist_add_uint16);\nEXPORT_SYMBOL(fnvlist_add_int32);\nEXPORT_SYMBOL(fnvlist_add_uint32);\nEXPORT_SYMBOL(fnvlist_add_int64);\nEXPORT_SYMBOL(fnvlist_add_uint64);\nEXPORT_SYMBOL(fnvlist_add_string);\nEXPORT_SYMBOL(fnvlist_add_nvlist);\nEXPORT_SYMBOL(fnvlist_add_boolean_array);\nEXPORT_SYMBOL(fnvlist_add_byte_array);\nEXPORT_SYMBOL(fnvlist_add_int8_array);\nEXPORT_SYMBOL(fnvlist_add_uint8_array);\nEXPORT_SYMBOL(fnvlist_add_int16_array);\nEXPORT_SYMBOL(fnvlist_add_uint16_array);\nEXPORT_SYMBOL(fnvlist_add_int32_array);\nEXPORT_SYMBOL(fnvlist_add_uint32_array);\nEXPORT_SYMBOL(fnvlist_add_int64_array);\nEXPORT_SYMBOL(fnvlist_add_uint64_array);\nEXPORT_SYMBOL(fnvlist_add_string_array);\nEXPORT_SYMBOL(fnvlist_add_nvlist_array);\n\nEXPORT_SYMBOL(fnvlist_remove);\nEXPORT_SYMBOL(fnvlist_remove_nvpair);\n\nEXPORT_SYMBOL(fnvlist_lookup_nvpair);\nEXPORT_SYMBOL(fnvlist_lookup_boolean);\nEXPORT_SYMBOL(fnvlist_lookup_boolean_value);\nEXPORT_SYMBOL(fnvlist_lookup_byte);\nEXPORT_SYMBOL(fnvlist_lookup_int8);\nEXPORT_SYMBOL(fnvlist_lookup_uint8);\nEXPORT_SYMBOL(fnvlist_lookup_int16);\nEXPORT_SYMBOL(fnvlist_lookup_uint16);\nEXPORT_SYMBOL(fnvlist_lookup_int32);\nEXPORT_SYMBOL(fnvlist_lookup_uint32);\nEXPORT_SYMBOL(fnvlist_lookup_int64);\nEXPORT_SYMBOL(fnvlist_lookup_uint64);\nEXPORT_SYMBOL(fnvlist_lookup_string);\nEXPORT_SYMBOL(fnvlist_lookup_nvlist);\n\nEXPORT_SYMBOL(fnvpair_value_boolean_value);\nEXPORT_SYMBOL(fnvpair_value_byte);\nEXPORT_SYMBOL(fnvpair_value_int8);\nEXPORT_SYMBOL(fnvpair_value_uint8);\nEXPORT_SYMBOL(fnvpair_value_int16);\nEXPORT_SYMBOL(fnvpair_value_uint16);\nEXPORT_SYMBOL(fnvpair_value_int32);\nEXPORT_SYMBOL(fnvpair_value_uint32);\nEXPORT_SYMBOL(fnvpair_value_int64);\nEXPORT_SYMBOL(fnvpair_value_uint64);\nEXPORT_SYMBOL(fnvpair_value_string);\nEXPORT_SYMBOL(fnvpair_value_nvlist);\nEXPORT_SYMBOL(fnvlist_num_pairs);\n\n#endif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}