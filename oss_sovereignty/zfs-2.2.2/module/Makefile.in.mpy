{
  "module_name": "Makefile.in",
  "hash_id": "493364984f931567b302536643ae19fbfad9feef400b594f1a12069277218f3a",
  "original_prompt": "Ingested from zfs-2.2.2/module/Makefile.in",
  "human_readable_source": "include Kbuild\n\nINSTALL_MOD_DIR ?= extra\nINSTALL_MOD_PATH ?= $(DESTDIR)\n\nall: modules\ndistclean maintainer-clean: clean\ninstall: modules_install data_install\nuninstall: modules_uninstall data_uninstall\ncheck:\n\n.PHONY: all distclean maintainer-clean install uninstall check distdir \\\n\tmodules modules-Linux modules-FreeBSD modules-unknown \\\n\tclean clean-Linux clean-FreeBSD \\\n\tmodules_install modules_install-Linux modules_install-FreeBSD \\\n\tdata_install data_install-Linux data_install-FreeBSD \\\n\tmodules_uninstall modules_uninstall-Linux modules_uninstall-FreeBSD \\\n\tdata_uninstall data_uninstall-Linux data_uninstall-FreeBSD \\\n\tcppcheck cppcheck-Linux cppcheck-FreeBSD\n\n# For FreeBSD, use debug options from ./configure if not overridden.\nexport WITH_DEBUG ?= @WITH_DEBUG@\nexport WITH_INVARIANTS ?= @WITH_INVARIANTS@\n\n# Filter out options that FreeBSD make doesn't understand\ngetflags = ( \\\nset -- \\\n  $(filter-out --%,$(firstword $(MFLAGS))) \\\n  $(filter -I%,$(MFLAGS)) \\\n  $(filter -j%,$(MFLAGS)); \\\nfmakeflags=\"\"; \\\nwhile getopts :deiI:j:knqrstw flag; do \\\n  case $$flag in \\\n    \\?) :;; \\\n    :) if [ $$OPTARG = \"j\" ]; then \\\n\t ncpus=$$(sysctl -n kern.smp.cpus 2>/dev/null || :); \\\n\t if [ -n \"$$ncpus\" ]; then fmakeflags=\"$$fmakeflags -j$$ncpus\"; fi; \\\n       fi;; \\\n    d) fmakeflags=\"$$fmakeflags -dA\";; \\\n    *) fmakeflags=\"$$fmakeflags -$$flag$$OPTARG\";; \\\n  esac; \\\ndone; \\\necho $$fmakeflags \\\n)\nFMAKEFLAGS = -C @abs_srcdir@ -f Makefile.bsd $(shell $(getflags))\n\nifneq (@abs_srcdir@,@abs_builddir@)\nFMAKEFLAGS += MAKEOBJDIR=@abs_builddir@\nendif\n\nFMAKE = env -u MAKEFLAGS make $(FMAKEFLAGS)\n\nmodules-Linux:\n\tmkdir -p $(sort $(dir $(spl-objs) $(spl-)))\n\tmkdir -p $(sort $(dir $(zfs-objs) $(zfs-)))\n\t$(MAKE) -C @LINUX_OBJ@ $(if @KERNEL_CC@,CC=@KERNEL_CC@) \\\n\t\t$(if @KERNEL_LD@,LD=@KERNEL_LD@) $(if @KERNEL_LLVM@,LLVM=@KERNEL_LLVM@) \\\n\t\tM=\"$$PWD\" @KERNEL_MAKE@ CONFIG_ZFS=m modules\n\nmodules-FreeBSD:\n\t+$(FMAKE)\n\nmodules-unknown:\n\t@true\n\nmodules: modules-@ac_system@\n\nclean-Linux:\n\t@# Only cleanup the kernel build directories when CONFIG_KERNEL\n\t@# is defined.  This indicates that kernel modules should be built.\n@CONFIG_KERNEL_TRUE@\t$(MAKE) -C @LINUX_OBJ@ M=\"$$PWD\" @KERNEL_MAKE@ clean\n\n\t$(RM) @LINUX_SYMBOLS@ Module.markers\n\tfind . -name '*.ur-safe' -type f -delete\n\nclean-FreeBSD:\n\t+$(FMAKE) clean\n\nclean: clean-@ac_system@\n\n.PHONY: modules_uninstall-Linux-legacy\nmodules_uninstall-Linux-legacy:\n\t$(RM) -r $(addprefix $(KMODDIR)/$(INSTALL_MOD_DIR)/,spl/ avl/ icp/ lua/ nvpair/ unicode/ zcommon/ zfs/ zstd/)\n\nKMODDIR := $(INSTALL_MOD_PATH)/lib/modules/@LINUX_VERSION@\nmodules_install-Linux: modules_uninstall-Linux-legacy\n\t@# Install the kernel modules\n\t$(MAKE) -C @LINUX_OBJ@ M=\"$$PWD\" modules_install \\\n\t\tINSTALL_MOD_PATH=$(INSTALL_MOD_PATH) \\\n\t\tINSTALL_MOD_DIR=$(INSTALL_MOD_DIR) \\\n\t\tKERNELRELEASE=@LINUX_VERSION@\n\t@# Remove extraneous build products when packaging\n\tif [ -n \"$(DESTDIR)\" ]; then \\\n\t\tfind $(KMODDIR) -name 'modules.*' -delete; \\\n\tfi\n\t@# Debian ships tiny fake System.map files that are\n\t@# syntactically valid but just say\n\t@# \"if you want system.map go install this package\"\n\t@# Naturally, depmod is less than amused by this.\n\t@# So if we find it missing or with one of these present,\n\t@# we check for the alternate path for the System.map\n\tsysmap=$(INSTALL_MOD_PATH)/boot/System.map-@LINUX_VERSION@; \\\n\t{ [ -f \"$$sysmap\" ] && [ $$(wc -l < \"$$sysmap\") -ge 100 ]; } || \\\n\t\tsysmap=$(INSTALL_MOD_PATH)/usr/lib/debug/boot/System.map-@LINUX_VERSION@; \\\n\tif [ -f $$sysmap ]; then \\\n\t\tdepmod -ae -F $$sysmap @LINUX_VERSION@; \\\n\tfi\n\nmodules_install-FreeBSD:\n\t@# Install the kernel modules\n\t+$(FMAKE) install\n\nmodules_install: modules_install-@ac_system@\n\ndata_install-Linux:\n\t@mkdir -p $(DESTDIR)/@prefix@/src/zfs-@VERSION@/@LINUX_VERSION@\n\tcp ../zfs.release ../zfs_config.h @LINUX_SYMBOLS@ $(DESTDIR)/@prefix@/src/zfs-@VERSION@/@LINUX_VERSION@\n\ndata_install-FreeBSD:\n\t@\n\ndata_install: data_install-@ac_system@\n\nmodules_uninstall-Linux: modules_uninstall-Linux-legacy\n\t@# Uninstall the kernel modules\n\t$(RM) $(addprefix $(KMODDIR)/$(INSTALL_MOD_DIR)/,zfs.ko spl.ko)\n\nmodules_uninstall-FreeBSD:\n\t@false\n\nmodules_uninstall: modules_uninstall-@ac_system@\n\ndata_uninstall-Linux:\n\t$(RM) $(addprefix $(DESTDIR)/@prefix@/src/zfs-@VERSION@/@LINUX_VERSION@/,zfs.release zfs_config.h @LINUX_SYMBOLS@)\n\ndata_uninstall-FreeBSD:\n\t@\n\ndata_uninstall: data_uninstall-@ac_system@\n\ncppcheck-Linux:\n\t@CPPCHECK@ -j@CPU_COUNT@ --std=c99 --quiet --force --error-exitcode=2 \\\n\t\t--inline-suppr \\\n\t\t--suppress=unmatchedSuppression \\\n\t\t--suppress=noValidConfiguration \\\n\t\t--enable=warning,information -D_KERNEL \\\n\t\t--include=@LINUX_OBJ@/include/generated/autoconf.h \\\n\t\t--include=@top_builddir@/zfs_config.h \\\n\t\t--config-exclude=@LINUX_OBJ@/include \\\n\t\t-i zstd/lib \\\n\t\t-I @LINUX_OBJ@/include \\\n\t\t-I @top_srcdir@/include/os/linux/kernel \\\n\t\t-I @top_srcdir@/include/os/linux/spl \\\n\t\t-I @top_srcdir@/include/os/linux/zfs \\\n\t\t-I @top_srcdir@/include \\\n\t\tavl icp lua nvpair unicode zcommon zfs zstd os/linux\n\ncppcheck-FreeBSD:\n\t@true\n\ncppcheck: cppcheck-@ac_system@\n\ndistdir:\n\tcd @srcdir@ && find . -name '*.[chS]' -exec sh -c 'for f; do mkdir -p $$distdir/$${f%/*}; cp @srcdir@/$$f $$distdir/$$f; done' _ {} +\n\tcp @srcdir@/Makefile.bsd $$distdir/Makefile.bsd\n\ngen-zstd-symbols:\n\tfor obj in $(addprefix zstd/,$(ZSTD_UPSTREAM_OBJS)); do echo; echo \"/* $${obj#zstd/}: */\"; @OBJDUMP@ -t $$obj | awk '$$2 == \"g\" && !/ zfs_/ {print \"#define\\t\" $$6 \" zfs_\" $$6}' | sort; done >> zstd/include/zstd_compat_wrapper.h\n\ncheck-zstd-symbols:\n\t@OBJDUMP@ -t $(addprefix zstd/,$(ZSTD_UPSTREAM_OBJS)) | awk '/file format/ {print}  $$2 == \"g\" && (!/ zfs_/ && !/ __pfx_zfs_/) {++ret; print}  END {exit ret}'\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}