{
  "module_name": "sched_impl.h",
  "hash_id": "8c52c5d3776f100cc56c9e846a8b4d52fff52f08a178bdf89b538532f570d13d",
  "original_prompt": "Ingested from zfs-2.2.2/module/icp/include/sys/crypto/sched_impl.h",
  "human_readable_source": " \n \n\n#ifndef _SYS_CRYPTO_SCHED_IMPL_H\n#define\t_SYS_CRYPTO_SCHED_IMPL_H\n\n \n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#include <sys/zfs_context.h>\n#include <sys/crypto/api.h>\n#include <sys/crypto/spi.h>\n#include <sys/crypto/impl.h>\n#include <sys/crypto/common.h>\n\ntypedef struct kcf_prov_tried {\n\tkcf_provider_desc_t\t*pt_pd;\n\tstruct kcf_prov_tried\t*pt_next;\n} kcf_prov_tried_t;\n\n#define\tIS_FG_SUPPORTED(mdesc, fg)\t\t\\\n\t(((mdesc)->pm_mech_info.cm_func_group_mask & (fg)) != 0)\n\n#define\tIS_PROVIDER_TRIED(pd, tlist)\t\t\\\n\t(tlist != NULL && is_in_triedlist(pd, tlist))\n\n#define\tIS_RECOVERABLE(error)\t\t\t\\\n\t(error == CRYPTO_BUSY ||\t\t\t\\\n\terror == CRYPTO_KEY_SIZE_RANGE)\n\n \ntypedef struct kcf_context {\n\tcrypto_ctx_t\t\tkc_glbl_ctx;\n\tuint_t\t\t\tkc_refcnt;\n\tkcf_provider_desc_t\t*kc_prov_desc;\t \n\tkcf_provider_desc_t\t*kc_sw_prov_desc;\t \n} kcf_context_t;\n\n \n#define\tKCF_CONTEXT_REFRELE(ictx) {\t\t\t\t\\\n\tmembar_producer();\t\t\t\t\t\\\n\tint newval = atomic_add_32_nv(&(ictx)->kc_refcnt, -1);\t\\\n\tASSERT(newval != -1);\t\t\t\t\t\\\n\tif (newval == 0)\t\t\t\t\t\\\n\t\tkcf_free_context(ictx);\t\t\t\t\\\n}\n\n \n#define\tKCF_CONTEXT_COND_RELEASE(rv, kcf_ctx) {\t\t\t\\\n\tif (KCF_CONTEXT_DONE(rv))\t\t\t\t\\\n\t\tKCF_CONTEXT_REFRELE(kcf_ctx);\t\t\t\\\n}\n\n \n#define\tKCF_CONTEXT_DONE(rv)\t\t\t\t\t\\\n\t((rv) != CRYPTO_BUSY &&\t(rv) != CRYPTO_BUFFER_TOO_SMALL)\n\n\n#define\tKCF_SET_PROVIDER_MECHNUM(fmtype, pd, mechp)\t\t\t\\\n\t(mechp)->cm_type =\t\t\t\t\t\t\\\n\t    KCF_TO_PROV_MECHNUM(pd, fmtype);\n\n \ntypedef\tstruct kcf_ctx_template {\n\tsize_t\t\t\t\tct_size;\t \n\tcrypto_spi_ctx_template_t\tct_prov_tmpl;\t \n\t\t\t\t\t\t\t \n} kcf_ctx_template_t;\n\n\nextern void kcf_free_triedlist(kcf_prov_tried_t *);\nextern kcf_prov_tried_t *kcf_insert_triedlist(kcf_prov_tried_t **,\n    kcf_provider_desc_t *, int);\nextern kcf_provider_desc_t *kcf_get_mech_provider(crypto_mech_type_t,\n    kcf_mech_entry_t **, int *, kcf_prov_tried_t *, crypto_func_group_t);\nextern crypto_ctx_t *kcf_new_ctx(kcf_provider_desc_t *);\nextern void kcf_sched_destroy(void);\nextern void kcf_sched_init(void);\nextern void kcf_free_context(kcf_context_t *);\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif  \n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}