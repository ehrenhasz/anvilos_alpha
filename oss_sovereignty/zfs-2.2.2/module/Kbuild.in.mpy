{
  "module_name": "Kbuild.in",
  "hash_id": "e26fef5a6f4f2ba019fd036dd012cb8b2e5c65bc1c9e58a9d780383f7981bff6",
  "original_prompt": "Ingested from zfs-2.2.2/module/Kbuild.in",
  "human_readable_source": "# When integrated in to a monolithic kernel the spl module must appear\n# first.  This ensures its module initialization function is run before\n# any of the other module initialization functions which depend on it.\n\nZFS_MODULE_CFLAGS += -std=gnu99 -Wno-declaration-after-statement\nZFS_MODULE_CFLAGS += -Wmissing-prototypes\nZFS_MODULE_CFLAGS += @KERNEL_DEBUG_CFLAGS@  @NO_FORMAT_ZERO_LENGTH@\n\nifneq ($(KBUILD_EXTMOD),)\nzfs_include = @abs_top_srcdir@/include\nicp_include = @abs_srcdir@/icp/include\nzstd_include = @abs_srcdir@/zstd/include\nZFS_MODULE_CFLAGS += -include @abs_top_builddir@/zfs_config.h\nZFS_MODULE_CFLAGS += -I@abs_top_builddir@/include\nsrc = @abs_srcdir@\nobj = @abs_builddir@\nelse\nzfs_include = $(srctree)/include/zfs\nicp_include = $(srctree)/$(src)/icp/include\nzstd_include = $(srctree)/$(src)/zstd/include\nZFS_MODULE_CFLAGS += -include $(zfs_include)/zfs_config.h\nendif\n\nZFS_MODULE_CFLAGS += -I$(zfs_include)/os/linux/kernel\nZFS_MODULE_CFLAGS += -I$(zfs_include)/os/linux/spl\nZFS_MODULE_CFLAGS += -I$(zfs_include)/os/linux/zfs\nZFS_MODULE_CFLAGS += -I$(zfs_include)\nZFS_MODULE_CPPFLAGS += -D_KERNEL\nZFS_MODULE_CPPFLAGS += @KERNEL_DEBUG_CPPFLAGS@\n\n# KASAN enables -Werror=frame-larger-than=1024, which\n# breaks oh so many parts of our build.\nifeq ($(CONFIG_KASAN),y)\nZFS_MODULE_CFLAGS += -Wno-error=frame-larger-than=\nendif\n\n# Generated binary search code is particularly bad with this optimization.\n# Oddly, range_tree.c is not affected when unrolling is not done and dsl_scan.c\n# is not affected when unrolling is done.\n# Disable it until the following upstream issue is resolved:\n# https://github.com/llvm/llvm-project/issues/62790\nifeq ($(CONFIG_X86),y)\nifeq ($(CONFIG_CC_IS_CLANG),y)\nCFLAGS_zfs/dsl_scan.o += -mllvm -x86-cmov-converter=false\nCFLAGS_zfs/metaslab.o += -mllvm -x86-cmov-converter=false\nCFLAGS_zfs/range_tree.o += -mllvm -x86-cmov-converter=false\nCFLAGS_zfs/zap_micro.o += -mllvm -x86-cmov-converter=false\nendif\nendif\n\nifneq ($(KBUILD_EXTMOD),)\n@CONFIG_QAT_TRUE@ZFS_MODULE_CFLAGS += -I@QAT_SRC@/include\n@CONFIG_QAT_TRUE@KBUILD_EXTRA_SYMBOLS += @QAT_SYMBOLS@\nendif\n\nasflags-y := $(ZFS_MODULE_CFLAGS) $(ZFS_MODULE_CPPFLAGS)\nccflags-y := $(ZFS_MODULE_CFLAGS) $(ZFS_MODULE_CPPFLAGS)\n\nifeq ($(CONFIG_ARM64),y)\nCFLAGS_REMOVE_zcommon/zfs_fletcher_aarch64_neon.o += -mgeneral-regs-only\nCFLAGS_REMOVE_zfs/vdev_raidz_math_aarch64_neon.o += -mgeneral-regs-only\nCFLAGS_REMOVE_zfs/vdev_raidz_math_aarch64_neonx2.o += -mgeneral-regs-only\nendif\n\n# Suppress unused-value warnings in sparc64 architecture headers\nccflags-$(CONFIG_SPARC64) += -Wno-unused-value\n\n\nobj-$(CONFIG_ZFS) := spl.o zfs.o\n\nSPL_OBJS := \\\n\tspl-atomic.o \\\n\tspl-condvar.o \\\n\tspl-cred.o \\\n\tspl-err.o \\\n\tspl-generic.o \\\n\tspl-kmem-cache.o \\\n\tspl-kmem.o \\\n\tspl-kstat.o \\\n\tspl-proc.o \\\n\tspl-procfs-list.o \\\n\tspl-taskq.o \\\n\tspl-thread.o \\\n\tspl-trace.o \\\n\tspl-tsd.o \\\n\tspl-vmem.o \\\n\tspl-xdr.o \\\n\tspl-zlib.o \\\n\tspl-zone.o\n\nspl-objs += $(addprefix os/linux/spl/,$(SPL_OBJS))\n\nzfs-objs += avl/avl.o\n\nICP_OBJS := \\\n\talgs/aes/aes_impl.o \\\n\talgs/aes/aes_impl_generic.o \\\n\talgs/aes/aes_modes.o \\\n\talgs/blake3/blake3.o \\\n\talgs/blake3/blake3_generic.o \\\n\talgs/blake3/blake3_impl.o \\\n\talgs/edonr/edonr.o \\\n\talgs/modes/cbc.o \\\n\talgs/modes/ccm.o \\\n\talgs/modes/ctr.o \\\n\talgs/modes/ecb.o \\\n\talgs/modes/gcm.o \\\n\talgs/modes/gcm_generic.o \\\n\talgs/modes/modes.o \\\n\talgs/sha2/sha2_generic.o \\\n\talgs/sha2/sha256_impl.o \\\n\talgs/sha2/sha512_impl.o \\\n\talgs/skein/skein.o \\\n\talgs/skein/skein_block.o \\\n\talgs/skein/skein_iv.o \\\n\tapi/kcf_cipher.o \\\n\tapi/kcf_ctxops.o \\\n\tapi/kcf_mac.o \\\n\tcore/kcf_callprov.o \\\n\tcore/kcf_mech_tabs.o \\\n\tcore/kcf_prov_lib.o \\\n\tcore/kcf_prov_tabs.o \\\n\tcore/kcf_sched.o \\\n\tillumos-crypto.o \\\n\tio/aes.o \\\n\tio/sha2_mod.o \\\n\tio/skein_mod.o \\\n\tspi/kcf_spi.o\n\nICP_OBJS_X86_64 := \\\n\tasm-x86_64/aes/aes_aesni.o \\\n\tasm-x86_64/aes/aes_amd64.o \\\n\tasm-x86_64/aes/aeskey.o \\\n\tasm-x86_64/blake3/blake3_avx2.o \\\n\tasm-x86_64/blake3/blake3_avx512.o \\\n\tasm-x86_64/blake3/blake3_sse2.o \\\n\tasm-x86_64/blake3/blake3_sse41.o \\\n\tasm-x86_64/sha2/sha256-x86_64.o \\\n\tasm-x86_64/sha2/sha512-x86_64.o \\\n\tasm-x86_64/modes/aesni-gcm-x86_64.o \\\n\tasm-x86_64/modes/gcm_pclmulqdq.o \\\n\tasm-x86_64/modes/ghash-x86_64.o\n\nICP_OBJS_X86 := \\\n\talgs/aes/aes_impl_aesni.o \\\n\talgs/aes/aes_impl_x86-64.o \\\n\talgs/modes/gcm_pclmulqdq.o\n\nICP_OBJS_ARM := \\\n\tasm-arm/sha2/sha256-armv7.o \\\n\tasm-arm/sha2/sha512-armv7.o\n\nICP_OBJS_ARM64 := \\\n\tasm-aarch64/blake3/b3_aarch64_sse2.o \\\n\tasm-aarch64/blake3/b3_aarch64_sse41.o \\\n\tasm-aarch64/sha2/sha256-armv8.o \\\n\tasm-aarch64/sha2/sha512-armv8.o\n\nICP_OBJS_PPC_PPC64 := \\\n\tasm-ppc64/blake3/b3_ppc64le_sse2.o \\\n\tasm-ppc64/blake3/b3_ppc64le_sse41.o \\\n\tasm-ppc64/sha2/sha256-p8.o \\\n\tasm-ppc64/sha2/sha512-p8.o \\\n\tasm-ppc64/sha2/sha256-ppc.o \\\n\tasm-ppc64/sha2/sha512-ppc.o\n\nzfs-objs             += $(addprefix icp/,$(ICP_OBJS))\nzfs-$(CONFIG_X86)    += $(addprefix icp/,$(ICP_OBJS_X86))\nzfs-$(CONFIG_UML_X86)+= $(addprefix icp/,$(ICP_OBJS_X86))\nzfs-$(CONFIG_X86_64) += $(addprefix icp/,$(ICP_OBJS_X86_64))\nzfs-$(CONFIG_ARM)    += $(addprefix icp/,$(ICP_OBJS_ARM))\nzfs-$(CONFIG_ARM64)  += $(addprefix icp/,$(ICP_OBJS_ARM64))\nzfs-$(CONFIG_PPC)    += $(addprefix icp/,$(ICP_OBJS_PPC_PPC64))\nzfs-$(CONFIG_PPC64)  += $(addprefix icp/,$(ICP_OBJS_PPC_PPC64))\n\n$(addprefix $(obj)/icp/,$(ICP_OBJS) $(ICP_OBJS_X86) $(ICP_OBJS_X86_64) \\\n\t$(ICP_OBJS_ARM64) $(ICP_OBJS_PPC_PPC64)) : asflags-y += -I$(icp_include) -I$(zfs_include)/os/linux/spl -I$(zfs_include)\n\n$(addprefix $(obj)/icp/,$(ICP_OBJS) $(ICP_OBJS_X86) $(ICP_OBJS_X86_64) \\\n\t$(ICP_OBJS_ARM64) $(ICP_OBJS_PPC_PPC64)) : ccflags-y += -I$(icp_include) -I$(zfs_include)/os/linux/spl -I$(zfs_include)\n\n# Suppress objtool \"return with modified stack frame\" warnings.\nOBJECT_FILES_NON_STANDARD_aesni-gcm-x86_64.o := y\n\n# Suppress objtool \"unsupported stack pointer realignment\" warnings.\n# See #6950 for the reasoning.\nOBJECT_FILES_NON_STANDARD_sha256-x86_64.o := y\nOBJECT_FILES_NON_STANDARD_sha512-x86_64.o := y\n\nLUA_OBJS := \\\n\tlapi.o \\\n\tlauxlib.o \\\n\tlbaselib.o \\\n\tlcode.o \\\n\tlcompat.o \\\n\tlcorolib.o \\\n\tlctype.o \\\n\tldebug.o \\\n\tldo.o \\\n\tlfunc.o \\\n\tlgc.o \\\n\tllex.o \\\n\tlmem.o \\\n\tlobject.o \\\n\tlopcodes.o \\\n\tlparser.o \\\n\tlstate.o \\\n\tlstring.o \\\n\tlstrlib.o \\\n\tltable.o \\\n\tltablib.o \\\n\tltm.o \\\n\tlvm.o \\\n\tlzio.o \\\n\tsetjmp/setjmp.o\n\nzfs-objs += $(addprefix lua/,$(LUA_OBJS))\n\n\nNVPAIR_OBJS := \\\n\tfnvpair.o \\\n\tnvpair.o \\\n\tnvpair_alloc_fixed.o \\\n\tnvpair_alloc_spl.o\n\nzfs-objs += $(addprefix nvpair/,$(NVPAIR_OBJS))\n\n\nUNICODE_OBJS := \\\n\tu8_textprep.o \\\n\tuconv.o\n\nzfs-objs += $(addprefix unicode/,$(UNICODE_OBJS))\n\n\nZCOMMON_OBJS := \\\n\tcityhash.o \\\n\tzfeature_common.o \\\n\tzfs_comutil.o \\\n\tzfs_deleg.o \\\n\tzfs_fletcher.o \\\n\tzfs_fletcher_superscalar.o \\\n\tzfs_fletcher_superscalar4.o \\\n\tzfs_namecheck.o \\\n\tzfs_prop.o \\\n\tzpool_prop.o \\\n\tzprop_common.o\n\nZCOMMON_OBJS_X86 := \\\n\tzfs_fletcher_avx512.o \\\n\tzfs_fletcher_intel.o \\\n\tzfs_fletcher_sse.o\n\nZCOMMON_OBJS_ARM64 := \\\n\tzfs_fletcher_aarch64_neon.o\n\nzfs-objs            += $(addprefix zcommon/,$(ZCOMMON_OBJS))\nzfs-$(CONFIG_X86)   += $(addprefix zcommon/,$(ZCOMMON_OBJS_X86))\nzfs-$(CONFIG_UML_X86)+= $(addprefix zcommon/,$(ZCOMMON_OBJS_X86))\nzfs-$(CONFIG_ARM64) += $(addprefix zcommon/,$(ZCOMMON_OBJS_ARM64))\n\n\n# Zstd uses -O3 by default, so we should follow\nZFS_ZSTD_FLAGS := -O3\n\n# -fno-tree-vectorize gets set for gcc in zstd/common/compiler.h\n# Set it for other compilers, too.\nZFS_ZSTD_FLAGS += -fno-tree-vectorize\n\n# SSE register return with SSE disabled if -march=znverX is passed\nZFS_ZSTD_FLAGS += -U__BMI__\n\n# Quiet warnings about frame size due to unused code in unmodified zstd lib\nZFS_ZSTD_FLAGS += -Wframe-larger-than=20480\n\nZSTD_OBJS := \\\n\tzfs_zstd.o \\\n\tzstd_sparc.o\n\nZSTD_UPSTREAM_OBJS := \\\n\tlib/common/entropy_common.o \\\n\tlib/common/error_private.o \\\n\tlib/common/fse_decompress.o \\\n\tlib/common/pool.o \\\n\tlib/common/zstd_common.o \\\n\tlib/compress/fse_compress.o \\\n\tlib/compress/hist.o \\\n\tlib/compress/huf_compress.o \\\n\tlib/compress/zstd_compress.o \\\n\tlib/compress/zstd_compress_literals.o \\\n\tlib/compress/zstd_compress_sequences.o \\\n\tlib/compress/zstd_compress_superblock.o \\\n\tlib/compress/zstd_double_fast.o \\\n\tlib/compress/zstd_fast.o \\\n\tlib/compress/zstd_lazy.o \\\n\tlib/compress/zstd_ldm.o \\\n\tlib/compress/zstd_opt.o \\\n\tlib/decompress/huf_decompress.o \\\n\tlib/decompress/zstd_ddict.o \\\n\tlib/decompress/zstd_decompress.o \\\n\tlib/decompress/zstd_decompress_block.o\n\nzfs-objs += $(addprefix zstd/,$(ZSTD_OBJS) $(ZSTD_UPSTREAM_OBJS))\n\n# Disable aarch64 neon SIMD instructions for kernel mode\n$(addprefix $(obj)/zstd/,$(ZSTD_OBJS) $(ZSTD_UPSTREAM_OBJS)) : ccflags-y += -I$(zstd_include) $(ZFS_ZSTD_FLAGS)\n$(addprefix $(obj)/zstd/,$(ZSTD_OBJS) $(ZSTD_UPSTREAM_OBJS)) : asflags-y += -I$(zstd_include)\n$(addprefix $(obj)/zstd/,$(ZSTD_UPSTREAM_OBJS)) : ccflags-y += -include $(zstd_include)/aarch64_compat.h -include $(zstd_include)/zstd_compat_wrapper.h -Wp,-w\n$(obj)/zstd/zfs_zstd.o : ccflags-y += -include $(zstd_include)/zstd_compat_wrapper.h\n\n\nZFS_OBJS := \\\n\tabd.o \\\n\taggsum.o \\\n\tarc.o \\\n\tblake3_zfs.o \\\n\tblkptr.o \\\n\tbplist.o \\\n\tbpobj.o \\\n\tbptree.o \\\n\tbqueue.o \\\n\tbrt.o \\\n\tbtree.o \\\n\tdataset_kstats.o \\\n\tdbuf.o \\\n\tdbuf_stats.o \\\n\tddt.o \\\n\tddt_zap.o \\\n\tdmu.o \\\n\tdmu_diff.o \\\n\tdmu_object.o \\\n\tdmu_objset.o \\\n\tdmu_recv.o \\\n\tdmu_redact.o \\\n\tdmu_send.o \\\n\tdmu_traverse.o \\\n\tdmu_tx.o \\\n\tdmu_zfetch.o \\\n\tdnode.o \\\n\tdnode_sync.o \\\n\tdsl_bookmark.o \\\n\tdsl_crypt.o \\\n\tdsl_dataset.o \\\n\tdsl_deadlist.o \\\n\tdsl_deleg.o \\\n\tdsl_destroy.o \\\n\tdsl_dir.o \\\n\tdsl_pool.o \\\n\tdsl_prop.o \\\n\tdsl_scan.o \\\n\tdsl_synctask.o \\\n\tdsl_userhold.o \\\n\tedonr_zfs.o \\\n\tfm.o \\\n\tgzip.o \\\n\thkdf.o \\\n\tlz4.o \\\n\tlz4_zfs.o \\\n\tlzjb.o \\\n\tmetaslab.o \\\n\tmmp.o \\\n\tmultilist.o \\\n\tobjlist.o \\\n\tpathname.o \\\n\trange_tree.o \\\n\trefcount.o \\\n\trrwlock.o \\\n\tsa.o \\\n\tsha2_zfs.o \\\n\tskein_zfs.o \\\n\tspa.o \\\n\tspa_checkpoint.o \\\n\tspa_config.o \\\n\tspa_errlog.o \\\n\tspa_history.o \\\n\tspa_log_spacemap.o \\\n\tspa_misc.o \\\n\tspa_stats.o \\\n\tspace_map.o \\\n\tspace_reftree.o \\\n\ttxg.o \\\n\tuberblock.o \\\n\tunique.o \\\n\tvdev.o \\\n\tvdev_draid.o \\\n\tvdev_draid_rand.o \\\n\tvdev_indirect.o \\\n\tvdev_indirect_births.o \\\n\tvdev_indirect_mapping.o \\\n\tvdev_initialize.o \\\n\tvdev_label.o \\\n\tvdev_mirror.o \\\n\tvdev_missing.o \\\n\tvdev_queue.o \\\n\tvdev_raidz.o \\\n\tvdev_raidz_math.o \\\n\tvdev_raidz_math_scalar.o \\\n\tvdev_rebuild.o \\\n\tvdev_removal.o \\\n\tvdev_root.o \\\n\tvdev_trim.o \\\n\tzap.o \\\n\tzap_leaf.o \\\n\tzap_micro.o \\\n\tzcp.o \\\n\tzcp_get.o \\\n\tzcp_global.o \\\n\tzcp_iter.o \\\n\tzcp_set.o \\\n\tzcp_synctask.o \\\n\tzfeature.o \\\n\tzfs_byteswap.o \\\n\tzfs_chksum.o \\\n\tzfs_fm.o \\\n\tzfs_fuid.o \\\n\tzfs_impl.o \\\n\tzfs_ioctl.o \\\n\tzfs_log.o \\\n\tzfs_onexit.o \\\n\tzfs_quota.o \\\n\tzfs_ratelimit.o \\\n\tzfs_replay.o \\\n\tzfs_rlock.o \\\n\tzfs_sa.o \\\n\tzfs_vnops.o \\\n\tzil.o \\\n\tzio.o \\\n\tzio_checksum.o \\\n\tzio_compress.o \\\n\tzio_inject.o \\\n\tzle.o \\\n\tzrlock.o \\\n\tzthr.o \\\n\tzvol.o\n\nZFS_OBJS_OS := \\\n\tabd_os.o \\\n\tarc_os.o \\\n\tmmp_os.o \\\n\tpolicy.o \\\n\tqat.o \\\n\tqat_compress.o \\\n\tqat_crypt.o \\\n\tspa_misc_os.o \\\n\ttrace.o \\\n\tvdev_disk.o \\\n\tvdev_file.o \\\n\tzfs_acl.o \\\n\tzfs_ctldir.o \\\n\tzfs_debug.o \\\n\tzfs_dir.o \\\n\tzfs_file_os.o \\\n\tzfs_ioctl_os.o \\\n\tzfs_racct.o \\\n\tzfs_sysfs.o \\\n\tzfs_uio.o \\\n\tzfs_vfsops.o \\\n\tzfs_vnops_os.o \\\n\tzfs_znode.o \\\n\tzio_crypt.o \\\n\tzpl_ctldir.o \\\n\tzpl_export.o \\\n\tzpl_file.o \\\n\tzpl_file_range.o \\\n\tzpl_inode.o \\\n\tzpl_super.o \\\n\tzpl_xattr.o \\\n\tzvol_os.o\n\nZFS_OBJS_X86 := \\\n\tvdev_raidz_math_avx2.o \\\n\tvdev_raidz_math_avx512bw.o \\\n\tvdev_raidz_math_avx512f.o \\\n\tvdev_raidz_math_sse2.o \\\n\tvdev_raidz_math_ssse3.o\n\nZFS_OBJS_ARM64 := \\\n\tvdev_raidz_math_aarch64_neon.o \\\n\tvdev_raidz_math_aarch64_neonx2.o\n\nZFS_OBJS_PPC_PPC64 := \\\n\tvdev_raidz_math_powerpc_altivec.o\n\nzfs-objs            += $(addprefix zfs/,$(ZFS_OBJS)) $(addprefix os/linux/zfs/,$(ZFS_OBJS_OS))\nzfs-$(CONFIG_X86)   += $(addprefix zfs/,$(ZFS_OBJS_X86))\nzfs-$(CONFIG_UML_X86)+= $(addprefix zfs/,$(ZFS_OBJS_X86))\nzfs-$(CONFIG_ARM64) += $(addprefix zfs/,$(ZFS_OBJS_ARM64))\nzfs-$(CONFIG_PPC)   += $(addprefix zfs/,$(ZFS_OBJS_PPC_PPC64))\nzfs-$(CONFIG_PPC64) += $(addprefix zfs/,$(ZFS_OBJS_PPC_PPC64))\n\nUBSAN_SANITIZE_zap_leaf.o := n\nUBSAN_SANITIZE_zap_micro.o := n\nUBSAN_SANITIZE_sa.o := n\n\n# Suppress incorrect warnings from versions of objtool which are not\n# aware of x86 EVEX prefix instructions used for AVX512.\nOBJECT_FILES_NON_STANDARD_vdev_raidz_math_avx512bw.o := y\nOBJECT_FILES_NON_STANDARD_vdev_raidz_math_avx512f.o := y\n\nifeq ($(CONFIG_ALTIVEC),y)\n$(obj)/zfs/vdev_raidz_math_powerpc_altivec.o : c_flags += -maltivec\nendif\n",
  "logic_map": {},
  "failure_modes": [],
  "crash_correlation_map": {}
}