CORTEX_STREAM(7)          AnvilOS System Manual          CORTEX_STREAM(7)

NAME
       cortex_stream - The Pulse of the Machine

SYNOPSIS
       SQLite Table: `live_stream` in `data/cortex.db`

DESCRIPTION
       The Cortex Stream is the real-time telemetry bus of AnvilOS. It acts as
       the central nervous system, capturing every thought, action, and error
       generated by the Sovereign Agents (AIMEAT, The Forge, The Processor).

       Unlike the `card_stack` (which tracks state), the Stream tracks **flow**.
       It is the primary data source for the `matrix.py` visualization.

SCHEMA
       The stream is persisted in `data/cortex.db`.

       TABLE live_stream (
           id          INTEGER PRIMARY KEY AUTOINCREMENT,
           agent_id    TEXT,      -- Who spoke? (AIMEAT, FORGE, MAINFRAME)
           event_type  TEXT,      -- What happened? (INFO, ERROR, PROCESSING)
           details     TEXT,      -- JSON payload or raw text
           timestamp   DATETIME DEFAULT CURRENT_TIMESTAMP
       );

EVENT TYPES
       Standardized event codes ensure the Matrix can color-code the stream.

       STARTUP
               emitted when a daemon comes online.
               Color: Bright Green

       PROCESSING
              emitted when the Processor picks up a card.
              Color: Cyan

       COMPLETE
              emitted when a card is successfully PUNCHED (Status 2).
              Color: Green

       REJECTED
              emitted when The Warden blocks a card (e.g., Host Tool usage).
              Color: Orange/Red

       CRASH / ERROR
              emitted when a Python exception occurs.
              Color: Red Background / Bold White Text

       FORGE_SUBMIT
              emitted by AIMEAT when injecting new directives.
              Color: Magenta

AGENTS
       AIMEAT
              The Interface. Logs user commands, injections, and thoughts.

       FORGE (The Architect)
              The Mind. Logs reasoning steps and recipe generation.

       MAINFRAME (The Processor)
              The Hand. Logs execution results, stdout/stderr, and file writes.

INTEGRATION
       To write to the stream from Python:

       ```python
       from anvilos.cortex.db_interface import CortexDB
       db = CortexDB("data/cortex.db")
       db.log_stream("AGENT_NAME", "EVENT_TYPE", {"key": "value"})
       ```

       To view the stream:
       - Use `matrix.py` for the "Pride in the Machine" visualizer.
       - Use `mainframe_monitor.py` for the dashboard view.
       - Use `sqlite3` for raw queries:
         `SELECT * FROM live_stream ORDER BY id DESC LIMIT 10;`

SEE ALSO
       mainframe_monitor(7), the_forge(7), aimeat(1)
